diff -urN ./.gdbinit ../xv6-labs-2021/.gdbinit
--- ./.gdbinit	2021-12-05 17:54:42.000000000 +0800
+++ ../xv6-labs-2021/.gdbinit	1970-01-01 08:00:00.000000000 +0800
@@ -1,5 +0,0 @@
-set confirm off
-set architecture riscv:rv64
-target remote 127.0.0.1:25501
-symbol-file kernel/kernel
-set disassemble-next-line auto
diff -urN ./.gdbinit.tmpl-riscv ../xv6-labs-2021/.gdbinit.tmpl-riscv
--- ./.gdbinit.tmpl-riscv	2021-12-05 17:48:45.000000000 +0800
+++ ../xv6-labs-2021/.gdbinit.tmpl-riscv	2021-11-18 15:54:53.000000000 +0800
@@ -3,3 +3,4 @@
 target remote 127.0.0.1:1234
 symbol-file kernel/kernel
 set disassemble-next-line auto
+set riscv use-compressed-breakpoints yes
diff -urN ./.git/COMMIT_EDITMSG ../xv6-labs-2021/.git/COMMIT_EDITMSG
--- ./.git/COMMIT_EDITMSG	1970-01-01 08:00:00.000000000 +0800
+++ ../xv6-labs-2021/.git/COMMIT_EDITMSG	2021-11-26 14:01:03.000000000 +0800
@@ -0,0 +1 @@
+first section finished.
diff -urN ./.git/FETCH_HEAD ../xv6-labs-2021/.git/FETCH_HEAD
--- ./.git/FETCH_HEAD	2021-12-05 17:48:29.000000000 +0800
+++ ../xv6-labs-2021/.git/FETCH_HEAD	2021-11-26 14:17:07.000000000 +0800
@@ -1,13 +1,10 @@
-f7e8bfc8393ac6e43ba2dd48e021ba68ce827d8b	not-for-merge	branch 'cow' of git://g.csail.mit.edu/xv6-labs-2020
-74a81c619dcb9f5daad16b227d799c30c4d563ab	not-for-merge	branch 'fs' of git://g.csail.mit.edu/xv6-labs-2020
-b34ddc999a5554d62d981971dd35b63c0c311c5c	not-for-merge	branch 'lazy' of git://g.csail.mit.edu/xv6-labs-2020
-a4eaf20da42a8777be05502dc342633ec97c3029	not-for-merge	branch 'lock' of git://g.csail.mit.edu/xv6-labs-2020
-7d085c803a458b78e6bd19f34555e09c921afdbb	not-for-merge	branch 'master' of git://g.csail.mit.edu/xv6-labs-2020
-82bc3d5ee6564de79889bdd146c580399bdf04e6	not-for-merge	branch 'mmap' of git://g.csail.mit.edu/xv6-labs-2020
-8c336ca9e340196025a8d80f9ac34fcc0230bdd5	not-for-merge	branch 'net' of git://g.csail.mit.edu/xv6-labs-2020
-773d70bb9c12e6e39932fce95228ced8b0fd58df	not-for-merge	branch 'pgtbl' of git://g.csail.mit.edu/xv6-labs-2020
-a3c5ae4872880ea4a497bb7356cd62191bfe1cc3	not-for-merge	branch 'riscv' of git://g.csail.mit.edu/xv6-labs-2020
-8813049eec419b343e7ccd8d72e36491053e0903	not-for-merge	branch 'syscall' of git://g.csail.mit.edu/xv6-labs-2020
-023d4a1d444ad34f375c1a5e7aa90e97bae183c6	not-for-merge	branch 'thread' of git://g.csail.mit.edu/xv6-labs-2020
-2455162885c4218ec4b1311ceff30b9c97717404	not-for-merge	branch 'traps' of git://g.csail.mit.edu/xv6-labs-2020
-40db4f085bf3b28df45858ff8bbf084743b2c03c	not-for-merge	branch 'util' of git://g.csail.mit.edu/xv6-labs-2020
+f654383cdec479c9d53a02bffa1ab5526f6c3ca4		branch 'util' of git://g.csail.mit.edu/xv6-labs-2021
+c9818915934504523e52a33e2755b7aff54c495e	not-for-merge	branch 'cow' of git://g.csail.mit.edu/xv6-labs-2021
+46bcbaf1f2b638ede67e3dd1fcccee226a772fa5	not-for-merge	branch 'fs' of git://g.csail.mit.edu/xv6-labs-2021
+281b66cf19660eb15c4542b63693c74a9ced0467	not-for-merge	branch 'lock' of git://g.csail.mit.edu/xv6-labs-2021
+1bd9c80b1ef5eb70b91bbd1dbea9c1d953cdc555	not-for-merge	branch 'net' of git://g.csail.mit.edu/xv6-labs-2021
+1e6b2dec7d5ca49571e426ccc6cd686d009b6d07	not-for-merge	branch 'pgtbl' of git://g.csail.mit.edu/xv6-labs-2021
+a1da53a5a12e21b44a2c79d962a437fa2107627c	not-for-merge	branch 'riscv' of git://g.csail.mit.edu/xv6-labs-2021
+1e6e6cafbb26a898b8c3f90e819fc5e7227dc8af	not-for-merge	branch 'syscall' of git://g.csail.mit.edu/xv6-labs-2021
+7e0a45c6e73c5552d913ae49d090b9a11bbd95f9	not-for-merge	branch 'thread' of git://g.csail.mit.edu/xv6-labs-2021
+219a8d7d70b6ac66b1447aeada079a1f8c3027f7	not-for-merge	branch 'traps' of git://g.csail.mit.edu/xv6-labs-2021
diff -urN ./.git/ORIG_HEAD ../xv6-labs-2021/.git/ORIG_HEAD
--- ./.git/ORIG_HEAD	1970-01-01 08:00:00.000000000 +0800
+++ ../xv6-labs-2021/.git/ORIG_HEAD	2021-11-26 14:54:29.000000000 +0800
@@ -0,0 +1 @@
+24db5fd1c95c2c23a91c307eb8ad597e1fc6549d
diff -urN ./.git/config ../xv6-labs-2021/.git/config
--- ./.git/config	2021-12-05 17:48:45.000000000 +0800
+++ ../xv6-labs-2021/.git/config	2021-11-23 10:19:27.000000000 +0800
@@ -6,11 +6,11 @@
 	ignorecase = true
 	precomposeunicode = true
 [remote "origin"]
-	url = git@github.com:moon548834/xv6-labs-2020.git
+	url = git://g.csail.mit.edu/xv6-labs-2021
 	fetch = +refs/heads/*:refs/remotes/origin/*
-[remote "public"]
-	url = git://g.csail.mit.edu/xv6-labs-2020
-	fetch = +refs/heads/*:refs/remotes/public/*
 [branch "util"]
-	remote = public
+	remote = origin
 	merge = refs/heads/util
+[branch "syscall"]
+	remote = origin
+	merge = refs/heads/syscall
Binary files ./.git/index and ../xv6-labs-2021/.git/index differ
diff -urN ./.git/logs/HEAD ../xv6-labs-2021/.git/logs/HEAD
--- ./.git/logs/HEAD	2021-12-05 17:48:45.000000000 +0800
+++ ../xv6-labs-2021/.git/logs/HEAD	2021-12-05 17:40:55.000000000 +0800
@@ -1 +1,17 @@
-0000000000000000000000000000000000000000 40db4f085bf3b28df45858ff8bbf084743b2c03c fanzhipeng <fzp548834@163.com> 1638697725 +0800	checkout: moving from master to util
+0000000000000000000000000000000000000000 f654383cdec479c9d53a02bffa1ab5526f6c3ca4 fanzhipeng <fzp548834@163.com> 1637222093 +0800	checkout: moving from master to util
+f654383cdec479c9d53a02bffa1ab5526f6c3ca4 b58be040ddc976b582f0f18c2b0defb7df4b0f47 fanzhipeng <fzp548834@163.com> 1637633947 +0800	commit: lab1 passed
+b58be040ddc976b582f0f18c2b0defb7df4b0f47 1e6e6cafbb26a898b8c3f90e819fc5e7227dc8af fanzhipeng <fzp548834@163.com> 1637633967 +0800	checkout: moving from util to syscall
+1e6e6cafbb26a898b8c3f90e819fc5e7227dc8af 842c88d3ab8b4f807f9246b0d7259a8afb279d21 fanzhipeng <fzp548834@163.com> 1637640657 +0800	commit: lab2 passed
+842c88d3ab8b4f807f9246b0d7259a8afb279d21 842c88d3ab8b4f807f9246b0d7259a8afb279d21 fanzhipeng <fzp548834@163.com> 1637664667 +0800	checkout: moving from syscall to pgtbl
+842c88d3ab8b4f807f9246b0d7259a8afb279d21 842c88d3ab8b4f807f9246b0d7259a8afb279d21 fanzhipeng <fzp548834@163.com> 1637904107 +0800	checkout: moving from pgtbl to pgtbl
+842c88d3ab8b4f807f9246b0d7259a8afb279d21 842c88d3ab8b4f807f9246b0d7259a8afb279d21 fanzhipeng <fzp548834@163.com> 1637905974 +0800	checkout: moving from pgtbl to syscall
+842c88d3ab8b4f807f9246b0d7259a8afb279d21 842c88d3ab8b4f807f9246b0d7259a8afb279d21 fanzhipeng <fzp548834@163.com> 1637906083 +0800	checkout: moving from syscall to pgtbl
+842c88d3ab8b4f807f9246b0d7259a8afb279d21 24db5fd1c95c2c23a91c307eb8ad597e1fc6549d fanzhipeng <fzp548834@163.com> 1637906463 +0800	commit: first section finished.
+24db5fd1c95c2c23a91c307eb8ad597e1fc6549d b58be040ddc976b582f0f18c2b0defb7df4b0f47 fanzhipeng <fzp548834@163.com> 1637906468 +0800	checkout: moving from pgtbl to util
+b58be040ddc976b582f0f18c2b0defb7df4b0f47 24db5fd1c95c2c23a91c307eb8ad597e1fc6549d fanzhipeng <fzp548834@163.com> 1637906818 +0800	checkout: moving from util to pgtbl
+24db5fd1c95c2c23a91c307eb8ad597e1fc6549d 24db5fd1c95c2c23a91c307eb8ad597e1fc6549d fanzhipeng <fzp548834@163.com> 1637907267 +0800	reset: moving to HEAD
+24db5fd1c95c2c23a91c307eb8ad597e1fc6549d 842c88d3ab8b4f807f9246b0d7259a8afb279d21 fanzhipeng <fzp548834@163.com> 1637907277 +0800	checkout: moving from pgtbl to syscall
+842c88d3ab8b4f807f9246b0d7259a8afb279d21 b58be040ddc976b582f0f18c2b0defb7df4b0f47 fanzhipeng <fzp548834@163.com> 1637907291 +0800	checkout: moving from syscall to util
+b58be040ddc976b582f0f18c2b0defb7df4b0f47 24db5fd1c95c2c23a91c307eb8ad597e1fc6549d fanzhipeng <fzp548834@163.com> 1637907847 +0800	checkout: moving from util to pgtbl
+24db5fd1c95c2c23a91c307eb8ad597e1fc6549d 24db5fd1c95c2c23a91c307eb8ad597e1fc6549d fanzhipeng <fzp548834@163.com> 1637909669 +0800	reset: moving to HEAD
+24db5fd1c95c2c23a91c307eb8ad597e1fc6549d b58be040ddc976b582f0f18c2b0defb7df4b0f47 fanzhipeng <fzp548834@163.com> 1638697255 +0800	checkout: moving from pgtbl to util
diff -urN ./.git/logs/refs/heads/pgtbl ../xv6-labs-2021/.git/logs/refs/heads/pgtbl
--- ./.git/logs/refs/heads/pgtbl	1970-01-01 08:00:00.000000000 +0800
+++ ../xv6-labs-2021/.git/logs/refs/heads/pgtbl	2021-11-26 14:01:03.000000000 +0800
@@ -0,0 +1,2 @@
+0000000000000000000000000000000000000000 842c88d3ab8b4f807f9246b0d7259a8afb279d21 fanzhipeng <fzp548834@163.com> 1637664667 +0800	branch: Created from HEAD
+842c88d3ab8b4f807f9246b0d7259a8afb279d21 24db5fd1c95c2c23a91c307eb8ad597e1fc6549d fanzhipeng <fzp548834@163.com> 1637906463 +0800	commit: first section finished.
diff -urN ./.git/logs/refs/heads/syscall ../xv6-labs-2021/.git/logs/refs/heads/syscall
--- ./.git/logs/refs/heads/syscall	1970-01-01 08:00:00.000000000 +0800
+++ ../xv6-labs-2021/.git/logs/refs/heads/syscall	2021-11-23 12:10:57.000000000 +0800
@@ -0,0 +1,2 @@
+0000000000000000000000000000000000000000 1e6e6cafbb26a898b8c3f90e819fc5e7227dc8af fanzhipeng <fzp548834@163.com> 1637633967 +0800	branch: Created from refs/remotes/origin/syscall
+1e6e6cafbb26a898b8c3f90e819fc5e7227dc8af 842c88d3ab8b4f807f9246b0d7259a8afb279d21 fanzhipeng <fzp548834@163.com> 1637640657 +0800	commit: lab2 passed
diff -urN ./.git/logs/refs/heads/util ../xv6-labs-2021/.git/logs/refs/heads/util
--- ./.git/logs/refs/heads/util	2021-12-05 17:48:45.000000000 +0800
+++ ../xv6-labs-2021/.git/logs/refs/heads/util	2021-11-23 10:19:07.000000000 +0800
@@ -1 +1,2 @@
-0000000000000000000000000000000000000000 40db4f085bf3b28df45858ff8bbf084743b2c03c fanzhipeng <fzp548834@163.com> 1638697725 +0800	branch: Created from refs/remotes/public/util
+0000000000000000000000000000000000000000 f654383cdec479c9d53a02bffa1ab5526f6c3ca4 fanzhipeng <fzp548834@163.com> 1637222093 +0800	branch: Created from refs/remotes/origin/util
+f654383cdec479c9d53a02bffa1ab5526f6c3ca4 b58be040ddc976b582f0f18c2b0defb7df4b0f47 fanzhipeng <fzp548834@163.com> 1637633947 +0800	commit: lab1 passed
diff -urN ./.git/logs/refs/remotes/origin/util ../xv6-labs-2021/.git/logs/refs/remotes/origin/util
--- ./.git/logs/refs/remotes/origin/util	2021-12-05 17:50:12.000000000 +0800
+++ ../xv6-labs-2021/.git/logs/refs/remotes/origin/util	1970-01-01 08:00:00.000000000 +0800
@@ -1 +0,0 @@
-0000000000000000000000000000000000000000 40db4f085bf3b28df45858ff8bbf084743b2c03c fanzhipeng <fzp548834@163.com> 1638697812 +0800	update by push
diff -urN ./.git/logs/refs/remotes/public/cow ../xv6-labs-2021/.git/logs/refs/remotes/public/cow
--- ./.git/logs/refs/remotes/public/cow	2021-12-05 17:48:29.000000000 +0800
+++ ../xv6-labs-2021/.git/logs/refs/remotes/public/cow	1970-01-01 08:00:00.000000000 +0800
@@ -1 +0,0 @@
-0000000000000000000000000000000000000000 f7e8bfc8393ac6e43ba2dd48e021ba68ce827d8b fanzhipeng <fzp548834@163.com> 1638697709 +0800	fetch public: storing head
diff -urN ./.git/logs/refs/remotes/public/fs ../xv6-labs-2021/.git/logs/refs/remotes/public/fs
--- ./.git/logs/refs/remotes/public/fs	2021-12-05 17:48:29.000000000 +0800
+++ ../xv6-labs-2021/.git/logs/refs/remotes/public/fs	1970-01-01 08:00:00.000000000 +0800
@@ -1 +0,0 @@
-0000000000000000000000000000000000000000 74a81c619dcb9f5daad16b227d799c30c4d563ab fanzhipeng <fzp548834@163.com> 1638697709 +0800	fetch public: storing head
diff -urN ./.git/logs/refs/remotes/public/lazy ../xv6-labs-2021/.git/logs/refs/remotes/public/lazy
--- ./.git/logs/refs/remotes/public/lazy	2021-12-05 17:48:29.000000000 +0800
+++ ../xv6-labs-2021/.git/logs/refs/remotes/public/lazy	1970-01-01 08:00:00.000000000 +0800
@@ -1 +0,0 @@
-0000000000000000000000000000000000000000 b34ddc999a5554d62d981971dd35b63c0c311c5c fanzhipeng <fzp548834@163.com> 1638697709 +0800	fetch public: storing head
diff -urN ./.git/logs/refs/remotes/public/lock ../xv6-labs-2021/.git/logs/refs/remotes/public/lock
--- ./.git/logs/refs/remotes/public/lock	2021-12-05 17:48:29.000000000 +0800
+++ ../xv6-labs-2021/.git/logs/refs/remotes/public/lock	1970-01-01 08:00:00.000000000 +0800
@@ -1 +0,0 @@
-0000000000000000000000000000000000000000 a4eaf20da42a8777be05502dc342633ec97c3029 fanzhipeng <fzp548834@163.com> 1638697709 +0800	fetch public: storing head
diff -urN ./.git/logs/refs/remotes/public/master ../xv6-labs-2021/.git/logs/refs/remotes/public/master
--- ./.git/logs/refs/remotes/public/master	2021-12-05 17:48:29.000000000 +0800
+++ ../xv6-labs-2021/.git/logs/refs/remotes/public/master	1970-01-01 08:00:00.000000000 +0800
@@ -1 +0,0 @@
-0000000000000000000000000000000000000000 7d085c803a458b78e6bd19f34555e09c921afdbb fanzhipeng <fzp548834@163.com> 1638697709 +0800	fetch public: storing head
diff -urN ./.git/logs/refs/remotes/public/mmap ../xv6-labs-2021/.git/logs/refs/remotes/public/mmap
--- ./.git/logs/refs/remotes/public/mmap	2021-12-05 17:48:29.000000000 +0800
+++ ../xv6-labs-2021/.git/logs/refs/remotes/public/mmap	1970-01-01 08:00:00.000000000 +0800
@@ -1 +0,0 @@
-0000000000000000000000000000000000000000 82bc3d5ee6564de79889bdd146c580399bdf04e6 fanzhipeng <fzp548834@163.com> 1638697709 +0800	fetch public: storing head
diff -urN ./.git/logs/refs/remotes/public/net ../xv6-labs-2021/.git/logs/refs/remotes/public/net
--- ./.git/logs/refs/remotes/public/net	2021-12-05 17:48:29.000000000 +0800
+++ ../xv6-labs-2021/.git/logs/refs/remotes/public/net	1970-01-01 08:00:00.000000000 +0800
@@ -1 +0,0 @@
-0000000000000000000000000000000000000000 8c336ca9e340196025a8d80f9ac34fcc0230bdd5 fanzhipeng <fzp548834@163.com> 1638697709 +0800	fetch public: storing head
diff -urN ./.git/logs/refs/remotes/public/pgtbl ../xv6-labs-2021/.git/logs/refs/remotes/public/pgtbl
--- ./.git/logs/refs/remotes/public/pgtbl	2021-12-05 17:48:29.000000000 +0800
+++ ../xv6-labs-2021/.git/logs/refs/remotes/public/pgtbl	1970-01-01 08:00:00.000000000 +0800
@@ -1 +0,0 @@
-0000000000000000000000000000000000000000 773d70bb9c12e6e39932fce95228ced8b0fd58df fanzhipeng <fzp548834@163.com> 1638697709 +0800	fetch public: storing head
diff -urN ./.git/logs/refs/remotes/public/riscv ../xv6-labs-2021/.git/logs/refs/remotes/public/riscv
--- ./.git/logs/refs/remotes/public/riscv	2021-12-05 17:48:29.000000000 +0800
+++ ../xv6-labs-2021/.git/logs/refs/remotes/public/riscv	1970-01-01 08:00:00.000000000 +0800
@@ -1 +0,0 @@
-0000000000000000000000000000000000000000 a3c5ae4872880ea4a497bb7356cd62191bfe1cc3 fanzhipeng <fzp548834@163.com> 1638697709 +0800	fetch public: storing head
diff -urN ./.git/logs/refs/remotes/public/syscall ../xv6-labs-2021/.git/logs/refs/remotes/public/syscall
--- ./.git/logs/refs/remotes/public/syscall	2021-12-05 17:48:29.000000000 +0800
+++ ../xv6-labs-2021/.git/logs/refs/remotes/public/syscall	1970-01-01 08:00:00.000000000 +0800
@@ -1 +0,0 @@
-0000000000000000000000000000000000000000 8813049eec419b343e7ccd8d72e36491053e0903 fanzhipeng <fzp548834@163.com> 1638697709 +0800	fetch public: storing head
diff -urN ./.git/logs/refs/remotes/public/thread ../xv6-labs-2021/.git/logs/refs/remotes/public/thread
--- ./.git/logs/refs/remotes/public/thread	2021-12-05 17:48:29.000000000 +0800
+++ ../xv6-labs-2021/.git/logs/refs/remotes/public/thread	1970-01-01 08:00:00.000000000 +0800
@@ -1 +0,0 @@
-0000000000000000000000000000000000000000 023d4a1d444ad34f375c1a5e7aa90e97bae183c6 fanzhipeng <fzp548834@163.com> 1638697709 +0800	fetch public: storing head
diff -urN ./.git/logs/refs/remotes/public/traps ../xv6-labs-2021/.git/logs/refs/remotes/public/traps
--- ./.git/logs/refs/remotes/public/traps	2021-12-05 17:48:29.000000000 +0800
+++ ../xv6-labs-2021/.git/logs/refs/remotes/public/traps	1970-01-01 08:00:00.000000000 +0800
@@ -1 +0,0 @@
-0000000000000000000000000000000000000000 2455162885c4218ec4b1311ceff30b9c97717404 fanzhipeng <fzp548834@163.com> 1638697709 +0800	fetch public: storing head
diff -urN ./.git/logs/refs/remotes/public/util ../xv6-labs-2021/.git/logs/refs/remotes/public/util
--- ./.git/logs/refs/remotes/public/util	2021-12-05 17:48:29.000000000 +0800
+++ ../xv6-labs-2021/.git/logs/refs/remotes/public/util	1970-01-01 08:00:00.000000000 +0800
@@ -1 +0,0 @@
-0000000000000000000000000000000000000000 40db4f085bf3b28df45858ff8bbf084743b2c03c fanzhipeng <fzp548834@163.com> 1638697709 +0800	fetch public: storing head
diff -urN ./.git/logs/refs/stash ../xv6-labs-2021/.git/logs/refs/stash
--- ./.git/logs/refs/stash	1970-01-01 08:00:00.000000000 +0800
+++ ../xv6-labs-2021/.git/logs/refs/stash	2021-11-26 14:14:27.000000000 +0800
@@ -0,0 +1 @@
+0000000000000000000000000000000000000000 71b7d6d1c18d79196c2aa4b4b4a5391749db38a9 fanzhipeng <fzp548834@163.com> 1637907267 +0800	WIP on pgtbl: 24db5fd first section finished.
diff -urN ./.git/objects/24/db5fd1c95c2c23a91c307eb8ad597e1fc6549d ../xv6-labs-2021/.git/objects/24/db5fd1c95c2c23a91c307eb8ad597e1fc6549d
--- ./.git/objects/24/db5fd1c95c2c23a91c307eb8ad597e1fc6549d	1970-01-01 08:00:00.000000000 +0800
+++ ../xv6-labs-2021/.git/objects/24/db5fd1c95c2c23a91c307eb8ad597e1fc6549d	2021-11-26 14:01:03.000000000 +0800
@@ -0,0 +1,3 @@
+xïéKjƒ0≥÷)z?0H≠èªaπJÎ”±ñç≠lÊÙÒf˜(™‡ï}€˙Ù¯5œ÷††êÀNPJådôÉVM¡)Evú32â"9s»Ÿ∆
+Xà™óL9(ŸEC ∂.Yn7„¬ùëøπÓ'®å˜⁄è6~·•Ô#"~\Úœ≤oﬂpèÖm
+…√√íµÊ¶˜øŸ>/çˆÛöpµ2˚>@˚Ë◊⁄Í”¸éıF≈
\ No newline at end of file
Binary files ./.git/objects/27/c46972bf9f9283e4fe893557bbfec79e2aee7c and ../xv6-labs-2021/.git/objects/27/c46972bf9f9283e4fe893557bbfec79e2aee7c differ
Binary files ./.git/objects/28/c596bf5f2925ec2f670d0c071b04981a919696 and ../xv6-labs-2021/.git/objects/28/c596bf5f2925ec2f670d0c071b04981a919696 differ
Binary files ./.git/objects/2c/1f7dcd4374dc71690ae8fc0c9fdd7608911c6a and ../xv6-labs-2021/.git/objects/2c/1f7dcd4374dc71690ae8fc0c9fdd7608911c6a differ
Binary files ./.git/objects/2d/20f5a666f27964995fb14c929ca08873ae4659 and ../xv6-labs-2021/.git/objects/2d/20f5a666f27964995fb14c929ca08873ae4659 differ
Binary files ./.git/objects/33/f81bd11c5aa7b98cb4aff487f15e692d295f9e and ../xv6-labs-2021/.git/objects/33/f81bd11c5aa7b98cb4aff487f15e692d295f9e differ
Binary files ./.git/objects/3e/fb63887a024adcd19631a18e8fcf2745a5fb69 and ../xv6-labs-2021/.git/objects/3e/fb63887a024adcd19631a18e8fcf2745a5fb69 differ
Binary files ./.git/objects/45/4c0b497bab5baabe6fb753d9a61d57163bfcf3 and ../xv6-labs-2021/.git/objects/45/4c0b497bab5baabe6fb753d9a61d57163bfcf3 differ
Binary files ./.git/objects/45/a4fb75db864000d01701c0f7a51864bd4daabf and ../xv6-labs-2021/.git/objects/45/a4fb75db864000d01701c0f7a51864bd4daabf differ
Binary files ./.git/objects/46/b7e10fec0beacec94e2636d776987cd9aebdd5 and ../xv6-labs-2021/.git/objects/46/b7e10fec0beacec94e2636d776987cd9aebdd5 differ
Binary files ./.git/objects/47/7ba2e3c32dc5ad0b1462eff111da160ad075c9 and ../xv6-labs-2021/.git/objects/47/7ba2e3c32dc5ad0b1462eff111da160ad075c9 differ
Binary files ./.git/objects/48/3318dafb79bc58a63a8d503e0a4918cad226c3 and ../xv6-labs-2021/.git/objects/48/3318dafb79bc58a63a8d503e0a4918cad226c3 differ
Binary files ./.git/objects/48/7f253a8ec53dfbd5c8887619cf770a5b44346a and ../xv6-labs-2021/.git/objects/48/7f253a8ec53dfbd5c8887619cf770a5b44346a differ
Binary files ./.git/objects/49/073f906b314ccf4a002bf58c102c4f01ae19c2 and ../xv6-labs-2021/.git/objects/49/073f906b314ccf4a002bf58c102c4f01ae19c2 differ
Binary files ./.git/objects/52/8143cc06862b2ade936851d6d255661e79e993 and ../xv6-labs-2021/.git/objects/52/8143cc06862b2ade936851d6d255661e79e993 differ
Binary files ./.git/objects/5c/0eaf4b5a46f2bbf6f8f2d98eedcbb82970a47d and ../xv6-labs-2021/.git/objects/5c/0eaf4b5a46f2bbf6f8f2d98eedcbb82970a47d differ
Binary files ./.git/objects/5c/2ca5551f195dc2b28b01fdc51d4d909f488689 and ../xv6-labs-2021/.git/objects/5c/2ca5551f195dc2b28b01fdc51d4d909f488689 differ
diff -urN ./.git/objects/67/efeca8c717e1eb35ea8f42e21765517f5f4e4d ../xv6-labs-2021/.git/objects/67/efeca8c717e1eb35ea8f42e21765517f5f4e4d
--- ./.git/objects/67/efeca8c717e1eb35ea8f42e21765517f5f4e4d	1970-01-01 08:00:00.000000000 +0800
+++ ../xv6-labs-2021/.git/objects/67/efeca8c717e1eb35ea8f42e21765517f5f4e4d	2021-11-26 14:14:27.000000000 +0800
@@ -0,0 +1,2 @@
+xïéKjƒ0≥÷)z$Yø!ÃU§V˜XÀ∆V`ò”Gõ ªG=
+äˆmk¨o„d≤9ôb≤Õ‰}“àN™g$y4Xä≈î≈&£é|rü¢´≈K5Ñû,Ÿ%£°EG.)WèëçP´ ?c›Oê‹_k;∏?‡S^áw)-Ón¬r£}˚Ç9"ÍhCÑwù¥VìŒæ¡ˇ7UÎïü∞w8£|¸•Ç¥Ûp1ç6OiΩ]+◊õ˙ÓrOI
\ No newline at end of file
diff -urN ./.git/objects/71/b7d6d1c18d79196c2aa4b4b4a5391749db38a9 ../xv6-labs-2021/.git/objects/71/b7d6d1c18d79196c2aa4b4b4a5391749db38a9
--- ./.git/objects/71/b7d6d1c18d79196c2aa4b4b4a5391749db38a9	1970-01-01 08:00:00.000000000 +0800
+++ ../xv6-labs-2021/.git/objects/71/b7d6d1c18d79196c2aa4b4b4a5391749db38a9	2021-11-26 14:14:27.000000000 +0800
@@ -0,0 +1 @@
+xïè;n1DSÔ)‘0Ù£(Aê6]∫‘\ä¥x?ÿUü>j|ÄtÉô7≈„mYZ7¡∫ó~àò :ßê3íıë*WWRp‰≤deıÅ`e⁄ÈêµÎZ`œ>Pq, ú©BAq 	b©O>°®0eF7Fôeç^º√‡PA£ƒ:—oømáQZ∑∂Àz5Ô˙ÿ!Ê‚ßK·¬€ÚaF¿b—'4Ø6[;çv¯t˘ˇs˙˘˙6€jˆküÔoO1£Ì8ª9Ö{£∂µù7©ó?#\Ü
\ No newline at end of file
Binary files ./.git/objects/7b/0d4cabdde57d5022a9a22f29a56ad5b26b4198 and ../xv6-labs-2021/.git/objects/7b/0d4cabdde57d5022a9a22f29a56ad5b26b4198 differ
Binary files ./.git/objects/84/2c88d3ab8b4f807f9246b0d7259a8afb279d21 and ../xv6-labs-2021/.git/objects/84/2c88d3ab8b4f807f9246b0d7259a8afb279d21 differ
Binary files ./.git/objects/87/52f188720846bdee813beaf172b68d607ddd52 and ../xv6-labs-2021/.git/objects/87/52f188720846bdee813beaf172b68d607ddd52 differ
Binary files ./.git/objects/99/0e8bfc2e9be7be4e464917b403fc7096fbf7bc and ../xv6-labs-2021/.git/objects/99/0e8bfc2e9be7be4e464917b403fc7096fbf7bc differ
Binary files ./.git/objects/af/7b3cfd1d6655a8fe52b6ab1cae02a2226948c2 and ../xv6-labs-2021/.git/objects/af/7b3cfd1d6655a8fe52b6ab1cae02a2226948c2 differ
Binary files ./.git/objects/b5/1174defa67ef5c732cf78ae289eeb90fc74d9f and ../xv6-labs-2021/.git/objects/b5/1174defa67ef5c732cf78ae289eeb90fc74d9f differ
Binary files ./.git/objects/b5/8be040ddc976b582f0f18c2b0defb7df4b0f47 and ../xv6-labs-2021/.git/objects/b5/8be040ddc976b582f0f18c2b0defb7df4b0f47 differ
Binary files ./.git/objects/bc/109fd5a0d85a3844c51d056e093c2432bb21ca and ../xv6-labs-2021/.git/objects/bc/109fd5a0d85a3844c51d056e093c2432bb21ca differ
Binary files ./.git/objects/c2/a81b1a2ac5580994fdf641f85919bb298af281 and ../xv6-labs-2021/.git/objects/c2/a81b1a2ac5580994fdf641f85919bb298af281 differ
Binary files ./.git/objects/c3/d9279aa95cf37126e4684de1f6bbe2344d8813 and ../xv6-labs-2021/.git/objects/c3/d9279aa95cf37126e4684de1f6bbe2344d8813 differ
Binary files ./.git/objects/cf/b5119d445fab5f63c318c4e9adb88d7bc27879 and ../xv6-labs-2021/.git/objects/cf/b5119d445fab5f63c318c4e9adb88d7bc27879 differ
Binary files ./.git/objects/d8/5559233b7cd24e6139a730f9ad043795584fd7 and ../xv6-labs-2021/.git/objects/d8/5559233b7cd24e6139a730f9ad043795584fd7 differ
Binary files ./.git/objects/eb/00dc4f5cad2ec1a7dc736b7a156afb25b6d1bf and ../xv6-labs-2021/.git/objects/eb/00dc4f5cad2ec1a7dc736b7a156afb25b6d1bf differ
diff -urN ./.git/objects/eb/8c6e13329655388a5a75faf8d47690f25768d4 ../xv6-labs-2021/.git/objects/eb/8c6e13329655388a5a75faf8d47690f25768d4
--- ./.git/objects/eb/8c6e13329655388a5a75faf8d47690f25768d4	1970-01-01 08:00:00.000000000 +0800
+++ ../xv6-labs-2021/.git/objects/eb/8c6e13329655388a5a75faf8d47690f25768d4	2021-11-23 10:19:00.000000000 +0800
@@ -0,0 +1,2 @@
+x•QÀn√ ÏôØXπjÖ+´±´¶áF˘◊l≈≈p˙R˛Ω¨R¢JπîZfgá®˚°ÜÌ∂∏π’¶ÈGâê–Ï7·À¢Ïˆß„Éóç—£€–F0”&¿ª–ÜS!\€d–t¬=P},´~ƒE]%Àßj7âı® óÁ±⁄"W2ù˚D∑Z¬‘‡|E	›Cæ
+ì∏C!„lôWâf‡ı7ä«:]Fâ¶¨ã∫ä$wÚ5é5®è(„M¶}3I-Ü®œœá>úd¨,¢x“ERq&âü:|NÄΩ«%0]H)Ë˝F?ß"Ï∫ﬁøìWíàËı~ˆ≥:û>„"Ñ√0:˘éùÿ/7öp
\ No newline at end of file
Binary files ./.git/objects/f2/0aec72b63fb46133c7295c1d31d931fb60d21e and ../xv6-labs-2021/.git/objects/f2/0aec72b63fb46133c7295c1d31d931fb60d21e differ
Binary files ./.git/objects/pack/pack-4649c326094d3261c3ef129169519d8d3b994b99.idx and ../xv6-labs-2021/.git/objects/pack/pack-4649c326094d3261c3ef129169519d8d3b994b99.idx differ
Binary files ./.git/objects/pack/pack-4649c326094d3261c3ef129169519d8d3b994b99.pack and ../xv6-labs-2021/.git/objects/pack/pack-4649c326094d3261c3ef129169519d8d3b994b99.pack differ
Binary files ./.git/objects/pack/pack-f998c999776b256fe01cb6853b999c35fa5e10dd.idx and ../xv6-labs-2021/.git/objects/pack/pack-f998c999776b256fe01cb6853b999c35fa5e10dd.idx differ
Binary files ./.git/objects/pack/pack-f998c999776b256fe01cb6853b999c35fa5e10dd.pack and ../xv6-labs-2021/.git/objects/pack/pack-f998c999776b256fe01cb6853b999c35fa5e10dd.pack differ
diff -urN ./.git/packed-refs ../xv6-labs-2021/.git/packed-refs
--- ./.git/packed-refs	1970-01-01 08:00:00.000000000 +0800
+++ ../xv6-labs-2021/.git/packed-refs	2021-11-18 15:54:09.000000000 +0800
@@ -0,0 +1,11 @@
+# pack-refs with: peeled fully-peeled sorted 
+c9818915934504523e52a33e2755b7aff54c495e refs/remotes/origin/cow
+46bcbaf1f2b638ede67e3dd1fcccee226a772fa5 refs/remotes/origin/fs
+281b66cf19660eb15c4542b63693c74a9ced0467 refs/remotes/origin/lock
+1bd9c80b1ef5eb70b91bbd1dbea9c1d953cdc555 refs/remotes/origin/net
+1e6b2dec7d5ca49571e426ccc6cd686d009b6d07 refs/remotes/origin/pgtbl
+a1da53a5a12e21b44a2c79d962a437fa2107627c refs/remotes/origin/riscv
+1e6e6cafbb26a898b8c3f90e819fc5e7227dc8af refs/remotes/origin/syscall
+7e0a45c6e73c5552d913ae49d090b9a11bbd95f9 refs/remotes/origin/thread
+219a8d7d70b6ac66b1447aeada079a1f8c3027f7 refs/remotes/origin/traps
+f654383cdec479c9d53a02bffa1ab5526f6c3ca4 refs/remotes/origin/util
diff -urN ./.git/refs/heads/pgtbl ../xv6-labs-2021/.git/refs/heads/pgtbl
--- ./.git/refs/heads/pgtbl	1970-01-01 08:00:00.000000000 +0800
+++ ../xv6-labs-2021/.git/refs/heads/pgtbl	2021-11-26 14:01:03.000000000 +0800
@@ -0,0 +1 @@
+24db5fd1c95c2c23a91c307eb8ad597e1fc6549d
diff -urN ./.git/refs/heads/syscall ../xv6-labs-2021/.git/refs/heads/syscall
--- ./.git/refs/heads/syscall	1970-01-01 08:00:00.000000000 +0800
+++ ../xv6-labs-2021/.git/refs/heads/syscall	2021-11-23 12:10:57.000000000 +0800
@@ -0,0 +1 @@
+842c88d3ab8b4f807f9246b0d7259a8afb279d21
diff -urN ./.git/refs/heads/util ../xv6-labs-2021/.git/refs/heads/util
--- ./.git/refs/heads/util	2021-12-05 17:48:45.000000000 +0800
+++ ../xv6-labs-2021/.git/refs/heads/util	2021-11-23 10:19:07.000000000 +0800
@@ -1 +1 @@
-40db4f085bf3b28df45858ff8bbf084743b2c03c
+b58be040ddc976b582f0f18c2b0defb7df4b0f47
diff -urN ./.git/refs/remotes/origin/util ../xv6-labs-2021/.git/refs/remotes/origin/util
--- ./.git/refs/remotes/origin/util	2021-12-05 17:50:12.000000000 +0800
+++ ../xv6-labs-2021/.git/refs/remotes/origin/util	1970-01-01 08:00:00.000000000 +0800
@@ -1 +0,0 @@
-40db4f085bf3b28df45858ff8bbf084743b2c03c
diff -urN ./.git/refs/remotes/public/cow ../xv6-labs-2021/.git/refs/remotes/public/cow
--- ./.git/refs/remotes/public/cow	2021-12-05 17:48:29.000000000 +0800
+++ ../xv6-labs-2021/.git/refs/remotes/public/cow	1970-01-01 08:00:00.000000000 +0800
@@ -1 +0,0 @@
-f7e8bfc8393ac6e43ba2dd48e021ba68ce827d8b
diff -urN ./.git/refs/remotes/public/fs ../xv6-labs-2021/.git/refs/remotes/public/fs
--- ./.git/refs/remotes/public/fs	2021-12-05 17:48:29.000000000 +0800
+++ ../xv6-labs-2021/.git/refs/remotes/public/fs	1970-01-01 08:00:00.000000000 +0800
@@ -1 +0,0 @@
-74a81c619dcb9f5daad16b227d799c30c4d563ab
diff -urN ./.git/refs/remotes/public/lazy ../xv6-labs-2021/.git/refs/remotes/public/lazy
--- ./.git/refs/remotes/public/lazy	2021-12-05 17:48:29.000000000 +0800
+++ ../xv6-labs-2021/.git/refs/remotes/public/lazy	1970-01-01 08:00:00.000000000 +0800
@@ -1 +0,0 @@
-b34ddc999a5554d62d981971dd35b63c0c311c5c
diff -urN ./.git/refs/remotes/public/lock ../xv6-labs-2021/.git/refs/remotes/public/lock
--- ./.git/refs/remotes/public/lock	2021-12-05 17:48:29.000000000 +0800
+++ ../xv6-labs-2021/.git/refs/remotes/public/lock	1970-01-01 08:00:00.000000000 +0800
@@ -1 +0,0 @@
-a4eaf20da42a8777be05502dc342633ec97c3029
diff -urN ./.git/refs/remotes/public/master ../xv6-labs-2021/.git/refs/remotes/public/master
--- ./.git/refs/remotes/public/master	2021-12-05 17:48:29.000000000 +0800
+++ ../xv6-labs-2021/.git/refs/remotes/public/master	1970-01-01 08:00:00.000000000 +0800
@@ -1 +0,0 @@
-7d085c803a458b78e6bd19f34555e09c921afdbb
diff -urN ./.git/refs/remotes/public/mmap ../xv6-labs-2021/.git/refs/remotes/public/mmap
--- ./.git/refs/remotes/public/mmap	2021-12-05 17:48:29.000000000 +0800
+++ ../xv6-labs-2021/.git/refs/remotes/public/mmap	1970-01-01 08:00:00.000000000 +0800
@@ -1 +0,0 @@
-82bc3d5ee6564de79889bdd146c580399bdf04e6
diff -urN ./.git/refs/remotes/public/net ../xv6-labs-2021/.git/refs/remotes/public/net
--- ./.git/refs/remotes/public/net	2021-12-05 17:48:29.000000000 +0800
+++ ../xv6-labs-2021/.git/refs/remotes/public/net	1970-01-01 08:00:00.000000000 +0800
@@ -1 +0,0 @@
-8c336ca9e340196025a8d80f9ac34fcc0230bdd5
diff -urN ./.git/refs/remotes/public/pgtbl ../xv6-labs-2021/.git/refs/remotes/public/pgtbl
--- ./.git/refs/remotes/public/pgtbl	2021-12-05 17:48:29.000000000 +0800
+++ ../xv6-labs-2021/.git/refs/remotes/public/pgtbl	1970-01-01 08:00:00.000000000 +0800
@@ -1 +0,0 @@
-773d70bb9c12e6e39932fce95228ced8b0fd58df
diff -urN ./.git/refs/remotes/public/riscv ../xv6-labs-2021/.git/refs/remotes/public/riscv
--- ./.git/refs/remotes/public/riscv	2021-12-05 17:48:29.000000000 +0800
+++ ../xv6-labs-2021/.git/refs/remotes/public/riscv	1970-01-01 08:00:00.000000000 +0800
@@ -1 +0,0 @@
-a3c5ae4872880ea4a497bb7356cd62191bfe1cc3
diff -urN ./.git/refs/remotes/public/syscall ../xv6-labs-2021/.git/refs/remotes/public/syscall
--- ./.git/refs/remotes/public/syscall	2021-12-05 17:48:29.000000000 +0800
+++ ../xv6-labs-2021/.git/refs/remotes/public/syscall	1970-01-01 08:00:00.000000000 +0800
@@ -1 +0,0 @@
-8813049eec419b343e7ccd8d72e36491053e0903
diff -urN ./.git/refs/remotes/public/thread ../xv6-labs-2021/.git/refs/remotes/public/thread
--- ./.git/refs/remotes/public/thread	2021-12-05 17:48:29.000000000 +0800
+++ ../xv6-labs-2021/.git/refs/remotes/public/thread	1970-01-01 08:00:00.000000000 +0800
@@ -1 +0,0 @@
-023d4a1d444ad34f375c1a5e7aa90e97bae183c6
diff -urN ./.git/refs/remotes/public/traps ../xv6-labs-2021/.git/refs/remotes/public/traps
--- ./.git/refs/remotes/public/traps	2021-12-05 17:48:29.000000000 +0800
+++ ../xv6-labs-2021/.git/refs/remotes/public/traps	1970-01-01 08:00:00.000000000 +0800
@@ -1 +0,0 @@
-2455162885c4218ec4b1311ceff30b9c97717404
diff -urN ./.git/refs/remotes/public/util ../xv6-labs-2021/.git/refs/remotes/public/util
--- ./.git/refs/remotes/public/util	2021-12-05 17:48:29.000000000 +0800
+++ ../xv6-labs-2021/.git/refs/remotes/public/util	1970-01-01 08:00:00.000000000 +0800
@@ -1 +0,0 @@
-40db4f085bf3b28df45858ff8bbf084743b2c03c
diff -urN ./.git/refs/stash ../xv6-labs-2021/.git/refs/stash
--- ./.git/refs/stash	1970-01-01 08:00:00.000000000 +0800
+++ ../xv6-labs-2021/.git/refs/stash	2021-11-26 14:14:27.000000000 +0800
@@ -0,0 +1 @@
+71b7d6d1c18d79196c2aa4b4b4a5391749db38a9
diff -urN ./.gitignore ../xv6-labs-2021/.gitignore
--- ./.gitignore	2021-12-05 17:48:45.000000000 +0800
+++ ../xv6-labs-2021/.gitignore	2021-11-18 15:54:53.000000000 +0800
@@ -20,3 +20,5 @@
 xv6.out*
 .vagrant/
 submissions/
+ph
+barrier
diff -urN ./Makefile ../xv6-labs-2021/Makefile
--- ./Makefile	2021-12-05 17:48:45.000000000 +0800
+++ ../xv6-labs-2021/Makefile	2021-12-05 17:40:55.000000000 +0800
@@ -1,6 +1,6 @@
 
 # To compile and run with a lab solution, set the lab name in lab.mk
-# (e.g., LB=util).  Run make grade to test solution with the lab's
+# (e.g., LAB=util).  Run make grade to test solution with the lab's
 # grade script (e.g., grade-lab-util).
 
 -include conf/lab.mk
@@ -10,12 +10,7 @@
 
 OBJS = \
   $K/entry.o \
-  $K/start.o \
-  $K/console.o \
-  $K/printf.o \
-  $K/uart.o \
   $K/kalloc.o \
-  $K/spinlock.o \
   $K/string.o \
   $K/main.o \
   $K/vm.o \
@@ -35,12 +30,41 @@
   $K/sysfile.o \
   $K/kernelvec.o \
   $K/plic.o \
-  $K/virtio_disk.o \
+  $K/virtio_disk.o
+
+OBJS_KCSAN = \
+  $K/start.o \
+  $K/console.o \
+  $K/printf.o \
+  $K/uart.o \
+  $K/spinlock.o
+
+ifdef KCSAN
+OBJS_KCSAN += \
+	$K/kcsan.o
+endif
 
 ifeq ($(LAB),pgtbl)
-OBJS += $K/vmcopyin.o
+OBJS += \
+	$K/vmcopyin.o
 endif
 
+ifeq ($(LAB),$(filter $(LAB), pgtbl lock))
+OBJS += \
+	$K/stats.o\
+	$K/sprintf.o
+endif
+
+
+ifeq ($(LAB),net)
+OBJS += \
+	$K/e1000.o \
+	$K/net.o \
+	$K/sysnet.o \
+	$K/pci.o
+endif
+
+
 # riscv64-unknown-elf- or riscv64-linux-gnu-
 # perhaps in /opt/riscv/bin
 #TOOLPREFIX = 
@@ -71,15 +95,25 @@
 
 ifdef LAB
 LABUPPER = $(shell echo $(LAB) | tr a-z A-Z)
-CFLAGS += -DSOL_$(LABUPPER)
+XCFLAGS += -DSOL_$(LABUPPER) -DLAB_$(LABUPPER)
 endif
 
+CFLAGS += $(XCFLAGS)
 CFLAGS += -MD
 CFLAGS += -mcmodel=medany
 CFLAGS += -ffreestanding -fno-common -nostdlib -mno-relax
 CFLAGS += -I.
 CFLAGS += $(shell $(CC) -fno-stack-protector -E -x c /dev/null >/dev/null 2>&1 && echo -fno-stack-protector)
 
+ifeq ($(LAB),net)
+CFLAGS += -DNET_TESTS_PORT=$(SERVERPORT)
+endif
+
+ifdef KCSAN
+CFLAGS += -DKCSAN
+KCSANFLAG = -fsanitize=thread
+endif
+
 # Disable PIE when possible (for Ubuntu 16.10 toolchain)
 ifneq ($(shell $(CC) -dumpspecs 2>/dev/null | grep -e '[^f]no-pie'),)
 CFLAGS += -fno-pie -no-pie
@@ -90,11 +124,17 @@
 
 LDFLAGS = -z max-page-size=4096
 
-$K/kernel: $(OBJS) $K/kernel.ld $U/initcode
-	$(LD) $(LDFLAGS) -T $K/kernel.ld -o $K/kernel $(OBJS) 
+$K/kernel: $(OBJS) $(OBJS_KCSAN) $K/kernel.ld $U/initcode
+	$(LD) $(LDFLAGS) -T $K/kernel.ld -o $K/kernel $(OBJS) $(OBJS_KCSAN)
 	$(OBJDUMP) -S $K/kernel > $K/kernel.asm
 	$(OBJDUMP) -t $K/kernel | sed '1,/SYMBOL TABLE/d; s/ .* / /; /^$$/d' > $K/kernel.sym
 
+$(OBJS): EXTRAFLAG := $(KCSANFLAG)
+
+$K/%.o: $K/%.c
+	$(CC) $(CFLAGS) $(EXTRAFLAG) -c -o $@ $<
+
+
 $U/initcode: $U/initcode.S
 	$(CC) $(CFLAGS) -march=rv64g -nostdinc -I. -Ikernel -c $U/initcode.S -o $U/initcode.o
 	$(LD) $(LDFLAGS) -N -e start -Ttext 0 -o $U/initcode.out $U/initcode.o
@@ -106,6 +146,10 @@
 
 ULIB = $U/ulib.o $U/usys.o $U/printf.o $U/umalloc.o
 
+ifeq ($(LAB),$(filter $(LAB), pgtbl lock))
+ULIB += $U/statistics.o
+endif
+
 _%: %.o $(ULIB)
 	$(LD) $(LDFLAGS) -N -e main -Ttext 0 -o $@ $^
 	$(OBJDUMP) -S $@ > $*.asm
@@ -124,7 +168,7 @@
 	$(OBJDUMP) -S $U/_forktest > $U/forktest.asm
 
 mkfs/mkfs: mkfs/mkfs.c $K/fs.h $K/param.h
-	gcc -Werror -Wall -I. -o mkfs/mkfs mkfs/mkfs.c
+	gcc $(XCFLAGS) -Werror -Wall -I. -o mkfs/mkfs mkfs/mkfs.c
 
 # Prevent deletion of intermediate files, e.g. cat.o, after first build, so
 # that disk image changes after first build are persistent until clean.  More
@@ -149,18 +193,23 @@
 	$U/_grind\
 	$U/_wc\
 	$U/_zombie\
+	$U/_sleep\
+	$U/_pingpong\
+	$U/_primes\
+	$U/_find\
+	$U/_xargs\
+
 
 
-ifeq ($(LAB),syscall)
+ifeq ($(LAB),$(filter $(LAB), pgtbl lock))
 UPROGS += \
-	$U/_trace\
-	$U/_sysinfotest
+	$U/_stats
 endif
 
-ifeq ($(LAB),trap)
+ifeq ($(LAB),traps)
 UPROGS += \
 	$U/_call\
-	$U/_alarmtest
+	$U/_bttest
 endif
 
 ifeq ($(LAB),lazy)
@@ -173,11 +222,48 @@
 	$U/_cowtest
 endif
 
+ifeq ($(LAB),thread)
+UPROGS += \
+	$U/_uthread
+
+$U/uthread_switch.o : $U/uthread_switch.S
+	$(CC) $(CFLAGS) -c -o $U/uthread_switch.o $U/uthread_switch.S
+
+$U/_uthread: $U/uthread.o $U/uthread_switch.o $(ULIB)
+	$(LD) $(LDFLAGS) -N -e main -Ttext 0 -o $U/_uthread $U/uthread.o $U/uthread_switch.o $(ULIB)
+	$(OBJDUMP) -S $U/_uthread > $U/uthread.asm
+
+ph: notxv6/ph.c
+	gcc -o ph -g -O2 $(XCFLAGS) notxv6/ph.c -pthread
+
+barrier: notxv6/barrier.c
+	gcc -o barrier -g -O2 $(XCFLAGS) notxv6/barrier.c -pthread
+endif
+
+ifeq ($(LAB),lock)
+UPROGS += \
+	$U/_kalloctest\
+	$U/_bcachetest
+endif
+
+ifeq ($(LAB),fs)
+UPROGS += \
+	$U/_bigfile
+endif
+
+
+
+ifeq ($(LAB),net)
+UPROGS += \
+	$U/_nettests
+endif
+
 UEXTRA=
 ifeq ($(LAB),util)
 	UEXTRA += user/xargstest.sh
 endif
 
+
 fs.img: mkfs/mkfs README $(UEXTRA) $(UPROGS)
 	mkfs/mkfs fs.img README $(UEXTRA) $(UPROGS)
 
@@ -189,7 +275,8 @@
 	$U/initcode $U/initcode.out $K/kernel fs.img \
 	mkfs/mkfs .gdbinit \
         $U/usys.S \
-	$(UPROGS)
+	$(UPROGS) \
+	ph barrier
 
 # try to generate a unique GDB port
 GDBPORT = $(shell expr `id -u` % 5000 + 25000)
@@ -200,11 +287,21 @@
 ifndef CPUS
 CPUS := 3
 endif
+ifeq ($(LAB),fs)
+CPUS := 1
+endif
+
+FWDPORT = $(shell expr `id -u` % 5000 + 25999)
 
 QEMUOPTS = -machine virt -bios none -kernel $K/kernel -m 128M -smp $(CPUS) -nographic
 QEMUOPTS += -drive file=fs.img,if=none,format=raw,id=x0
 QEMUOPTS += -device virtio-blk-device,drive=x0,bus=virtio-mmio-bus.0
 
+ifeq ($(LAB),net)
+QEMUOPTS += -netdev user,id=net0,hostfwd=udp::$(FWDPORT)-:2000 -object filter-dump,id=net0,netdev=net0,file=packets.pcap
+QEMUOPTS += -device e1000,netdev=net0,bus=pcie.0
+endif
+
 qemu: $K/kernel fs.img
 	$(QEMU) $(QEMUOPTS)
 
@@ -215,6 +312,17 @@
 	@echo "*** Now run 'gdb' in another window." 1>&2
 	$(QEMU) $(QEMUOPTS) -S $(QEMUGDB)
 
+ifeq ($(LAB),net)
+# try to generate a unique port for the echo server
+SERVERPORT = $(shell expr `id -u` % 5000 + 25099)
+
+server:
+	python3 server.py $(SERVERPORT)
+
+ping:
+	python3 ping.py $(FWDPORT)
+endif
+
 ##
 ##  FOR testing lab grading script
 ##
@@ -237,7 +345,7 @@
 ##
 
 
-WEBSUB := https://6828.scripts.mit.edu/2020/handin.py
+WEBSUB := https://6828.scripts.mit.edu/2021/handin.py
 
 handin: tarball-pref myapi.key
 	@SUF=$(LAB); \
@@ -269,7 +377,7 @@
 		test "$$r" = y; \
 	fi
 
-UPSTREAM := $(shell git remote -v | grep -m 1 "xv6-labs-2020" | awk '{split($$0,a," "); print a[1]}')
+UPSTREAM := $(shell git remote -v | grep -m 1 "xv6-labs-2021" | awk '{split($$0,a," "); print a[1]}')
 
 tarball: handin-check
 	git archive --format=tar HEAD | gzip > lab-$(LAB)-handin.tar.gz
diff -urN ./README ../xv6-labs-2021/README
--- ./README	2021-12-05 17:48:45.000000000 +0800
+++ ../xv6-labs-2021/README	2021-11-18 15:54:53.000000000 +0800
@@ -14,18 +14,20 @@
 Clements.
 
 We are also grateful for the bug reports and patches contributed by
-Silas Boyd-Wickizer, Anton Burtsev, Dan Cross, Cody Cutler, Mike CAT,
-Tej Chajed, Asami Doi, eyalz800, , Nelson Elhage, Saar Ettinger, Alice
-Ferrazzi, Nathaniel Filardo, Peter Froehlich, Yakir Goaron,Shivam
-Handa, Bryan Henry, jaichenhengjie, Jim Huang, Alexander Kapshuk,
-Anders Kaseorg, kehao95, Wolfgang Keller, Jonathan Kimmitt, Eddie
-Kohler, Austin Liew, Imbar Marinescu, Yandong Mao, Matan Shabtay,
-Hitoshi Mitake, Carmi Merimovich, Mark Morrissey, mtasm, Joel Nider,
-Greg Price, Ayan Shafqat, Eldar Sehayek, Yongming Shen, Fumiya
-Shigemitsu, Takahiro, Cam Tenny, tyfkda, Rafael Ubal, Warren Toomey,
-Stephen Tu, Pablo Ventura, Xi Wang, Keiichi Watanabe, Nicolas
-Wolovick, wxdao, Grant Wu, Jindong Zhang, Icenowy Zheng, and Zou Chang
-Wei.
+Takahiro Aoyagi, Silas Boyd-Wickizer, Anton Burtsev, Ian Chen, Dan
+Cross, Cody Cutler, Mike CAT, Tej Chajed, Asami Doi, eyalz800, Nelson
+Elhage, Saar Ettinger, Alice Ferrazzi, Nathaniel Filardo, flespark,
+Peter Froehlich, Yakir Goaron,Shivam Handa, Matt Harvey, Bryan Henry,
+jaichenhengjie, Jim Huang, Mat√∫≈° J√≥kay, Alexander Kapshuk, Anders
+Kaseorg, kehao95, Wolfgang Keller, Jungwoo Kim, Jonathan Kimmitt,
+Eddie Kohler, Vadim Kolontsov , Austin Liew, l0stman, Pavan
+Maddamsetti, Imbar Marinescu, Yandong Mao, , Matan Shabtay, Hitoshi
+Mitake, Carmi Merimovich, Mark Morrissey, mtasm, Joel Nider,
+OptimisticSide, Greg Price, Jude Rich, Ayan Shafqat, Eldar Sehayek,
+Yongming Shen, Fumiya Shigemitsu, Cam Tenny, tyfkda, Warren Toomey,
+Stephen Tu, Rafael Ubal, Amane Uehara, Pablo Ventura, Xi Wang, Keiichi
+Watanabe, Nicolas Wolovick, wxdao, Grant Wu, Jindong Zhang, Icenowy
+Zheng, ZhUyU1997, and Zou Chang Wei.
 
 The code in the files that constitute xv6 is
 Copyright 2006-2020 Frans Kaashoek, Robert Morris, and Russ Cox.
Binary files ./__pycache__/gradelib.cpython-39.pyc and ../xv6-labs-2021/__pycache__/gradelib.cpython-39.pyc differ
diff -urN ./diff ../xv6-labs-2021/diff
--- ./diff	2021-12-05 17:56:12.000000000 +0800
+++ ../xv6-labs-2021/diff	1970-01-01 08:00:00.000000000 +0800
@@ -1,686 +0,0 @@
-diff -urN ./.gdbinit ../xv6-labs-2021/.gdbinit
---- ./.gdbinit	2021-12-05 17:54:42.000000000 +0800
-+++ ../xv6-labs-2021/.gdbinit	1970-01-01 08:00:00.000000000 +0800
-@@ -1,5 +0,0 @@
--set confirm off
--set architecture riscv:rv64
--target remote 127.0.0.1:25501
--symbol-file kernel/kernel
--set disassemble-next-line auto
-diff -urN ./.gdbinit.tmpl-riscv ../xv6-labs-2021/.gdbinit.tmpl-riscv
---- ./.gdbinit.tmpl-riscv	2021-12-05 17:48:45.000000000 +0800
-+++ ../xv6-labs-2021/.gdbinit.tmpl-riscv	2021-11-18 15:54:53.000000000 +0800
-@@ -3,3 +3,4 @@
- target remote 127.0.0.1:1234
- symbol-file kernel/kernel
- set disassemble-next-line auto
-+set riscv use-compressed-breakpoints yes
-diff -urN ./.git/COMMIT_EDITMSG ../xv6-labs-2021/.git/COMMIT_EDITMSG
---- ./.git/COMMIT_EDITMSG	1970-01-01 08:00:00.000000000 +0800
-+++ ../xv6-labs-2021/.git/COMMIT_EDITMSG	2021-11-26 14:01:03.000000000 +0800
-@@ -0,0 +1 @@
-+first section finished.
-diff -urN ./.git/FETCH_HEAD ../xv6-labs-2021/.git/FETCH_HEAD
---- ./.git/FETCH_HEAD	2021-12-05 17:48:29.000000000 +0800
-+++ ../xv6-labs-2021/.git/FETCH_HEAD	2021-11-26 14:17:07.000000000 +0800
-@@ -1,13 +1,10 @@
--f7e8bfc8393ac6e43ba2dd48e021ba68ce827d8b	not-for-merge	branch 'cow' of git://g.csail.mit.edu/xv6-labs-2020
--74a81c619dcb9f5daad16b227d799c30c4d563ab	not-for-merge	branch 'fs' of git://g.csail.mit.edu/xv6-labs-2020
--b34ddc999a5554d62d981971dd35b63c0c311c5c	not-for-merge	branch 'lazy' of git://g.csail.mit.edu/xv6-labs-2020
--a4eaf20da42a8777be05502dc342633ec97c3029	not-for-merge	branch 'lock' of git://g.csail.mit.edu/xv6-labs-2020
--7d085c803a458b78e6bd19f34555e09c921afdbb	not-for-merge	branch 'master' of git://g.csail.mit.edu/xv6-labs-2020
--82bc3d5ee6564de79889bdd146c580399bdf04e6	not-for-merge	branch 'mmap' of git://g.csail.mit.edu/xv6-labs-2020
--8c336ca9e340196025a8d80f9ac34fcc0230bdd5	not-for-merge	branch 'net' of git://g.csail.mit.edu/xv6-labs-2020
--773d70bb9c12e6e39932fce95228ced8b0fd58df	not-for-merge	branch 'pgtbl' of git://g.csail.mit.edu/xv6-labs-2020
--a3c5ae4872880ea4a497bb7356cd62191bfe1cc3	not-for-merge	branch 'riscv' of git://g.csail.mit.edu/xv6-labs-2020
--8813049eec419b343e7ccd8d72e36491053e0903	not-for-merge	branch 'syscall' of git://g.csail.mit.edu/xv6-labs-2020
--023d4a1d444ad34f375c1a5e7aa90e97bae183c6	not-for-merge	branch 'thread' of git://g.csail.mit.edu/xv6-labs-2020
--2455162885c4218ec4b1311ceff30b9c97717404	not-for-merge	branch 'traps' of git://g.csail.mit.edu/xv6-labs-2020
--40db4f085bf3b28df45858ff8bbf084743b2c03c	not-for-merge	branch 'util' of git://g.csail.mit.edu/xv6-labs-2020
-+f654383cdec479c9d53a02bffa1ab5526f6c3ca4		branch 'util' of git://g.csail.mit.edu/xv6-labs-2021
-+c9818915934504523e52a33e2755b7aff54c495e	not-for-merge	branch 'cow' of git://g.csail.mit.edu/xv6-labs-2021
-+46bcbaf1f2b638ede67e3dd1fcccee226a772fa5	not-for-merge	branch 'fs' of git://g.csail.mit.edu/xv6-labs-2021
-+281b66cf19660eb15c4542b63693c74a9ced0467	not-for-merge	branch 'lock' of git://g.csail.mit.edu/xv6-labs-2021
-+1bd9c80b1ef5eb70b91bbd1dbea9c1d953cdc555	not-for-merge	branch 'net' of git://g.csail.mit.edu/xv6-labs-2021
-+1e6b2dec7d5ca49571e426ccc6cd686d009b6d07	not-for-merge	branch 'pgtbl' of git://g.csail.mit.edu/xv6-labs-2021
-+a1da53a5a12e21b44a2c79d962a437fa2107627c	not-for-merge	branch 'riscv' of git://g.csail.mit.edu/xv6-labs-2021
-+1e6e6cafbb26a898b8c3f90e819fc5e7227dc8af	not-for-merge	branch 'syscall' of git://g.csail.mit.edu/xv6-labs-2021
-+7e0a45c6e73c5552d913ae49d090b9a11bbd95f9	not-for-merge	branch 'thread' of git://g.csail.mit.edu/xv6-labs-2021
-+219a8d7d70b6ac66b1447aeada079a1f8c3027f7	not-for-merge	branch 'traps' of git://g.csail.mit.edu/xv6-labs-2021
-diff -urN ./.git/ORIG_HEAD ../xv6-labs-2021/.git/ORIG_HEAD
---- ./.git/ORIG_HEAD	1970-01-01 08:00:00.000000000 +0800
-+++ ../xv6-labs-2021/.git/ORIG_HEAD	2021-11-26 14:54:29.000000000 +0800
-@@ -0,0 +1 @@
-+24db5fd1c95c2c23a91c307eb8ad597e1fc6549d
-diff -urN ./.git/config ../xv6-labs-2021/.git/config
---- ./.git/config	2021-12-05 17:48:45.000000000 +0800
-+++ ../xv6-labs-2021/.git/config	2021-11-23 10:19:27.000000000 +0800
-@@ -6,11 +6,11 @@
- 	ignorecase = true
- 	precomposeunicode = true
- [remote "origin"]
--	url = git@github.com:moon548834/xv6-labs-2020.git
-+	url = git://g.csail.mit.edu/xv6-labs-2021
- 	fetch = +refs/heads/*:refs/remotes/origin/*
--[remote "public"]
--	url = git://g.csail.mit.edu/xv6-labs-2020
--	fetch = +refs/heads/*:refs/remotes/public/*
- [branch "util"]
--	remote = public
-+	remote = origin
- 	merge = refs/heads/util
-+[branch "syscall"]
-+	remote = origin
-+	merge = refs/heads/syscall
-Binary files ./.git/index and ../xv6-labs-2021/.git/index differ
-diff -urN ./.git/logs/HEAD ../xv6-labs-2021/.git/logs/HEAD
---- ./.git/logs/HEAD	2021-12-05 17:48:45.000000000 +0800
-+++ ../xv6-labs-2021/.git/logs/HEAD	2021-12-05 17:40:55.000000000 +0800
-@@ -1 +1,17 @@
--0000000000000000000000000000000000000000 40db4f085bf3b28df45858ff8bbf084743b2c03c fanzhipeng <fzp548834@163.com> 1638697725 +0800	checkout: moving from master to util
-+0000000000000000000000000000000000000000 f654383cdec479c9d53a02bffa1ab5526f6c3ca4 fanzhipeng <fzp548834@163.com> 1637222093 +0800	checkout: moving from master to util
-+f654383cdec479c9d53a02bffa1ab5526f6c3ca4 b58be040ddc976b582f0f18c2b0defb7df4b0f47 fanzhipeng <fzp548834@163.com> 1637633947 +0800	commit: lab1 passed
-+b58be040ddc976b582f0f18c2b0defb7df4b0f47 1e6e6cafbb26a898b8c3f90e819fc5e7227dc8af fanzhipeng <fzp548834@163.com> 1637633967 +0800	checkout: moving from util to syscall
-+1e6e6cafbb26a898b8c3f90e819fc5e7227dc8af 842c88d3ab8b4f807f9246b0d7259a8afb279d21 fanzhipeng <fzp548834@163.com> 1637640657 +0800	commit: lab2 passed
-+842c88d3ab8b4f807f9246b0d7259a8afb279d21 842c88d3ab8b4f807f9246b0d7259a8afb279d21 fanzhipeng <fzp548834@163.com> 1637664667 +0800	checkout: moving from syscall to pgtbl
-+842c88d3ab8b4f807f9246b0d7259a8afb279d21 842c88d3ab8b4f807f9246b0d7259a8afb279d21 fanzhipeng <fzp548834@163.com> 1637904107 +0800	checkout: moving from pgtbl to pgtbl
-+842c88d3ab8b4f807f9246b0d7259a8afb279d21 842c88d3ab8b4f807f9246b0d7259a8afb279d21 fanzhipeng <fzp548834@163.com> 1637905974 +0800	checkout: moving from pgtbl to syscall
-+842c88d3ab8b4f807f9246b0d7259a8afb279d21 842c88d3ab8b4f807f9246b0d7259a8afb279d21 fanzhipeng <fzp548834@163.com> 1637906083 +0800	checkout: moving from syscall to pgtbl
-+842c88d3ab8b4f807f9246b0d7259a8afb279d21 24db5fd1c95c2c23a91c307eb8ad597e1fc6549d fanzhipeng <fzp548834@163.com> 1637906463 +0800	commit: first section finished.
-+24db5fd1c95c2c23a91c307eb8ad597e1fc6549d b58be040ddc976b582f0f18c2b0defb7df4b0f47 fanzhipeng <fzp548834@163.com> 1637906468 +0800	checkout: moving from pgtbl to util
-+b58be040ddc976b582f0f18c2b0defb7df4b0f47 24db5fd1c95c2c23a91c307eb8ad597e1fc6549d fanzhipeng <fzp548834@163.com> 1637906818 +0800	checkout: moving from util to pgtbl
-+24db5fd1c95c2c23a91c307eb8ad597e1fc6549d 24db5fd1c95c2c23a91c307eb8ad597e1fc6549d fanzhipeng <fzp548834@163.com> 1637907267 +0800	reset: moving to HEAD
-+24db5fd1c95c2c23a91c307eb8ad597e1fc6549d 842c88d3ab8b4f807f9246b0d7259a8afb279d21 fanzhipeng <fzp548834@163.com> 1637907277 +0800	checkout: moving from pgtbl to syscall
-+842c88d3ab8b4f807f9246b0d7259a8afb279d21 b58be040ddc976b582f0f18c2b0defb7df4b0f47 fanzhipeng <fzp548834@163.com> 1637907291 +0800	checkout: moving from syscall to util
-+b58be040ddc976b582f0f18c2b0defb7df4b0f47 24db5fd1c95c2c23a91c307eb8ad597e1fc6549d fanzhipeng <fzp548834@163.com> 1637907847 +0800	checkout: moving from util to pgtbl
-+24db5fd1c95c2c23a91c307eb8ad597e1fc6549d 24db5fd1c95c2c23a91c307eb8ad597e1fc6549d fanzhipeng <fzp548834@163.com> 1637909669 +0800	reset: moving to HEAD
-+24db5fd1c95c2c23a91c307eb8ad597e1fc6549d b58be040ddc976b582f0f18c2b0defb7df4b0f47 fanzhipeng <fzp548834@163.com> 1638697255 +0800	checkout: moving from pgtbl to util
-diff -urN ./.git/logs/refs/heads/pgtbl ../xv6-labs-2021/.git/logs/refs/heads/pgtbl
---- ./.git/logs/refs/heads/pgtbl	1970-01-01 08:00:00.000000000 +0800
-+++ ../xv6-labs-2021/.git/logs/refs/heads/pgtbl	2021-11-26 14:01:03.000000000 +0800
-@@ -0,0 +1,2 @@
-+0000000000000000000000000000000000000000 842c88d3ab8b4f807f9246b0d7259a8afb279d21 fanzhipeng <fzp548834@163.com> 1637664667 +0800	branch: Created from HEAD
-+842c88d3ab8b4f807f9246b0d7259a8afb279d21 24db5fd1c95c2c23a91c307eb8ad597e1fc6549d fanzhipeng <fzp548834@163.com> 1637906463 +0800	commit: first section finished.
-diff -urN ./.git/logs/refs/heads/syscall ../xv6-labs-2021/.git/logs/refs/heads/syscall
---- ./.git/logs/refs/heads/syscall	1970-01-01 08:00:00.000000000 +0800
-+++ ../xv6-labs-2021/.git/logs/refs/heads/syscall	2021-11-23 12:10:57.000000000 +0800
-@@ -0,0 +1,2 @@
-+0000000000000000000000000000000000000000 1e6e6cafbb26a898b8c3f90e819fc5e7227dc8af fanzhipeng <fzp548834@163.com> 1637633967 +0800	branch: Created from refs/remotes/origin/syscall
-+1e6e6cafbb26a898b8c3f90e819fc5e7227dc8af 842c88d3ab8b4f807f9246b0d7259a8afb279d21 fanzhipeng <fzp548834@163.com> 1637640657 +0800	commit: lab2 passed
-diff -urN ./.git/logs/refs/heads/util ../xv6-labs-2021/.git/logs/refs/heads/util
---- ./.git/logs/refs/heads/util	2021-12-05 17:48:45.000000000 +0800
-+++ ../xv6-labs-2021/.git/logs/refs/heads/util	2021-11-23 10:19:07.000000000 +0800
-@@ -1 +1,2 @@
--0000000000000000000000000000000000000000 40db4f085bf3b28df45858ff8bbf084743b2c03c fanzhipeng <fzp548834@163.com> 1638697725 +0800	branch: Created from refs/remotes/public/util
-+0000000000000000000000000000000000000000 f654383cdec479c9d53a02bffa1ab5526f6c3ca4 fanzhipeng <fzp548834@163.com> 1637222093 +0800	branch: Created from refs/remotes/origin/util
-+f654383cdec479c9d53a02bffa1ab5526f6c3ca4 b58be040ddc976b582f0f18c2b0defb7df4b0f47 fanzhipeng <fzp548834@163.com> 1637633947 +0800	commit: lab1 passed
-diff -urN ./.git/logs/refs/remotes/origin/util ../xv6-labs-2021/.git/logs/refs/remotes/origin/util
---- ./.git/logs/refs/remotes/origin/util	2021-12-05 17:50:12.000000000 +0800
-+++ ../xv6-labs-2021/.git/logs/refs/remotes/origin/util	1970-01-01 08:00:00.000000000 +0800
-@@ -1 +0,0 @@
--0000000000000000000000000000000000000000 40db4f085bf3b28df45858ff8bbf084743b2c03c fanzhipeng <fzp548834@163.com> 1638697812 +0800	update by push
-diff -urN ./.git/logs/refs/remotes/public/cow ../xv6-labs-2021/.git/logs/refs/remotes/public/cow
---- ./.git/logs/refs/remotes/public/cow	2021-12-05 17:48:29.000000000 +0800
-+++ ../xv6-labs-2021/.git/logs/refs/remotes/public/cow	1970-01-01 08:00:00.000000000 +0800
-@@ -1 +0,0 @@
--0000000000000000000000000000000000000000 f7e8bfc8393ac6e43ba2dd48e021ba68ce827d8b fanzhipeng <fzp548834@163.com> 1638697709 +0800	fetch public: storing head
-diff -urN ./.git/logs/refs/remotes/public/fs ../xv6-labs-2021/.git/logs/refs/remotes/public/fs
---- ./.git/logs/refs/remotes/public/fs	2021-12-05 17:48:29.000000000 +0800
-+++ ../xv6-labs-2021/.git/logs/refs/remotes/public/fs	1970-01-01 08:00:00.000000000 +0800
-@@ -1 +0,0 @@
--0000000000000000000000000000000000000000 74a81c619dcb9f5daad16b227d799c30c4d563ab fanzhipeng <fzp548834@163.com> 1638697709 +0800	fetch public: storing head
-diff -urN ./.git/logs/refs/remotes/public/lazy ../xv6-labs-2021/.git/logs/refs/remotes/public/lazy
---- ./.git/logs/refs/remotes/public/lazy	2021-12-05 17:48:29.000000000 +0800
-+++ ../xv6-labs-2021/.git/logs/refs/remotes/public/lazy	1970-01-01 08:00:00.000000000 +0800
-@@ -1 +0,0 @@
--0000000000000000000000000000000000000000 b34ddc999a5554d62d981971dd35b63c0c311c5c fanzhipeng <fzp548834@163.com> 1638697709 +0800	fetch public: storing head
-diff -urN ./.git/logs/refs/remotes/public/lock ../xv6-labs-2021/.git/logs/refs/remotes/public/lock
---- ./.git/logs/refs/remotes/public/lock	2021-12-05 17:48:29.000000000 +0800
-+++ ../xv6-labs-2021/.git/logs/refs/remotes/public/lock	1970-01-01 08:00:00.000000000 +0800
-@@ -1 +0,0 @@
--0000000000000000000000000000000000000000 a4eaf20da42a8777be05502dc342633ec97c3029 fanzhipeng <fzp548834@163.com> 1638697709 +0800	fetch public: storing head
-diff -urN ./.git/logs/refs/remotes/public/master ../xv6-labs-2021/.git/logs/refs/remotes/public/master
---- ./.git/logs/refs/remotes/public/master	2021-12-05 17:48:29.000000000 +0800
-+++ ../xv6-labs-2021/.git/logs/refs/remotes/public/master	1970-01-01 08:00:00.000000000 +0800
-@@ -1 +0,0 @@
--0000000000000000000000000000000000000000 7d085c803a458b78e6bd19f34555e09c921afdbb fanzhipeng <fzp548834@163.com> 1638697709 +0800	fetch public: storing head
-diff -urN ./.git/logs/refs/remotes/public/mmap ../xv6-labs-2021/.git/logs/refs/remotes/public/mmap
---- ./.git/logs/refs/remotes/public/mmap	2021-12-05 17:48:29.000000000 +0800
-+++ ../xv6-labs-2021/.git/logs/refs/remotes/public/mmap	1970-01-01 08:00:00.000000000 +0800
-@@ -1 +0,0 @@
--0000000000000000000000000000000000000000 82bc3d5ee6564de79889bdd146c580399bdf04e6 fanzhipeng <fzp548834@163.com> 1638697709 +0800	fetch public: storing head
-diff -urN ./.git/logs/refs/remotes/public/net ../xv6-labs-2021/.git/logs/refs/remotes/public/net
---- ./.git/logs/refs/remotes/public/net	2021-12-05 17:48:29.000000000 +0800
-+++ ../xv6-labs-2021/.git/logs/refs/remotes/public/net	1970-01-01 08:00:00.000000000 +0800
-@@ -1 +0,0 @@
--0000000000000000000000000000000000000000 8c336ca9e340196025a8d80f9ac34fcc0230bdd5 fanzhipeng <fzp548834@163.com> 1638697709 +0800	fetch public: storing head
-diff -urN ./.git/logs/refs/remotes/public/pgtbl ../xv6-labs-2021/.git/logs/refs/remotes/public/pgtbl
---- ./.git/logs/refs/remotes/public/pgtbl	2021-12-05 17:48:29.000000000 +0800
-+++ ../xv6-labs-2021/.git/logs/refs/remotes/public/pgtbl	1970-01-01 08:00:00.000000000 +0800
-@@ -1 +0,0 @@
--0000000000000000000000000000000000000000 773d70bb9c12e6e39932fce95228ced8b0fd58df fanzhipeng <fzp548834@163.com> 1638697709 +0800	fetch public: storing head
-diff -urN ./.git/logs/refs/remotes/public/riscv ../xv6-labs-2021/.git/logs/refs/remotes/public/riscv
---- ./.git/logs/refs/remotes/public/riscv	2021-12-05 17:48:29.000000000 +0800
-+++ ../xv6-labs-2021/.git/logs/refs/remotes/public/riscv	1970-01-01 08:00:00.000000000 +0800
-@@ -1 +0,0 @@
--0000000000000000000000000000000000000000 a3c5ae4872880ea4a497bb7356cd62191bfe1cc3 fanzhipeng <fzp548834@163.com> 1638697709 +0800	fetch public: storing head
-diff -urN ./.git/logs/refs/remotes/public/syscall ../xv6-labs-2021/.git/logs/refs/remotes/public/syscall
---- ./.git/logs/refs/remotes/public/syscall	2021-12-05 17:48:29.000000000 +0800
-+++ ../xv6-labs-2021/.git/logs/refs/remotes/public/syscall	1970-01-01 08:00:00.000000000 +0800
-@@ -1 +0,0 @@
--0000000000000000000000000000000000000000 8813049eec419b343e7ccd8d72e36491053e0903 fanzhipeng <fzp548834@163.com> 1638697709 +0800	fetch public: storing head
-diff -urN ./.git/logs/refs/remotes/public/thread ../xv6-labs-2021/.git/logs/refs/remotes/public/thread
---- ./.git/logs/refs/remotes/public/thread	2021-12-05 17:48:29.000000000 +0800
-+++ ../xv6-labs-2021/.git/logs/refs/remotes/public/thread	1970-01-01 08:00:00.000000000 +0800
-@@ -1 +0,0 @@
--0000000000000000000000000000000000000000 023d4a1d444ad34f375c1a5e7aa90e97bae183c6 fanzhipeng <fzp548834@163.com> 1638697709 +0800	fetch public: storing head
-diff -urN ./.git/logs/refs/remotes/public/traps ../xv6-labs-2021/.git/logs/refs/remotes/public/traps
---- ./.git/logs/refs/remotes/public/traps	2021-12-05 17:48:29.000000000 +0800
-+++ ../xv6-labs-2021/.git/logs/refs/remotes/public/traps	1970-01-01 08:00:00.000000000 +0800
-@@ -1 +0,0 @@
--0000000000000000000000000000000000000000 2455162885c4218ec4b1311ceff30b9c97717404 fanzhipeng <fzp548834@163.com> 1638697709 +0800	fetch public: storing head
-diff -urN ./.git/logs/refs/remotes/public/util ../xv6-labs-2021/.git/logs/refs/remotes/public/util
---- ./.git/logs/refs/remotes/public/util	2021-12-05 17:48:29.000000000 +0800
-+++ ../xv6-labs-2021/.git/logs/refs/remotes/public/util	1970-01-01 08:00:00.000000000 +0800
-@@ -1 +0,0 @@
--0000000000000000000000000000000000000000 40db4f085bf3b28df45858ff8bbf084743b2c03c fanzhipeng <fzp548834@163.com> 1638697709 +0800	fetch public: storing head
-diff -urN ./.git/logs/refs/stash ../xv6-labs-2021/.git/logs/refs/stash
---- ./.git/logs/refs/stash	1970-01-01 08:00:00.000000000 +0800
-+++ ../xv6-labs-2021/.git/logs/refs/stash	2021-11-26 14:14:27.000000000 +0800
-@@ -0,0 +1 @@
-+0000000000000000000000000000000000000000 71b7d6d1c18d79196c2aa4b4b4a5391749db38a9 fanzhipeng <fzp548834@163.com> 1637907267 +0800	WIP on pgtbl: 24db5fd first section finished.
-diff -urN ./.git/objects/24/db5fd1c95c2c23a91c307eb8ad597e1fc6549d ../xv6-labs-2021/.git/objects/24/db5fd1c95c2c23a91c307eb8ad597e1fc6549d
---- ./.git/objects/24/db5fd1c95c2c23a91c307eb8ad597e1fc6549d	1970-01-01 08:00:00.000000000 +0800
-+++ ../xv6-labs-2021/.git/objects/24/db5fd1c95c2c23a91c307eb8ad597e1fc6549d	2021-11-26 14:01:03.000000000 +0800
-@@ -0,0 +1,3 @@
-+xïéKjƒ0≥÷)z?0H≠èªaπJÎ”±ñç≠lÊÙÒf˜(™‡ï}€˙Ù¯5œ÷††êÀNPJådôÉVM¡)Evú32â"9s»Ÿ∆
-+Xà™óL9(ŸEC ∂.Yn7„¬ùëøπÓ'®å˜⁄è6~·•Ô#"~\Úœ≤oﬂpèÖm
-+…√√íµÊ¶˜øŸ>/çˆÛöpµ2˚>@˚Ë◊⁄Í”¸éıF≈
-\ No newline at end of file
-Binary files ./.git/objects/27/c46972bf9f9283e4fe893557bbfec79e2aee7c and ../xv6-labs-2021/.git/objects/27/c46972bf9f9283e4fe893557bbfec79e2aee7c differ
-Binary files ./.git/objects/28/c596bf5f2925ec2f670d0c071b04981a919696 and ../xv6-labs-2021/.git/objects/28/c596bf5f2925ec2f670d0c071b04981a919696 differ
-Binary files ./.git/objects/2c/1f7dcd4374dc71690ae8fc0c9fdd7608911c6a and ../xv6-labs-2021/.git/objects/2c/1f7dcd4374dc71690ae8fc0c9fdd7608911c6a differ
-Binary files ./.git/objects/2d/20f5a666f27964995fb14c929ca08873ae4659 and ../xv6-labs-2021/.git/objects/2d/20f5a666f27964995fb14c929ca08873ae4659 differ
-Binary files ./.git/objects/33/f81bd11c5aa7b98cb4aff487f15e692d295f9e and ../xv6-labs-2021/.git/objects/33/f81bd11c5aa7b98cb4aff487f15e692d295f9e differ
-Binary files ./.git/objects/3e/fb63887a024adcd19631a18e8fcf2745a5fb69 and ../xv6-labs-2021/.git/objects/3e/fb63887a024adcd19631a18e8fcf2745a5fb69 differ
-Binary files ./.git/objects/45/4c0b497bab5baabe6fb753d9a61d57163bfcf3 and ../xv6-labs-2021/.git/objects/45/4c0b497bab5baabe6fb753d9a61d57163bfcf3 differ
-Binary files ./.git/objects/45/a4fb75db864000d01701c0f7a51864bd4daabf and ../xv6-labs-2021/.git/objects/45/a4fb75db864000d01701c0f7a51864bd4daabf differ
-Binary files ./.git/objects/46/b7e10fec0beacec94e2636d776987cd9aebdd5 and ../xv6-labs-2021/.git/objects/46/b7e10fec0beacec94e2636d776987cd9aebdd5 differ
-Binary files ./.git/objects/47/7ba2e3c32dc5ad0b1462eff111da160ad075c9 and ../xv6-labs-2021/.git/objects/47/7ba2e3c32dc5ad0b1462eff111da160ad075c9 differ
-Binary files ./.git/objects/48/3318dafb79bc58a63a8d503e0a4918cad226c3 and ../xv6-labs-2021/.git/objects/48/3318dafb79bc58a63a8d503e0a4918cad226c3 differ
-Binary files ./.git/objects/48/7f253a8ec53dfbd5c8887619cf770a5b44346a and ../xv6-labs-2021/.git/objects/48/7f253a8ec53dfbd5c8887619cf770a5b44346a differ
-Binary files ./.git/objects/49/073f906b314ccf4a002bf58c102c4f01ae19c2 and ../xv6-labs-2021/.git/objects/49/073f906b314ccf4a002bf58c102c4f01ae19c2 differ
-Binary files ./.git/objects/52/8143cc06862b2ade936851d6d255661e79e993 and ../xv6-labs-2021/.git/objects/52/8143cc06862b2ade936851d6d255661e79e993 differ
-Binary files ./.git/objects/5c/0eaf4b5a46f2bbf6f8f2d98eedcbb82970a47d and ../xv6-labs-2021/.git/objects/5c/0eaf4b5a46f2bbf6f8f2d98eedcbb82970a47d differ
-Binary files ./.git/objects/5c/2ca5551f195dc2b28b01fdc51d4d909f488689 and ../xv6-labs-2021/.git/objects/5c/2ca5551f195dc2b28b01fdc51d4d909f488689 differ
-diff -urN ./.git/objects/67/efeca8c717e1eb35ea8f42e21765517f5f4e4d ../xv6-labs-2021/.git/objects/67/efeca8c717e1eb35ea8f42e21765517f5f4e4d
---- ./.git/objects/67/efeca8c717e1eb35ea8f42e21765517f5f4e4d	1970-01-01 08:00:00.000000000 +0800
-+++ ../xv6-labs-2021/.git/objects/67/efeca8c717e1eb35ea8f42e21765517f5f4e4d	2021-11-26 14:14:27.000000000 +0800
-@@ -0,0 +1,2 @@
-+xïéKjƒ0≥÷)z$Yø!ÃU§V˜XÀ∆V`ò”Gõ ªG=
-+äˆmk¨o„d≤9ôb≤Õ‰}“àN™g$y4Xä≈î≈&£é|rü¢´≈K5Ñû,Ÿ%£°EG.)WèëçP´ ?c›Oê‹_k;∏?‡S^áw)-Ón¬r£}˚Ç9"ÍhCÑwù¥VìŒæ¡ˇ7UÎïü∞w8£|¸•Ç¥Ûp1ç6OiΩ]+◊õ˙ÓrOI
-\ No newline at end of file
-diff -urN ./.git/objects/71/b7d6d1c18d79196c2aa4b4b4a5391749db38a9 ../xv6-labs-2021/.git/objects/71/b7d6d1c18d79196c2aa4b4b4a5391749db38a9
---- ./.git/objects/71/b7d6d1c18d79196c2aa4b4b4a5391749db38a9	1970-01-01 08:00:00.000000000 +0800
-+++ ../xv6-labs-2021/.git/objects/71/b7d6d1c18d79196c2aa4b4b4a5391749db38a9	2021-11-26 14:14:27.000000000 +0800
-@@ -0,0 +1 @@
-+xïè;n1DSÔ)‘0Ù£(Aê6]∫‘\ä¥x?ÿUü>j|ÄtÉô7≈„mYZ7¡∫ó~àò :ßê3íıë*WWRp‰≤deıÅ`e⁄ÈêµÎZ`œ>Pq, ú©BAq 	b©O>°®0eF7Fôeç^º√‡PA£ƒ:—oømáQZ∑∂Àz5Ô˙ÿ!Ê‚ßK·¬€ÚaF¿b—'4Ø6[;çv¯t˘ˇs˙˘˙6€jˆküÔoO1£Ì8ª9Ö{£∂µù7©ó?#\Ü
-\ No newline at end of file
-Binary files ./.git/objects/7b/0d4cabdde57d5022a9a22f29a56ad5b26b4198 and ../xv6-labs-2021/.git/objects/7b/0d4cabdde57d5022a9a22f29a56ad5b26b4198 differ
-Binary files ./.git/objects/84/2c88d3ab8b4f807f9246b0d7259a8afb279d21 and ../xv6-labs-2021/.git/objects/84/2c88d3ab8b4f807f9246b0d7259a8afb279d21 differ
-Binary files ./.git/objects/87/52f188720846bdee813beaf172b68d607ddd52 and ../xv6-labs-2021/.git/objects/87/52f188720846bdee813beaf172b68d607ddd52 differ
-Binary files ./.git/objects/99/0e8bfc2e9be7be4e464917b403fc7096fbf7bc and ../xv6-labs-2021/.git/objects/99/0e8bfc2e9be7be4e464917b403fc7096fbf7bc differ
-Binary files ./.git/objects/af/7b3cfd1d6655a8fe52b6ab1cae02a2226948c2 and ../xv6-labs-2021/.git/objects/af/7b3cfd1d6655a8fe52b6ab1cae02a2226948c2 differ
-Binary files ./.git/objects/b5/1174defa67ef5c732cf78ae289eeb90fc74d9f and ../xv6-labs-2021/.git/objects/b5/1174defa67ef5c732cf78ae289eeb90fc74d9f differ
-Binary files ./.git/objects/b5/8be040ddc976b582f0f18c2b0defb7df4b0f47 and ../xv6-labs-2021/.git/objects/b5/8be040ddc976b582f0f18c2b0defb7df4b0f47 differ
-Binary files ./.git/objects/bc/109fd5a0d85a3844c51d056e093c2432bb21ca and ../xv6-labs-2021/.git/objects/bc/109fd5a0d85a3844c51d056e093c2432bb21ca differ
-Binary files ./.git/objects/c2/a81b1a2ac5580994fdf641f85919bb298af281 and ../xv6-labs-2021/.git/objects/c2/a81b1a2ac5580994fdf641f85919bb298af281 differ
-Binary files ./.git/objects/c3/d9279aa95cf37126e4684de1f6bbe2344d8813 and ../xv6-labs-2021/.git/objects/c3/d9279aa95cf37126e4684de1f6bbe2344d8813 differ
-Binary files ./.git/objects/cf/b5119d445fab5f63c318c4e9adb88d7bc27879 and ../xv6-labs-2021/.git/objects/cf/b5119d445fab5f63c318c4e9adb88d7bc27879 differ
-Binary files ./.git/objects/d8/5559233b7cd24e6139a730f9ad043795584fd7 and ../xv6-labs-2021/.git/objects/d8/5559233b7cd24e6139a730f9ad043795584fd7 differ
-Binary files ./.git/objects/eb/00dc4f5cad2ec1a7dc736b7a156afb25b6d1bf and ../xv6-labs-2021/.git/objects/eb/00dc4f5cad2ec1a7dc736b7a156afb25b6d1bf differ
-diff -urN ./.git/objects/eb/8c6e13329655388a5a75faf8d47690f25768d4 ../xv6-labs-2021/.git/objects/eb/8c6e13329655388a5a75faf8d47690f25768d4
---- ./.git/objects/eb/8c6e13329655388a5a75faf8d47690f25768d4	1970-01-01 08:00:00.000000000 +0800
-+++ ../xv6-labs-2021/.git/objects/eb/8c6e13329655388a5a75faf8d47690f25768d4	2021-11-23 10:19:00.000000000 +0800
-@@ -0,0 +1,2 @@
-+x•QÀn√ ÏôØXπjÖ+´±´¶áF˘◊l≈≈p˙R˛Ω¨R¢JπîZfgá®˚°ÜÌ∂∏π’¶ÈGâê–Ï7·À¢Ïˆß„Éóç—£€–F0”&¿ª–ÜS!\€d–t¬=P},´~ƒE]%Àßj7âı® óÁ±⁄"W2ù˚D∑Z¬‘‡|E	›Cæ
-+ì∏C!„lôWâf‡ı7ä«:]Fâ¶¨ã∫ä$wÚ5é5®è(„M¶}3I-Ü®œœá>úd¨,¢x“ERq&âü:|NÄΩ«%0]H)Ë˝F?ß"Ï∫ﬁøìWíàËı~ˆ≥:û>„"Ñ√0:˘éùÿ/7öp
-\ No newline at end of file
-Binary files ./.git/objects/f2/0aec72b63fb46133c7295c1d31d931fb60d21e and ../xv6-labs-2021/.git/objects/f2/0aec72b63fb46133c7295c1d31d931fb60d21e differ
-Binary files ./.git/objects/pack/pack-4649c326094d3261c3ef129169519d8d3b994b99.idx and ../xv6-labs-2021/.git/objects/pack/pack-4649c326094d3261c3ef129169519d8d3b994b99.idx differ
-Binary files ./.git/objects/pack/pack-4649c326094d3261c3ef129169519d8d3b994b99.pack and ../xv6-labs-2021/.git/objects/pack/pack-4649c326094d3261c3ef129169519d8d3b994b99.pack differ
-Binary files ./.git/objects/pack/pack-f998c999776b256fe01cb6853b999c35fa5e10dd.idx and ../xv6-labs-2021/.git/objects/pack/pack-f998c999776b256fe01cb6853b999c35fa5e10dd.idx differ
-Binary files ./.git/objects/pack/pack-f998c999776b256fe01cb6853b999c35fa5e10dd.pack and ../xv6-labs-2021/.git/objects/pack/pack-f998c999776b256fe01cb6853b999c35fa5e10dd.pack differ
-diff -urN ./.git/packed-refs ../xv6-labs-2021/.git/packed-refs
---- ./.git/packed-refs	1970-01-01 08:00:00.000000000 +0800
-+++ ../xv6-labs-2021/.git/packed-refs	2021-11-18 15:54:09.000000000 +0800
-@@ -0,0 +1,11 @@
-+# pack-refs with: peeled fully-peeled sorted 
-+c9818915934504523e52a33e2755b7aff54c495e refs/remotes/origin/cow
-+46bcbaf1f2b638ede67e3dd1fcccee226a772fa5 refs/remotes/origin/fs
-+281b66cf19660eb15c4542b63693c74a9ced0467 refs/remotes/origin/lock
-+1bd9c80b1ef5eb70b91bbd1dbea9c1d953cdc555 refs/remotes/origin/net
-+1e6b2dec7d5ca49571e426ccc6cd686d009b6d07 refs/remotes/origin/pgtbl
-+a1da53a5a12e21b44a2c79d962a437fa2107627c refs/remotes/origin/riscv
-+1e6e6cafbb26a898b8c3f90e819fc5e7227dc8af refs/remotes/origin/syscall
-+7e0a45c6e73c5552d913ae49d090b9a11bbd95f9 refs/remotes/origin/thread
-+219a8d7d70b6ac66b1447aeada079a1f8c3027f7 refs/remotes/origin/traps
-+f654383cdec479c9d53a02bffa1ab5526f6c3ca4 refs/remotes/origin/util
-diff -urN ./.git/refs/heads/pgtbl ../xv6-labs-2021/.git/refs/heads/pgtbl
---- ./.git/refs/heads/pgtbl	1970-01-01 08:00:00.000000000 +0800
-+++ ../xv6-labs-2021/.git/refs/heads/pgtbl	2021-11-26 14:01:03.000000000 +0800
-@@ -0,0 +1 @@
-+24db5fd1c95c2c23a91c307eb8ad597e1fc6549d
-diff -urN ./.git/refs/heads/syscall ../xv6-labs-2021/.git/refs/heads/syscall
---- ./.git/refs/heads/syscall	1970-01-01 08:00:00.000000000 +0800
-+++ ../xv6-labs-2021/.git/refs/heads/syscall	2021-11-23 12:10:57.000000000 +0800
-@@ -0,0 +1 @@
-+842c88d3ab8b4f807f9246b0d7259a8afb279d21
-diff -urN ./.git/refs/heads/util ../xv6-labs-2021/.git/refs/heads/util
---- ./.git/refs/heads/util	2021-12-05 17:48:45.000000000 +0800
-+++ ../xv6-labs-2021/.git/refs/heads/util	2021-11-23 10:19:07.000000000 +0800
-@@ -1 +1 @@
--40db4f085bf3b28df45858ff8bbf084743b2c03c
-+b58be040ddc976b582f0f18c2b0defb7df4b0f47
-diff -urN ./.git/refs/remotes/origin/util ../xv6-labs-2021/.git/refs/remotes/origin/util
---- ./.git/refs/remotes/origin/util	2021-12-05 17:50:12.000000000 +0800
-+++ ../xv6-labs-2021/.git/refs/remotes/origin/util	1970-01-01 08:00:00.000000000 +0800
-@@ -1 +0,0 @@
--40db4f085bf3b28df45858ff8bbf084743b2c03c
-diff -urN ./.git/refs/remotes/public/cow ../xv6-labs-2021/.git/refs/remotes/public/cow
---- ./.git/refs/remotes/public/cow	2021-12-05 17:48:29.000000000 +0800
-+++ ../xv6-labs-2021/.git/refs/remotes/public/cow	1970-01-01 08:00:00.000000000 +0800
-@@ -1 +0,0 @@
--f7e8bfc8393ac6e43ba2dd48e021ba68ce827d8b
-diff -urN ./.git/refs/remotes/public/fs ../xv6-labs-2021/.git/refs/remotes/public/fs
---- ./.git/refs/remotes/public/fs	2021-12-05 17:48:29.000000000 +0800
-+++ ../xv6-labs-2021/.git/refs/remotes/public/fs	1970-01-01 08:00:00.000000000 +0800
-@@ -1 +0,0 @@
--74a81c619dcb9f5daad16b227d799c30c4d563ab
-diff -urN ./.git/refs/remotes/public/lazy ../xv6-labs-2021/.git/refs/remotes/public/lazy
---- ./.git/refs/remotes/public/lazy	2021-12-05 17:48:29.000000000 +0800
-+++ ../xv6-labs-2021/.git/refs/remotes/public/lazy	1970-01-01 08:00:00.000000000 +0800
-@@ -1 +0,0 @@
--b34ddc999a5554d62d981971dd35b63c0c311c5c
-diff -urN ./.git/refs/remotes/public/lock ../xv6-labs-2021/.git/refs/remotes/public/lock
---- ./.git/refs/remotes/public/lock	2021-12-05 17:48:29.000000000 +0800
-+++ ../xv6-labs-2021/.git/refs/remotes/public/lock	1970-01-01 08:00:00.000000000 +0800
-@@ -1 +0,0 @@
--a4eaf20da42a8777be05502dc342633ec97c3029
-diff -urN ./.git/refs/remotes/public/master ../xv6-labs-2021/.git/refs/remotes/public/master
---- ./.git/refs/remotes/public/master	2021-12-05 17:48:29.000000000 +0800
-+++ ../xv6-labs-2021/.git/refs/remotes/public/master	1970-01-01 08:00:00.000000000 +0800
-@@ -1 +0,0 @@
--7d085c803a458b78e6bd19f34555e09c921afdbb
-diff -urN ./.git/refs/remotes/public/mmap ../xv6-labs-2021/.git/refs/remotes/public/mmap
---- ./.git/refs/remotes/public/mmap	2021-12-05 17:48:29.000000000 +0800
-+++ ../xv6-labs-2021/.git/refs/remotes/public/mmap	1970-01-01 08:00:00.000000000 +0800
-@@ -1 +0,0 @@
--82bc3d5ee6564de79889bdd146c580399bdf04e6
-diff -urN ./.git/refs/remotes/public/net ../xv6-labs-2021/.git/refs/remotes/public/net
---- ./.git/refs/remotes/public/net	2021-12-05 17:48:29.000000000 +0800
-+++ ../xv6-labs-2021/.git/refs/remotes/public/net	1970-01-01 08:00:00.000000000 +0800
-@@ -1 +0,0 @@
--8c336ca9e340196025a8d80f9ac34fcc0230bdd5
-diff -urN ./.git/refs/remotes/public/pgtbl ../xv6-labs-2021/.git/refs/remotes/public/pgtbl
---- ./.git/refs/remotes/public/pgtbl	2021-12-05 17:48:29.000000000 +0800
-+++ ../xv6-labs-2021/.git/refs/remotes/public/pgtbl	1970-01-01 08:00:00.000000000 +0800
-@@ -1 +0,0 @@
--773d70bb9c12e6e39932fce95228ced8b0fd58df
-diff -urN ./.git/refs/remotes/public/riscv ../xv6-labs-2021/.git/refs/remotes/public/riscv
---- ./.git/refs/remotes/public/riscv	2021-12-05 17:48:29.000000000 +0800
-+++ ../xv6-labs-2021/.git/refs/remotes/public/riscv	1970-01-01 08:00:00.000000000 +0800
-@@ -1 +0,0 @@
--a3c5ae4872880ea4a497bb7356cd62191bfe1cc3
-diff -urN ./.git/refs/remotes/public/syscall ../xv6-labs-2021/.git/refs/remotes/public/syscall
---- ./.git/refs/remotes/public/syscall	2021-12-05 17:48:29.000000000 +0800
-+++ ../xv6-labs-2021/.git/refs/remotes/public/syscall	1970-01-01 08:00:00.000000000 +0800
-@@ -1 +0,0 @@
--8813049eec419b343e7ccd8d72e36491053e0903
-diff -urN ./.git/refs/remotes/public/thread ../xv6-labs-2021/.git/refs/remotes/public/thread
---- ./.git/refs/remotes/public/thread	2021-12-05 17:48:29.000000000 +0800
-+++ ../xv6-labs-2021/.git/refs/remotes/public/thread	1970-01-01 08:00:00.000000000 +0800
-@@ -1 +0,0 @@
--023d4a1d444ad34f375c1a5e7aa90e97bae183c6
-diff -urN ./.git/refs/remotes/public/traps ../xv6-labs-2021/.git/refs/remotes/public/traps
---- ./.git/refs/remotes/public/traps	2021-12-05 17:48:29.000000000 +0800
-+++ ../xv6-labs-2021/.git/refs/remotes/public/traps	1970-01-01 08:00:00.000000000 +0800
-@@ -1 +0,0 @@
--2455162885c4218ec4b1311ceff30b9c97717404
-diff -urN ./.git/refs/remotes/public/util ../xv6-labs-2021/.git/refs/remotes/public/util
---- ./.git/refs/remotes/public/util	2021-12-05 17:48:29.000000000 +0800
-+++ ../xv6-labs-2021/.git/refs/remotes/public/util	1970-01-01 08:00:00.000000000 +0800
-@@ -1 +0,0 @@
--40db4f085bf3b28df45858ff8bbf084743b2c03c
-diff -urN ./.git/refs/stash ../xv6-labs-2021/.git/refs/stash
---- ./.git/refs/stash	1970-01-01 08:00:00.000000000 +0800
-+++ ../xv6-labs-2021/.git/refs/stash	2021-11-26 14:14:27.000000000 +0800
-@@ -0,0 +1 @@
-+71b7d6d1c18d79196c2aa4b4b4a5391749db38a9
-diff -urN ./.gitignore ../xv6-labs-2021/.gitignore
---- ./.gitignore	2021-12-05 17:48:45.000000000 +0800
-+++ ../xv6-labs-2021/.gitignore	2021-11-18 15:54:53.000000000 +0800
-@@ -20,3 +20,5 @@
- xv6.out*
- .vagrant/
- submissions/
-+ph
-+barrier
-diff -urN ./Makefile ../xv6-labs-2021/Makefile
---- ./Makefile	2021-12-05 17:48:45.000000000 +0800
-+++ ../xv6-labs-2021/Makefile	2021-12-05 17:40:55.000000000 +0800
-@@ -1,6 +1,6 @@
- 
- # To compile and run with a lab solution, set the lab name in lab.mk
--# (e.g., LB=util).  Run make grade to test solution with the lab's
-+# (e.g., LAB=util).  Run make grade to test solution with the lab's
- # grade script (e.g., grade-lab-util).
- 
- -include conf/lab.mk
-@@ -10,12 +10,7 @@
- 
- OBJS = \
-   $K/entry.o \
--  $K/start.o \
--  $K/console.o \
--  $K/printf.o \
--  $K/uart.o \
-   $K/kalloc.o \
--  $K/spinlock.o \
-   $K/string.o \
-   $K/main.o \
-   $K/vm.o \
-@@ -35,12 +30,41 @@
-   $K/sysfile.o \
-   $K/kernelvec.o \
-   $K/plic.o \
--  $K/virtio_disk.o \
-+  $K/virtio_disk.o
-+
-+OBJS_KCSAN = \
-+  $K/start.o \
-+  $K/console.o \
-+  $K/printf.o \
-+  $K/uart.o \
-+  $K/spinlock.o
-+
-+ifdef KCSAN
-+OBJS_KCSAN += \
-+	$K/kcsan.o
-+endif
- 
- ifeq ($(LAB),pgtbl)
--OBJS += $K/vmcopyin.o
-+OBJS += \
-+	$K/vmcopyin.o
- endif
- 
-+ifeq ($(LAB),$(filter $(LAB), pgtbl lock))
-+OBJS += \
-+	$K/stats.o\
-+	$K/sprintf.o
-+endif
-+
-+
-+ifeq ($(LAB),net)
-+OBJS += \
-+	$K/e1000.o \
-+	$K/net.o \
-+	$K/sysnet.o \
-+	$K/pci.o
-+endif
-+
-+
- # riscv64-unknown-elf- or riscv64-linux-gnu-
- # perhaps in /opt/riscv/bin
- #TOOLPREFIX = 
-@@ -71,15 +95,25 @@
- 
- ifdef LAB
- LABUPPER = $(shell echo $(LAB) | tr a-z A-Z)
--CFLAGS += -DSOL_$(LABUPPER)
-+XCFLAGS += -DSOL_$(LABUPPER) -DLAB_$(LABUPPER)
- endif
- 
-+CFLAGS += $(XCFLAGS)
- CFLAGS += -MD
- CFLAGS += -mcmodel=medany
- CFLAGS += -ffreestanding -fno-common -nostdlib -mno-relax
- CFLAGS += -I.
- CFLAGS += $(shell $(CC) -fno-stack-protector -E -x c /dev/null >/dev/null 2>&1 && echo -fno-stack-protector)
- 
-+ifeq ($(LAB),net)
-+CFLAGS += -DNET_TESTS_PORT=$(SERVERPORT)
-+endif
-+
-+ifdef KCSAN
-+CFLAGS += -DKCSAN
-+KCSANFLAG = -fsanitize=thread
-+endif
-+
- # Disable PIE when possible (for Ubuntu 16.10 toolchain)
- ifneq ($(shell $(CC) -dumpspecs 2>/dev/null | grep -e '[^f]no-pie'),)
- CFLAGS += -fno-pie -no-pie
-@@ -90,11 +124,17 @@
- 
- LDFLAGS = -z max-page-size=4096
- 
--$K/kernel: $(OBJS) $K/kernel.ld $U/initcode
--	$(LD) $(LDFLAGS) -T $K/kernel.ld -o $K/kernel $(OBJS) 
-+$K/kernel: $(OBJS) $(OBJS_KCSAN) $K/kernel.ld $U/initcode
-+	$(LD) $(LDFLAGS) -T $K/kernel.ld -o $K/kernel $(OBJS) $(OBJS_KCSAN)
- 	$(OBJDUMP) -S $K/kernel > $K/kernel.asm
- 	$(OBJDUMP) -t $K/kernel | sed '1,/SYMBOL TABLE/d; s/ .* / /; /^$$/d' > $K/kernel.sym
- 
-+$(OBJS): EXTRAFLAG := $(KCSANFLAG)
-+
-+$K/%.o: $K/%.c
-+	$(CC) $(CFLAGS) $(EXTRAFLAG) -c -o $@ $<
-+
-+
- $U/initcode: $U/initcode.S
- 	$(CC) $(CFLAGS) -march=rv64g -nostdinc -I. -Ikernel -c $U/initcode.S -o $U/initcode.o
- 	$(LD) $(LDFLAGS) -N -e start -Ttext 0 -o $U/initcode.out $U/initcode.o
-@@ -106,6 +146,10 @@
- 
- ULIB = $U/ulib.o $U/usys.o $U/printf.o $U/umalloc.o
- 
-+ifeq ($(LAB),$(filter $(LAB), pgtbl lock))
-+ULIB += $U/statistics.o
-+endif
-+
- _%: %.o $(ULIB)
- 	$(LD) $(LDFLAGS) -N -e main -Ttext 0 -o $@ $^
- 	$(OBJDUMP) -S $@ > $*.asm
-@@ -124,7 +168,7 @@
- 	$(OBJDUMP) -S $U/_forktest > $U/forktest.asm
- 
- mkfs/mkfs: mkfs/mkfs.c $K/fs.h $K/param.h
--	gcc -Werror -Wall -I. -o mkfs/mkfs mkfs/mkfs.c
-+	gcc $(XCFLAGS) -Werror -Wall -I. -o mkfs/mkfs mkfs/mkfs.c
- 
- # Prevent deletion of intermediate files, e.g. cat.o, after first build, so
- # that disk image changes after first build are persistent until clean.  More
-@@ -149,18 +193,23 @@
- 	$U/_grind\
- 	$U/_wc\
- 	$U/_zombie\
-+	$U/_sleep\
-+	$U/_pingpong\
-+	$U/_primes\
-+	$U/_find\
-+	$U/_xargs\
-+
- 
- 
--ifeq ($(LAB),syscall)
-+ifeq ($(LAB),$(filter $(LAB), pgtbl lock))
- UPROGS += \
--	$U/_trace\
--	$U/_sysinfotest
-+	$U/_stats
- endif
- 
--ifeq ($(LAB),trap)
-+ifeq ($(LAB),traps)
- UPROGS += \
- 	$U/_call\
--	$U/_alarmtest
-+	$U/_bttest
- endif
- 
- ifeq ($(LAB),lazy)
-@@ -173,11 +222,48 @@
- 	$U/_cowtest
- endif
- 
-+ifeq ($(LAB),thread)
-+UPROGS += \
-+	$U/_uthread
-+
-+$U/uthread_switch.o : $U/uthread_switch.S
-+	$(CC) $(CFLAGS) -c -o $U/uthread_switch.o $U/uthread_switch.S
-+
-+$U/_uthread: $U/uthread.o $U/uthread_switch.o $(ULIB)
-+	$(LD) $(LDFLAGS) -N -e main -Ttext 0 -o $U/_uthread $U/uthread.o $U/uthread_switch.o $(ULIB)
-+	$(OBJDUMP) -S $U/_uthread > $U/uthread.asm
-+
-+ph: notxv6/ph.c
-+	gcc -o ph -g -O2 $(XCFLAGS) notxv6/ph.c -pthread
-+
-+barrier: notxv6/barrier.c
-+	gcc -o barrier -g -O2 $(XCFLAGS) notxv6/barrier.c -pthread
-+endif
-+
-+ifeq ($(LAB),lock)
-+UPROGS += \
-+	$U/_kalloctest\
-+	$U/_bcachetest
-+endif
-+
-+ifeq ($(LAB),fs)
-+UPROGS += \
-+	$U/_bigfile
-+endif
-+
-+
-+
-+ifeq ($(LAB),net)
-+UPROGS += \
-+	$U/_nettests
-+endif
-+
- UEXTRA=
- ifeq ($(LAB),util)
- 	UEXTRA += user/xargstest.sh
- endif
- 
-+
- fs.img: mkfs/mkfs README $(UEXTRA) $(UPROGS)
- 	mkfs/mkfs fs.img README $(UEXTRA) $(UPROGS)
- 
-@@ -189,7 +275,8 @@
- 	$U/initcode $U/initcode.out $K/kernel fs.img \
- 	mkfs/mkfs .gdbinit \
-         $U/usys.S \
--	$(UPROGS)
-+	$(UPROGS) \
-+	ph barrier
- 
- # try to generate a unique GDB port
- GDBPORT = $(shell expr `id -u` % 5000 + 25000)
-@@ -200,11 +287,21 @@
- ifndef CPUS
- CPUS := 3
- endif
-+ifeq ($(LAB),fs)
-+CPUS := 1
-+endif
-+
-+FWDPORT = $(shell expr `id -u` % 5000 + 25999)
- 
- QEMUOPTS = -machine virt -bios none -kernel $K/kernel -m 128M -smp $(CPUS) -nographic
- QEMUOPTS += -drive file=fs.img,if=none,format=raw,id=x0
- QEMUOPTS += -device virtio-blk-device,drive=x0,bus=virtio-mmio-bus.0
- 
-+ifeq ($(LAB),net)
-+QEMUOPTS += -netdev user,id=net0,hostfwd=udp::$(FWDPORT)-:2000 -object filter-dump,id=net0,netdev=net0,file=packets.pcap
-+QEMUOPTS += -device e1000,netdev=net0,bus=pcie.0
-+endif
-+
- qemu: $K/kernel fs.img
- 	$(QEMU) $(QEMUOPTS)
- 
-@@ -215,6 +312,17 @@
- 	@echo "*** Now run 'gdb' in another window." 1>&2
- 	$(QEMU) $(QEMUOPTS) -S $(QEMUGDB)
- 
-+ifeq ($(LAB),net)
-+# try to generate a unique port for the echo server
-+SERVERPORT = $(shell expr `id -u` % 5000 + 25099)
-+
-+server:
-+	python3 server.py $(SERVERPORT)
-+
-+ping:
-+	python3 ping.py $(FWDPORT)
-+endif
-+
- ##
- ##  FOR testing lab grading script
- ##
-@@ -237,7 +345,7 @@
- ##
- 
- 
--WEBSUB := https://6828.scripts.mit.edu/2020/handin.py
-+WEBSUB := https://6828.scripts.mit.edu/2021/handin.py
- 
- handin: tarball-pref myapi.key
- 	@SUF=$(LAB); \
-@@ -269,7 +377,7 @@
- 		test "$$r" = y; \
- 	fi
- 
--UPSTREAM := $(shell git remote -v | grep -m 1 "xv6-labs-2020" | awk '{split($$0,a," "); print a[1]}')
-+UPSTREAM := $(shell git remote -v | grep -m 1 "xv6-labs-2021" | awk '{split($$0,a," "); print a[1]}')
- 
- tarball: handin-check
- 	git archive --format=tar HEAD | gzip > lab-$(LAB)-handin.tar.gz
-diff -urN ./README ../xv6-labs-2021/README
---- ./README	2021-12-05 17:48:45.000000000 +0800
-+++ ../xv6-labs-2021/README	2021-11-18 15:54:53.000000000 +0800
-@@ -14,18 +14,20 @@
- Clements.
- 
- We are also grateful for the bug reports and patches contributed by
--Silas Boyd-Wickizer, Anton Burtsev, Dan Cross, Cody Cutler, Mike CAT,
--Tej Chajed, Asami Doi, eyalz800, , Nelson Elhage, Saar Ettinger, Alice
--Ferrazzi, Nathaniel Filardo, Peter Froehlich, Yakir Goaron,Shivam
--Handa, Bryan Henry, jaichenhengjie, Jim Huang, Alexander Kapshuk,
--Anders Kaseorg, kehao95, Wolfgang Keller, Jonathan Kimmitt, Eddie
--Kohler, Austin Liew, Imbar Marinescu, Yandong Mao, Matan Shabtay,
--Hitoshi Mitake, Carmi Merimovich, Mark Morrissey, mtasm, Joel Nider,
--Greg Price, Ayan Shafqat, Eldar Sehayek, Yongming Shen, Fumiya
--Shigemitsu, Takahiro, Cam Tenny, tyfkda, Rafael Ubal, Warren Toomey,
--Stephen Tu, Pablo Ventura, Xi Wang, Keiichi Watanabe, Nicolas
--Wolovick, wxdao, Grant Wu, Jindong Zhang, Icenowy Zheng, and Zou Chang
--Wei.
-+Takahiro Aoyagi, Silas Boyd-Wickizer, Anton Burtsev, Ian Chen, Dan
-+Cross, Cody Cutler, Mike CAT, Tej Chajed, Asami Doi, eyalz800, Nelson
-+Elhage, Saar Ettinger, Alice Ferrazzi, Nathaniel Filardo, flespark,
-+Peter Froehlich, Yakir Goaron,Shivam Handa, Matt Harvey, Bryan Henry,
-+jaichenhengjie, Jim Huang, Mat√∫≈° J√≥kay, Alexander Kapshuk, Anders
-+Kaseorg, kehao95, Wolfgang Keller, Jungwoo Kim, Jonathan Kimmitt,
-+Eddie Kohler, Vadim Kolontsov , Austin Liew, l0stman, Pavan
-+Maddamsetti, Imbar Marinescu, Yandong Mao, , Matan Shabtay, Hitoshi
-+Mitake, Carmi Merimovich, Mark Morrissey, mtasm, Joel Nider,
-+OptimisticSide, Greg Price, Jude Rich, Ayan Shafqat, Eldar Sehayek,
-+Yongming Shen, Fumiya Shigemitsu, Cam Tenny, tyfkda, Warren Toomey,
-+Stephen Tu, Rafael Ubal, Amane Uehara, Pablo Ventura, Xi Wang, Keiichi
-+Watanabe, Nicolas Wolovick, wxdao, Grant Wu, Jindong Zhang, Icenowy
-+Zheng, ZhUyU1997, and Zou Chang Wei.
- 
- The code in the files that constitute xv6 is
- Copyright 2006-2020 Frans Kaashoek, Robert Morris, and Russ Cox.
-Binary files ./__pycache__/gradelib.cpython-39.pyc and ../xv6-labs-2021/__pycache__/gradelib.cpython-39.pyc differ
Binary files ./fs.img and ../xv6-labs-2021/fs.img differ
diff -urN ./grade-lab-util ../xv6-labs-2021/grade-lab-util
--- ./grade-lab-util	2021-12-05 17:48:45.000000000 +0800
+++ ../xv6-labs-2021/grade-lab-util	2021-12-05 17:40:55.000000000 +0800
@@ -1,4 +1,4 @@
-#!/usr/bin/env python
+#!/usr/bin/env python3
 
 import re
 from gradelib import *
diff -urN ./gradelib.py ../xv6-labs-2021/gradelib.py
--- ./gradelib.py	2021-12-05 17:48:45.000000000 +0800
+++ ../xv6-labs-2021/gradelib.py	2021-11-18 15:54:53.000000000 +0800
@@ -200,7 +200,7 @@
 # Utilities
 #
 
-__all__ += ["make", "maybe_unlink", "reset_fs", "color", "random_str", "check_time"]
+__all__ += ["make", "maybe_unlink", "reset_fs", "color", "random_str", "check_time", "check_answers"]
 
 MAKE_TIMESTAMP = 0
 
@@ -258,6 +258,15 @@
     except IOError:
         raise AssertionError('Cannot read time.txt')
 
+def check_answers(file, n=10):
+    try:
+        with open(file) as f:
+            d = f.read().strip()
+            if len(d) < n:
+                raise AssertionError('%s does not seem to contain enough text' % file)
+    except IOError:
+        raise AssertionError('Cannot read %s' % file)
+
 
 ##################################################################
 # Controllers
Binary files ./kernel/bio.o and ../xv6-labs-2021/kernel/bio.o differ
diff -urN ./kernel/console.c ../xv6-labs-2021/kernel/console.c
--- ./kernel/console.c	2021-12-05 17:48:45.000000000 +0800
+++ ../xv6-labs-2021/kernel/console.c	2021-11-18 15:54:53.000000000 +0800
@@ -60,14 +60,12 @@
 {
   int i;
 
-  acquire(&cons.lock);
   for(i = 0; i < n; i++){
     char c;
     if(either_copyin(&c, user_src, src+i, 1) == -1)
       break;
     uartputc(c);
   }
-  release(&cons.lock);
 
   return i;
 }
Binary files ./kernel/console.o and ../xv6-labs-2021/kernel/console.o differ
diff -urN ./kernel/defs.h ../xv6-labs-2021/kernel/defs.h
--- ./kernel/defs.h	2021-12-05 17:48:45.000000000 +0800
+++ ../xv6-labs-2021/kernel/defs.h	2021-12-05 17:40:55.000000000 +0800
@@ -86,6 +86,7 @@
 void            exit(int);
 int             fork(void);
 int             growproc(int);
+void            proc_mapstacks(pagetable_t);
 pagetable_t     proc_pagetable(struct proc *);
 void            proc_freepagetable(pagetable_t, uint64);
 int             kill(int);
@@ -95,7 +96,6 @@
 void            procinit(void);
 void            scheduler(void) __attribute__((noreturn));
 void            sched(void);
-void            setproc(struct proc*);
 void            sleep(void*, struct spinlock*);
 void            userinit(void);
 int             wait(uint64);
@@ -156,8 +156,7 @@
 // vm.c
 void            kvminit(void);
 void            kvminithart(void);
-uint64          kvmpa(uint64);
-void            kvmmap(uint64, uint64, uint64, int);
+void            kvmmap(pagetable_t, uint64, uint64, uint64, int);
 int             mappages(pagetable_t, uint64, uint64, uint64, int);
 pagetable_t     uvmcreate(void);
 void            uvminit(pagetable_t, uchar *, uint);
Binary files ./kernel/entry.o and ../xv6-labs-2021/kernel/entry.o differ
diff -urN ./kernel/exec.c ../xv6-labs-2021/kernel/exec.c
--- ./kernel/exec.c	2021-12-05 17:48:45.000000000 +0800
+++ ../xv6-labs-2021/kernel/exec.c	2021-12-05 17:40:55.000000000 +0800
@@ -14,7 +14,7 @@
 {
   char *s, *last;
   int i, off;
-  uint64 argc, sz = 0, sp, ustack[MAXARG+1], stackbase;
+  uint64 argc, sz = 0, sp, ustack[MAXARG], stackbase;
   struct elfhdr elf;
   struct inode *ip;
   struct proghdr ph;
@@ -52,7 +52,7 @@
     if((sz1 = uvmalloc(pagetable, sz, ph.vaddr + ph.memsz)) == 0)
       goto bad;
     sz = sz1;
-    if(ph.vaddr % PGSIZE != 0)
+    if((ph.vaddr % PGSIZE) != 0)
       goto bad;
     if(loadseg(pagetable, ph.vaddr, ip, ph.off, ph.filesz) < 0)
       goto bad;
@@ -138,9 +138,6 @@
   uint i, n;
   uint64 pa;
 
-  if((va % PGSIZE) != 0)
-    panic("loadseg: va must be page aligned");
-
   for(i = 0; i < sz; i += PGSIZE){
     pa = walkaddr(pagetable, va + i);
     if(pa == 0)
Binary files ./kernel/exec.o and ../xv6-labs-2021/kernel/exec.o differ
diff -urN ./kernel/file.c ../xv6-labs-2021/kernel/file.c
--- ./kernel/file.c	2021-12-05 17:48:45.000000000 +0800
+++ ../xv6-labs-2021/kernel/file.c	2021-11-18 15:54:53.000000000 +0800
@@ -166,10 +166,10 @@
       iunlock(f->ip);
       end_op();
 
-      if(r < 0)
+      if(r != n1){
+        // error from writei
         break;
-      if(r != n1)
-        panic("short filewrite");
+      }
       i += r;
     }
     ret = (i == n ? n : -1);
Binary files ./kernel/file.o and ../xv6-labs-2021/kernel/file.o differ
diff -urN ./kernel/fs.c ../xv6-labs-2021/kernel/fs.c
--- ./kernel/fs.c	2021-12-05 17:48:45.000000000 +0800
+++ ../xv6-labs-2021/kernel/fs.c	2021-11-18 15:54:53.000000000 +0800
@@ -113,9 +113,9 @@
 // sb.startinode. Each inode has a number, indicating its
 // position on the disk.
 //
-// The kernel keeps a cache of in-use inodes in memory
+// The kernel keeps a table of in-use inodes in memory
 // to provide a place for synchronizing access
-// to inodes used by multiple processes. The cached
+// to inodes used by multiple processes. The in-memory
 // inodes include book-keeping information that is
 // not stored on disk: ip->ref and ip->valid.
 //
@@ -127,15 +127,15 @@
 //   is non-zero. ialloc() allocates, and iput() frees if
 //   the reference and link counts have fallen to zero.
 //
-// * Referencing in cache: an entry in the inode cache
+// * Referencing in table: an entry in the inode table
 //   is free if ip->ref is zero. Otherwise ip->ref tracks
 //   the number of in-memory pointers to the entry (open
 //   files and current directories). iget() finds or
-//   creates a cache entry and increments its ref; iput()
+//   creates a table entry and increments its ref; iput()
 //   decrements ref.
 //
 // * Valid: the information (type, size, &c) in an inode
-//   cache entry is only correct when ip->valid is 1.
+//   table entry is only correct when ip->valid is 1.
 //   ilock() reads the inode from
 //   the disk and sets ip->valid, while iput() clears
 //   ip->valid if ip->ref has fallen to zero.
@@ -156,16 +156,16 @@
 // and only lock it for short periods (e.g., in read()).
 // The separation also helps avoid deadlock and races during
 // pathname lookup. iget() increments ip->ref so that the inode
-// stays cached and pointers to it remain valid.
+// stays in the table and pointers to it remain valid.
 //
 // Many internal file system functions expect the caller to
 // have locked the inodes involved; this lets callers create
 // multi-step atomic operations.
 //
-// The icache.lock spin-lock protects the allocation of icache
+// The itable.lock spin-lock protects the allocation of itable
 // entries. Since ip->ref indicates whether an entry is free,
 // and ip->dev and ip->inum indicate which i-node an entry
-// holds, one must hold icache.lock while using any of those fields.
+// holds, one must hold itable.lock while using any of those fields.
 //
 // An ip->lock sleep-lock protects all ip-> fields other than ref,
 // dev, and inum.  One must hold ip->lock in order to
@@ -174,16 +174,16 @@
 struct {
   struct spinlock lock;
   struct inode inode[NINODE];
-} icache;
+} itable;
 
 void
 iinit()
 {
   int i = 0;
   
-  initlock(&icache.lock, "icache");
+  initlock(&itable.lock, "itable");
   for(i = 0; i < NINODE; i++) {
-    initsleeplock(&icache.inode[i].lock, "inode");
+    initsleeplock(&itable.inode[i].lock, "inode");
   }
 }
 
@@ -216,7 +216,7 @@
 
 // Copy a modified in-memory inode to disk.
 // Must be called after every change to an ip->xxx field
-// that lives on disk, since i-node cache is write-through.
+// that lives on disk.
 // Caller must hold ip->lock.
 void
 iupdate(struct inode *ip)
@@ -244,21 +244,21 @@
 {
   struct inode *ip, *empty;
 
-  acquire(&icache.lock);
+  acquire(&itable.lock);
 
-  // Is the inode already cached?
+  // Is the inode already in the table?
   empty = 0;
-  for(ip = &icache.inode[0]; ip < &icache.inode[NINODE]; ip++){
+  for(ip = &itable.inode[0]; ip < &itable.inode[NINODE]; ip++){
     if(ip->ref > 0 && ip->dev == dev && ip->inum == inum){
       ip->ref++;
-      release(&icache.lock);
+      release(&itable.lock);
       return ip;
     }
     if(empty == 0 && ip->ref == 0)    // Remember empty slot.
       empty = ip;
   }
 
-  // Recycle an inode cache entry.
+  // Recycle an inode entry.
   if(empty == 0)
     panic("iget: no inodes");
 
@@ -267,7 +267,7 @@
   ip->inum = inum;
   ip->ref = 1;
   ip->valid = 0;
-  release(&icache.lock);
+  release(&itable.lock);
 
   return ip;
 }
@@ -277,9 +277,9 @@
 struct inode*
 idup(struct inode *ip)
 {
-  acquire(&icache.lock);
+  acquire(&itable.lock);
   ip->ref++;
-  release(&icache.lock);
+  release(&itable.lock);
   return ip;
 }
 
@@ -323,7 +323,7 @@
 }
 
 // Drop a reference to an in-memory inode.
-// If that was the last reference, the inode cache entry can
+// If that was the last reference, the inode table entry can
 // be recycled.
 // If that was the last reference and the inode has no links
 // to it, free the inode (and its content) on disk.
@@ -332,7 +332,7 @@
 void
 iput(struct inode *ip)
 {
-  acquire(&icache.lock);
+  acquire(&itable.lock);
 
   if(ip->ref == 1 && ip->valid && ip->nlink == 0){
     // inode has no links and no other references: truncate and free.
@@ -341,7 +341,7 @@
     // so this acquiresleep() won't block (or deadlock).
     acquiresleep(&ip->lock);
 
-    release(&icache.lock);
+    release(&itable.lock);
 
     itrunc(ip);
     ip->type = 0;
@@ -350,11 +350,11 @@
 
     releasesleep(&ip->lock);
 
-    acquire(&icache.lock);
+    acquire(&itable.lock);
   }
 
   ip->ref--;
-  release(&icache.lock);
+  release(&itable.lock);
 }
 
 // Common idiom: unlock, then put.
@@ -468,6 +468,7 @@
     m = min(n - tot, BSIZE - off%BSIZE);
     if(either_copyout(user_dst, dst, bp->data + (off % BSIZE), m) == -1) {
       brelse(bp);
+      tot = -1;
       break;
     }
     brelse(bp);
@@ -479,6 +480,9 @@
 // Caller must hold ip->lock.
 // If user_src==1, then src is a user virtual address;
 // otherwise, src is a kernel address.
+// Returns the number of bytes successfully written.
+// If the return value is less than the requested n,
+// there was an error of some kind.
 int
 writei(struct inode *ip, int user_src, uint64 src, uint off, uint n)
 {
@@ -501,16 +505,15 @@
     brelse(bp);
   }
 
-  if(n > 0){
-    if(off > ip->size)
-      ip->size = off;
-    // write the i-node back to disk even if the size didn't change
-    // because the loop above might have called bmap() and added a new
-    // block to ip->addrs[].
-    iupdate(ip);
-  }
+  if(off > ip->size)
+    ip->size = off;
 
-  return n;
+  // write the i-node back to disk even if the size didn't change
+  // because the loop above might have called bmap() and added a new
+  // block to ip->addrs[].
+  iupdate(ip);
+
+  return tot;
 }
 
 // Directories
Binary files ./kernel/fs.o and ../xv6-labs-2021/kernel/fs.o differ
Binary files ./kernel/kalloc.o and ../xv6-labs-2021/kernel/kalloc.o differ
Binary files ./kernel/kernel and ../xv6-labs-2021/kernel/kernel differ
diff -urN ./kernel/kernel.asm ../xv6-labs-2021/kernel/kernel.asm
--- ./kernel/kernel.asm	2021-12-05 17:54:41.000000000 +0800
+++ ../xv6-labs-2021/kernel/kernel.asm	2021-11-26 14:46:15.000000000 +0800
@@ -5,12725 +5,13053 @@
 Disassembly of section .text:
 
 0000000080000000 <_entry>:
-    80000000:	0000a117          	auipc	sp,0xa
-    80000004:	83010113          	addi	sp,sp,-2000 # 80009830 <stack0>
+    80000000:	0001e117          	auipc	sp,0x1e
+    80000004:	14010113          	addi	sp,sp,320 # 8001e140 <stack0>
     80000008:	6505                	lui	a0,0x1
     8000000a:	f14025f3          	csrr	a1,mhartid
     8000000e:	0585                	addi	a1,a1,1
     80000010:	02b50533          	mul	a0,a0,a1
     80000014:	912a                	add	sp,sp,a0
-    80000016:	070000ef          	jal	ra,80000086 <start>
+    80000016:	02d050ef          	jal	ra,80005842 <start>
 
 000000008000001a <spin>:
     8000001a:	a001                	j	8000001a <spin>
 
-000000008000001c <timerinit>:
-// which arrive at timervec in kernelvec.S,
-// which turns them into software interrupts for
-// devintr() in trap.c.
+000000008000001c <kfree>:
+// which normally should have been returned by a
+// call to kalloc().  (The exception is when
+// initializing the allocator; see kinit above.)
 void
-timerinit()
-{
-    8000001c:	1141                	addi	sp,sp,-16
-    8000001e:	e422                	sd	s0,8(sp)
-    80000020:	0800                	addi	s0,sp,16
-// which hart (core) is this?
-static inline uint64
-r_mhartid()
+kfree(void *pa)
 {
-  uint64 x;
-  asm volatile("csrr %0, mhartid" : "=r" (x) );
-    80000022:	f14027f3          	csrr	a5,mhartid
-  // each CPU has a separate source of timer interrupts.
-  int id = r_mhartid();
+    8000001c:	1101                	addi	sp,sp,-32
+    8000001e:	ec06                	sd	ra,24(sp)
+    80000020:	e822                	sd	s0,16(sp)
+    80000022:	e426                	sd	s1,8(sp)
+    80000024:	e04a                	sd	s2,0(sp)
+    80000026:	1000                	addi	s0,sp,32
+  struct run *r;
 
-  // ask the CLINT for a timer interrupt.
-  int interval = 1000000; // cycles; about 1/10th second in qemu.
-  *(uint64*)CLINT_MTIMECMP(id) = *(uint64*)CLINT_MTIME + interval;
-    80000026:	0037969b          	slliw	a3,a5,0x3
-    8000002a:	02004737          	lui	a4,0x2004
-    8000002e:	96ba                	add	a3,a3,a4
-    80000030:	0200c737          	lui	a4,0x200c
-    80000034:	ff873603          	ld	a2,-8(a4) # 200bff8 <_entry-0x7dff4008>
-    80000038:	000f4737          	lui	a4,0xf4
-    8000003c:	24070713          	addi	a4,a4,576 # f4240 <_entry-0x7ff0bdc0>
-    80000040:	963a                	add	a2,a2,a4
-    80000042:	e290                	sd	a2,0(a3)
+  if(((uint64)pa % PGSIZE) != 0 || (char*)pa < end || (uint64)pa >= PHYSTOP)
+    80000028:	03451793          	slli	a5,a0,0x34
+    8000002c:	ebb9                	bnez	a5,80000082 <kfree+0x66>
+    8000002e:	84aa                	mv	s1,a0
+    80000030:	00026797          	auipc	a5,0x26
+    80000034:	21078793          	addi	a5,a5,528 # 80026240 <end>
+    80000038:	04f56563          	bltu	a0,a5,80000082 <kfree+0x66>
+    8000003c:	47c5                	li	a5,17
+    8000003e:	07ee                	slli	a5,a5,0x1b
+    80000040:	04f57163          	bgeu	a0,a5,80000082 <kfree+0x66>
+    panic("kfree");
 
-  // prepare information in scratch[] for timervec.
-  // scratch[0..3] : space for timervec to save registers.
-  // scratch[4] : address of CLINT MTIMECMP register.
-  // scratch[5] : desired interval (in cycles) between timer interrupts.
-  uint64 *scratch = &mscratch0[32 * id];
-    80000044:	0057979b          	slliw	a5,a5,0x5
-    80000048:	078e                	slli	a5,a5,0x3
-    8000004a:	00009617          	auipc	a2,0x9
-    8000004e:	fe660613          	addi	a2,a2,-26 # 80009030 <mscratch0>
-    80000052:	97b2                	add	a5,a5,a2
-  scratch[4] = CLINT_MTIMECMP(id);
-    80000054:	f394                	sd	a3,32(a5)
-  scratch[5] = interval;
-    80000056:	f798                	sd	a4,40(a5)
+  // Fill with junk to catch dangling refs.
+  memset(pa, 1, PGSIZE);
+    80000044:	6605                	lui	a2,0x1
+    80000046:	4585                	li	a1,1
+    80000048:	00000097          	auipc	ra,0x0
+    8000004c:	156080e7          	jalr	342(ra) # 8000019e <memset>
+
+  r = (struct run*)pa;
+
+  acquire(&kmem.lock);
+    80000050:	00009917          	auipc	s2,0x9
+    80000054:	fe090913          	addi	s2,s2,-32 # 80009030 <kmem>
+    80000058:	854a                	mv	a0,s2
+    8000005a:	00006097          	auipc	ra,0x6
+    8000005e:	1ce080e7          	jalr	462(ra) # 80006228 <acquire>
+  r->next = kmem.freelist;
+    80000062:	01893783          	ld	a5,24(s2)
+    80000066:	e09c                	sd	a5,0(s1)
+  kmem.freelist = r;
+    80000068:	00993c23          	sd	s1,24(s2)
+  release(&kmem.lock);
+    8000006c:	854a                	mv	a0,s2
+    8000006e:	00006097          	auipc	ra,0x6
+    80000072:	26e080e7          	jalr	622(ra) # 800062dc <release>
+}
+    80000076:	60e2                	ld	ra,24(sp)
+    80000078:	6442                	ld	s0,16(sp)
+    8000007a:	64a2                	ld	s1,8(sp)
+    8000007c:	6902                	ld	s2,0(sp)
+    8000007e:	6105                	addi	sp,sp,32
+    80000080:	8082                	ret
+    panic("kfree");
+    80000082:	00008517          	auipc	a0,0x8
+    80000086:	f8e50513          	addi	a0,a0,-114 # 80008010 <etext+0x10>
+    8000008a:	00006097          	auipc	ra,0x6
+    8000008e:	c66080e7          	jalr	-922(ra) # 80005cf0 <panic>
+
+0000000080000092 <freerange>:
+{
+    80000092:	7179                	addi	sp,sp,-48
+    80000094:	f406                	sd	ra,40(sp)
+    80000096:	f022                	sd	s0,32(sp)
+    80000098:	ec26                	sd	s1,24(sp)
+    8000009a:	e84a                	sd	s2,16(sp)
+    8000009c:	e44e                	sd	s3,8(sp)
+    8000009e:	e052                	sd	s4,0(sp)
+    800000a0:	1800                	addi	s0,sp,48
+  p = (char*)PGROUNDUP((uint64)pa_start);
+    800000a2:	6785                	lui	a5,0x1
+    800000a4:	fff78713          	addi	a4,a5,-1 # fff <_entry-0x7ffff001>
+    800000a8:	00e504b3          	add	s1,a0,a4
+    800000ac:	777d                	lui	a4,0xfffff
+    800000ae:	8cf9                	and	s1,s1,a4
+  for(; p + PGSIZE <= (char*)pa_end; p += PGSIZE)
+    800000b0:	94be                	add	s1,s1,a5
+    800000b2:	0095ee63          	bltu	a1,s1,800000ce <freerange+0x3c>
+    800000b6:	892e                	mv	s2,a1
+    kfree(p);
+    800000b8:	7a7d                	lui	s4,0xfffff
+  for(; p + PGSIZE <= (char*)pa_end; p += PGSIZE)
+    800000ba:	6985                	lui	s3,0x1
+    kfree(p);
+    800000bc:	01448533          	add	a0,s1,s4
+    800000c0:	00000097          	auipc	ra,0x0
+    800000c4:	f5c080e7          	jalr	-164(ra) # 8000001c <kfree>
+  for(; p + PGSIZE <= (char*)pa_end; p += PGSIZE)
+    800000c8:	94ce                	add	s1,s1,s3
+    800000ca:	fe9979e3          	bgeu	s2,s1,800000bc <freerange+0x2a>
 }
+    800000ce:	70a2                	ld	ra,40(sp)
+    800000d0:	7402                	ld	s0,32(sp)
+    800000d2:	64e2                	ld	s1,24(sp)
+    800000d4:	6942                	ld	s2,16(sp)
+    800000d6:	69a2                	ld	s3,8(sp)
+    800000d8:	6a02                	ld	s4,0(sp)
+    800000da:	6145                	addi	sp,sp,48
+    800000dc:	8082                	ret
+
+00000000800000de <kinit>:
+{
+    800000de:	1141                	addi	sp,sp,-16
+    800000e0:	e406                	sd	ra,8(sp)
+    800000e2:	e022                	sd	s0,0(sp)
+    800000e4:	0800                	addi	s0,sp,16
+  initlock(&kmem.lock, "kmem");
+    800000e6:	00008597          	auipc	a1,0x8
+    800000ea:	f3258593          	addi	a1,a1,-206 # 80008018 <etext+0x18>
+    800000ee:	00009517          	auipc	a0,0x9
+    800000f2:	f4250513          	addi	a0,a0,-190 # 80009030 <kmem>
+    800000f6:	00006097          	auipc	ra,0x6
+    800000fa:	0a2080e7          	jalr	162(ra) # 80006198 <initlock>
+  freerange(end, (void*)PHYSTOP);
+    800000fe:	45c5                	li	a1,17
+    80000100:	05ee                	slli	a1,a1,0x1b
+    80000102:	00026517          	auipc	a0,0x26
+    80000106:	13e50513          	addi	a0,a0,318 # 80026240 <end>
+    8000010a:	00000097          	auipc	ra,0x0
+    8000010e:	f88080e7          	jalr	-120(ra) # 80000092 <freerange>
+}
+    80000112:	60a2                	ld	ra,8(sp)
+    80000114:	6402                	ld	s0,0(sp)
+    80000116:	0141                	addi	sp,sp,16
+    80000118:	8082                	ret
 
-static inline void 
-w_mscratch(uint64 x)
+000000008000011a <kalloc>:
+// Allocate one 4096-byte page of physical memory.
+// Returns a pointer that the kernel can use.
+// Returns 0 if the memory cannot be allocated.
+void *
+kalloc(void)
 {
-  asm volatile("csrw mscratch, %0" : : "r" (x));
-    80000058:	34079073          	csrw	mscratch,a5
-  asm volatile("csrw mtvec, %0" : : "r" (x));
-    8000005c:	00006797          	auipc	a5,0x6
-    80000060:	b2478793          	addi	a5,a5,-1244 # 80005b80 <timervec>
-    80000064:	30579073          	csrw	mtvec,a5
-  asm volatile("csrr %0, mstatus" : "=r" (x) );
-    80000068:	300027f3          	csrr	a5,mstatus
-
-  // set the machine-mode trap handler.
-  w_mtvec((uint64)timervec);
+    8000011a:	1101                	addi	sp,sp,-32
+    8000011c:	ec06                	sd	ra,24(sp)
+    8000011e:	e822                	sd	s0,16(sp)
+    80000120:	e426                	sd	s1,8(sp)
+    80000122:	1000                	addi	s0,sp,32
+  struct run *r;
 
-  // enable machine-mode interrupts.
-  w_mstatus(r_mstatus() | MSTATUS_MIE);
-    8000006c:	0087e793          	ori	a5,a5,8
-  asm volatile("csrw mstatus, %0" : : "r" (x));
-    80000070:	30079073          	csrw	mstatus,a5
-  asm volatile("csrr %0, mie" : "=r" (x) );
-    80000074:	304027f3          	csrr	a5,mie
+  acquire(&kmem.lock);
+    80000124:	00009497          	auipc	s1,0x9
+    80000128:	f0c48493          	addi	s1,s1,-244 # 80009030 <kmem>
+    8000012c:	8526                	mv	a0,s1
+    8000012e:	00006097          	auipc	ra,0x6
+    80000132:	0fa080e7          	jalr	250(ra) # 80006228 <acquire>
+  r = kmem.freelist;
+    80000136:	6c84                	ld	s1,24(s1)
+  if(r)
+    80000138:	c885                	beqz	s1,80000168 <kalloc+0x4e>
+    kmem.freelist = r->next;
+    8000013a:	609c                	ld	a5,0(s1)
+    8000013c:	00009517          	auipc	a0,0x9
+    80000140:	ef450513          	addi	a0,a0,-268 # 80009030 <kmem>
+    80000144:	ed1c                	sd	a5,24(a0)
+  release(&kmem.lock);
+    80000146:	00006097          	auipc	ra,0x6
+    8000014a:	196080e7          	jalr	406(ra) # 800062dc <release>
 
-  // enable machine-mode timer interrupts.
-  w_mie(r_mie() | MIE_MTIE);
-    80000078:	0807e793          	ori	a5,a5,128
-  asm volatile("csrw mie, %0" : : "r" (x));
-    8000007c:	30479073          	csrw	mie,a5
-}
-    80000080:	6422                	ld	s0,8(sp)
-    80000082:	0141                	addi	sp,sp,16
-    80000084:	8082                	ret
-
-0000000080000086 <start>:
-{
-    80000086:	1141                	addi	sp,sp,-16
-    80000088:	e406                	sd	ra,8(sp)
-    8000008a:	e022                	sd	s0,0(sp)
-    8000008c:	0800                	addi	s0,sp,16
-  asm volatile("csrr %0, mstatus" : "=r" (x) );
-    8000008e:	300027f3          	csrr	a5,mstatus
-  x &= ~MSTATUS_MPP_MASK;
-    80000092:	7779                	lui	a4,0xffffe
-    80000094:	7ff70713          	addi	a4,a4,2047 # ffffffffffffe7ff <end+0xffffffff7ffd87ff>
-    80000098:	8ff9                	and	a5,a5,a4
-  x |= MSTATUS_MPP_S;
-    8000009a:	6705                	lui	a4,0x1
-    8000009c:	80070713          	addi	a4,a4,-2048 # 800 <_entry-0x7ffff800>
-    800000a0:	8fd9                	or	a5,a5,a4
-  asm volatile("csrw mstatus, %0" : : "r" (x));
-    800000a2:	30079073          	csrw	mstatus,a5
-  asm volatile("csrw mepc, %0" : : "r" (x));
-    800000a6:	00001797          	auipc	a5,0x1
-    800000aa:	e0478793          	addi	a5,a5,-508 # 80000eaa <main>
-    800000ae:	34179073          	csrw	mepc,a5
-  asm volatile("csrw satp, %0" : : "r" (x));
-    800000b2:	4781                	li	a5,0
-    800000b4:	18079073          	csrw	satp,a5
-  asm volatile("csrw medeleg, %0" : : "r" (x));
-    800000b8:	67c1                	lui	a5,0x10
-    800000ba:	17fd                	addi	a5,a5,-1
-    800000bc:	30279073          	csrw	medeleg,a5
-  asm volatile("csrw mideleg, %0" : : "r" (x));
-    800000c0:	30379073          	csrw	mideleg,a5
-  asm volatile("csrr %0, sie" : "=r" (x) );
-    800000c4:	104027f3          	csrr	a5,sie
-  w_sie(r_sie() | SIE_SEIE | SIE_STIE | SIE_SSIE);
-    800000c8:	2227e793          	ori	a5,a5,546
-  asm volatile("csrw sie, %0" : : "r" (x));
-    800000cc:	10479073          	csrw	sie,a5
-  timerinit();
-    800000d0:	00000097          	auipc	ra,0x0
-    800000d4:	f4c080e7          	jalr	-180(ra) # 8000001c <timerinit>
-  asm volatile("csrr %0, mhartid" : "=r" (x) );
-    800000d8:	f14027f3          	csrr	a5,mhartid
-  w_tp(id);
-    800000dc:	2781                	sext.w	a5,a5
+  if(r)
+    memset((char*)r, 5, PGSIZE); // fill with junk
+    8000014e:	6605                	lui	a2,0x1
+    80000150:	4595                	li	a1,5
+    80000152:	8526                	mv	a0,s1
+    80000154:	00000097          	auipc	ra,0x0
+    80000158:	04a080e7          	jalr	74(ra) # 8000019e <memset>
+  return (void*)r;
 }
+    8000015c:	8526                	mv	a0,s1
+    8000015e:	60e2                	ld	ra,24(sp)
+    80000160:	6442                	ld	s0,16(sp)
+    80000162:	64a2                	ld	s1,8(sp)
+    80000164:	6105                	addi	sp,sp,32
+    80000166:	8082                	ret
+  release(&kmem.lock);
+    80000168:	00009517          	auipc	a0,0x9
+    8000016c:	ec850513          	addi	a0,a0,-312 # 80009030 <kmem>
+    80000170:	00006097          	auipc	ra,0x6
+    80000174:	16c080e7          	jalr	364(ra) # 800062dc <release>
+  if(r)
+    80000178:	b7d5                	j	8000015c <kalloc+0x42>
 
-static inline void 
-w_tp(uint64 x)
-{
-  asm volatile("mv tp, %0" : : "r" (x));
-    800000de:	823e                	mv	tp,a5
-  asm volatile("mret");
-    800000e0:	30200073          	mret
+000000008000017a <collect_free_memory>:
+
+uint64 collect_free_memory(void) {
+    8000017a:	1141                	addi	sp,sp,-16
+    8000017c:	e422                	sd	s0,8(sp)
+    8000017e:	0800                	addi	s0,sp,16
+    struct run *q = kmem.freelist;
+    80000180:	00009797          	auipc	a5,0x9
+    80000184:	ec87b783          	ld	a5,-312(a5) # 80009048 <kmem+0x18>
+    uint64 pages = 0;
+    while (q) {
+    80000188:	cb89                	beqz	a5,8000019a <collect_free_memory+0x20>
+    uint64 pages = 0;
+    8000018a:	4501                	li	a0,0
+        pages++;
+    8000018c:	0505                	addi	a0,a0,1
+        q = q->next;
+    8000018e:	639c                	ld	a5,0(a5)
+    while (q) {
+    80000190:	fff5                	bnez	a5,8000018c <collect_free_memory+0x12>
+    }
+    return pages * 4096; 
 }
-    800000e4:	60a2                	ld	ra,8(sp)
-    800000e6:	6402                	ld	s0,0(sp)
-    800000e8:	0141                	addi	sp,sp,16
-    800000ea:	8082                	ret
+    80000192:	0532                	slli	a0,a0,0xc
+    80000194:	6422                	ld	s0,8(sp)
+    80000196:	0141                	addi	sp,sp,16
+    80000198:	8082                	ret
+    uint64 pages = 0;
+    8000019a:	4501                	li	a0,0
+    8000019c:	bfdd                	j	80000192 <collect_free_memory+0x18>
 
-00000000800000ec <consolewrite>:
-//
-// user write()s to the console go here.
-//
-int
-consolewrite(int user_src, uint64 src, int n)
+000000008000019e <memset>:
+#include "types.h"
+
+void*
+memset(void *dst, int c, uint n)
 {
-    800000ec:	715d                	addi	sp,sp,-80
-    800000ee:	e486                	sd	ra,72(sp)
-    800000f0:	e0a2                	sd	s0,64(sp)
-    800000f2:	fc26                	sd	s1,56(sp)
-    800000f4:	f84a                	sd	s2,48(sp)
-    800000f6:	f44e                	sd	s3,40(sp)
-    800000f8:	f052                	sd	s4,32(sp)
-    800000fa:	ec56                	sd	s5,24(sp)
-    800000fc:	0880                	addi	s0,sp,80
-    800000fe:	8a2a                	mv	s4,a0
-    80000100:	84ae                	mv	s1,a1
-    80000102:	89b2                	mv	s3,a2
+    8000019e:	1141                	addi	sp,sp,-16
+    800001a0:	e422                	sd	s0,8(sp)
+    800001a2:	0800                	addi	s0,sp,16
+  char *cdst = (char *) dst;
   int i;
-
-  acquire(&cons.lock);
-    80000104:	00011517          	auipc	a0,0x11
-    80000108:	72c50513          	addi	a0,a0,1836 # 80011830 <cons>
-    8000010c:	00001097          	auipc	ra,0x1
-    80000110:	af4080e7          	jalr	-1292(ra) # 80000c00 <acquire>
   for(i = 0; i < n; i++){
-    80000114:	05305c63          	blez	s3,8000016c <consolewrite+0x80>
-    80000118:	4901                	li	s2,0
-    char c;
-    if(either_copyin(&c, user_src, src+i, 1) == -1)
-    8000011a:	5afd                	li	s5,-1
-    8000011c:	4685                	li	a3,1
-    8000011e:	8626                	mv	a2,s1
-    80000120:	85d2                	mv	a1,s4
-    80000122:	fbf40513          	addi	a0,s0,-65
-    80000126:	00002097          	auipc	ra,0x2
-    8000012a:	36a080e7          	jalr	874(ra) # 80002490 <either_copyin>
-    8000012e:	01550d63          	beq	a0,s5,80000148 <consolewrite+0x5c>
-      break;
-    uartputc(c);
-    80000132:	fbf44503          	lbu	a0,-65(s0)
-    80000136:	00000097          	auipc	ra,0x0
-    8000013a:	79a080e7          	jalr	1946(ra) # 800008d0 <uartputc>
+    800001a4:	ca19                	beqz	a2,800001ba <memset+0x1c>
+    800001a6:	87aa                	mv	a5,a0
+    800001a8:	1602                	slli	a2,a2,0x20
+    800001aa:	9201                	srli	a2,a2,0x20
+    800001ac:	00a60733          	add	a4,a2,a0
+    cdst[i] = c;
+    800001b0:	00b78023          	sb	a1,0(a5)
   for(i = 0; i < n; i++){
-    8000013e:	2905                	addiw	s2,s2,1
-    80000140:	0485                	addi	s1,s1,1
-    80000142:	fd299de3          	bne	s3,s2,8000011c <consolewrite+0x30>
-    80000146:	894e                	mv	s2,s3
+    800001b4:	0785                	addi	a5,a5,1
+    800001b6:	fee79de3          	bne	a5,a4,800001b0 <memset+0x12>
   }
-  release(&cons.lock);
-    80000148:	00011517          	auipc	a0,0x11
-    8000014c:	6e850513          	addi	a0,a0,1768 # 80011830 <cons>
-    80000150:	00001097          	auipc	ra,0x1
-    80000154:	b64080e7          	jalr	-1180(ra) # 80000cb4 <release>
-
-  return i;
+  return dst;
 }
-    80000158:	854a                	mv	a0,s2
-    8000015a:	60a6                	ld	ra,72(sp)
-    8000015c:	6406                	ld	s0,64(sp)
-    8000015e:	74e2                	ld	s1,56(sp)
-    80000160:	7942                	ld	s2,48(sp)
-    80000162:	79a2                	ld	s3,40(sp)
-    80000164:	7a02                	ld	s4,32(sp)
-    80000166:	6ae2                	ld	s5,24(sp)
-    80000168:	6161                	addi	sp,sp,80
-    8000016a:	8082                	ret
-  for(i = 0; i < n; i++){
-    8000016c:	4901                	li	s2,0
-    8000016e:	bfe9                	j	80000148 <consolewrite+0x5c>
+    800001ba:	6422                	ld	s0,8(sp)
+    800001bc:	0141                	addi	sp,sp,16
+    800001be:	8082                	ret
+
+00000000800001c0 <memcmp>:
 
-0000000080000170 <consoleread>:
-// user_dist indicates whether dst is a user
-// or kernel address.
-//
 int
-consoleread(int user_dst, uint64 dst, int n)
+memcmp(const void *v1, const void *v2, uint n)
 {
-    80000170:	7159                	addi	sp,sp,-112
-    80000172:	f486                	sd	ra,104(sp)
-    80000174:	f0a2                	sd	s0,96(sp)
-    80000176:	eca6                	sd	s1,88(sp)
-    80000178:	e8ca                	sd	s2,80(sp)
-    8000017a:	e4ce                	sd	s3,72(sp)
-    8000017c:	e0d2                	sd	s4,64(sp)
-    8000017e:	fc56                	sd	s5,56(sp)
-    80000180:	f85a                	sd	s6,48(sp)
-    80000182:	f45e                	sd	s7,40(sp)
-    80000184:	f062                	sd	s8,32(sp)
-    80000186:	ec66                	sd	s9,24(sp)
-    80000188:	e86a                	sd	s10,16(sp)
-    8000018a:	1880                	addi	s0,sp,112
-    8000018c:	8aaa                	mv	s5,a0
-    8000018e:	8a2e                	mv	s4,a1
-    80000190:	89b2                	mv	s3,a2
-  uint target;
-  int c;
-  char cbuf;
-
-  target = n;
-    80000192:	00060b1b          	sext.w	s6,a2
-  acquire(&cons.lock);
-    80000196:	00011517          	auipc	a0,0x11
-    8000019a:	69a50513          	addi	a0,a0,1690 # 80011830 <cons>
-    8000019e:	00001097          	auipc	ra,0x1
-    800001a2:	a62080e7          	jalr	-1438(ra) # 80000c00 <acquire>
-  while(n > 0){
-    // wait until interrupt handler has put some
-    // input into cons.buffer.
-    while(cons.r == cons.w){
-    800001a6:	00011497          	auipc	s1,0x11
-    800001aa:	68a48493          	addi	s1,s1,1674 # 80011830 <cons>
-      if(myproc()->killed){
-        release(&cons.lock);
-        return -1;
-      }
-      sleep(&cons.r, &cons.lock);
-    800001ae:	00011917          	auipc	s2,0x11
-    800001b2:	71a90913          	addi	s2,s2,1818 # 800118c8 <cons+0x98>
-    }
-
-    c = cons.buf[cons.r++ % INPUT_BUF];
-
-    if(c == C('D')){  // end-of-file
-    800001b6:	4b91                	li	s7,4
-      break;
-    }
-
-    // copy the input byte to the user-space buffer.
-    cbuf = c;
-    if(either_copyout(user_dst, dst, &cbuf, 1) == -1)
-    800001b8:	5c7d                	li	s8,-1
-      break;
-
-    dst++;
-    --n;
+    800001c0:	1141                	addi	sp,sp,-16
+    800001c2:	e422                	sd	s0,8(sp)
+    800001c4:	0800                	addi	s0,sp,16
+  const uchar *s1, *s2;
 
-    if(c == '\n'){
-    800001ba:	4ca9                	li	s9,10
-  while(n > 0){
-    800001bc:	07305863          	blez	s3,8000022c <consoleread+0xbc>
-    while(cons.r == cons.w){
-    800001c0:	0984a783          	lw	a5,152(s1)
-    800001c4:	09c4a703          	lw	a4,156(s1)
-    800001c8:	02f71463          	bne	a4,a5,800001f0 <consoleread+0x80>
-      if(myproc()->killed){
-    800001cc:	00002097          	auipc	ra,0x2
-    800001d0:	800080e7          	jalr	-2048(ra) # 800019cc <myproc>
-    800001d4:	591c                	lw	a5,48(a0)
-    800001d6:	e7b5                	bnez	a5,80000242 <consoleread+0xd2>
-      sleep(&cons.r, &cons.lock);
-    800001d8:	85a6                	mv	a1,s1
-    800001da:	854a                	mv	a0,s2
-    800001dc:	00002097          	auipc	ra,0x2
-    800001e0:	004080e7          	jalr	4(ra) # 800021e0 <sleep>
-    while(cons.r == cons.w){
-    800001e4:	0984a783          	lw	a5,152(s1)
-    800001e8:	09c4a703          	lw	a4,156(s1)
-    800001ec:	fef700e3          	beq	a4,a5,800001cc <consoleread+0x5c>
-    c = cons.buf[cons.r++ % INPUT_BUF];
-    800001f0:	0017871b          	addiw	a4,a5,1
-    800001f4:	08e4ac23          	sw	a4,152(s1)
-    800001f8:	07f7f713          	andi	a4,a5,127
-    800001fc:	9726                	add	a4,a4,s1
-    800001fe:	01874703          	lbu	a4,24(a4)
-    80000202:	00070d1b          	sext.w	s10,a4
-    if(c == C('D')){  // end-of-file
-    80000206:	077d0563          	beq	s10,s7,80000270 <consoleread+0x100>
-    cbuf = c;
-    8000020a:	f8e40fa3          	sb	a4,-97(s0)
-    if(either_copyout(user_dst, dst, &cbuf, 1) == -1)
-    8000020e:	4685                	li	a3,1
-    80000210:	f9f40613          	addi	a2,s0,-97
-    80000214:	85d2                	mv	a1,s4
-    80000216:	8556                	mv	a0,s5
-    80000218:	00002097          	auipc	ra,0x2
-    8000021c:	222080e7          	jalr	546(ra) # 8000243a <either_copyout>
-    80000220:	01850663          	beq	a0,s8,8000022c <consoleread+0xbc>
-    dst++;
-    80000224:	0a05                	addi	s4,s4,1
-    --n;
-    80000226:	39fd                	addiw	s3,s3,-1
-    if(c == '\n'){
-    80000228:	f99d1ae3          	bne	s10,s9,800001bc <consoleread+0x4c>
-      // a whole line has arrived, return to
-      // the user-level read().
-      break;
-    }
+  s1 = v1;
+  s2 = v2;
+  while(n-- > 0){
+    800001c6:	ca05                	beqz	a2,800001f6 <memcmp+0x36>
+    800001c8:	fff6069b          	addiw	a3,a2,-1
+    800001cc:	1682                	slli	a3,a3,0x20
+    800001ce:	9281                	srli	a3,a3,0x20
+    800001d0:	0685                	addi	a3,a3,1
+    800001d2:	96aa                	add	a3,a3,a0
+    if(*s1 != *s2)
+    800001d4:	00054783          	lbu	a5,0(a0)
+    800001d8:	0005c703          	lbu	a4,0(a1)
+    800001dc:	00e79863          	bne	a5,a4,800001ec <memcmp+0x2c>
+      return *s1 - *s2;
+    s1++, s2++;
+    800001e0:	0505                	addi	a0,a0,1
+    800001e2:	0585                	addi	a1,a1,1
+  while(n-- > 0){
+    800001e4:	fed518e3          	bne	a0,a3,800001d4 <memcmp+0x14>
   }
-  release(&cons.lock);
-    8000022c:	00011517          	auipc	a0,0x11
-    80000230:	60450513          	addi	a0,a0,1540 # 80011830 <cons>
-    80000234:	00001097          	auipc	ra,0x1
-    80000238:	a80080e7          	jalr	-1408(ra) # 80000cb4 <release>
 
-  return target - n;
-    8000023c:	413b053b          	subw	a0,s6,s3
-    80000240:	a811                	j	80000254 <consoleread+0xe4>
-        release(&cons.lock);
-    80000242:	00011517          	auipc	a0,0x11
-    80000246:	5ee50513          	addi	a0,a0,1518 # 80011830 <cons>
-    8000024a:	00001097          	auipc	ra,0x1
-    8000024e:	a6a080e7          	jalr	-1430(ra) # 80000cb4 <release>
-        return -1;
-    80000252:	557d                	li	a0,-1
-}
-    80000254:	70a6                	ld	ra,104(sp)
-    80000256:	7406                	ld	s0,96(sp)
-    80000258:	64e6                	ld	s1,88(sp)
-    8000025a:	6946                	ld	s2,80(sp)
-    8000025c:	69a6                	ld	s3,72(sp)
-    8000025e:	6a06                	ld	s4,64(sp)
-    80000260:	7ae2                	ld	s5,56(sp)
-    80000262:	7b42                	ld	s6,48(sp)
-    80000264:	7ba2                	ld	s7,40(sp)
-    80000266:	7c02                	ld	s8,32(sp)
-    80000268:	6ce2                	ld	s9,24(sp)
-    8000026a:	6d42                	ld	s10,16(sp)
-    8000026c:	6165                	addi	sp,sp,112
-    8000026e:	8082                	ret
-      if(n < target){
-    80000270:	0009871b          	sext.w	a4,s3
-    80000274:	fb677ce3          	bgeu	a4,s6,8000022c <consoleread+0xbc>
-        cons.r--;
-    80000278:	00011717          	auipc	a4,0x11
-    8000027c:	64f72823          	sw	a5,1616(a4) # 800118c8 <cons+0x98>
-    80000280:	b775                	j	8000022c <consoleread+0xbc>
-
-0000000080000282 <consputc>:
-{
-    80000282:	1141                	addi	sp,sp,-16
-    80000284:	e406                	sd	ra,8(sp)
-    80000286:	e022                	sd	s0,0(sp)
-    80000288:	0800                	addi	s0,sp,16
-  if(c == BACKSPACE){
-    8000028a:	10000793          	li	a5,256
-    8000028e:	00f50a63          	beq	a0,a5,800002a2 <consputc+0x20>
-    uartputc_sync(c);
-    80000292:	00000097          	auipc	ra,0x0
-    80000296:	560080e7          	jalr	1376(ra) # 800007f2 <uartputc_sync>
+  return 0;
+    800001e8:	4501                	li	a0,0
+    800001ea:	a019                	j	800001f0 <memcmp+0x30>
+      return *s1 - *s2;
+    800001ec:	40e7853b          	subw	a0,a5,a4
 }
-    8000029a:	60a2                	ld	ra,8(sp)
-    8000029c:	6402                	ld	s0,0(sp)
-    8000029e:	0141                	addi	sp,sp,16
-    800002a0:	8082                	ret
-    uartputc_sync('\b'); uartputc_sync(' '); uartputc_sync('\b');
-    800002a2:	4521                	li	a0,8
-    800002a4:	00000097          	auipc	ra,0x0
-    800002a8:	54e080e7          	jalr	1358(ra) # 800007f2 <uartputc_sync>
-    800002ac:	02000513          	li	a0,32
-    800002b0:	00000097          	auipc	ra,0x0
-    800002b4:	542080e7          	jalr	1346(ra) # 800007f2 <uartputc_sync>
-    800002b8:	4521                	li	a0,8
-    800002ba:	00000097          	auipc	ra,0x0
-    800002be:	538080e7          	jalr	1336(ra) # 800007f2 <uartputc_sync>
-    800002c2:	bfe1                	j	8000029a <consputc+0x18>
+    800001f0:	6422                	ld	s0,8(sp)
+    800001f2:	0141                	addi	sp,sp,16
+    800001f4:	8082                	ret
+  return 0;
+    800001f6:	4501                	li	a0,0
+    800001f8:	bfe5                	j	800001f0 <memcmp+0x30>
 
-00000000800002c4 <consoleintr>:
-// do erase/kill processing, append to cons.buf,
-// wake up consoleread() if a whole line has arrived.
-//
-void
-consoleintr(int c)
+00000000800001fa <memmove>:
+
+void*
+memmove(void *dst, const void *src, uint n)
 {
-    800002c4:	1101                	addi	sp,sp,-32
-    800002c6:	ec06                	sd	ra,24(sp)
-    800002c8:	e822                	sd	s0,16(sp)
-    800002ca:	e426                	sd	s1,8(sp)
-    800002cc:	e04a                	sd	s2,0(sp)
-    800002ce:	1000                	addi	s0,sp,32
-    800002d0:	84aa                	mv	s1,a0
-  acquire(&cons.lock);
-    800002d2:	00011517          	auipc	a0,0x11
-    800002d6:	55e50513          	addi	a0,a0,1374 # 80011830 <cons>
-    800002da:	00001097          	auipc	ra,0x1
-    800002de:	926080e7          	jalr	-1754(ra) # 80000c00 <acquire>
+    800001fa:	1141                	addi	sp,sp,-16
+    800001fc:	e422                	sd	s0,8(sp)
+    800001fe:	0800                	addi	s0,sp,16
+  const char *s;
+  char *d;
 
-  switch(c){
-    800002e2:	47d5                	li	a5,21
-    800002e4:	0af48663          	beq	s1,a5,80000390 <consoleintr+0xcc>
-    800002e8:	0297ca63          	blt	a5,s1,8000031c <consoleintr+0x58>
-    800002ec:	47a1                	li	a5,8
-    800002ee:	0ef48763          	beq	s1,a5,800003dc <consoleintr+0x118>
-    800002f2:	47c1                	li	a5,16
-    800002f4:	10f49a63          	bne	s1,a5,80000408 <consoleintr+0x144>
-  case C('P'):  // Print process list.
-    procdump();
-    800002f8:	00002097          	auipc	ra,0x2
-    800002fc:	1ee080e7          	jalr	494(ra) # 800024e6 <procdump>
-      }
-    }
-    break;
-  }
+  if(n == 0)
+    80000200:	c205                	beqz	a2,80000220 <memmove+0x26>
+    return dst;
   
-  release(&cons.lock);
-    80000300:	00011517          	auipc	a0,0x11
-    80000304:	53050513          	addi	a0,a0,1328 # 80011830 <cons>
-    80000308:	00001097          	auipc	ra,0x1
-    8000030c:	9ac080e7          	jalr	-1620(ra) # 80000cb4 <release>
-}
-    80000310:	60e2                	ld	ra,24(sp)
-    80000312:	6442                	ld	s0,16(sp)
-    80000314:	64a2                	ld	s1,8(sp)
-    80000316:	6902                	ld	s2,0(sp)
-    80000318:	6105                	addi	sp,sp,32
-    8000031a:	8082                	ret
-  switch(c){
-    8000031c:	07f00793          	li	a5,127
-    80000320:	0af48e63          	beq	s1,a5,800003dc <consoleintr+0x118>
-    if(c != 0 && cons.e-cons.r < INPUT_BUF){
-    80000324:	00011717          	auipc	a4,0x11
-    80000328:	50c70713          	addi	a4,a4,1292 # 80011830 <cons>
-    8000032c:	0a072783          	lw	a5,160(a4)
-    80000330:	09872703          	lw	a4,152(a4)
-    80000334:	9f99                	subw	a5,a5,a4
-    80000336:	07f00713          	li	a4,127
-    8000033a:	fcf763e3          	bltu	a4,a5,80000300 <consoleintr+0x3c>
-      c = (c == '\r') ? '\n' : c;
-    8000033e:	47b5                	li	a5,13
-    80000340:	0cf48763          	beq	s1,a5,8000040e <consoleintr+0x14a>
-      consputc(c);
-    80000344:	8526                	mv	a0,s1
-    80000346:	00000097          	auipc	ra,0x0
-    8000034a:	f3c080e7          	jalr	-196(ra) # 80000282 <consputc>
-      cons.buf[cons.e++ % INPUT_BUF] = c;
-    8000034e:	00011797          	auipc	a5,0x11
-    80000352:	4e278793          	addi	a5,a5,1250 # 80011830 <cons>
-    80000356:	0a07a703          	lw	a4,160(a5)
-    8000035a:	0017069b          	addiw	a3,a4,1
-    8000035e:	0006861b          	sext.w	a2,a3
-    80000362:	0ad7a023          	sw	a3,160(a5)
-    80000366:	07f77713          	andi	a4,a4,127
-    8000036a:	97ba                	add	a5,a5,a4
-    8000036c:	00978c23          	sb	s1,24(a5)
-      if(c == '\n' || c == C('D') || cons.e == cons.r+INPUT_BUF){
-    80000370:	47a9                	li	a5,10
-    80000372:	0cf48563          	beq	s1,a5,8000043c <consoleintr+0x178>
-    80000376:	4791                	li	a5,4
-    80000378:	0cf48263          	beq	s1,a5,8000043c <consoleintr+0x178>
-    8000037c:	00011797          	auipc	a5,0x11
-    80000380:	54c7a783          	lw	a5,1356(a5) # 800118c8 <cons+0x98>
-    80000384:	0807879b          	addiw	a5,a5,128
-    80000388:	f6f61ce3          	bne	a2,a5,80000300 <consoleintr+0x3c>
-      cons.buf[cons.e++ % INPUT_BUF] = c;
-    8000038c:	863e                	mv	a2,a5
-    8000038e:	a07d                	j	8000043c <consoleintr+0x178>
-    while(cons.e != cons.w &&
-    80000390:	00011717          	auipc	a4,0x11
-    80000394:	4a070713          	addi	a4,a4,1184 # 80011830 <cons>
-    80000398:	0a072783          	lw	a5,160(a4)
-    8000039c:	09c72703          	lw	a4,156(a4)
-          cons.buf[(cons.e-1) % INPUT_BUF] != '\n'){
-    800003a0:	00011497          	auipc	s1,0x11
-    800003a4:	49048493          	addi	s1,s1,1168 # 80011830 <cons>
-    while(cons.e != cons.w &&
-    800003a8:	4929                	li	s2,10
-    800003aa:	f4f70be3          	beq	a4,a5,80000300 <consoleintr+0x3c>
-          cons.buf[(cons.e-1) % INPUT_BUF] != '\n'){
-    800003ae:	37fd                	addiw	a5,a5,-1
-    800003b0:	07f7f713          	andi	a4,a5,127
-    800003b4:	9726                	add	a4,a4,s1
-    while(cons.e != cons.w &&
-    800003b6:	01874703          	lbu	a4,24(a4)
-    800003ba:	f52703e3          	beq	a4,s2,80000300 <consoleintr+0x3c>
-      cons.e--;
-    800003be:	0af4a023          	sw	a5,160(s1)
-      consputc(BACKSPACE);
-    800003c2:	10000513          	li	a0,256
-    800003c6:	00000097          	auipc	ra,0x0
-    800003ca:	ebc080e7          	jalr	-324(ra) # 80000282 <consputc>
-    while(cons.e != cons.w &&
-    800003ce:	0a04a783          	lw	a5,160(s1)
-    800003d2:	09c4a703          	lw	a4,156(s1)
-    800003d6:	fcf71ce3          	bne	a4,a5,800003ae <consoleintr+0xea>
-    800003da:	b71d                	j	80000300 <consoleintr+0x3c>
-    if(cons.e != cons.w){
-    800003dc:	00011717          	auipc	a4,0x11
-    800003e0:	45470713          	addi	a4,a4,1108 # 80011830 <cons>
-    800003e4:	0a072783          	lw	a5,160(a4)
-    800003e8:	09c72703          	lw	a4,156(a4)
-    800003ec:	f0f70ae3          	beq	a4,a5,80000300 <consoleintr+0x3c>
-      cons.e--;
-    800003f0:	37fd                	addiw	a5,a5,-1
-    800003f2:	00011717          	auipc	a4,0x11
-    800003f6:	4cf72f23          	sw	a5,1246(a4) # 800118d0 <cons+0xa0>
-      consputc(BACKSPACE);
-    800003fa:	10000513          	li	a0,256
-    800003fe:	00000097          	auipc	ra,0x0
-    80000402:	e84080e7          	jalr	-380(ra) # 80000282 <consputc>
-    80000406:	bded                	j	80000300 <consoleintr+0x3c>
-    if(c != 0 && cons.e-cons.r < INPUT_BUF){
-    80000408:	ee048ce3          	beqz	s1,80000300 <consoleintr+0x3c>
-    8000040c:	bf21                	j	80000324 <consoleintr+0x60>
-      consputc(c);
-    8000040e:	4529                	li	a0,10
-    80000410:	00000097          	auipc	ra,0x0
-    80000414:	e72080e7          	jalr	-398(ra) # 80000282 <consputc>
-      cons.buf[cons.e++ % INPUT_BUF] = c;
-    80000418:	00011797          	auipc	a5,0x11
-    8000041c:	41878793          	addi	a5,a5,1048 # 80011830 <cons>
-    80000420:	0a07a703          	lw	a4,160(a5)
-    80000424:	0017069b          	addiw	a3,a4,1
-    80000428:	0006861b          	sext.w	a2,a3
-    8000042c:	0ad7a023          	sw	a3,160(a5)
-    80000430:	07f77713          	andi	a4,a4,127
-    80000434:	97ba                	add	a5,a5,a4
-    80000436:	4729                	li	a4,10
-    80000438:	00e78c23          	sb	a4,24(a5)
-        cons.w = cons.e;
-    8000043c:	00011797          	auipc	a5,0x11
-    80000440:	48c7a823          	sw	a2,1168(a5) # 800118cc <cons+0x9c>
-        wakeup(&cons.r);
-    80000444:	00011517          	auipc	a0,0x11
-    80000448:	48450513          	addi	a0,a0,1156 # 800118c8 <cons+0x98>
-    8000044c:	00002097          	auipc	ra,0x2
-    80000450:	f14080e7          	jalr	-236(ra) # 80002360 <wakeup>
-    80000454:	b575                	j	80000300 <consoleintr+0x3c>
+  s = src;
+  d = dst;
+  if(s < d && s + n > d){
+    80000202:	02a5e263          	bltu	a1,a0,80000226 <memmove+0x2c>
+    s += n;
+    d += n;
+    while(n-- > 0)
+      *--d = *--s;
+  } else
+    while(n-- > 0)
+    80000206:	1602                	slli	a2,a2,0x20
+    80000208:	9201                	srli	a2,a2,0x20
+    8000020a:	00c587b3          	add	a5,a1,a2
+{
+    8000020e:	872a                	mv	a4,a0
+      *d++ = *s++;
+    80000210:	0585                	addi	a1,a1,1
+    80000212:	0705                	addi	a4,a4,1
+    80000214:	fff5c683          	lbu	a3,-1(a1)
+    80000218:	fed70fa3          	sb	a3,-1(a4) # ffffffffffffefff <end+0xffffffff7ffd8dbf>
+    while(n-- > 0)
+    8000021c:	fef59ae3          	bne	a1,a5,80000210 <memmove+0x16>
+
+  return dst;
+}
+    80000220:	6422                	ld	s0,8(sp)
+    80000222:	0141                	addi	sp,sp,16
+    80000224:	8082                	ret
+  if(s < d && s + n > d){
+    80000226:	02061693          	slli	a3,a2,0x20
+    8000022a:	9281                	srli	a3,a3,0x20
+    8000022c:	00d58733          	add	a4,a1,a3
+    80000230:	fce57be3          	bgeu	a0,a4,80000206 <memmove+0xc>
+    d += n;
+    80000234:	96aa                	add	a3,a3,a0
+    while(n-- > 0)
+    80000236:	fff6079b          	addiw	a5,a2,-1
+    8000023a:	1782                	slli	a5,a5,0x20
+    8000023c:	9381                	srli	a5,a5,0x20
+    8000023e:	fff7c793          	not	a5,a5
+    80000242:	97ba                	add	a5,a5,a4
+      *--d = *--s;
+    80000244:	177d                	addi	a4,a4,-1
+    80000246:	16fd                	addi	a3,a3,-1
+    80000248:	00074603          	lbu	a2,0(a4)
+    8000024c:	00c68023          	sb	a2,0(a3)
+    while(n-- > 0)
+    80000250:	fee79ae3          	bne	a5,a4,80000244 <memmove+0x4a>
+    80000254:	b7f1                	j	80000220 <memmove+0x26>
 
-0000000080000456 <consoleinit>:
+0000000080000256 <memcpy>:
 
-void
-consoleinit(void)
+// memcpy exists to placate GCC.  Use memmove.
+void*
+memcpy(void *dst, const void *src, uint n)
 {
-    80000456:	1141                	addi	sp,sp,-16
-    80000458:	e406                	sd	ra,8(sp)
-    8000045a:	e022                	sd	s0,0(sp)
-    8000045c:	0800                	addi	s0,sp,16
-  initlock(&cons.lock, "cons");
-    8000045e:	00008597          	auipc	a1,0x8
-    80000462:	bb258593          	addi	a1,a1,-1102 # 80008010 <etext+0x10>
-    80000466:	00011517          	auipc	a0,0x11
-    8000046a:	3ca50513          	addi	a0,a0,970 # 80011830 <cons>
-    8000046e:	00000097          	auipc	ra,0x0
-    80000472:	702080e7          	jalr	1794(ra) # 80000b70 <initlock>
+    80000256:	1141                	addi	sp,sp,-16
+    80000258:	e406                	sd	ra,8(sp)
+    8000025a:	e022                	sd	s0,0(sp)
+    8000025c:	0800                	addi	s0,sp,16
+  return memmove(dst, src, n);
+    8000025e:	00000097          	auipc	ra,0x0
+    80000262:	f9c080e7          	jalr	-100(ra) # 800001fa <memmove>
+}
+    80000266:	60a2                	ld	ra,8(sp)
+    80000268:	6402                	ld	s0,0(sp)
+    8000026a:	0141                	addi	sp,sp,16
+    8000026c:	8082                	ret
 
-  uartinit();
-    80000476:	00000097          	auipc	ra,0x0
-    8000047a:	32c080e7          	jalr	812(ra) # 800007a2 <uartinit>
+000000008000026e <strncmp>:
 
-  // connect read and write system calls
-  // to consoleread and consolewrite.
-  devsw[CONSOLE].read = consoleread;
-    8000047e:	00021797          	auipc	a5,0x21
-    80000482:	53278793          	addi	a5,a5,1330 # 800219b0 <devsw>
-    80000486:	00000717          	auipc	a4,0x0
-    8000048a:	cea70713          	addi	a4,a4,-790 # 80000170 <consoleread>
-    8000048e:	eb98                	sd	a4,16(a5)
-  devsw[CONSOLE].write = consolewrite;
-    80000490:	00000717          	auipc	a4,0x0
-    80000494:	c5c70713          	addi	a4,a4,-932 # 800000ec <consolewrite>
-    80000498:	ef98                	sd	a4,24(a5)
-}
-    8000049a:	60a2                	ld	ra,8(sp)
-    8000049c:	6402                	ld	s0,0(sp)
-    8000049e:	0141                	addi	sp,sp,16
-    800004a0:	8082                	ret
-
-00000000800004a2 <printint>:
-
-static char digits[] = "0123456789abcdef";
-
-static void
-printint(int xx, int base, int sign)
+int
+strncmp(const char *p, const char *q, uint n)
 {
-    800004a2:	7179                	addi	sp,sp,-48
-    800004a4:	f406                	sd	ra,40(sp)
-    800004a6:	f022                	sd	s0,32(sp)
-    800004a8:	ec26                	sd	s1,24(sp)
-    800004aa:	e84a                	sd	s2,16(sp)
-    800004ac:	1800                	addi	s0,sp,48
-  char buf[16];
-  int i;
-  uint x;
-
-  if(sign && (sign = xx < 0))
-    800004ae:	c219                	beqz	a2,800004b4 <printint+0x12>
-    800004b0:	08054763          	bltz	a0,8000053e <printint+0x9c>
-    x = -xx;
-  else
-    x = xx;
-    800004b4:	2501                	sext.w	a0,a0
-    800004b6:	4881                	li	a7,0
-    800004b8:	fd040693          	addi	a3,s0,-48
-
-  i = 0;
-    800004bc:	4701                	li	a4,0
-  do {
-    buf[i++] = digits[x % base];
-    800004be:	2581                	sext.w	a1,a1
-    800004c0:	00008617          	auipc	a2,0x8
-    800004c4:	b8060613          	addi	a2,a2,-1152 # 80008040 <digits>
-    800004c8:	883a                	mv	a6,a4
-    800004ca:	2705                	addiw	a4,a4,1
-    800004cc:	02b577bb          	remuw	a5,a0,a1
-    800004d0:	1782                	slli	a5,a5,0x20
-    800004d2:	9381                	srli	a5,a5,0x20
-    800004d4:	97b2                	add	a5,a5,a2
-    800004d6:	0007c783          	lbu	a5,0(a5)
-    800004da:	00f68023          	sb	a5,0(a3)
-  } while((x /= base) != 0);
-    800004de:	0005079b          	sext.w	a5,a0
-    800004e2:	02b5553b          	divuw	a0,a0,a1
-    800004e6:	0685                	addi	a3,a3,1
-    800004e8:	feb7f0e3          	bgeu	a5,a1,800004c8 <printint+0x26>
+    8000026e:	1141                	addi	sp,sp,-16
+    80000270:	e422                	sd	s0,8(sp)
+    80000272:	0800                	addi	s0,sp,16
+  while(n > 0 && *p && *p == *q)
+    80000274:	ce11                	beqz	a2,80000290 <strncmp+0x22>
+    80000276:	00054783          	lbu	a5,0(a0)
+    8000027a:	cf89                	beqz	a5,80000294 <strncmp+0x26>
+    8000027c:	0005c703          	lbu	a4,0(a1)
+    80000280:	00f71a63          	bne	a4,a5,80000294 <strncmp+0x26>
+    n--, p++, q++;
+    80000284:	367d                	addiw	a2,a2,-1
+    80000286:	0505                	addi	a0,a0,1
+    80000288:	0585                	addi	a1,a1,1
+  while(n > 0 && *p && *p == *q)
+    8000028a:	f675                	bnez	a2,80000276 <strncmp+0x8>
+  if(n == 0)
+    return 0;
+    8000028c:	4501                	li	a0,0
+    8000028e:	a809                	j	800002a0 <strncmp+0x32>
+    80000290:	4501                	li	a0,0
+    80000292:	a039                	j	800002a0 <strncmp+0x32>
+  if(n == 0)
+    80000294:	ca09                	beqz	a2,800002a6 <strncmp+0x38>
+  return (uchar)*p - (uchar)*q;
+    80000296:	00054503          	lbu	a0,0(a0)
+    8000029a:	0005c783          	lbu	a5,0(a1)
+    8000029e:	9d1d                	subw	a0,a0,a5
+}
+    800002a0:	6422                	ld	s0,8(sp)
+    800002a2:	0141                	addi	sp,sp,16
+    800002a4:	8082                	ret
+    return 0;
+    800002a6:	4501                	li	a0,0
+    800002a8:	bfe5                	j	800002a0 <strncmp+0x32>
 
-  if(sign)
-    800004ec:	00088c63          	beqz	a7,80000504 <printint+0x62>
-    buf[i++] = '-';
-    800004f0:	fe070793          	addi	a5,a4,-32
-    800004f4:	00878733          	add	a4,a5,s0
-    800004f8:	02d00793          	li	a5,45
-    800004fc:	fef70823          	sb	a5,-16(a4)
-    80000500:	0028071b          	addiw	a4,a6,2
+00000000800002aa <strncpy>:
 
-  while(--i >= 0)
-    80000504:	02e05763          	blez	a4,80000532 <printint+0x90>
-    80000508:	fd040793          	addi	a5,s0,-48
-    8000050c:	00e784b3          	add	s1,a5,a4
-    80000510:	fff78913          	addi	s2,a5,-1
-    80000514:	993a                	add	s2,s2,a4
-    80000516:	377d                	addiw	a4,a4,-1
-    80000518:	1702                	slli	a4,a4,0x20
-    8000051a:	9301                	srli	a4,a4,0x20
-    8000051c:	40e90933          	sub	s2,s2,a4
-    consputc(buf[i]);
-    80000520:	fff4c503          	lbu	a0,-1(s1)
-    80000524:	00000097          	auipc	ra,0x0
-    80000528:	d5e080e7          	jalr	-674(ra) # 80000282 <consputc>
-  while(--i >= 0)
-    8000052c:	14fd                	addi	s1,s1,-1
-    8000052e:	ff2499e3          	bne	s1,s2,80000520 <printint+0x7e>
-}
-    80000532:	70a2                	ld	ra,40(sp)
-    80000534:	7402                	ld	s0,32(sp)
-    80000536:	64e2                	ld	s1,24(sp)
-    80000538:	6942                	ld	s2,16(sp)
-    8000053a:	6145                	addi	sp,sp,48
-    8000053c:	8082                	ret
-    x = -xx;
-    8000053e:	40a0053b          	negw	a0,a0
-  if(sign && (sign = xx < 0))
-    80000542:	4885                	li	a7,1
-    x = -xx;
-    80000544:	bf95                	j	800004b8 <printint+0x16>
+char*
+strncpy(char *s, const char *t, int n)
+{
+    800002aa:	1141                	addi	sp,sp,-16
+    800002ac:	e422                	sd	s0,8(sp)
+    800002ae:	0800                	addi	s0,sp,16
+  char *os;
 
-0000000080000546 <panic>:
-    release(&pr.lock);
+  os = s;
+  while(n-- > 0 && (*s++ = *t++) != 0)
+    800002b0:	872a                	mv	a4,a0
+    800002b2:	8832                	mv	a6,a2
+    800002b4:	367d                	addiw	a2,a2,-1
+    800002b6:	01005963          	blez	a6,800002c8 <strncpy+0x1e>
+    800002ba:	0705                	addi	a4,a4,1
+    800002bc:	0005c783          	lbu	a5,0(a1)
+    800002c0:	fef70fa3          	sb	a5,-1(a4)
+    800002c4:	0585                	addi	a1,a1,1
+    800002c6:	f7f5                	bnez	a5,800002b2 <strncpy+0x8>
+    ;
+  while(n-- > 0)
+    800002c8:	86ba                	mv	a3,a4
+    800002ca:	00c05c63          	blez	a2,800002e2 <strncpy+0x38>
+    *s++ = 0;
+    800002ce:	0685                	addi	a3,a3,1
+    800002d0:	fe068fa3          	sb	zero,-1(a3)
+  while(n-- > 0)
+    800002d4:	40d707bb          	subw	a5,a4,a3
+    800002d8:	37fd                	addiw	a5,a5,-1
+    800002da:	010787bb          	addw	a5,a5,a6
+    800002de:	fef048e3          	bgtz	a5,800002ce <strncpy+0x24>
+  return os;
 }
+    800002e2:	6422                	ld	s0,8(sp)
+    800002e4:	0141                	addi	sp,sp,16
+    800002e6:	8082                	ret
 
-void
-panic(char *s)
-{
-    80000546:	1101                	addi	sp,sp,-32
-    80000548:	ec06                	sd	ra,24(sp)
-    8000054a:	e822                	sd	s0,16(sp)
-    8000054c:	e426                	sd	s1,8(sp)
-    8000054e:	1000                	addi	s0,sp,32
-    80000550:	84aa                	mv	s1,a0
-  pr.locking = 0;
-    80000552:	00011797          	auipc	a5,0x11
-    80000556:	3807af23          	sw	zero,926(a5) # 800118f0 <pr+0x18>
-  printf("panic: ");
-    8000055a:	00008517          	auipc	a0,0x8
-    8000055e:	abe50513          	addi	a0,a0,-1346 # 80008018 <etext+0x18>
-    80000562:	00000097          	auipc	ra,0x0
-    80000566:	02e080e7          	jalr	46(ra) # 80000590 <printf>
-  printf(s);
-    8000056a:	8526                	mv	a0,s1
-    8000056c:	00000097          	auipc	ra,0x0
-    80000570:	024080e7          	jalr	36(ra) # 80000590 <printf>
-  printf("\n");
-    80000574:	00008517          	auipc	a0,0x8
-    80000578:	b5450513          	addi	a0,a0,-1196 # 800080c8 <digits+0x88>
-    8000057c:	00000097          	auipc	ra,0x0
-    80000580:	014080e7          	jalr	20(ra) # 80000590 <printf>
-  panicked = 1; // freeze uart output from other CPUs
-    80000584:	4785                	li	a5,1
-    80000586:	00009717          	auipc	a4,0x9
-    8000058a:	a6f72d23          	sw	a5,-1414(a4) # 80009000 <panicked>
-  for(;;)
-    8000058e:	a001                	j	8000058e <panic+0x48>
+00000000800002e8 <safestrcpy>:
 
-0000000080000590 <printf>:
+// Like strncpy but guaranteed to NUL-terminate.
+char*
+safestrcpy(char *s, const char *t, int n)
 {
-    80000590:	7131                	addi	sp,sp,-192
-    80000592:	fc86                	sd	ra,120(sp)
-    80000594:	f8a2                	sd	s0,112(sp)
-    80000596:	f4a6                	sd	s1,104(sp)
-    80000598:	f0ca                	sd	s2,96(sp)
-    8000059a:	ecce                	sd	s3,88(sp)
-    8000059c:	e8d2                	sd	s4,80(sp)
-    8000059e:	e4d6                	sd	s5,72(sp)
-    800005a0:	e0da                	sd	s6,64(sp)
-    800005a2:	fc5e                	sd	s7,56(sp)
-    800005a4:	f862                	sd	s8,48(sp)
-    800005a6:	f466                	sd	s9,40(sp)
-    800005a8:	f06a                	sd	s10,32(sp)
-    800005aa:	ec6e                	sd	s11,24(sp)
-    800005ac:	0100                	addi	s0,sp,128
-    800005ae:	8a2a                	mv	s4,a0
-    800005b0:	e40c                	sd	a1,8(s0)
-    800005b2:	e810                	sd	a2,16(s0)
-    800005b4:	ec14                	sd	a3,24(s0)
-    800005b6:	f018                	sd	a4,32(s0)
-    800005b8:	f41c                	sd	a5,40(s0)
-    800005ba:	03043823          	sd	a6,48(s0)
-    800005be:	03143c23          	sd	a7,56(s0)
-  locking = pr.locking;
-    800005c2:	00011d97          	auipc	s11,0x11
-    800005c6:	32edad83          	lw	s11,814(s11) # 800118f0 <pr+0x18>
-  if(locking)
-    800005ca:	020d9b63          	bnez	s11,80000600 <printf+0x70>
-  if (fmt == 0)
-    800005ce:	040a0263          	beqz	s4,80000612 <printf+0x82>
-  va_start(ap, fmt);
-    800005d2:	00840793          	addi	a5,s0,8
-    800005d6:	f8f43423          	sd	a5,-120(s0)
-  for(i = 0; (c = fmt[i] & 0xff) != 0; i++){
-    800005da:	000a4503          	lbu	a0,0(s4)
-    800005de:	14050f63          	beqz	a0,8000073c <printf+0x1ac>
-    800005e2:	4981                	li	s3,0
-    if(c != '%'){
-    800005e4:	02500a93          	li	s5,37
-    switch(c){
-    800005e8:	07000b93          	li	s7,112
-  consputc('x');
-    800005ec:	4d41                	li	s10,16
-    consputc(digits[x >> (sizeof(uint64) * 8 - 4)]);
-    800005ee:	00008b17          	auipc	s6,0x8
-    800005f2:	a52b0b13          	addi	s6,s6,-1454 # 80008040 <digits>
-    switch(c){
-    800005f6:	07300c93          	li	s9,115
-    800005fa:	06400c13          	li	s8,100
-    800005fe:	a82d                	j	80000638 <printf+0xa8>
-    acquire(&pr.lock);
-    80000600:	00011517          	auipc	a0,0x11
-    80000604:	2d850513          	addi	a0,a0,728 # 800118d8 <pr>
-    80000608:	00000097          	auipc	ra,0x0
-    8000060c:	5f8080e7          	jalr	1528(ra) # 80000c00 <acquire>
-    80000610:	bf7d                	j	800005ce <printf+0x3e>
-    panic("null fmt");
-    80000612:	00008517          	auipc	a0,0x8
-    80000616:	a1650513          	addi	a0,a0,-1514 # 80008028 <etext+0x28>
-    8000061a:	00000097          	auipc	ra,0x0
-    8000061e:	f2c080e7          	jalr	-212(ra) # 80000546 <panic>
-      consputc(c);
-    80000622:	00000097          	auipc	ra,0x0
-    80000626:	c60080e7          	jalr	-928(ra) # 80000282 <consputc>
-  for(i = 0; (c = fmt[i] & 0xff) != 0; i++){
-    8000062a:	2985                	addiw	s3,s3,1
-    8000062c:	013a07b3          	add	a5,s4,s3
-    80000630:	0007c503          	lbu	a0,0(a5)
-    80000634:	10050463          	beqz	a0,8000073c <printf+0x1ac>
-    if(c != '%'){
-    80000638:	ff5515e3          	bne	a0,s5,80000622 <printf+0x92>
-    c = fmt[++i] & 0xff;
-    8000063c:	2985                	addiw	s3,s3,1
-    8000063e:	013a07b3          	add	a5,s4,s3
-    80000642:	0007c783          	lbu	a5,0(a5)
-    80000646:	0007849b          	sext.w	s1,a5
-    if(c == 0)
-    8000064a:	cbed                	beqz	a5,8000073c <printf+0x1ac>
-    switch(c){
-    8000064c:	05778a63          	beq	a5,s7,800006a0 <printf+0x110>
-    80000650:	02fbf663          	bgeu	s7,a5,8000067c <printf+0xec>
-    80000654:	09978863          	beq	a5,s9,800006e4 <printf+0x154>
-    80000658:	07800713          	li	a4,120
-    8000065c:	0ce79563          	bne	a5,a4,80000726 <printf+0x196>
-      printint(va_arg(ap, int), 16, 1);
-    80000660:	f8843783          	ld	a5,-120(s0)
-    80000664:	00878713          	addi	a4,a5,8
-    80000668:	f8e43423          	sd	a4,-120(s0)
-    8000066c:	4605                	li	a2,1
-    8000066e:	85ea                	mv	a1,s10
-    80000670:	4388                	lw	a0,0(a5)
-    80000672:	00000097          	auipc	ra,0x0
-    80000676:	e30080e7          	jalr	-464(ra) # 800004a2 <printint>
-      break;
-    8000067a:	bf45                	j	8000062a <printf+0x9a>
-    switch(c){
-    8000067c:	09578f63          	beq	a5,s5,8000071a <printf+0x18a>
-    80000680:	0b879363          	bne	a5,s8,80000726 <printf+0x196>
-      printint(va_arg(ap, int), 10, 1);
-    80000684:	f8843783          	ld	a5,-120(s0)
-    80000688:	00878713          	addi	a4,a5,8
-    8000068c:	f8e43423          	sd	a4,-120(s0)
-    80000690:	4605                	li	a2,1
-    80000692:	45a9                	li	a1,10
-    80000694:	4388                	lw	a0,0(a5)
-    80000696:	00000097          	auipc	ra,0x0
-    8000069a:	e0c080e7          	jalr	-500(ra) # 800004a2 <printint>
-      break;
-    8000069e:	b771                	j	8000062a <printf+0x9a>
-      printptr(va_arg(ap, uint64));
-    800006a0:	f8843783          	ld	a5,-120(s0)
-    800006a4:	00878713          	addi	a4,a5,8
-    800006a8:	f8e43423          	sd	a4,-120(s0)
-    800006ac:	0007b903          	ld	s2,0(a5)
-  consputc('0');
-    800006b0:	03000513          	li	a0,48
-    800006b4:	00000097          	auipc	ra,0x0
-    800006b8:	bce080e7          	jalr	-1074(ra) # 80000282 <consputc>
-  consputc('x');
-    800006bc:	07800513          	li	a0,120
-    800006c0:	00000097          	auipc	ra,0x0
-    800006c4:	bc2080e7          	jalr	-1086(ra) # 80000282 <consputc>
-    800006c8:	84ea                	mv	s1,s10
-    consputc(digits[x >> (sizeof(uint64) * 8 - 4)]);
-    800006ca:	03c95793          	srli	a5,s2,0x3c
-    800006ce:	97da                	add	a5,a5,s6
-    800006d0:	0007c503          	lbu	a0,0(a5)
-    800006d4:	00000097          	auipc	ra,0x0
-    800006d8:	bae080e7          	jalr	-1106(ra) # 80000282 <consputc>
-  for (i = 0; i < (sizeof(uint64) * 2); i++, x <<= 4)
-    800006dc:	0912                	slli	s2,s2,0x4
-    800006de:	34fd                	addiw	s1,s1,-1
-    800006e0:	f4ed                	bnez	s1,800006ca <printf+0x13a>
-    800006e2:	b7a1                	j	8000062a <printf+0x9a>
-      if((s = va_arg(ap, char*)) == 0)
-    800006e4:	f8843783          	ld	a5,-120(s0)
-    800006e8:	00878713          	addi	a4,a5,8
-    800006ec:	f8e43423          	sd	a4,-120(s0)
-    800006f0:	6384                	ld	s1,0(a5)
-    800006f2:	cc89                	beqz	s1,8000070c <printf+0x17c>
-      for(; *s; s++)
-    800006f4:	0004c503          	lbu	a0,0(s1)
-    800006f8:	d90d                	beqz	a0,8000062a <printf+0x9a>
-        consputc(*s);
-    800006fa:	00000097          	auipc	ra,0x0
-    800006fe:	b88080e7          	jalr	-1144(ra) # 80000282 <consputc>
-      for(; *s; s++)
-    80000702:	0485                	addi	s1,s1,1
-    80000704:	0004c503          	lbu	a0,0(s1)
-    80000708:	f96d                	bnez	a0,800006fa <printf+0x16a>
-    8000070a:	b705                	j	8000062a <printf+0x9a>
-        s = "(null)";
-    8000070c:	00008497          	auipc	s1,0x8
-    80000710:	91448493          	addi	s1,s1,-1772 # 80008020 <etext+0x20>
-      for(; *s; s++)
-    80000714:	02800513          	li	a0,40
-    80000718:	b7cd                	j	800006fa <printf+0x16a>
-      consputc('%');
-    8000071a:	8556                	mv	a0,s5
-    8000071c:	00000097          	auipc	ra,0x0
-    80000720:	b66080e7          	jalr	-1178(ra) # 80000282 <consputc>
-      break;
-    80000724:	b719                	j	8000062a <printf+0x9a>
-      consputc('%');
-    80000726:	8556                	mv	a0,s5
-    80000728:	00000097          	auipc	ra,0x0
-    8000072c:	b5a080e7          	jalr	-1190(ra) # 80000282 <consputc>
-      consputc(c);
-    80000730:	8526                	mv	a0,s1
-    80000732:	00000097          	auipc	ra,0x0
-    80000736:	b50080e7          	jalr	-1200(ra) # 80000282 <consputc>
-      break;
-    8000073a:	bdc5                	j	8000062a <printf+0x9a>
-  if(locking)
-    8000073c:	020d9163          	bnez	s11,8000075e <printf+0x1ce>
-}
-    80000740:	70e6                	ld	ra,120(sp)
-    80000742:	7446                	ld	s0,112(sp)
-    80000744:	74a6                	ld	s1,104(sp)
-    80000746:	7906                	ld	s2,96(sp)
-    80000748:	69e6                	ld	s3,88(sp)
-    8000074a:	6a46                	ld	s4,80(sp)
-    8000074c:	6aa6                	ld	s5,72(sp)
-    8000074e:	6b06                	ld	s6,64(sp)
-    80000750:	7be2                	ld	s7,56(sp)
-    80000752:	7c42                	ld	s8,48(sp)
-    80000754:	7ca2                	ld	s9,40(sp)
-    80000756:	7d02                	ld	s10,32(sp)
-    80000758:	6de2                	ld	s11,24(sp)
-    8000075a:	6129                	addi	sp,sp,192
-    8000075c:	8082                	ret
-    release(&pr.lock);
-    8000075e:	00011517          	auipc	a0,0x11
-    80000762:	17a50513          	addi	a0,a0,378 # 800118d8 <pr>
-    80000766:	00000097          	auipc	ra,0x0
-    8000076a:	54e080e7          	jalr	1358(ra) # 80000cb4 <release>
-}
-    8000076e:	bfc9                	j	80000740 <printf+0x1b0>
+    800002e8:	1141                	addi	sp,sp,-16
+    800002ea:	e422                	sd	s0,8(sp)
+    800002ec:	0800                	addi	s0,sp,16
+  char *os;
 
-0000000080000770 <printfinit>:
+  os = s;
+  if(n <= 0)
+    800002ee:	02c05363          	blez	a2,80000314 <safestrcpy+0x2c>
+    800002f2:	fff6069b          	addiw	a3,a2,-1
+    800002f6:	1682                	slli	a3,a3,0x20
+    800002f8:	9281                	srli	a3,a3,0x20
+    800002fa:	96ae                	add	a3,a3,a1
+    800002fc:	87aa                	mv	a5,a0
+    return os;
+  while(--n > 0 && (*s++ = *t++) != 0)
+    800002fe:	00d58963          	beq	a1,a3,80000310 <safestrcpy+0x28>
+    80000302:	0585                	addi	a1,a1,1
+    80000304:	0785                	addi	a5,a5,1
+    80000306:	fff5c703          	lbu	a4,-1(a1)
+    8000030a:	fee78fa3          	sb	a4,-1(a5)
+    8000030e:	fb65                	bnez	a4,800002fe <safestrcpy+0x16>
     ;
+  *s = 0;
+    80000310:	00078023          	sb	zero,0(a5)
+  return os;
 }
+    80000314:	6422                	ld	s0,8(sp)
+    80000316:	0141                	addi	sp,sp,16
+    80000318:	8082                	ret
 
-void
-printfinit(void)
-{
-    80000770:	1101                	addi	sp,sp,-32
-    80000772:	ec06                	sd	ra,24(sp)
-    80000774:	e822                	sd	s0,16(sp)
-    80000776:	e426                	sd	s1,8(sp)
-    80000778:	1000                	addi	s0,sp,32
-  initlock(&pr.lock, "pr");
-    8000077a:	00011497          	auipc	s1,0x11
-    8000077e:	15e48493          	addi	s1,s1,350 # 800118d8 <pr>
-    80000782:	00008597          	auipc	a1,0x8
-    80000786:	8b658593          	addi	a1,a1,-1866 # 80008038 <etext+0x38>
-    8000078a:	8526                	mv	a0,s1
-    8000078c:	00000097          	auipc	ra,0x0
-    80000790:	3e4080e7          	jalr	996(ra) # 80000b70 <initlock>
-  pr.locking = 1;
-    80000794:	4785                	li	a5,1
-    80000796:	cc9c                	sw	a5,24(s1)
-}
-    80000798:	60e2                	ld	ra,24(sp)
-    8000079a:	6442                	ld	s0,16(sp)
-    8000079c:	64a2                	ld	s1,8(sp)
-    8000079e:	6105                	addi	sp,sp,32
-    800007a0:	8082                	ret
-
-00000000800007a2 <uartinit>:
-
-void uartstart();
+000000008000031a <strlen>:
 
-void
-uartinit(void)
+int
+strlen(const char *s)
 {
-    800007a2:	1141                	addi	sp,sp,-16
-    800007a4:	e406                	sd	ra,8(sp)
-    800007a6:	e022                	sd	s0,0(sp)
-    800007a8:	0800                	addi	s0,sp,16
-  // disable interrupts.
-  WriteReg(IER, 0x00);
-    800007aa:	100007b7          	lui	a5,0x10000
-    800007ae:	000780a3          	sb	zero,1(a5) # 10000001 <_entry-0x6fffffff>
-
-  // special mode to set baud rate.
-  WriteReg(LCR, LCR_BAUD_LATCH);
-    800007b2:	f8000713          	li	a4,-128
-    800007b6:	00e781a3          	sb	a4,3(a5)
-
-  // LSB for baud rate of 38.4K.
-  WriteReg(0, 0x03);
-    800007ba:	470d                	li	a4,3
-    800007bc:	00e78023          	sb	a4,0(a5)
-
-  // MSB for baud rate of 38.4K.
-  WriteReg(1, 0x00);
-    800007c0:	000780a3          	sb	zero,1(a5)
-
-  // leave set-baud mode,
-  // and set word length to 8 bits, no parity.
-  WriteReg(LCR, LCR_EIGHT_BITS);
-    800007c4:	00e781a3          	sb	a4,3(a5)
-
-  // reset and enable FIFOs.
-  WriteReg(FCR, FCR_FIFO_ENABLE | FCR_FIFO_CLEAR);
-    800007c8:	469d                	li	a3,7
-    800007ca:	00d78123          	sb	a3,2(a5)
+    8000031a:	1141                	addi	sp,sp,-16
+    8000031c:	e422                	sd	s0,8(sp)
+    8000031e:	0800                	addi	s0,sp,16
+  int n;
 
-  // enable transmit and receive interrupts.
-  WriteReg(IER, IER_TX_ENABLE | IER_RX_ENABLE);
-    800007ce:	00e780a3          	sb	a4,1(a5)
+  for(n = 0; s[n]; n++)
+    80000320:	00054783          	lbu	a5,0(a0)
+    80000324:	cf91                	beqz	a5,80000340 <strlen+0x26>
+    80000326:	0505                	addi	a0,a0,1
+    80000328:	87aa                	mv	a5,a0
+    8000032a:	4685                	li	a3,1
+    8000032c:	9e89                	subw	a3,a3,a0
+    8000032e:	00f6853b          	addw	a0,a3,a5
+    80000332:	0785                	addi	a5,a5,1
+    80000334:	fff7c703          	lbu	a4,-1(a5)
+    80000338:	fb7d                	bnez	a4,8000032e <strlen+0x14>
+    ;
+  return n;
+}
+    8000033a:	6422                	ld	s0,8(sp)
+    8000033c:	0141                	addi	sp,sp,16
+    8000033e:	8082                	ret
+  for(n = 0; s[n]; n++)
+    80000340:	4501                	li	a0,0
+    80000342:	bfe5                	j	8000033a <strlen+0x20>
 
-  initlock(&uart_tx_lock, "uart");
-    800007d2:	00008597          	auipc	a1,0x8
-    800007d6:	88658593          	addi	a1,a1,-1914 # 80008058 <digits+0x18>
-    800007da:	00011517          	auipc	a0,0x11
-    800007de:	11e50513          	addi	a0,a0,286 # 800118f8 <uart_tx_lock>
-    800007e2:	00000097          	auipc	ra,0x0
-    800007e6:	38e080e7          	jalr	910(ra) # 80000b70 <initlock>
-}
-    800007ea:	60a2                	ld	ra,8(sp)
-    800007ec:	6402                	ld	s0,0(sp)
-    800007ee:	0141                	addi	sp,sp,16
-    800007f0:	8082                	ret
+0000000080000344 <main>:
+volatile static int started = 0;
 
-00000000800007f2 <uartputc_sync>:
-// use interrupts, for use by kernel printf() and
-// to echo characters. it spins waiting for the uart's
-// output register to be empty.
+// start() jumps here in supervisor mode on all CPUs.
 void
-uartputc_sync(int c)
+main()
 {
-    800007f2:	1101                	addi	sp,sp,-32
-    800007f4:	ec06                	sd	ra,24(sp)
-    800007f6:	e822                	sd	s0,16(sp)
-    800007f8:	e426                	sd	s1,8(sp)
-    800007fa:	1000                	addi	s0,sp,32
-    800007fc:	84aa                	mv	s1,a0
-  push_off();
-    800007fe:	00000097          	auipc	ra,0x0
-    80000802:	3b6080e7          	jalr	950(ra) # 80000bb4 <push_off>
-
-  if(panicked){
-    80000806:	00008797          	auipc	a5,0x8
-    8000080a:	7fa7a783          	lw	a5,2042(a5) # 80009000 <panicked>
-    for(;;)
+    80000344:	1141                	addi	sp,sp,-16
+    80000346:	e406                	sd	ra,8(sp)
+    80000348:	e022                	sd	s0,0(sp)
+    8000034a:	0800                	addi	s0,sp,16
+  if(cpuid() == 0){
+    8000034c:	00001097          	auipc	ra,0x1
+    80000350:	bc6080e7          	jalr	-1082(ra) # 80000f12 <cpuid>
+    virtio_disk_init(); // emulated hard disk
+    userinit();      // first user process
+    __sync_synchronize();
+    started = 1;
+  } else {
+    while(started == 0)
+    80000354:	00009717          	auipc	a4,0x9
+    80000358:	cac70713          	addi	a4,a4,-852 # 80009000 <started>
+  if(cpuid() == 0){
+    8000035c:	c139                	beqz	a0,800003a2 <main+0x5e>
+    while(started == 0)
+    8000035e:	431c                	lw	a5,0(a4)
+    80000360:	2781                	sext.w	a5,a5
+    80000362:	dff5                	beqz	a5,8000035e <main+0x1a>
       ;
+    __sync_synchronize();
+    80000364:	0ff0000f          	fence
+    printf("hart %d starting\n", cpuid());
+    80000368:	00001097          	auipc	ra,0x1
+    8000036c:	baa080e7          	jalr	-1110(ra) # 80000f12 <cpuid>
+    80000370:	85aa                	mv	a1,a0
+    80000372:	00008517          	auipc	a0,0x8
+    80000376:	cc650513          	addi	a0,a0,-826 # 80008038 <etext+0x38>
+    8000037a:	00006097          	auipc	ra,0x6
+    8000037e:	9c0080e7          	jalr	-1600(ra) # 80005d3a <printf>
+    kvminithart();    // turn on paging
+    80000382:	00000097          	auipc	ra,0x0
+    80000386:	194080e7          	jalr	404(ra) # 80000516 <kvminithart>
+    trapinithart();   // install kernel trap vector
+    8000038a:	00002097          	auipc	ra,0x2
+    8000038e:	840080e7          	jalr	-1984(ra) # 80001bca <trapinithart>
+    plicinithart();   // ask PLIC for device interrupts
+    80000392:	00005097          	auipc	ra,0x5
+    80000396:	e8e080e7          	jalr	-370(ra) # 80005220 <plicinithart>
   }
 
-  // wait for Transmit Holding Empty to be set in LSR.
-  while((ReadReg(LSR) & LSR_TX_IDLE) == 0)
-    8000080e:	10000737          	lui	a4,0x10000
-  if(panicked){
-    80000812:	c391                	beqz	a5,80000816 <uartputc_sync+0x24>
-    for(;;)
-    80000814:	a001                	j	80000814 <uartputc_sync+0x22>
-  while((ReadReg(LSR) & LSR_TX_IDLE) == 0)
-    80000816:	00574783          	lbu	a5,5(a4) # 10000005 <_entry-0x6ffffffb>
-    8000081a:	0207f793          	andi	a5,a5,32
-    8000081e:	dfe5                	beqz	a5,80000816 <uartputc_sync+0x24>
-    ;
-  WriteReg(THR, c);
-    80000820:	0ff4f513          	zext.b	a0,s1
-    80000824:	100007b7          	lui	a5,0x10000
-    80000828:	00a78023          	sb	a0,0(a5) # 10000000 <_entry-0x70000000>
+  scheduler();        
+    8000039a:	00001097          	auipc	ra,0x1
+    8000039e:	0be080e7          	jalr	190(ra) # 80001458 <scheduler>
+    consoleinit();
+    800003a2:	00006097          	auipc	ra,0x6
+    800003a6:	85e080e7          	jalr	-1954(ra) # 80005c00 <consoleinit>
+    printfinit();
+    800003aa:	00006097          	auipc	ra,0x6
+    800003ae:	b70080e7          	jalr	-1168(ra) # 80005f1a <printfinit>
+    printf("\n");
+    800003b2:	00008517          	auipc	a0,0x8
+    800003b6:	c9650513          	addi	a0,a0,-874 # 80008048 <etext+0x48>
+    800003ba:	00006097          	auipc	ra,0x6
+    800003be:	980080e7          	jalr	-1664(ra) # 80005d3a <printf>
+    printf("xv6 kernel is booting\n");
+    800003c2:	00008517          	auipc	a0,0x8
+    800003c6:	c5e50513          	addi	a0,a0,-930 # 80008020 <etext+0x20>
+    800003ca:	00006097          	auipc	ra,0x6
+    800003ce:	970080e7          	jalr	-1680(ra) # 80005d3a <printf>
+    printf("\n");
+    800003d2:	00008517          	auipc	a0,0x8
+    800003d6:	c7650513          	addi	a0,a0,-906 # 80008048 <etext+0x48>
+    800003da:	00006097          	auipc	ra,0x6
+    800003de:	960080e7          	jalr	-1696(ra) # 80005d3a <printf>
+    kinit();         // physical page allocator
+    800003e2:	00000097          	auipc	ra,0x0
+    800003e6:	cfc080e7          	jalr	-772(ra) # 800000de <kinit>
+    kvminit();       // create kernel page table
+    800003ea:	00000097          	auipc	ra,0x0
+    800003ee:	3f8080e7          	jalr	1016(ra) # 800007e2 <kvminit>
+    kvminithart();   // turn on paging
+    800003f2:	00000097          	auipc	ra,0x0
+    800003f6:	124080e7          	jalr	292(ra) # 80000516 <kvminithart>
+    procinit();      // process table
+    800003fa:	00001097          	auipc	ra,0x1
+    800003fe:	a68080e7          	jalr	-1432(ra) # 80000e62 <procinit>
+    trapinit();      // trap vectors
+    80000402:	00001097          	auipc	ra,0x1
+    80000406:	7a0080e7          	jalr	1952(ra) # 80001ba2 <trapinit>
+    trapinithart();  // install kernel trap vector
+    8000040a:	00001097          	auipc	ra,0x1
+    8000040e:	7c0080e7          	jalr	1984(ra) # 80001bca <trapinithart>
+    plicinit();      // set up interrupt controller
+    80000412:	00005097          	auipc	ra,0x5
+    80000416:	df8080e7          	jalr	-520(ra) # 8000520a <plicinit>
+    plicinithart();  // ask PLIC for device interrupts
+    8000041a:	00005097          	auipc	ra,0x5
+    8000041e:	e06080e7          	jalr	-506(ra) # 80005220 <plicinithart>
+    binit();         // buffer cache
+    80000422:	00002097          	auipc	ra,0x2
+    80000426:	fbc080e7          	jalr	-68(ra) # 800023de <binit>
+    iinit();         // inode table
+    8000042a:	00002097          	auipc	ra,0x2
+    8000042e:	64a080e7          	jalr	1610(ra) # 80002a74 <iinit>
+    fileinit();      // file table
+    80000432:	00003097          	auipc	ra,0x3
+    80000436:	5fc080e7          	jalr	1532(ra) # 80003a2e <fileinit>
+    virtio_disk_init(); // emulated hard disk
+    8000043a:	00005097          	auipc	ra,0x5
+    8000043e:	f06080e7          	jalr	-250(ra) # 80005340 <virtio_disk_init>
+    userinit();      // first user process
+    80000442:	00001097          	auipc	ra,0x1
+    80000446:	dd4080e7          	jalr	-556(ra) # 80001216 <userinit>
+    __sync_synchronize();
+    8000044a:	0ff0000f          	fence
+    started = 1;
+    8000044e:	4785                	li	a5,1
+    80000450:	00009717          	auipc	a4,0x9
+    80000454:	baf72823          	sw	a5,-1104(a4) # 80009000 <started>
+    80000458:	b789                	j	8000039a <main+0x56>
 
-  pop_off();
-    8000082c:	00000097          	auipc	ra,0x0
-    80000830:	428080e7          	jalr	1064(ra) # 80000c54 <pop_off>
+000000008000045a <recursive_vmprint>:
+  }
+  return &pagetable[PX(0, va)];
 }
-    80000834:	60e2                	ld	ra,24(sp)
-    80000836:	6442                	ld	s0,16(sp)
-    80000838:	64a2                	ld	s1,8(sp)
-    8000083a:	6105                	addi	sp,sp,32
-    8000083c:	8082                	ret
-
-000000008000083e <uartstart>:
-// called from both the top- and bottom-half.
-void
-uartstart()
-{
-  while(1){
-    if(uart_tx_w == uart_tx_r){
-    8000083e:	00008797          	auipc	a5,0x8
-    80000842:	7c67a783          	lw	a5,1990(a5) # 80009004 <uart_tx_r>
-    80000846:	00008717          	auipc	a4,0x8
-    8000084a:	7c272703          	lw	a4,1986(a4) # 80009008 <uart_tx_w>
-    8000084e:	08f70063          	beq	a4,a5,800008ce <uartstart+0x90>
-{
-    80000852:	7139                	addi	sp,sp,-64
-    80000854:	fc06                	sd	ra,56(sp)
-    80000856:	f822                	sd	s0,48(sp)
-    80000858:	f426                	sd	s1,40(sp)
-    8000085a:	f04a                	sd	s2,32(sp)
-    8000085c:	ec4e                	sd	s3,24(sp)
-    8000085e:	e852                	sd	s4,16(sp)
-    80000860:	e456                	sd	s5,8(sp)
-    80000862:	0080                	addi	s0,sp,64
-      // transmit buffer is empty.
-      return;
-    }
-    
-    if((ReadReg(LSR) & LSR_TX_IDLE) == 0){
-    80000864:	10000937          	lui	s2,0x10000
-      // so we cannot give it another byte.
-      // it will interrupt when it's ready for a new byte.
-      return;
-    }
-    
-    int c = uart_tx_buf[uart_tx_r];
-    80000868:	00011a97          	auipc	s5,0x11
-    8000086c:	090a8a93          	addi	s5,s5,144 # 800118f8 <uart_tx_lock>
-    uart_tx_r = (uart_tx_r + 1) % UART_TX_BUF_SIZE;
-    80000870:	00008497          	auipc	s1,0x8
-    80000874:	79448493          	addi	s1,s1,1940 # 80009004 <uart_tx_r>
-    if(uart_tx_w == uart_tx_r){
-    80000878:	00008a17          	auipc	s4,0x8
-    8000087c:	790a0a13          	addi	s4,s4,1936 # 80009008 <uart_tx_w>
-    if((ReadReg(LSR) & LSR_TX_IDLE) == 0){
-    80000880:	00594703          	lbu	a4,5(s2) # 10000005 <_entry-0x6ffffffb>
-    80000884:	02077713          	andi	a4,a4,32
-    80000888:	cb15                	beqz	a4,800008bc <uartstart+0x7e>
-    int c = uart_tx_buf[uart_tx_r];
-    8000088a:	00fa8733          	add	a4,s5,a5
-    8000088e:	01874983          	lbu	s3,24(a4)
-    uart_tx_r = (uart_tx_r + 1) % UART_TX_BUF_SIZE;
-    80000892:	2785                	addiw	a5,a5,1
-    80000894:	41f7d71b          	sraiw	a4,a5,0x1f
-    80000898:	01b7571b          	srliw	a4,a4,0x1b
-    8000089c:	9fb9                	addw	a5,a5,a4
-    8000089e:	8bfd                	andi	a5,a5,31
-    800008a0:	9f99                	subw	a5,a5,a4
-    800008a2:	c09c                	sw	a5,0(s1)
-    
-    // maybe uartputc() is waiting for space in the buffer.
-    wakeup(&uart_tx_r);
-    800008a4:	8526                	mv	a0,s1
-    800008a6:	00002097          	auipc	ra,0x2
-    800008aa:	aba080e7          	jalr	-1350(ra) # 80002360 <wakeup>
-    
-    WriteReg(THR, c);
-    800008ae:	01390023          	sb	s3,0(s2)
-    if(uart_tx_w == uart_tx_r){
-    800008b2:	409c                	lw	a5,0(s1)
-    800008b4:	000a2703          	lw	a4,0(s4)
-    800008b8:	fcf714e3          	bne	a4,a5,80000880 <uartstart+0x42>
-  }
-}
-    800008bc:	70e2                	ld	ra,56(sp)
-    800008be:	7442                	ld	s0,48(sp)
-    800008c0:	74a2                	ld	s1,40(sp)
-    800008c2:	7902                	ld	s2,32(sp)
-    800008c4:	69e2                	ld	s3,24(sp)
-    800008c6:	6a42                	ld	s4,16(sp)
-    800008c8:	6aa2                	ld	s5,8(sp)
-    800008ca:	6121                	addi	sp,sp,64
-    800008cc:	8082                	ret
-    800008ce:	8082                	ret
-
-00000000800008d0 <uartputc>:
-{
-    800008d0:	7179                	addi	sp,sp,-48
-    800008d2:	f406                	sd	ra,40(sp)
-    800008d4:	f022                	sd	s0,32(sp)
-    800008d6:	ec26                	sd	s1,24(sp)
-    800008d8:	e84a                	sd	s2,16(sp)
-    800008da:	e44e                	sd	s3,8(sp)
-    800008dc:	e052                	sd	s4,0(sp)
-    800008de:	1800                	addi	s0,sp,48
-    800008e0:	84aa                	mv	s1,a0
-  acquire(&uart_tx_lock);
-    800008e2:	00011517          	auipc	a0,0x11
-    800008e6:	01650513          	addi	a0,a0,22 # 800118f8 <uart_tx_lock>
-    800008ea:	00000097          	auipc	ra,0x0
-    800008ee:	316080e7          	jalr	790(ra) # 80000c00 <acquire>
-  if(panicked){
-    800008f2:	00008797          	auipc	a5,0x8
-    800008f6:	70e7a783          	lw	a5,1806(a5) # 80009000 <panicked>
-    800008fa:	c391                	beqz	a5,800008fe <uartputc+0x2e>
-    for(;;)
-    800008fc:	a001                	j	800008fc <uartputc+0x2c>
-    if(((uart_tx_w + 1) % UART_TX_BUF_SIZE) == uart_tx_r){
-    800008fe:	00008697          	auipc	a3,0x8
-    80000902:	70a6a683          	lw	a3,1802(a3) # 80009008 <uart_tx_w>
-    80000906:	0016879b          	addiw	a5,a3,1
-    8000090a:	41f7d71b          	sraiw	a4,a5,0x1f
-    8000090e:	01b7571b          	srliw	a4,a4,0x1b
-    80000912:	9fb9                	addw	a5,a5,a4
-    80000914:	8bfd                	andi	a5,a5,31
-    80000916:	9f99                	subw	a5,a5,a4
-    80000918:	00008717          	auipc	a4,0x8
-    8000091c:	6ec72703          	lw	a4,1772(a4) # 80009004 <uart_tx_r>
-    80000920:	04f71363          	bne	a4,a5,80000966 <uartputc+0x96>
-      sleep(&uart_tx_r, &uart_tx_lock);
-    80000924:	00011a17          	auipc	s4,0x11
-    80000928:	fd4a0a13          	addi	s4,s4,-44 # 800118f8 <uart_tx_lock>
-    8000092c:	00008917          	auipc	s2,0x8
-    80000930:	6d890913          	addi	s2,s2,1752 # 80009004 <uart_tx_r>
-    if(((uart_tx_w + 1) % UART_TX_BUF_SIZE) == uart_tx_r){
-    80000934:	00008997          	auipc	s3,0x8
-    80000938:	6d498993          	addi	s3,s3,1748 # 80009008 <uart_tx_w>
-      sleep(&uart_tx_r, &uart_tx_lock);
-    8000093c:	85d2                	mv	a1,s4
-    8000093e:	854a                	mv	a0,s2
-    80000940:	00002097          	auipc	ra,0x2
-    80000944:	8a0080e7          	jalr	-1888(ra) # 800021e0 <sleep>
-    if(((uart_tx_w + 1) % UART_TX_BUF_SIZE) == uart_tx_r){
-    80000948:	0009a683          	lw	a3,0(s3)
-    8000094c:	0016879b          	addiw	a5,a3,1
-    80000950:	41f7d71b          	sraiw	a4,a5,0x1f
-    80000954:	01b7571b          	srliw	a4,a4,0x1b
-    80000958:	9fb9                	addw	a5,a5,a4
-    8000095a:	8bfd                	andi	a5,a5,31
-    8000095c:	9f99                	subw	a5,a5,a4
-    8000095e:	00092703          	lw	a4,0(s2)
-    80000962:	fcf70de3          	beq	a4,a5,8000093c <uartputc+0x6c>
-      uart_tx_buf[uart_tx_w] = c;
-    80000966:	00011917          	auipc	s2,0x11
-    8000096a:	f9290913          	addi	s2,s2,-110 # 800118f8 <uart_tx_lock>
-    8000096e:	96ca                	add	a3,a3,s2
-    80000970:	00968c23          	sb	s1,24(a3)
-      uart_tx_w = (uart_tx_w + 1) % UART_TX_BUF_SIZE;
-    80000974:	00008717          	auipc	a4,0x8
-    80000978:	68f72a23          	sw	a5,1684(a4) # 80009008 <uart_tx_w>
-      uartstart();
-    8000097c:	00000097          	auipc	ra,0x0
-    80000980:	ec2080e7          	jalr	-318(ra) # 8000083e <uartstart>
-      release(&uart_tx_lock);
-    80000984:	854a                	mv	a0,s2
-    80000986:	00000097          	auipc	ra,0x0
-    8000098a:	32e080e7          	jalr	814(ra) # 80000cb4 <release>
-}
-    8000098e:	70a2                	ld	ra,40(sp)
-    80000990:	7402                	ld	s0,32(sp)
-    80000992:	64e2                	ld	s1,24(sp)
-    80000994:	6942                	ld	s2,16(sp)
-    80000996:	69a2                	ld	s3,8(sp)
-    80000998:	6a02                	ld	s4,0(sp)
-    8000099a:	6145                	addi	sp,sp,48
-    8000099c:	8082                	ret
 
-000000008000099e <uartgetc>:
 
-// read one input character from the UART.
-// return -1 if none is waiting.
-int
-uartgetc(void)
-{
-    8000099e:	1141                	addi	sp,sp,-16
-    800009a0:	e422                	sd	s0,8(sp)
-    800009a2:	0800                	addi	s0,sp,16
-  if(ReadReg(LSR) & 0x01){
-    800009a4:	100007b7          	lui	a5,0x10000
-    800009a8:	0057c783          	lbu	a5,5(a5) # 10000005 <_entry-0x6ffffffb>
-    800009ac:	8b85                	andi	a5,a5,1
-    800009ae:	cb81                	beqz	a5,800009be <uartgetc+0x20>
-    // input data is ready.
-    return ReadReg(RHR);
-    800009b0:	100007b7          	lui	a5,0x10000
-    800009b4:	0007c503          	lbu	a0,0(a5) # 10000000 <_entry-0x70000000>
-  } else {
-    return -1;
+static void recursive_vmprint(pagetable_t pagetable, int level) {
+    8000045a:	711d                	addi	sp,sp,-96
+    8000045c:	ec86                	sd	ra,88(sp)
+    8000045e:	e8a2                	sd	s0,80(sp)
+    80000460:	e4a6                	sd	s1,72(sp)
+    80000462:	e0ca                	sd	s2,64(sp)
+    80000464:	fc4e                	sd	s3,56(sp)
+    80000466:	f852                	sd	s4,48(sp)
+    80000468:	f456                	sd	s5,40(sp)
+    8000046a:	f05a                	sd	s6,32(sp)
+    8000046c:	ec5e                	sd	s7,24(sp)
+    8000046e:	e862                	sd	s8,16(sp)
+    80000470:	e466                	sd	s9,8(sp)
+    80000472:	e06a                	sd	s10,0(sp)
+    80000474:	1080                	addi	s0,sp,96
+    80000476:	892a                	mv	s2,a0
+    80000478:	8c2e                	mv	s8,a1
+  if (level == 0) {
+    8000047a:	c185                	beqz	a1,8000049a <recursive_vmprint+0x40>
+static void recursive_vmprint(pagetable_t pagetable, int level) {
+    8000047c:	4981                	li	s3,0
+    printf("page table %p\n", pagetable);
   }
-}
-    800009b8:	6422                	ld	s0,8(sp)
-    800009ba:	0141                	addi	sp,sp,16
-    800009bc:	8082                	ret
-    return -1;
-    800009be:	557d                	li	a0,-1
-    800009c0:	bfe5                	j	800009b8 <uartgetc+0x1a>
-
-00000000800009c2 <uartintr>:
-// handle a uart interrupt, raised because input has
-// arrived, or the uart is ready for more output, or
-// both. called from trap.c.
-void
-uartintr(void)
-{
-    800009c2:	1101                	addi	sp,sp,-32
-    800009c4:	ec06                	sd	ra,24(sp)
-    800009c6:	e822                	sd	s0,16(sp)
-    800009c8:	e426                	sd	s1,8(sp)
-    800009ca:	1000                	addi	s0,sp,32
-  // read and process incoming characters.
-  while(1){
-    int c = uartgetc();
-    if(c == -1)
-    800009cc:	54fd                	li	s1,-1
-    800009ce:	a029                	j	800009d8 <uartintr+0x16>
-      break;
-    consoleintr(c);
-    800009d0:	00000097          	auipc	ra,0x0
-    800009d4:	8f4080e7          	jalr	-1804(ra) # 800002c4 <consoleintr>
-    int c = uartgetc();
-    800009d8:	00000097          	auipc	ra,0x0
-    800009dc:	fc6080e7          	jalr	-58(ra) # 8000099e <uartgetc>
-    if(c == -1)
-    800009e0:	fe9518e3          	bne	a0,s1,800009d0 <uartintr+0xe>
+  for(int i = 0; i < 512; i++){
+    pte_t pte = pagetable[i];
+    if((pte & PTE_V) && (pte & (PTE_R|PTE_W|PTE_X)) == 0){
+    8000047e:	4b85                	li	s7,1
+      while (t > 0) {
+          printf(".. ");
+          t--;
+      }
+      uint64 child = PTE2PA(pte);
+      printf("..%d: pte %p pa %p\n", i, pte, child);
+    80000480:	00008d17          	auipc	s10,0x8
+    80000484:	be8d0d13          	addi	s10,s10,-1048 # 80008068 <etext+0x68>
+      recursive_vmprint((pagetable_t)child, level + 1);
+    80000488:	001c0c9b          	addiw	s9,s8,1
+          printf(".. ");
+    8000048c:	00008a97          	auipc	s5,0x8
+    80000490:	bd4a8a93          	addi	s5,s5,-1068 # 80008060 <etext+0x60>
+  for(int i = 0; i < 512; i++){
+    80000494:	20000b13          	li	s6,512
+    80000498:	a839                	j	800004b6 <recursive_vmprint+0x5c>
+    printf("page table %p\n", pagetable);
+    8000049a:	85aa                	mv	a1,a0
+    8000049c:	00008517          	auipc	a0,0x8
+    800004a0:	bb450513          	addi	a0,a0,-1100 # 80008050 <etext+0x50>
+    800004a4:	00006097          	auipc	ra,0x6
+    800004a8:	896080e7          	jalr	-1898(ra) # 80005d3a <printf>
+    800004ac:	bfc1                	j	8000047c <recursive_vmprint+0x22>
+  for(int i = 0; i < 512; i++){
+    800004ae:	2985                	addiw	s3,s3,1
+    800004b0:	0921                	addi	s2,s2,8
+    800004b2:	05698463          	beq	s3,s6,800004fa <recursive_vmprint+0xa0>
+    pte_t pte = pagetable[i];
+    800004b6:	00093a03          	ld	s4,0(s2)
+    if((pte & PTE_V) && (pte & (PTE_R|PTE_W|PTE_X)) == 0){
+    800004ba:	00fa7793          	andi	a5,s4,15
+    800004be:	ff7798e3          	bne	a5,s7,800004ae <recursive_vmprint+0x54>
+      while (t > 0) {
+    800004c2:	01805a63          	blez	s8,800004d6 <recursive_vmprint+0x7c>
+      int t = level; 
+    800004c6:	84e2                	mv	s1,s8
+          printf(".. ");
+    800004c8:	8556                	mv	a0,s5
+    800004ca:	00006097          	auipc	ra,0x6
+    800004ce:	870080e7          	jalr	-1936(ra) # 80005d3a <printf>
+          t--;
+    800004d2:	34fd                	addiw	s1,s1,-1
+      while (t > 0) {
+    800004d4:	f8f5                	bnez	s1,800004c8 <recursive_vmprint+0x6e>
+      uint64 child = PTE2PA(pte);
+    800004d6:	00aa5493          	srli	s1,s4,0xa
+    800004da:	04b2                	slli	s1,s1,0xc
+      printf("..%d: pte %p pa %p\n", i, pte, child);
+    800004dc:	86a6                	mv	a3,s1
+    800004de:	8652                	mv	a2,s4
+    800004e0:	85ce                	mv	a1,s3
+    800004e2:	856a                	mv	a0,s10
+    800004e4:	00006097          	auipc	ra,0x6
+    800004e8:	856080e7          	jalr	-1962(ra) # 80005d3a <printf>
+      recursive_vmprint((pagetable_t)child, level + 1);
+    800004ec:	85e6                	mv	a1,s9
+    800004ee:	8526                	mv	a0,s1
+    800004f0:	00000097          	auipc	ra,0x0
+    800004f4:	f6a080e7          	jalr	-150(ra) # 8000045a <recursive_vmprint>
+    800004f8:	bf5d                	j	800004ae <recursive_vmprint+0x54>
+    }
   }
-
-  // send buffered characters.
-  acquire(&uart_tx_lock);
-    800009e4:	00011497          	auipc	s1,0x11
-    800009e8:	f1448493          	addi	s1,s1,-236 # 800118f8 <uart_tx_lock>
-    800009ec:	8526                	mv	a0,s1
-    800009ee:	00000097          	auipc	ra,0x0
-    800009f2:	212080e7          	jalr	530(ra) # 80000c00 <acquire>
-  uartstart();
-    800009f6:	00000097          	auipc	ra,0x0
-    800009fa:	e48080e7          	jalr	-440(ra) # 8000083e <uartstart>
-  release(&uart_tx_lock);
-    800009fe:	8526                	mv	a0,s1
-    80000a00:	00000097          	auipc	ra,0x0
-    80000a04:	2b4080e7          	jalr	692(ra) # 80000cb4 <release>
-}
-    80000a08:	60e2                	ld	ra,24(sp)
-    80000a0a:	6442                	ld	s0,16(sp)
-    80000a0c:	64a2                	ld	s1,8(sp)
-    80000a0e:	6105                	addi	sp,sp,32
-    80000a10:	8082                	ret
-
-0000000080000a12 <kfree>:
-// which normally should have been returned by a
-// call to kalloc().  (The exception is when
-// initializing the allocator; see kinit above.)
-void
-kfree(void *pa)
-{
-    80000a12:	1101                	addi	sp,sp,-32
-    80000a14:	ec06                	sd	ra,24(sp)
-    80000a16:	e822                	sd	s0,16(sp)
-    80000a18:	e426                	sd	s1,8(sp)
-    80000a1a:	e04a                	sd	s2,0(sp)
-    80000a1c:	1000                	addi	s0,sp,32
-  struct run *r;
-
-  if(((uint64)pa % PGSIZE) != 0 || (char*)pa < end || (uint64)pa >= PHYSTOP)
-    80000a1e:	03451793          	slli	a5,a0,0x34
-    80000a22:	ebb9                	bnez	a5,80000a78 <kfree+0x66>
-    80000a24:	84aa                	mv	s1,a0
-    80000a26:	00025797          	auipc	a5,0x25
-    80000a2a:	5da78793          	addi	a5,a5,1498 # 80026000 <end>
-    80000a2e:	04f56563          	bltu	a0,a5,80000a78 <kfree+0x66>
-    80000a32:	47c5                	li	a5,17
-    80000a34:	07ee                	slli	a5,a5,0x1b
-    80000a36:	04f57163          	bgeu	a0,a5,80000a78 <kfree+0x66>
-    panic("kfree");
-
-  // Fill with junk to catch dangling refs.
-  memset(pa, 1, PGSIZE);
-    80000a3a:	6605                	lui	a2,0x1
-    80000a3c:	4585                	li	a1,1
-    80000a3e:	00000097          	auipc	ra,0x0
-    80000a42:	2be080e7          	jalr	702(ra) # 80000cfc <memset>
-
-  r = (struct run*)pa;
-
-  acquire(&kmem.lock);
-    80000a46:	00011917          	auipc	s2,0x11
-    80000a4a:	eea90913          	addi	s2,s2,-278 # 80011930 <kmem>
-    80000a4e:	854a                	mv	a0,s2
-    80000a50:	00000097          	auipc	ra,0x0
-    80000a54:	1b0080e7          	jalr	432(ra) # 80000c00 <acquire>
-  r->next = kmem.freelist;
-    80000a58:	01893783          	ld	a5,24(s2)
-    80000a5c:	e09c                	sd	a5,0(s1)
-  kmem.freelist = r;
-    80000a5e:	00993c23          	sd	s1,24(s2)
-  release(&kmem.lock);
-    80000a62:	854a                	mv	a0,s2
-    80000a64:	00000097          	auipc	ra,0x0
-    80000a68:	250080e7          	jalr	592(ra) # 80000cb4 <release>
-}
-    80000a6c:	60e2                	ld	ra,24(sp)
-    80000a6e:	6442                	ld	s0,16(sp)
-    80000a70:	64a2                	ld	s1,8(sp)
-    80000a72:	6902                	ld	s2,0(sp)
-    80000a74:	6105                	addi	sp,sp,32
-    80000a76:	8082                	ret
-    panic("kfree");
-    80000a78:	00007517          	auipc	a0,0x7
-    80000a7c:	5e850513          	addi	a0,a0,1512 # 80008060 <digits+0x20>
-    80000a80:	00000097          	auipc	ra,0x0
-    80000a84:	ac6080e7          	jalr	-1338(ra) # 80000546 <panic>
-
-0000000080000a88 <freerange>:
-{
-    80000a88:	7179                	addi	sp,sp,-48
-    80000a8a:	f406                	sd	ra,40(sp)
-    80000a8c:	f022                	sd	s0,32(sp)
-    80000a8e:	ec26                	sd	s1,24(sp)
-    80000a90:	e84a                	sd	s2,16(sp)
-    80000a92:	e44e                	sd	s3,8(sp)
-    80000a94:	e052                	sd	s4,0(sp)
-    80000a96:	1800                	addi	s0,sp,48
-  p = (char*)PGROUNDUP((uint64)pa_start);
-    80000a98:	6785                	lui	a5,0x1
-    80000a9a:	fff78713          	addi	a4,a5,-1 # fff <_entry-0x7ffff001>
-    80000a9e:	00e504b3          	add	s1,a0,a4
-    80000aa2:	777d                	lui	a4,0xfffff
-    80000aa4:	8cf9                	and	s1,s1,a4
-  for(; p + PGSIZE <= (char*)pa_end; p += PGSIZE)
-    80000aa6:	94be                	add	s1,s1,a5
-    80000aa8:	0095ee63          	bltu	a1,s1,80000ac4 <freerange+0x3c>
-    80000aac:	892e                	mv	s2,a1
-    kfree(p);
-    80000aae:	7a7d                	lui	s4,0xfffff
-  for(; p + PGSIZE <= (char*)pa_end; p += PGSIZE)
-    80000ab0:	6985                	lui	s3,0x1
-    kfree(p);
-    80000ab2:	01448533          	add	a0,s1,s4
-    80000ab6:	00000097          	auipc	ra,0x0
-    80000aba:	f5c080e7          	jalr	-164(ra) # 80000a12 <kfree>
-  for(; p + PGSIZE <= (char*)pa_end; p += PGSIZE)
-    80000abe:	94ce                	add	s1,s1,s3
-    80000ac0:	fe9979e3          	bgeu	s2,s1,80000ab2 <freerange+0x2a>
 }
-    80000ac4:	70a2                	ld	ra,40(sp)
-    80000ac6:	7402                	ld	s0,32(sp)
-    80000ac8:	64e2                	ld	s1,24(sp)
-    80000aca:	6942                	ld	s2,16(sp)
-    80000acc:	69a2                	ld	s3,8(sp)
-    80000ace:	6a02                	ld	s4,0(sp)
-    80000ad0:	6145                	addi	sp,sp,48
-    80000ad2:	8082                	ret
-
-0000000080000ad4 <kinit>:
-{
-    80000ad4:	1141                	addi	sp,sp,-16
-    80000ad6:	e406                	sd	ra,8(sp)
-    80000ad8:	e022                	sd	s0,0(sp)
-    80000ada:	0800                	addi	s0,sp,16
-  initlock(&kmem.lock, "kmem");
-    80000adc:	00007597          	auipc	a1,0x7
-    80000ae0:	58c58593          	addi	a1,a1,1420 # 80008068 <digits+0x28>
-    80000ae4:	00011517          	auipc	a0,0x11
-    80000ae8:	e4c50513          	addi	a0,a0,-436 # 80011930 <kmem>
-    80000aec:	00000097          	auipc	ra,0x0
-    80000af0:	084080e7          	jalr	132(ra) # 80000b70 <initlock>
-  freerange(end, (void*)PHYSTOP);
-    80000af4:	45c5                	li	a1,17
-    80000af6:	05ee                	slli	a1,a1,0x1b
-    80000af8:	00025517          	auipc	a0,0x25
-    80000afc:	50850513          	addi	a0,a0,1288 # 80026000 <end>
-    80000b00:	00000097          	auipc	ra,0x0
-    80000b04:	f88080e7          	jalr	-120(ra) # 80000a88 <freerange>
-}
-    80000b08:	60a2                	ld	ra,8(sp)
-    80000b0a:	6402                	ld	s0,0(sp)
-    80000b0c:	0141                	addi	sp,sp,16
-    80000b0e:	8082                	ret
-
-0000000080000b10 <kalloc>:
-// Allocate one 4096-byte page of physical memory.
-// Returns a pointer that the kernel can use.
-// Returns 0 if the memory cannot be allocated.
-void *
-kalloc(void)
+    800004fa:	60e6                	ld	ra,88(sp)
+    800004fc:	6446                	ld	s0,80(sp)
+    800004fe:	64a6                	ld	s1,72(sp)
+    80000500:	6906                	ld	s2,64(sp)
+    80000502:	79e2                	ld	s3,56(sp)
+    80000504:	7a42                	ld	s4,48(sp)
+    80000506:	7aa2                	ld	s5,40(sp)
+    80000508:	7b02                	ld	s6,32(sp)
+    8000050a:	6be2                	ld	s7,24(sp)
+    8000050c:	6c42                	ld	s8,16(sp)
+    8000050e:	6ca2                	ld	s9,8(sp)
+    80000510:	6d02                	ld	s10,0(sp)
+    80000512:	6125                	addi	sp,sp,96
+    80000514:	8082                	ret
+
+0000000080000516 <kvminithart>:
+{
+    80000516:	1141                	addi	sp,sp,-16
+    80000518:	e422                	sd	s0,8(sp)
+    8000051a:	0800                	addi	s0,sp,16
+  w_satp(MAKE_SATP(kernel_pagetable));
+    8000051c:	00009797          	auipc	a5,0x9
+    80000520:	aec7b783          	ld	a5,-1300(a5) # 80009008 <kernel_pagetable>
+    80000524:	83b1                	srli	a5,a5,0xc
+    80000526:	577d                	li	a4,-1
+    80000528:	177e                	slli	a4,a4,0x3f
+    8000052a:	8fd9                	or	a5,a5,a4
+// supervisor address translation and protection;
+// holds the address of the page table.
+static inline void 
+w_satp(uint64 x)
 {
-    80000b10:	1101                	addi	sp,sp,-32
-    80000b12:	ec06                	sd	ra,24(sp)
-    80000b14:	e822                	sd	s0,16(sp)
-    80000b16:	e426                	sd	s1,8(sp)
-    80000b18:	1000                	addi	s0,sp,32
-  struct run *r;
-
-  acquire(&kmem.lock);
-    80000b1a:	00011497          	auipc	s1,0x11
-    80000b1e:	e1648493          	addi	s1,s1,-490 # 80011930 <kmem>
-    80000b22:	8526                	mv	a0,s1
-    80000b24:	00000097          	auipc	ra,0x0
-    80000b28:	0dc080e7          	jalr	220(ra) # 80000c00 <acquire>
-  r = kmem.freelist;
-    80000b2c:	6c84                	ld	s1,24(s1)
-  if(r)
-    80000b2e:	c885                	beqz	s1,80000b5e <kalloc+0x4e>
-    kmem.freelist = r->next;
-    80000b30:	609c                	ld	a5,0(s1)
-    80000b32:	00011517          	auipc	a0,0x11
-    80000b36:	dfe50513          	addi	a0,a0,-514 # 80011930 <kmem>
-    80000b3a:	ed1c                	sd	a5,24(a0)
-  release(&kmem.lock);
-    80000b3c:	00000097          	auipc	ra,0x0
-    80000b40:	178080e7          	jalr	376(ra) # 80000cb4 <release>
-
-  if(r)
-    memset((char*)r, 5, PGSIZE); // fill with junk
-    80000b44:	6605                	lui	a2,0x1
-    80000b46:	4595                	li	a1,5
-    80000b48:	8526                	mv	a0,s1
-    80000b4a:	00000097          	auipc	ra,0x0
-    80000b4e:	1b2080e7          	jalr	434(ra) # 80000cfc <memset>
-  return (void*)r;
-}
-    80000b52:	8526                	mv	a0,s1
-    80000b54:	60e2                	ld	ra,24(sp)
-    80000b56:	6442                	ld	s0,16(sp)
-    80000b58:	64a2                	ld	s1,8(sp)
-    80000b5a:	6105                	addi	sp,sp,32
-    80000b5c:	8082                	ret
-  release(&kmem.lock);
-    80000b5e:	00011517          	auipc	a0,0x11
-    80000b62:	dd250513          	addi	a0,a0,-558 # 80011930 <kmem>
-    80000b66:	00000097          	auipc	ra,0x0
-    80000b6a:	14e080e7          	jalr	334(ra) # 80000cb4 <release>
-  if(r)
-    80000b6e:	b7d5                	j	80000b52 <kalloc+0x42>
-
-0000000080000b70 <initlock>:
-#include "proc.h"
-#include "defs.h"
-
-void
-initlock(struct spinlock *lk, char *name)
+  asm volatile("csrw satp, %0" : : "r" (x));
+    8000052c:	18079073          	csrw	satp,a5
+// flush the TLB.
+static inline void
+sfence_vma()
 {
-    80000b70:	1141                	addi	sp,sp,-16
-    80000b72:	e422                	sd	s0,8(sp)
-    80000b74:	0800                	addi	s0,sp,16
-  lk->name = name;
-    80000b76:	e50c                	sd	a1,8(a0)
-  lk->locked = 0;
-    80000b78:	00052023          	sw	zero,0(a0)
-  lk->cpu = 0;
-    80000b7c:	00053823          	sd	zero,16(a0)
+  // the zero, zero means flush all TLB entries.
+  asm volatile("sfence.vma zero, zero");
+    80000530:	12000073          	sfence.vma
 }
-    80000b80:	6422                	ld	s0,8(sp)
-    80000b82:	0141                	addi	sp,sp,16
-    80000b84:	8082                	ret
+    80000534:	6422                	ld	s0,8(sp)
+    80000536:	0141                	addi	sp,sp,16
+    80000538:	8082                	ret
+
+000000008000053a <walk>:
+{
+    8000053a:	7139                	addi	sp,sp,-64
+    8000053c:	fc06                	sd	ra,56(sp)
+    8000053e:	f822                	sd	s0,48(sp)
+    80000540:	f426                	sd	s1,40(sp)
+    80000542:	f04a                	sd	s2,32(sp)
+    80000544:	ec4e                	sd	s3,24(sp)
+    80000546:	e852                	sd	s4,16(sp)
+    80000548:	e456                	sd	s5,8(sp)
+    8000054a:	e05a                	sd	s6,0(sp)
+    8000054c:	0080                	addi	s0,sp,64
+    8000054e:	84aa                	mv	s1,a0
+    80000550:	89ae                	mv	s3,a1
+    80000552:	8ab2                	mv	s5,a2
+  if(va >= MAXVA)
+    80000554:	57fd                	li	a5,-1
+    80000556:	83e9                	srli	a5,a5,0x1a
+    80000558:	4a79                	li	s4,30
+  for(int level = 2; level > 0; level--) {
+    8000055a:	4b31                	li	s6,12
+  if(va >= MAXVA)
+    8000055c:	04b7f263          	bgeu	a5,a1,800005a0 <walk+0x66>
+    panic("walk");
+    80000560:	00008517          	auipc	a0,0x8
+    80000564:	b2050513          	addi	a0,a0,-1248 # 80008080 <etext+0x80>
+    80000568:	00005097          	auipc	ra,0x5
+    8000056c:	788080e7          	jalr	1928(ra) # 80005cf0 <panic>
+      if(!alloc || (pagetable = (pde_t*)kalloc()) == 0)
+    80000570:	060a8663          	beqz	s5,800005dc <walk+0xa2>
+    80000574:	00000097          	auipc	ra,0x0
+    80000578:	ba6080e7          	jalr	-1114(ra) # 8000011a <kalloc>
+    8000057c:	84aa                	mv	s1,a0
+    8000057e:	c529                	beqz	a0,800005c8 <walk+0x8e>
+      memset(pagetable, 0, PGSIZE);
+    80000580:	6605                	lui	a2,0x1
+    80000582:	4581                	li	a1,0
+    80000584:	00000097          	auipc	ra,0x0
+    80000588:	c1a080e7          	jalr	-998(ra) # 8000019e <memset>
+      *pte = PA2PTE(pagetable) | PTE_V;
+    8000058c:	00c4d793          	srli	a5,s1,0xc
+    80000590:	07aa                	slli	a5,a5,0xa
+    80000592:	0017e793          	ori	a5,a5,1
+    80000596:	00f93023          	sd	a5,0(s2)
+  for(int level = 2; level > 0; level--) {
+    8000059a:	3a5d                	addiw	s4,s4,-9
+    8000059c:	036a0063          	beq	s4,s6,800005bc <walk+0x82>
+    pte_t *pte = &pagetable[PX(level, va)];
+    800005a0:	0149d933          	srl	s2,s3,s4
+    800005a4:	1ff97913          	andi	s2,s2,511
+    800005a8:	090e                	slli	s2,s2,0x3
+    800005aa:	9926                	add	s2,s2,s1
+    if(*pte & PTE_V) {
+    800005ac:	00093483          	ld	s1,0(s2)
+    800005b0:	0014f793          	andi	a5,s1,1
+    800005b4:	dfd5                	beqz	a5,80000570 <walk+0x36>
+      pagetable = (pagetable_t)PTE2PA(*pte);
+    800005b6:	80a9                	srli	s1,s1,0xa
+    800005b8:	04b2                	slli	s1,s1,0xc
+    800005ba:	b7c5                	j	8000059a <walk+0x60>
+  return &pagetable[PX(0, va)];
+    800005bc:	00c9d513          	srli	a0,s3,0xc
+    800005c0:	1ff57513          	andi	a0,a0,511
+    800005c4:	050e                	slli	a0,a0,0x3
+    800005c6:	9526                	add	a0,a0,s1
+}
+    800005c8:	70e2                	ld	ra,56(sp)
+    800005ca:	7442                	ld	s0,48(sp)
+    800005cc:	74a2                	ld	s1,40(sp)
+    800005ce:	7902                	ld	s2,32(sp)
+    800005d0:	69e2                	ld	s3,24(sp)
+    800005d2:	6a42                	ld	s4,16(sp)
+    800005d4:	6aa2                	ld	s5,8(sp)
+    800005d6:	6b02                	ld	s6,0(sp)
+    800005d8:	6121                	addi	sp,sp,64
+    800005da:	8082                	ret
+        return 0;
+    800005dc:	4501                	li	a0,0
+    800005de:	b7ed                	j	800005c8 <walk+0x8e>
 
-0000000080000b86 <holding>:
-// Interrupts must be off.
-int
-holding(struct spinlock *lk)
-{
-  int r;
-  r = (lk->locked && lk->cpu == mycpu());
-    80000b86:	411c                	lw	a5,0(a0)
-    80000b88:	e399                	bnez	a5,80000b8e <holding+0x8>
-    80000b8a:	4501                	li	a0,0
-  return r;
-}
-    80000b8c:	8082                	ret
-{
-    80000b8e:	1101                	addi	sp,sp,-32
-    80000b90:	ec06                	sd	ra,24(sp)
-    80000b92:	e822                	sd	s0,16(sp)
-    80000b94:	e426                	sd	s1,8(sp)
-    80000b96:	1000                	addi	s0,sp,32
-  r = (lk->locked && lk->cpu == mycpu());
-    80000b98:	6904                	ld	s1,16(a0)
-    80000b9a:	00001097          	auipc	ra,0x1
-    80000b9e:	e16080e7          	jalr	-490(ra) # 800019b0 <mycpu>
-    80000ba2:	40a48533          	sub	a0,s1,a0
-    80000ba6:	00153513          	seqz	a0,a0
-}
-    80000baa:	60e2                	ld	ra,24(sp)
-    80000bac:	6442                	ld	s0,16(sp)
-    80000bae:	64a2                	ld	s1,8(sp)
-    80000bb0:	6105                	addi	sp,sp,32
-    80000bb2:	8082                	ret
+00000000800005e0 <vmprint>:
 
-0000000080000bb4 <push_off>:
-// it takes two pop_off()s to undo two push_off()s.  Also, if interrupts
-// are initially off, then push_off, pop_off leaves them off.
+void vmprint(pagetable_t pagetable) {
+    800005e0:	1141                	addi	sp,sp,-16
+    800005e2:	e406                	sd	ra,8(sp)
+    800005e4:	e022                	sd	s0,0(sp)
+    800005e6:	0800                	addi	s0,sp,16
+  recursive_vmprint(pagetable, 0);
+    800005e8:	4581                	li	a1,0
+    800005ea:	00000097          	auipc	ra,0x0
+    800005ee:	e70080e7          	jalr	-400(ra) # 8000045a <recursive_vmprint>
+}
+    800005f2:	60a2                	ld	ra,8(sp)
+    800005f4:	6402                	ld	s0,0(sp)
+    800005f6:	0141                	addi	sp,sp,16
+    800005f8:	8082                	ret
 
-void
-push_off(void)
+00000000800005fa <walkaddr>:
+walkaddr(pagetable_t pagetable, uint64 va)
 {
-    80000bb4:	1101                	addi	sp,sp,-32
-    80000bb6:	ec06                	sd	ra,24(sp)
-    80000bb8:	e822                	sd	s0,16(sp)
-    80000bba:	e426                	sd	s1,8(sp)
-    80000bbc:	1000                	addi	s0,sp,32
-  asm volatile("csrr %0, sstatus" : "=r" (x) );
-    80000bbe:	100024f3          	csrr	s1,sstatus
-    80000bc2:	100027f3          	csrr	a5,sstatus
-  w_sstatus(r_sstatus() & ~SSTATUS_SIE);
-    80000bc6:	9bf5                	andi	a5,a5,-3
-  asm volatile("csrw sstatus, %0" : : "r" (x));
-    80000bc8:	10079073          	csrw	sstatus,a5
-  int old = intr_get();
-
-  intr_off();
-  if(mycpu()->noff == 0)
-    80000bcc:	00001097          	auipc	ra,0x1
-    80000bd0:	de4080e7          	jalr	-540(ra) # 800019b0 <mycpu>
-    80000bd4:	5d3c                	lw	a5,120(a0)
-    80000bd6:	cf89                	beqz	a5,80000bf0 <push_off+0x3c>
-    mycpu()->intena = old;
-  mycpu()->noff += 1;
-    80000bd8:	00001097          	auipc	ra,0x1
-    80000bdc:	dd8080e7          	jalr	-552(ra) # 800019b0 <mycpu>
-    80000be0:	5d3c                	lw	a5,120(a0)
-    80000be2:	2785                	addiw	a5,a5,1
-    80000be4:	dd3c                	sw	a5,120(a0)
-}
-    80000be6:	60e2                	ld	ra,24(sp)
-    80000be8:	6442                	ld	s0,16(sp)
-    80000bea:	64a2                	ld	s1,8(sp)
-    80000bec:	6105                	addi	sp,sp,32
-    80000bee:	8082                	ret
-    mycpu()->intena = old;
-    80000bf0:	00001097          	auipc	ra,0x1
-    80000bf4:	dc0080e7          	jalr	-576(ra) # 800019b0 <mycpu>
-  return (x & SSTATUS_SIE) != 0;
-    80000bf8:	8085                	srli	s1,s1,0x1
-    80000bfa:	8885                	andi	s1,s1,1
-    80000bfc:	dd64                	sw	s1,124(a0)
-    80000bfe:	bfe9                	j	80000bd8 <push_off+0x24>
-
-0000000080000c00 <acquire>:
-{
-    80000c00:	1101                	addi	sp,sp,-32
-    80000c02:	ec06                	sd	ra,24(sp)
-    80000c04:	e822                	sd	s0,16(sp)
-    80000c06:	e426                	sd	s1,8(sp)
-    80000c08:	1000                	addi	s0,sp,32
-    80000c0a:	84aa                	mv	s1,a0
-  push_off(); // disable interrupts to avoid deadlock.
-    80000c0c:	00000097          	auipc	ra,0x0
-    80000c10:	fa8080e7          	jalr	-88(ra) # 80000bb4 <push_off>
-  if(holding(lk))
-    80000c14:	8526                	mv	a0,s1
-    80000c16:	00000097          	auipc	ra,0x0
-    80000c1a:	f70080e7          	jalr	-144(ra) # 80000b86 <holding>
-  while(__sync_lock_test_and_set(&lk->locked, 1) != 0)
-    80000c1e:	4705                	li	a4,1
-  if(holding(lk))
-    80000c20:	e115                	bnez	a0,80000c44 <acquire+0x44>
-  while(__sync_lock_test_and_set(&lk->locked, 1) != 0)
-    80000c22:	87ba                	mv	a5,a4
-    80000c24:	0cf4a7af          	amoswap.w.aq	a5,a5,(s1)
-    80000c28:	2781                	sext.w	a5,a5
-    80000c2a:	ffe5                	bnez	a5,80000c22 <acquire+0x22>
-  __sync_synchronize();
-    80000c2c:	0ff0000f          	fence
-  lk->cpu = mycpu();
-    80000c30:	00001097          	auipc	ra,0x1
-    80000c34:	d80080e7          	jalr	-640(ra) # 800019b0 <mycpu>
-    80000c38:	e888                	sd	a0,16(s1)
-}
-    80000c3a:	60e2                	ld	ra,24(sp)
-    80000c3c:	6442                	ld	s0,16(sp)
-    80000c3e:	64a2                	ld	s1,8(sp)
-    80000c40:	6105                	addi	sp,sp,32
-    80000c42:	8082                	ret
-    panic("acquire");
-    80000c44:	00007517          	auipc	a0,0x7
-    80000c48:	42c50513          	addi	a0,a0,1068 # 80008070 <digits+0x30>
-    80000c4c:	00000097          	auipc	ra,0x0
-    80000c50:	8fa080e7          	jalr	-1798(ra) # 80000546 <panic>
-
-0000000080000c54 <pop_off>:
+  pte_t *pte;
+  uint64 pa;
 
-void
-pop_off(void)
-{
-    80000c54:	1141                	addi	sp,sp,-16
-    80000c56:	e406                	sd	ra,8(sp)
-    80000c58:	e022                	sd	s0,0(sp)
-    80000c5a:	0800                	addi	s0,sp,16
-  struct cpu *c = mycpu();
-    80000c5c:	00001097          	auipc	ra,0x1
-    80000c60:	d54080e7          	jalr	-684(ra) # 800019b0 <mycpu>
-  asm volatile("csrr %0, sstatus" : "=r" (x) );
-    80000c64:	100027f3          	csrr	a5,sstatus
-  return (x & SSTATUS_SIE) != 0;
-    80000c68:	8b89                	andi	a5,a5,2
-  if(intr_get())
-    80000c6a:	e78d                	bnez	a5,80000c94 <pop_off+0x40>
-    panic("pop_off - interruptible");
-  if(c->noff < 1)
-    80000c6c:	5d3c                	lw	a5,120(a0)
-    80000c6e:	02f05b63          	blez	a5,80000ca4 <pop_off+0x50>
-    panic("pop_off");
-  c->noff -= 1;
-    80000c72:	37fd                	addiw	a5,a5,-1
-    80000c74:	0007871b          	sext.w	a4,a5
-    80000c78:	dd3c                	sw	a5,120(a0)
-  if(c->noff == 0 && c->intena)
-    80000c7a:	eb09                	bnez	a4,80000c8c <pop_off+0x38>
-    80000c7c:	5d7c                	lw	a5,124(a0)
-    80000c7e:	c799                	beqz	a5,80000c8c <pop_off+0x38>
-  asm volatile("csrr %0, sstatus" : "=r" (x) );
-    80000c80:	100027f3          	csrr	a5,sstatus
-  w_sstatus(r_sstatus() | SSTATUS_SIE);
-    80000c84:	0027e793          	ori	a5,a5,2
-  asm volatile("csrw sstatus, %0" : : "r" (x));
-    80000c88:	10079073          	csrw	sstatus,a5
-    intr_on();
-}
-    80000c8c:	60a2                	ld	ra,8(sp)
-    80000c8e:	6402                	ld	s0,0(sp)
-    80000c90:	0141                	addi	sp,sp,16
-    80000c92:	8082                	ret
-    panic("pop_off - interruptible");
-    80000c94:	00007517          	auipc	a0,0x7
-    80000c98:	3e450513          	addi	a0,a0,996 # 80008078 <digits+0x38>
-    80000c9c:	00000097          	auipc	ra,0x0
-    80000ca0:	8aa080e7          	jalr	-1878(ra) # 80000546 <panic>
-    panic("pop_off");
-    80000ca4:	00007517          	auipc	a0,0x7
-    80000ca8:	3ec50513          	addi	a0,a0,1004 # 80008090 <digits+0x50>
-    80000cac:	00000097          	auipc	ra,0x0
-    80000cb0:	89a080e7          	jalr	-1894(ra) # 80000546 <panic>
-
-0000000080000cb4 <release>:
-{
-    80000cb4:	1101                	addi	sp,sp,-32
-    80000cb6:	ec06                	sd	ra,24(sp)
-    80000cb8:	e822                	sd	s0,16(sp)
-    80000cba:	e426                	sd	s1,8(sp)
-    80000cbc:	1000                	addi	s0,sp,32
-    80000cbe:	84aa                	mv	s1,a0
-  if(!holding(lk))
-    80000cc0:	00000097          	auipc	ra,0x0
-    80000cc4:	ec6080e7          	jalr	-314(ra) # 80000b86 <holding>
-    80000cc8:	c115                	beqz	a0,80000cec <release+0x38>
-  lk->cpu = 0;
-    80000cca:	0004b823          	sd	zero,16(s1)
-  __sync_synchronize();
-    80000cce:	0ff0000f          	fence
-  __sync_lock_release(&lk->locked);
-    80000cd2:	0f50000f          	fence	iorw,ow
-    80000cd6:	0804a02f          	amoswap.w	zero,zero,(s1)
-  pop_off();
-    80000cda:	00000097          	auipc	ra,0x0
-    80000cde:	f7a080e7          	jalr	-134(ra) # 80000c54 <pop_off>
+  if(va >= MAXVA)
+    800005fa:	57fd                	li	a5,-1
+    800005fc:	83e9                	srli	a5,a5,0x1a
+    800005fe:	00b7f463          	bgeu	a5,a1,80000606 <walkaddr+0xc>
+    return 0;
+    80000602:	4501                	li	a0,0
+    return 0;
+  if((*pte & PTE_U) == 0)
+    return 0;
+  pa = PTE2PA(*pte);
+  return pa;
 }
-    80000ce2:	60e2                	ld	ra,24(sp)
-    80000ce4:	6442                	ld	s0,16(sp)
-    80000ce6:	64a2                	ld	s1,8(sp)
-    80000ce8:	6105                	addi	sp,sp,32
-    80000cea:	8082                	ret
-    panic("release");
-    80000cec:	00007517          	auipc	a0,0x7
-    80000cf0:	3ac50513          	addi	a0,a0,940 # 80008098 <digits+0x58>
-    80000cf4:	00000097          	auipc	ra,0x0
-    80000cf8:	852080e7          	jalr	-1966(ra) # 80000546 <panic>
-
-0000000080000cfc <memset>:
-#include "types.h"
-
-void*
-memset(void *dst, int c, uint n)
+    80000604:	8082                	ret
 {
-    80000cfc:	1141                	addi	sp,sp,-16
-    80000cfe:	e422                	sd	s0,8(sp)
-    80000d00:	0800                	addi	s0,sp,16
-  char *cdst = (char *) dst;
-  int i;
-  for(i = 0; i < n; i++){
-    80000d02:	ca19                	beqz	a2,80000d18 <memset+0x1c>
-    80000d04:	87aa                	mv	a5,a0
-    80000d06:	1602                	slli	a2,a2,0x20
-    80000d08:	9201                	srli	a2,a2,0x20
-    80000d0a:	00a60733          	add	a4,a2,a0
-    cdst[i] = c;
-    80000d0e:	00b78023          	sb	a1,0(a5)
-  for(i = 0; i < n; i++){
-    80000d12:	0785                	addi	a5,a5,1
-    80000d14:	fee79de3          	bne	a5,a4,80000d0e <memset+0x12>
-  }
-  return dst;
+    80000606:	1141                	addi	sp,sp,-16
+    80000608:	e406                	sd	ra,8(sp)
+    8000060a:	e022                	sd	s0,0(sp)
+    8000060c:	0800                	addi	s0,sp,16
+  pte = walk(pagetable, va, 0);
+    8000060e:	4601                	li	a2,0
+    80000610:	00000097          	auipc	ra,0x0
+    80000614:	f2a080e7          	jalr	-214(ra) # 8000053a <walk>
+  if(pte == 0)
+    80000618:	c105                	beqz	a0,80000638 <walkaddr+0x3e>
+  if((*pte & PTE_V) == 0)
+    8000061a:	611c                	ld	a5,0(a0)
+  if((*pte & PTE_U) == 0)
+    8000061c:	0117f693          	andi	a3,a5,17
+    80000620:	4745                	li	a4,17
+    return 0;
+    80000622:	4501                	li	a0,0
+  if((*pte & PTE_U) == 0)
+    80000624:	00e68663          	beq	a3,a4,80000630 <walkaddr+0x36>
 }
-    80000d18:	6422                	ld	s0,8(sp)
-    80000d1a:	0141                	addi	sp,sp,16
-    80000d1c:	8082                	ret
-
-0000000080000d1e <memcmp>:
+    80000628:	60a2                	ld	ra,8(sp)
+    8000062a:	6402                	ld	s0,0(sp)
+    8000062c:	0141                	addi	sp,sp,16
+    8000062e:	8082                	ret
+  pa = PTE2PA(*pte);
+    80000630:	83a9                	srli	a5,a5,0xa
+    80000632:	00c79513          	slli	a0,a5,0xc
+  return pa;
+    80000636:	bfcd                	j	80000628 <walkaddr+0x2e>
+    return 0;
+    80000638:	4501                	li	a0,0
+    8000063a:	b7fd                	j	80000628 <walkaddr+0x2e>
 
+000000008000063c <mappages>:
+// physical addresses starting at pa. va and size might not
+// be page-aligned. Returns 0 on success, -1 if walk() couldn't
+// allocate a needed page-table page.
 int
-memcmp(const void *v1, const void *v2, uint n)
+mappages(pagetable_t pagetable, uint64 va, uint64 size, uint64 pa, int perm)
 {
-    80000d1e:	1141                	addi	sp,sp,-16
-    80000d20:	e422                	sd	s0,8(sp)
-    80000d22:	0800                	addi	s0,sp,16
-  const uchar *s1, *s2;
+    8000063c:	715d                	addi	sp,sp,-80
+    8000063e:	e486                	sd	ra,72(sp)
+    80000640:	e0a2                	sd	s0,64(sp)
+    80000642:	fc26                	sd	s1,56(sp)
+    80000644:	f84a                	sd	s2,48(sp)
+    80000646:	f44e                	sd	s3,40(sp)
+    80000648:	f052                	sd	s4,32(sp)
+    8000064a:	ec56                	sd	s5,24(sp)
+    8000064c:	e85a                	sd	s6,16(sp)
+    8000064e:	e45e                	sd	s7,8(sp)
+    80000650:	0880                	addi	s0,sp,80
+  uint64 a, last;
+  pte_t *pte;
 
-  s1 = v1;
-  s2 = v2;
-  while(n-- > 0){
-    80000d24:	ca05                	beqz	a2,80000d54 <memcmp+0x36>
-    80000d26:	fff6069b          	addiw	a3,a2,-1
-    80000d2a:	1682                	slli	a3,a3,0x20
-    80000d2c:	9281                	srli	a3,a3,0x20
-    80000d2e:	0685                	addi	a3,a3,1
-    80000d30:	96aa                	add	a3,a3,a0
-    if(*s1 != *s2)
-    80000d32:	00054783          	lbu	a5,0(a0)
-    80000d36:	0005c703          	lbu	a4,0(a1)
-    80000d3a:	00e79863          	bne	a5,a4,80000d4a <memcmp+0x2c>
-      return *s1 - *s2;
-    s1++, s2++;
-    80000d3e:	0505                	addi	a0,a0,1
-    80000d40:	0585                	addi	a1,a1,1
-  while(n-- > 0){
-    80000d42:	fed518e3          	bne	a0,a3,80000d32 <memcmp+0x14>
+  if(size == 0)
+    80000652:	c639                	beqz	a2,800006a0 <mappages+0x64>
+    80000654:	8aaa                	mv	s5,a0
+    80000656:	8b3a                	mv	s6,a4
+    panic("mappages: size");
+  
+  a = PGROUNDDOWN(va);
+    80000658:	777d                	lui	a4,0xfffff
+    8000065a:	00e5f7b3          	and	a5,a1,a4
+  last = PGROUNDDOWN(va + size - 1);
+    8000065e:	fff58993          	addi	s3,a1,-1
+    80000662:	99b2                	add	s3,s3,a2
+    80000664:	00e9f9b3          	and	s3,s3,a4
+  a = PGROUNDDOWN(va);
+    80000668:	893e                	mv	s2,a5
+    8000066a:	40f68a33          	sub	s4,a3,a5
+    if(*pte & PTE_V)
+      panic("mappages: remap");
+    *pte = PA2PTE(pa) | perm | PTE_V;
+    if(a == last)
+      break;
+    a += PGSIZE;
+    8000066e:	6b85                	lui	s7,0x1
+    80000670:	012a04b3          	add	s1,s4,s2
+    if((pte = walk(pagetable, a, 1)) == 0)
+    80000674:	4605                	li	a2,1
+    80000676:	85ca                	mv	a1,s2
+    80000678:	8556                	mv	a0,s5
+    8000067a:	00000097          	auipc	ra,0x0
+    8000067e:	ec0080e7          	jalr	-320(ra) # 8000053a <walk>
+    80000682:	cd1d                	beqz	a0,800006c0 <mappages+0x84>
+    if(*pte & PTE_V)
+    80000684:	611c                	ld	a5,0(a0)
+    80000686:	8b85                	andi	a5,a5,1
+    80000688:	e785                	bnez	a5,800006b0 <mappages+0x74>
+    *pte = PA2PTE(pa) | perm | PTE_V;
+    8000068a:	80b1                	srli	s1,s1,0xc
+    8000068c:	04aa                	slli	s1,s1,0xa
+    8000068e:	0164e4b3          	or	s1,s1,s6
+    80000692:	0014e493          	ori	s1,s1,1
+    80000696:	e104                	sd	s1,0(a0)
+    if(a == last)
+    80000698:	05390063          	beq	s2,s3,800006d8 <mappages+0x9c>
+    a += PGSIZE;
+    8000069c:	995e                	add	s2,s2,s7
+    if((pte = walk(pagetable, a, 1)) == 0)
+    8000069e:	bfc9                	j	80000670 <mappages+0x34>
+    panic("mappages: size");
+    800006a0:	00008517          	auipc	a0,0x8
+    800006a4:	9e850513          	addi	a0,a0,-1560 # 80008088 <etext+0x88>
+    800006a8:	00005097          	auipc	ra,0x5
+    800006ac:	648080e7          	jalr	1608(ra) # 80005cf0 <panic>
+      panic("mappages: remap");
+    800006b0:	00008517          	auipc	a0,0x8
+    800006b4:	9e850513          	addi	a0,a0,-1560 # 80008098 <etext+0x98>
+    800006b8:	00005097          	auipc	ra,0x5
+    800006bc:	638080e7          	jalr	1592(ra) # 80005cf0 <panic>
+      return -1;
+    800006c0:	557d                	li	a0,-1
+    pa += PGSIZE;
   }
-
   return 0;
-    80000d46:	4501                	li	a0,0
-    80000d48:	a019                	j	80000d4e <memcmp+0x30>
-      return *s1 - *s2;
-    80000d4a:	40e7853b          	subw	a0,a5,a4
 }
-    80000d4e:	6422                	ld	s0,8(sp)
-    80000d50:	0141                	addi	sp,sp,16
-    80000d52:	8082                	ret
+    800006c2:	60a6                	ld	ra,72(sp)
+    800006c4:	6406                	ld	s0,64(sp)
+    800006c6:	74e2                	ld	s1,56(sp)
+    800006c8:	7942                	ld	s2,48(sp)
+    800006ca:	79a2                	ld	s3,40(sp)
+    800006cc:	7a02                	ld	s4,32(sp)
+    800006ce:	6ae2                	ld	s5,24(sp)
+    800006d0:	6b42                	ld	s6,16(sp)
+    800006d2:	6ba2                	ld	s7,8(sp)
+    800006d4:	6161                	addi	sp,sp,80
+    800006d6:	8082                	ret
   return 0;
-    80000d54:	4501                	li	a0,0
-    80000d56:	bfe5                	j	80000d4e <memcmp+0x30>
+    800006d8:	4501                	li	a0,0
+    800006da:	b7e5                	j	800006c2 <mappages+0x86>
 
-0000000080000d58 <memmove>:
+00000000800006dc <kvmmap>:
+{
+    800006dc:	1141                	addi	sp,sp,-16
+    800006de:	e406                	sd	ra,8(sp)
+    800006e0:	e022                	sd	s0,0(sp)
+    800006e2:	0800                	addi	s0,sp,16
+    800006e4:	87b6                	mv	a5,a3
+  if(mappages(kpgtbl, va, sz, pa, perm) != 0)
+    800006e6:	86b2                	mv	a3,a2
+    800006e8:	863e                	mv	a2,a5
+    800006ea:	00000097          	auipc	ra,0x0
+    800006ee:	f52080e7          	jalr	-174(ra) # 8000063c <mappages>
+    800006f2:	e509                	bnez	a0,800006fc <kvmmap+0x20>
+}
+    800006f4:	60a2                	ld	ra,8(sp)
+    800006f6:	6402                	ld	s0,0(sp)
+    800006f8:	0141                	addi	sp,sp,16
+    800006fa:	8082                	ret
+    panic("kvmmap");
+    800006fc:	00008517          	auipc	a0,0x8
+    80000700:	9ac50513          	addi	a0,a0,-1620 # 800080a8 <etext+0xa8>
+    80000704:	00005097          	auipc	ra,0x5
+    80000708:	5ec080e7          	jalr	1516(ra) # 80005cf0 <panic>
+
+000000008000070c <kvmmake>:
+{
+    8000070c:	1101                	addi	sp,sp,-32
+    8000070e:	ec06                	sd	ra,24(sp)
+    80000710:	e822                	sd	s0,16(sp)
+    80000712:	e426                	sd	s1,8(sp)
+    80000714:	e04a                	sd	s2,0(sp)
+    80000716:	1000                	addi	s0,sp,32
+  kpgtbl = (pagetable_t) kalloc();
+    80000718:	00000097          	auipc	ra,0x0
+    8000071c:	a02080e7          	jalr	-1534(ra) # 8000011a <kalloc>
+    80000720:	84aa                	mv	s1,a0
+  memset(kpgtbl, 0, PGSIZE);
+    80000722:	6605                	lui	a2,0x1
+    80000724:	4581                	li	a1,0
+    80000726:	00000097          	auipc	ra,0x0
+    8000072a:	a78080e7          	jalr	-1416(ra) # 8000019e <memset>
+  kvmmap(kpgtbl, UART0, UART0, PGSIZE, PTE_R | PTE_W);
+    8000072e:	4719                	li	a4,6
+    80000730:	6685                	lui	a3,0x1
+    80000732:	10000637          	lui	a2,0x10000
+    80000736:	100005b7          	lui	a1,0x10000
+    8000073a:	8526                	mv	a0,s1
+    8000073c:	00000097          	auipc	ra,0x0
+    80000740:	fa0080e7          	jalr	-96(ra) # 800006dc <kvmmap>
+  kvmmap(kpgtbl, VIRTIO0, VIRTIO0, PGSIZE, PTE_R | PTE_W);
+    80000744:	4719                	li	a4,6
+    80000746:	6685                	lui	a3,0x1
+    80000748:	10001637          	lui	a2,0x10001
+    8000074c:	100015b7          	lui	a1,0x10001
+    80000750:	8526                	mv	a0,s1
+    80000752:	00000097          	auipc	ra,0x0
+    80000756:	f8a080e7          	jalr	-118(ra) # 800006dc <kvmmap>
+  kvmmap(kpgtbl, PLIC, PLIC, 0x400000, PTE_R | PTE_W);
+    8000075a:	4719                	li	a4,6
+    8000075c:	004006b7          	lui	a3,0x400
+    80000760:	0c000637          	lui	a2,0xc000
+    80000764:	0c0005b7          	lui	a1,0xc000
+    80000768:	8526                	mv	a0,s1
+    8000076a:	00000097          	auipc	ra,0x0
+    8000076e:	f72080e7          	jalr	-142(ra) # 800006dc <kvmmap>
+  kvmmap(kpgtbl, KERNBASE, KERNBASE, (uint64)etext-KERNBASE, PTE_R | PTE_X);
+    80000772:	00008917          	auipc	s2,0x8
+    80000776:	88e90913          	addi	s2,s2,-1906 # 80008000 <etext>
+    8000077a:	4729                	li	a4,10
+    8000077c:	80008697          	auipc	a3,0x80008
+    80000780:	88468693          	addi	a3,a3,-1916 # 8000 <_entry-0x7fff8000>
+    80000784:	4605                	li	a2,1
+    80000786:	067e                	slli	a2,a2,0x1f
+    80000788:	85b2                	mv	a1,a2
+    8000078a:	8526                	mv	a0,s1
+    8000078c:	00000097          	auipc	ra,0x0
+    80000790:	f50080e7          	jalr	-176(ra) # 800006dc <kvmmap>
+  kvmmap(kpgtbl, (uint64)etext, (uint64)etext, PHYSTOP-(uint64)etext, PTE_R | PTE_W);
+    80000794:	4719                	li	a4,6
+    80000796:	46c5                	li	a3,17
+    80000798:	06ee                	slli	a3,a3,0x1b
+    8000079a:	412686b3          	sub	a3,a3,s2
+    8000079e:	864a                	mv	a2,s2
+    800007a0:	85ca                	mv	a1,s2
+    800007a2:	8526                	mv	a0,s1
+    800007a4:	00000097          	auipc	ra,0x0
+    800007a8:	f38080e7          	jalr	-200(ra) # 800006dc <kvmmap>
+  kvmmap(kpgtbl, TRAMPOLINE, (uint64)trampoline, PGSIZE, PTE_R | PTE_X);
+    800007ac:	4729                	li	a4,10
+    800007ae:	6685                	lui	a3,0x1
+    800007b0:	00007617          	auipc	a2,0x7
+    800007b4:	85060613          	addi	a2,a2,-1968 # 80007000 <_trampoline>
+    800007b8:	040005b7          	lui	a1,0x4000
+    800007bc:	15fd                	addi	a1,a1,-1
+    800007be:	05b2                	slli	a1,a1,0xc
+    800007c0:	8526                	mv	a0,s1
+    800007c2:	00000097          	auipc	ra,0x0
+    800007c6:	f1a080e7          	jalr	-230(ra) # 800006dc <kvmmap>
+  proc_mapstacks(kpgtbl);
+    800007ca:	8526                	mv	a0,s1
+    800007cc:	00000097          	auipc	ra,0x0
+    800007d0:	600080e7          	jalr	1536(ra) # 80000dcc <proc_mapstacks>
+}
+    800007d4:	8526                	mv	a0,s1
+    800007d6:	60e2                	ld	ra,24(sp)
+    800007d8:	6442                	ld	s0,16(sp)
+    800007da:	64a2                	ld	s1,8(sp)
+    800007dc:	6902                	ld	s2,0(sp)
+    800007de:	6105                	addi	sp,sp,32
+    800007e0:	8082                	ret
+
+00000000800007e2 <kvminit>:
+{
+    800007e2:	1141                	addi	sp,sp,-16
+    800007e4:	e406                	sd	ra,8(sp)
+    800007e6:	e022                	sd	s0,0(sp)
+    800007e8:	0800                	addi	s0,sp,16
+  kernel_pagetable = kvmmake();
+    800007ea:	00000097          	auipc	ra,0x0
+    800007ee:	f22080e7          	jalr	-222(ra) # 8000070c <kvmmake>
+    800007f2:	00009797          	auipc	a5,0x9
+    800007f6:	80a7bb23          	sd	a0,-2026(a5) # 80009008 <kernel_pagetable>
+}
+    800007fa:	60a2                	ld	ra,8(sp)
+    800007fc:	6402                	ld	s0,0(sp)
+    800007fe:	0141                	addi	sp,sp,16
+    80000800:	8082                	ret
 
-void*
-memmove(void *dst, const void *src, uint n)
+0000000080000802 <uvmunmap>:
+// Remove npages of mappings starting from va. va must be
+// page-aligned. The mappings must exist.
+// Optionally free the physical memory.
+void
+uvmunmap(pagetable_t pagetable, uint64 va, uint64 npages, int do_free)
 {
-    80000d58:	1141                	addi	sp,sp,-16
-    80000d5a:	e422                	sd	s0,8(sp)
-    80000d5c:	0800                	addi	s0,sp,16
-  const char *s;
-  char *d;
-
-  s = src;
-  d = dst;
-  if(s < d && s + n > d){
-    80000d5e:	02a5e563          	bltu	a1,a0,80000d88 <memmove+0x30>
-    s += n;
-    d += n;
-    while(n-- > 0)
-      *--d = *--s;
-  } else
-    while(n-- > 0)
-    80000d62:	fff6069b          	addiw	a3,a2,-1
-    80000d66:	ce11                	beqz	a2,80000d82 <memmove+0x2a>
-    80000d68:	1682                	slli	a3,a3,0x20
-    80000d6a:	9281                	srli	a3,a3,0x20
-    80000d6c:	0685                	addi	a3,a3,1
-    80000d6e:	96ae                	add	a3,a3,a1
-    80000d70:	87aa                	mv	a5,a0
-      *d++ = *s++;
-    80000d72:	0585                	addi	a1,a1,1
-    80000d74:	0785                	addi	a5,a5,1
-    80000d76:	fff5c703          	lbu	a4,-1(a1)
-    80000d7a:	fee78fa3          	sb	a4,-1(a5)
-    while(n-- > 0)
-    80000d7e:	fed59ae3          	bne	a1,a3,80000d72 <memmove+0x1a>
-
-  return dst;
-}
-    80000d82:	6422                	ld	s0,8(sp)
-    80000d84:	0141                	addi	sp,sp,16
-    80000d86:	8082                	ret
-  if(s < d && s + n > d){
-    80000d88:	02061713          	slli	a4,a2,0x20
-    80000d8c:	9301                	srli	a4,a4,0x20
-    80000d8e:	00e587b3          	add	a5,a1,a4
-    80000d92:	fcf578e3          	bgeu	a0,a5,80000d62 <memmove+0xa>
-    d += n;
-    80000d96:	972a                	add	a4,a4,a0
-    while(n-- > 0)
-    80000d98:	fff6069b          	addiw	a3,a2,-1
-    80000d9c:	d27d                	beqz	a2,80000d82 <memmove+0x2a>
-    80000d9e:	02069613          	slli	a2,a3,0x20
-    80000da2:	9201                	srli	a2,a2,0x20
-    80000da4:	fff64613          	not	a2,a2
-    80000da8:	963e                	add	a2,a2,a5
-      *--d = *--s;
-    80000daa:	17fd                	addi	a5,a5,-1
-    80000dac:	177d                	addi	a4,a4,-1
-    80000dae:	0007c683          	lbu	a3,0(a5)
-    80000db2:	00d70023          	sb	a3,0(a4) # fffffffffffff000 <end+0xffffffff7ffd9000>
-    while(n-- > 0)
-    80000db6:	fef61ae3          	bne	a2,a5,80000daa <memmove+0x52>
-    80000dba:	b7e1                	j	80000d82 <memmove+0x2a>
-
-0000000080000dbc <memcpy>:
-
-// memcpy exists to placate GCC.  Use memmove.
-void*
-memcpy(void *dst, const void *src, uint n)
-{
-    80000dbc:	1141                	addi	sp,sp,-16
-    80000dbe:	e406                	sd	ra,8(sp)
-    80000dc0:	e022                	sd	s0,0(sp)
-    80000dc2:	0800                	addi	s0,sp,16
-  return memmove(dst, src, n);
-    80000dc4:	00000097          	auipc	ra,0x0
-    80000dc8:	f94080e7          	jalr	-108(ra) # 80000d58 <memmove>
-}
-    80000dcc:	60a2                	ld	ra,8(sp)
-    80000dce:	6402                	ld	s0,0(sp)
-    80000dd0:	0141                	addi	sp,sp,16
-    80000dd2:	8082                	ret
-
-0000000080000dd4 <strncmp>:
-
-int
-strncmp(const char *p, const char *q, uint n)
-{
-    80000dd4:	1141                	addi	sp,sp,-16
-    80000dd6:	e422                	sd	s0,8(sp)
-    80000dd8:	0800                	addi	s0,sp,16
-  while(n > 0 && *p && *p == *q)
-    80000dda:	ce11                	beqz	a2,80000df6 <strncmp+0x22>
-    80000ddc:	00054783          	lbu	a5,0(a0)
-    80000de0:	cf89                	beqz	a5,80000dfa <strncmp+0x26>
-    80000de2:	0005c703          	lbu	a4,0(a1)
-    80000de6:	00f71a63          	bne	a4,a5,80000dfa <strncmp+0x26>
-    n--, p++, q++;
-    80000dea:	367d                	addiw	a2,a2,-1
-    80000dec:	0505                	addi	a0,a0,1
-    80000dee:	0585                	addi	a1,a1,1
-  while(n > 0 && *p && *p == *q)
-    80000df0:	f675                	bnez	a2,80000ddc <strncmp+0x8>
-  if(n == 0)
-    return 0;
-    80000df2:	4501                	li	a0,0
-    80000df4:	a809                	j	80000e06 <strncmp+0x32>
-    80000df6:	4501                	li	a0,0
-    80000df8:	a039                	j	80000e06 <strncmp+0x32>
-  if(n == 0)
-    80000dfa:	ca09                	beqz	a2,80000e0c <strncmp+0x38>
-  return (uchar)*p - (uchar)*q;
-    80000dfc:	00054503          	lbu	a0,0(a0)
-    80000e00:	0005c783          	lbu	a5,0(a1)
-    80000e04:	9d1d                	subw	a0,a0,a5
-}
-    80000e06:	6422                	ld	s0,8(sp)
-    80000e08:	0141                	addi	sp,sp,16
-    80000e0a:	8082                	ret
-    return 0;
-    80000e0c:	4501                	li	a0,0
-    80000e0e:	bfe5                	j	80000e06 <strncmp+0x32>
-
-0000000080000e10 <strncpy>:
-
-char*
-strncpy(char *s, const char *t, int n)
-{
-    80000e10:	1141                	addi	sp,sp,-16
-    80000e12:	e422                	sd	s0,8(sp)
-    80000e14:	0800                	addi	s0,sp,16
-  char *os;
-
-  os = s;
-  while(n-- > 0 && (*s++ = *t++) != 0)
-    80000e16:	872a                	mv	a4,a0
-    80000e18:	8832                	mv	a6,a2
-    80000e1a:	367d                	addiw	a2,a2,-1
-    80000e1c:	01005963          	blez	a6,80000e2e <strncpy+0x1e>
-    80000e20:	0705                	addi	a4,a4,1
-    80000e22:	0005c783          	lbu	a5,0(a1)
-    80000e26:	fef70fa3          	sb	a5,-1(a4)
-    80000e2a:	0585                	addi	a1,a1,1
-    80000e2c:	f7f5                	bnez	a5,80000e18 <strncpy+0x8>
-    ;
-  while(n-- > 0)
-    80000e2e:	86ba                	mv	a3,a4
-    80000e30:	00c05c63          	blez	a2,80000e48 <strncpy+0x38>
-    *s++ = 0;
-    80000e34:	0685                	addi	a3,a3,1
-    80000e36:	fe068fa3          	sb	zero,-1(a3)
-  while(n-- > 0)
-    80000e3a:	40d707bb          	subw	a5,a4,a3
-    80000e3e:	37fd                	addiw	a5,a5,-1
-    80000e40:	010787bb          	addw	a5,a5,a6
-    80000e44:	fef048e3          	bgtz	a5,80000e34 <strncpy+0x24>
-  return os;
-}
-    80000e48:	6422                	ld	s0,8(sp)
-    80000e4a:	0141                	addi	sp,sp,16
-    80000e4c:	8082                	ret
-
-0000000080000e4e <safestrcpy>:
-
-// Like strncpy but guaranteed to NUL-terminate.
-char*
-safestrcpy(char *s, const char *t, int n)
-{
-    80000e4e:	1141                	addi	sp,sp,-16
-    80000e50:	e422                	sd	s0,8(sp)
-    80000e52:	0800                	addi	s0,sp,16
-  char *os;
-
-  os = s;
-  if(n <= 0)
-    80000e54:	02c05363          	blez	a2,80000e7a <safestrcpy+0x2c>
-    80000e58:	fff6069b          	addiw	a3,a2,-1
-    80000e5c:	1682                	slli	a3,a3,0x20
-    80000e5e:	9281                	srli	a3,a3,0x20
-    80000e60:	96ae                	add	a3,a3,a1
-    80000e62:	87aa                	mv	a5,a0
-    return os;
-  while(--n > 0 && (*s++ = *t++) != 0)
-    80000e64:	00d58963          	beq	a1,a3,80000e76 <safestrcpy+0x28>
-    80000e68:	0585                	addi	a1,a1,1
-    80000e6a:	0785                	addi	a5,a5,1
-    80000e6c:	fff5c703          	lbu	a4,-1(a1)
-    80000e70:	fee78fa3          	sb	a4,-1(a5)
-    80000e74:	fb65                	bnez	a4,80000e64 <safestrcpy+0x16>
-    ;
-  *s = 0;
-    80000e76:	00078023          	sb	zero,0(a5)
-  return os;
-}
-    80000e7a:	6422                	ld	s0,8(sp)
-    80000e7c:	0141                	addi	sp,sp,16
-    80000e7e:	8082                	ret
-
-0000000080000e80 <strlen>:
-
-int
-strlen(const char *s)
-{
-    80000e80:	1141                	addi	sp,sp,-16
-    80000e82:	e422                	sd	s0,8(sp)
-    80000e84:	0800                	addi	s0,sp,16
-  int n;
-
-  for(n = 0; s[n]; n++)
-    80000e86:	00054783          	lbu	a5,0(a0)
-    80000e8a:	cf91                	beqz	a5,80000ea6 <strlen+0x26>
-    80000e8c:	0505                	addi	a0,a0,1
-    80000e8e:	87aa                	mv	a5,a0
-    80000e90:	4685                	li	a3,1
-    80000e92:	9e89                	subw	a3,a3,a0
-    80000e94:	00f6853b          	addw	a0,a3,a5
-    80000e98:	0785                	addi	a5,a5,1
-    80000e9a:	fff7c703          	lbu	a4,-1(a5)
-    80000e9e:	fb7d                	bnez	a4,80000e94 <strlen+0x14>
-    ;
-  return n;
-}
-    80000ea0:	6422                	ld	s0,8(sp)
-    80000ea2:	0141                	addi	sp,sp,16
-    80000ea4:	8082                	ret
-  for(n = 0; s[n]; n++)
-    80000ea6:	4501                	li	a0,0
-    80000ea8:	bfe5                	j	80000ea0 <strlen+0x20>
-
-0000000080000eaa <main>:
-volatile static int started = 0;
-
-// start() jumps here in supervisor mode on all CPUs.
-void
-main()
-{
-    80000eaa:	1141                	addi	sp,sp,-16
-    80000eac:	e406                	sd	ra,8(sp)
-    80000eae:	e022                	sd	s0,0(sp)
-    80000eb0:	0800                	addi	s0,sp,16
-  if(cpuid() == 0){
-    80000eb2:	00001097          	auipc	ra,0x1
-    80000eb6:	aee080e7          	jalr	-1298(ra) # 800019a0 <cpuid>
-    virtio_disk_init(); // emulated hard disk
-    userinit();      // first user process
-    __sync_synchronize();
-    started = 1;
-  } else {
-    while(started == 0)
-    80000eba:	00008717          	auipc	a4,0x8
-    80000ebe:	15270713          	addi	a4,a4,338 # 8000900c <started>
-  if(cpuid() == 0){
-    80000ec2:	c139                	beqz	a0,80000f08 <main+0x5e>
-    while(started == 0)
-    80000ec4:	431c                	lw	a5,0(a4)
-    80000ec6:	2781                	sext.w	a5,a5
-    80000ec8:	dff5                	beqz	a5,80000ec4 <main+0x1a>
-      ;
-    __sync_synchronize();
-    80000eca:	0ff0000f          	fence
-    printf("hart %d starting\n", cpuid());
-    80000ece:	00001097          	auipc	ra,0x1
-    80000ed2:	ad2080e7          	jalr	-1326(ra) # 800019a0 <cpuid>
-    80000ed6:	85aa                	mv	a1,a0
-    80000ed8:	00007517          	auipc	a0,0x7
-    80000edc:	1e050513          	addi	a0,a0,480 # 800080b8 <digits+0x78>
-    80000ee0:	fffff097          	auipc	ra,0xfffff
-    80000ee4:	6b0080e7          	jalr	1712(ra) # 80000590 <printf>
-    kvminithart();    // turn on paging
-    80000ee8:	00000097          	auipc	ra,0x0
-    80000eec:	0d8080e7          	jalr	216(ra) # 80000fc0 <kvminithart>
-    trapinithart();   // install kernel trap vector
-    80000ef0:	00001097          	auipc	ra,0x1
-    80000ef4:	738080e7          	jalr	1848(ra) # 80002628 <trapinithart>
-    plicinithart();   // ask PLIC for device interrupts
-    80000ef8:	00005097          	auipc	ra,0x5
-    80000efc:	cc8080e7          	jalr	-824(ra) # 80005bc0 <plicinithart>
-  }
-
-  scheduler();        
-    80000f00:	00001097          	auipc	ra,0x1
-    80000f04:	004080e7          	jalr	4(ra) # 80001f04 <scheduler>
-    consoleinit();
-    80000f08:	fffff097          	auipc	ra,0xfffff
-    80000f0c:	54e080e7          	jalr	1358(ra) # 80000456 <consoleinit>
-    printfinit();
-    80000f10:	00000097          	auipc	ra,0x0
-    80000f14:	860080e7          	jalr	-1952(ra) # 80000770 <printfinit>
-    printf("\n");
-    80000f18:	00007517          	auipc	a0,0x7
-    80000f1c:	1b050513          	addi	a0,a0,432 # 800080c8 <digits+0x88>
-    80000f20:	fffff097          	auipc	ra,0xfffff
-    80000f24:	670080e7          	jalr	1648(ra) # 80000590 <printf>
-    printf("xv6 kernel is booting\n");
-    80000f28:	00007517          	auipc	a0,0x7
-    80000f2c:	17850513          	addi	a0,a0,376 # 800080a0 <digits+0x60>
-    80000f30:	fffff097          	auipc	ra,0xfffff
-    80000f34:	660080e7          	jalr	1632(ra) # 80000590 <printf>
-    printf("\n");
-    80000f38:	00007517          	auipc	a0,0x7
-    80000f3c:	19050513          	addi	a0,a0,400 # 800080c8 <digits+0x88>
-    80000f40:	fffff097          	auipc	ra,0xfffff
-    80000f44:	650080e7          	jalr	1616(ra) # 80000590 <printf>
-    kinit();         // physical page allocator
-    80000f48:	00000097          	auipc	ra,0x0
-    80000f4c:	b8c080e7          	jalr	-1140(ra) # 80000ad4 <kinit>
-    kvminit();       // create kernel page table
-    80000f50:	00000097          	auipc	ra,0x0
-    80000f54:	2a0080e7          	jalr	672(ra) # 800011f0 <kvminit>
-    kvminithart();   // turn on paging
-    80000f58:	00000097          	auipc	ra,0x0
-    80000f5c:	068080e7          	jalr	104(ra) # 80000fc0 <kvminithart>
-    procinit();      // process table
-    80000f60:	00001097          	auipc	ra,0x1
-    80000f64:	970080e7          	jalr	-1680(ra) # 800018d0 <procinit>
-    trapinit();      // trap vectors
-    80000f68:	00001097          	auipc	ra,0x1
-    80000f6c:	698080e7          	jalr	1688(ra) # 80002600 <trapinit>
-    trapinithart();  // install kernel trap vector
-    80000f70:	00001097          	auipc	ra,0x1
-    80000f74:	6b8080e7          	jalr	1720(ra) # 80002628 <trapinithart>
-    plicinit();      // set up interrupt controller
-    80000f78:	00005097          	auipc	ra,0x5
-    80000f7c:	c32080e7          	jalr	-974(ra) # 80005baa <plicinit>
-    plicinithart();  // ask PLIC for device interrupts
-    80000f80:	00005097          	auipc	ra,0x5
-    80000f84:	c40080e7          	jalr	-960(ra) # 80005bc0 <plicinithart>
-    binit();         // buffer cache
-    80000f88:	00002097          	auipc	ra,0x2
-    80000f8c:	de2080e7          	jalr	-542(ra) # 80002d6a <binit>
-    iinit();         // inode cache
-    80000f90:	00002097          	auipc	ra,0x2
-    80000f94:	470080e7          	jalr	1136(ra) # 80003400 <iinit>
-    fileinit();      // file table
-    80000f98:	00003097          	auipc	ra,0x3
-    80000f9c:	412080e7          	jalr	1042(ra) # 800043aa <fileinit>
-    virtio_disk_init(); // emulated hard disk
-    80000fa0:	00005097          	auipc	ra,0x5
-    80000fa4:	d26080e7          	jalr	-730(ra) # 80005cc6 <virtio_disk_init>
-    userinit();      // first user process
-    80000fa8:	00001097          	auipc	ra,0x1
-    80000fac:	cee080e7          	jalr	-786(ra) # 80001c96 <userinit>
-    __sync_synchronize();
-    80000fb0:	0ff0000f          	fence
-    started = 1;
-    80000fb4:	4785                	li	a5,1
-    80000fb6:	00008717          	auipc	a4,0x8
-    80000fba:	04f72b23          	sw	a5,86(a4) # 8000900c <started>
-    80000fbe:	b789                	j	80000f00 <main+0x56>
-
-0000000080000fc0 <kvminithart>:
-
-// Switch h/w page table register to the kernel's page table,
-// and enable paging.
-void
-kvminithart()
-{
-    80000fc0:	1141                	addi	sp,sp,-16
-    80000fc2:	e422                	sd	s0,8(sp)
-    80000fc4:	0800                	addi	s0,sp,16
-  w_satp(MAKE_SATP(kernel_pagetable));
-    80000fc6:	00008797          	auipc	a5,0x8
-    80000fca:	04a7b783          	ld	a5,74(a5) # 80009010 <kernel_pagetable>
-    80000fce:	83b1                	srli	a5,a5,0xc
-    80000fd0:	577d                	li	a4,-1
-    80000fd2:	177e                	slli	a4,a4,0x3f
-    80000fd4:	8fd9                	or	a5,a5,a4
-  asm volatile("csrw satp, %0" : : "r" (x));
-    80000fd6:	18079073          	csrw	satp,a5
-// flush the TLB.
-static inline void
-sfence_vma()
-{
-  // the zero, zero means flush all TLB entries.
-  asm volatile("sfence.vma zero, zero");
-    80000fda:	12000073          	sfence.vma
-  sfence_vma();
-}
-    80000fde:	6422                	ld	s0,8(sp)
-    80000fe0:	0141                	addi	sp,sp,16
-    80000fe2:	8082                	ret
-
-0000000080000fe4 <walk>:
-//   21..29 -- 9 bits of level-1 index.
-//   12..20 -- 9 bits of level-0 index.
-//    0..11 -- 12 bits of byte offset within the page.
-pte_t *
-walk(pagetable_t pagetable, uint64 va, int alloc)
-{
-    80000fe4:	7139                	addi	sp,sp,-64
-    80000fe6:	fc06                	sd	ra,56(sp)
-    80000fe8:	f822                	sd	s0,48(sp)
-    80000fea:	f426                	sd	s1,40(sp)
-    80000fec:	f04a                	sd	s2,32(sp)
-    80000fee:	ec4e                	sd	s3,24(sp)
-    80000ff0:	e852                	sd	s4,16(sp)
-    80000ff2:	e456                	sd	s5,8(sp)
-    80000ff4:	e05a                	sd	s6,0(sp)
-    80000ff6:	0080                	addi	s0,sp,64
-    80000ff8:	84aa                	mv	s1,a0
-    80000ffa:	89ae                	mv	s3,a1
-    80000ffc:	8ab2                	mv	s5,a2
-  if(va >= MAXVA)
-    80000ffe:	57fd                	li	a5,-1
-    80001000:	83e9                	srli	a5,a5,0x1a
-    80001002:	4a79                	li	s4,30
-    panic("walk");
-
-  for(int level = 2; level > 0; level--) {
-    80001004:	4b31                	li	s6,12
-  if(va >= MAXVA)
-    80001006:	04b7f263          	bgeu	a5,a1,8000104a <walk+0x66>
-    panic("walk");
-    8000100a:	00007517          	auipc	a0,0x7
-    8000100e:	0c650513          	addi	a0,a0,198 # 800080d0 <digits+0x90>
-    80001012:	fffff097          	auipc	ra,0xfffff
-    80001016:	534080e7          	jalr	1332(ra) # 80000546 <panic>
-    pte_t *pte = &pagetable[PX(level, va)];
-    if(*pte & PTE_V) {
-      pagetable = (pagetable_t)PTE2PA(*pte);
-    } else {
-      if(!alloc || (pagetable = (pde_t*)kalloc()) == 0)
-    8000101a:	060a8663          	beqz	s5,80001086 <walk+0xa2>
-    8000101e:	00000097          	auipc	ra,0x0
-    80001022:	af2080e7          	jalr	-1294(ra) # 80000b10 <kalloc>
-    80001026:	84aa                	mv	s1,a0
-    80001028:	c529                	beqz	a0,80001072 <walk+0x8e>
-        return 0;
-      memset(pagetable, 0, PGSIZE);
-    8000102a:	6605                	lui	a2,0x1
-    8000102c:	4581                	li	a1,0
-    8000102e:	00000097          	auipc	ra,0x0
-    80001032:	cce080e7          	jalr	-818(ra) # 80000cfc <memset>
-      *pte = PA2PTE(pagetable) | PTE_V;
-    80001036:	00c4d793          	srli	a5,s1,0xc
-    8000103a:	07aa                	slli	a5,a5,0xa
-    8000103c:	0017e793          	ori	a5,a5,1
-    80001040:	00f93023          	sd	a5,0(s2)
-  for(int level = 2; level > 0; level--) {
-    80001044:	3a5d                	addiw	s4,s4,-9
-    80001046:	036a0063          	beq	s4,s6,80001066 <walk+0x82>
-    pte_t *pte = &pagetable[PX(level, va)];
-    8000104a:	0149d933          	srl	s2,s3,s4
-    8000104e:	1ff97913          	andi	s2,s2,511
-    80001052:	090e                	slli	s2,s2,0x3
-    80001054:	9926                	add	s2,s2,s1
-    if(*pte & PTE_V) {
-    80001056:	00093483          	ld	s1,0(s2)
-    8000105a:	0014f793          	andi	a5,s1,1
-    8000105e:	dfd5                	beqz	a5,8000101a <walk+0x36>
-      pagetable = (pagetable_t)PTE2PA(*pte);
-    80001060:	80a9                	srli	s1,s1,0xa
-    80001062:	04b2                	slli	s1,s1,0xc
-    80001064:	b7c5                	j	80001044 <walk+0x60>
-    }
-  }
-  return &pagetable[PX(0, va)];
-    80001066:	00c9d513          	srli	a0,s3,0xc
-    8000106a:	1ff57513          	andi	a0,a0,511
-    8000106e:	050e                	slli	a0,a0,0x3
-    80001070:	9526                	add	a0,a0,s1
-}
-    80001072:	70e2                	ld	ra,56(sp)
-    80001074:	7442                	ld	s0,48(sp)
-    80001076:	74a2                	ld	s1,40(sp)
-    80001078:	7902                	ld	s2,32(sp)
-    8000107a:	69e2                	ld	s3,24(sp)
-    8000107c:	6a42                	ld	s4,16(sp)
-    8000107e:	6aa2                	ld	s5,8(sp)
-    80001080:	6b02                	ld	s6,0(sp)
-    80001082:	6121                	addi	sp,sp,64
-    80001084:	8082                	ret
-        return 0;
-    80001086:	4501                	li	a0,0
-    80001088:	b7ed                	j	80001072 <walk+0x8e>
-
-000000008000108a <walkaddr>:
-walkaddr(pagetable_t pagetable, uint64 va)
-{
-  pte_t *pte;
-  uint64 pa;
-
-  if(va >= MAXVA)
-    8000108a:	57fd                	li	a5,-1
-    8000108c:	83e9                	srli	a5,a5,0x1a
-    8000108e:	00b7f463          	bgeu	a5,a1,80001096 <walkaddr+0xc>
-    return 0;
-    80001092:	4501                	li	a0,0
-    return 0;
-  if((*pte & PTE_U) == 0)
-    return 0;
-  pa = PTE2PA(*pte);
-  return pa;
-}
-    80001094:	8082                	ret
-{
-    80001096:	1141                	addi	sp,sp,-16
-    80001098:	e406                	sd	ra,8(sp)
-    8000109a:	e022                	sd	s0,0(sp)
-    8000109c:	0800                	addi	s0,sp,16
-  pte = walk(pagetable, va, 0);
-    8000109e:	4601                	li	a2,0
-    800010a0:	00000097          	auipc	ra,0x0
-    800010a4:	f44080e7          	jalr	-188(ra) # 80000fe4 <walk>
-  if(pte == 0)
-    800010a8:	c105                	beqz	a0,800010c8 <walkaddr+0x3e>
-  if((*pte & PTE_V) == 0)
-    800010aa:	611c                	ld	a5,0(a0)
-  if((*pte & PTE_U) == 0)
-    800010ac:	0117f693          	andi	a3,a5,17
-    800010b0:	4745                	li	a4,17
-    return 0;
-    800010b2:	4501                	li	a0,0
-  if((*pte & PTE_U) == 0)
-    800010b4:	00e68663          	beq	a3,a4,800010c0 <walkaddr+0x36>
-}
-    800010b8:	60a2                	ld	ra,8(sp)
-    800010ba:	6402                	ld	s0,0(sp)
-    800010bc:	0141                	addi	sp,sp,16
-    800010be:	8082                	ret
-  pa = PTE2PA(*pte);
-    800010c0:	83a9                	srli	a5,a5,0xa
-    800010c2:	00c79513          	slli	a0,a5,0xc
-  return pa;
-    800010c6:	bfcd                	j	800010b8 <walkaddr+0x2e>
-    return 0;
-    800010c8:	4501                	li	a0,0
-    800010ca:	b7fd                	j	800010b8 <walkaddr+0x2e>
-
-00000000800010cc <kvmpa>:
-// a physical address. only needed for
-// addresses on the stack.
-// assumes va is page aligned.
-uint64
-kvmpa(uint64 va)
-{
-    800010cc:	1101                	addi	sp,sp,-32
-    800010ce:	ec06                	sd	ra,24(sp)
-    800010d0:	e822                	sd	s0,16(sp)
-    800010d2:	e426                	sd	s1,8(sp)
-    800010d4:	1000                	addi	s0,sp,32
-    800010d6:	85aa                	mv	a1,a0
-  uint64 off = va % PGSIZE;
-    800010d8:	1552                	slli	a0,a0,0x34
-    800010da:	03455493          	srli	s1,a0,0x34
-  pte_t *pte;
-  uint64 pa;
-  
-  pte = walk(kernel_pagetable, va, 0);
-    800010de:	4601                	li	a2,0
-    800010e0:	00008517          	auipc	a0,0x8
-    800010e4:	f3053503          	ld	a0,-208(a0) # 80009010 <kernel_pagetable>
-    800010e8:	00000097          	auipc	ra,0x0
-    800010ec:	efc080e7          	jalr	-260(ra) # 80000fe4 <walk>
-  if(pte == 0)
-    800010f0:	cd09                	beqz	a0,8000110a <kvmpa+0x3e>
-    panic("kvmpa");
-  if((*pte & PTE_V) == 0)
-    800010f2:	6108                	ld	a0,0(a0)
-    800010f4:	00157793          	andi	a5,a0,1
-    800010f8:	c38d                	beqz	a5,8000111a <kvmpa+0x4e>
-    panic("kvmpa");
-  pa = PTE2PA(*pte);
-    800010fa:	8129                	srli	a0,a0,0xa
-    800010fc:	0532                	slli	a0,a0,0xc
-  return pa+off;
-}
-    800010fe:	9526                	add	a0,a0,s1
-    80001100:	60e2                	ld	ra,24(sp)
-    80001102:	6442                	ld	s0,16(sp)
-    80001104:	64a2                	ld	s1,8(sp)
-    80001106:	6105                	addi	sp,sp,32
-    80001108:	8082                	ret
-    panic("kvmpa");
-    8000110a:	00007517          	auipc	a0,0x7
-    8000110e:	fce50513          	addi	a0,a0,-50 # 800080d8 <digits+0x98>
-    80001112:	fffff097          	auipc	ra,0xfffff
-    80001116:	434080e7          	jalr	1076(ra) # 80000546 <panic>
-    panic("kvmpa");
-    8000111a:	00007517          	auipc	a0,0x7
-    8000111e:	fbe50513          	addi	a0,a0,-66 # 800080d8 <digits+0x98>
-    80001122:	fffff097          	auipc	ra,0xfffff
-    80001126:	424080e7          	jalr	1060(ra) # 80000546 <panic>
-
-000000008000112a <mappages>:
-// physical addresses starting at pa. va and size might not
-// be page-aligned. Returns 0 on success, -1 if walk() couldn't
-// allocate a needed page-table page.
-int
-mappages(pagetable_t pagetable, uint64 va, uint64 size, uint64 pa, int perm)
-{
-    8000112a:	715d                	addi	sp,sp,-80
-    8000112c:	e486                	sd	ra,72(sp)
-    8000112e:	e0a2                	sd	s0,64(sp)
-    80001130:	fc26                	sd	s1,56(sp)
-    80001132:	f84a                	sd	s2,48(sp)
-    80001134:	f44e                	sd	s3,40(sp)
-    80001136:	f052                	sd	s4,32(sp)
-    80001138:	ec56                	sd	s5,24(sp)
-    8000113a:	e85a                	sd	s6,16(sp)
-    8000113c:	e45e                	sd	s7,8(sp)
-    8000113e:	0880                	addi	s0,sp,80
-    80001140:	8aaa                	mv	s5,a0
-    80001142:	8b3a                	mv	s6,a4
-  uint64 a, last;
-  pte_t *pte;
-
-  a = PGROUNDDOWN(va);
-    80001144:	777d                	lui	a4,0xfffff
-    80001146:	00e5f7b3          	and	a5,a1,a4
-  last = PGROUNDDOWN(va + size - 1);
-    8000114a:	fff60993          	addi	s3,a2,-1 # fff <_entry-0x7ffff001>
-    8000114e:	99ae                	add	s3,s3,a1
-    80001150:	00e9f9b3          	and	s3,s3,a4
-  a = PGROUNDDOWN(va);
-    80001154:	893e                	mv	s2,a5
-    80001156:	40f68a33          	sub	s4,a3,a5
-    if(*pte & PTE_V)
-      panic("remap");
-    *pte = PA2PTE(pa) | perm | PTE_V;
-    if(a == last)
-      break;
-    a += PGSIZE;
-    8000115a:	6b85                	lui	s7,0x1
-    8000115c:	012a04b3          	add	s1,s4,s2
-    if((pte = walk(pagetable, a, 1)) == 0)
-    80001160:	4605                	li	a2,1
-    80001162:	85ca                	mv	a1,s2
-    80001164:	8556                	mv	a0,s5
-    80001166:	00000097          	auipc	ra,0x0
-    8000116a:	e7e080e7          	jalr	-386(ra) # 80000fe4 <walk>
-    8000116e:	c51d                	beqz	a0,8000119c <mappages+0x72>
-    if(*pte & PTE_V)
-    80001170:	611c                	ld	a5,0(a0)
-    80001172:	8b85                	andi	a5,a5,1
-    80001174:	ef81                	bnez	a5,8000118c <mappages+0x62>
-    *pte = PA2PTE(pa) | perm | PTE_V;
-    80001176:	80b1                	srli	s1,s1,0xc
-    80001178:	04aa                	slli	s1,s1,0xa
-    8000117a:	0164e4b3          	or	s1,s1,s6
-    8000117e:	0014e493          	ori	s1,s1,1
-    80001182:	e104                	sd	s1,0(a0)
-    if(a == last)
-    80001184:	03390863          	beq	s2,s3,800011b4 <mappages+0x8a>
-    a += PGSIZE;
-    80001188:	995e                	add	s2,s2,s7
-    if((pte = walk(pagetable, a, 1)) == 0)
-    8000118a:	bfc9                	j	8000115c <mappages+0x32>
-      panic("remap");
-    8000118c:	00007517          	auipc	a0,0x7
-    80001190:	f5450513          	addi	a0,a0,-172 # 800080e0 <digits+0xa0>
-    80001194:	fffff097          	auipc	ra,0xfffff
-    80001198:	3b2080e7          	jalr	946(ra) # 80000546 <panic>
-      return -1;
-    8000119c:	557d                	li	a0,-1
-    pa += PGSIZE;
-  }
-  return 0;
-}
-    8000119e:	60a6                	ld	ra,72(sp)
-    800011a0:	6406                	ld	s0,64(sp)
-    800011a2:	74e2                	ld	s1,56(sp)
-    800011a4:	7942                	ld	s2,48(sp)
-    800011a6:	79a2                	ld	s3,40(sp)
-    800011a8:	7a02                	ld	s4,32(sp)
-    800011aa:	6ae2                	ld	s5,24(sp)
-    800011ac:	6b42                	ld	s6,16(sp)
-    800011ae:	6ba2                	ld	s7,8(sp)
-    800011b0:	6161                	addi	sp,sp,80
-    800011b2:	8082                	ret
-  return 0;
-    800011b4:	4501                	li	a0,0
-    800011b6:	b7e5                	j	8000119e <mappages+0x74>
-
-00000000800011b8 <kvmmap>:
-{
-    800011b8:	1141                	addi	sp,sp,-16
-    800011ba:	e406                	sd	ra,8(sp)
-    800011bc:	e022                	sd	s0,0(sp)
-    800011be:	0800                	addi	s0,sp,16
-    800011c0:	8736                	mv	a4,a3
-  if(mappages(kernel_pagetable, va, sz, pa, perm) != 0)
-    800011c2:	86ae                	mv	a3,a1
-    800011c4:	85aa                	mv	a1,a0
-    800011c6:	00008517          	auipc	a0,0x8
-    800011ca:	e4a53503          	ld	a0,-438(a0) # 80009010 <kernel_pagetable>
-    800011ce:	00000097          	auipc	ra,0x0
-    800011d2:	f5c080e7          	jalr	-164(ra) # 8000112a <mappages>
-    800011d6:	e509                	bnez	a0,800011e0 <kvmmap+0x28>
-}
-    800011d8:	60a2                	ld	ra,8(sp)
-    800011da:	6402                	ld	s0,0(sp)
-    800011dc:	0141                	addi	sp,sp,16
-    800011de:	8082                	ret
-    panic("kvmmap");
-    800011e0:	00007517          	auipc	a0,0x7
-    800011e4:	f0850513          	addi	a0,a0,-248 # 800080e8 <digits+0xa8>
-    800011e8:	fffff097          	auipc	ra,0xfffff
-    800011ec:	35e080e7          	jalr	862(ra) # 80000546 <panic>
-
-00000000800011f0 <kvminit>:
-{
-    800011f0:	1101                	addi	sp,sp,-32
-    800011f2:	ec06                	sd	ra,24(sp)
-    800011f4:	e822                	sd	s0,16(sp)
-    800011f6:	e426                	sd	s1,8(sp)
-    800011f8:	1000                	addi	s0,sp,32
-  kernel_pagetable = (pagetable_t) kalloc();
-    800011fa:	00000097          	auipc	ra,0x0
-    800011fe:	916080e7          	jalr	-1770(ra) # 80000b10 <kalloc>
-    80001202:	00008717          	auipc	a4,0x8
-    80001206:	e0a73723          	sd	a0,-498(a4) # 80009010 <kernel_pagetable>
-  memset(kernel_pagetable, 0, PGSIZE);
-    8000120a:	6605                	lui	a2,0x1
-    8000120c:	4581                	li	a1,0
-    8000120e:	00000097          	auipc	ra,0x0
-    80001212:	aee080e7          	jalr	-1298(ra) # 80000cfc <memset>
-  kvmmap(UART0, UART0, PGSIZE, PTE_R | PTE_W);
-    80001216:	4699                	li	a3,6
-    80001218:	6605                	lui	a2,0x1
-    8000121a:	100005b7          	lui	a1,0x10000
-    8000121e:	10000537          	lui	a0,0x10000
-    80001222:	00000097          	auipc	ra,0x0
-    80001226:	f96080e7          	jalr	-106(ra) # 800011b8 <kvmmap>
-  kvmmap(VIRTIO0, VIRTIO0, PGSIZE, PTE_R | PTE_W);
-    8000122a:	4699                	li	a3,6
-    8000122c:	6605                	lui	a2,0x1
-    8000122e:	100015b7          	lui	a1,0x10001
-    80001232:	10001537          	lui	a0,0x10001
-    80001236:	00000097          	auipc	ra,0x0
-    8000123a:	f82080e7          	jalr	-126(ra) # 800011b8 <kvmmap>
-  kvmmap(CLINT, CLINT, 0x10000, PTE_R | PTE_W);
-    8000123e:	4699                	li	a3,6
-    80001240:	6641                	lui	a2,0x10
-    80001242:	020005b7          	lui	a1,0x2000
-    80001246:	02000537          	lui	a0,0x2000
-    8000124a:	00000097          	auipc	ra,0x0
-    8000124e:	f6e080e7          	jalr	-146(ra) # 800011b8 <kvmmap>
-  kvmmap(PLIC, PLIC, 0x400000, PTE_R | PTE_W);
-    80001252:	4699                	li	a3,6
-    80001254:	00400637          	lui	a2,0x400
-    80001258:	0c0005b7          	lui	a1,0xc000
-    8000125c:	0c000537          	lui	a0,0xc000
-    80001260:	00000097          	auipc	ra,0x0
-    80001264:	f58080e7          	jalr	-168(ra) # 800011b8 <kvmmap>
-  kvmmap(KERNBASE, KERNBASE, (uint64)etext-KERNBASE, PTE_R | PTE_X);
-    80001268:	00007497          	auipc	s1,0x7
-    8000126c:	d9848493          	addi	s1,s1,-616 # 80008000 <etext>
-    80001270:	46a9                	li	a3,10
-    80001272:	80007617          	auipc	a2,0x80007
-    80001276:	d8e60613          	addi	a2,a2,-626 # 8000 <_entry-0x7fff8000>
-    8000127a:	4585                	li	a1,1
-    8000127c:	05fe                	slli	a1,a1,0x1f
-    8000127e:	852e                	mv	a0,a1
-    80001280:	00000097          	auipc	ra,0x0
-    80001284:	f38080e7          	jalr	-200(ra) # 800011b8 <kvmmap>
-  kvmmap((uint64)etext, (uint64)etext, PHYSTOP-(uint64)etext, PTE_R | PTE_W);
-    80001288:	4699                	li	a3,6
-    8000128a:	4645                	li	a2,17
-    8000128c:	066e                	slli	a2,a2,0x1b
-    8000128e:	8e05                	sub	a2,a2,s1
-    80001290:	85a6                	mv	a1,s1
-    80001292:	8526                	mv	a0,s1
-    80001294:	00000097          	auipc	ra,0x0
-    80001298:	f24080e7          	jalr	-220(ra) # 800011b8 <kvmmap>
-  kvmmap(TRAMPOLINE, (uint64)trampoline, PGSIZE, PTE_R | PTE_X);
-    8000129c:	46a9                	li	a3,10
-    8000129e:	6605                	lui	a2,0x1
-    800012a0:	00006597          	auipc	a1,0x6
-    800012a4:	d6058593          	addi	a1,a1,-672 # 80007000 <_trampoline>
-    800012a8:	04000537          	lui	a0,0x4000
-    800012ac:	157d                	addi	a0,a0,-1
-    800012ae:	0532                	slli	a0,a0,0xc
-    800012b0:	00000097          	auipc	ra,0x0
-    800012b4:	f08080e7          	jalr	-248(ra) # 800011b8 <kvmmap>
-}
-    800012b8:	60e2                	ld	ra,24(sp)
-    800012ba:	6442                	ld	s0,16(sp)
-    800012bc:	64a2                	ld	s1,8(sp)
-    800012be:	6105                	addi	sp,sp,32
-    800012c0:	8082                	ret
-
-00000000800012c2 <uvmunmap>:
-// Remove npages of mappings starting from va. va must be
-// page-aligned. The mappings must exist.
-// Optionally free the physical memory.
-void
-uvmunmap(pagetable_t pagetable, uint64 va, uint64 npages, int do_free)
-{
-    800012c2:	715d                	addi	sp,sp,-80
-    800012c4:	e486                	sd	ra,72(sp)
-    800012c6:	e0a2                	sd	s0,64(sp)
-    800012c8:	fc26                	sd	s1,56(sp)
-    800012ca:	f84a                	sd	s2,48(sp)
-    800012cc:	f44e                	sd	s3,40(sp)
-    800012ce:	f052                	sd	s4,32(sp)
-    800012d0:	ec56                	sd	s5,24(sp)
-    800012d2:	e85a                	sd	s6,16(sp)
-    800012d4:	e45e                	sd	s7,8(sp)
-    800012d6:	0880                	addi	s0,sp,80
-  uint64 a;
-  pte_t *pte;
+    80000802:	715d                	addi	sp,sp,-80
+    80000804:	e486                	sd	ra,72(sp)
+    80000806:	e0a2                	sd	s0,64(sp)
+    80000808:	fc26                	sd	s1,56(sp)
+    8000080a:	f84a                	sd	s2,48(sp)
+    8000080c:	f44e                	sd	s3,40(sp)
+    8000080e:	f052                	sd	s4,32(sp)
+    80000810:	ec56                	sd	s5,24(sp)
+    80000812:	e85a                	sd	s6,16(sp)
+    80000814:	e45e                	sd	s7,8(sp)
+    80000816:	0880                	addi	s0,sp,80
+  uint64 a;
+  pte_t *pte;
 
   if((va % PGSIZE) != 0)
-    800012d8:	03459793          	slli	a5,a1,0x34
-    800012dc:	e795                	bnez	a5,80001308 <uvmunmap+0x46>
-    800012de:	8a2a                	mv	s4,a0
-    800012e0:	892e                	mv	s2,a1
-    800012e2:	8ab6                	mv	s5,a3
+    80000818:	03459793          	slli	a5,a1,0x34
+    8000081c:	e795                	bnez	a5,80000848 <uvmunmap+0x46>
+    8000081e:	8a2a                	mv	s4,a0
+    80000820:	892e                	mv	s2,a1
+    80000822:	8ab6                	mv	s5,a3
     panic("uvmunmap: not aligned");
 
   for(a = va; a < va + npages*PGSIZE; a += PGSIZE){
-    800012e4:	0632                	slli	a2,a2,0xc
-    800012e6:	00b609b3          	add	s3,a2,a1
+    80000824:	0632                	slli	a2,a2,0xc
+    80000826:	00b609b3          	add	s3,a2,a1
     if((pte = walk(pagetable, a, 0)) == 0)
       panic("uvmunmap: walk");
     if((*pte & PTE_V) == 0)
       panic("uvmunmap: not mapped");
     if(PTE_FLAGS(*pte) == PTE_V)
-    800012ea:	4b85                	li	s7,1
+    8000082a:	4b85                	li	s7,1
   for(a = va; a < va + npages*PGSIZE; a += PGSIZE){
-    800012ec:	6b05                	lui	s6,0x1
-    800012ee:	0735e263          	bltu	a1,s3,80001352 <uvmunmap+0x90>
+    8000082c:	6b05                	lui	s6,0x1
+    8000082e:	0735e263          	bltu	a1,s3,80000892 <uvmunmap+0x90>
       uint64 pa = PTE2PA(*pte);
       kfree((void*)pa);
     }
     *pte = 0;
   }
 }
-    800012f2:	60a6                	ld	ra,72(sp)
-    800012f4:	6406                	ld	s0,64(sp)
-    800012f6:	74e2                	ld	s1,56(sp)
-    800012f8:	7942                	ld	s2,48(sp)
-    800012fa:	79a2                	ld	s3,40(sp)
-    800012fc:	7a02                	ld	s4,32(sp)
-    800012fe:	6ae2                	ld	s5,24(sp)
-    80001300:	6b42                	ld	s6,16(sp)
-    80001302:	6ba2                	ld	s7,8(sp)
-    80001304:	6161                	addi	sp,sp,80
-    80001306:	8082                	ret
+    80000832:	60a6                	ld	ra,72(sp)
+    80000834:	6406                	ld	s0,64(sp)
+    80000836:	74e2                	ld	s1,56(sp)
+    80000838:	7942                	ld	s2,48(sp)
+    8000083a:	79a2                	ld	s3,40(sp)
+    8000083c:	7a02                	ld	s4,32(sp)
+    8000083e:	6ae2                	ld	s5,24(sp)
+    80000840:	6b42                	ld	s6,16(sp)
+    80000842:	6ba2                	ld	s7,8(sp)
+    80000844:	6161                	addi	sp,sp,80
+    80000846:	8082                	ret
     panic("uvmunmap: not aligned");
-    80001308:	00007517          	auipc	a0,0x7
-    8000130c:	de850513          	addi	a0,a0,-536 # 800080f0 <digits+0xb0>
-    80001310:	fffff097          	auipc	ra,0xfffff
-    80001314:	236080e7          	jalr	566(ra) # 80000546 <panic>
+    80000848:	00008517          	auipc	a0,0x8
+    8000084c:	86850513          	addi	a0,a0,-1944 # 800080b0 <etext+0xb0>
+    80000850:	00005097          	auipc	ra,0x5
+    80000854:	4a0080e7          	jalr	1184(ra) # 80005cf0 <panic>
       panic("uvmunmap: walk");
-    80001318:	00007517          	auipc	a0,0x7
-    8000131c:	df050513          	addi	a0,a0,-528 # 80008108 <digits+0xc8>
-    80001320:	fffff097          	auipc	ra,0xfffff
-    80001324:	226080e7          	jalr	550(ra) # 80000546 <panic>
+    80000858:	00008517          	auipc	a0,0x8
+    8000085c:	87050513          	addi	a0,a0,-1936 # 800080c8 <etext+0xc8>
+    80000860:	00005097          	auipc	ra,0x5
+    80000864:	490080e7          	jalr	1168(ra) # 80005cf0 <panic>
       panic("uvmunmap: not mapped");
-    80001328:	00007517          	auipc	a0,0x7
-    8000132c:	df050513          	addi	a0,a0,-528 # 80008118 <digits+0xd8>
-    80001330:	fffff097          	auipc	ra,0xfffff
-    80001334:	216080e7          	jalr	534(ra) # 80000546 <panic>
+    80000868:	00008517          	auipc	a0,0x8
+    8000086c:	87050513          	addi	a0,a0,-1936 # 800080d8 <etext+0xd8>
+    80000870:	00005097          	auipc	ra,0x5
+    80000874:	480080e7          	jalr	1152(ra) # 80005cf0 <panic>
       panic("uvmunmap: not a leaf");
-    80001338:	00007517          	auipc	a0,0x7
-    8000133c:	df850513          	addi	a0,a0,-520 # 80008130 <digits+0xf0>
-    80001340:	fffff097          	auipc	ra,0xfffff
-    80001344:	206080e7          	jalr	518(ra) # 80000546 <panic>
+    80000878:	00008517          	auipc	a0,0x8
+    8000087c:	87850513          	addi	a0,a0,-1928 # 800080f0 <etext+0xf0>
+    80000880:	00005097          	auipc	ra,0x5
+    80000884:	470080e7          	jalr	1136(ra) # 80005cf0 <panic>
     *pte = 0;
-    80001348:	0004b023          	sd	zero,0(s1)
+    80000888:	0004b023          	sd	zero,0(s1)
   for(a = va; a < va + npages*PGSIZE; a += PGSIZE){
-    8000134c:	995a                	add	s2,s2,s6
-    8000134e:	fb3972e3          	bgeu	s2,s3,800012f2 <uvmunmap+0x30>
+    8000088c:	995a                	add	s2,s2,s6
+    8000088e:	fb3972e3          	bgeu	s2,s3,80000832 <uvmunmap+0x30>
     if((pte = walk(pagetable, a, 0)) == 0)
-    80001352:	4601                	li	a2,0
-    80001354:	85ca                	mv	a1,s2
-    80001356:	8552                	mv	a0,s4
-    80001358:	00000097          	auipc	ra,0x0
-    8000135c:	c8c080e7          	jalr	-884(ra) # 80000fe4 <walk>
-    80001360:	84aa                	mv	s1,a0
-    80001362:	d95d                	beqz	a0,80001318 <uvmunmap+0x56>
+    80000892:	4601                	li	a2,0
+    80000894:	85ca                	mv	a1,s2
+    80000896:	8552                	mv	a0,s4
+    80000898:	00000097          	auipc	ra,0x0
+    8000089c:	ca2080e7          	jalr	-862(ra) # 8000053a <walk>
+    800008a0:	84aa                	mv	s1,a0
+    800008a2:	d95d                	beqz	a0,80000858 <uvmunmap+0x56>
     if((*pte & PTE_V) == 0)
-    80001364:	6108                	ld	a0,0(a0)
-    80001366:	00157793          	andi	a5,a0,1
-    8000136a:	dfdd                	beqz	a5,80001328 <uvmunmap+0x66>
+    800008a4:	6108                	ld	a0,0(a0)
+    800008a6:	00157793          	andi	a5,a0,1
+    800008aa:	dfdd                	beqz	a5,80000868 <uvmunmap+0x66>
     if(PTE_FLAGS(*pte) == PTE_V)
-    8000136c:	3ff57793          	andi	a5,a0,1023
-    80001370:	fd7784e3          	beq	a5,s7,80001338 <uvmunmap+0x76>
+    800008ac:	3ff57793          	andi	a5,a0,1023
+    800008b0:	fd7784e3          	beq	a5,s7,80000878 <uvmunmap+0x76>
     if(do_free){
-    80001374:	fc0a8ae3          	beqz	s5,80001348 <uvmunmap+0x86>
+    800008b4:	fc0a8ae3          	beqz	s5,80000888 <uvmunmap+0x86>
       uint64 pa = PTE2PA(*pte);
-    80001378:	8129                	srli	a0,a0,0xa
+    800008b8:	8129                	srli	a0,a0,0xa
       kfree((void*)pa);
-    8000137a:	0532                	slli	a0,a0,0xc
-    8000137c:	fffff097          	auipc	ra,0xfffff
-    80001380:	696080e7          	jalr	1686(ra) # 80000a12 <kfree>
-    80001384:	b7d1                	j	80001348 <uvmunmap+0x86>
+    800008ba:	0532                	slli	a0,a0,0xc
+    800008bc:	fffff097          	auipc	ra,0xfffff
+    800008c0:	760080e7          	jalr	1888(ra) # 8000001c <kfree>
+    800008c4:	b7d1                	j	80000888 <uvmunmap+0x86>
 
-0000000080001386 <uvmcreate>:
+00000000800008c6 <uvmcreate>:
 
 // create an empty user page table.
 // returns 0 if out of memory.
 pagetable_t
 uvmcreate()
 {
-    80001386:	1101                	addi	sp,sp,-32
-    80001388:	ec06                	sd	ra,24(sp)
-    8000138a:	e822                	sd	s0,16(sp)
-    8000138c:	e426                	sd	s1,8(sp)
-    8000138e:	1000                	addi	s0,sp,32
+    800008c6:	1101                	addi	sp,sp,-32
+    800008c8:	ec06                	sd	ra,24(sp)
+    800008ca:	e822                	sd	s0,16(sp)
+    800008cc:	e426                	sd	s1,8(sp)
+    800008ce:	1000                	addi	s0,sp,32
   pagetable_t pagetable;
   pagetable = (pagetable_t) kalloc();
-    80001390:	fffff097          	auipc	ra,0xfffff
-    80001394:	780080e7          	jalr	1920(ra) # 80000b10 <kalloc>
-    80001398:	84aa                	mv	s1,a0
+    800008d0:	00000097          	auipc	ra,0x0
+    800008d4:	84a080e7          	jalr	-1974(ra) # 8000011a <kalloc>
+    800008d8:	84aa                	mv	s1,a0
   if(pagetable == 0)
-    8000139a:	c519                	beqz	a0,800013a8 <uvmcreate+0x22>
+    800008da:	c519                	beqz	a0,800008e8 <uvmcreate+0x22>
     return 0;
   memset(pagetable, 0, PGSIZE);
-    8000139c:	6605                	lui	a2,0x1
-    8000139e:	4581                	li	a1,0
-    800013a0:	00000097          	auipc	ra,0x0
-    800013a4:	95c080e7          	jalr	-1700(ra) # 80000cfc <memset>
+    800008dc:	6605                	lui	a2,0x1
+    800008de:	4581                	li	a1,0
+    800008e0:	00000097          	auipc	ra,0x0
+    800008e4:	8be080e7          	jalr	-1858(ra) # 8000019e <memset>
   return pagetable;
 }
-    800013a8:	8526                	mv	a0,s1
-    800013aa:	60e2                	ld	ra,24(sp)
-    800013ac:	6442                	ld	s0,16(sp)
-    800013ae:	64a2                	ld	s1,8(sp)
-    800013b0:	6105                	addi	sp,sp,32
-    800013b2:	8082                	ret
+    800008e8:	8526                	mv	a0,s1
+    800008ea:	60e2                	ld	ra,24(sp)
+    800008ec:	6442                	ld	s0,16(sp)
+    800008ee:	64a2                	ld	s1,8(sp)
+    800008f0:	6105                	addi	sp,sp,32
+    800008f2:	8082                	ret
 
-00000000800013b4 <uvminit>:
+00000000800008f4 <uvminit>:
 // Load the user initcode into address 0 of pagetable,
 // for the very first process.
 // sz must be less than a page.
 void
 uvminit(pagetable_t pagetable, uchar *src, uint sz)
 {
-    800013b4:	7179                	addi	sp,sp,-48
-    800013b6:	f406                	sd	ra,40(sp)
-    800013b8:	f022                	sd	s0,32(sp)
-    800013ba:	ec26                	sd	s1,24(sp)
-    800013bc:	e84a                	sd	s2,16(sp)
-    800013be:	e44e                	sd	s3,8(sp)
-    800013c0:	e052                	sd	s4,0(sp)
-    800013c2:	1800                	addi	s0,sp,48
+    800008f4:	7179                	addi	sp,sp,-48
+    800008f6:	f406                	sd	ra,40(sp)
+    800008f8:	f022                	sd	s0,32(sp)
+    800008fa:	ec26                	sd	s1,24(sp)
+    800008fc:	e84a                	sd	s2,16(sp)
+    800008fe:	e44e                	sd	s3,8(sp)
+    80000900:	e052                	sd	s4,0(sp)
+    80000902:	1800                	addi	s0,sp,48
   char *mem;
 
   if(sz >= PGSIZE)
-    800013c4:	6785                	lui	a5,0x1
-    800013c6:	04f67863          	bgeu	a2,a5,80001416 <uvminit+0x62>
-    800013ca:	8a2a                	mv	s4,a0
-    800013cc:	89ae                	mv	s3,a1
-    800013ce:	84b2                	mv	s1,a2
+    80000904:	6785                	lui	a5,0x1
+    80000906:	04f67863          	bgeu	a2,a5,80000956 <uvminit+0x62>
+    8000090a:	8a2a                	mv	s4,a0
+    8000090c:	89ae                	mv	s3,a1
+    8000090e:	84b2                	mv	s1,a2
     panic("inituvm: more than a page");
   mem = kalloc();
-    800013d0:	fffff097          	auipc	ra,0xfffff
-    800013d4:	740080e7          	jalr	1856(ra) # 80000b10 <kalloc>
-    800013d8:	892a                	mv	s2,a0
+    80000910:	00000097          	auipc	ra,0x0
+    80000914:	80a080e7          	jalr	-2038(ra) # 8000011a <kalloc>
+    80000918:	892a                	mv	s2,a0
   memset(mem, 0, PGSIZE);
-    800013da:	6605                	lui	a2,0x1
-    800013dc:	4581                	li	a1,0
-    800013de:	00000097          	auipc	ra,0x0
-    800013e2:	91e080e7          	jalr	-1762(ra) # 80000cfc <memset>
+    8000091a:	6605                	lui	a2,0x1
+    8000091c:	4581                	li	a1,0
+    8000091e:	00000097          	auipc	ra,0x0
+    80000922:	880080e7          	jalr	-1920(ra) # 8000019e <memset>
   mappages(pagetable, 0, PGSIZE, (uint64)mem, PTE_W|PTE_R|PTE_X|PTE_U);
-    800013e6:	4779                	li	a4,30
-    800013e8:	86ca                	mv	a3,s2
-    800013ea:	6605                	lui	a2,0x1
-    800013ec:	4581                	li	a1,0
-    800013ee:	8552                	mv	a0,s4
-    800013f0:	00000097          	auipc	ra,0x0
-    800013f4:	d3a080e7          	jalr	-710(ra) # 8000112a <mappages>
+    80000926:	4779                	li	a4,30
+    80000928:	86ca                	mv	a3,s2
+    8000092a:	6605                	lui	a2,0x1
+    8000092c:	4581                	li	a1,0
+    8000092e:	8552                	mv	a0,s4
+    80000930:	00000097          	auipc	ra,0x0
+    80000934:	d0c080e7          	jalr	-756(ra) # 8000063c <mappages>
   memmove(mem, src, sz);
-    800013f8:	8626                	mv	a2,s1
-    800013fa:	85ce                	mv	a1,s3
-    800013fc:	854a                	mv	a0,s2
-    800013fe:	00000097          	auipc	ra,0x0
-    80001402:	95a080e7          	jalr	-1702(ra) # 80000d58 <memmove>
-}
-    80001406:	70a2                	ld	ra,40(sp)
-    80001408:	7402                	ld	s0,32(sp)
-    8000140a:	64e2                	ld	s1,24(sp)
-    8000140c:	6942                	ld	s2,16(sp)
-    8000140e:	69a2                	ld	s3,8(sp)
-    80001410:	6a02                	ld	s4,0(sp)
-    80001412:	6145                	addi	sp,sp,48
-    80001414:	8082                	ret
+    80000938:	8626                	mv	a2,s1
+    8000093a:	85ce                	mv	a1,s3
+    8000093c:	854a                	mv	a0,s2
+    8000093e:	00000097          	auipc	ra,0x0
+    80000942:	8bc080e7          	jalr	-1860(ra) # 800001fa <memmove>
+}
+    80000946:	70a2                	ld	ra,40(sp)
+    80000948:	7402                	ld	s0,32(sp)
+    8000094a:	64e2                	ld	s1,24(sp)
+    8000094c:	6942                	ld	s2,16(sp)
+    8000094e:	69a2                	ld	s3,8(sp)
+    80000950:	6a02                	ld	s4,0(sp)
+    80000952:	6145                	addi	sp,sp,48
+    80000954:	8082                	ret
     panic("inituvm: more than a page");
-    80001416:	00007517          	auipc	a0,0x7
-    8000141a:	d3250513          	addi	a0,a0,-718 # 80008148 <digits+0x108>
-    8000141e:	fffff097          	auipc	ra,0xfffff
-    80001422:	128080e7          	jalr	296(ra) # 80000546 <panic>
+    80000956:	00007517          	auipc	a0,0x7
+    8000095a:	7b250513          	addi	a0,a0,1970 # 80008108 <etext+0x108>
+    8000095e:	00005097          	auipc	ra,0x5
+    80000962:	392080e7          	jalr	914(ra) # 80005cf0 <panic>
 
-0000000080001426 <uvmdealloc>:
+0000000080000966 <uvmdealloc>:
 // newsz.  oldsz and newsz need not be page-aligned, nor does newsz
 // need to be less than oldsz.  oldsz can be larger than the actual
 // process size.  Returns the new process size.
 uint64
 uvmdealloc(pagetable_t pagetable, uint64 oldsz, uint64 newsz)
 {
-    80001426:	1101                	addi	sp,sp,-32
-    80001428:	ec06                	sd	ra,24(sp)
-    8000142a:	e822                	sd	s0,16(sp)
-    8000142c:	e426                	sd	s1,8(sp)
-    8000142e:	1000                	addi	s0,sp,32
+    80000966:	1101                	addi	sp,sp,-32
+    80000968:	ec06                	sd	ra,24(sp)
+    8000096a:	e822                	sd	s0,16(sp)
+    8000096c:	e426                	sd	s1,8(sp)
+    8000096e:	1000                	addi	s0,sp,32
   if(newsz >= oldsz)
     return oldsz;
-    80001430:	84ae                	mv	s1,a1
+    80000970:	84ae                	mv	s1,a1
   if(newsz >= oldsz)
-    80001432:	00b67d63          	bgeu	a2,a1,8000144c <uvmdealloc+0x26>
-    80001436:	84b2                	mv	s1,a2
+    80000972:	00b67d63          	bgeu	a2,a1,8000098c <uvmdealloc+0x26>
+    80000976:	84b2                	mv	s1,a2
 
   if(PGROUNDUP(newsz) < PGROUNDUP(oldsz)){
-    80001438:	6785                	lui	a5,0x1
-    8000143a:	17fd                	addi	a5,a5,-1
-    8000143c:	00f60733          	add	a4,a2,a5
-    80001440:	76fd                	lui	a3,0xfffff
-    80001442:	8f75                	and	a4,a4,a3
-    80001444:	97ae                	add	a5,a5,a1
-    80001446:	8ff5                	and	a5,a5,a3
-    80001448:	00f76863          	bltu	a4,a5,80001458 <uvmdealloc+0x32>
+    80000978:	6785                	lui	a5,0x1
+    8000097a:	17fd                	addi	a5,a5,-1
+    8000097c:	00f60733          	add	a4,a2,a5
+    80000980:	76fd                	lui	a3,0xfffff
+    80000982:	8f75                	and	a4,a4,a3
+    80000984:	97ae                	add	a5,a5,a1
+    80000986:	8ff5                	and	a5,a5,a3
+    80000988:	00f76863          	bltu	a4,a5,80000998 <uvmdealloc+0x32>
     int npages = (PGROUNDUP(oldsz) - PGROUNDUP(newsz)) / PGSIZE;
     uvmunmap(pagetable, PGROUNDUP(newsz), npages, 1);
   }
 
   return newsz;
 }
-    8000144c:	8526                	mv	a0,s1
-    8000144e:	60e2                	ld	ra,24(sp)
-    80001450:	6442                	ld	s0,16(sp)
-    80001452:	64a2                	ld	s1,8(sp)
-    80001454:	6105                	addi	sp,sp,32
-    80001456:	8082                	ret
+    8000098c:	8526                	mv	a0,s1
+    8000098e:	60e2                	ld	ra,24(sp)
+    80000990:	6442                	ld	s0,16(sp)
+    80000992:	64a2                	ld	s1,8(sp)
+    80000994:	6105                	addi	sp,sp,32
+    80000996:	8082                	ret
     int npages = (PGROUNDUP(oldsz) - PGROUNDUP(newsz)) / PGSIZE;
-    80001458:	8f99                	sub	a5,a5,a4
-    8000145a:	83b1                	srli	a5,a5,0xc
+    80000998:	8f99                	sub	a5,a5,a4
+    8000099a:	83b1                	srli	a5,a5,0xc
     uvmunmap(pagetable, PGROUNDUP(newsz), npages, 1);
-    8000145c:	4685                	li	a3,1
-    8000145e:	0007861b          	sext.w	a2,a5
-    80001462:	85ba                	mv	a1,a4
-    80001464:	00000097          	auipc	ra,0x0
-    80001468:	e5e080e7          	jalr	-418(ra) # 800012c2 <uvmunmap>
-    8000146c:	b7c5                	j	8000144c <uvmdealloc+0x26>
+    8000099c:	4685                	li	a3,1
+    8000099e:	0007861b          	sext.w	a2,a5
+    800009a2:	85ba                	mv	a1,a4
+    800009a4:	00000097          	auipc	ra,0x0
+    800009a8:	e5e080e7          	jalr	-418(ra) # 80000802 <uvmunmap>
+    800009ac:	b7c5                	j	8000098c <uvmdealloc+0x26>
 
-000000008000146e <uvmalloc>:
+00000000800009ae <uvmalloc>:
   if(newsz < oldsz)
-    8000146e:	0ab66163          	bltu	a2,a1,80001510 <uvmalloc+0xa2>
+    800009ae:	0ab66163          	bltu	a2,a1,80000a50 <uvmalloc+0xa2>
 {
-    80001472:	7139                	addi	sp,sp,-64
-    80001474:	fc06                	sd	ra,56(sp)
-    80001476:	f822                	sd	s0,48(sp)
-    80001478:	f426                	sd	s1,40(sp)
-    8000147a:	f04a                	sd	s2,32(sp)
-    8000147c:	ec4e                	sd	s3,24(sp)
-    8000147e:	e852                	sd	s4,16(sp)
-    80001480:	e456                	sd	s5,8(sp)
-    80001482:	0080                	addi	s0,sp,64
-    80001484:	8aaa                	mv	s5,a0
-    80001486:	8a32                	mv	s4,a2
+    800009b2:	7139                	addi	sp,sp,-64
+    800009b4:	fc06                	sd	ra,56(sp)
+    800009b6:	f822                	sd	s0,48(sp)
+    800009b8:	f426                	sd	s1,40(sp)
+    800009ba:	f04a                	sd	s2,32(sp)
+    800009bc:	ec4e                	sd	s3,24(sp)
+    800009be:	e852                	sd	s4,16(sp)
+    800009c0:	e456                	sd	s5,8(sp)
+    800009c2:	0080                	addi	s0,sp,64
+    800009c4:	8aaa                	mv	s5,a0
+    800009c6:	8a32                	mv	s4,a2
   oldsz = PGROUNDUP(oldsz);
-    80001488:	6785                	lui	a5,0x1
-    8000148a:	17fd                	addi	a5,a5,-1
-    8000148c:	95be                	add	a1,a1,a5
-    8000148e:	77fd                	lui	a5,0xfffff
-    80001490:	00f5f9b3          	and	s3,a1,a5
+    800009c8:	6785                	lui	a5,0x1
+    800009ca:	17fd                	addi	a5,a5,-1
+    800009cc:	95be                	add	a1,a1,a5
+    800009ce:	77fd                	lui	a5,0xfffff
+    800009d0:	00f5f9b3          	and	s3,a1,a5
   for(a = oldsz; a < newsz; a += PGSIZE){
-    80001494:	08c9f063          	bgeu	s3,a2,80001514 <uvmalloc+0xa6>
-    80001498:	894e                	mv	s2,s3
+    800009d4:	08c9f063          	bgeu	s3,a2,80000a54 <uvmalloc+0xa6>
+    800009d8:	894e                	mv	s2,s3
     mem = kalloc();
-    8000149a:	fffff097          	auipc	ra,0xfffff
-    8000149e:	676080e7          	jalr	1654(ra) # 80000b10 <kalloc>
-    800014a2:	84aa                	mv	s1,a0
+    800009da:	fffff097          	auipc	ra,0xfffff
+    800009de:	740080e7          	jalr	1856(ra) # 8000011a <kalloc>
+    800009e2:	84aa                	mv	s1,a0
     if(mem == 0){
-    800014a4:	c51d                	beqz	a0,800014d2 <uvmalloc+0x64>
+    800009e4:	c51d                	beqz	a0,80000a12 <uvmalloc+0x64>
     memset(mem, 0, PGSIZE);
-    800014a6:	6605                	lui	a2,0x1
-    800014a8:	4581                	li	a1,0
-    800014aa:	00000097          	auipc	ra,0x0
-    800014ae:	852080e7          	jalr	-1966(ra) # 80000cfc <memset>
+    800009e6:	6605                	lui	a2,0x1
+    800009e8:	4581                	li	a1,0
+    800009ea:	fffff097          	auipc	ra,0xfffff
+    800009ee:	7b4080e7          	jalr	1972(ra) # 8000019e <memset>
     if(mappages(pagetable, a, PGSIZE, (uint64)mem, PTE_W|PTE_X|PTE_R|PTE_U) != 0){
-    800014b2:	4779                	li	a4,30
-    800014b4:	86a6                	mv	a3,s1
-    800014b6:	6605                	lui	a2,0x1
-    800014b8:	85ca                	mv	a1,s2
-    800014ba:	8556                	mv	a0,s5
-    800014bc:	00000097          	auipc	ra,0x0
-    800014c0:	c6e080e7          	jalr	-914(ra) # 8000112a <mappages>
-    800014c4:	e905                	bnez	a0,800014f4 <uvmalloc+0x86>
+    800009f2:	4779                	li	a4,30
+    800009f4:	86a6                	mv	a3,s1
+    800009f6:	6605                	lui	a2,0x1
+    800009f8:	85ca                	mv	a1,s2
+    800009fa:	8556                	mv	a0,s5
+    800009fc:	00000097          	auipc	ra,0x0
+    80000a00:	c40080e7          	jalr	-960(ra) # 8000063c <mappages>
+    80000a04:	e905                	bnez	a0,80000a34 <uvmalloc+0x86>
   for(a = oldsz; a < newsz; a += PGSIZE){
-    800014c6:	6785                	lui	a5,0x1
-    800014c8:	993e                	add	s2,s2,a5
-    800014ca:	fd4968e3          	bltu	s2,s4,8000149a <uvmalloc+0x2c>
+    80000a06:	6785                	lui	a5,0x1
+    80000a08:	993e                	add	s2,s2,a5
+    80000a0a:	fd4968e3          	bltu	s2,s4,800009da <uvmalloc+0x2c>
   return newsz;
-    800014ce:	8552                	mv	a0,s4
-    800014d0:	a809                	j	800014e2 <uvmalloc+0x74>
+    80000a0e:	8552                	mv	a0,s4
+    80000a10:	a809                	j	80000a22 <uvmalloc+0x74>
       uvmdealloc(pagetable, a, oldsz);
-    800014d2:	864e                	mv	a2,s3
-    800014d4:	85ca                	mv	a1,s2
-    800014d6:	8556                	mv	a0,s5
-    800014d8:	00000097          	auipc	ra,0x0
-    800014dc:	f4e080e7          	jalr	-178(ra) # 80001426 <uvmdealloc>
+    80000a12:	864e                	mv	a2,s3
+    80000a14:	85ca                	mv	a1,s2
+    80000a16:	8556                	mv	a0,s5
+    80000a18:	00000097          	auipc	ra,0x0
+    80000a1c:	f4e080e7          	jalr	-178(ra) # 80000966 <uvmdealloc>
       return 0;
-    800014e0:	4501                	li	a0,0
+    80000a20:	4501                	li	a0,0
 }
-    800014e2:	70e2                	ld	ra,56(sp)
-    800014e4:	7442                	ld	s0,48(sp)
-    800014e6:	74a2                	ld	s1,40(sp)
-    800014e8:	7902                	ld	s2,32(sp)
-    800014ea:	69e2                	ld	s3,24(sp)
-    800014ec:	6a42                	ld	s4,16(sp)
-    800014ee:	6aa2                	ld	s5,8(sp)
-    800014f0:	6121                	addi	sp,sp,64
-    800014f2:	8082                	ret
+    80000a22:	70e2                	ld	ra,56(sp)
+    80000a24:	7442                	ld	s0,48(sp)
+    80000a26:	74a2                	ld	s1,40(sp)
+    80000a28:	7902                	ld	s2,32(sp)
+    80000a2a:	69e2                	ld	s3,24(sp)
+    80000a2c:	6a42                	ld	s4,16(sp)
+    80000a2e:	6aa2                	ld	s5,8(sp)
+    80000a30:	6121                	addi	sp,sp,64
+    80000a32:	8082                	ret
       kfree(mem);
-    800014f4:	8526                	mv	a0,s1
-    800014f6:	fffff097          	auipc	ra,0xfffff
-    800014fa:	51c080e7          	jalr	1308(ra) # 80000a12 <kfree>
+    80000a34:	8526                	mv	a0,s1
+    80000a36:	fffff097          	auipc	ra,0xfffff
+    80000a3a:	5e6080e7          	jalr	1510(ra) # 8000001c <kfree>
       uvmdealloc(pagetable, a, oldsz);
-    800014fe:	864e                	mv	a2,s3
-    80001500:	85ca                	mv	a1,s2
-    80001502:	8556                	mv	a0,s5
-    80001504:	00000097          	auipc	ra,0x0
-    80001508:	f22080e7          	jalr	-222(ra) # 80001426 <uvmdealloc>
+    80000a3e:	864e                	mv	a2,s3
+    80000a40:	85ca                	mv	a1,s2
+    80000a42:	8556                	mv	a0,s5
+    80000a44:	00000097          	auipc	ra,0x0
+    80000a48:	f22080e7          	jalr	-222(ra) # 80000966 <uvmdealloc>
       return 0;
-    8000150c:	4501                	li	a0,0
-    8000150e:	bfd1                	j	800014e2 <uvmalloc+0x74>
+    80000a4c:	4501                	li	a0,0
+    80000a4e:	bfd1                	j	80000a22 <uvmalloc+0x74>
     return oldsz;
-    80001510:	852e                	mv	a0,a1
+    80000a50:	852e                	mv	a0,a1
 }
-    80001512:	8082                	ret
+    80000a52:	8082                	ret
   return newsz;
-    80001514:	8532                	mv	a0,a2
-    80001516:	b7f1                	j	800014e2 <uvmalloc+0x74>
+    80000a54:	8532                	mv	a0,a2
+    80000a56:	b7f1                	j	80000a22 <uvmalloc+0x74>
 
-0000000080001518 <freewalk>:
+0000000080000a58 <freewalk>:
 
 // Recursively free page-table pages.
 // All leaf mappings must already have been removed.
 void
 freewalk(pagetable_t pagetable)
 {
-    80001518:	7179                	addi	sp,sp,-48
-    8000151a:	f406                	sd	ra,40(sp)
-    8000151c:	f022                	sd	s0,32(sp)
-    8000151e:	ec26                	sd	s1,24(sp)
-    80001520:	e84a                	sd	s2,16(sp)
-    80001522:	e44e                	sd	s3,8(sp)
-    80001524:	e052                	sd	s4,0(sp)
-    80001526:	1800                	addi	s0,sp,48
-    80001528:	8a2a                	mv	s4,a0
+    80000a58:	7179                	addi	sp,sp,-48
+    80000a5a:	f406                	sd	ra,40(sp)
+    80000a5c:	f022                	sd	s0,32(sp)
+    80000a5e:	ec26                	sd	s1,24(sp)
+    80000a60:	e84a                	sd	s2,16(sp)
+    80000a62:	e44e                	sd	s3,8(sp)
+    80000a64:	e052                	sd	s4,0(sp)
+    80000a66:	1800                	addi	s0,sp,48
+    80000a68:	8a2a                	mv	s4,a0
   // there are 2^9 = 512 PTEs in a page table.
   for(int i = 0; i < 512; i++){
-    8000152a:	84aa                	mv	s1,a0
-    8000152c:	6905                	lui	s2,0x1
-    8000152e:	992a                	add	s2,s2,a0
+    80000a6a:	84aa                	mv	s1,a0
+    80000a6c:	6905                	lui	s2,0x1
+    80000a6e:	992a                	add	s2,s2,a0
     pte_t pte = pagetable[i];
     if((pte & PTE_V) && (pte & (PTE_R|PTE_W|PTE_X)) == 0){
-    80001530:	4985                	li	s3,1
-    80001532:	a829                	j	8000154c <freewalk+0x34>
+    80000a70:	4985                	li	s3,1
+    80000a72:	a829                	j	80000a8c <freewalk+0x34>
       // this PTE points to a lower-level page table.
       uint64 child = PTE2PA(pte);
-    80001534:	83a9                	srli	a5,a5,0xa
+    80000a74:	83a9                	srli	a5,a5,0xa
       freewalk((pagetable_t)child);
-    80001536:	00c79513          	slli	a0,a5,0xc
-    8000153a:	00000097          	auipc	ra,0x0
-    8000153e:	fde080e7          	jalr	-34(ra) # 80001518 <freewalk>
+    80000a76:	00c79513          	slli	a0,a5,0xc
+    80000a7a:	00000097          	auipc	ra,0x0
+    80000a7e:	fde080e7          	jalr	-34(ra) # 80000a58 <freewalk>
       pagetable[i] = 0;
-    80001542:	0004b023          	sd	zero,0(s1)
+    80000a82:	0004b023          	sd	zero,0(s1)
   for(int i = 0; i < 512; i++){
-    80001546:	04a1                	addi	s1,s1,8
-    80001548:	03248163          	beq	s1,s2,8000156a <freewalk+0x52>
+    80000a86:	04a1                	addi	s1,s1,8
+    80000a88:	03248163          	beq	s1,s2,80000aaa <freewalk+0x52>
     pte_t pte = pagetable[i];
-    8000154c:	609c                	ld	a5,0(s1)
+    80000a8c:	609c                	ld	a5,0(s1)
     if((pte & PTE_V) && (pte & (PTE_R|PTE_W|PTE_X)) == 0){
-    8000154e:	00f7f713          	andi	a4,a5,15
-    80001552:	ff3701e3          	beq	a4,s3,80001534 <freewalk+0x1c>
+    80000a8e:	00f7f713          	andi	a4,a5,15
+    80000a92:	ff3701e3          	beq	a4,s3,80000a74 <freewalk+0x1c>
     } else if(pte & PTE_V){
-    80001556:	8b85                	andi	a5,a5,1
-    80001558:	d7fd                	beqz	a5,80001546 <freewalk+0x2e>
+    80000a96:	8b85                	andi	a5,a5,1
+    80000a98:	d7fd                	beqz	a5,80000a86 <freewalk+0x2e>
       panic("freewalk: leaf");
-    8000155a:	00007517          	auipc	a0,0x7
-    8000155e:	c0e50513          	addi	a0,a0,-1010 # 80008168 <digits+0x128>
-    80001562:	fffff097          	auipc	ra,0xfffff
-    80001566:	fe4080e7          	jalr	-28(ra) # 80000546 <panic>
+    80000a9a:	00007517          	auipc	a0,0x7
+    80000a9e:	68e50513          	addi	a0,a0,1678 # 80008128 <etext+0x128>
+    80000aa2:	00005097          	auipc	ra,0x5
+    80000aa6:	24e080e7          	jalr	590(ra) # 80005cf0 <panic>
     }
   }
   kfree((void*)pagetable);
-    8000156a:	8552                	mv	a0,s4
-    8000156c:	fffff097          	auipc	ra,0xfffff
-    80001570:	4a6080e7          	jalr	1190(ra) # 80000a12 <kfree>
-}
-    80001574:	70a2                	ld	ra,40(sp)
-    80001576:	7402                	ld	s0,32(sp)
-    80001578:	64e2                	ld	s1,24(sp)
-    8000157a:	6942                	ld	s2,16(sp)
-    8000157c:	69a2                	ld	s3,8(sp)
-    8000157e:	6a02                	ld	s4,0(sp)
-    80001580:	6145                	addi	sp,sp,48
-    80001582:	8082                	ret
+    80000aaa:	8552                	mv	a0,s4
+    80000aac:	fffff097          	auipc	ra,0xfffff
+    80000ab0:	570080e7          	jalr	1392(ra) # 8000001c <kfree>
+}
+    80000ab4:	70a2                	ld	ra,40(sp)
+    80000ab6:	7402                	ld	s0,32(sp)
+    80000ab8:	64e2                	ld	s1,24(sp)
+    80000aba:	6942                	ld	s2,16(sp)
+    80000abc:	69a2                	ld	s3,8(sp)
+    80000abe:	6a02                	ld	s4,0(sp)
+    80000ac0:	6145                	addi	sp,sp,48
+    80000ac2:	8082                	ret
 
-0000000080001584 <uvmfree>:
+0000000080000ac4 <uvmfree>:
 
 // Free user memory pages,
 // then free page-table pages.
 void
 uvmfree(pagetable_t pagetable, uint64 sz)
 {
-    80001584:	1101                	addi	sp,sp,-32
-    80001586:	ec06                	sd	ra,24(sp)
-    80001588:	e822                	sd	s0,16(sp)
-    8000158a:	e426                	sd	s1,8(sp)
-    8000158c:	1000                	addi	s0,sp,32
-    8000158e:	84aa                	mv	s1,a0
+    80000ac4:	1101                	addi	sp,sp,-32
+    80000ac6:	ec06                	sd	ra,24(sp)
+    80000ac8:	e822                	sd	s0,16(sp)
+    80000aca:	e426                	sd	s1,8(sp)
+    80000acc:	1000                	addi	s0,sp,32
+    80000ace:	84aa                	mv	s1,a0
   if(sz > 0)
-    80001590:	e999                	bnez	a1,800015a6 <uvmfree+0x22>
+    80000ad0:	e999                	bnez	a1,80000ae6 <uvmfree+0x22>
     uvmunmap(pagetable, 0, PGROUNDUP(sz)/PGSIZE, 1);
   freewalk(pagetable);
-    80001592:	8526                	mv	a0,s1
-    80001594:	00000097          	auipc	ra,0x0
-    80001598:	f84080e7          	jalr	-124(ra) # 80001518 <freewalk>
-}
-    8000159c:	60e2                	ld	ra,24(sp)
-    8000159e:	6442                	ld	s0,16(sp)
-    800015a0:	64a2                	ld	s1,8(sp)
-    800015a2:	6105                	addi	sp,sp,32
-    800015a4:	8082                	ret
+    80000ad2:	8526                	mv	a0,s1
+    80000ad4:	00000097          	auipc	ra,0x0
+    80000ad8:	f84080e7          	jalr	-124(ra) # 80000a58 <freewalk>
+}
+    80000adc:	60e2                	ld	ra,24(sp)
+    80000ade:	6442                	ld	s0,16(sp)
+    80000ae0:	64a2                	ld	s1,8(sp)
+    80000ae2:	6105                	addi	sp,sp,32
+    80000ae4:	8082                	ret
     uvmunmap(pagetable, 0, PGROUNDUP(sz)/PGSIZE, 1);
-    800015a6:	6785                	lui	a5,0x1
-    800015a8:	17fd                	addi	a5,a5,-1
-    800015aa:	95be                	add	a1,a1,a5
-    800015ac:	4685                	li	a3,1
-    800015ae:	00c5d613          	srli	a2,a1,0xc
-    800015b2:	4581                	li	a1,0
-    800015b4:	00000097          	auipc	ra,0x0
-    800015b8:	d0e080e7          	jalr	-754(ra) # 800012c2 <uvmunmap>
-    800015bc:	bfd9                	j	80001592 <uvmfree+0xe>
+    80000ae6:	6785                	lui	a5,0x1
+    80000ae8:	17fd                	addi	a5,a5,-1
+    80000aea:	95be                	add	a1,a1,a5
+    80000aec:	4685                	li	a3,1
+    80000aee:	00c5d613          	srli	a2,a1,0xc
+    80000af2:	4581                	li	a1,0
+    80000af4:	00000097          	auipc	ra,0x0
+    80000af8:	d0e080e7          	jalr	-754(ra) # 80000802 <uvmunmap>
+    80000afc:	bfd9                	j	80000ad2 <uvmfree+0xe>
 
-00000000800015be <uvmcopy>:
+0000000080000afe <uvmcopy>:
   pte_t *pte;
   uint64 pa, i;
   uint flags;
   char *mem;
 
   for(i = 0; i < sz; i += PGSIZE){
-    800015be:	c679                	beqz	a2,8000168c <uvmcopy+0xce>
+    80000afe:	c679                	beqz	a2,80000bcc <uvmcopy+0xce>
 {
-    800015c0:	715d                	addi	sp,sp,-80
-    800015c2:	e486                	sd	ra,72(sp)
-    800015c4:	e0a2                	sd	s0,64(sp)
-    800015c6:	fc26                	sd	s1,56(sp)
-    800015c8:	f84a                	sd	s2,48(sp)
-    800015ca:	f44e                	sd	s3,40(sp)
-    800015cc:	f052                	sd	s4,32(sp)
-    800015ce:	ec56                	sd	s5,24(sp)
-    800015d0:	e85a                	sd	s6,16(sp)
-    800015d2:	e45e                	sd	s7,8(sp)
-    800015d4:	0880                	addi	s0,sp,80
-    800015d6:	8b2a                	mv	s6,a0
-    800015d8:	8aae                	mv	s5,a1
-    800015da:	8a32                	mv	s4,a2
+    80000b00:	715d                	addi	sp,sp,-80
+    80000b02:	e486                	sd	ra,72(sp)
+    80000b04:	e0a2                	sd	s0,64(sp)
+    80000b06:	fc26                	sd	s1,56(sp)
+    80000b08:	f84a                	sd	s2,48(sp)
+    80000b0a:	f44e                	sd	s3,40(sp)
+    80000b0c:	f052                	sd	s4,32(sp)
+    80000b0e:	ec56                	sd	s5,24(sp)
+    80000b10:	e85a                	sd	s6,16(sp)
+    80000b12:	e45e                	sd	s7,8(sp)
+    80000b14:	0880                	addi	s0,sp,80
+    80000b16:	8b2a                	mv	s6,a0
+    80000b18:	8aae                	mv	s5,a1
+    80000b1a:	8a32                	mv	s4,a2
   for(i = 0; i < sz; i += PGSIZE){
-    800015dc:	4981                	li	s3,0
+    80000b1c:	4981                	li	s3,0
     if((pte = walk(old, i, 0)) == 0)
-    800015de:	4601                	li	a2,0
-    800015e0:	85ce                	mv	a1,s3
-    800015e2:	855a                	mv	a0,s6
-    800015e4:	00000097          	auipc	ra,0x0
-    800015e8:	a00080e7          	jalr	-1536(ra) # 80000fe4 <walk>
-    800015ec:	c531                	beqz	a0,80001638 <uvmcopy+0x7a>
+    80000b1e:	4601                	li	a2,0
+    80000b20:	85ce                	mv	a1,s3
+    80000b22:	855a                	mv	a0,s6
+    80000b24:	00000097          	auipc	ra,0x0
+    80000b28:	a16080e7          	jalr	-1514(ra) # 8000053a <walk>
+    80000b2c:	c531                	beqz	a0,80000b78 <uvmcopy+0x7a>
       panic("uvmcopy: pte should exist");
     if((*pte & PTE_V) == 0)
-    800015ee:	6118                	ld	a4,0(a0)
-    800015f0:	00177793          	andi	a5,a4,1
-    800015f4:	cbb1                	beqz	a5,80001648 <uvmcopy+0x8a>
+    80000b2e:	6118                	ld	a4,0(a0)
+    80000b30:	00177793          	andi	a5,a4,1
+    80000b34:	cbb1                	beqz	a5,80000b88 <uvmcopy+0x8a>
       panic("uvmcopy: page not present");
     pa = PTE2PA(*pte);
-    800015f6:	00a75593          	srli	a1,a4,0xa
-    800015fa:	00c59b93          	slli	s7,a1,0xc
+    80000b36:	00a75593          	srli	a1,a4,0xa
+    80000b3a:	00c59b93          	slli	s7,a1,0xc
     flags = PTE_FLAGS(*pte);
-    800015fe:	3ff77493          	andi	s1,a4,1023
+    80000b3e:	3ff77493          	andi	s1,a4,1023
     if((mem = kalloc()) == 0)
-    80001602:	fffff097          	auipc	ra,0xfffff
-    80001606:	50e080e7          	jalr	1294(ra) # 80000b10 <kalloc>
-    8000160a:	892a                	mv	s2,a0
-    8000160c:	c939                	beqz	a0,80001662 <uvmcopy+0xa4>
+    80000b42:	fffff097          	auipc	ra,0xfffff
+    80000b46:	5d8080e7          	jalr	1496(ra) # 8000011a <kalloc>
+    80000b4a:	892a                	mv	s2,a0
+    80000b4c:	c939                	beqz	a0,80000ba2 <uvmcopy+0xa4>
       goto err;
     memmove(mem, (char*)pa, PGSIZE);
-    8000160e:	6605                	lui	a2,0x1
-    80001610:	85de                	mv	a1,s7
-    80001612:	fffff097          	auipc	ra,0xfffff
-    80001616:	746080e7          	jalr	1862(ra) # 80000d58 <memmove>
+    80000b4e:	6605                	lui	a2,0x1
+    80000b50:	85de                	mv	a1,s7
+    80000b52:	fffff097          	auipc	ra,0xfffff
+    80000b56:	6a8080e7          	jalr	1704(ra) # 800001fa <memmove>
     if(mappages(new, i, PGSIZE, (uint64)mem, flags) != 0){
-    8000161a:	8726                	mv	a4,s1
-    8000161c:	86ca                	mv	a3,s2
-    8000161e:	6605                	lui	a2,0x1
-    80001620:	85ce                	mv	a1,s3
-    80001622:	8556                	mv	a0,s5
-    80001624:	00000097          	auipc	ra,0x0
-    80001628:	b06080e7          	jalr	-1274(ra) # 8000112a <mappages>
-    8000162c:	e515                	bnez	a0,80001658 <uvmcopy+0x9a>
+    80000b5a:	8726                	mv	a4,s1
+    80000b5c:	86ca                	mv	a3,s2
+    80000b5e:	6605                	lui	a2,0x1
+    80000b60:	85ce                	mv	a1,s3
+    80000b62:	8556                	mv	a0,s5
+    80000b64:	00000097          	auipc	ra,0x0
+    80000b68:	ad8080e7          	jalr	-1320(ra) # 8000063c <mappages>
+    80000b6c:	e515                	bnez	a0,80000b98 <uvmcopy+0x9a>
   for(i = 0; i < sz; i += PGSIZE){
-    8000162e:	6785                	lui	a5,0x1
-    80001630:	99be                	add	s3,s3,a5
-    80001632:	fb49e6e3          	bltu	s3,s4,800015de <uvmcopy+0x20>
-    80001636:	a081                	j	80001676 <uvmcopy+0xb8>
+    80000b6e:	6785                	lui	a5,0x1
+    80000b70:	99be                	add	s3,s3,a5
+    80000b72:	fb49e6e3          	bltu	s3,s4,80000b1e <uvmcopy+0x20>
+    80000b76:	a081                	j	80000bb6 <uvmcopy+0xb8>
       panic("uvmcopy: pte should exist");
-    80001638:	00007517          	auipc	a0,0x7
-    8000163c:	b4050513          	addi	a0,a0,-1216 # 80008178 <digits+0x138>
-    80001640:	fffff097          	auipc	ra,0xfffff
-    80001644:	f06080e7          	jalr	-250(ra) # 80000546 <panic>
+    80000b78:	00007517          	auipc	a0,0x7
+    80000b7c:	5c050513          	addi	a0,a0,1472 # 80008138 <etext+0x138>
+    80000b80:	00005097          	auipc	ra,0x5
+    80000b84:	170080e7          	jalr	368(ra) # 80005cf0 <panic>
       panic("uvmcopy: page not present");
-    80001648:	00007517          	auipc	a0,0x7
-    8000164c:	b5050513          	addi	a0,a0,-1200 # 80008198 <digits+0x158>
-    80001650:	fffff097          	auipc	ra,0xfffff
-    80001654:	ef6080e7          	jalr	-266(ra) # 80000546 <panic>
+    80000b88:	00007517          	auipc	a0,0x7
+    80000b8c:	5d050513          	addi	a0,a0,1488 # 80008158 <etext+0x158>
+    80000b90:	00005097          	auipc	ra,0x5
+    80000b94:	160080e7          	jalr	352(ra) # 80005cf0 <panic>
       kfree(mem);
-    80001658:	854a                	mv	a0,s2
-    8000165a:	fffff097          	auipc	ra,0xfffff
-    8000165e:	3b8080e7          	jalr	952(ra) # 80000a12 <kfree>
+    80000b98:	854a                	mv	a0,s2
+    80000b9a:	fffff097          	auipc	ra,0xfffff
+    80000b9e:	482080e7          	jalr	1154(ra) # 8000001c <kfree>
     }
   }
   return 0;
 
  err:
   uvmunmap(new, 0, i / PGSIZE, 1);
-    80001662:	4685                	li	a3,1
-    80001664:	00c9d613          	srli	a2,s3,0xc
-    80001668:	4581                	li	a1,0
-    8000166a:	8556                	mv	a0,s5
-    8000166c:	00000097          	auipc	ra,0x0
-    80001670:	c56080e7          	jalr	-938(ra) # 800012c2 <uvmunmap>
+    80000ba2:	4685                	li	a3,1
+    80000ba4:	00c9d613          	srli	a2,s3,0xc
+    80000ba8:	4581                	li	a1,0
+    80000baa:	8556                	mv	a0,s5
+    80000bac:	00000097          	auipc	ra,0x0
+    80000bb0:	c56080e7          	jalr	-938(ra) # 80000802 <uvmunmap>
   return -1;
-    80001674:	557d                	li	a0,-1
+    80000bb4:	557d                	li	a0,-1
 }
-    80001676:	60a6                	ld	ra,72(sp)
-    80001678:	6406                	ld	s0,64(sp)
-    8000167a:	74e2                	ld	s1,56(sp)
-    8000167c:	7942                	ld	s2,48(sp)
-    8000167e:	79a2                	ld	s3,40(sp)
-    80001680:	7a02                	ld	s4,32(sp)
-    80001682:	6ae2                	ld	s5,24(sp)
-    80001684:	6b42                	ld	s6,16(sp)
-    80001686:	6ba2                	ld	s7,8(sp)
-    80001688:	6161                	addi	sp,sp,80
-    8000168a:	8082                	ret
+    80000bb6:	60a6                	ld	ra,72(sp)
+    80000bb8:	6406                	ld	s0,64(sp)
+    80000bba:	74e2                	ld	s1,56(sp)
+    80000bbc:	7942                	ld	s2,48(sp)
+    80000bbe:	79a2                	ld	s3,40(sp)
+    80000bc0:	7a02                	ld	s4,32(sp)
+    80000bc2:	6ae2                	ld	s5,24(sp)
+    80000bc4:	6b42                	ld	s6,16(sp)
+    80000bc6:	6ba2                	ld	s7,8(sp)
+    80000bc8:	6161                	addi	sp,sp,80
+    80000bca:	8082                	ret
   return 0;
-    8000168c:	4501                	li	a0,0
+    80000bcc:	4501                	li	a0,0
 }
-    8000168e:	8082                	ret
+    80000bce:	8082                	ret
 
-0000000080001690 <uvmclear>:
+0000000080000bd0 <uvmclear>:
 
 // mark a PTE invalid for user access.
 // used by exec for the user stack guard page.
 void
 uvmclear(pagetable_t pagetable, uint64 va)
 {
-    80001690:	1141                	addi	sp,sp,-16
-    80001692:	e406                	sd	ra,8(sp)
-    80001694:	e022                	sd	s0,0(sp)
-    80001696:	0800                	addi	s0,sp,16
+    80000bd0:	1141                	addi	sp,sp,-16
+    80000bd2:	e406                	sd	ra,8(sp)
+    80000bd4:	e022                	sd	s0,0(sp)
+    80000bd6:	0800                	addi	s0,sp,16
   pte_t *pte;
   
   pte = walk(pagetable, va, 0);
-    80001698:	4601                	li	a2,0
-    8000169a:	00000097          	auipc	ra,0x0
-    8000169e:	94a080e7          	jalr	-1718(ra) # 80000fe4 <walk>
+    80000bd8:	4601                	li	a2,0
+    80000bda:	00000097          	auipc	ra,0x0
+    80000bde:	960080e7          	jalr	-1696(ra) # 8000053a <walk>
   if(pte == 0)
-    800016a2:	c901                	beqz	a0,800016b2 <uvmclear+0x22>
+    80000be2:	c901                	beqz	a0,80000bf2 <uvmclear+0x22>
     panic("uvmclear");
   *pte &= ~PTE_U;
-    800016a4:	611c                	ld	a5,0(a0)
-    800016a6:	9bbd                	andi	a5,a5,-17
-    800016a8:	e11c                	sd	a5,0(a0)
-}
-    800016aa:	60a2                	ld	ra,8(sp)
-    800016ac:	6402                	ld	s0,0(sp)
-    800016ae:	0141                	addi	sp,sp,16
-    800016b0:	8082                	ret
+    80000be4:	611c                	ld	a5,0(a0)
+    80000be6:	9bbd                	andi	a5,a5,-17
+    80000be8:	e11c                	sd	a5,0(a0)
+}
+    80000bea:	60a2                	ld	ra,8(sp)
+    80000bec:	6402                	ld	s0,0(sp)
+    80000bee:	0141                	addi	sp,sp,16
+    80000bf0:	8082                	ret
     panic("uvmclear");
-    800016b2:	00007517          	auipc	a0,0x7
-    800016b6:	b0650513          	addi	a0,a0,-1274 # 800081b8 <digits+0x178>
-    800016ba:	fffff097          	auipc	ra,0xfffff
-    800016be:	e8c080e7          	jalr	-372(ra) # 80000546 <panic>
+    80000bf2:	00007517          	auipc	a0,0x7
+    80000bf6:	58650513          	addi	a0,a0,1414 # 80008178 <etext+0x178>
+    80000bfa:	00005097          	auipc	ra,0x5
+    80000bfe:	0f6080e7          	jalr	246(ra) # 80005cf0 <panic>
 
-00000000800016c2 <copyout>:
+0000000080000c02 <copyout>:
 int
 copyout(pagetable_t pagetable, uint64 dstva, char *src, uint64 len)
 {
   uint64 n, va0, pa0;
 
   while(len > 0){
-    800016c2:	c6bd                	beqz	a3,80001730 <copyout+0x6e>
+    80000c02:	c6bd                	beqz	a3,80000c70 <copyout+0x6e>
 {
-    800016c4:	715d                	addi	sp,sp,-80
-    800016c6:	e486                	sd	ra,72(sp)
-    800016c8:	e0a2                	sd	s0,64(sp)
-    800016ca:	fc26                	sd	s1,56(sp)
-    800016cc:	f84a                	sd	s2,48(sp)
-    800016ce:	f44e                	sd	s3,40(sp)
-    800016d0:	f052                	sd	s4,32(sp)
-    800016d2:	ec56                	sd	s5,24(sp)
-    800016d4:	e85a                	sd	s6,16(sp)
-    800016d6:	e45e                	sd	s7,8(sp)
-    800016d8:	e062                	sd	s8,0(sp)
-    800016da:	0880                	addi	s0,sp,80
-    800016dc:	8b2a                	mv	s6,a0
-    800016de:	8c2e                	mv	s8,a1
-    800016e0:	8a32                	mv	s4,a2
-    800016e2:	89b6                	mv	s3,a3
+    80000c04:	715d                	addi	sp,sp,-80
+    80000c06:	e486                	sd	ra,72(sp)
+    80000c08:	e0a2                	sd	s0,64(sp)
+    80000c0a:	fc26                	sd	s1,56(sp)
+    80000c0c:	f84a                	sd	s2,48(sp)
+    80000c0e:	f44e                	sd	s3,40(sp)
+    80000c10:	f052                	sd	s4,32(sp)
+    80000c12:	ec56                	sd	s5,24(sp)
+    80000c14:	e85a                	sd	s6,16(sp)
+    80000c16:	e45e                	sd	s7,8(sp)
+    80000c18:	e062                	sd	s8,0(sp)
+    80000c1a:	0880                	addi	s0,sp,80
+    80000c1c:	8b2a                	mv	s6,a0
+    80000c1e:	8c2e                	mv	s8,a1
+    80000c20:	8a32                	mv	s4,a2
+    80000c22:	89b6                	mv	s3,a3
     va0 = PGROUNDDOWN(dstva);
-    800016e4:	7bfd                	lui	s7,0xfffff
+    80000c24:	7bfd                	lui	s7,0xfffff
     pa0 = walkaddr(pagetable, va0);
     if(pa0 == 0)
       return -1;
     n = PGSIZE - (dstva - va0);
-    800016e6:	6a85                	lui	s5,0x1
-    800016e8:	a015                	j	8000170c <copyout+0x4a>
+    80000c26:	6a85                	lui	s5,0x1
+    80000c28:	a015                	j	80000c4c <copyout+0x4a>
     if(n > len)
       n = len;
     memmove((void *)(pa0 + (dstva - va0)), src, n);
-    800016ea:	9562                	add	a0,a0,s8
-    800016ec:	0004861b          	sext.w	a2,s1
-    800016f0:	85d2                	mv	a1,s4
-    800016f2:	41250533          	sub	a0,a0,s2
-    800016f6:	fffff097          	auipc	ra,0xfffff
-    800016fa:	662080e7          	jalr	1634(ra) # 80000d58 <memmove>
+    80000c2a:	9562                	add	a0,a0,s8
+    80000c2c:	0004861b          	sext.w	a2,s1
+    80000c30:	85d2                	mv	a1,s4
+    80000c32:	41250533          	sub	a0,a0,s2
+    80000c36:	fffff097          	auipc	ra,0xfffff
+    80000c3a:	5c4080e7          	jalr	1476(ra) # 800001fa <memmove>
 
     len -= n;
-    800016fe:	409989b3          	sub	s3,s3,s1
+    80000c3e:	409989b3          	sub	s3,s3,s1
     src += n;
-    80001702:	9a26                	add	s4,s4,s1
+    80000c42:	9a26                	add	s4,s4,s1
     dstva = va0 + PGSIZE;
-    80001704:	01590c33          	add	s8,s2,s5
+    80000c44:	01590c33          	add	s8,s2,s5
   while(len > 0){
-    80001708:	02098263          	beqz	s3,8000172c <copyout+0x6a>
+    80000c48:	02098263          	beqz	s3,80000c6c <copyout+0x6a>
     va0 = PGROUNDDOWN(dstva);
-    8000170c:	017c7933          	and	s2,s8,s7
+    80000c4c:	017c7933          	and	s2,s8,s7
     pa0 = walkaddr(pagetable, va0);
-    80001710:	85ca                	mv	a1,s2
-    80001712:	855a                	mv	a0,s6
-    80001714:	00000097          	auipc	ra,0x0
-    80001718:	976080e7          	jalr	-1674(ra) # 8000108a <walkaddr>
+    80000c50:	85ca                	mv	a1,s2
+    80000c52:	855a                	mv	a0,s6
+    80000c54:	00000097          	auipc	ra,0x0
+    80000c58:	9a6080e7          	jalr	-1626(ra) # 800005fa <walkaddr>
     if(pa0 == 0)
-    8000171c:	cd01                	beqz	a0,80001734 <copyout+0x72>
+    80000c5c:	cd01                	beqz	a0,80000c74 <copyout+0x72>
     n = PGSIZE - (dstva - va0);
-    8000171e:	418904b3          	sub	s1,s2,s8
-    80001722:	94d6                	add	s1,s1,s5
-    80001724:	fc99f3e3          	bgeu	s3,s1,800016ea <copyout+0x28>
-    80001728:	84ce                	mv	s1,s3
-    8000172a:	b7c1                	j	800016ea <copyout+0x28>
+    80000c5e:	418904b3          	sub	s1,s2,s8
+    80000c62:	94d6                	add	s1,s1,s5
+    80000c64:	fc99f3e3          	bgeu	s3,s1,80000c2a <copyout+0x28>
+    80000c68:	84ce                	mv	s1,s3
+    80000c6a:	b7c1                	j	80000c2a <copyout+0x28>
   }
   return 0;
-    8000172c:	4501                	li	a0,0
-    8000172e:	a021                	j	80001736 <copyout+0x74>
-    80001730:	4501                	li	a0,0
+    80000c6c:	4501                	li	a0,0
+    80000c6e:	a021                	j	80000c76 <copyout+0x74>
+    80000c70:	4501                	li	a0,0
 }
-    80001732:	8082                	ret
+    80000c72:	8082                	ret
       return -1;
-    80001734:	557d                	li	a0,-1
+    80000c74:	557d                	li	a0,-1
 }
-    80001736:	60a6                	ld	ra,72(sp)
-    80001738:	6406                	ld	s0,64(sp)
-    8000173a:	74e2                	ld	s1,56(sp)
-    8000173c:	7942                	ld	s2,48(sp)
-    8000173e:	79a2                	ld	s3,40(sp)
-    80001740:	7a02                	ld	s4,32(sp)
-    80001742:	6ae2                	ld	s5,24(sp)
-    80001744:	6b42                	ld	s6,16(sp)
-    80001746:	6ba2                	ld	s7,8(sp)
-    80001748:	6c02                	ld	s8,0(sp)
-    8000174a:	6161                	addi	sp,sp,80
-    8000174c:	8082                	ret
+    80000c76:	60a6                	ld	ra,72(sp)
+    80000c78:	6406                	ld	s0,64(sp)
+    80000c7a:	74e2                	ld	s1,56(sp)
+    80000c7c:	7942                	ld	s2,48(sp)
+    80000c7e:	79a2                	ld	s3,40(sp)
+    80000c80:	7a02                	ld	s4,32(sp)
+    80000c82:	6ae2                	ld	s5,24(sp)
+    80000c84:	6b42                	ld	s6,16(sp)
+    80000c86:	6ba2                	ld	s7,8(sp)
+    80000c88:	6c02                	ld	s8,0(sp)
+    80000c8a:	6161                	addi	sp,sp,80
+    80000c8c:	8082                	ret
 
-000000008000174e <copyin>:
+0000000080000c8e <copyin>:
 int
 copyin(pagetable_t pagetable, char *dst, uint64 srcva, uint64 len)
 {
   uint64 n, va0, pa0;
 
   while(len > 0){
-    8000174e:	caa5                	beqz	a3,800017be <copyin+0x70>
+    80000c8e:	caa5                	beqz	a3,80000cfe <copyin+0x70>
 {
-    80001750:	715d                	addi	sp,sp,-80
-    80001752:	e486                	sd	ra,72(sp)
-    80001754:	e0a2                	sd	s0,64(sp)
-    80001756:	fc26                	sd	s1,56(sp)
-    80001758:	f84a                	sd	s2,48(sp)
-    8000175a:	f44e                	sd	s3,40(sp)
-    8000175c:	f052                	sd	s4,32(sp)
-    8000175e:	ec56                	sd	s5,24(sp)
-    80001760:	e85a                	sd	s6,16(sp)
-    80001762:	e45e                	sd	s7,8(sp)
-    80001764:	e062                	sd	s8,0(sp)
-    80001766:	0880                	addi	s0,sp,80
-    80001768:	8b2a                	mv	s6,a0
-    8000176a:	8a2e                	mv	s4,a1
-    8000176c:	8c32                	mv	s8,a2
-    8000176e:	89b6                	mv	s3,a3
+    80000c90:	715d                	addi	sp,sp,-80
+    80000c92:	e486                	sd	ra,72(sp)
+    80000c94:	e0a2                	sd	s0,64(sp)
+    80000c96:	fc26                	sd	s1,56(sp)
+    80000c98:	f84a                	sd	s2,48(sp)
+    80000c9a:	f44e                	sd	s3,40(sp)
+    80000c9c:	f052                	sd	s4,32(sp)
+    80000c9e:	ec56                	sd	s5,24(sp)
+    80000ca0:	e85a                	sd	s6,16(sp)
+    80000ca2:	e45e                	sd	s7,8(sp)
+    80000ca4:	e062                	sd	s8,0(sp)
+    80000ca6:	0880                	addi	s0,sp,80
+    80000ca8:	8b2a                	mv	s6,a0
+    80000caa:	8a2e                	mv	s4,a1
+    80000cac:	8c32                	mv	s8,a2
+    80000cae:	89b6                	mv	s3,a3
     va0 = PGROUNDDOWN(srcva);
-    80001770:	7bfd                	lui	s7,0xfffff
+    80000cb0:	7bfd                	lui	s7,0xfffff
     pa0 = walkaddr(pagetable, va0);
     if(pa0 == 0)
       return -1;
     n = PGSIZE - (srcva - va0);
-    80001772:	6a85                	lui	s5,0x1
-    80001774:	a01d                	j	8000179a <copyin+0x4c>
+    80000cb2:	6a85                	lui	s5,0x1
+    80000cb4:	a01d                	j	80000cda <copyin+0x4c>
     if(n > len)
       n = len;
     memmove(dst, (void *)(pa0 + (srcva - va0)), n);
-    80001776:	018505b3          	add	a1,a0,s8
-    8000177a:	0004861b          	sext.w	a2,s1
-    8000177e:	412585b3          	sub	a1,a1,s2
-    80001782:	8552                	mv	a0,s4
-    80001784:	fffff097          	auipc	ra,0xfffff
-    80001788:	5d4080e7          	jalr	1492(ra) # 80000d58 <memmove>
+    80000cb6:	018505b3          	add	a1,a0,s8
+    80000cba:	0004861b          	sext.w	a2,s1
+    80000cbe:	412585b3          	sub	a1,a1,s2
+    80000cc2:	8552                	mv	a0,s4
+    80000cc4:	fffff097          	auipc	ra,0xfffff
+    80000cc8:	536080e7          	jalr	1334(ra) # 800001fa <memmove>
 
     len -= n;
-    8000178c:	409989b3          	sub	s3,s3,s1
+    80000ccc:	409989b3          	sub	s3,s3,s1
     dst += n;
-    80001790:	9a26                	add	s4,s4,s1
+    80000cd0:	9a26                	add	s4,s4,s1
     srcva = va0 + PGSIZE;
-    80001792:	01590c33          	add	s8,s2,s5
+    80000cd2:	01590c33          	add	s8,s2,s5
   while(len > 0){
-    80001796:	02098263          	beqz	s3,800017ba <copyin+0x6c>
+    80000cd6:	02098263          	beqz	s3,80000cfa <copyin+0x6c>
     va0 = PGROUNDDOWN(srcva);
-    8000179a:	017c7933          	and	s2,s8,s7
+    80000cda:	017c7933          	and	s2,s8,s7
     pa0 = walkaddr(pagetable, va0);
-    8000179e:	85ca                	mv	a1,s2
-    800017a0:	855a                	mv	a0,s6
-    800017a2:	00000097          	auipc	ra,0x0
-    800017a6:	8e8080e7          	jalr	-1816(ra) # 8000108a <walkaddr>
+    80000cde:	85ca                	mv	a1,s2
+    80000ce0:	855a                	mv	a0,s6
+    80000ce2:	00000097          	auipc	ra,0x0
+    80000ce6:	918080e7          	jalr	-1768(ra) # 800005fa <walkaddr>
     if(pa0 == 0)
-    800017aa:	cd01                	beqz	a0,800017c2 <copyin+0x74>
+    80000cea:	cd01                	beqz	a0,80000d02 <copyin+0x74>
     n = PGSIZE - (srcva - va0);
-    800017ac:	418904b3          	sub	s1,s2,s8
-    800017b0:	94d6                	add	s1,s1,s5
-    800017b2:	fc99f2e3          	bgeu	s3,s1,80001776 <copyin+0x28>
-    800017b6:	84ce                	mv	s1,s3
-    800017b8:	bf7d                	j	80001776 <copyin+0x28>
+    80000cec:	418904b3          	sub	s1,s2,s8
+    80000cf0:	94d6                	add	s1,s1,s5
+    80000cf2:	fc99f2e3          	bgeu	s3,s1,80000cb6 <copyin+0x28>
+    80000cf6:	84ce                	mv	s1,s3
+    80000cf8:	bf7d                	j	80000cb6 <copyin+0x28>
   }
   return 0;
-    800017ba:	4501                	li	a0,0
-    800017bc:	a021                	j	800017c4 <copyin+0x76>
-    800017be:	4501                	li	a0,0
+    80000cfa:	4501                	li	a0,0
+    80000cfc:	a021                	j	80000d04 <copyin+0x76>
+    80000cfe:	4501                	li	a0,0
 }
-    800017c0:	8082                	ret
+    80000d00:	8082                	ret
       return -1;
-    800017c2:	557d                	li	a0,-1
+    80000d02:	557d                	li	a0,-1
 }
-    800017c4:	60a6                	ld	ra,72(sp)
-    800017c6:	6406                	ld	s0,64(sp)
-    800017c8:	74e2                	ld	s1,56(sp)
-    800017ca:	7942                	ld	s2,48(sp)
-    800017cc:	79a2                	ld	s3,40(sp)
-    800017ce:	7a02                	ld	s4,32(sp)
-    800017d0:	6ae2                	ld	s5,24(sp)
-    800017d2:	6b42                	ld	s6,16(sp)
-    800017d4:	6ba2                	ld	s7,8(sp)
-    800017d6:	6c02                	ld	s8,0(sp)
-    800017d8:	6161                	addi	sp,sp,80
-    800017da:	8082                	ret
+    80000d04:	60a6                	ld	ra,72(sp)
+    80000d06:	6406                	ld	s0,64(sp)
+    80000d08:	74e2                	ld	s1,56(sp)
+    80000d0a:	7942                	ld	s2,48(sp)
+    80000d0c:	79a2                	ld	s3,40(sp)
+    80000d0e:	7a02                	ld	s4,32(sp)
+    80000d10:	6ae2                	ld	s5,24(sp)
+    80000d12:	6b42                	ld	s6,16(sp)
+    80000d14:	6ba2                	ld	s7,8(sp)
+    80000d16:	6c02                	ld	s8,0(sp)
+    80000d18:	6161                	addi	sp,sp,80
+    80000d1a:	8082                	ret
 
-00000000800017dc <copyinstr>:
+0000000080000d1c <copyinstr>:
 copyinstr(pagetable_t pagetable, char *dst, uint64 srcva, uint64 max)
 {
   uint64 n, va0, pa0;
   int got_null = 0;
 
   while(got_null == 0 && max > 0){
-    800017dc:	c2dd                	beqz	a3,80001882 <copyinstr+0xa6>
+    80000d1c:	c2dd                	beqz	a3,80000dc2 <copyinstr+0xa6>
 {
-    800017de:	715d                	addi	sp,sp,-80
-    800017e0:	e486                	sd	ra,72(sp)
-    800017e2:	e0a2                	sd	s0,64(sp)
-    800017e4:	fc26                	sd	s1,56(sp)
-    800017e6:	f84a                	sd	s2,48(sp)
-    800017e8:	f44e                	sd	s3,40(sp)
-    800017ea:	f052                	sd	s4,32(sp)
-    800017ec:	ec56                	sd	s5,24(sp)
-    800017ee:	e85a                	sd	s6,16(sp)
-    800017f0:	e45e                	sd	s7,8(sp)
-    800017f2:	0880                	addi	s0,sp,80
-    800017f4:	8a2a                	mv	s4,a0
-    800017f6:	8b2e                	mv	s6,a1
-    800017f8:	8bb2                	mv	s7,a2
-    800017fa:	84b6                	mv	s1,a3
+    80000d1e:	715d                	addi	sp,sp,-80
+    80000d20:	e486                	sd	ra,72(sp)
+    80000d22:	e0a2                	sd	s0,64(sp)
+    80000d24:	fc26                	sd	s1,56(sp)
+    80000d26:	f84a                	sd	s2,48(sp)
+    80000d28:	f44e                	sd	s3,40(sp)
+    80000d2a:	f052                	sd	s4,32(sp)
+    80000d2c:	ec56                	sd	s5,24(sp)
+    80000d2e:	e85a                	sd	s6,16(sp)
+    80000d30:	e45e                	sd	s7,8(sp)
+    80000d32:	0880                	addi	s0,sp,80
+    80000d34:	8a2a                	mv	s4,a0
+    80000d36:	8b2e                	mv	s6,a1
+    80000d38:	8bb2                	mv	s7,a2
+    80000d3a:	84b6                	mv	s1,a3
     va0 = PGROUNDDOWN(srcva);
-    800017fc:	7afd                	lui	s5,0xfffff
+    80000d3c:	7afd                	lui	s5,0xfffff
     pa0 = walkaddr(pagetable, va0);
     if(pa0 == 0)
       return -1;
     n = PGSIZE - (srcva - va0);
-    800017fe:	6985                	lui	s3,0x1
-    80001800:	a02d                	j	8000182a <copyinstr+0x4e>
+    80000d3e:	6985                	lui	s3,0x1
+    80000d40:	a02d                	j	80000d6a <copyinstr+0x4e>
       n = max;
 
     char *p = (char *) (pa0 + (srcva - va0));
     while(n > 0){
       if(*p == '\0'){
         *dst = '\0';
-    80001802:	00078023          	sb	zero,0(a5) # 1000 <_entry-0x7ffff000>
-    80001806:	4785                	li	a5,1
+    80000d42:	00078023          	sb	zero,0(a5) # 1000 <_entry-0x7ffff000>
+    80000d46:	4785                	li	a5,1
       dst++;
     }
 
     srcva = va0 + PGSIZE;
   }
   if(got_null){
-    80001808:	37fd                	addiw	a5,a5,-1
-    8000180a:	0007851b          	sext.w	a0,a5
+    80000d48:	37fd                	addiw	a5,a5,-1
+    80000d4a:	0007851b          	sext.w	a0,a5
     return 0;
   } else {
     return -1;
   }
 }
-    8000180e:	60a6                	ld	ra,72(sp)
-    80001810:	6406                	ld	s0,64(sp)
-    80001812:	74e2                	ld	s1,56(sp)
-    80001814:	7942                	ld	s2,48(sp)
-    80001816:	79a2                	ld	s3,40(sp)
-    80001818:	7a02                	ld	s4,32(sp)
-    8000181a:	6ae2                	ld	s5,24(sp)
-    8000181c:	6b42                	ld	s6,16(sp)
-    8000181e:	6ba2                	ld	s7,8(sp)
-    80001820:	6161                	addi	sp,sp,80
-    80001822:	8082                	ret
+    80000d4e:	60a6                	ld	ra,72(sp)
+    80000d50:	6406                	ld	s0,64(sp)
+    80000d52:	74e2                	ld	s1,56(sp)
+    80000d54:	7942                	ld	s2,48(sp)
+    80000d56:	79a2                	ld	s3,40(sp)
+    80000d58:	7a02                	ld	s4,32(sp)
+    80000d5a:	6ae2                	ld	s5,24(sp)
+    80000d5c:	6b42                	ld	s6,16(sp)
+    80000d5e:	6ba2                	ld	s7,8(sp)
+    80000d60:	6161                	addi	sp,sp,80
+    80000d62:	8082                	ret
     srcva = va0 + PGSIZE;
-    80001824:	01390bb3          	add	s7,s2,s3
+    80000d64:	01390bb3          	add	s7,s2,s3
   while(got_null == 0 && max > 0){
-    80001828:	c8a9                	beqz	s1,8000187a <copyinstr+0x9e>
+    80000d68:	c8a9                	beqz	s1,80000dba <copyinstr+0x9e>
     va0 = PGROUNDDOWN(srcva);
-    8000182a:	015bf933          	and	s2,s7,s5
+    80000d6a:	015bf933          	and	s2,s7,s5
     pa0 = walkaddr(pagetable, va0);
-    8000182e:	85ca                	mv	a1,s2
-    80001830:	8552                	mv	a0,s4
-    80001832:	00000097          	auipc	ra,0x0
-    80001836:	858080e7          	jalr	-1960(ra) # 8000108a <walkaddr>
+    80000d6e:	85ca                	mv	a1,s2
+    80000d70:	8552                	mv	a0,s4
+    80000d72:	00000097          	auipc	ra,0x0
+    80000d76:	888080e7          	jalr	-1912(ra) # 800005fa <walkaddr>
     if(pa0 == 0)
-    8000183a:	c131                	beqz	a0,8000187e <copyinstr+0xa2>
+    80000d7a:	c131                	beqz	a0,80000dbe <copyinstr+0xa2>
     n = PGSIZE - (srcva - va0);
-    8000183c:	417906b3          	sub	a3,s2,s7
-    80001840:	96ce                	add	a3,a3,s3
-    80001842:	00d4f363          	bgeu	s1,a3,80001848 <copyinstr+0x6c>
-    80001846:	86a6                	mv	a3,s1
+    80000d7c:	417906b3          	sub	a3,s2,s7
+    80000d80:	96ce                	add	a3,a3,s3
+    80000d82:	00d4f363          	bgeu	s1,a3,80000d88 <copyinstr+0x6c>
+    80000d86:	86a6                	mv	a3,s1
     char *p = (char *) (pa0 + (srcva - va0));
-    80001848:	955e                	add	a0,a0,s7
-    8000184a:	41250533          	sub	a0,a0,s2
+    80000d88:	955e                	add	a0,a0,s7
+    80000d8a:	41250533          	sub	a0,a0,s2
     while(n > 0){
-    8000184e:	daf9                	beqz	a3,80001824 <copyinstr+0x48>
-    80001850:	87da                	mv	a5,s6
+    80000d8e:	daf9                	beqz	a3,80000d64 <copyinstr+0x48>
+    80000d90:	87da                	mv	a5,s6
       if(*p == '\0'){
-    80001852:	41650633          	sub	a2,a0,s6
-    80001856:	fff48593          	addi	a1,s1,-1
-    8000185a:	95da                	add	a1,a1,s6
+    80000d92:	41650633          	sub	a2,a0,s6
+    80000d96:	fff48593          	addi	a1,s1,-1
+    80000d9a:	95da                	add	a1,a1,s6
     while(n > 0){
-    8000185c:	96da                	add	a3,a3,s6
+    80000d9c:	96da                	add	a3,a3,s6
       if(*p == '\0'){
-    8000185e:	00f60733          	add	a4,a2,a5
-    80001862:	00074703          	lbu	a4,0(a4)
-    80001866:	df51                	beqz	a4,80001802 <copyinstr+0x26>
+    80000d9e:	00f60733          	add	a4,a2,a5
+    80000da2:	00074703          	lbu	a4,0(a4) # fffffffffffff000 <end+0xffffffff7ffd8dc0>
+    80000da6:	df51                	beqz	a4,80000d42 <copyinstr+0x26>
         *dst = *p;
-    80001868:	00e78023          	sb	a4,0(a5)
+    80000da8:	00e78023          	sb	a4,0(a5)
       --max;
-    8000186c:	40f584b3          	sub	s1,a1,a5
+    80000dac:	40f584b3          	sub	s1,a1,a5
       dst++;
-    80001870:	0785                	addi	a5,a5,1
+    80000db0:	0785                	addi	a5,a5,1
     while(n > 0){
-    80001872:	fed796e3          	bne	a5,a3,8000185e <copyinstr+0x82>
+    80000db2:	fed796e3          	bne	a5,a3,80000d9e <copyinstr+0x82>
       dst++;
-    80001876:	8b3e                	mv	s6,a5
-    80001878:	b775                	j	80001824 <copyinstr+0x48>
-    8000187a:	4781                	li	a5,0
-    8000187c:	b771                	j	80001808 <copyinstr+0x2c>
+    80000db6:	8b3e                	mv	s6,a5
+    80000db8:	b775                	j	80000d64 <copyinstr+0x48>
+    80000dba:	4781                	li	a5,0
+    80000dbc:	b771                	j	80000d48 <copyinstr+0x2c>
       return -1;
-    8000187e:	557d                	li	a0,-1
-    80001880:	b779                	j	8000180e <copyinstr+0x32>
+    80000dbe:	557d                	li	a0,-1
+    80000dc0:	b779                	j	80000d4e <copyinstr+0x32>
   int got_null = 0;
-    80001882:	4781                	li	a5,0
+    80000dc2:	4781                	li	a5,0
   if(got_null){
-    80001884:	37fd                	addiw	a5,a5,-1
-    80001886:	0007851b          	sext.w	a0,a5
+    80000dc4:	37fd                	addiw	a5,a5,-1
+    80000dc6:	0007851b          	sext.w	a0,a5
 }
-    8000188a:	8082                	ret
+    80000dca:	8082                	ret
 
-000000008000188c <wakeup1>:
+0000000080000dcc <proc_mapstacks>:
 
-// Wake up p if it is sleeping in wait(); used by exit().
-// Caller must hold p->lock.
-static void
-wakeup1(struct proc *p)
-{
-    8000188c:	1101                	addi	sp,sp,-32
-    8000188e:	ec06                	sd	ra,24(sp)
-    80001890:	e822                	sd	s0,16(sp)
-    80001892:	e426                	sd	s1,8(sp)
-    80001894:	1000                	addi	s0,sp,32
-    80001896:	84aa                	mv	s1,a0
-  if(!holding(&p->lock))
-    80001898:	fffff097          	auipc	ra,0xfffff
-    8000189c:	2ee080e7          	jalr	750(ra) # 80000b86 <holding>
-    800018a0:	c909                	beqz	a0,800018b2 <wakeup1+0x26>
-    panic("wakeup1");
-  if(p->chan == p && p->state == SLEEPING) {
-    800018a2:	749c                	ld	a5,40(s1)
-    800018a4:	00978f63          	beq	a5,s1,800018c2 <wakeup1+0x36>
-    p->state = RUNNABLE;
-  }
-}
-    800018a8:	60e2                	ld	ra,24(sp)
-    800018aa:	6442                	ld	s0,16(sp)
-    800018ac:	64a2                	ld	s1,8(sp)
-    800018ae:	6105                	addi	sp,sp,32
-    800018b0:	8082                	ret
-    panic("wakeup1");
-    800018b2:	00007517          	auipc	a0,0x7
-    800018b6:	91650513          	addi	a0,a0,-1770 # 800081c8 <digits+0x188>
-    800018ba:	fffff097          	auipc	ra,0xfffff
-    800018be:	c8c080e7          	jalr	-884(ra) # 80000546 <panic>
-  if(p->chan == p && p->state == SLEEPING) {
-    800018c2:	4c98                	lw	a4,24(s1)
-    800018c4:	4785                	li	a5,1
-    800018c6:	fef711e3          	bne	a4,a5,800018a8 <wakeup1+0x1c>
-    p->state = RUNNABLE;
-    800018ca:	4789                	li	a5,2
-    800018cc:	cc9c                	sw	a5,24(s1)
-}
-    800018ce:	bfe9                	j	800018a8 <wakeup1+0x1c>
-
-00000000800018d0 <procinit>:
-{
-    800018d0:	715d                	addi	sp,sp,-80
-    800018d2:	e486                	sd	ra,72(sp)
-    800018d4:	e0a2                	sd	s0,64(sp)
-    800018d6:	fc26                	sd	s1,56(sp)
-    800018d8:	f84a                	sd	s2,48(sp)
-    800018da:	f44e                	sd	s3,40(sp)
-    800018dc:	f052                	sd	s4,32(sp)
-    800018de:	ec56                	sd	s5,24(sp)
-    800018e0:	e85a                	sd	s6,16(sp)
-    800018e2:	e45e                	sd	s7,8(sp)
-    800018e4:	0880                	addi	s0,sp,80
+// Allocate a page for each process's kernel stack.
+// Map it high in memory, followed by an invalid
+// guard page.
+void
+proc_mapstacks(pagetable_t kpgtbl) {
+    80000dcc:	7139                	addi	sp,sp,-64
+    80000dce:	fc06                	sd	ra,56(sp)
+    80000dd0:	f822                	sd	s0,48(sp)
+    80000dd2:	f426                	sd	s1,40(sp)
+    80000dd4:	f04a                	sd	s2,32(sp)
+    80000dd6:	ec4e                	sd	s3,24(sp)
+    80000dd8:	e852                	sd	s4,16(sp)
+    80000dda:	e456                	sd	s5,8(sp)
+    80000ddc:	e05a                	sd	s6,0(sp)
+    80000dde:	0080                	addi	s0,sp,64
+    80000de0:	89aa                	mv	s3,a0
+  struct proc *p;
+  
+  for(p = proc; p < &proc[NPROC]; p++) {
+    80000de2:	00008497          	auipc	s1,0x8
+    80000de6:	69e48493          	addi	s1,s1,1694 # 80009480 <proc>
+    char *pa = kalloc();
+    if(pa == 0)
+      panic("kalloc");
+    uint64 va = KSTACK((int) (p - proc));
+    80000dea:	8b26                	mv	s6,s1
+    80000dec:	00007a97          	auipc	s5,0x7
+    80000df0:	214a8a93          	addi	s5,s5,532 # 80008000 <etext>
+    80000df4:	04000937          	lui	s2,0x4000
+    80000df8:	197d                	addi	s2,s2,-1
+    80000dfa:	0932                	slli	s2,s2,0xc
+  for(p = proc; p < &proc[NPROC]; p++) {
+    80000dfc:	0000ea17          	auipc	s4,0xe
+    80000e00:	284a0a13          	addi	s4,s4,644 # 8000f080 <tickslock>
+    char *pa = kalloc();
+    80000e04:	fffff097          	auipc	ra,0xfffff
+    80000e08:	316080e7          	jalr	790(ra) # 8000011a <kalloc>
+    80000e0c:	862a                	mv	a2,a0
+    if(pa == 0)
+    80000e0e:	c131                	beqz	a0,80000e52 <proc_mapstacks+0x86>
+    uint64 va = KSTACK((int) (p - proc));
+    80000e10:	416485b3          	sub	a1,s1,s6
+    80000e14:	8591                	srai	a1,a1,0x4
+    80000e16:	000ab783          	ld	a5,0(s5)
+    80000e1a:	02f585b3          	mul	a1,a1,a5
+    80000e1e:	2585                	addiw	a1,a1,1
+    80000e20:	00d5959b          	slliw	a1,a1,0xd
+    kvmmap(kpgtbl, va, (uint64)pa, PGSIZE, PTE_R | PTE_W);
+    80000e24:	4719                	li	a4,6
+    80000e26:	6685                	lui	a3,0x1
+    80000e28:	40b905b3          	sub	a1,s2,a1
+    80000e2c:	854e                	mv	a0,s3
+    80000e2e:	00000097          	auipc	ra,0x0
+    80000e32:	8ae080e7          	jalr	-1874(ra) # 800006dc <kvmmap>
+  for(p = proc; p < &proc[NPROC]; p++) {
+    80000e36:	17048493          	addi	s1,s1,368
+    80000e3a:	fd4495e3          	bne	s1,s4,80000e04 <proc_mapstacks+0x38>
+  }
+}
+    80000e3e:	70e2                	ld	ra,56(sp)
+    80000e40:	7442                	ld	s0,48(sp)
+    80000e42:	74a2                	ld	s1,40(sp)
+    80000e44:	7902                	ld	s2,32(sp)
+    80000e46:	69e2                	ld	s3,24(sp)
+    80000e48:	6a42                	ld	s4,16(sp)
+    80000e4a:	6aa2                	ld	s5,8(sp)
+    80000e4c:	6b02                	ld	s6,0(sp)
+    80000e4e:	6121                	addi	sp,sp,64
+    80000e50:	8082                	ret
+      panic("kalloc");
+    80000e52:	00007517          	auipc	a0,0x7
+    80000e56:	33650513          	addi	a0,a0,822 # 80008188 <etext+0x188>
+    80000e5a:	00005097          	auipc	ra,0x5
+    80000e5e:	e96080e7          	jalr	-362(ra) # 80005cf0 <panic>
+
+0000000080000e62 <procinit>:
+
+// initialize the proc table at boot time.
+void
+procinit(void)
+{
+    80000e62:	7139                	addi	sp,sp,-64
+    80000e64:	fc06                	sd	ra,56(sp)
+    80000e66:	f822                	sd	s0,48(sp)
+    80000e68:	f426                	sd	s1,40(sp)
+    80000e6a:	f04a                	sd	s2,32(sp)
+    80000e6c:	ec4e                	sd	s3,24(sp)
+    80000e6e:	e852                	sd	s4,16(sp)
+    80000e70:	e456                	sd	s5,8(sp)
+    80000e72:	e05a                	sd	s6,0(sp)
+    80000e74:	0080                	addi	s0,sp,64
+  struct proc *p;
+  
   initlock(&pid_lock, "nextpid");
-    800018e6:	00007597          	auipc	a1,0x7
-    800018ea:	8ea58593          	addi	a1,a1,-1814 # 800081d0 <digits+0x190>
-    800018ee:	00010517          	auipc	a0,0x10
-    800018f2:	06250513          	addi	a0,a0,98 # 80011950 <pid_lock>
-    800018f6:	fffff097          	auipc	ra,0xfffff
-    800018fa:	27a080e7          	jalr	634(ra) # 80000b70 <initlock>
+    80000e76:	00007597          	auipc	a1,0x7
+    80000e7a:	31a58593          	addi	a1,a1,794 # 80008190 <etext+0x190>
+    80000e7e:	00008517          	auipc	a0,0x8
+    80000e82:	1d250513          	addi	a0,a0,466 # 80009050 <pid_lock>
+    80000e86:	00005097          	auipc	ra,0x5
+    80000e8a:	312080e7          	jalr	786(ra) # 80006198 <initlock>
+  initlock(&wait_lock, "wait_lock");
+    80000e8e:	00007597          	auipc	a1,0x7
+    80000e92:	30a58593          	addi	a1,a1,778 # 80008198 <etext+0x198>
+    80000e96:	00008517          	auipc	a0,0x8
+    80000e9a:	1d250513          	addi	a0,a0,466 # 80009068 <wait_lock>
+    80000e9e:	00005097          	auipc	ra,0x5
+    80000ea2:	2fa080e7          	jalr	762(ra) # 80006198 <initlock>
   for(p = proc; p < &proc[NPROC]; p++) {
-    800018fe:	00010917          	auipc	s2,0x10
-    80001902:	46a90913          	addi	s2,s2,1130 # 80011d68 <proc>
+    80000ea6:	00008497          	auipc	s1,0x8
+    80000eaa:	5da48493          	addi	s1,s1,1498 # 80009480 <proc>
       initlock(&p->lock, "proc");
-    80001906:	00007b97          	auipc	s7,0x7
-    8000190a:	8d2b8b93          	addi	s7,s7,-1838 # 800081d8 <digits+0x198>
-      uint64 va = KSTACK((int) (p - proc));
-    8000190e:	8b4a                	mv	s6,s2
-    80001910:	00006a97          	auipc	s5,0x6
-    80001914:	6f0a8a93          	addi	s5,s5,1776 # 80008000 <etext>
-    80001918:	040009b7          	lui	s3,0x4000
-    8000191c:	19fd                	addi	s3,s3,-1
-    8000191e:	09b2                	slli	s3,s3,0xc
+    80000eae:	00007b17          	auipc	s6,0x7
+    80000eb2:	2fab0b13          	addi	s6,s6,762 # 800081a8 <etext+0x1a8>
+      p->kstack = KSTACK((int) (p - proc));
+    80000eb6:	8aa6                	mv	s5,s1
+    80000eb8:	00007a17          	auipc	s4,0x7
+    80000ebc:	148a0a13          	addi	s4,s4,328 # 80008000 <etext>
+    80000ec0:	04000937          	lui	s2,0x4000
+    80000ec4:	197d                	addi	s2,s2,-1
+    80000ec6:	0932                	slli	s2,s2,0xc
   for(p = proc; p < &proc[NPROC]; p++) {
-    80001920:	00016a17          	auipc	s4,0x16
-    80001924:	e48a0a13          	addi	s4,s4,-440 # 80017768 <tickslock>
+    80000ec8:	0000e997          	auipc	s3,0xe
+    80000ecc:	1b898993          	addi	s3,s3,440 # 8000f080 <tickslock>
       initlock(&p->lock, "proc");
-    80001928:	85de                	mv	a1,s7
-    8000192a:	854a                	mv	a0,s2
-    8000192c:	fffff097          	auipc	ra,0xfffff
-    80001930:	244080e7          	jalr	580(ra) # 80000b70 <initlock>
-      char *pa = kalloc();
-    80001934:	fffff097          	auipc	ra,0xfffff
-    80001938:	1dc080e7          	jalr	476(ra) # 80000b10 <kalloc>
-    8000193c:	85aa                	mv	a1,a0
-      if(pa == 0)
-    8000193e:	c929                	beqz	a0,80001990 <procinit+0xc0>
-      uint64 va = KSTACK((int) (p - proc));
-    80001940:	416904b3          	sub	s1,s2,s6
-    80001944:	848d                	srai	s1,s1,0x3
-    80001946:	000ab783          	ld	a5,0(s5)
-    8000194a:	02f484b3          	mul	s1,s1,a5
-    8000194e:	2485                	addiw	s1,s1,1
-    80001950:	00d4949b          	slliw	s1,s1,0xd
-    80001954:	409984b3          	sub	s1,s3,s1
-      kvmmap(va, (uint64)pa, PGSIZE, PTE_R | PTE_W);
-    80001958:	4699                	li	a3,6
-    8000195a:	6605                	lui	a2,0x1
-    8000195c:	8526                	mv	a0,s1
-    8000195e:	00000097          	auipc	ra,0x0
-    80001962:	85a080e7          	jalr	-1958(ra) # 800011b8 <kvmmap>
-      p->kstack = va;
-    80001966:	04993023          	sd	s1,64(s2)
+    80000ed0:	85da                	mv	a1,s6
+    80000ed2:	8526                	mv	a0,s1
+    80000ed4:	00005097          	auipc	ra,0x5
+    80000ed8:	2c4080e7          	jalr	708(ra) # 80006198 <initlock>
+      p->kstack = KSTACK((int) (p - proc));
+    80000edc:	415487b3          	sub	a5,s1,s5
+    80000ee0:	8791                	srai	a5,a5,0x4
+    80000ee2:	000a3703          	ld	a4,0(s4)
+    80000ee6:	02e787b3          	mul	a5,a5,a4
+    80000eea:	2785                	addiw	a5,a5,1
+    80000eec:	00d7979b          	slliw	a5,a5,0xd
+    80000ef0:	40f907b3          	sub	a5,s2,a5
+    80000ef4:	e0bc                	sd	a5,64(s1)
   for(p = proc; p < &proc[NPROC]; p++) {
-    8000196a:	16890913          	addi	s2,s2,360
-    8000196e:	fb491de3          	bne	s2,s4,80001928 <procinit+0x58>
-  kvminithart();
-    80001972:	fffff097          	auipc	ra,0xfffff
-    80001976:	64e080e7          	jalr	1614(ra) # 80000fc0 <kvminithart>
-}
-    8000197a:	60a6                	ld	ra,72(sp)
-    8000197c:	6406                	ld	s0,64(sp)
-    8000197e:	74e2                	ld	s1,56(sp)
-    80001980:	7942                	ld	s2,48(sp)
-    80001982:	79a2                	ld	s3,40(sp)
-    80001984:	7a02                	ld	s4,32(sp)
-    80001986:	6ae2                	ld	s5,24(sp)
-    80001988:	6b42                	ld	s6,16(sp)
-    8000198a:	6ba2                	ld	s7,8(sp)
-    8000198c:	6161                	addi	sp,sp,80
-    8000198e:	8082                	ret
-        panic("kalloc");
-    80001990:	00007517          	auipc	a0,0x7
-    80001994:	85050513          	addi	a0,a0,-1968 # 800081e0 <digits+0x1a0>
-    80001998:	fffff097          	auipc	ra,0xfffff
-    8000199c:	bae080e7          	jalr	-1106(ra) # 80000546 <panic>
-
-00000000800019a0 <cpuid>:
-{
-    800019a0:	1141                	addi	sp,sp,-16
-    800019a2:	e422                	sd	s0,8(sp)
-    800019a4:	0800                	addi	s0,sp,16
-  asm volatile("mv %0, tp" : "=r" (x) );
-    800019a6:	8512                	mv	a0,tp
+    80000ef6:	17048493          	addi	s1,s1,368
+    80000efa:	fd349be3          	bne	s1,s3,80000ed0 <procinit+0x6e>
+  }
 }
-    800019a8:	2501                	sext.w	a0,a0
-    800019aa:	6422                	ld	s0,8(sp)
-    800019ac:	0141                	addi	sp,sp,16
-    800019ae:	8082                	ret
-
-00000000800019b0 <mycpu>:
-mycpu(void) {
-    800019b0:	1141                	addi	sp,sp,-16
-    800019b2:	e422                	sd	s0,8(sp)
-    800019b4:	0800                	addi	s0,sp,16
-    800019b6:	8792                	mv	a5,tp
-  struct cpu *c = &cpus[id];
-    800019b8:	2781                	sext.w	a5,a5
-    800019ba:	079e                	slli	a5,a5,0x7
+    80000efe:	70e2                	ld	ra,56(sp)
+    80000f00:	7442                	ld	s0,48(sp)
+    80000f02:	74a2                	ld	s1,40(sp)
+    80000f04:	7902                	ld	s2,32(sp)
+    80000f06:	69e2                	ld	s3,24(sp)
+    80000f08:	6a42                	ld	s4,16(sp)
+    80000f0a:	6aa2                	ld	s5,8(sp)
+    80000f0c:	6b02                	ld	s6,0(sp)
+    80000f0e:	6121                	addi	sp,sp,64
+    80000f10:	8082                	ret
+
+0000000080000f12 <cpuid>:
+// Must be called with interrupts disabled,
+// to prevent race with process being moved
+// to a different CPU.
+int
+cpuid()
+{
+    80000f12:	1141                	addi	sp,sp,-16
+    80000f14:	e422                	sd	s0,8(sp)
+    80000f16:	0800                	addi	s0,sp,16
+  asm volatile("mv %0, tp" : "=r" (x) );
+    80000f18:	8512                	mv	a0,tp
+  int id = r_tp();
+  return id;
 }
-    800019bc:	00010517          	auipc	a0,0x10
-    800019c0:	fac50513          	addi	a0,a0,-84 # 80011968 <cpus>
-    800019c4:	953e                	add	a0,a0,a5
-    800019c6:	6422                	ld	s0,8(sp)
-    800019c8:	0141                	addi	sp,sp,16
-    800019ca:	8082                	ret
+    80000f1a:	2501                	sext.w	a0,a0
+    80000f1c:	6422                	ld	s0,8(sp)
+    80000f1e:	0141                	addi	sp,sp,16
+    80000f20:	8082                	ret
+
+0000000080000f22 <mycpu>:
+
+// Return this CPU's cpu struct.
+// Interrupts must be disabled.
+struct cpu*
+mycpu(void) {
+    80000f22:	1141                	addi	sp,sp,-16
+    80000f24:	e422                	sd	s0,8(sp)
+    80000f26:	0800                	addi	s0,sp,16
+    80000f28:	8792                	mv	a5,tp
+  int id = cpuid();
+  struct cpu *c = &cpus[id];
+    80000f2a:	2781                	sext.w	a5,a5
+    80000f2c:	079e                	slli	a5,a5,0x7
+  return c;
+}
+    80000f2e:	00008517          	auipc	a0,0x8
+    80000f32:	15250513          	addi	a0,a0,338 # 80009080 <cpus>
+    80000f36:	953e                	add	a0,a0,a5
+    80000f38:	6422                	ld	s0,8(sp)
+    80000f3a:	0141                	addi	sp,sp,16
+    80000f3c:	8082                	ret
+
+0000000080000f3e <myproc>:
 
-00000000800019cc <myproc>:
+// Return the current struct proc *, or zero if none.
+struct proc*
 myproc(void) {
-    800019cc:	1101                	addi	sp,sp,-32
-    800019ce:	ec06                	sd	ra,24(sp)
-    800019d0:	e822                	sd	s0,16(sp)
-    800019d2:	e426                	sd	s1,8(sp)
-    800019d4:	1000                	addi	s0,sp,32
+    80000f3e:	1101                	addi	sp,sp,-32
+    80000f40:	ec06                	sd	ra,24(sp)
+    80000f42:	e822                	sd	s0,16(sp)
+    80000f44:	e426                	sd	s1,8(sp)
+    80000f46:	1000                	addi	s0,sp,32
   push_off();
-    800019d6:	fffff097          	auipc	ra,0xfffff
-    800019da:	1de080e7          	jalr	478(ra) # 80000bb4 <push_off>
-    800019de:	8792                	mv	a5,tp
+    80000f48:	00005097          	auipc	ra,0x5
+    80000f4c:	294080e7          	jalr	660(ra) # 800061dc <push_off>
+    80000f50:	8792                	mv	a5,tp
+  struct cpu *c = mycpu();
   struct proc *p = c->proc;
-    800019e0:	2781                	sext.w	a5,a5
-    800019e2:	079e                	slli	a5,a5,0x7
-    800019e4:	00010717          	auipc	a4,0x10
-    800019e8:	f6c70713          	addi	a4,a4,-148 # 80011950 <pid_lock>
-    800019ec:	97ba                	add	a5,a5,a4
-    800019ee:	6f84                	ld	s1,24(a5)
+    80000f52:	2781                	sext.w	a5,a5
+    80000f54:	079e                	slli	a5,a5,0x7
+    80000f56:	00008717          	auipc	a4,0x8
+    80000f5a:	0fa70713          	addi	a4,a4,250 # 80009050 <pid_lock>
+    80000f5e:	97ba                	add	a5,a5,a4
+    80000f60:	7b84                	ld	s1,48(a5)
   pop_off();
-    800019f0:	fffff097          	auipc	ra,0xfffff
-    800019f4:	264080e7          	jalr	612(ra) # 80000c54 <pop_off>
-}
-    800019f8:	8526                	mv	a0,s1
-    800019fa:	60e2                	ld	ra,24(sp)
-    800019fc:	6442                	ld	s0,16(sp)
-    800019fe:	64a2                	ld	s1,8(sp)
-    80001a00:	6105                	addi	sp,sp,32
-    80001a02:	8082                	ret
-
-0000000080001a04 <forkret>:
-{
-    80001a04:	1141                	addi	sp,sp,-16
-    80001a06:	e406                	sd	ra,8(sp)
-    80001a08:	e022                	sd	s0,0(sp)
-    80001a0a:	0800                	addi	s0,sp,16
+    80000f62:	00005097          	auipc	ra,0x5
+    80000f66:	31a080e7          	jalr	794(ra) # 8000627c <pop_off>
+  return p;
+}
+    80000f6a:	8526                	mv	a0,s1
+    80000f6c:	60e2                	ld	ra,24(sp)
+    80000f6e:	6442                	ld	s0,16(sp)
+    80000f70:	64a2                	ld	s1,8(sp)
+    80000f72:	6105                	addi	sp,sp,32
+    80000f74:	8082                	ret
+
+0000000080000f76 <forkret>:
+
+// A fork child's very first scheduling by scheduler()
+// will swtch to forkret.
+void
+forkret(void)
+{
+    80000f76:	1141                	addi	sp,sp,-16
+    80000f78:	e406                	sd	ra,8(sp)
+    80000f7a:	e022                	sd	s0,0(sp)
+    80000f7c:	0800                	addi	s0,sp,16
+  static int first = 1;
+
+  // Still holding p->lock from scheduler.
   release(&myproc()->lock);
-    80001a0c:	00000097          	auipc	ra,0x0
-    80001a10:	fc0080e7          	jalr	-64(ra) # 800019cc <myproc>
-    80001a14:	fffff097          	auipc	ra,0xfffff
-    80001a18:	2a0080e7          	jalr	672(ra) # 80000cb4 <release>
+    80000f7e:	00000097          	auipc	ra,0x0
+    80000f82:	fc0080e7          	jalr	-64(ra) # 80000f3e <myproc>
+    80000f86:	00005097          	auipc	ra,0x5
+    80000f8a:	356080e7          	jalr	854(ra) # 800062dc <release>
+
   if (first) {
-    80001a1c:	00007797          	auipc	a5,0x7
-    80001a20:	df47a783          	lw	a5,-524(a5) # 80008810 <first.1>
-    80001a24:	eb89                	bnez	a5,80001a36 <forkret+0x32>
+    80000f8e:	00008797          	auipc	a5,0x8
+    80000f92:	a427a783          	lw	a5,-1470(a5) # 800089d0 <first.1>
+    80000f96:	eb89                	bnez	a5,80000fa8 <forkret+0x32>
+    // be run from main().
+    first = 0;
+    fsinit(ROOTDEV);
+  }
+
   usertrapret();
-    80001a26:	00001097          	auipc	ra,0x1
-    80001a2a:	c1a080e7          	jalr	-998(ra) # 80002640 <usertrapret>
+    80000f98:	00001097          	auipc	ra,0x1
+    80000f9c:	c4a080e7          	jalr	-950(ra) # 80001be2 <usertrapret>
 }
-    80001a2e:	60a2                	ld	ra,8(sp)
-    80001a30:	6402                	ld	s0,0(sp)
-    80001a32:	0141                	addi	sp,sp,16
-    80001a34:	8082                	ret
+    80000fa0:	60a2                	ld	ra,8(sp)
+    80000fa2:	6402                	ld	s0,0(sp)
+    80000fa4:	0141                	addi	sp,sp,16
+    80000fa6:	8082                	ret
     first = 0;
-    80001a36:	00007797          	auipc	a5,0x7
-    80001a3a:	dc07ad23          	sw	zero,-550(a5) # 80008810 <first.1>
+    80000fa8:	00008797          	auipc	a5,0x8
+    80000fac:	a207a423          	sw	zero,-1496(a5) # 800089d0 <first.1>
     fsinit(ROOTDEV);
-    80001a3e:	4505                	li	a0,1
-    80001a40:	00002097          	auipc	ra,0x2
-    80001a44:	940080e7          	jalr	-1728(ra) # 80003380 <fsinit>
-    80001a48:	bff9                	j	80001a26 <forkret+0x22>
+    80000fb0:	4505                	li	a0,1
+    80000fb2:	00002097          	auipc	ra,0x2
+    80000fb6:	a42080e7          	jalr	-1470(ra) # 800029f4 <fsinit>
+    80000fba:	bff9                	j	80000f98 <forkret+0x22>
 
-0000000080001a4a <allocpid>:
+0000000080000fbc <allocpid>:
 allocpid() {
-    80001a4a:	1101                	addi	sp,sp,-32
-    80001a4c:	ec06                	sd	ra,24(sp)
-    80001a4e:	e822                	sd	s0,16(sp)
-    80001a50:	e426                	sd	s1,8(sp)
-    80001a52:	e04a                	sd	s2,0(sp)
-    80001a54:	1000                	addi	s0,sp,32
+    80000fbc:	1101                	addi	sp,sp,-32
+    80000fbe:	ec06                	sd	ra,24(sp)
+    80000fc0:	e822                	sd	s0,16(sp)
+    80000fc2:	e426                	sd	s1,8(sp)
+    80000fc4:	e04a                	sd	s2,0(sp)
+    80000fc6:	1000                	addi	s0,sp,32
   acquire(&pid_lock);
-    80001a56:	00010917          	auipc	s2,0x10
-    80001a5a:	efa90913          	addi	s2,s2,-262 # 80011950 <pid_lock>
-    80001a5e:	854a                	mv	a0,s2
-    80001a60:	fffff097          	auipc	ra,0xfffff
-    80001a64:	1a0080e7          	jalr	416(ra) # 80000c00 <acquire>
+    80000fc8:	00008917          	auipc	s2,0x8
+    80000fcc:	08890913          	addi	s2,s2,136 # 80009050 <pid_lock>
+    80000fd0:	854a                	mv	a0,s2
+    80000fd2:	00005097          	auipc	ra,0x5
+    80000fd6:	256080e7          	jalr	598(ra) # 80006228 <acquire>
   pid = nextpid;
-    80001a68:	00007797          	auipc	a5,0x7
-    80001a6c:	dac78793          	addi	a5,a5,-596 # 80008814 <nextpid>
-    80001a70:	4384                	lw	s1,0(a5)
+    80000fda:	00008797          	auipc	a5,0x8
+    80000fde:	9fa78793          	addi	a5,a5,-1542 # 800089d4 <nextpid>
+    80000fe2:	4384                	lw	s1,0(a5)
   nextpid = nextpid + 1;
-    80001a72:	0014871b          	addiw	a4,s1,1
-    80001a76:	c398                	sw	a4,0(a5)
+    80000fe4:	0014871b          	addiw	a4,s1,1
+    80000fe8:	c398                	sw	a4,0(a5)
   release(&pid_lock);
-    80001a78:	854a                	mv	a0,s2
-    80001a7a:	fffff097          	auipc	ra,0xfffff
-    80001a7e:	23a080e7          	jalr	570(ra) # 80000cb4 <release>
-}
-    80001a82:	8526                	mv	a0,s1
-    80001a84:	60e2                	ld	ra,24(sp)
-    80001a86:	6442                	ld	s0,16(sp)
-    80001a88:	64a2                	ld	s1,8(sp)
-    80001a8a:	6902                	ld	s2,0(sp)
-    80001a8c:	6105                	addi	sp,sp,32
-    80001a8e:	8082                	ret
-
-0000000080001a90 <proc_pagetable>:
-{
-    80001a90:	1101                	addi	sp,sp,-32
-    80001a92:	ec06                	sd	ra,24(sp)
-    80001a94:	e822                	sd	s0,16(sp)
-    80001a96:	e426                	sd	s1,8(sp)
-    80001a98:	e04a                	sd	s2,0(sp)
-    80001a9a:	1000                	addi	s0,sp,32
-    80001a9c:	892a                	mv	s2,a0
+    80000fea:	854a                	mv	a0,s2
+    80000fec:	00005097          	auipc	ra,0x5
+    80000ff0:	2f0080e7          	jalr	752(ra) # 800062dc <release>
+}
+    80000ff4:	8526                	mv	a0,s1
+    80000ff6:	60e2                	ld	ra,24(sp)
+    80000ff8:	6442                	ld	s0,16(sp)
+    80000ffa:	64a2                	ld	s1,8(sp)
+    80000ffc:	6902                	ld	s2,0(sp)
+    80000ffe:	6105                	addi	sp,sp,32
+    80001000:	8082                	ret
+
+0000000080001002 <proc_pagetable>:
+{
+    80001002:	1101                	addi	sp,sp,-32
+    80001004:	ec06                	sd	ra,24(sp)
+    80001006:	e822                	sd	s0,16(sp)
+    80001008:	e426                	sd	s1,8(sp)
+    8000100a:	e04a                	sd	s2,0(sp)
+    8000100c:	1000                	addi	s0,sp,32
+    8000100e:	892a                	mv	s2,a0
   pagetable = uvmcreate();
-    80001a9e:	00000097          	auipc	ra,0x0
-    80001aa2:	8e8080e7          	jalr	-1816(ra) # 80001386 <uvmcreate>
-    80001aa6:	84aa                	mv	s1,a0
+    80001010:	00000097          	auipc	ra,0x0
+    80001014:	8b6080e7          	jalr	-1866(ra) # 800008c6 <uvmcreate>
+    80001018:	84aa                	mv	s1,a0
   if(pagetable == 0)
-    80001aa8:	c121                	beqz	a0,80001ae8 <proc_pagetable+0x58>
+    8000101a:	c121                	beqz	a0,8000105a <proc_pagetable+0x58>
   if(mappages(pagetable, TRAMPOLINE, PGSIZE,
-    80001aaa:	4729                	li	a4,10
-    80001aac:	00005697          	auipc	a3,0x5
-    80001ab0:	55468693          	addi	a3,a3,1364 # 80007000 <_trampoline>
-    80001ab4:	6605                	lui	a2,0x1
-    80001ab6:	040005b7          	lui	a1,0x4000
-    80001aba:	15fd                	addi	a1,a1,-1
-    80001abc:	05b2                	slli	a1,a1,0xc
-    80001abe:	fffff097          	auipc	ra,0xfffff
-    80001ac2:	66c080e7          	jalr	1644(ra) # 8000112a <mappages>
-    80001ac6:	02054863          	bltz	a0,80001af6 <proc_pagetable+0x66>
+    8000101c:	4729                	li	a4,10
+    8000101e:	00006697          	auipc	a3,0x6
+    80001022:	fe268693          	addi	a3,a3,-30 # 80007000 <_trampoline>
+    80001026:	6605                	lui	a2,0x1
+    80001028:	040005b7          	lui	a1,0x4000
+    8000102c:	15fd                	addi	a1,a1,-1
+    8000102e:	05b2                	slli	a1,a1,0xc
+    80001030:	fffff097          	auipc	ra,0xfffff
+    80001034:	60c080e7          	jalr	1548(ra) # 8000063c <mappages>
+    80001038:	02054863          	bltz	a0,80001068 <proc_pagetable+0x66>
   if(mappages(pagetable, TRAPFRAME, PGSIZE,
-    80001aca:	4719                	li	a4,6
-    80001acc:	05893683          	ld	a3,88(s2)
-    80001ad0:	6605                	lui	a2,0x1
-    80001ad2:	020005b7          	lui	a1,0x2000
-    80001ad6:	15fd                	addi	a1,a1,-1
-    80001ad8:	05b6                	slli	a1,a1,0xd
-    80001ada:	8526                	mv	a0,s1
-    80001adc:	fffff097          	auipc	ra,0xfffff
-    80001ae0:	64e080e7          	jalr	1614(ra) # 8000112a <mappages>
-    80001ae4:	02054163          	bltz	a0,80001b06 <proc_pagetable+0x76>
-}
-    80001ae8:	8526                	mv	a0,s1
-    80001aea:	60e2                	ld	ra,24(sp)
-    80001aec:	6442                	ld	s0,16(sp)
-    80001aee:	64a2                	ld	s1,8(sp)
-    80001af0:	6902                	ld	s2,0(sp)
-    80001af2:	6105                	addi	sp,sp,32
-    80001af4:	8082                	ret
+    8000103c:	4719                	li	a4,6
+    8000103e:	05893683          	ld	a3,88(s2)
+    80001042:	6605                	lui	a2,0x1
+    80001044:	020005b7          	lui	a1,0x2000
+    80001048:	15fd                	addi	a1,a1,-1
+    8000104a:	05b6                	slli	a1,a1,0xd
+    8000104c:	8526                	mv	a0,s1
+    8000104e:	fffff097          	auipc	ra,0xfffff
+    80001052:	5ee080e7          	jalr	1518(ra) # 8000063c <mappages>
+    80001056:	02054163          	bltz	a0,80001078 <proc_pagetable+0x76>
+}
+    8000105a:	8526                	mv	a0,s1
+    8000105c:	60e2                	ld	ra,24(sp)
+    8000105e:	6442                	ld	s0,16(sp)
+    80001060:	64a2                	ld	s1,8(sp)
+    80001062:	6902                	ld	s2,0(sp)
+    80001064:	6105                	addi	sp,sp,32
+    80001066:	8082                	ret
     uvmfree(pagetable, 0);
-    80001af6:	4581                	li	a1,0
-    80001af8:	8526                	mv	a0,s1
-    80001afa:	00000097          	auipc	ra,0x0
-    80001afe:	a8a080e7          	jalr	-1398(ra) # 80001584 <uvmfree>
+    80001068:	4581                	li	a1,0
+    8000106a:	8526                	mv	a0,s1
+    8000106c:	00000097          	auipc	ra,0x0
+    80001070:	a58080e7          	jalr	-1448(ra) # 80000ac4 <uvmfree>
     return 0;
-    80001b02:	4481                	li	s1,0
-    80001b04:	b7d5                	j	80001ae8 <proc_pagetable+0x58>
+    80001074:	4481                	li	s1,0
+    80001076:	b7d5                	j	8000105a <proc_pagetable+0x58>
     uvmunmap(pagetable, TRAMPOLINE, 1, 0);
-    80001b06:	4681                	li	a3,0
-    80001b08:	4605                	li	a2,1
-    80001b0a:	040005b7          	lui	a1,0x4000
-    80001b0e:	15fd                	addi	a1,a1,-1
-    80001b10:	05b2                	slli	a1,a1,0xc
-    80001b12:	8526                	mv	a0,s1
-    80001b14:	fffff097          	auipc	ra,0xfffff
-    80001b18:	7ae080e7          	jalr	1966(ra) # 800012c2 <uvmunmap>
+    80001078:	4681                	li	a3,0
+    8000107a:	4605                	li	a2,1
+    8000107c:	040005b7          	lui	a1,0x4000
+    80001080:	15fd                	addi	a1,a1,-1
+    80001082:	05b2                	slli	a1,a1,0xc
+    80001084:	8526                	mv	a0,s1
+    80001086:	fffff097          	auipc	ra,0xfffff
+    8000108a:	77c080e7          	jalr	1916(ra) # 80000802 <uvmunmap>
     uvmfree(pagetable, 0);
-    80001b1c:	4581                	li	a1,0
-    80001b1e:	8526                	mv	a0,s1
-    80001b20:	00000097          	auipc	ra,0x0
-    80001b24:	a64080e7          	jalr	-1436(ra) # 80001584 <uvmfree>
+    8000108e:	4581                	li	a1,0
+    80001090:	8526                	mv	a0,s1
+    80001092:	00000097          	auipc	ra,0x0
+    80001096:	a32080e7          	jalr	-1486(ra) # 80000ac4 <uvmfree>
     return 0;
-    80001b28:	4481                	li	s1,0
-    80001b2a:	bf7d                	j	80001ae8 <proc_pagetable+0x58>
+    8000109a:	4481                	li	s1,0
+    8000109c:	bf7d                	j	8000105a <proc_pagetable+0x58>
 
-0000000080001b2c <proc_freepagetable>:
+000000008000109e <proc_freepagetable>:
 {
-    80001b2c:	1101                	addi	sp,sp,-32
-    80001b2e:	ec06                	sd	ra,24(sp)
-    80001b30:	e822                	sd	s0,16(sp)
-    80001b32:	e426                	sd	s1,8(sp)
-    80001b34:	e04a                	sd	s2,0(sp)
-    80001b36:	1000                	addi	s0,sp,32
-    80001b38:	84aa                	mv	s1,a0
-    80001b3a:	892e                	mv	s2,a1
+    8000109e:	1101                	addi	sp,sp,-32
+    800010a0:	ec06                	sd	ra,24(sp)
+    800010a2:	e822                	sd	s0,16(sp)
+    800010a4:	e426                	sd	s1,8(sp)
+    800010a6:	e04a                	sd	s2,0(sp)
+    800010a8:	1000                	addi	s0,sp,32
+    800010aa:	84aa                	mv	s1,a0
+    800010ac:	892e                	mv	s2,a1
   uvmunmap(pagetable, TRAMPOLINE, 1, 0);
-    80001b3c:	4681                	li	a3,0
-    80001b3e:	4605                	li	a2,1
-    80001b40:	040005b7          	lui	a1,0x4000
-    80001b44:	15fd                	addi	a1,a1,-1
-    80001b46:	05b2                	slli	a1,a1,0xc
-    80001b48:	fffff097          	auipc	ra,0xfffff
-    80001b4c:	77a080e7          	jalr	1914(ra) # 800012c2 <uvmunmap>
+    800010ae:	4681                	li	a3,0
+    800010b0:	4605                	li	a2,1
+    800010b2:	040005b7          	lui	a1,0x4000
+    800010b6:	15fd                	addi	a1,a1,-1
+    800010b8:	05b2                	slli	a1,a1,0xc
+    800010ba:	fffff097          	auipc	ra,0xfffff
+    800010be:	748080e7          	jalr	1864(ra) # 80000802 <uvmunmap>
   uvmunmap(pagetable, TRAPFRAME, 1, 0);
-    80001b50:	4681                	li	a3,0
-    80001b52:	4605                	li	a2,1
-    80001b54:	020005b7          	lui	a1,0x2000
-    80001b58:	15fd                	addi	a1,a1,-1
-    80001b5a:	05b6                	slli	a1,a1,0xd
-    80001b5c:	8526                	mv	a0,s1
-    80001b5e:	fffff097          	auipc	ra,0xfffff
-    80001b62:	764080e7          	jalr	1892(ra) # 800012c2 <uvmunmap>
+    800010c2:	4681                	li	a3,0
+    800010c4:	4605                	li	a2,1
+    800010c6:	020005b7          	lui	a1,0x2000
+    800010ca:	15fd                	addi	a1,a1,-1
+    800010cc:	05b6                	slli	a1,a1,0xd
+    800010ce:	8526                	mv	a0,s1
+    800010d0:	fffff097          	auipc	ra,0xfffff
+    800010d4:	732080e7          	jalr	1842(ra) # 80000802 <uvmunmap>
   uvmfree(pagetable, sz);
-    80001b66:	85ca                	mv	a1,s2
-    80001b68:	8526                	mv	a0,s1
-    80001b6a:	00000097          	auipc	ra,0x0
-    80001b6e:	a1a080e7          	jalr	-1510(ra) # 80001584 <uvmfree>
-}
-    80001b72:	60e2                	ld	ra,24(sp)
-    80001b74:	6442                	ld	s0,16(sp)
-    80001b76:	64a2                	ld	s1,8(sp)
-    80001b78:	6902                	ld	s2,0(sp)
-    80001b7a:	6105                	addi	sp,sp,32
-    80001b7c:	8082                	ret
-
-0000000080001b7e <freeproc>:
-{
-    80001b7e:	1101                	addi	sp,sp,-32
-    80001b80:	ec06                	sd	ra,24(sp)
-    80001b82:	e822                	sd	s0,16(sp)
-    80001b84:	e426                	sd	s1,8(sp)
-    80001b86:	1000                	addi	s0,sp,32
-    80001b88:	84aa                	mv	s1,a0
+    800010d8:	85ca                	mv	a1,s2
+    800010da:	8526                	mv	a0,s1
+    800010dc:	00000097          	auipc	ra,0x0
+    800010e0:	9e8080e7          	jalr	-1560(ra) # 80000ac4 <uvmfree>
+}
+    800010e4:	60e2                	ld	ra,24(sp)
+    800010e6:	6442                	ld	s0,16(sp)
+    800010e8:	64a2                	ld	s1,8(sp)
+    800010ea:	6902                	ld	s2,0(sp)
+    800010ec:	6105                	addi	sp,sp,32
+    800010ee:	8082                	ret
+
+00000000800010f0 <freeproc>:
+{
+    800010f0:	1101                	addi	sp,sp,-32
+    800010f2:	ec06                	sd	ra,24(sp)
+    800010f4:	e822                	sd	s0,16(sp)
+    800010f6:	e426                	sd	s1,8(sp)
+    800010f8:	1000                	addi	s0,sp,32
+    800010fa:	84aa                	mv	s1,a0
   if(p->trapframe)
-    80001b8a:	6d28                	ld	a0,88(a0)
-    80001b8c:	c509                	beqz	a0,80001b96 <freeproc+0x18>
+    800010fc:	6d28                	ld	a0,88(a0)
+    800010fe:	c509                	beqz	a0,80001108 <freeproc+0x18>
     kfree((void*)p->trapframe);
-    80001b8e:	fffff097          	auipc	ra,0xfffff
-    80001b92:	e84080e7          	jalr	-380(ra) # 80000a12 <kfree>
+    80001100:	fffff097          	auipc	ra,0xfffff
+    80001104:	f1c080e7          	jalr	-228(ra) # 8000001c <kfree>
   p->trapframe = 0;
-    80001b96:	0404bc23          	sd	zero,88(s1)
+    80001108:	0404bc23          	sd	zero,88(s1)
   if(p->pagetable)
-    80001b9a:	68a8                	ld	a0,80(s1)
-    80001b9c:	c511                	beqz	a0,80001ba8 <freeproc+0x2a>
+    8000110c:	68a8                	ld	a0,80(s1)
+    8000110e:	c511                	beqz	a0,8000111a <freeproc+0x2a>
     proc_freepagetable(p->pagetable, p->sz);
-    80001b9e:	64ac                	ld	a1,72(s1)
-    80001ba0:	00000097          	auipc	ra,0x0
-    80001ba4:	f8c080e7          	jalr	-116(ra) # 80001b2c <proc_freepagetable>
+    80001110:	64ac                	ld	a1,72(s1)
+    80001112:	00000097          	auipc	ra,0x0
+    80001116:	f8c080e7          	jalr	-116(ra) # 8000109e <proc_freepagetable>
   p->pagetable = 0;
-    80001ba8:	0404b823          	sd	zero,80(s1)
+    8000111a:	0404b823          	sd	zero,80(s1)
   p->sz = 0;
-    80001bac:	0404b423          	sd	zero,72(s1)
+    8000111e:	0404b423          	sd	zero,72(s1)
   p->pid = 0;
-    80001bb0:	0204ac23          	sw	zero,56(s1)
+    80001122:	0204a823          	sw	zero,48(s1)
   p->parent = 0;
-    80001bb4:	0204b023          	sd	zero,32(s1)
+    80001126:	0204bc23          	sd	zero,56(s1)
   p->name[0] = 0;
-    80001bb8:	14048c23          	sb	zero,344(s1)
+    8000112a:	14048c23          	sb	zero,344(s1)
   p->chan = 0;
-    80001bbc:	0204b423          	sd	zero,40(s1)
+    8000112e:	0204b023          	sd	zero,32(s1)
   p->killed = 0;
-    80001bc0:	0204a823          	sw	zero,48(s1)
+    80001132:	0204a423          	sw	zero,40(s1)
   p->xstate = 0;
-    80001bc4:	0204aa23          	sw	zero,52(s1)
+    80001136:	0204a623          	sw	zero,44(s1)
   p->state = UNUSED;
-    80001bc8:	0004ac23          	sw	zero,24(s1)
+    8000113a:	0004ac23          	sw	zero,24(s1)
 }
-    80001bcc:	60e2                	ld	ra,24(sp)
-    80001bce:	6442                	ld	s0,16(sp)
-    80001bd0:	64a2                	ld	s1,8(sp)
-    80001bd2:	6105                	addi	sp,sp,32
-    80001bd4:	8082                	ret
-
-0000000080001bd6 <allocproc>:
-{
-    80001bd6:	1101                	addi	sp,sp,-32
-    80001bd8:	ec06                	sd	ra,24(sp)
-    80001bda:	e822                	sd	s0,16(sp)
-    80001bdc:	e426                	sd	s1,8(sp)
-    80001bde:	e04a                	sd	s2,0(sp)
-    80001be0:	1000                	addi	s0,sp,32
+    8000113e:	60e2                	ld	ra,24(sp)
+    80001140:	6442                	ld	s0,16(sp)
+    80001142:	64a2                	ld	s1,8(sp)
+    80001144:	6105                	addi	sp,sp,32
+    80001146:	8082                	ret
+
+0000000080001148 <allocproc>:
+{
+    80001148:	1101                	addi	sp,sp,-32
+    8000114a:	ec06                	sd	ra,24(sp)
+    8000114c:	e822                	sd	s0,16(sp)
+    8000114e:	e426                	sd	s1,8(sp)
+    80001150:	e04a                	sd	s2,0(sp)
+    80001152:	1000                	addi	s0,sp,32
   for(p = proc; p < &proc[NPROC]; p++) {
-    80001be2:	00010497          	auipc	s1,0x10
-    80001be6:	18648493          	addi	s1,s1,390 # 80011d68 <proc>
-    80001bea:	00016917          	auipc	s2,0x16
-    80001bee:	b7e90913          	addi	s2,s2,-1154 # 80017768 <tickslock>
+    80001154:	00008497          	auipc	s1,0x8
+    80001158:	32c48493          	addi	s1,s1,812 # 80009480 <proc>
+    8000115c:	0000e917          	auipc	s2,0xe
+    80001160:	f2490913          	addi	s2,s2,-220 # 8000f080 <tickslock>
     acquire(&p->lock);
-    80001bf2:	8526                	mv	a0,s1
-    80001bf4:	fffff097          	auipc	ra,0xfffff
-    80001bf8:	00c080e7          	jalr	12(ra) # 80000c00 <acquire>
+    80001164:	8526                	mv	a0,s1
+    80001166:	00005097          	auipc	ra,0x5
+    8000116a:	0c2080e7          	jalr	194(ra) # 80006228 <acquire>
     if(p->state == UNUSED) {
-    80001bfc:	4c9c                	lw	a5,24(s1)
-    80001bfe:	cf81                	beqz	a5,80001c16 <allocproc+0x40>
+    8000116e:	4c9c                	lw	a5,24(s1)
+    80001170:	cf81                	beqz	a5,80001188 <allocproc+0x40>
       release(&p->lock);
-    80001c00:	8526                	mv	a0,s1
-    80001c02:	fffff097          	auipc	ra,0xfffff
-    80001c06:	0b2080e7          	jalr	178(ra) # 80000cb4 <release>
+    80001172:	8526                	mv	a0,s1
+    80001174:	00005097          	auipc	ra,0x5
+    80001178:	168080e7          	jalr	360(ra) # 800062dc <release>
   for(p = proc; p < &proc[NPROC]; p++) {
-    80001c0a:	16848493          	addi	s1,s1,360
-    80001c0e:	ff2492e3          	bne	s1,s2,80001bf2 <allocproc+0x1c>
+    8000117c:	17048493          	addi	s1,s1,368
+    80001180:	ff2492e3          	bne	s1,s2,80001164 <allocproc+0x1c>
   return 0;
-    80001c12:	4481                	li	s1,0
-    80001c14:	a0b9                	j	80001c62 <allocproc+0x8c>
+    80001184:	4481                	li	s1,0
+    80001186:	a889                	j	800011d8 <allocproc+0x90>
   p->pid = allocpid();
-    80001c16:	00000097          	auipc	ra,0x0
-    80001c1a:	e34080e7          	jalr	-460(ra) # 80001a4a <allocpid>
-    80001c1e:	dc88                	sw	a0,56(s1)
+    80001188:	00000097          	auipc	ra,0x0
+    8000118c:	e34080e7          	jalr	-460(ra) # 80000fbc <allocpid>
+    80001190:	d888                	sw	a0,48(s1)
+  p->state = USED;
+    80001192:	4785                	li	a5,1
+    80001194:	cc9c                	sw	a5,24(s1)
   if((p->trapframe = (struct trapframe *)kalloc()) == 0){
-    80001c20:	fffff097          	auipc	ra,0xfffff
-    80001c24:	ef0080e7          	jalr	-272(ra) # 80000b10 <kalloc>
-    80001c28:	892a                	mv	s2,a0
-    80001c2a:	eca8                	sd	a0,88(s1)
-    80001c2c:	c131                	beqz	a0,80001c70 <allocproc+0x9a>
+    80001196:	fffff097          	auipc	ra,0xfffff
+    8000119a:	f84080e7          	jalr	-124(ra) # 8000011a <kalloc>
+    8000119e:	892a                	mv	s2,a0
+    800011a0:	eca8                	sd	a0,88(s1)
+    800011a2:	c131                	beqz	a0,800011e6 <allocproc+0x9e>
   p->pagetable = proc_pagetable(p);
-    80001c2e:	8526                	mv	a0,s1
-    80001c30:	00000097          	auipc	ra,0x0
-    80001c34:	e60080e7          	jalr	-416(ra) # 80001a90 <proc_pagetable>
-    80001c38:	892a                	mv	s2,a0
-    80001c3a:	e8a8                	sd	a0,80(s1)
+    800011a4:	8526                	mv	a0,s1
+    800011a6:	00000097          	auipc	ra,0x0
+    800011aa:	e5c080e7          	jalr	-420(ra) # 80001002 <proc_pagetable>
+    800011ae:	892a                	mv	s2,a0
+    800011b0:	e8a8                	sd	a0,80(s1)
   if(p->pagetable == 0){
-    80001c3c:	c129                	beqz	a0,80001c7e <allocproc+0xa8>
+    800011b2:	c531                	beqz	a0,800011fe <allocproc+0xb6>
   memset(&p->context, 0, sizeof(p->context));
-    80001c3e:	07000613          	li	a2,112
-    80001c42:	4581                	li	a1,0
-    80001c44:	06048513          	addi	a0,s1,96
-    80001c48:	fffff097          	auipc	ra,0xfffff
-    80001c4c:	0b4080e7          	jalr	180(ra) # 80000cfc <memset>
+    800011b4:	07000613          	li	a2,112
+    800011b8:	4581                	li	a1,0
+    800011ba:	06048513          	addi	a0,s1,96
+    800011be:	fffff097          	auipc	ra,0xfffff
+    800011c2:	fe0080e7          	jalr	-32(ra) # 8000019e <memset>
   p->context.ra = (uint64)forkret;
-    80001c50:	00000797          	auipc	a5,0x0
-    80001c54:	db478793          	addi	a5,a5,-588 # 80001a04 <forkret>
-    80001c58:	f0bc                	sd	a5,96(s1)
+    800011c6:	00000797          	auipc	a5,0x0
+    800011ca:	db078793          	addi	a5,a5,-592 # 80000f76 <forkret>
+    800011ce:	f0bc                	sd	a5,96(s1)
   p->context.sp = p->kstack + PGSIZE;
-    80001c5a:	60bc                	ld	a5,64(s1)
-    80001c5c:	6705                	lui	a4,0x1
-    80001c5e:	97ba                	add	a5,a5,a4
-    80001c60:	f4bc                	sd	a5,104(s1)
-}
-    80001c62:	8526                	mv	a0,s1
-    80001c64:	60e2                	ld	ra,24(sp)
-    80001c66:	6442                	ld	s0,16(sp)
-    80001c68:	64a2                	ld	s1,8(sp)
-    80001c6a:	6902                	ld	s2,0(sp)
-    80001c6c:	6105                	addi	sp,sp,32
-    80001c6e:	8082                	ret
+    800011d0:	60bc                	ld	a5,64(s1)
+    800011d2:	6705                	lui	a4,0x1
+    800011d4:	97ba                	add	a5,a5,a4
+    800011d6:	f4bc                	sd	a5,104(s1)
+}
+    800011d8:	8526                	mv	a0,s1
+    800011da:	60e2                	ld	ra,24(sp)
+    800011dc:	6442                	ld	s0,16(sp)
+    800011de:	64a2                	ld	s1,8(sp)
+    800011e0:	6902                	ld	s2,0(sp)
+    800011e2:	6105                	addi	sp,sp,32
+    800011e4:	8082                	ret
+    freeproc(p);
+    800011e6:	8526                	mv	a0,s1
+    800011e8:	00000097          	auipc	ra,0x0
+    800011ec:	f08080e7          	jalr	-248(ra) # 800010f0 <freeproc>
     release(&p->lock);
-    80001c70:	8526                	mv	a0,s1
-    80001c72:	fffff097          	auipc	ra,0xfffff
-    80001c76:	042080e7          	jalr	66(ra) # 80000cb4 <release>
+    800011f0:	8526                	mv	a0,s1
+    800011f2:	00005097          	auipc	ra,0x5
+    800011f6:	0ea080e7          	jalr	234(ra) # 800062dc <release>
     return 0;
-    80001c7a:	84ca                	mv	s1,s2
-    80001c7c:	b7dd                	j	80001c62 <allocproc+0x8c>
+    800011fa:	84ca                	mv	s1,s2
+    800011fc:	bff1                	j	800011d8 <allocproc+0x90>
     freeproc(p);
-    80001c7e:	8526                	mv	a0,s1
-    80001c80:	00000097          	auipc	ra,0x0
-    80001c84:	efe080e7          	jalr	-258(ra) # 80001b7e <freeproc>
+    800011fe:	8526                	mv	a0,s1
+    80001200:	00000097          	auipc	ra,0x0
+    80001204:	ef0080e7          	jalr	-272(ra) # 800010f0 <freeproc>
     release(&p->lock);
-    80001c88:	8526                	mv	a0,s1
-    80001c8a:	fffff097          	auipc	ra,0xfffff
-    80001c8e:	02a080e7          	jalr	42(ra) # 80000cb4 <release>
+    80001208:	8526                	mv	a0,s1
+    8000120a:	00005097          	auipc	ra,0x5
+    8000120e:	0d2080e7          	jalr	210(ra) # 800062dc <release>
     return 0;
-    80001c92:	84ca                	mv	s1,s2
-    80001c94:	b7f9                	j	80001c62 <allocproc+0x8c>
+    80001212:	84ca                	mv	s1,s2
+    80001214:	b7d1                	j	800011d8 <allocproc+0x90>
 
-0000000080001c96 <userinit>:
+0000000080001216 <userinit>:
 {
-    80001c96:	1101                	addi	sp,sp,-32
-    80001c98:	ec06                	sd	ra,24(sp)
-    80001c9a:	e822                	sd	s0,16(sp)
-    80001c9c:	e426                	sd	s1,8(sp)
-    80001c9e:	1000                	addi	s0,sp,32
+    80001216:	1101                	addi	sp,sp,-32
+    80001218:	ec06                	sd	ra,24(sp)
+    8000121a:	e822                	sd	s0,16(sp)
+    8000121c:	e426                	sd	s1,8(sp)
+    8000121e:	1000                	addi	s0,sp,32
   p = allocproc();
-    80001ca0:	00000097          	auipc	ra,0x0
-    80001ca4:	f36080e7          	jalr	-202(ra) # 80001bd6 <allocproc>
-    80001ca8:	84aa                	mv	s1,a0
+    80001220:	00000097          	auipc	ra,0x0
+    80001224:	f28080e7          	jalr	-216(ra) # 80001148 <allocproc>
+    80001228:	84aa                	mv	s1,a0
   initproc = p;
-    80001caa:	00007797          	auipc	a5,0x7
-    80001cae:	36a7b723          	sd	a0,878(a5) # 80009018 <initproc>
+    8000122a:	00008797          	auipc	a5,0x8
+    8000122e:	dea7b323          	sd	a0,-538(a5) # 80009010 <initproc>
   uvminit(p->pagetable, initcode, sizeof(initcode));
-    80001cb2:	03400613          	li	a2,52
-    80001cb6:	00007597          	auipc	a1,0x7
-    80001cba:	b6a58593          	addi	a1,a1,-1174 # 80008820 <initcode>
-    80001cbe:	6928                	ld	a0,80(a0)
-    80001cc0:	fffff097          	auipc	ra,0xfffff
-    80001cc4:	6f4080e7          	jalr	1780(ra) # 800013b4 <uvminit>
+    80001232:	03400613          	li	a2,52
+    80001236:	00007597          	auipc	a1,0x7
+    8000123a:	7aa58593          	addi	a1,a1,1962 # 800089e0 <initcode>
+    8000123e:	6928                	ld	a0,80(a0)
+    80001240:	fffff097          	auipc	ra,0xfffff
+    80001244:	6b4080e7          	jalr	1716(ra) # 800008f4 <uvminit>
   p->sz = PGSIZE;
-    80001cc8:	6785                	lui	a5,0x1
-    80001cca:	e4bc                	sd	a5,72(s1)
+    80001248:	6785                	lui	a5,0x1
+    8000124a:	e4bc                	sd	a5,72(s1)
   p->trapframe->epc = 0;      // user program counter
-    80001ccc:	6cb8                	ld	a4,88(s1)
-    80001cce:	00073c23          	sd	zero,24(a4) # 1018 <_entry-0x7fffefe8>
+    8000124c:	6cb8                	ld	a4,88(s1)
+    8000124e:	00073c23          	sd	zero,24(a4) # 1018 <_entry-0x7fffefe8>
   p->trapframe->sp = PGSIZE;  // user stack pointer
-    80001cd2:	6cb8                	ld	a4,88(s1)
-    80001cd4:	fb1c                	sd	a5,48(a4)
+    80001252:	6cb8                	ld	a4,88(s1)
+    80001254:	fb1c                	sd	a5,48(a4)
   safestrcpy(p->name, "initcode", sizeof(p->name));
-    80001cd6:	4641                	li	a2,16
-    80001cd8:	00006597          	auipc	a1,0x6
-    80001cdc:	51058593          	addi	a1,a1,1296 # 800081e8 <digits+0x1a8>
-    80001ce0:	15848513          	addi	a0,s1,344
-    80001ce4:	fffff097          	auipc	ra,0xfffff
-    80001ce8:	16a080e7          	jalr	362(ra) # 80000e4e <safestrcpy>
+    80001256:	4641                	li	a2,16
+    80001258:	00007597          	auipc	a1,0x7
+    8000125c:	f5858593          	addi	a1,a1,-168 # 800081b0 <etext+0x1b0>
+    80001260:	15848513          	addi	a0,s1,344
+    80001264:	fffff097          	auipc	ra,0xfffff
+    80001268:	084080e7          	jalr	132(ra) # 800002e8 <safestrcpy>
   p->cwd = namei("/");
-    80001cec:	00006517          	auipc	a0,0x6
-    80001cf0:	50c50513          	addi	a0,a0,1292 # 800081f8 <digits+0x1b8>
-    80001cf4:	00002097          	auipc	ra,0x2
-    80001cf8:	0bc080e7          	jalr	188(ra) # 80003db0 <namei>
-    80001cfc:	14a4b823          	sd	a0,336(s1)
+    8000126c:	00007517          	auipc	a0,0x7
+    80001270:	f5450513          	addi	a0,a0,-172 # 800081c0 <etext+0x1c0>
+    80001274:	00002097          	auipc	ra,0x2
+    80001278:	1b6080e7          	jalr	438(ra) # 8000342a <namei>
+    8000127c:	14a4b823          	sd	a0,336(s1)
   p->state = RUNNABLE;
-    80001d00:	4789                	li	a5,2
-    80001d02:	cc9c                	sw	a5,24(s1)
+    80001280:	478d                	li	a5,3
+    80001282:	cc9c                	sw	a5,24(s1)
   release(&p->lock);
-    80001d04:	8526                	mv	a0,s1
-    80001d06:	fffff097          	auipc	ra,0xfffff
-    80001d0a:	fae080e7          	jalr	-82(ra) # 80000cb4 <release>
-}
-    80001d0e:	60e2                	ld	ra,24(sp)
-    80001d10:	6442                	ld	s0,16(sp)
-    80001d12:	64a2                	ld	s1,8(sp)
-    80001d14:	6105                	addi	sp,sp,32
-    80001d16:	8082                	ret
-
-0000000080001d18 <growproc>:
-{
-    80001d18:	1101                	addi	sp,sp,-32
-    80001d1a:	ec06                	sd	ra,24(sp)
-    80001d1c:	e822                	sd	s0,16(sp)
-    80001d1e:	e426                	sd	s1,8(sp)
-    80001d20:	e04a                	sd	s2,0(sp)
-    80001d22:	1000                	addi	s0,sp,32
-    80001d24:	84aa                	mv	s1,a0
+    80001284:	8526                	mv	a0,s1
+    80001286:	00005097          	auipc	ra,0x5
+    8000128a:	056080e7          	jalr	86(ra) # 800062dc <release>
+}
+    8000128e:	60e2                	ld	ra,24(sp)
+    80001290:	6442                	ld	s0,16(sp)
+    80001292:	64a2                	ld	s1,8(sp)
+    80001294:	6105                	addi	sp,sp,32
+    80001296:	8082                	ret
+
+0000000080001298 <growproc>:
+{
+    80001298:	1101                	addi	sp,sp,-32
+    8000129a:	ec06                	sd	ra,24(sp)
+    8000129c:	e822                	sd	s0,16(sp)
+    8000129e:	e426                	sd	s1,8(sp)
+    800012a0:	e04a                	sd	s2,0(sp)
+    800012a2:	1000                	addi	s0,sp,32
+    800012a4:	84aa                	mv	s1,a0
   struct proc *p = myproc();
-    80001d26:	00000097          	auipc	ra,0x0
-    80001d2a:	ca6080e7          	jalr	-858(ra) # 800019cc <myproc>
-    80001d2e:	892a                	mv	s2,a0
+    800012a6:	00000097          	auipc	ra,0x0
+    800012aa:	c98080e7          	jalr	-872(ra) # 80000f3e <myproc>
+    800012ae:	892a                	mv	s2,a0
   sz = p->sz;
-    80001d30:	652c                	ld	a1,72(a0)
-    80001d32:	0005879b          	sext.w	a5,a1
+    800012b0:	652c                	ld	a1,72(a0)
+    800012b2:	0005879b          	sext.w	a5,a1
   if(n > 0){
-    80001d36:	00904f63          	bgtz	s1,80001d54 <growproc+0x3c>
+    800012b6:	00904f63          	bgtz	s1,800012d4 <growproc+0x3c>
   } else if(n < 0){
-    80001d3a:	0204cd63          	bltz	s1,80001d74 <growproc+0x5c>
+    800012ba:	0204cd63          	bltz	s1,800012f4 <growproc+0x5c>
   p->sz = sz;
-    80001d3e:	1782                	slli	a5,a5,0x20
-    80001d40:	9381                	srli	a5,a5,0x20
-    80001d42:	04f93423          	sd	a5,72(s2)
+    800012be:	1782                	slli	a5,a5,0x20
+    800012c0:	9381                	srli	a5,a5,0x20
+    800012c2:	04f93423          	sd	a5,72(s2)
   return 0;
-    80001d46:	4501                	li	a0,0
+    800012c6:	4501                	li	a0,0
 }
-    80001d48:	60e2                	ld	ra,24(sp)
-    80001d4a:	6442                	ld	s0,16(sp)
-    80001d4c:	64a2                	ld	s1,8(sp)
-    80001d4e:	6902                	ld	s2,0(sp)
-    80001d50:	6105                	addi	sp,sp,32
-    80001d52:	8082                	ret
+    800012c8:	60e2                	ld	ra,24(sp)
+    800012ca:	6442                	ld	s0,16(sp)
+    800012cc:	64a2                	ld	s1,8(sp)
+    800012ce:	6902                	ld	s2,0(sp)
+    800012d0:	6105                	addi	sp,sp,32
+    800012d2:	8082                	ret
     if((sz = uvmalloc(p->pagetable, sz, sz + n)) == 0) {
-    80001d54:	00f4863b          	addw	a2,s1,a5
-    80001d58:	1602                	slli	a2,a2,0x20
-    80001d5a:	9201                	srli	a2,a2,0x20
-    80001d5c:	1582                	slli	a1,a1,0x20
-    80001d5e:	9181                	srli	a1,a1,0x20
-    80001d60:	6928                	ld	a0,80(a0)
-    80001d62:	fffff097          	auipc	ra,0xfffff
-    80001d66:	70c080e7          	jalr	1804(ra) # 8000146e <uvmalloc>
-    80001d6a:	0005079b          	sext.w	a5,a0
-    80001d6e:	fbe1                	bnez	a5,80001d3e <growproc+0x26>
+    800012d4:	00f4863b          	addw	a2,s1,a5
+    800012d8:	1602                	slli	a2,a2,0x20
+    800012da:	9201                	srli	a2,a2,0x20
+    800012dc:	1582                	slli	a1,a1,0x20
+    800012de:	9181                	srli	a1,a1,0x20
+    800012e0:	6928                	ld	a0,80(a0)
+    800012e2:	fffff097          	auipc	ra,0xfffff
+    800012e6:	6cc080e7          	jalr	1740(ra) # 800009ae <uvmalloc>
+    800012ea:	0005079b          	sext.w	a5,a0
+    800012ee:	fbe1                	bnez	a5,800012be <growproc+0x26>
       return -1;
-    80001d70:	557d                	li	a0,-1
-    80001d72:	bfd9                	j	80001d48 <growproc+0x30>
+    800012f0:	557d                	li	a0,-1
+    800012f2:	bfd9                	j	800012c8 <growproc+0x30>
     sz = uvmdealloc(p->pagetable, sz, sz + n);
-    80001d74:	00f4863b          	addw	a2,s1,a5
-    80001d78:	1602                	slli	a2,a2,0x20
-    80001d7a:	9201                	srli	a2,a2,0x20
-    80001d7c:	1582                	slli	a1,a1,0x20
-    80001d7e:	9181                	srli	a1,a1,0x20
-    80001d80:	6928                	ld	a0,80(a0)
-    80001d82:	fffff097          	auipc	ra,0xfffff
-    80001d86:	6a4080e7          	jalr	1700(ra) # 80001426 <uvmdealloc>
-    80001d8a:	0005079b          	sext.w	a5,a0
-    80001d8e:	bf45                	j	80001d3e <growproc+0x26>
-
-0000000080001d90 <fork>:
-{
-    80001d90:	7139                	addi	sp,sp,-64
-    80001d92:	fc06                	sd	ra,56(sp)
-    80001d94:	f822                	sd	s0,48(sp)
-    80001d96:	f426                	sd	s1,40(sp)
-    80001d98:	f04a                	sd	s2,32(sp)
-    80001d9a:	ec4e                	sd	s3,24(sp)
-    80001d9c:	e852                	sd	s4,16(sp)
-    80001d9e:	e456                	sd	s5,8(sp)
-    80001da0:	0080                	addi	s0,sp,64
+    800012f4:	00f4863b          	addw	a2,s1,a5
+    800012f8:	1602                	slli	a2,a2,0x20
+    800012fa:	9201                	srli	a2,a2,0x20
+    800012fc:	1582                	slli	a1,a1,0x20
+    800012fe:	9181                	srli	a1,a1,0x20
+    80001300:	6928                	ld	a0,80(a0)
+    80001302:	fffff097          	auipc	ra,0xfffff
+    80001306:	664080e7          	jalr	1636(ra) # 80000966 <uvmdealloc>
+    8000130a:	0005079b          	sext.w	a5,a0
+    8000130e:	bf45                	j	800012be <growproc+0x26>
+
+0000000080001310 <fork>:
+{
+    80001310:	7139                	addi	sp,sp,-64
+    80001312:	fc06                	sd	ra,56(sp)
+    80001314:	f822                	sd	s0,48(sp)
+    80001316:	f426                	sd	s1,40(sp)
+    80001318:	f04a                	sd	s2,32(sp)
+    8000131a:	ec4e                	sd	s3,24(sp)
+    8000131c:	e852                	sd	s4,16(sp)
+    8000131e:	e456                	sd	s5,8(sp)
+    80001320:	0080                	addi	s0,sp,64
   struct proc *p = myproc();
-    80001da2:	00000097          	auipc	ra,0x0
-    80001da6:	c2a080e7          	jalr	-982(ra) # 800019cc <myproc>
-    80001daa:	8aaa                	mv	s5,a0
+    80001322:	00000097          	auipc	ra,0x0
+    80001326:	c1c080e7          	jalr	-996(ra) # 80000f3e <myproc>
+    8000132a:	8aaa                	mv	s5,a0
   if((np = allocproc()) == 0){
-    80001dac:	00000097          	auipc	ra,0x0
-    80001db0:	e2a080e7          	jalr	-470(ra) # 80001bd6 <allocproc>
-    80001db4:	c17d                	beqz	a0,80001e9a <fork+0x10a>
-    80001db6:	8a2a                	mv	s4,a0
+    8000132c:	00000097          	auipc	ra,0x0
+    80001330:	e1c080e7          	jalr	-484(ra) # 80001148 <allocproc>
+    80001334:	12050063          	beqz	a0,80001454 <fork+0x144>
+    80001338:	89aa                	mv	s3,a0
   if(uvmcopy(p->pagetable, np->pagetable, p->sz) < 0){
-    80001db8:	048ab603          	ld	a2,72(s5)
-    80001dbc:	692c                	ld	a1,80(a0)
-    80001dbe:	050ab503          	ld	a0,80(s5)
-    80001dc2:	fffff097          	auipc	ra,0xfffff
-    80001dc6:	7fc080e7          	jalr	2044(ra) # 800015be <uvmcopy>
-    80001dca:	04054a63          	bltz	a0,80001e1e <fork+0x8e>
+    8000133a:	048ab603          	ld	a2,72(s5)
+    8000133e:	692c                	ld	a1,80(a0)
+    80001340:	050ab503          	ld	a0,80(s5)
+    80001344:	fffff097          	auipc	ra,0xfffff
+    80001348:	7ba080e7          	jalr	1978(ra) # 80000afe <uvmcopy>
+    8000134c:	04054c63          	bltz	a0,800013a4 <fork+0x94>
   np->sz = p->sz;
-    80001dce:	048ab783          	ld	a5,72(s5)
-    80001dd2:	04fa3423          	sd	a5,72(s4)
-  np->parent = p;
-    80001dd6:	035a3023          	sd	s5,32(s4)
+    80001350:	048ab783          	ld	a5,72(s5)
+    80001354:	04f9b423          	sd	a5,72(s3)
+  np->trace_mask = p->trace_mask;
+    80001358:	168aa783          	lw	a5,360(s5)
+    8000135c:	16f9a423          	sw	a5,360(s3)
   *(np->trapframe) = *(p->trapframe);
-    80001dda:	058ab683          	ld	a3,88(s5)
-    80001dde:	87b6                	mv	a5,a3
-    80001de0:	058a3703          	ld	a4,88(s4)
-    80001de4:	12068693          	addi	a3,a3,288
-    80001de8:	0007b803          	ld	a6,0(a5) # 1000 <_entry-0x7ffff000>
-    80001dec:	6788                	ld	a0,8(a5)
-    80001dee:	6b8c                	ld	a1,16(a5)
-    80001df0:	6f90                	ld	a2,24(a5)
-    80001df2:	01073023          	sd	a6,0(a4)
-    80001df6:	e708                	sd	a0,8(a4)
-    80001df8:	eb0c                	sd	a1,16(a4)
-    80001dfa:	ef10                	sd	a2,24(a4)
-    80001dfc:	02078793          	addi	a5,a5,32
-    80001e00:	02070713          	addi	a4,a4,32
-    80001e04:	fed792e3          	bne	a5,a3,80001de8 <fork+0x58>
+    80001360:	058ab683          	ld	a3,88(s5)
+    80001364:	87b6                	mv	a5,a3
+    80001366:	0589b703          	ld	a4,88(s3)
+    8000136a:	12068693          	addi	a3,a3,288
+    8000136e:	0007b803          	ld	a6,0(a5) # 1000 <_entry-0x7ffff000>
+    80001372:	6788                	ld	a0,8(a5)
+    80001374:	6b8c                	ld	a1,16(a5)
+    80001376:	6f90                	ld	a2,24(a5)
+    80001378:	01073023          	sd	a6,0(a4)
+    8000137c:	e708                	sd	a0,8(a4)
+    8000137e:	eb0c                	sd	a1,16(a4)
+    80001380:	ef10                	sd	a2,24(a4)
+    80001382:	02078793          	addi	a5,a5,32
+    80001386:	02070713          	addi	a4,a4,32
+    8000138a:	fed792e3          	bne	a5,a3,8000136e <fork+0x5e>
   np->trapframe->a0 = 0;
-    80001e08:	058a3783          	ld	a5,88(s4)
-    80001e0c:	0607b823          	sd	zero,112(a5)
+    8000138e:	0589b783          	ld	a5,88(s3)
+    80001392:	0607b823          	sd	zero,112(a5)
   for(i = 0; i < NOFILE; i++)
-    80001e10:	0d0a8493          	addi	s1,s5,208
-    80001e14:	0d0a0913          	addi	s2,s4,208
-    80001e18:	150a8993          	addi	s3,s5,336
-    80001e1c:	a00d                	j	80001e3e <fork+0xae>
+    80001396:	0d0a8493          	addi	s1,s5,208
+    8000139a:	0d098913          	addi	s2,s3,208
+    8000139e:	150a8a13          	addi	s4,s5,336
+    800013a2:	a00d                	j	800013c4 <fork+0xb4>
     freeproc(np);
-    80001e1e:	8552                	mv	a0,s4
-    80001e20:	00000097          	auipc	ra,0x0
-    80001e24:	d5e080e7          	jalr	-674(ra) # 80001b7e <freeproc>
+    800013a4:	854e                	mv	a0,s3
+    800013a6:	00000097          	auipc	ra,0x0
+    800013aa:	d4a080e7          	jalr	-694(ra) # 800010f0 <freeproc>
     release(&np->lock);
-    80001e28:	8552                	mv	a0,s4
-    80001e2a:	fffff097          	auipc	ra,0xfffff
-    80001e2e:	e8a080e7          	jalr	-374(ra) # 80000cb4 <release>
+    800013ae:	854e                	mv	a0,s3
+    800013b0:	00005097          	auipc	ra,0x5
+    800013b4:	f2c080e7          	jalr	-212(ra) # 800062dc <release>
     return -1;
-    80001e32:	54fd                	li	s1,-1
-    80001e34:	a889                	j	80001e86 <fork+0xf6>
+    800013b8:	597d                	li	s2,-1
+    800013ba:	a059                	j	80001440 <fork+0x130>
   for(i = 0; i < NOFILE; i++)
-    80001e36:	04a1                	addi	s1,s1,8
-    80001e38:	0921                	addi	s2,s2,8
-    80001e3a:	01348b63          	beq	s1,s3,80001e50 <fork+0xc0>
+    800013bc:	04a1                	addi	s1,s1,8
+    800013be:	0921                	addi	s2,s2,8
+    800013c0:	01448b63          	beq	s1,s4,800013d6 <fork+0xc6>
     if(p->ofile[i])
-    80001e3e:	6088                	ld	a0,0(s1)
-    80001e40:	d97d                	beqz	a0,80001e36 <fork+0xa6>
+    800013c4:	6088                	ld	a0,0(s1)
+    800013c6:	d97d                	beqz	a0,800013bc <fork+0xac>
       np->ofile[i] = filedup(p->ofile[i]);
-    80001e42:	00002097          	auipc	ra,0x2
-    80001e46:	5fa080e7          	jalr	1530(ra) # 8000443c <filedup>
-    80001e4a:	00a93023          	sd	a0,0(s2)
-    80001e4e:	b7e5                	j	80001e36 <fork+0xa6>
+    800013c8:	00002097          	auipc	ra,0x2
+    800013cc:	6f8080e7          	jalr	1784(ra) # 80003ac0 <filedup>
+    800013d0:	00a93023          	sd	a0,0(s2)
+    800013d4:	b7e5                	j	800013bc <fork+0xac>
   np->cwd = idup(p->cwd);
-    80001e50:	150ab503          	ld	a0,336(s5)
-    80001e54:	00001097          	auipc	ra,0x1
-    80001e58:	768080e7          	jalr	1896(ra) # 800035bc <idup>
-    80001e5c:	14aa3823          	sd	a0,336(s4)
+    800013d6:	150ab503          	ld	a0,336(s5)
+    800013da:	00002097          	auipc	ra,0x2
+    800013de:	856080e7          	jalr	-1962(ra) # 80002c30 <idup>
+    800013e2:	14a9b823          	sd	a0,336(s3)
   safestrcpy(np->name, p->name, sizeof(p->name));
-    80001e60:	4641                	li	a2,16
-    80001e62:	158a8593          	addi	a1,s5,344
-    80001e66:	158a0513          	addi	a0,s4,344
-    80001e6a:	fffff097          	auipc	ra,0xfffff
-    80001e6e:	fe4080e7          	jalr	-28(ra) # 80000e4e <safestrcpy>
+    800013e6:	4641                	li	a2,16
+    800013e8:	158a8593          	addi	a1,s5,344
+    800013ec:	15898513          	addi	a0,s3,344
+    800013f0:	fffff097          	auipc	ra,0xfffff
+    800013f4:	ef8080e7          	jalr	-264(ra) # 800002e8 <safestrcpy>
   pid = np->pid;
-    80001e72:	038a2483          	lw	s1,56(s4)
+    800013f8:	0309a903          	lw	s2,48(s3)
+  release(&np->lock);
+    800013fc:	854e                	mv	a0,s3
+    800013fe:	00005097          	auipc	ra,0x5
+    80001402:	ede080e7          	jalr	-290(ra) # 800062dc <release>
+  acquire(&wait_lock);
+    80001406:	00008497          	auipc	s1,0x8
+    8000140a:	c6248493          	addi	s1,s1,-926 # 80009068 <wait_lock>
+    8000140e:	8526                	mv	a0,s1
+    80001410:	00005097          	auipc	ra,0x5
+    80001414:	e18080e7          	jalr	-488(ra) # 80006228 <acquire>
+  np->parent = p;
+    80001418:	0359bc23          	sd	s5,56(s3)
+  release(&wait_lock);
+    8000141c:	8526                	mv	a0,s1
+    8000141e:	00005097          	auipc	ra,0x5
+    80001422:	ebe080e7          	jalr	-322(ra) # 800062dc <release>
+  acquire(&np->lock);
+    80001426:	854e                	mv	a0,s3
+    80001428:	00005097          	auipc	ra,0x5
+    8000142c:	e00080e7          	jalr	-512(ra) # 80006228 <acquire>
   np->state = RUNNABLE;
-    80001e76:	4789                	li	a5,2
-    80001e78:	00fa2c23          	sw	a5,24(s4)
+    80001430:	478d                	li	a5,3
+    80001432:	00f9ac23          	sw	a5,24(s3)
   release(&np->lock);
-    80001e7c:	8552                	mv	a0,s4
-    80001e7e:	fffff097          	auipc	ra,0xfffff
-    80001e82:	e36080e7          	jalr	-458(ra) # 80000cb4 <release>
-}
-    80001e86:	8526                	mv	a0,s1
-    80001e88:	70e2                	ld	ra,56(sp)
-    80001e8a:	7442                	ld	s0,48(sp)
-    80001e8c:	74a2                	ld	s1,40(sp)
-    80001e8e:	7902                	ld	s2,32(sp)
-    80001e90:	69e2                	ld	s3,24(sp)
-    80001e92:	6a42                	ld	s4,16(sp)
-    80001e94:	6aa2                	ld	s5,8(sp)
-    80001e96:	6121                	addi	sp,sp,64
-    80001e98:	8082                	ret
-    return -1;
-    80001e9a:	54fd                	li	s1,-1
-    80001e9c:	b7ed                	j	80001e86 <fork+0xf6>
-
-0000000080001e9e <reparent>:
-{
-    80001e9e:	7179                	addi	sp,sp,-48
-    80001ea0:	f406                	sd	ra,40(sp)
-    80001ea2:	f022                	sd	s0,32(sp)
-    80001ea4:	ec26                	sd	s1,24(sp)
-    80001ea6:	e84a                	sd	s2,16(sp)
-    80001ea8:	e44e                	sd	s3,8(sp)
-    80001eaa:	e052                	sd	s4,0(sp)
-    80001eac:	1800                	addi	s0,sp,48
-    80001eae:	892a                	mv	s2,a0
-  for(pp = proc; pp < &proc[NPROC]; pp++){
-    80001eb0:	00010497          	auipc	s1,0x10
-    80001eb4:	eb848493          	addi	s1,s1,-328 # 80011d68 <proc>
-      pp->parent = initproc;
-    80001eb8:	00007a17          	auipc	s4,0x7
-    80001ebc:	160a0a13          	addi	s4,s4,352 # 80009018 <initproc>
-  for(pp = proc; pp < &proc[NPROC]; pp++){
-    80001ec0:	00016997          	auipc	s3,0x16
-    80001ec4:	8a898993          	addi	s3,s3,-1880 # 80017768 <tickslock>
-    80001ec8:	a029                	j	80001ed2 <reparent+0x34>
-    80001eca:	16848493          	addi	s1,s1,360
-    80001ece:	03348363          	beq	s1,s3,80001ef4 <reparent+0x56>
-    if(pp->parent == p){
-    80001ed2:	709c                	ld	a5,32(s1)
-    80001ed4:	ff279be3          	bne	a5,s2,80001eca <reparent+0x2c>
-      acquire(&pp->lock);
-    80001ed8:	8526                	mv	a0,s1
-    80001eda:	fffff097          	auipc	ra,0xfffff
-    80001ede:	d26080e7          	jalr	-730(ra) # 80000c00 <acquire>
-      pp->parent = initproc;
-    80001ee2:	000a3783          	ld	a5,0(s4)
-    80001ee6:	f09c                	sd	a5,32(s1)
-      release(&pp->lock);
-    80001ee8:	8526                	mv	a0,s1
-    80001eea:	fffff097          	auipc	ra,0xfffff
-    80001eee:	dca080e7          	jalr	-566(ra) # 80000cb4 <release>
-    80001ef2:	bfe1                	j	80001eca <reparent+0x2c>
-}
-    80001ef4:	70a2                	ld	ra,40(sp)
-    80001ef6:	7402                	ld	s0,32(sp)
-    80001ef8:	64e2                	ld	s1,24(sp)
-    80001efa:	6942                	ld	s2,16(sp)
-    80001efc:	69a2                	ld	s3,8(sp)
-    80001efe:	6a02                	ld	s4,0(sp)
-    80001f00:	6145                	addi	sp,sp,48
-    80001f02:	8082                	ret
-
-0000000080001f04 <scheduler>:
-{
-    80001f04:	715d                	addi	sp,sp,-80
-    80001f06:	e486                	sd	ra,72(sp)
-    80001f08:	e0a2                	sd	s0,64(sp)
-    80001f0a:	fc26                	sd	s1,56(sp)
-    80001f0c:	f84a                	sd	s2,48(sp)
-    80001f0e:	f44e                	sd	s3,40(sp)
-    80001f10:	f052                	sd	s4,32(sp)
-    80001f12:	ec56                	sd	s5,24(sp)
-    80001f14:	e85a                	sd	s6,16(sp)
-    80001f16:	e45e                	sd	s7,8(sp)
-    80001f18:	e062                	sd	s8,0(sp)
-    80001f1a:	0880                	addi	s0,sp,80
-    80001f1c:	8792                	mv	a5,tp
+    80001436:	854e                	mv	a0,s3
+    80001438:	00005097          	auipc	ra,0x5
+    8000143c:	ea4080e7          	jalr	-348(ra) # 800062dc <release>
+}
+    80001440:	854a                	mv	a0,s2
+    80001442:	70e2                	ld	ra,56(sp)
+    80001444:	7442                	ld	s0,48(sp)
+    80001446:	74a2                	ld	s1,40(sp)
+    80001448:	7902                	ld	s2,32(sp)
+    8000144a:	69e2                	ld	s3,24(sp)
+    8000144c:	6a42                	ld	s4,16(sp)
+    8000144e:	6aa2                	ld	s5,8(sp)
+    80001450:	6121                	addi	sp,sp,64
+    80001452:	8082                	ret
+    return -1;
+    80001454:	597d                	li	s2,-1
+    80001456:	b7ed                	j	80001440 <fork+0x130>
+
+0000000080001458 <scheduler>:
+{
+    80001458:	7139                	addi	sp,sp,-64
+    8000145a:	fc06                	sd	ra,56(sp)
+    8000145c:	f822                	sd	s0,48(sp)
+    8000145e:	f426                	sd	s1,40(sp)
+    80001460:	f04a                	sd	s2,32(sp)
+    80001462:	ec4e                	sd	s3,24(sp)
+    80001464:	e852                	sd	s4,16(sp)
+    80001466:	e456                	sd	s5,8(sp)
+    80001468:	e05a                	sd	s6,0(sp)
+    8000146a:	0080                	addi	s0,sp,64
+    8000146c:	8792                	mv	a5,tp
   int id = r_tp();
-    80001f1e:	2781                	sext.w	a5,a5
+    8000146e:	2781                	sext.w	a5,a5
   c->proc = 0;
-    80001f20:	00779b13          	slli	s6,a5,0x7
-    80001f24:	00010717          	auipc	a4,0x10
-    80001f28:	a2c70713          	addi	a4,a4,-1492 # 80011950 <pid_lock>
-    80001f2c:	975a                	add	a4,a4,s6
-    80001f2e:	00073c23          	sd	zero,24(a4)
+    80001470:	00779a93          	slli	s5,a5,0x7
+    80001474:	00008717          	auipc	a4,0x8
+    80001478:	bdc70713          	addi	a4,a4,-1060 # 80009050 <pid_lock>
+    8000147c:	9756                	add	a4,a4,s5
+    8000147e:	02073823          	sd	zero,48(a4)
         swtch(&c->context, &p->context);
-    80001f32:	00010717          	auipc	a4,0x10
-    80001f36:	a3e70713          	addi	a4,a4,-1474 # 80011970 <cpus+0x8>
-    80001f3a:	9b3a                	add	s6,s6,a4
+    80001482:	00008717          	auipc	a4,0x8
+    80001486:	c0670713          	addi	a4,a4,-1018 # 80009088 <cpus+0x8>
+    8000148a:	9aba                	add	s5,s5,a4
+      if(p->state == RUNNABLE) {
+    8000148c:	498d                	li	s3,3
         p->state = RUNNING;
-    80001f3c:	4c0d                	li	s8,3
+    8000148e:	4b11                	li	s6,4
         c->proc = p;
-    80001f3e:	079e                	slli	a5,a5,0x7
-    80001f40:	00010a17          	auipc	s4,0x10
-    80001f44:	a10a0a13          	addi	s4,s4,-1520 # 80011950 <pid_lock>
-    80001f48:	9a3e                	add	s4,s4,a5
-        found = 1;
-    80001f4a:	4b85                	li	s7,1
+    80001490:	079e                	slli	a5,a5,0x7
+    80001492:	00008a17          	auipc	s4,0x8
+    80001496:	bbea0a13          	addi	s4,s4,-1090 # 80009050 <pid_lock>
+    8000149a:	9a3e                	add	s4,s4,a5
     for(p = proc; p < &proc[NPROC]; p++) {
-    80001f4c:	00016997          	auipc	s3,0x16
-    80001f50:	81c98993          	addi	s3,s3,-2020 # 80017768 <tickslock>
-    80001f54:	a899                	j	80001faa <scheduler+0xa6>
+    8000149c:	0000e917          	auipc	s2,0xe
+    800014a0:	be490913          	addi	s2,s2,-1052 # 8000f080 <tickslock>
+  asm volatile("csrr %0, sstatus" : "=r" (x) );
+    800014a4:	100027f3          	csrr	a5,sstatus
+  w_sstatus(r_sstatus() | SSTATUS_SIE);
+    800014a8:	0027e793          	ori	a5,a5,2
+  asm volatile("csrw sstatus, %0" : : "r" (x));
+    800014ac:	10079073          	csrw	sstatus,a5
+    800014b0:	00008497          	auipc	s1,0x8
+    800014b4:	fd048493          	addi	s1,s1,-48 # 80009480 <proc>
+    800014b8:	a811                	j	800014cc <scheduler+0x74>
       release(&p->lock);
-    80001f56:	8526                	mv	a0,s1
-    80001f58:	fffff097          	auipc	ra,0xfffff
-    80001f5c:	d5c080e7          	jalr	-676(ra) # 80000cb4 <release>
+    800014ba:	8526                	mv	a0,s1
+    800014bc:	00005097          	auipc	ra,0x5
+    800014c0:	e20080e7          	jalr	-480(ra) # 800062dc <release>
     for(p = proc; p < &proc[NPROC]; p++) {
-    80001f60:	16848493          	addi	s1,s1,360
-    80001f64:	03348963          	beq	s1,s3,80001f96 <scheduler+0x92>
+    800014c4:	17048493          	addi	s1,s1,368
+    800014c8:	fd248ee3          	beq	s1,s2,800014a4 <scheduler+0x4c>
       acquire(&p->lock);
-    80001f68:	8526                	mv	a0,s1
-    80001f6a:	fffff097          	auipc	ra,0xfffff
-    80001f6e:	c96080e7          	jalr	-874(ra) # 80000c00 <acquire>
+    800014cc:	8526                	mv	a0,s1
+    800014ce:	00005097          	auipc	ra,0x5
+    800014d2:	d5a080e7          	jalr	-678(ra) # 80006228 <acquire>
       if(p->state == RUNNABLE) {
-    80001f72:	4c9c                	lw	a5,24(s1)
-    80001f74:	ff2791e3          	bne	a5,s2,80001f56 <scheduler+0x52>
+    800014d6:	4c9c                	lw	a5,24(s1)
+    800014d8:	ff3791e3          	bne	a5,s3,800014ba <scheduler+0x62>
         p->state = RUNNING;
-    80001f78:	0184ac23          	sw	s8,24(s1)
+    800014dc:	0164ac23          	sw	s6,24(s1)
         c->proc = p;
-    80001f7c:	009a3c23          	sd	s1,24(s4)
+    800014e0:	029a3823          	sd	s1,48(s4)
         swtch(&c->context, &p->context);
-    80001f80:	06048593          	addi	a1,s1,96
-    80001f84:	855a                	mv	a0,s6
-    80001f86:	00000097          	auipc	ra,0x0
-    80001f8a:	610080e7          	jalr	1552(ra) # 80002596 <swtch>
+    800014e4:	06048593          	addi	a1,s1,96
+    800014e8:	8556                	mv	a0,s5
+    800014ea:	00000097          	auipc	ra,0x0
+    800014ee:	64e080e7          	jalr	1614(ra) # 80001b38 <swtch>
         c->proc = 0;
-    80001f8e:	000a3c23          	sd	zero,24(s4)
-        found = 1;
-    80001f92:	8ade                	mv	s5,s7
-    80001f94:	b7c9                	j	80001f56 <scheduler+0x52>
-    if(found == 0) {
-    80001f96:	000a9a63          	bnez	s5,80001faa <scheduler+0xa6>
-  asm volatile("csrr %0, sstatus" : "=r" (x) );
-    80001f9a:	100027f3          	csrr	a5,sstatus
-  w_sstatus(r_sstatus() | SSTATUS_SIE);
-    80001f9e:	0027e793          	ori	a5,a5,2
-  asm volatile("csrw sstatus, %0" : : "r" (x));
-    80001fa2:	10079073          	csrw	sstatus,a5
-      asm volatile("wfi");
-    80001fa6:	10500073          	wfi
-  asm volatile("csrr %0, sstatus" : "=r" (x) );
-    80001faa:	100027f3          	csrr	a5,sstatus
-  w_sstatus(r_sstatus() | SSTATUS_SIE);
-    80001fae:	0027e793          	ori	a5,a5,2
-  asm volatile("csrw sstatus, %0" : : "r" (x));
-    80001fb2:	10079073          	csrw	sstatus,a5
-    int found = 0;
-    80001fb6:	4a81                	li	s5,0
-    for(p = proc; p < &proc[NPROC]; p++) {
-    80001fb8:	00010497          	auipc	s1,0x10
-    80001fbc:	db048493          	addi	s1,s1,-592 # 80011d68 <proc>
-      if(p->state == RUNNABLE) {
-    80001fc0:	4909                	li	s2,2
-    80001fc2:	b75d                	j	80001f68 <scheduler+0x64>
+    800014f2:	020a3823          	sd	zero,48(s4)
+    800014f6:	b7d1                	j	800014ba <scheduler+0x62>
 
-0000000080001fc4 <sched>:
+00000000800014f8 <sched>:
 {
-    80001fc4:	7179                	addi	sp,sp,-48
-    80001fc6:	f406                	sd	ra,40(sp)
-    80001fc8:	f022                	sd	s0,32(sp)
-    80001fca:	ec26                	sd	s1,24(sp)
-    80001fcc:	e84a                	sd	s2,16(sp)
-    80001fce:	e44e                	sd	s3,8(sp)
-    80001fd0:	1800                	addi	s0,sp,48
+    800014f8:	7179                	addi	sp,sp,-48
+    800014fa:	f406                	sd	ra,40(sp)
+    800014fc:	f022                	sd	s0,32(sp)
+    800014fe:	ec26                	sd	s1,24(sp)
+    80001500:	e84a                	sd	s2,16(sp)
+    80001502:	e44e                	sd	s3,8(sp)
+    80001504:	1800                	addi	s0,sp,48
   struct proc *p = myproc();
-    80001fd2:	00000097          	auipc	ra,0x0
-    80001fd6:	9fa080e7          	jalr	-1542(ra) # 800019cc <myproc>
-    80001fda:	84aa                	mv	s1,a0
+    80001506:	00000097          	auipc	ra,0x0
+    8000150a:	a38080e7          	jalr	-1480(ra) # 80000f3e <myproc>
+    8000150e:	84aa                	mv	s1,a0
   if(!holding(&p->lock))
-    80001fdc:	fffff097          	auipc	ra,0xfffff
-    80001fe0:	baa080e7          	jalr	-1110(ra) # 80000b86 <holding>
-    80001fe4:	c93d                	beqz	a0,8000205a <sched+0x96>
+    80001510:	00005097          	auipc	ra,0x5
+    80001514:	c9e080e7          	jalr	-866(ra) # 800061ae <holding>
+    80001518:	c93d                	beqz	a0,8000158e <sched+0x96>
   asm volatile("mv %0, tp" : "=r" (x) );
-    80001fe6:	8792                	mv	a5,tp
+    8000151a:	8792                	mv	a5,tp
   if(mycpu()->noff != 1)
-    80001fe8:	2781                	sext.w	a5,a5
-    80001fea:	079e                	slli	a5,a5,0x7
-    80001fec:	00010717          	auipc	a4,0x10
-    80001ff0:	96470713          	addi	a4,a4,-1692 # 80011950 <pid_lock>
-    80001ff4:	97ba                	add	a5,a5,a4
-    80001ff6:	0907a703          	lw	a4,144(a5)
-    80001ffa:	4785                	li	a5,1
-    80001ffc:	06f71763          	bne	a4,a5,8000206a <sched+0xa6>
+    8000151c:	2781                	sext.w	a5,a5
+    8000151e:	079e                	slli	a5,a5,0x7
+    80001520:	00008717          	auipc	a4,0x8
+    80001524:	b3070713          	addi	a4,a4,-1232 # 80009050 <pid_lock>
+    80001528:	97ba                	add	a5,a5,a4
+    8000152a:	0a87a703          	lw	a4,168(a5)
+    8000152e:	4785                	li	a5,1
+    80001530:	06f71763          	bne	a4,a5,8000159e <sched+0xa6>
   if(p->state == RUNNING)
-    80002000:	4c98                	lw	a4,24(s1)
-    80002002:	478d                	li	a5,3
-    80002004:	06f70b63          	beq	a4,a5,8000207a <sched+0xb6>
+    80001534:	4c98                	lw	a4,24(s1)
+    80001536:	4791                	li	a5,4
+    80001538:	06f70b63          	beq	a4,a5,800015ae <sched+0xb6>
   asm volatile("csrr %0, sstatus" : "=r" (x) );
-    80002008:	100027f3          	csrr	a5,sstatus
+    8000153c:	100027f3          	csrr	a5,sstatus
   return (x & SSTATUS_SIE) != 0;
-    8000200c:	8b89                	andi	a5,a5,2
+    80001540:	8b89                	andi	a5,a5,2
   if(intr_get())
-    8000200e:	efb5                	bnez	a5,8000208a <sched+0xc6>
+    80001542:	efb5                	bnez	a5,800015be <sched+0xc6>
   asm volatile("mv %0, tp" : "=r" (x) );
-    80002010:	8792                	mv	a5,tp
+    80001544:	8792                	mv	a5,tp
   intena = mycpu()->intena;
-    80002012:	00010917          	auipc	s2,0x10
-    80002016:	93e90913          	addi	s2,s2,-1730 # 80011950 <pid_lock>
-    8000201a:	2781                	sext.w	a5,a5
-    8000201c:	079e                	slli	a5,a5,0x7
-    8000201e:	97ca                	add	a5,a5,s2
-    80002020:	0947a983          	lw	s3,148(a5)
-    80002024:	8792                	mv	a5,tp
+    80001546:	00008917          	auipc	s2,0x8
+    8000154a:	b0a90913          	addi	s2,s2,-1270 # 80009050 <pid_lock>
+    8000154e:	2781                	sext.w	a5,a5
+    80001550:	079e                	slli	a5,a5,0x7
+    80001552:	97ca                	add	a5,a5,s2
+    80001554:	0ac7a983          	lw	s3,172(a5)
+    80001558:	8792                	mv	a5,tp
   swtch(&p->context, &mycpu()->context);
-    80002026:	2781                	sext.w	a5,a5
-    80002028:	079e                	slli	a5,a5,0x7
-    8000202a:	00010597          	auipc	a1,0x10
-    8000202e:	94658593          	addi	a1,a1,-1722 # 80011970 <cpus+0x8>
-    80002032:	95be                	add	a1,a1,a5
-    80002034:	06048513          	addi	a0,s1,96
-    80002038:	00000097          	auipc	ra,0x0
-    8000203c:	55e080e7          	jalr	1374(ra) # 80002596 <swtch>
-    80002040:	8792                	mv	a5,tp
+    8000155a:	2781                	sext.w	a5,a5
+    8000155c:	079e                	slli	a5,a5,0x7
+    8000155e:	00008597          	auipc	a1,0x8
+    80001562:	b2a58593          	addi	a1,a1,-1238 # 80009088 <cpus+0x8>
+    80001566:	95be                	add	a1,a1,a5
+    80001568:	06048513          	addi	a0,s1,96
+    8000156c:	00000097          	auipc	ra,0x0
+    80001570:	5cc080e7          	jalr	1484(ra) # 80001b38 <swtch>
+    80001574:	8792                	mv	a5,tp
   mycpu()->intena = intena;
-    80002042:	2781                	sext.w	a5,a5
-    80002044:	079e                	slli	a5,a5,0x7
-    80002046:	993e                	add	s2,s2,a5
-    80002048:	09392a23          	sw	s3,148(s2)
-}
-    8000204c:	70a2                	ld	ra,40(sp)
-    8000204e:	7402                	ld	s0,32(sp)
-    80002050:	64e2                	ld	s1,24(sp)
-    80002052:	6942                	ld	s2,16(sp)
-    80002054:	69a2                	ld	s3,8(sp)
-    80002056:	6145                	addi	sp,sp,48
-    80002058:	8082                	ret
+    80001576:	2781                	sext.w	a5,a5
+    80001578:	079e                	slli	a5,a5,0x7
+    8000157a:	993e                	add	s2,s2,a5
+    8000157c:	0b392623          	sw	s3,172(s2)
+}
+    80001580:	70a2                	ld	ra,40(sp)
+    80001582:	7402                	ld	s0,32(sp)
+    80001584:	64e2                	ld	s1,24(sp)
+    80001586:	6942                	ld	s2,16(sp)
+    80001588:	69a2                	ld	s3,8(sp)
+    8000158a:	6145                	addi	sp,sp,48
+    8000158c:	8082                	ret
     panic("sched p->lock");
-    8000205a:	00006517          	auipc	a0,0x6
-    8000205e:	1a650513          	addi	a0,a0,422 # 80008200 <digits+0x1c0>
-    80002062:	ffffe097          	auipc	ra,0xffffe
-    80002066:	4e4080e7          	jalr	1252(ra) # 80000546 <panic>
+    8000158e:	00007517          	auipc	a0,0x7
+    80001592:	c3a50513          	addi	a0,a0,-966 # 800081c8 <etext+0x1c8>
+    80001596:	00004097          	auipc	ra,0x4
+    8000159a:	75a080e7          	jalr	1882(ra) # 80005cf0 <panic>
     panic("sched locks");
-    8000206a:	00006517          	auipc	a0,0x6
-    8000206e:	1a650513          	addi	a0,a0,422 # 80008210 <digits+0x1d0>
-    80002072:	ffffe097          	auipc	ra,0xffffe
-    80002076:	4d4080e7          	jalr	1236(ra) # 80000546 <panic>
+    8000159e:	00007517          	auipc	a0,0x7
+    800015a2:	c3a50513          	addi	a0,a0,-966 # 800081d8 <etext+0x1d8>
+    800015a6:	00004097          	auipc	ra,0x4
+    800015aa:	74a080e7          	jalr	1866(ra) # 80005cf0 <panic>
     panic("sched running");
-    8000207a:	00006517          	auipc	a0,0x6
-    8000207e:	1a650513          	addi	a0,a0,422 # 80008220 <digits+0x1e0>
-    80002082:	ffffe097          	auipc	ra,0xffffe
-    80002086:	4c4080e7          	jalr	1220(ra) # 80000546 <panic>
+    800015ae:	00007517          	auipc	a0,0x7
+    800015b2:	c3a50513          	addi	a0,a0,-966 # 800081e8 <etext+0x1e8>
+    800015b6:	00004097          	auipc	ra,0x4
+    800015ba:	73a080e7          	jalr	1850(ra) # 80005cf0 <panic>
     panic("sched interruptible");
-    8000208a:	00006517          	auipc	a0,0x6
-    8000208e:	1a650513          	addi	a0,a0,422 # 80008230 <digits+0x1f0>
-    80002092:	ffffe097          	auipc	ra,0xffffe
-    80002096:	4b4080e7          	jalr	1204(ra) # 80000546 <panic>
-
-000000008000209a <exit>:
-{
-    8000209a:	7179                	addi	sp,sp,-48
-    8000209c:	f406                	sd	ra,40(sp)
-    8000209e:	f022                	sd	s0,32(sp)
-    800020a0:	ec26                	sd	s1,24(sp)
-    800020a2:	e84a                	sd	s2,16(sp)
-    800020a4:	e44e                	sd	s3,8(sp)
-    800020a6:	e052                	sd	s4,0(sp)
-    800020a8:	1800                	addi	s0,sp,48
-    800020aa:	8a2a                	mv	s4,a0
-  struct proc *p = myproc();
-    800020ac:	00000097          	auipc	ra,0x0
-    800020b0:	920080e7          	jalr	-1760(ra) # 800019cc <myproc>
-    800020b4:	89aa                	mv	s3,a0
-  if(p == initproc)
-    800020b6:	00007797          	auipc	a5,0x7
-    800020ba:	f627b783          	ld	a5,-158(a5) # 80009018 <initproc>
-    800020be:	0d050493          	addi	s1,a0,208
-    800020c2:	15050913          	addi	s2,a0,336
-    800020c6:	02a79363          	bne	a5,a0,800020ec <exit+0x52>
-    panic("init exiting");
-    800020ca:	00006517          	auipc	a0,0x6
-    800020ce:	17e50513          	addi	a0,a0,382 # 80008248 <digits+0x208>
-    800020d2:	ffffe097          	auipc	ra,0xffffe
-    800020d6:	474080e7          	jalr	1140(ra) # 80000546 <panic>
-      fileclose(f);
-    800020da:	00002097          	auipc	ra,0x2
-    800020de:	3b4080e7          	jalr	948(ra) # 8000448e <fileclose>
-      p->ofile[fd] = 0;
-    800020e2:	0004b023          	sd	zero,0(s1)
-  for(int fd = 0; fd < NOFILE; fd++){
-    800020e6:	04a1                	addi	s1,s1,8
-    800020e8:	01248563          	beq	s1,s2,800020f2 <exit+0x58>
-    if(p->ofile[fd]){
-    800020ec:	6088                	ld	a0,0(s1)
-    800020ee:	f575                	bnez	a0,800020da <exit+0x40>
-    800020f0:	bfdd                	j	800020e6 <exit+0x4c>
-  begin_op();
-    800020f2:	00002097          	auipc	ra,0x2
-    800020f6:	ece080e7          	jalr	-306(ra) # 80003fc0 <begin_op>
-  iput(p->cwd);
-    800020fa:	1509b503          	ld	a0,336(s3)
-    800020fe:	00001097          	auipc	ra,0x1
-    80002102:	6b6080e7          	jalr	1718(ra) # 800037b4 <iput>
-  end_op();
-    80002106:	00002097          	auipc	ra,0x2
-    8000210a:	f38080e7          	jalr	-200(ra) # 8000403e <end_op>
-  p->cwd = 0;
-    8000210e:	1409b823          	sd	zero,336(s3)
-  acquire(&initproc->lock);
-    80002112:	00007497          	auipc	s1,0x7
-    80002116:	f0648493          	addi	s1,s1,-250 # 80009018 <initproc>
-    8000211a:	6088                	ld	a0,0(s1)
-    8000211c:	fffff097          	auipc	ra,0xfffff
-    80002120:	ae4080e7          	jalr	-1308(ra) # 80000c00 <acquire>
-  wakeup1(initproc);
-    80002124:	6088                	ld	a0,0(s1)
-    80002126:	fffff097          	auipc	ra,0xfffff
-    8000212a:	766080e7          	jalr	1894(ra) # 8000188c <wakeup1>
-  release(&initproc->lock);
-    8000212e:	6088                	ld	a0,0(s1)
-    80002130:	fffff097          	auipc	ra,0xfffff
-    80002134:	b84080e7          	jalr	-1148(ra) # 80000cb4 <release>
-  acquire(&p->lock);
-    80002138:	854e                	mv	a0,s3
-    8000213a:	fffff097          	auipc	ra,0xfffff
-    8000213e:	ac6080e7          	jalr	-1338(ra) # 80000c00 <acquire>
-  struct proc *original_parent = p->parent;
-    80002142:	0209b483          	ld	s1,32(s3)
-  release(&p->lock);
-    80002146:	854e                	mv	a0,s3
-    80002148:	fffff097          	auipc	ra,0xfffff
-    8000214c:	b6c080e7          	jalr	-1172(ra) # 80000cb4 <release>
-  acquire(&original_parent->lock);
-    80002150:	8526                	mv	a0,s1
-    80002152:	fffff097          	auipc	ra,0xfffff
-    80002156:	aae080e7          	jalr	-1362(ra) # 80000c00 <acquire>
-  acquire(&p->lock);
-    8000215a:	854e                	mv	a0,s3
-    8000215c:	fffff097          	auipc	ra,0xfffff
-    80002160:	aa4080e7          	jalr	-1372(ra) # 80000c00 <acquire>
-  reparent(p);
-    80002164:	854e                	mv	a0,s3
-    80002166:	00000097          	auipc	ra,0x0
-    8000216a:	d38080e7          	jalr	-712(ra) # 80001e9e <reparent>
-  wakeup1(original_parent);
-    8000216e:	8526                	mv	a0,s1
-    80002170:	fffff097          	auipc	ra,0xfffff
-    80002174:	71c080e7          	jalr	1820(ra) # 8000188c <wakeup1>
-  p->xstate = status;
-    80002178:	0349aa23          	sw	s4,52(s3)
-  p->state = ZOMBIE;
-    8000217c:	4791                	li	a5,4
-    8000217e:	00f9ac23          	sw	a5,24(s3)
-  release(&original_parent->lock);
-    80002182:	8526                	mv	a0,s1
-    80002184:	fffff097          	auipc	ra,0xfffff
-    80002188:	b30080e7          	jalr	-1232(ra) # 80000cb4 <release>
-  sched();
-    8000218c:	00000097          	auipc	ra,0x0
-    80002190:	e38080e7          	jalr	-456(ra) # 80001fc4 <sched>
-  panic("zombie exit");
-    80002194:	00006517          	auipc	a0,0x6
-    80002198:	0c450513          	addi	a0,a0,196 # 80008258 <digits+0x218>
-    8000219c:	ffffe097          	auipc	ra,0xffffe
-    800021a0:	3aa080e7          	jalr	938(ra) # 80000546 <panic>
-
-00000000800021a4 <yield>:
-{
-    800021a4:	1101                	addi	sp,sp,-32
-    800021a6:	ec06                	sd	ra,24(sp)
-    800021a8:	e822                	sd	s0,16(sp)
-    800021aa:	e426                	sd	s1,8(sp)
-    800021ac:	1000                	addi	s0,sp,32
+    800015be:	00007517          	auipc	a0,0x7
+    800015c2:	c3a50513          	addi	a0,a0,-966 # 800081f8 <etext+0x1f8>
+    800015c6:	00004097          	auipc	ra,0x4
+    800015ca:	72a080e7          	jalr	1834(ra) # 80005cf0 <panic>
+
+00000000800015ce <yield>:
+{
+    800015ce:	1101                	addi	sp,sp,-32
+    800015d0:	ec06                	sd	ra,24(sp)
+    800015d2:	e822                	sd	s0,16(sp)
+    800015d4:	e426                	sd	s1,8(sp)
+    800015d6:	1000                	addi	s0,sp,32
   struct proc *p = myproc();
-    800021ae:	00000097          	auipc	ra,0x0
-    800021b2:	81e080e7          	jalr	-2018(ra) # 800019cc <myproc>
-    800021b6:	84aa                	mv	s1,a0
+    800015d8:	00000097          	auipc	ra,0x0
+    800015dc:	966080e7          	jalr	-1690(ra) # 80000f3e <myproc>
+    800015e0:	84aa                	mv	s1,a0
   acquire(&p->lock);
-    800021b8:	fffff097          	auipc	ra,0xfffff
-    800021bc:	a48080e7          	jalr	-1464(ra) # 80000c00 <acquire>
+    800015e2:	00005097          	auipc	ra,0x5
+    800015e6:	c46080e7          	jalr	-954(ra) # 80006228 <acquire>
   p->state = RUNNABLE;
-    800021c0:	4789                	li	a5,2
-    800021c2:	cc9c                	sw	a5,24(s1)
+    800015ea:	478d                	li	a5,3
+    800015ec:	cc9c                	sw	a5,24(s1)
   sched();
-    800021c4:	00000097          	auipc	ra,0x0
-    800021c8:	e00080e7          	jalr	-512(ra) # 80001fc4 <sched>
+    800015ee:	00000097          	auipc	ra,0x0
+    800015f2:	f0a080e7          	jalr	-246(ra) # 800014f8 <sched>
   release(&p->lock);
-    800021cc:	8526                	mv	a0,s1
-    800021ce:	fffff097          	auipc	ra,0xfffff
-    800021d2:	ae6080e7          	jalr	-1306(ra) # 80000cb4 <release>
-}
-    800021d6:	60e2                	ld	ra,24(sp)
-    800021d8:	6442                	ld	s0,16(sp)
-    800021da:	64a2                	ld	s1,8(sp)
-    800021dc:	6105                	addi	sp,sp,32
-    800021de:	8082                	ret
-
-00000000800021e0 <sleep>:
-{
-    800021e0:	7179                	addi	sp,sp,-48
-    800021e2:	f406                	sd	ra,40(sp)
-    800021e4:	f022                	sd	s0,32(sp)
-    800021e6:	ec26                	sd	s1,24(sp)
-    800021e8:	e84a                	sd	s2,16(sp)
-    800021ea:	e44e                	sd	s3,8(sp)
-    800021ec:	1800                	addi	s0,sp,48
-    800021ee:	89aa                	mv	s3,a0
-    800021f0:	892e                	mv	s2,a1
+    800015f6:	8526                	mv	a0,s1
+    800015f8:	00005097          	auipc	ra,0x5
+    800015fc:	ce4080e7          	jalr	-796(ra) # 800062dc <release>
+}
+    80001600:	60e2                	ld	ra,24(sp)
+    80001602:	6442                	ld	s0,16(sp)
+    80001604:	64a2                	ld	s1,8(sp)
+    80001606:	6105                	addi	sp,sp,32
+    80001608:	8082                	ret
+
+000000008000160a <sleep>:
+
+// Atomically release lock and sleep on chan.
+// Reacquires lock when awakened.
+void
+sleep(void *chan, struct spinlock *lk)
+{
+    8000160a:	7179                	addi	sp,sp,-48
+    8000160c:	f406                	sd	ra,40(sp)
+    8000160e:	f022                	sd	s0,32(sp)
+    80001610:	ec26                	sd	s1,24(sp)
+    80001612:	e84a                	sd	s2,16(sp)
+    80001614:	e44e                	sd	s3,8(sp)
+    80001616:	1800                	addi	s0,sp,48
+    80001618:	89aa                	mv	s3,a0
+    8000161a:	892e                	mv	s2,a1
   struct proc *p = myproc();
-    800021f2:	fffff097          	auipc	ra,0xfffff
-    800021f6:	7da080e7          	jalr	2010(ra) # 800019cc <myproc>
-    800021fa:	84aa                	mv	s1,a0
-  if(lk != &p->lock){  //DOC: sleeplock0
-    800021fc:	05250663          	beq	a0,s2,80002248 <sleep+0x68>
-    acquire(&p->lock);  //DOC: sleeplock1
-    80002200:	fffff097          	auipc	ra,0xfffff
-    80002204:	a00080e7          	jalr	-1536(ra) # 80000c00 <acquire>
-    release(lk);
-    80002208:	854a                	mv	a0,s2
-    8000220a:	fffff097          	auipc	ra,0xfffff
-    8000220e:	aaa080e7          	jalr	-1366(ra) # 80000cb4 <release>
-  p->chan = chan;
-    80002212:	0334b423          	sd	s3,40(s1)
-  p->state = SLEEPING;
-    80002216:	4785                	li	a5,1
-    80002218:	cc9c                	sw	a5,24(s1)
-  sched();
-    8000221a:	00000097          	auipc	ra,0x0
-    8000221e:	daa080e7          	jalr	-598(ra) # 80001fc4 <sched>
-  p->chan = 0;
-    80002222:	0204b423          	sd	zero,40(s1)
-    release(&p->lock);
-    80002226:	8526                	mv	a0,s1
-    80002228:	fffff097          	auipc	ra,0xfffff
-    8000222c:	a8c080e7          	jalr	-1396(ra) # 80000cb4 <release>
-    acquire(lk);
-    80002230:	854a                	mv	a0,s2
-    80002232:	fffff097          	auipc	ra,0xfffff
-    80002236:	9ce080e7          	jalr	-1586(ra) # 80000c00 <acquire>
-}
-    8000223a:	70a2                	ld	ra,40(sp)
-    8000223c:	7402                	ld	s0,32(sp)
-    8000223e:	64e2                	ld	s1,24(sp)
-    80002240:	6942                	ld	s2,16(sp)
-    80002242:	69a2                	ld	s3,8(sp)
-    80002244:	6145                	addi	sp,sp,48
-    80002246:	8082                	ret
+    8000161c:	00000097          	auipc	ra,0x0
+    80001620:	922080e7          	jalr	-1758(ra) # 80000f3e <myproc>
+    80001624:	84aa                	mv	s1,a0
+  // Once we hold p->lock, we can be
+  // guaranteed that we won't miss any wakeup
+  // (wakeup locks p->lock),
+  // so it's okay to release lk.
+
+  acquire(&p->lock);  //DOC: sleeplock1
+    80001626:	00005097          	auipc	ra,0x5
+    8000162a:	c02080e7          	jalr	-1022(ra) # 80006228 <acquire>
+  release(lk);
+    8000162e:	854a                	mv	a0,s2
+    80001630:	00005097          	auipc	ra,0x5
+    80001634:	cac080e7          	jalr	-852(ra) # 800062dc <release>
+
+  // Go to sleep.
   p->chan = chan;
-    80002248:	03353423          	sd	s3,40(a0)
+    80001638:	0334b023          	sd	s3,32(s1)
   p->state = SLEEPING;
-    8000224c:	4785                	li	a5,1
-    8000224e:	cd1c                	sw	a5,24(a0)
+    8000163c:	4789                	li	a5,2
+    8000163e:	cc9c                	sw	a5,24(s1)
+
   sched();
-    80002250:	00000097          	auipc	ra,0x0
-    80002254:	d74080e7          	jalr	-652(ra) # 80001fc4 <sched>
+    80001640:	00000097          	auipc	ra,0x0
+    80001644:	eb8080e7          	jalr	-328(ra) # 800014f8 <sched>
+
+  // Tidy up.
   p->chan = 0;
-    80002258:	0204b423          	sd	zero,40(s1)
-  if(lk != &p->lock){
-    8000225c:	bff9                	j	8000223a <sleep+0x5a>
-
-000000008000225e <wait>:
-{
-    8000225e:	715d                	addi	sp,sp,-80
-    80002260:	e486                	sd	ra,72(sp)
-    80002262:	e0a2                	sd	s0,64(sp)
-    80002264:	fc26                	sd	s1,56(sp)
-    80002266:	f84a                	sd	s2,48(sp)
-    80002268:	f44e                	sd	s3,40(sp)
-    8000226a:	f052                	sd	s4,32(sp)
-    8000226c:	ec56                	sd	s5,24(sp)
-    8000226e:	e85a                	sd	s6,16(sp)
-    80002270:	e45e                	sd	s7,8(sp)
-    80002272:	0880                	addi	s0,sp,80
-    80002274:	8b2a                	mv	s6,a0
+    80001648:	0204b023          	sd	zero,32(s1)
+
+  // Reacquire original lock.
+  release(&p->lock);
+    8000164c:	8526                	mv	a0,s1
+    8000164e:	00005097          	auipc	ra,0x5
+    80001652:	c8e080e7          	jalr	-882(ra) # 800062dc <release>
+  acquire(lk);
+    80001656:	854a                	mv	a0,s2
+    80001658:	00005097          	auipc	ra,0x5
+    8000165c:	bd0080e7          	jalr	-1072(ra) # 80006228 <acquire>
+}
+    80001660:	70a2                	ld	ra,40(sp)
+    80001662:	7402                	ld	s0,32(sp)
+    80001664:	64e2                	ld	s1,24(sp)
+    80001666:	6942                	ld	s2,16(sp)
+    80001668:	69a2                	ld	s3,8(sp)
+    8000166a:	6145                	addi	sp,sp,48
+    8000166c:	8082                	ret
+
+000000008000166e <wait>:
+{
+    8000166e:	715d                	addi	sp,sp,-80
+    80001670:	e486                	sd	ra,72(sp)
+    80001672:	e0a2                	sd	s0,64(sp)
+    80001674:	fc26                	sd	s1,56(sp)
+    80001676:	f84a                	sd	s2,48(sp)
+    80001678:	f44e                	sd	s3,40(sp)
+    8000167a:	f052                	sd	s4,32(sp)
+    8000167c:	ec56                	sd	s5,24(sp)
+    8000167e:	e85a                	sd	s6,16(sp)
+    80001680:	e45e                	sd	s7,8(sp)
+    80001682:	e062                	sd	s8,0(sp)
+    80001684:	0880                	addi	s0,sp,80
+    80001686:	8b2a                	mv	s6,a0
   struct proc *p = myproc();
-    80002276:	fffff097          	auipc	ra,0xfffff
-    8000227a:	756080e7          	jalr	1878(ra) # 800019cc <myproc>
-    8000227e:	892a                	mv	s2,a0
-  acquire(&p->lock);
-    80002280:	fffff097          	auipc	ra,0xfffff
-    80002284:	980080e7          	jalr	-1664(ra) # 80000c00 <acquire>
+    80001688:	00000097          	auipc	ra,0x0
+    8000168c:	8b6080e7          	jalr	-1866(ra) # 80000f3e <myproc>
+    80001690:	892a                	mv	s2,a0
+  acquire(&wait_lock);
+    80001692:	00008517          	auipc	a0,0x8
+    80001696:	9d650513          	addi	a0,a0,-1578 # 80009068 <wait_lock>
+    8000169a:	00005097          	auipc	ra,0x5
+    8000169e:	b8e080e7          	jalr	-1138(ra) # 80006228 <acquire>
     havekids = 0;
-    80002288:	4b81                	li	s7,0
+    800016a2:	4b81                	li	s7,0
         if(np->state == ZOMBIE){
-    8000228a:	4a11                	li	s4,4
+    800016a4:	4a15                	li	s4,5
         havekids = 1;
-    8000228c:	4a85                	li	s5,1
+    800016a6:	4a85                	li	s5,1
     for(np = proc; np < &proc[NPROC]; np++){
-    8000228e:	00015997          	auipc	s3,0x15
-    80002292:	4da98993          	addi	s3,s3,1242 # 80017768 <tickslock>
+    800016a8:	0000e997          	auipc	s3,0xe
+    800016ac:	9d898993          	addi	s3,s3,-1576 # 8000f080 <tickslock>
+    sleep(p, &wait_lock);  //DOC: wait-sleep
+    800016b0:	00008c17          	auipc	s8,0x8
+    800016b4:	9b8c0c13          	addi	s8,s8,-1608 # 80009068 <wait_lock>
     havekids = 0;
-    80002296:	875e                	mv	a4,s7
+    800016b8:	875e                	mv	a4,s7
     for(np = proc; np < &proc[NPROC]; np++){
-    80002298:	00010497          	auipc	s1,0x10
-    8000229c:	ad048493          	addi	s1,s1,-1328 # 80011d68 <proc>
-    800022a0:	a08d                	j	80002302 <wait+0xa4>
+    800016ba:	00008497          	auipc	s1,0x8
+    800016be:	dc648493          	addi	s1,s1,-570 # 80009480 <proc>
+    800016c2:	a0bd                	j	80001730 <wait+0xc2>
           pid = np->pid;
-    800022a2:	0384a983          	lw	s3,56(s1)
+    800016c4:	0304a983          	lw	s3,48(s1)
           if(addr != 0 && copyout(p->pagetable, addr, (char *)&np->xstate,
-    800022a6:	000b0e63          	beqz	s6,800022c2 <wait+0x64>
-    800022aa:	4691                	li	a3,4
-    800022ac:	03448613          	addi	a2,s1,52
-    800022b0:	85da                	mv	a1,s6
-    800022b2:	05093503          	ld	a0,80(s2)
-    800022b6:	fffff097          	auipc	ra,0xfffff
-    800022ba:	40c080e7          	jalr	1036(ra) # 800016c2 <copyout>
-    800022be:	02054263          	bltz	a0,800022e2 <wait+0x84>
+    800016c8:	000b0e63          	beqz	s6,800016e4 <wait+0x76>
+    800016cc:	4691                	li	a3,4
+    800016ce:	02c48613          	addi	a2,s1,44
+    800016d2:	85da                	mv	a1,s6
+    800016d4:	05093503          	ld	a0,80(s2)
+    800016d8:	fffff097          	auipc	ra,0xfffff
+    800016dc:	52a080e7          	jalr	1322(ra) # 80000c02 <copyout>
+    800016e0:	02054563          	bltz	a0,8000170a <wait+0x9c>
           freeproc(np);
-    800022c2:	8526                	mv	a0,s1
-    800022c4:	00000097          	auipc	ra,0x0
-    800022c8:	8ba080e7          	jalr	-1862(ra) # 80001b7e <freeproc>
+    800016e4:	8526                	mv	a0,s1
+    800016e6:	00000097          	auipc	ra,0x0
+    800016ea:	a0a080e7          	jalr	-1526(ra) # 800010f0 <freeproc>
           release(&np->lock);
-    800022cc:	8526                	mv	a0,s1
-    800022ce:	fffff097          	auipc	ra,0xfffff
-    800022d2:	9e6080e7          	jalr	-1562(ra) # 80000cb4 <release>
-          release(&p->lock);
-    800022d6:	854a                	mv	a0,s2
-    800022d8:	fffff097          	auipc	ra,0xfffff
-    800022dc:	9dc080e7          	jalr	-1572(ra) # 80000cb4 <release>
+    800016ee:	8526                	mv	a0,s1
+    800016f0:	00005097          	auipc	ra,0x5
+    800016f4:	bec080e7          	jalr	-1044(ra) # 800062dc <release>
+          release(&wait_lock);
+    800016f8:	00008517          	auipc	a0,0x8
+    800016fc:	97050513          	addi	a0,a0,-1680 # 80009068 <wait_lock>
+    80001700:	00005097          	auipc	ra,0x5
+    80001704:	bdc080e7          	jalr	-1060(ra) # 800062dc <release>
           return pid;
-    800022e0:	a8a9                	j	8000233a <wait+0xdc>
+    80001708:	a09d                	j	8000176e <wait+0x100>
             release(&np->lock);
-    800022e2:	8526                	mv	a0,s1
-    800022e4:	fffff097          	auipc	ra,0xfffff
-    800022e8:	9d0080e7          	jalr	-1584(ra) # 80000cb4 <release>
-            release(&p->lock);
-    800022ec:	854a                	mv	a0,s2
-    800022ee:	fffff097          	auipc	ra,0xfffff
-    800022f2:	9c6080e7          	jalr	-1594(ra) # 80000cb4 <release>
+    8000170a:	8526                	mv	a0,s1
+    8000170c:	00005097          	auipc	ra,0x5
+    80001710:	bd0080e7          	jalr	-1072(ra) # 800062dc <release>
+            release(&wait_lock);
+    80001714:	00008517          	auipc	a0,0x8
+    80001718:	95450513          	addi	a0,a0,-1708 # 80009068 <wait_lock>
+    8000171c:	00005097          	auipc	ra,0x5
+    80001720:	bc0080e7          	jalr	-1088(ra) # 800062dc <release>
             return -1;
-    800022f6:	59fd                	li	s3,-1
-    800022f8:	a089                	j	8000233a <wait+0xdc>
+    80001724:	59fd                	li	s3,-1
+    80001726:	a0a1                	j	8000176e <wait+0x100>
     for(np = proc; np < &proc[NPROC]; np++){
-    800022fa:	16848493          	addi	s1,s1,360
-    800022fe:	03348463          	beq	s1,s3,80002326 <wait+0xc8>
+    80001728:	17048493          	addi	s1,s1,368
+    8000172c:	03348463          	beq	s1,s3,80001754 <wait+0xe6>
       if(np->parent == p){
-    80002302:	709c                	ld	a5,32(s1)
-    80002304:	ff279be3          	bne	a5,s2,800022fa <wait+0x9c>
+    80001730:	7c9c                	ld	a5,56(s1)
+    80001732:	ff279be3          	bne	a5,s2,80001728 <wait+0xba>
         acquire(&np->lock);
-    80002308:	8526                	mv	a0,s1
-    8000230a:	fffff097          	auipc	ra,0xfffff
-    8000230e:	8f6080e7          	jalr	-1802(ra) # 80000c00 <acquire>
+    80001736:	8526                	mv	a0,s1
+    80001738:	00005097          	auipc	ra,0x5
+    8000173c:	af0080e7          	jalr	-1296(ra) # 80006228 <acquire>
         if(np->state == ZOMBIE){
-    80002312:	4c9c                	lw	a5,24(s1)
-    80002314:	f94787e3          	beq	a5,s4,800022a2 <wait+0x44>
+    80001740:	4c9c                	lw	a5,24(s1)
+    80001742:	f94781e3          	beq	a5,s4,800016c4 <wait+0x56>
         release(&np->lock);
-    80002318:	8526                	mv	a0,s1
-    8000231a:	fffff097          	auipc	ra,0xfffff
-    8000231e:	99a080e7          	jalr	-1638(ra) # 80000cb4 <release>
+    80001746:	8526                	mv	a0,s1
+    80001748:	00005097          	auipc	ra,0x5
+    8000174c:	b94080e7          	jalr	-1132(ra) # 800062dc <release>
         havekids = 1;
-    80002322:	8756                	mv	a4,s5
-    80002324:	bfd9                	j	800022fa <wait+0x9c>
+    80001750:	8756                	mv	a4,s5
+    80001752:	bfd9                	j	80001728 <wait+0xba>
     if(!havekids || p->killed){
-    80002326:	c701                	beqz	a4,8000232e <wait+0xd0>
-    80002328:	03092783          	lw	a5,48(s2)
-    8000232c:	c39d                	beqz	a5,80002352 <wait+0xf4>
-      release(&p->lock);
-    8000232e:	854a                	mv	a0,s2
-    80002330:	fffff097          	auipc	ra,0xfffff
-    80002334:	984080e7          	jalr	-1660(ra) # 80000cb4 <release>
+    80001754:	c701                	beqz	a4,8000175c <wait+0xee>
+    80001756:	02892783          	lw	a5,40(s2)
+    8000175a:	c79d                	beqz	a5,80001788 <wait+0x11a>
+      release(&wait_lock);
+    8000175c:	00008517          	auipc	a0,0x8
+    80001760:	90c50513          	addi	a0,a0,-1780 # 80009068 <wait_lock>
+    80001764:	00005097          	auipc	ra,0x5
+    80001768:	b78080e7          	jalr	-1160(ra) # 800062dc <release>
       return -1;
-    80002338:	59fd                	li	s3,-1
+    8000176c:	59fd                	li	s3,-1
 }
-    8000233a:	854e                	mv	a0,s3
-    8000233c:	60a6                	ld	ra,72(sp)
-    8000233e:	6406                	ld	s0,64(sp)
-    80002340:	74e2                	ld	s1,56(sp)
-    80002342:	7942                	ld	s2,48(sp)
-    80002344:	79a2                	ld	s3,40(sp)
-    80002346:	7a02                	ld	s4,32(sp)
-    80002348:	6ae2                	ld	s5,24(sp)
-    8000234a:	6b42                	ld	s6,16(sp)
-    8000234c:	6ba2                	ld	s7,8(sp)
-    8000234e:	6161                	addi	sp,sp,80
-    80002350:	8082                	ret
-    sleep(p, &p->lock);  //DOC: wait-sleep
-    80002352:	85ca                	mv	a1,s2
-    80002354:	854a                	mv	a0,s2
-    80002356:	00000097          	auipc	ra,0x0
-    8000235a:	e8a080e7          	jalr	-374(ra) # 800021e0 <sleep>
+    8000176e:	854e                	mv	a0,s3
+    80001770:	60a6                	ld	ra,72(sp)
+    80001772:	6406                	ld	s0,64(sp)
+    80001774:	74e2                	ld	s1,56(sp)
+    80001776:	7942                	ld	s2,48(sp)
+    80001778:	79a2                	ld	s3,40(sp)
+    8000177a:	7a02                	ld	s4,32(sp)
+    8000177c:	6ae2                	ld	s5,24(sp)
+    8000177e:	6b42                	ld	s6,16(sp)
+    80001780:	6ba2                	ld	s7,8(sp)
+    80001782:	6c02                	ld	s8,0(sp)
+    80001784:	6161                	addi	sp,sp,80
+    80001786:	8082                	ret
+    sleep(p, &wait_lock);  //DOC: wait-sleep
+    80001788:	85e2                	mv	a1,s8
+    8000178a:	854a                	mv	a0,s2
+    8000178c:	00000097          	auipc	ra,0x0
+    80001790:	e7e080e7          	jalr	-386(ra) # 8000160a <sleep>
     havekids = 0;
-    8000235e:	bf25                	j	80002296 <wait+0x38>
+    80001794:	b715                	j	800016b8 <wait+0x4a>
 
-0000000080002360 <wakeup>:
+0000000080001796 <wakeup>:
+
+// Wake up all processes sleeping on chan.
+// Must be called without any p->lock.
+void
+wakeup(void *chan)
 {
-    80002360:	7139                	addi	sp,sp,-64
-    80002362:	fc06                	sd	ra,56(sp)
-    80002364:	f822                	sd	s0,48(sp)
-    80002366:	f426                	sd	s1,40(sp)
-    80002368:	f04a                	sd	s2,32(sp)
-    8000236a:	ec4e                	sd	s3,24(sp)
-    8000236c:	e852                	sd	s4,16(sp)
-    8000236e:	e456                	sd	s5,8(sp)
-    80002370:	0080                	addi	s0,sp,64
-    80002372:	8a2a                	mv	s4,a0
+    80001796:	7139                	addi	sp,sp,-64
+    80001798:	fc06                	sd	ra,56(sp)
+    8000179a:	f822                	sd	s0,48(sp)
+    8000179c:	f426                	sd	s1,40(sp)
+    8000179e:	f04a                	sd	s2,32(sp)
+    800017a0:	ec4e                	sd	s3,24(sp)
+    800017a2:	e852                	sd	s4,16(sp)
+    800017a4:	e456                	sd	s5,8(sp)
+    800017a6:	0080                	addi	s0,sp,64
+    800017a8:	8a2a                	mv	s4,a0
+  struct proc *p;
+
   for(p = proc; p < &proc[NPROC]; p++) {
-    80002374:	00010497          	auipc	s1,0x10
-    80002378:	9f448493          	addi	s1,s1,-1548 # 80011d68 <proc>
-    if(p->state == SLEEPING && p->chan == chan) {
-    8000237c:	4985                	li	s3,1
-      p->state = RUNNABLE;
-    8000237e:	4a89                	li	s5,2
+    800017aa:	00008497          	auipc	s1,0x8
+    800017ae:	cd648493          	addi	s1,s1,-810 # 80009480 <proc>
+    if(p != myproc()){
+      acquire(&p->lock);
+      if(p->state == SLEEPING && p->chan == chan) {
+    800017b2:	4989                	li	s3,2
+        p->state = RUNNABLE;
+    800017b4:	4a8d                	li	s5,3
   for(p = proc; p < &proc[NPROC]; p++) {
-    80002380:	00015917          	auipc	s2,0x15
-    80002384:	3e890913          	addi	s2,s2,1000 # 80017768 <tickslock>
-    80002388:	a811                	j	8000239c <wakeup+0x3c>
-    release(&p->lock);
-    8000238a:	8526                	mv	a0,s1
-    8000238c:	fffff097          	auipc	ra,0xfffff
-    80002390:	928080e7          	jalr	-1752(ra) # 80000cb4 <release>
+    800017b6:	0000e917          	auipc	s2,0xe
+    800017ba:	8ca90913          	addi	s2,s2,-1846 # 8000f080 <tickslock>
+    800017be:	a811                	j	800017d2 <wakeup+0x3c>
+      }
+      release(&p->lock);
+    800017c0:	8526                	mv	a0,s1
+    800017c2:	00005097          	auipc	ra,0x5
+    800017c6:	b1a080e7          	jalr	-1254(ra) # 800062dc <release>
   for(p = proc; p < &proc[NPROC]; p++) {
-    80002394:	16848493          	addi	s1,s1,360
-    80002398:	03248063          	beq	s1,s2,800023b8 <wakeup+0x58>
-    acquire(&p->lock);
-    8000239c:	8526                	mv	a0,s1
-    8000239e:	fffff097          	auipc	ra,0xfffff
-    800023a2:	862080e7          	jalr	-1950(ra) # 80000c00 <acquire>
-    if(p->state == SLEEPING && p->chan == chan) {
-    800023a6:	4c9c                	lw	a5,24(s1)
-    800023a8:	ff3791e3          	bne	a5,s3,8000238a <wakeup+0x2a>
-    800023ac:	749c                	ld	a5,40(s1)
-    800023ae:	fd479ee3          	bne	a5,s4,8000238a <wakeup+0x2a>
-      p->state = RUNNABLE;
-    800023b2:	0154ac23          	sw	s5,24(s1)
-    800023b6:	bfd1                	j	8000238a <wakeup+0x2a>
-}
-    800023b8:	70e2                	ld	ra,56(sp)
-    800023ba:	7442                	ld	s0,48(sp)
-    800023bc:	74a2                	ld	s1,40(sp)
-    800023be:	7902                	ld	s2,32(sp)
-    800023c0:	69e2                	ld	s3,24(sp)
-    800023c2:	6a42                	ld	s4,16(sp)
-    800023c4:	6aa2                	ld	s5,8(sp)
-    800023c6:	6121                	addi	sp,sp,64
-    800023c8:	8082                	ret
+    800017ca:	17048493          	addi	s1,s1,368
+    800017ce:	03248663          	beq	s1,s2,800017fa <wakeup+0x64>
+    if(p != myproc()){
+    800017d2:	fffff097          	auipc	ra,0xfffff
+    800017d6:	76c080e7          	jalr	1900(ra) # 80000f3e <myproc>
+    800017da:	fea488e3          	beq	s1,a0,800017ca <wakeup+0x34>
+      acquire(&p->lock);
+    800017de:	8526                	mv	a0,s1
+    800017e0:	00005097          	auipc	ra,0x5
+    800017e4:	a48080e7          	jalr	-1464(ra) # 80006228 <acquire>
+      if(p->state == SLEEPING && p->chan == chan) {
+    800017e8:	4c9c                	lw	a5,24(s1)
+    800017ea:	fd379be3          	bne	a5,s3,800017c0 <wakeup+0x2a>
+    800017ee:	709c                	ld	a5,32(s1)
+    800017f0:	fd4798e3          	bne	a5,s4,800017c0 <wakeup+0x2a>
+        p->state = RUNNABLE;
+    800017f4:	0154ac23          	sw	s5,24(s1)
+    800017f8:	b7e1                	j	800017c0 <wakeup+0x2a>
+    }
+  }
+}
+    800017fa:	70e2                	ld	ra,56(sp)
+    800017fc:	7442                	ld	s0,48(sp)
+    800017fe:	74a2                	ld	s1,40(sp)
+    80001800:	7902                	ld	s2,32(sp)
+    80001802:	69e2                	ld	s3,24(sp)
+    80001804:	6a42                	ld	s4,16(sp)
+    80001806:	6aa2                	ld	s5,8(sp)
+    80001808:	6121                	addi	sp,sp,64
+    8000180a:	8082                	ret
+
+000000008000180c <reparent>:
+{
+    8000180c:	7179                	addi	sp,sp,-48
+    8000180e:	f406                	sd	ra,40(sp)
+    80001810:	f022                	sd	s0,32(sp)
+    80001812:	ec26                	sd	s1,24(sp)
+    80001814:	e84a                	sd	s2,16(sp)
+    80001816:	e44e                	sd	s3,8(sp)
+    80001818:	e052                	sd	s4,0(sp)
+    8000181a:	1800                	addi	s0,sp,48
+    8000181c:	892a                	mv	s2,a0
+  for(pp = proc; pp < &proc[NPROC]; pp++){
+    8000181e:	00008497          	auipc	s1,0x8
+    80001822:	c6248493          	addi	s1,s1,-926 # 80009480 <proc>
+      pp->parent = initproc;
+    80001826:	00007a17          	auipc	s4,0x7
+    8000182a:	7eaa0a13          	addi	s4,s4,2026 # 80009010 <initproc>
+  for(pp = proc; pp < &proc[NPROC]; pp++){
+    8000182e:	0000e997          	auipc	s3,0xe
+    80001832:	85298993          	addi	s3,s3,-1966 # 8000f080 <tickslock>
+    80001836:	a029                	j	80001840 <reparent+0x34>
+    80001838:	17048493          	addi	s1,s1,368
+    8000183c:	01348d63          	beq	s1,s3,80001856 <reparent+0x4a>
+    if(pp->parent == p){
+    80001840:	7c9c                	ld	a5,56(s1)
+    80001842:	ff279be3          	bne	a5,s2,80001838 <reparent+0x2c>
+      pp->parent = initproc;
+    80001846:	000a3503          	ld	a0,0(s4)
+    8000184a:	fc88                	sd	a0,56(s1)
+      wakeup(initproc);
+    8000184c:	00000097          	auipc	ra,0x0
+    80001850:	f4a080e7          	jalr	-182(ra) # 80001796 <wakeup>
+    80001854:	b7d5                	j	80001838 <reparent+0x2c>
+}
+    80001856:	70a2                	ld	ra,40(sp)
+    80001858:	7402                	ld	s0,32(sp)
+    8000185a:	64e2                	ld	s1,24(sp)
+    8000185c:	6942                	ld	s2,16(sp)
+    8000185e:	69a2                	ld	s3,8(sp)
+    80001860:	6a02                	ld	s4,0(sp)
+    80001862:	6145                	addi	sp,sp,48
+    80001864:	8082                	ret
+
+0000000080001866 <exit>:
+{
+    80001866:	7179                	addi	sp,sp,-48
+    80001868:	f406                	sd	ra,40(sp)
+    8000186a:	f022                	sd	s0,32(sp)
+    8000186c:	ec26                	sd	s1,24(sp)
+    8000186e:	e84a                	sd	s2,16(sp)
+    80001870:	e44e                	sd	s3,8(sp)
+    80001872:	e052                	sd	s4,0(sp)
+    80001874:	1800                	addi	s0,sp,48
+    80001876:	8a2a                	mv	s4,a0
+  struct proc *p = myproc();
+    80001878:	fffff097          	auipc	ra,0xfffff
+    8000187c:	6c6080e7          	jalr	1734(ra) # 80000f3e <myproc>
+    80001880:	89aa                	mv	s3,a0
+  if(p == initproc)
+    80001882:	00007797          	auipc	a5,0x7
+    80001886:	78e7b783          	ld	a5,1934(a5) # 80009010 <initproc>
+    8000188a:	0d050493          	addi	s1,a0,208
+    8000188e:	15050913          	addi	s2,a0,336
+    80001892:	02a79363          	bne	a5,a0,800018b8 <exit+0x52>
+    panic("init exiting");
+    80001896:	00007517          	auipc	a0,0x7
+    8000189a:	97a50513          	addi	a0,a0,-1670 # 80008210 <etext+0x210>
+    8000189e:	00004097          	auipc	ra,0x4
+    800018a2:	452080e7          	jalr	1106(ra) # 80005cf0 <panic>
+      fileclose(f);
+    800018a6:	00002097          	auipc	ra,0x2
+    800018aa:	26c080e7          	jalr	620(ra) # 80003b12 <fileclose>
+      p->ofile[fd] = 0;
+    800018ae:	0004b023          	sd	zero,0(s1)
+  for(int fd = 0; fd < NOFILE; fd++){
+    800018b2:	04a1                	addi	s1,s1,8
+    800018b4:	01248563          	beq	s1,s2,800018be <exit+0x58>
+    if(p->ofile[fd]){
+    800018b8:	6088                	ld	a0,0(s1)
+    800018ba:	f575                	bnez	a0,800018a6 <exit+0x40>
+    800018bc:	bfdd                	j	800018b2 <exit+0x4c>
+  begin_op();
+    800018be:	00002097          	auipc	ra,0x2
+    800018c2:	d8c080e7          	jalr	-628(ra) # 8000364a <begin_op>
+  iput(p->cwd);
+    800018c6:	1509b503          	ld	a0,336(s3)
+    800018ca:	00001097          	auipc	ra,0x1
+    800018ce:	55e080e7          	jalr	1374(ra) # 80002e28 <iput>
+  end_op();
+    800018d2:	00002097          	auipc	ra,0x2
+    800018d6:	df6080e7          	jalr	-522(ra) # 800036c8 <end_op>
+  p->cwd = 0;
+    800018da:	1409b823          	sd	zero,336(s3)
+  acquire(&wait_lock);
+    800018de:	00007497          	auipc	s1,0x7
+    800018e2:	78a48493          	addi	s1,s1,1930 # 80009068 <wait_lock>
+    800018e6:	8526                	mv	a0,s1
+    800018e8:	00005097          	auipc	ra,0x5
+    800018ec:	940080e7          	jalr	-1728(ra) # 80006228 <acquire>
+  reparent(p);
+    800018f0:	854e                	mv	a0,s3
+    800018f2:	00000097          	auipc	ra,0x0
+    800018f6:	f1a080e7          	jalr	-230(ra) # 8000180c <reparent>
+  wakeup(p->parent);
+    800018fa:	0389b503          	ld	a0,56(s3)
+    800018fe:	00000097          	auipc	ra,0x0
+    80001902:	e98080e7          	jalr	-360(ra) # 80001796 <wakeup>
+  acquire(&p->lock);
+    80001906:	854e                	mv	a0,s3
+    80001908:	00005097          	auipc	ra,0x5
+    8000190c:	920080e7          	jalr	-1760(ra) # 80006228 <acquire>
+  p->xstate = status;
+    80001910:	0349a623          	sw	s4,44(s3)
+  p->state = ZOMBIE;
+    80001914:	4795                	li	a5,5
+    80001916:	00f9ac23          	sw	a5,24(s3)
+  release(&wait_lock);
+    8000191a:	8526                	mv	a0,s1
+    8000191c:	00005097          	auipc	ra,0x5
+    80001920:	9c0080e7          	jalr	-1600(ra) # 800062dc <release>
+  sched();
+    80001924:	00000097          	auipc	ra,0x0
+    80001928:	bd4080e7          	jalr	-1068(ra) # 800014f8 <sched>
+  panic("zombie exit");
+    8000192c:	00007517          	auipc	a0,0x7
+    80001930:	8f450513          	addi	a0,a0,-1804 # 80008220 <etext+0x220>
+    80001934:	00004097          	auipc	ra,0x4
+    80001938:	3bc080e7          	jalr	956(ra) # 80005cf0 <panic>
 
-00000000800023ca <kill>:
+000000008000193c <kill>:
 // Kill the process with the given pid.
 // The victim won't exit until it tries to return
 // to user space (see usertrap() in trap.c).
 int
 kill(int pid)
 {
-    800023ca:	7179                	addi	sp,sp,-48
-    800023cc:	f406                	sd	ra,40(sp)
-    800023ce:	f022                	sd	s0,32(sp)
-    800023d0:	ec26                	sd	s1,24(sp)
-    800023d2:	e84a                	sd	s2,16(sp)
-    800023d4:	e44e                	sd	s3,8(sp)
-    800023d6:	1800                	addi	s0,sp,48
-    800023d8:	892a                	mv	s2,a0
+    8000193c:	7179                	addi	sp,sp,-48
+    8000193e:	f406                	sd	ra,40(sp)
+    80001940:	f022                	sd	s0,32(sp)
+    80001942:	ec26                	sd	s1,24(sp)
+    80001944:	e84a                	sd	s2,16(sp)
+    80001946:	e44e                	sd	s3,8(sp)
+    80001948:	1800                	addi	s0,sp,48
+    8000194a:	892a                	mv	s2,a0
   struct proc *p;
 
   for(p = proc; p < &proc[NPROC]; p++){
-    800023da:	00010497          	auipc	s1,0x10
-    800023de:	98e48493          	addi	s1,s1,-1650 # 80011d68 <proc>
-    800023e2:	00015997          	auipc	s3,0x15
-    800023e6:	38698993          	addi	s3,s3,902 # 80017768 <tickslock>
+    8000194c:	00008497          	auipc	s1,0x8
+    80001950:	b3448493          	addi	s1,s1,-1228 # 80009480 <proc>
+    80001954:	0000d997          	auipc	s3,0xd
+    80001958:	72c98993          	addi	s3,s3,1836 # 8000f080 <tickslock>
     acquire(&p->lock);
-    800023ea:	8526                	mv	a0,s1
-    800023ec:	fffff097          	auipc	ra,0xfffff
-    800023f0:	814080e7          	jalr	-2028(ra) # 80000c00 <acquire>
+    8000195c:	8526                	mv	a0,s1
+    8000195e:	00005097          	auipc	ra,0x5
+    80001962:	8ca080e7          	jalr	-1846(ra) # 80006228 <acquire>
     if(p->pid == pid){
-    800023f4:	5c9c                	lw	a5,56(s1)
-    800023f6:	01278d63          	beq	a5,s2,80002410 <kill+0x46>
+    80001966:	589c                	lw	a5,48(s1)
+    80001968:	01278d63          	beq	a5,s2,80001982 <kill+0x46>
         p->state = RUNNABLE;
       }
       release(&p->lock);
       return 0;
     }
     release(&p->lock);
-    800023fa:	8526                	mv	a0,s1
-    800023fc:	fffff097          	auipc	ra,0xfffff
-    80002400:	8b8080e7          	jalr	-1864(ra) # 80000cb4 <release>
+    8000196c:	8526                	mv	a0,s1
+    8000196e:	00005097          	auipc	ra,0x5
+    80001972:	96e080e7          	jalr	-1682(ra) # 800062dc <release>
   for(p = proc; p < &proc[NPROC]; p++){
-    80002404:	16848493          	addi	s1,s1,360
-    80002408:	ff3491e3          	bne	s1,s3,800023ea <kill+0x20>
+    80001976:	17048493          	addi	s1,s1,368
+    8000197a:	ff3491e3          	bne	s1,s3,8000195c <kill+0x20>
   }
   return -1;
-    8000240c:	557d                	li	a0,-1
-    8000240e:	a821                	j	80002426 <kill+0x5c>
+    8000197e:	557d                	li	a0,-1
+    80001980:	a829                	j	8000199a <kill+0x5e>
       p->killed = 1;
-    80002410:	4785                	li	a5,1
-    80002412:	d89c                	sw	a5,48(s1)
+    80001982:	4785                	li	a5,1
+    80001984:	d49c                	sw	a5,40(s1)
       if(p->state == SLEEPING){
-    80002414:	4c98                	lw	a4,24(s1)
-    80002416:	00f70f63          	beq	a4,a5,80002434 <kill+0x6a>
+    80001986:	4c98                	lw	a4,24(s1)
+    80001988:	4789                	li	a5,2
+    8000198a:	00f70f63          	beq	a4,a5,800019a8 <kill+0x6c>
       release(&p->lock);
-    8000241a:	8526                	mv	a0,s1
-    8000241c:	fffff097          	auipc	ra,0xfffff
-    80002420:	898080e7          	jalr	-1896(ra) # 80000cb4 <release>
+    8000198e:	8526                	mv	a0,s1
+    80001990:	00005097          	auipc	ra,0x5
+    80001994:	94c080e7          	jalr	-1716(ra) # 800062dc <release>
       return 0;
-    80002424:	4501                	li	a0,0
+    80001998:	4501                	li	a0,0
 }
-    80002426:	70a2                	ld	ra,40(sp)
-    80002428:	7402                	ld	s0,32(sp)
-    8000242a:	64e2                	ld	s1,24(sp)
-    8000242c:	6942                	ld	s2,16(sp)
-    8000242e:	69a2                	ld	s3,8(sp)
-    80002430:	6145                	addi	sp,sp,48
-    80002432:	8082                	ret
+    8000199a:	70a2                	ld	ra,40(sp)
+    8000199c:	7402                	ld	s0,32(sp)
+    8000199e:	64e2                	ld	s1,24(sp)
+    800019a0:	6942                	ld	s2,16(sp)
+    800019a2:	69a2                	ld	s3,8(sp)
+    800019a4:	6145                	addi	sp,sp,48
+    800019a6:	8082                	ret
         p->state = RUNNABLE;
-    80002434:	4789                	li	a5,2
-    80002436:	cc9c                	sw	a5,24(s1)
-    80002438:	b7cd                	j	8000241a <kill+0x50>
+    800019a8:	478d                	li	a5,3
+    800019aa:	cc9c                	sw	a5,24(s1)
+    800019ac:	b7cd                	j	8000198e <kill+0x52>
 
-000000008000243a <either_copyout>:
+00000000800019ae <either_copyout>:
 // Copy to either a user address, or kernel address,
 // depending on usr_dst.
 // Returns 0 on success, -1 on error.
 int
 either_copyout(int user_dst, uint64 dst, void *src, uint64 len)
 {
-    8000243a:	7179                	addi	sp,sp,-48
-    8000243c:	f406                	sd	ra,40(sp)
-    8000243e:	f022                	sd	s0,32(sp)
-    80002440:	ec26                	sd	s1,24(sp)
-    80002442:	e84a                	sd	s2,16(sp)
-    80002444:	e44e                	sd	s3,8(sp)
-    80002446:	e052                	sd	s4,0(sp)
-    80002448:	1800                	addi	s0,sp,48
-    8000244a:	84aa                	mv	s1,a0
-    8000244c:	892e                	mv	s2,a1
-    8000244e:	89b2                	mv	s3,a2
-    80002450:	8a36                	mv	s4,a3
+    800019ae:	7179                	addi	sp,sp,-48
+    800019b0:	f406                	sd	ra,40(sp)
+    800019b2:	f022                	sd	s0,32(sp)
+    800019b4:	ec26                	sd	s1,24(sp)
+    800019b6:	e84a                	sd	s2,16(sp)
+    800019b8:	e44e                	sd	s3,8(sp)
+    800019ba:	e052                	sd	s4,0(sp)
+    800019bc:	1800                	addi	s0,sp,48
+    800019be:	84aa                	mv	s1,a0
+    800019c0:	892e                	mv	s2,a1
+    800019c2:	89b2                	mv	s3,a2
+    800019c4:	8a36                	mv	s4,a3
   struct proc *p = myproc();
-    80002452:	fffff097          	auipc	ra,0xfffff
-    80002456:	57a080e7          	jalr	1402(ra) # 800019cc <myproc>
+    800019c6:	fffff097          	auipc	ra,0xfffff
+    800019ca:	578080e7          	jalr	1400(ra) # 80000f3e <myproc>
   if(user_dst){
-    8000245a:	c08d                	beqz	s1,8000247c <either_copyout+0x42>
+    800019ce:	c08d                	beqz	s1,800019f0 <either_copyout+0x42>
     return copyout(p->pagetable, dst, src, len);
-    8000245c:	86d2                	mv	a3,s4
-    8000245e:	864e                	mv	a2,s3
-    80002460:	85ca                	mv	a1,s2
-    80002462:	6928                	ld	a0,80(a0)
-    80002464:	fffff097          	auipc	ra,0xfffff
-    80002468:	25e080e7          	jalr	606(ra) # 800016c2 <copyout>
+    800019d0:	86d2                	mv	a3,s4
+    800019d2:	864e                	mv	a2,s3
+    800019d4:	85ca                	mv	a1,s2
+    800019d6:	6928                	ld	a0,80(a0)
+    800019d8:	fffff097          	auipc	ra,0xfffff
+    800019dc:	22a080e7          	jalr	554(ra) # 80000c02 <copyout>
   } else {
     memmove((char *)dst, src, len);
     return 0;
   }
 }
-    8000246c:	70a2                	ld	ra,40(sp)
-    8000246e:	7402                	ld	s0,32(sp)
-    80002470:	64e2                	ld	s1,24(sp)
-    80002472:	6942                	ld	s2,16(sp)
-    80002474:	69a2                	ld	s3,8(sp)
-    80002476:	6a02                	ld	s4,0(sp)
-    80002478:	6145                	addi	sp,sp,48
-    8000247a:	8082                	ret
+    800019e0:	70a2                	ld	ra,40(sp)
+    800019e2:	7402                	ld	s0,32(sp)
+    800019e4:	64e2                	ld	s1,24(sp)
+    800019e6:	6942                	ld	s2,16(sp)
+    800019e8:	69a2                	ld	s3,8(sp)
+    800019ea:	6a02                	ld	s4,0(sp)
+    800019ec:	6145                	addi	sp,sp,48
+    800019ee:	8082                	ret
     memmove((char *)dst, src, len);
-    8000247c:	000a061b          	sext.w	a2,s4
-    80002480:	85ce                	mv	a1,s3
-    80002482:	854a                	mv	a0,s2
-    80002484:	fffff097          	auipc	ra,0xfffff
-    80002488:	8d4080e7          	jalr	-1836(ra) # 80000d58 <memmove>
+    800019f0:	000a061b          	sext.w	a2,s4
+    800019f4:	85ce                	mv	a1,s3
+    800019f6:	854a                	mv	a0,s2
+    800019f8:	fffff097          	auipc	ra,0xfffff
+    800019fc:	802080e7          	jalr	-2046(ra) # 800001fa <memmove>
     return 0;
-    8000248c:	8526                	mv	a0,s1
-    8000248e:	bff9                	j	8000246c <either_copyout+0x32>
+    80001a00:	8526                	mv	a0,s1
+    80001a02:	bff9                	j	800019e0 <either_copyout+0x32>
 
-0000000080002490 <either_copyin>:
+0000000080001a04 <either_copyin>:
 // Copy from either a user address, or kernel address,
 // depending on usr_src.
 // Returns 0 on success, -1 on error.
 int
 either_copyin(void *dst, int user_src, uint64 src, uint64 len)
 {
-    80002490:	7179                	addi	sp,sp,-48
-    80002492:	f406                	sd	ra,40(sp)
-    80002494:	f022                	sd	s0,32(sp)
-    80002496:	ec26                	sd	s1,24(sp)
-    80002498:	e84a                	sd	s2,16(sp)
-    8000249a:	e44e                	sd	s3,8(sp)
-    8000249c:	e052                	sd	s4,0(sp)
-    8000249e:	1800                	addi	s0,sp,48
-    800024a0:	892a                	mv	s2,a0
-    800024a2:	84ae                	mv	s1,a1
-    800024a4:	89b2                	mv	s3,a2
-    800024a6:	8a36                	mv	s4,a3
+    80001a04:	7179                	addi	sp,sp,-48
+    80001a06:	f406                	sd	ra,40(sp)
+    80001a08:	f022                	sd	s0,32(sp)
+    80001a0a:	ec26                	sd	s1,24(sp)
+    80001a0c:	e84a                	sd	s2,16(sp)
+    80001a0e:	e44e                	sd	s3,8(sp)
+    80001a10:	e052                	sd	s4,0(sp)
+    80001a12:	1800                	addi	s0,sp,48
+    80001a14:	892a                	mv	s2,a0
+    80001a16:	84ae                	mv	s1,a1
+    80001a18:	89b2                	mv	s3,a2
+    80001a1a:	8a36                	mv	s4,a3
   struct proc *p = myproc();
-    800024a8:	fffff097          	auipc	ra,0xfffff
-    800024ac:	524080e7          	jalr	1316(ra) # 800019cc <myproc>
+    80001a1c:	fffff097          	auipc	ra,0xfffff
+    80001a20:	522080e7          	jalr	1314(ra) # 80000f3e <myproc>
   if(user_src){
-    800024b0:	c08d                	beqz	s1,800024d2 <either_copyin+0x42>
+    80001a24:	c08d                	beqz	s1,80001a46 <either_copyin+0x42>
     return copyin(p->pagetable, dst, src, len);
-    800024b2:	86d2                	mv	a3,s4
-    800024b4:	864e                	mv	a2,s3
-    800024b6:	85ca                	mv	a1,s2
-    800024b8:	6928                	ld	a0,80(a0)
-    800024ba:	fffff097          	auipc	ra,0xfffff
-    800024be:	294080e7          	jalr	660(ra) # 8000174e <copyin>
+    80001a26:	86d2                	mv	a3,s4
+    80001a28:	864e                	mv	a2,s3
+    80001a2a:	85ca                	mv	a1,s2
+    80001a2c:	6928                	ld	a0,80(a0)
+    80001a2e:	fffff097          	auipc	ra,0xfffff
+    80001a32:	260080e7          	jalr	608(ra) # 80000c8e <copyin>
   } else {
     memmove(dst, (char*)src, len);
     return 0;
   }
 }
-    800024c2:	70a2                	ld	ra,40(sp)
-    800024c4:	7402                	ld	s0,32(sp)
-    800024c6:	64e2                	ld	s1,24(sp)
-    800024c8:	6942                	ld	s2,16(sp)
-    800024ca:	69a2                	ld	s3,8(sp)
-    800024cc:	6a02                	ld	s4,0(sp)
-    800024ce:	6145                	addi	sp,sp,48
-    800024d0:	8082                	ret
+    80001a36:	70a2                	ld	ra,40(sp)
+    80001a38:	7402                	ld	s0,32(sp)
+    80001a3a:	64e2                	ld	s1,24(sp)
+    80001a3c:	6942                	ld	s2,16(sp)
+    80001a3e:	69a2                	ld	s3,8(sp)
+    80001a40:	6a02                	ld	s4,0(sp)
+    80001a42:	6145                	addi	sp,sp,48
+    80001a44:	8082                	ret
     memmove(dst, (char*)src, len);
-    800024d2:	000a061b          	sext.w	a2,s4
-    800024d6:	85ce                	mv	a1,s3
-    800024d8:	854a                	mv	a0,s2
-    800024da:	fffff097          	auipc	ra,0xfffff
-    800024de:	87e080e7          	jalr	-1922(ra) # 80000d58 <memmove>
+    80001a46:	000a061b          	sext.w	a2,s4
+    80001a4a:	85ce                	mv	a1,s3
+    80001a4c:	854a                	mv	a0,s2
+    80001a4e:	ffffe097          	auipc	ra,0xffffe
+    80001a52:	7ac080e7          	jalr	1964(ra) # 800001fa <memmove>
     return 0;
-    800024e2:	8526                	mv	a0,s1
-    800024e4:	bff9                	j	800024c2 <either_copyin+0x32>
+    80001a56:	8526                	mv	a0,s1
+    80001a58:	bff9                	j	80001a36 <either_copyin+0x32>
 
-00000000800024e6 <procdump>:
+0000000080001a5a <procdump>:
 // Print a process listing to console.  For debugging.
 // Runs when user types ^P on console.
 // No lock to avoid wedging a stuck machine further.
 void
 procdump(void)
 {
-    800024e6:	715d                	addi	sp,sp,-80
-    800024e8:	e486                	sd	ra,72(sp)
-    800024ea:	e0a2                	sd	s0,64(sp)
-    800024ec:	fc26                	sd	s1,56(sp)
-    800024ee:	f84a                	sd	s2,48(sp)
-    800024f0:	f44e                	sd	s3,40(sp)
-    800024f2:	f052                	sd	s4,32(sp)
-    800024f4:	ec56                	sd	s5,24(sp)
-    800024f6:	e85a                	sd	s6,16(sp)
-    800024f8:	e45e                	sd	s7,8(sp)
-    800024fa:	0880                	addi	s0,sp,80
+    80001a5a:	715d                	addi	sp,sp,-80
+    80001a5c:	e486                	sd	ra,72(sp)
+    80001a5e:	e0a2                	sd	s0,64(sp)
+    80001a60:	fc26                	sd	s1,56(sp)
+    80001a62:	f84a                	sd	s2,48(sp)
+    80001a64:	f44e                	sd	s3,40(sp)
+    80001a66:	f052                	sd	s4,32(sp)
+    80001a68:	ec56                	sd	s5,24(sp)
+    80001a6a:	e85a                	sd	s6,16(sp)
+    80001a6c:	e45e                	sd	s7,8(sp)
+    80001a6e:	0880                	addi	s0,sp,80
   [ZOMBIE]    "zombie"
   };
   struct proc *p;
   char *state;
 
   printf("\n");
-    800024fc:	00006517          	auipc	a0,0x6
-    80002500:	bcc50513          	addi	a0,a0,-1076 # 800080c8 <digits+0x88>
-    80002504:	ffffe097          	auipc	ra,0xffffe
-    80002508:	08c080e7          	jalr	140(ra) # 80000590 <printf>
+    80001a70:	00006517          	auipc	a0,0x6
+    80001a74:	5d850513          	addi	a0,a0,1496 # 80008048 <etext+0x48>
+    80001a78:	00004097          	auipc	ra,0x4
+    80001a7c:	2c2080e7          	jalr	706(ra) # 80005d3a <printf>
   for(p = proc; p < &proc[NPROC]; p++){
-    8000250c:	00010497          	auipc	s1,0x10
-    80002510:	9b448493          	addi	s1,s1,-1612 # 80011ec0 <proc+0x158>
-    80002514:	00015917          	auipc	s2,0x15
-    80002518:	3ac90913          	addi	s2,s2,940 # 800178c0 <bcache+0x140>
+    80001a80:	00008497          	auipc	s1,0x8
+    80001a84:	b5848493          	addi	s1,s1,-1192 # 800095d8 <proc+0x158>
+    80001a88:	0000d917          	auipc	s2,0xd
+    80001a8c:	75090913          	addi	s2,s2,1872 # 8000f1d8 <bcache+0x140>
     if(p->state == UNUSED)
       continue;
     if(p->state >= 0 && p->state < NELEM(states) && states[p->state])
-    8000251c:	4b11                	li	s6,4
+    80001a90:	4b15                	li	s6,5
       state = states[p->state];
     else
       state = "???";
-    8000251e:	00006997          	auipc	s3,0x6
-    80002522:	d4a98993          	addi	s3,s3,-694 # 80008268 <digits+0x228>
+    80001a92:	00006997          	auipc	s3,0x6
+    80001a96:	79e98993          	addi	s3,s3,1950 # 80008230 <etext+0x230>
     printf("%d %s %s", p->pid, state, p->name);
-    80002526:	00006a97          	auipc	s5,0x6
-    8000252a:	d4aa8a93          	addi	s5,s5,-694 # 80008270 <digits+0x230>
+    80001a9a:	00006a97          	auipc	s5,0x6
+    80001a9e:	79ea8a93          	addi	s5,s5,1950 # 80008238 <etext+0x238>
     printf("\n");
-    8000252e:	00006a17          	auipc	s4,0x6
-    80002532:	b9aa0a13          	addi	s4,s4,-1126 # 800080c8 <digits+0x88>
+    80001aa2:	00006a17          	auipc	s4,0x6
+    80001aa6:	5a6a0a13          	addi	s4,s4,1446 # 80008048 <etext+0x48>
     if(p->state >= 0 && p->state < NELEM(states) && states[p->state])
-    80002536:	00006b97          	auipc	s7,0x6
-    8000253a:	d72b8b93          	addi	s7,s7,-654 # 800082a8 <states.0>
-    8000253e:	a00d                	j	80002560 <procdump+0x7a>
+    80001aaa:	00006b97          	auipc	s7,0x6
+    80001aae:	7c6b8b93          	addi	s7,s7,1990 # 80008270 <states.0>
+    80001ab2:	a00d                	j	80001ad4 <procdump+0x7a>
     printf("%d %s %s", p->pid, state, p->name);
-    80002540:	ee06a583          	lw	a1,-288(a3)
-    80002544:	8556                	mv	a0,s5
-    80002546:	ffffe097          	auipc	ra,0xffffe
-    8000254a:	04a080e7          	jalr	74(ra) # 80000590 <printf>
+    80001ab4:	ed86a583          	lw	a1,-296(a3)
+    80001ab8:	8556                	mv	a0,s5
+    80001aba:	00004097          	auipc	ra,0x4
+    80001abe:	280080e7          	jalr	640(ra) # 80005d3a <printf>
     printf("\n");
-    8000254e:	8552                	mv	a0,s4
-    80002550:	ffffe097          	auipc	ra,0xffffe
-    80002554:	040080e7          	jalr	64(ra) # 80000590 <printf>
+    80001ac2:	8552                	mv	a0,s4
+    80001ac4:	00004097          	auipc	ra,0x4
+    80001ac8:	276080e7          	jalr	630(ra) # 80005d3a <printf>
   for(p = proc; p < &proc[NPROC]; p++){
-    80002558:	16848493          	addi	s1,s1,360
-    8000255c:	03248263          	beq	s1,s2,80002580 <procdump+0x9a>
+    80001acc:	17048493          	addi	s1,s1,368
+    80001ad0:	03248263          	beq	s1,s2,80001af4 <procdump+0x9a>
     if(p->state == UNUSED)
-    80002560:	86a6                	mv	a3,s1
-    80002562:	ec04a783          	lw	a5,-320(s1)
-    80002566:	dbed                	beqz	a5,80002558 <procdump+0x72>
+    80001ad4:	86a6                	mv	a3,s1
+    80001ad6:	ec04a783          	lw	a5,-320(s1)
+    80001ada:	dbed                	beqz	a5,80001acc <procdump+0x72>
       state = "???";
-    80002568:	864e                	mv	a2,s3
+    80001adc:	864e                	mv	a2,s3
     if(p->state >= 0 && p->state < NELEM(states) && states[p->state])
-    8000256a:	fcfb6be3          	bltu	s6,a5,80002540 <procdump+0x5a>
-    8000256e:	02079713          	slli	a4,a5,0x20
-    80002572:	01d75793          	srli	a5,a4,0x1d
-    80002576:	97de                	add	a5,a5,s7
-    80002578:	6390                	ld	a2,0(a5)
-    8000257a:	f279                	bnez	a2,80002540 <procdump+0x5a>
+    80001ade:	fcfb6be3          	bltu	s6,a5,80001ab4 <procdump+0x5a>
+    80001ae2:	02079713          	slli	a4,a5,0x20
+    80001ae6:	01d75793          	srli	a5,a4,0x1d
+    80001aea:	97de                	add	a5,a5,s7
+    80001aec:	6390                	ld	a2,0(a5)
+    80001aee:	f279                	bnez	a2,80001ab4 <procdump+0x5a>
       state = "???";
-    8000257c:	864e                	mv	a2,s3
-    8000257e:	b7c9                	j	80002540 <procdump+0x5a>
+    80001af0:	864e                	mv	a2,s3
+    80001af2:	b7c9                	j	80001ab4 <procdump+0x5a>
+  }
+}
+    80001af4:	60a6                	ld	ra,72(sp)
+    80001af6:	6406                	ld	s0,64(sp)
+    80001af8:	74e2                	ld	s1,56(sp)
+    80001afa:	7942                	ld	s2,48(sp)
+    80001afc:	79a2                	ld	s3,40(sp)
+    80001afe:	7a02                	ld	s4,32(sp)
+    80001b00:	6ae2                	ld	s5,24(sp)
+    80001b02:	6b42                	ld	s6,16(sp)
+    80001b04:	6ba2                	ld	s7,8(sp)
+    80001b06:	6161                	addi	sp,sp,80
+    80001b08:	8082                	ret
+
+0000000080001b0a <collect_processes>:
+
+uint64 collect_processes() {
+    80001b0a:	1141                	addi	sp,sp,-16
+    80001b0c:	e422                	sd	s0,8(sp)
+    80001b0e:	0800                	addi	s0,sp,16
+  struct proc *p;
+  uint64 ret = 0;
+    80001b10:	4501                	li	a0,0
+  for(p = proc; p < &proc[NPROC]; p++){
+    80001b12:	00008797          	auipc	a5,0x8
+    80001b16:	96e78793          	addi	a5,a5,-1682 # 80009480 <proc>
+    80001b1a:	0000d697          	auipc	a3,0xd
+    80001b1e:	56668693          	addi	a3,a3,1382 # 8000f080 <tickslock>
+      if (p->state != UNUSED) {
+    80001b22:	4f98                	lw	a4,24(a5)
+          ret++;
+    80001b24:	00e03733          	snez	a4,a4
+    80001b28:	953a                	add	a0,a0,a4
+  for(p = proc; p < &proc[NPROC]; p++){
+    80001b2a:	17078793          	addi	a5,a5,368
+    80001b2e:	fed79ae3          	bne	a5,a3,80001b22 <collect_processes+0x18>
+      }
   }
+  return ret;
 }
-    80002580:	60a6                	ld	ra,72(sp)
-    80002582:	6406                	ld	s0,64(sp)
-    80002584:	74e2                	ld	s1,56(sp)
-    80002586:	7942                	ld	s2,48(sp)
-    80002588:	79a2                	ld	s3,40(sp)
-    8000258a:	7a02                	ld	s4,32(sp)
-    8000258c:	6ae2                	ld	s5,24(sp)
-    8000258e:	6b42                	ld	s6,16(sp)
-    80002590:	6ba2                	ld	s7,8(sp)
-    80002592:	6161                	addi	sp,sp,80
-    80002594:	8082                	ret
-
-0000000080002596 <swtch>:
-    80002596:	00153023          	sd	ra,0(a0)
-    8000259a:	00253423          	sd	sp,8(a0)
-    8000259e:	e900                	sd	s0,16(a0)
-    800025a0:	ed04                	sd	s1,24(a0)
-    800025a2:	03253023          	sd	s2,32(a0)
-    800025a6:	03353423          	sd	s3,40(a0)
-    800025aa:	03453823          	sd	s4,48(a0)
-    800025ae:	03553c23          	sd	s5,56(a0)
-    800025b2:	05653023          	sd	s6,64(a0)
-    800025b6:	05753423          	sd	s7,72(a0)
-    800025ba:	05853823          	sd	s8,80(a0)
-    800025be:	05953c23          	sd	s9,88(a0)
-    800025c2:	07a53023          	sd	s10,96(a0)
-    800025c6:	07b53423          	sd	s11,104(a0)
-    800025ca:	0005b083          	ld	ra,0(a1)
-    800025ce:	0085b103          	ld	sp,8(a1)
-    800025d2:	6980                	ld	s0,16(a1)
-    800025d4:	6d84                	ld	s1,24(a1)
-    800025d6:	0205b903          	ld	s2,32(a1)
-    800025da:	0285b983          	ld	s3,40(a1)
-    800025de:	0305ba03          	ld	s4,48(a1)
-    800025e2:	0385ba83          	ld	s5,56(a1)
-    800025e6:	0405bb03          	ld	s6,64(a1)
-    800025ea:	0485bb83          	ld	s7,72(a1)
-    800025ee:	0505bc03          	ld	s8,80(a1)
-    800025f2:	0585bc83          	ld	s9,88(a1)
-    800025f6:	0605bd03          	ld	s10,96(a1)
-    800025fa:	0685bd83          	ld	s11,104(a1)
-    800025fe:	8082                	ret
+    80001b32:	6422                	ld	s0,8(sp)
+    80001b34:	0141                	addi	sp,sp,16
+    80001b36:	8082                	ret
+
+0000000080001b38 <swtch>:
+    80001b38:	00153023          	sd	ra,0(a0)
+    80001b3c:	00253423          	sd	sp,8(a0)
+    80001b40:	e900                	sd	s0,16(a0)
+    80001b42:	ed04                	sd	s1,24(a0)
+    80001b44:	03253023          	sd	s2,32(a0)
+    80001b48:	03353423          	sd	s3,40(a0)
+    80001b4c:	03453823          	sd	s4,48(a0)
+    80001b50:	03553c23          	sd	s5,56(a0)
+    80001b54:	05653023          	sd	s6,64(a0)
+    80001b58:	05753423          	sd	s7,72(a0)
+    80001b5c:	05853823          	sd	s8,80(a0)
+    80001b60:	05953c23          	sd	s9,88(a0)
+    80001b64:	07a53023          	sd	s10,96(a0)
+    80001b68:	07b53423          	sd	s11,104(a0)
+    80001b6c:	0005b083          	ld	ra,0(a1)
+    80001b70:	0085b103          	ld	sp,8(a1)
+    80001b74:	6980                	ld	s0,16(a1)
+    80001b76:	6d84                	ld	s1,24(a1)
+    80001b78:	0205b903          	ld	s2,32(a1)
+    80001b7c:	0285b983          	ld	s3,40(a1)
+    80001b80:	0305ba03          	ld	s4,48(a1)
+    80001b84:	0385ba83          	ld	s5,56(a1)
+    80001b88:	0405bb03          	ld	s6,64(a1)
+    80001b8c:	0485bb83          	ld	s7,72(a1)
+    80001b90:	0505bc03          	ld	s8,80(a1)
+    80001b94:	0585bc83          	ld	s9,88(a1)
+    80001b98:	0605bd03          	ld	s10,96(a1)
+    80001b9c:	0685bd83          	ld	s11,104(a1)
+    80001ba0:	8082                	ret
 
-0000000080002600 <trapinit>:
+0000000080001ba2 <trapinit>:
 
 extern int devintr();
 
 void
 trapinit(void)
 {
-    80002600:	1141                	addi	sp,sp,-16
-    80002602:	e406                	sd	ra,8(sp)
-    80002604:	e022                	sd	s0,0(sp)
-    80002606:	0800                	addi	s0,sp,16
+    80001ba2:	1141                	addi	sp,sp,-16
+    80001ba4:	e406                	sd	ra,8(sp)
+    80001ba6:	e022                	sd	s0,0(sp)
+    80001ba8:	0800                	addi	s0,sp,16
   initlock(&tickslock, "time");
-    80002608:	00006597          	auipc	a1,0x6
-    8000260c:	cc858593          	addi	a1,a1,-824 # 800082d0 <states.0+0x28>
-    80002610:	00015517          	auipc	a0,0x15
-    80002614:	15850513          	addi	a0,a0,344 # 80017768 <tickslock>
-    80002618:	ffffe097          	auipc	ra,0xffffe
-    8000261c:	558080e7          	jalr	1368(ra) # 80000b70 <initlock>
-}
-    80002620:	60a2                	ld	ra,8(sp)
-    80002622:	6402                	ld	s0,0(sp)
-    80002624:	0141                	addi	sp,sp,16
-    80002626:	8082                	ret
+    80001baa:	00006597          	auipc	a1,0x6
+    80001bae:	6f658593          	addi	a1,a1,1782 # 800082a0 <states.0+0x30>
+    80001bb2:	0000d517          	auipc	a0,0xd
+    80001bb6:	4ce50513          	addi	a0,a0,1230 # 8000f080 <tickslock>
+    80001bba:	00004097          	auipc	ra,0x4
+    80001bbe:	5de080e7          	jalr	1502(ra) # 80006198 <initlock>
+}
+    80001bc2:	60a2                	ld	ra,8(sp)
+    80001bc4:	6402                	ld	s0,0(sp)
+    80001bc6:	0141                	addi	sp,sp,16
+    80001bc8:	8082                	ret
 
-0000000080002628 <trapinithart>:
+0000000080001bca <trapinithart>:
 
 // set up to take exceptions and traps while in the kernel.
 void
 trapinithart(void)
 {
-    80002628:	1141                	addi	sp,sp,-16
-    8000262a:	e422                	sd	s0,8(sp)
-    8000262c:	0800                	addi	s0,sp,16
+    80001bca:	1141                	addi	sp,sp,-16
+    80001bcc:	e422                	sd	s0,8(sp)
+    80001bce:	0800                	addi	s0,sp,16
   asm volatile("csrw stvec, %0" : : "r" (x));
-    8000262e:	00003797          	auipc	a5,0x3
-    80002632:	4c278793          	addi	a5,a5,1218 # 80005af0 <kernelvec>
-    80002636:	10579073          	csrw	stvec,a5
+    80001bd0:	00003797          	auipc	a5,0x3
+    80001bd4:	58078793          	addi	a5,a5,1408 # 80005150 <kernelvec>
+    80001bd8:	10579073          	csrw	stvec,a5
   w_stvec((uint64)kernelvec);
 }
-    8000263a:	6422                	ld	s0,8(sp)
-    8000263c:	0141                	addi	sp,sp,16
-    8000263e:	8082                	ret
+    80001bdc:	6422                	ld	s0,8(sp)
+    80001bde:	0141                	addi	sp,sp,16
+    80001be0:	8082                	ret
 
-0000000080002640 <usertrapret>:
+0000000080001be2 <usertrapret>:
 //
 // return to user space
 //
 void
 usertrapret(void)
 {
-    80002640:	1141                	addi	sp,sp,-16
-    80002642:	e406                	sd	ra,8(sp)
-    80002644:	e022                	sd	s0,0(sp)
-    80002646:	0800                	addi	s0,sp,16
+    80001be2:	1141                	addi	sp,sp,-16
+    80001be4:	e406                	sd	ra,8(sp)
+    80001be6:	e022                	sd	s0,0(sp)
+    80001be8:	0800                	addi	s0,sp,16
   struct proc *p = myproc();
-    80002648:	fffff097          	auipc	ra,0xfffff
-    8000264c:	384080e7          	jalr	900(ra) # 800019cc <myproc>
+    80001bea:	fffff097          	auipc	ra,0xfffff
+    80001bee:	354080e7          	jalr	852(ra) # 80000f3e <myproc>
   asm volatile("csrr %0, sstatus" : "=r" (x) );
-    80002650:	100027f3          	csrr	a5,sstatus
+    80001bf2:	100027f3          	csrr	a5,sstatus
   w_sstatus(r_sstatus() & ~SSTATUS_SIE);
-    80002654:	9bf5                	andi	a5,a5,-3
+    80001bf6:	9bf5                	andi	a5,a5,-3
   asm volatile("csrw sstatus, %0" : : "r" (x));
-    80002656:	10079073          	csrw	sstatus,a5
+    80001bf8:	10079073          	csrw	sstatus,a5
   // kerneltrap() to usertrap(), so turn off interrupts until
   // we're back in user space, where usertrap() is correct.
   intr_off();
 
   // send syscalls, interrupts, and exceptions to trampoline.S
   w_stvec(TRAMPOLINE + (uservec - trampoline));
-    8000265a:	00005697          	auipc	a3,0x5
-    8000265e:	9a668693          	addi	a3,a3,-1626 # 80007000 <_trampoline>
-    80002662:	00005717          	auipc	a4,0x5
-    80002666:	99e70713          	addi	a4,a4,-1634 # 80007000 <_trampoline>
-    8000266a:	8f15                	sub	a4,a4,a3
-    8000266c:	040007b7          	lui	a5,0x4000
-    80002670:	17fd                	addi	a5,a5,-1
-    80002672:	07b2                	slli	a5,a5,0xc
-    80002674:	973e                	add	a4,a4,a5
+    80001bfc:	00005697          	auipc	a3,0x5
+    80001c00:	40468693          	addi	a3,a3,1028 # 80007000 <_trampoline>
+    80001c04:	00005717          	auipc	a4,0x5
+    80001c08:	3fc70713          	addi	a4,a4,1020 # 80007000 <_trampoline>
+    80001c0c:	8f15                	sub	a4,a4,a3
+    80001c0e:	040007b7          	lui	a5,0x4000
+    80001c12:	17fd                	addi	a5,a5,-1
+    80001c14:	07b2                	slli	a5,a5,0xc
+    80001c16:	973e                	add	a4,a4,a5
   asm volatile("csrw stvec, %0" : : "r" (x));
-    80002676:	10571073          	csrw	stvec,a4
+    80001c18:	10571073          	csrw	stvec,a4
 
   // set up trapframe values that uservec will need when
   // the process next re-enters the kernel.
   p->trapframe->kernel_satp = r_satp();         // kernel page table
-    8000267a:	6d38                	ld	a4,88(a0)
+    80001c1c:	6d38                	ld	a4,88(a0)
   asm volatile("csrr %0, satp" : "=r" (x) );
-    8000267c:	18002673          	csrr	a2,satp
-    80002680:	e310                	sd	a2,0(a4)
+    80001c1e:	18002673          	csrr	a2,satp
+    80001c22:	e310                	sd	a2,0(a4)
   p->trapframe->kernel_sp = p->kstack + PGSIZE; // process's kernel stack
-    80002682:	6d30                	ld	a2,88(a0)
-    80002684:	6138                	ld	a4,64(a0)
-    80002686:	6585                	lui	a1,0x1
-    80002688:	972e                	add	a4,a4,a1
-    8000268a:	e618                	sd	a4,8(a2)
+    80001c24:	6d30                	ld	a2,88(a0)
+    80001c26:	6138                	ld	a4,64(a0)
+    80001c28:	6585                	lui	a1,0x1
+    80001c2a:	972e                	add	a4,a4,a1
+    80001c2c:	e618                	sd	a4,8(a2)
   p->trapframe->kernel_trap = (uint64)usertrap;
-    8000268c:	6d38                	ld	a4,88(a0)
-    8000268e:	00000617          	auipc	a2,0x0
-    80002692:	13860613          	addi	a2,a2,312 # 800027c6 <usertrap>
-    80002696:	eb10                	sd	a2,16(a4)
+    80001c2e:	6d38                	ld	a4,88(a0)
+    80001c30:	00000617          	auipc	a2,0x0
+    80001c34:	13860613          	addi	a2,a2,312 # 80001d68 <usertrap>
+    80001c38:	eb10                	sd	a2,16(a4)
   p->trapframe->kernel_hartid = r_tp();         // hartid for cpuid()
-    80002698:	6d38                	ld	a4,88(a0)
+    80001c3a:	6d38                	ld	a4,88(a0)
   asm volatile("mv %0, tp" : "=r" (x) );
-    8000269a:	8612                	mv	a2,tp
-    8000269c:	f310                	sd	a2,32(a4)
+    80001c3c:	8612                	mv	a2,tp
+    80001c3e:	f310                	sd	a2,32(a4)
   asm volatile("csrr %0, sstatus" : "=r" (x) );
-    8000269e:	10002773          	csrr	a4,sstatus
+    80001c40:	10002773          	csrr	a4,sstatus
   // set up the registers that trampoline.S's sret will use
   // to get to user space.
   
   // set S Previous Privilege mode to User.
   unsigned long x = r_sstatus();
   x &= ~SSTATUS_SPP; // clear SPP to 0 for user mode
-    800026a2:	eff77713          	andi	a4,a4,-257
+    80001c44:	eff77713          	andi	a4,a4,-257
   x |= SSTATUS_SPIE; // enable interrupts in user mode
-    800026a6:	02076713          	ori	a4,a4,32
+    80001c48:	02076713          	ori	a4,a4,32
   asm volatile("csrw sstatus, %0" : : "r" (x));
-    800026aa:	10071073          	csrw	sstatus,a4
+    80001c4c:	10071073          	csrw	sstatus,a4
   w_sstatus(x);
 
   // set S Exception Program Counter to the saved user pc.
   w_sepc(p->trapframe->epc);
-    800026ae:	6d38                	ld	a4,88(a0)
+    80001c50:	6d38                	ld	a4,88(a0)
   asm volatile("csrw sepc, %0" : : "r" (x));
-    800026b0:	6f18                	ld	a4,24(a4)
-    800026b2:	14171073          	csrw	sepc,a4
+    80001c52:	6f18                	ld	a4,24(a4)
+    80001c54:	14171073          	csrw	sepc,a4
 
   // tell trampoline.S the user page table to switch to.
   uint64 satp = MAKE_SATP(p->pagetable);
-    800026b6:	692c                	ld	a1,80(a0)
-    800026b8:	81b1                	srli	a1,a1,0xc
+    80001c58:	692c                	ld	a1,80(a0)
+    80001c5a:	81b1                	srli	a1,a1,0xc
 
   // jump to trampoline.S at the top of memory, which 
   // switches to the user page table, restores user registers,
   // and switches to user mode with sret.
   uint64 fn = TRAMPOLINE + (userret - trampoline);
-    800026ba:	00005717          	auipc	a4,0x5
-    800026be:	9d670713          	addi	a4,a4,-1578 # 80007090 <userret>
-    800026c2:	8f15                	sub	a4,a4,a3
-    800026c4:	97ba                	add	a5,a5,a4
+    80001c5c:	00005717          	auipc	a4,0x5
+    80001c60:	43470713          	addi	a4,a4,1076 # 80007090 <userret>
+    80001c64:	8f15                	sub	a4,a4,a3
+    80001c66:	97ba                	add	a5,a5,a4
   ((void (*)(uint64,uint64))fn)(TRAPFRAME, satp);
-    800026c6:	577d                	li	a4,-1
-    800026c8:	177e                	slli	a4,a4,0x3f
-    800026ca:	8dd9                	or	a1,a1,a4
-    800026cc:	02000537          	lui	a0,0x2000
-    800026d0:	157d                	addi	a0,a0,-1
-    800026d2:	0536                	slli	a0,a0,0xd
-    800026d4:	9782                	jalr	a5
-}
-    800026d6:	60a2                	ld	ra,8(sp)
-    800026d8:	6402                	ld	s0,0(sp)
-    800026da:	0141                	addi	sp,sp,16
-    800026dc:	8082                	ret
+    80001c68:	577d                	li	a4,-1
+    80001c6a:	177e                	slli	a4,a4,0x3f
+    80001c6c:	8dd9                	or	a1,a1,a4
+    80001c6e:	02000537          	lui	a0,0x2000
+    80001c72:	157d                	addi	a0,a0,-1
+    80001c74:	0536                	slli	a0,a0,0xd
+    80001c76:	9782                	jalr	a5
+}
+    80001c78:	60a2                	ld	ra,8(sp)
+    80001c7a:	6402                	ld	s0,0(sp)
+    80001c7c:	0141                	addi	sp,sp,16
+    80001c7e:	8082                	ret
 
-00000000800026de <clockintr>:
+0000000080001c80 <clockintr>:
   w_sstatus(sstatus);
 }
 
 void
 clockintr()
 {
-    800026de:	1101                	addi	sp,sp,-32
-    800026e0:	ec06                	sd	ra,24(sp)
-    800026e2:	e822                	sd	s0,16(sp)
-    800026e4:	e426                	sd	s1,8(sp)
-    800026e6:	1000                	addi	s0,sp,32
+    80001c80:	1101                	addi	sp,sp,-32
+    80001c82:	ec06                	sd	ra,24(sp)
+    80001c84:	e822                	sd	s0,16(sp)
+    80001c86:	e426                	sd	s1,8(sp)
+    80001c88:	1000                	addi	s0,sp,32
   acquire(&tickslock);
-    800026e8:	00015497          	auipc	s1,0x15
-    800026ec:	08048493          	addi	s1,s1,128 # 80017768 <tickslock>
-    800026f0:	8526                	mv	a0,s1
-    800026f2:	ffffe097          	auipc	ra,0xffffe
-    800026f6:	50e080e7          	jalr	1294(ra) # 80000c00 <acquire>
+    80001c8a:	0000d497          	auipc	s1,0xd
+    80001c8e:	3f648493          	addi	s1,s1,1014 # 8000f080 <tickslock>
+    80001c92:	8526                	mv	a0,s1
+    80001c94:	00004097          	auipc	ra,0x4
+    80001c98:	594080e7          	jalr	1428(ra) # 80006228 <acquire>
   ticks++;
-    800026fa:	00007517          	auipc	a0,0x7
-    800026fe:	92650513          	addi	a0,a0,-1754 # 80009020 <ticks>
-    80002702:	411c                	lw	a5,0(a0)
-    80002704:	2785                	addiw	a5,a5,1
-    80002706:	c11c                	sw	a5,0(a0)
+    80001c9c:	00007517          	auipc	a0,0x7
+    80001ca0:	37c50513          	addi	a0,a0,892 # 80009018 <ticks>
+    80001ca4:	411c                	lw	a5,0(a0)
+    80001ca6:	2785                	addiw	a5,a5,1
+    80001ca8:	c11c                	sw	a5,0(a0)
   wakeup(&ticks);
-    80002708:	00000097          	auipc	ra,0x0
-    8000270c:	c58080e7          	jalr	-936(ra) # 80002360 <wakeup>
+    80001caa:	00000097          	auipc	ra,0x0
+    80001cae:	aec080e7          	jalr	-1300(ra) # 80001796 <wakeup>
   release(&tickslock);
-    80002710:	8526                	mv	a0,s1
-    80002712:	ffffe097          	auipc	ra,0xffffe
-    80002716:	5a2080e7          	jalr	1442(ra) # 80000cb4 <release>
-}
-    8000271a:	60e2                	ld	ra,24(sp)
-    8000271c:	6442                	ld	s0,16(sp)
-    8000271e:	64a2                	ld	s1,8(sp)
-    80002720:	6105                	addi	sp,sp,32
-    80002722:	8082                	ret
+    80001cb2:	8526                	mv	a0,s1
+    80001cb4:	00004097          	auipc	ra,0x4
+    80001cb8:	628080e7          	jalr	1576(ra) # 800062dc <release>
+}
+    80001cbc:	60e2                	ld	ra,24(sp)
+    80001cbe:	6442                	ld	s0,16(sp)
+    80001cc0:	64a2                	ld	s1,8(sp)
+    80001cc2:	6105                	addi	sp,sp,32
+    80001cc4:	8082                	ret
 
-0000000080002724 <devintr>:
+0000000080001cc6 <devintr>:
 // returns 2 if timer interrupt,
 // 1 if other device,
 // 0 if not recognized.
 int
 devintr()
 {
-    80002724:	1101                	addi	sp,sp,-32
-    80002726:	ec06                	sd	ra,24(sp)
-    80002728:	e822                	sd	s0,16(sp)
-    8000272a:	e426                	sd	s1,8(sp)
-    8000272c:	1000                	addi	s0,sp,32
+    80001cc6:	1101                	addi	sp,sp,-32
+    80001cc8:	ec06                	sd	ra,24(sp)
+    80001cca:	e822                	sd	s0,16(sp)
+    80001ccc:	e426                	sd	s1,8(sp)
+    80001cce:	1000                	addi	s0,sp,32
   asm volatile("csrr %0, scause" : "=r" (x) );
-    8000272e:	14202773          	csrr	a4,scause
+    80001cd0:	14202773          	csrr	a4,scause
   uint64 scause = r_scause();
 
   if((scause & 0x8000000000000000L) &&
-    80002732:	00074d63          	bltz	a4,8000274c <devintr+0x28>
+    80001cd4:	00074d63          	bltz	a4,80001cee <devintr+0x28>
     // now allowed to interrupt again.
     if(irq)
       plic_complete(irq);
 
     return 1;
   } else if(scause == 0x8000000000000001L){
-    80002736:	57fd                	li	a5,-1
-    80002738:	17fe                	slli	a5,a5,0x3f
-    8000273a:	0785                	addi	a5,a5,1
+    80001cd8:	57fd                	li	a5,-1
+    80001cda:	17fe                	slli	a5,a5,0x3f
+    80001cdc:	0785                	addi	a5,a5,1
     // the SSIP bit in sip.
     w_sip(r_sip() & ~2);
 
     return 2;
   } else {
     return 0;
-    8000273c:	4501                	li	a0,0
+    80001cde:	4501                	li	a0,0
   } else if(scause == 0x8000000000000001L){
-    8000273e:	06f70363          	beq	a4,a5,800027a4 <devintr+0x80>
+    80001ce0:	06f70363          	beq	a4,a5,80001d46 <devintr+0x80>
   }
 }
-    80002742:	60e2                	ld	ra,24(sp)
-    80002744:	6442                	ld	s0,16(sp)
-    80002746:	64a2                	ld	s1,8(sp)
-    80002748:	6105                	addi	sp,sp,32
-    8000274a:	8082                	ret
+    80001ce4:	60e2                	ld	ra,24(sp)
+    80001ce6:	6442                	ld	s0,16(sp)
+    80001ce8:	64a2                	ld	s1,8(sp)
+    80001cea:	6105                	addi	sp,sp,32
+    80001cec:	8082                	ret
      (scause & 0xff) == 9){
-    8000274c:	0ff77793          	zext.b	a5,a4
+    80001cee:	0ff77793          	zext.b	a5,a4
   if((scause & 0x8000000000000000L) &&
-    80002750:	46a5                	li	a3,9
-    80002752:	fed792e3          	bne	a5,a3,80002736 <devintr+0x12>
+    80001cf2:	46a5                	li	a3,9
+    80001cf4:	fed792e3          	bne	a5,a3,80001cd8 <devintr+0x12>
     int irq = plic_claim();
-    80002756:	00003097          	auipc	ra,0x3
-    8000275a:	4a2080e7          	jalr	1186(ra) # 80005bf8 <plic_claim>
-    8000275e:	84aa                	mv	s1,a0
+    80001cf8:	00003097          	auipc	ra,0x3
+    80001cfc:	560080e7          	jalr	1376(ra) # 80005258 <plic_claim>
+    80001d00:	84aa                	mv	s1,a0
     if(irq == UART0_IRQ){
-    80002760:	47a9                	li	a5,10
-    80002762:	02f50763          	beq	a0,a5,80002790 <devintr+0x6c>
+    80001d02:	47a9                	li	a5,10
+    80001d04:	02f50763          	beq	a0,a5,80001d32 <devintr+0x6c>
     } else if(irq == VIRTIO0_IRQ){
-    80002766:	4785                	li	a5,1
-    80002768:	02f50963          	beq	a0,a5,8000279a <devintr+0x76>
+    80001d08:	4785                	li	a5,1
+    80001d0a:	02f50963          	beq	a0,a5,80001d3c <devintr+0x76>
     return 1;
-    8000276c:	4505                	li	a0,1
+    80001d0e:	4505                	li	a0,1
     } else if(irq){
-    8000276e:	d8f1                	beqz	s1,80002742 <devintr+0x1e>
+    80001d10:	d8f1                	beqz	s1,80001ce4 <devintr+0x1e>
       printf("unexpected interrupt irq=%d\n", irq);
-    80002770:	85a6                	mv	a1,s1
-    80002772:	00006517          	auipc	a0,0x6
-    80002776:	b6650513          	addi	a0,a0,-1178 # 800082d8 <states.0+0x30>
-    8000277a:	ffffe097          	auipc	ra,0xffffe
-    8000277e:	e16080e7          	jalr	-490(ra) # 80000590 <printf>
+    80001d12:	85a6                	mv	a1,s1
+    80001d14:	00006517          	auipc	a0,0x6
+    80001d18:	59450513          	addi	a0,a0,1428 # 800082a8 <states.0+0x38>
+    80001d1c:	00004097          	auipc	ra,0x4
+    80001d20:	01e080e7          	jalr	30(ra) # 80005d3a <printf>
       plic_complete(irq);
-    80002782:	8526                	mv	a0,s1
-    80002784:	00003097          	auipc	ra,0x3
-    80002788:	498080e7          	jalr	1176(ra) # 80005c1c <plic_complete>
+    80001d24:	8526                	mv	a0,s1
+    80001d26:	00003097          	auipc	ra,0x3
+    80001d2a:	556080e7          	jalr	1366(ra) # 8000527c <plic_complete>
     return 1;
-    8000278c:	4505                	li	a0,1
-    8000278e:	bf55                	j	80002742 <devintr+0x1e>
+    80001d2e:	4505                	li	a0,1
+    80001d30:	bf55                	j	80001ce4 <devintr+0x1e>
       uartintr();
-    80002790:	ffffe097          	auipc	ra,0xffffe
-    80002794:	232080e7          	jalr	562(ra) # 800009c2 <uartintr>
-    80002798:	b7ed                	j	80002782 <devintr+0x5e>
+    80001d32:	00004097          	auipc	ra,0x4
+    80001d36:	416080e7          	jalr	1046(ra) # 80006148 <uartintr>
+    80001d3a:	b7ed                	j	80001d24 <devintr+0x5e>
       virtio_disk_intr();
-    8000279a:	00004097          	auipc	ra,0x4
-    8000279e:	8f6080e7          	jalr	-1802(ra) # 80006090 <virtio_disk_intr>
-    800027a2:	b7c5                	j	80002782 <devintr+0x5e>
+    80001d3c:	00004097          	auipc	ra,0x4
+    80001d40:	9cc080e7          	jalr	-1588(ra) # 80005708 <virtio_disk_intr>
+    80001d44:	b7c5                	j	80001d24 <devintr+0x5e>
     if(cpuid() == 0){
-    800027a4:	fffff097          	auipc	ra,0xfffff
-    800027a8:	1fc080e7          	jalr	508(ra) # 800019a0 <cpuid>
-    800027ac:	c901                	beqz	a0,800027bc <devintr+0x98>
+    80001d46:	fffff097          	auipc	ra,0xfffff
+    80001d4a:	1cc080e7          	jalr	460(ra) # 80000f12 <cpuid>
+    80001d4e:	c901                	beqz	a0,80001d5e <devintr+0x98>
   asm volatile("csrr %0, sip" : "=r" (x) );
-    800027ae:	144027f3          	csrr	a5,sip
+    80001d50:	144027f3          	csrr	a5,sip
     w_sip(r_sip() & ~2);
-    800027b2:	9bf5                	andi	a5,a5,-3
+    80001d54:	9bf5                	andi	a5,a5,-3
   asm volatile("csrw sip, %0" : : "r" (x));
-    800027b4:	14479073          	csrw	sip,a5
+    80001d56:	14479073          	csrw	sip,a5
     return 2;
-    800027b8:	4509                	li	a0,2
-    800027ba:	b761                	j	80002742 <devintr+0x1e>
+    80001d5a:	4509                	li	a0,2
+    80001d5c:	b761                	j	80001ce4 <devintr+0x1e>
       clockintr();
-    800027bc:	00000097          	auipc	ra,0x0
-    800027c0:	f22080e7          	jalr	-222(ra) # 800026de <clockintr>
-    800027c4:	b7ed                	j	800027ae <devintr+0x8a>
-
-00000000800027c6 <usertrap>:
-{
-    800027c6:	1101                	addi	sp,sp,-32
-    800027c8:	ec06                	sd	ra,24(sp)
-    800027ca:	e822                	sd	s0,16(sp)
-    800027cc:	e426                	sd	s1,8(sp)
-    800027ce:	e04a                	sd	s2,0(sp)
-    800027d0:	1000                	addi	s0,sp,32
+    80001d5e:	00000097          	auipc	ra,0x0
+    80001d62:	f22080e7          	jalr	-222(ra) # 80001c80 <clockintr>
+    80001d66:	b7ed                	j	80001d50 <devintr+0x8a>
+
+0000000080001d68 <usertrap>:
+{
+    80001d68:	1101                	addi	sp,sp,-32
+    80001d6a:	ec06                	sd	ra,24(sp)
+    80001d6c:	e822                	sd	s0,16(sp)
+    80001d6e:	e426                	sd	s1,8(sp)
+    80001d70:	e04a                	sd	s2,0(sp)
+    80001d72:	1000                	addi	s0,sp,32
   asm volatile("csrr %0, sstatus" : "=r" (x) );
-    800027d2:	100027f3          	csrr	a5,sstatus
+    80001d74:	100027f3          	csrr	a5,sstatus
   if((r_sstatus() & SSTATUS_SPP) != 0)
-    800027d6:	1007f793          	andi	a5,a5,256
-    800027da:	e3ad                	bnez	a5,8000283c <usertrap+0x76>
+    80001d78:	1007f793          	andi	a5,a5,256
+    80001d7c:	e3ad                	bnez	a5,80001dde <usertrap+0x76>
   asm volatile("csrw stvec, %0" : : "r" (x));
-    800027dc:	00003797          	auipc	a5,0x3
-    800027e0:	31478793          	addi	a5,a5,788 # 80005af0 <kernelvec>
-    800027e4:	10579073          	csrw	stvec,a5
+    80001d7e:	00003797          	auipc	a5,0x3
+    80001d82:	3d278793          	addi	a5,a5,978 # 80005150 <kernelvec>
+    80001d86:	10579073          	csrw	stvec,a5
   struct proc *p = myproc();
-    800027e8:	fffff097          	auipc	ra,0xfffff
-    800027ec:	1e4080e7          	jalr	484(ra) # 800019cc <myproc>
-    800027f0:	84aa                	mv	s1,a0
+    80001d8a:	fffff097          	auipc	ra,0xfffff
+    80001d8e:	1b4080e7          	jalr	436(ra) # 80000f3e <myproc>
+    80001d92:	84aa                	mv	s1,a0
   p->trapframe->epc = r_sepc();
-    800027f2:	6d3c                	ld	a5,88(a0)
+    80001d94:	6d3c                	ld	a5,88(a0)
   asm volatile("csrr %0, sepc" : "=r" (x) );
-    800027f4:	14102773          	csrr	a4,sepc
-    800027f8:	ef98                	sd	a4,24(a5)
+    80001d96:	14102773          	csrr	a4,sepc
+    80001d9a:	ef98                	sd	a4,24(a5)
   asm volatile("csrr %0, scause" : "=r" (x) );
-    800027fa:	14202773          	csrr	a4,scause
+    80001d9c:	14202773          	csrr	a4,scause
   if(r_scause() == 8){
-    800027fe:	47a1                	li	a5,8
-    80002800:	04f71c63          	bne	a4,a5,80002858 <usertrap+0x92>
+    80001da0:	47a1                	li	a5,8
+    80001da2:	04f71c63          	bne	a4,a5,80001dfa <usertrap+0x92>
     if(p->killed)
-    80002804:	591c                	lw	a5,48(a0)
-    80002806:	e3b9                	bnez	a5,8000284c <usertrap+0x86>
+    80001da6:	551c                	lw	a5,40(a0)
+    80001da8:	e3b9                	bnez	a5,80001dee <usertrap+0x86>
     p->trapframe->epc += 4;
-    80002808:	6cb8                	ld	a4,88(s1)
-    8000280a:	6f1c                	ld	a5,24(a4)
-    8000280c:	0791                	addi	a5,a5,4
-    8000280e:	ef1c                	sd	a5,24(a4)
+    80001daa:	6cb8                	ld	a4,88(s1)
+    80001dac:	6f1c                	ld	a5,24(a4)
+    80001dae:	0791                	addi	a5,a5,4
+    80001db0:	ef1c                	sd	a5,24(a4)
   asm volatile("csrr %0, sstatus" : "=r" (x) );
-    80002810:	100027f3          	csrr	a5,sstatus
+    80001db2:	100027f3          	csrr	a5,sstatus
   w_sstatus(r_sstatus() | SSTATUS_SIE);
-    80002814:	0027e793          	ori	a5,a5,2
+    80001db6:	0027e793          	ori	a5,a5,2
   asm volatile("csrw sstatus, %0" : : "r" (x));
-    80002818:	10079073          	csrw	sstatus,a5
+    80001dba:	10079073          	csrw	sstatus,a5
     syscall();
-    8000281c:	00000097          	auipc	ra,0x0
-    80002820:	2e0080e7          	jalr	736(ra) # 80002afc <syscall>
+    80001dbe:	00000097          	auipc	ra,0x0
+    80001dc2:	2e0080e7          	jalr	736(ra) # 8000209e <syscall>
   if(p->killed)
-    80002824:	589c                	lw	a5,48(s1)
-    80002826:	ebc1                	bnez	a5,800028b6 <usertrap+0xf0>
+    80001dc6:	549c                	lw	a5,40(s1)
+    80001dc8:	ebc1                	bnez	a5,80001e58 <usertrap+0xf0>
   usertrapret();
-    80002828:	00000097          	auipc	ra,0x0
-    8000282c:	e18080e7          	jalr	-488(ra) # 80002640 <usertrapret>
+    80001dca:	00000097          	auipc	ra,0x0
+    80001dce:	e18080e7          	jalr	-488(ra) # 80001be2 <usertrapret>
 }
-    80002830:	60e2                	ld	ra,24(sp)
-    80002832:	6442                	ld	s0,16(sp)
-    80002834:	64a2                	ld	s1,8(sp)
-    80002836:	6902                	ld	s2,0(sp)
-    80002838:	6105                	addi	sp,sp,32
-    8000283a:	8082                	ret
+    80001dd2:	60e2                	ld	ra,24(sp)
+    80001dd4:	6442                	ld	s0,16(sp)
+    80001dd6:	64a2                	ld	s1,8(sp)
+    80001dd8:	6902                	ld	s2,0(sp)
+    80001dda:	6105                	addi	sp,sp,32
+    80001ddc:	8082                	ret
     panic("usertrap: not from user mode");
-    8000283c:	00006517          	auipc	a0,0x6
-    80002840:	abc50513          	addi	a0,a0,-1348 # 800082f8 <states.0+0x50>
-    80002844:	ffffe097          	auipc	ra,0xffffe
-    80002848:	d02080e7          	jalr	-766(ra) # 80000546 <panic>
+    80001dde:	00006517          	auipc	a0,0x6
+    80001de2:	4ea50513          	addi	a0,a0,1258 # 800082c8 <states.0+0x58>
+    80001de6:	00004097          	auipc	ra,0x4
+    80001dea:	f0a080e7          	jalr	-246(ra) # 80005cf0 <panic>
       exit(-1);
-    8000284c:	557d                	li	a0,-1
-    8000284e:	00000097          	auipc	ra,0x0
-    80002852:	84c080e7          	jalr	-1972(ra) # 8000209a <exit>
-    80002856:	bf4d                	j	80002808 <usertrap+0x42>
+    80001dee:	557d                	li	a0,-1
+    80001df0:	00000097          	auipc	ra,0x0
+    80001df4:	a76080e7          	jalr	-1418(ra) # 80001866 <exit>
+    80001df8:	bf4d                	j	80001daa <usertrap+0x42>
   } else if((which_dev = devintr()) != 0){
-    80002858:	00000097          	auipc	ra,0x0
-    8000285c:	ecc080e7          	jalr	-308(ra) # 80002724 <devintr>
-    80002860:	892a                	mv	s2,a0
-    80002862:	c501                	beqz	a0,8000286a <usertrap+0xa4>
+    80001dfa:	00000097          	auipc	ra,0x0
+    80001dfe:	ecc080e7          	jalr	-308(ra) # 80001cc6 <devintr>
+    80001e02:	892a                	mv	s2,a0
+    80001e04:	c501                	beqz	a0,80001e0c <usertrap+0xa4>
   if(p->killed)
-    80002864:	589c                	lw	a5,48(s1)
-    80002866:	c3a1                	beqz	a5,800028a6 <usertrap+0xe0>
-    80002868:	a815                	j	8000289c <usertrap+0xd6>
+    80001e06:	549c                	lw	a5,40(s1)
+    80001e08:	c3a1                	beqz	a5,80001e48 <usertrap+0xe0>
+    80001e0a:	a815                	j	80001e3e <usertrap+0xd6>
   asm volatile("csrr %0, scause" : "=r" (x) );
-    8000286a:	142025f3          	csrr	a1,scause
+    80001e0c:	142025f3          	csrr	a1,scause
     printf("usertrap(): unexpected scause %p pid=%d\n", r_scause(), p->pid);
-    8000286e:	5c90                	lw	a2,56(s1)
-    80002870:	00006517          	auipc	a0,0x6
-    80002874:	aa850513          	addi	a0,a0,-1368 # 80008318 <states.0+0x70>
-    80002878:	ffffe097          	auipc	ra,0xffffe
-    8000287c:	d18080e7          	jalr	-744(ra) # 80000590 <printf>
+    80001e10:	5890                	lw	a2,48(s1)
+    80001e12:	00006517          	auipc	a0,0x6
+    80001e16:	4d650513          	addi	a0,a0,1238 # 800082e8 <states.0+0x78>
+    80001e1a:	00004097          	auipc	ra,0x4
+    80001e1e:	f20080e7          	jalr	-224(ra) # 80005d3a <printf>
   asm volatile("csrr %0, sepc" : "=r" (x) );
-    80002880:	141025f3          	csrr	a1,sepc
+    80001e22:	141025f3          	csrr	a1,sepc
   asm volatile("csrr %0, stval" : "=r" (x) );
-    80002884:	14302673          	csrr	a2,stval
+    80001e26:	14302673          	csrr	a2,stval
     printf("            sepc=%p stval=%p\n", r_sepc(), r_stval());
-    80002888:	00006517          	auipc	a0,0x6
-    8000288c:	ac050513          	addi	a0,a0,-1344 # 80008348 <states.0+0xa0>
-    80002890:	ffffe097          	auipc	ra,0xffffe
-    80002894:	d00080e7          	jalr	-768(ra) # 80000590 <printf>
+    80001e2a:	00006517          	auipc	a0,0x6
+    80001e2e:	4ee50513          	addi	a0,a0,1262 # 80008318 <states.0+0xa8>
+    80001e32:	00004097          	auipc	ra,0x4
+    80001e36:	f08080e7          	jalr	-248(ra) # 80005d3a <printf>
     p->killed = 1;
-    80002898:	4785                	li	a5,1
-    8000289a:	d89c                	sw	a5,48(s1)
+    80001e3a:	4785                	li	a5,1
+    80001e3c:	d49c                	sw	a5,40(s1)
     exit(-1);
-    8000289c:	557d                	li	a0,-1
-    8000289e:	fffff097          	auipc	ra,0xfffff
-    800028a2:	7fc080e7          	jalr	2044(ra) # 8000209a <exit>
+    80001e3e:	557d                	li	a0,-1
+    80001e40:	00000097          	auipc	ra,0x0
+    80001e44:	a26080e7          	jalr	-1498(ra) # 80001866 <exit>
   if(which_dev == 2)
-    800028a6:	4789                	li	a5,2
-    800028a8:	f8f910e3          	bne	s2,a5,80002828 <usertrap+0x62>
+    80001e48:	4789                	li	a5,2
+    80001e4a:	f8f910e3          	bne	s2,a5,80001dca <usertrap+0x62>
     yield();
-    800028ac:	00000097          	auipc	ra,0x0
-    800028b0:	8f8080e7          	jalr	-1800(ra) # 800021a4 <yield>
-    800028b4:	bf95                	j	80002828 <usertrap+0x62>
+    80001e4e:	fffff097          	auipc	ra,0xfffff
+    80001e52:	780080e7          	jalr	1920(ra) # 800015ce <yield>
+    80001e56:	bf95                	j	80001dca <usertrap+0x62>
   int which_dev = 0;
-    800028b6:	4901                	li	s2,0
-    800028b8:	b7d5                	j	8000289c <usertrap+0xd6>
+    80001e58:	4901                	li	s2,0
+    80001e5a:	b7d5                	j	80001e3e <usertrap+0xd6>
 
-00000000800028ba <kerneltrap>:
+0000000080001e5c <kerneltrap>:
 {
-    800028ba:	7179                	addi	sp,sp,-48
-    800028bc:	f406                	sd	ra,40(sp)
-    800028be:	f022                	sd	s0,32(sp)
-    800028c0:	ec26                	sd	s1,24(sp)
-    800028c2:	e84a                	sd	s2,16(sp)
-    800028c4:	e44e                	sd	s3,8(sp)
-    800028c6:	1800                	addi	s0,sp,48
+    80001e5c:	7179                	addi	sp,sp,-48
+    80001e5e:	f406                	sd	ra,40(sp)
+    80001e60:	f022                	sd	s0,32(sp)
+    80001e62:	ec26                	sd	s1,24(sp)
+    80001e64:	e84a                	sd	s2,16(sp)
+    80001e66:	e44e                	sd	s3,8(sp)
+    80001e68:	1800                	addi	s0,sp,48
   asm volatile("csrr %0, sepc" : "=r" (x) );
-    800028c8:	14102973          	csrr	s2,sepc
+    80001e6a:	14102973          	csrr	s2,sepc
   asm volatile("csrr %0, sstatus" : "=r" (x) );
-    800028cc:	100024f3          	csrr	s1,sstatus
+    80001e6e:	100024f3          	csrr	s1,sstatus
   asm volatile("csrr %0, scause" : "=r" (x) );
-    800028d0:	142029f3          	csrr	s3,scause
+    80001e72:	142029f3          	csrr	s3,scause
   if((sstatus & SSTATUS_SPP) == 0)
-    800028d4:	1004f793          	andi	a5,s1,256
-    800028d8:	cb85                	beqz	a5,80002908 <kerneltrap+0x4e>
+    80001e76:	1004f793          	andi	a5,s1,256
+    80001e7a:	cb85                	beqz	a5,80001eaa <kerneltrap+0x4e>
   asm volatile("csrr %0, sstatus" : "=r" (x) );
-    800028da:	100027f3          	csrr	a5,sstatus
+    80001e7c:	100027f3          	csrr	a5,sstatus
   return (x & SSTATUS_SIE) != 0;
-    800028de:	8b89                	andi	a5,a5,2
+    80001e80:	8b89                	andi	a5,a5,2
   if(intr_get() != 0)
-    800028e0:	ef85                	bnez	a5,80002918 <kerneltrap+0x5e>
+    80001e82:	ef85                	bnez	a5,80001eba <kerneltrap+0x5e>
   if((which_dev = devintr()) == 0){
-    800028e2:	00000097          	auipc	ra,0x0
-    800028e6:	e42080e7          	jalr	-446(ra) # 80002724 <devintr>
-    800028ea:	cd1d                	beqz	a0,80002928 <kerneltrap+0x6e>
+    80001e84:	00000097          	auipc	ra,0x0
+    80001e88:	e42080e7          	jalr	-446(ra) # 80001cc6 <devintr>
+    80001e8c:	cd1d                	beqz	a0,80001eca <kerneltrap+0x6e>
   if(which_dev == 2 && myproc() != 0 && myproc()->state == RUNNING)
-    800028ec:	4789                	li	a5,2
-    800028ee:	06f50a63          	beq	a0,a5,80002962 <kerneltrap+0xa8>
+    80001e8e:	4789                	li	a5,2
+    80001e90:	06f50a63          	beq	a0,a5,80001f04 <kerneltrap+0xa8>
   asm volatile("csrw sepc, %0" : : "r" (x));
-    800028f2:	14191073          	csrw	sepc,s2
+    80001e94:	14191073          	csrw	sepc,s2
   asm volatile("csrw sstatus, %0" : : "r" (x));
-    800028f6:	10049073          	csrw	sstatus,s1
+    80001e98:	10049073          	csrw	sstatus,s1
 }
-    800028fa:	70a2                	ld	ra,40(sp)
-    800028fc:	7402                	ld	s0,32(sp)
-    800028fe:	64e2                	ld	s1,24(sp)
-    80002900:	6942                	ld	s2,16(sp)
-    80002902:	69a2                	ld	s3,8(sp)
-    80002904:	6145                	addi	sp,sp,48
-    80002906:	8082                	ret
+    80001e9c:	70a2                	ld	ra,40(sp)
+    80001e9e:	7402                	ld	s0,32(sp)
+    80001ea0:	64e2                	ld	s1,24(sp)
+    80001ea2:	6942                	ld	s2,16(sp)
+    80001ea4:	69a2                	ld	s3,8(sp)
+    80001ea6:	6145                	addi	sp,sp,48
+    80001ea8:	8082                	ret
     panic("kerneltrap: not from supervisor mode");
-    80002908:	00006517          	auipc	a0,0x6
-    8000290c:	a6050513          	addi	a0,a0,-1440 # 80008368 <states.0+0xc0>
-    80002910:	ffffe097          	auipc	ra,0xffffe
-    80002914:	c36080e7          	jalr	-970(ra) # 80000546 <panic>
+    80001eaa:	00006517          	auipc	a0,0x6
+    80001eae:	48e50513          	addi	a0,a0,1166 # 80008338 <states.0+0xc8>
+    80001eb2:	00004097          	auipc	ra,0x4
+    80001eb6:	e3e080e7          	jalr	-450(ra) # 80005cf0 <panic>
     panic("kerneltrap: interrupts enabled");
-    80002918:	00006517          	auipc	a0,0x6
-    8000291c:	a7850513          	addi	a0,a0,-1416 # 80008390 <states.0+0xe8>
-    80002920:	ffffe097          	auipc	ra,0xffffe
-    80002924:	c26080e7          	jalr	-986(ra) # 80000546 <panic>
+    80001eba:	00006517          	auipc	a0,0x6
+    80001ebe:	4a650513          	addi	a0,a0,1190 # 80008360 <states.0+0xf0>
+    80001ec2:	00004097          	auipc	ra,0x4
+    80001ec6:	e2e080e7          	jalr	-466(ra) # 80005cf0 <panic>
     printf("scause %p\n", scause);
-    80002928:	85ce                	mv	a1,s3
-    8000292a:	00006517          	auipc	a0,0x6
-    8000292e:	a8650513          	addi	a0,a0,-1402 # 800083b0 <states.0+0x108>
-    80002932:	ffffe097          	auipc	ra,0xffffe
-    80002936:	c5e080e7          	jalr	-930(ra) # 80000590 <printf>
+    80001eca:	85ce                	mv	a1,s3
+    80001ecc:	00006517          	auipc	a0,0x6
+    80001ed0:	4b450513          	addi	a0,a0,1204 # 80008380 <states.0+0x110>
+    80001ed4:	00004097          	auipc	ra,0x4
+    80001ed8:	e66080e7          	jalr	-410(ra) # 80005d3a <printf>
   asm volatile("csrr %0, sepc" : "=r" (x) );
-    8000293a:	141025f3          	csrr	a1,sepc
+    80001edc:	141025f3          	csrr	a1,sepc
   asm volatile("csrr %0, stval" : "=r" (x) );
-    8000293e:	14302673          	csrr	a2,stval
+    80001ee0:	14302673          	csrr	a2,stval
     printf("sepc=%p stval=%p\n", r_sepc(), r_stval());
-    80002942:	00006517          	auipc	a0,0x6
-    80002946:	a7e50513          	addi	a0,a0,-1410 # 800083c0 <states.0+0x118>
-    8000294a:	ffffe097          	auipc	ra,0xffffe
-    8000294e:	c46080e7          	jalr	-954(ra) # 80000590 <printf>
+    80001ee4:	00006517          	auipc	a0,0x6
+    80001ee8:	4ac50513          	addi	a0,a0,1196 # 80008390 <states.0+0x120>
+    80001eec:	00004097          	auipc	ra,0x4
+    80001ef0:	e4e080e7          	jalr	-434(ra) # 80005d3a <printf>
     panic("kerneltrap");
-    80002952:	00006517          	auipc	a0,0x6
-    80002956:	a8650513          	addi	a0,a0,-1402 # 800083d8 <states.0+0x130>
-    8000295a:	ffffe097          	auipc	ra,0xffffe
-    8000295e:	bec080e7          	jalr	-1044(ra) # 80000546 <panic>
+    80001ef4:	00006517          	auipc	a0,0x6
+    80001ef8:	4b450513          	addi	a0,a0,1204 # 800083a8 <states.0+0x138>
+    80001efc:	00004097          	auipc	ra,0x4
+    80001f00:	df4080e7          	jalr	-524(ra) # 80005cf0 <panic>
   if(which_dev == 2 && myproc() != 0 && myproc()->state == RUNNING)
-    80002962:	fffff097          	auipc	ra,0xfffff
-    80002966:	06a080e7          	jalr	106(ra) # 800019cc <myproc>
-    8000296a:	d541                	beqz	a0,800028f2 <kerneltrap+0x38>
-    8000296c:	fffff097          	auipc	ra,0xfffff
-    80002970:	060080e7          	jalr	96(ra) # 800019cc <myproc>
-    80002974:	4d18                	lw	a4,24(a0)
-    80002976:	478d                	li	a5,3
-    80002978:	f6f71de3          	bne	a4,a5,800028f2 <kerneltrap+0x38>
+    80001f04:	fffff097          	auipc	ra,0xfffff
+    80001f08:	03a080e7          	jalr	58(ra) # 80000f3e <myproc>
+    80001f0c:	d541                	beqz	a0,80001e94 <kerneltrap+0x38>
+    80001f0e:	fffff097          	auipc	ra,0xfffff
+    80001f12:	030080e7          	jalr	48(ra) # 80000f3e <myproc>
+    80001f16:	4d18                	lw	a4,24(a0)
+    80001f18:	4791                	li	a5,4
+    80001f1a:	f6f71de3          	bne	a4,a5,80001e94 <kerneltrap+0x38>
     yield();
-    8000297c:	00000097          	auipc	ra,0x0
-    80002980:	828080e7          	jalr	-2008(ra) # 800021a4 <yield>
-    80002984:	b7bd                	j	800028f2 <kerneltrap+0x38>
+    80001f1e:	fffff097          	auipc	ra,0xfffff
+    80001f22:	6b0080e7          	jalr	1712(ra) # 800015ce <yield>
+    80001f26:	b7bd                	j	80001e94 <kerneltrap+0x38>
 
-0000000080002986 <argraw>:
+0000000080001f28 <argraw>:
   return strlen(buf);
 }
 
 static uint64
 argraw(int n)
 {
-    80002986:	1101                	addi	sp,sp,-32
-    80002988:	ec06                	sd	ra,24(sp)
-    8000298a:	e822                	sd	s0,16(sp)
-    8000298c:	e426                	sd	s1,8(sp)
-    8000298e:	1000                	addi	s0,sp,32
-    80002990:	84aa                	mv	s1,a0
+    80001f28:	1101                	addi	sp,sp,-32
+    80001f2a:	ec06                	sd	ra,24(sp)
+    80001f2c:	e822                	sd	s0,16(sp)
+    80001f2e:	e426                	sd	s1,8(sp)
+    80001f30:	1000                	addi	s0,sp,32
+    80001f32:	84aa                	mv	s1,a0
   struct proc *p = myproc();
-    80002992:	fffff097          	auipc	ra,0xfffff
-    80002996:	03a080e7          	jalr	58(ra) # 800019cc <myproc>
+    80001f34:	fffff097          	auipc	ra,0xfffff
+    80001f38:	00a080e7          	jalr	10(ra) # 80000f3e <myproc>
   switch (n) {
-    8000299a:	4795                	li	a5,5
-    8000299c:	0497e163          	bltu	a5,s1,800029de <argraw+0x58>
-    800029a0:	048a                	slli	s1,s1,0x2
-    800029a2:	00006717          	auipc	a4,0x6
-    800029a6:	a6e70713          	addi	a4,a4,-1426 # 80008410 <states.0+0x168>
-    800029aa:	94ba                	add	s1,s1,a4
-    800029ac:	409c                	lw	a5,0(s1)
-    800029ae:	97ba                	add	a5,a5,a4
-    800029b0:	8782                	jr	a5
+    80001f3c:	4795                	li	a5,5
+    80001f3e:	0497e163          	bltu	a5,s1,80001f80 <argraw+0x58>
+    80001f42:	048a                	slli	s1,s1,0x2
+    80001f44:	00006717          	auipc	a4,0x6
+    80001f48:	56470713          	addi	a4,a4,1380 # 800084a8 <states.0+0x238>
+    80001f4c:	94ba                	add	s1,s1,a4
+    80001f4e:	409c                	lw	a5,0(s1)
+    80001f50:	97ba                	add	a5,a5,a4
+    80001f52:	8782                	jr	a5
   case 0:
     return p->trapframe->a0;
-    800029b2:	6d3c                	ld	a5,88(a0)
-    800029b4:	7ba8                	ld	a0,112(a5)
+    80001f54:	6d3c                	ld	a5,88(a0)
+    80001f56:	7ba8                	ld	a0,112(a5)
   case 5:
     return p->trapframe->a5;
   }
   panic("argraw");
   return -1;
 }
-    800029b6:	60e2                	ld	ra,24(sp)
-    800029b8:	6442                	ld	s0,16(sp)
-    800029ba:	64a2                	ld	s1,8(sp)
-    800029bc:	6105                	addi	sp,sp,32
-    800029be:	8082                	ret
+    80001f58:	60e2                	ld	ra,24(sp)
+    80001f5a:	6442                	ld	s0,16(sp)
+    80001f5c:	64a2                	ld	s1,8(sp)
+    80001f5e:	6105                	addi	sp,sp,32
+    80001f60:	8082                	ret
     return p->trapframe->a1;
-    800029c0:	6d3c                	ld	a5,88(a0)
-    800029c2:	7fa8                	ld	a0,120(a5)
-    800029c4:	bfcd                	j	800029b6 <argraw+0x30>
+    80001f62:	6d3c                	ld	a5,88(a0)
+    80001f64:	7fa8                	ld	a0,120(a5)
+    80001f66:	bfcd                	j	80001f58 <argraw+0x30>
     return p->trapframe->a2;
-    800029c6:	6d3c                	ld	a5,88(a0)
-    800029c8:	63c8                	ld	a0,128(a5)
-    800029ca:	b7f5                	j	800029b6 <argraw+0x30>
+    80001f68:	6d3c                	ld	a5,88(a0)
+    80001f6a:	63c8                	ld	a0,128(a5)
+    80001f6c:	b7f5                	j	80001f58 <argraw+0x30>
     return p->trapframe->a3;
-    800029cc:	6d3c                	ld	a5,88(a0)
-    800029ce:	67c8                	ld	a0,136(a5)
-    800029d0:	b7dd                	j	800029b6 <argraw+0x30>
+    80001f6e:	6d3c                	ld	a5,88(a0)
+    80001f70:	67c8                	ld	a0,136(a5)
+    80001f72:	b7dd                	j	80001f58 <argraw+0x30>
     return p->trapframe->a4;
-    800029d2:	6d3c                	ld	a5,88(a0)
-    800029d4:	6bc8                	ld	a0,144(a5)
-    800029d6:	b7c5                	j	800029b6 <argraw+0x30>
+    80001f74:	6d3c                	ld	a5,88(a0)
+    80001f76:	6bc8                	ld	a0,144(a5)
+    80001f78:	b7c5                	j	80001f58 <argraw+0x30>
     return p->trapframe->a5;
-    800029d8:	6d3c                	ld	a5,88(a0)
-    800029da:	6fc8                	ld	a0,152(a5)
-    800029dc:	bfe9                	j	800029b6 <argraw+0x30>
+    80001f7a:	6d3c                	ld	a5,88(a0)
+    80001f7c:	6fc8                	ld	a0,152(a5)
+    80001f7e:	bfe9                	j	80001f58 <argraw+0x30>
   panic("argraw");
-    800029de:	00006517          	auipc	a0,0x6
-    800029e2:	a0a50513          	addi	a0,a0,-1526 # 800083e8 <states.0+0x140>
-    800029e6:	ffffe097          	auipc	ra,0xffffe
-    800029ea:	b60080e7          	jalr	-1184(ra) # 80000546 <panic>
-
-00000000800029ee <fetchaddr>:
-{
-    800029ee:	1101                	addi	sp,sp,-32
-    800029f0:	ec06                	sd	ra,24(sp)
-    800029f2:	e822                	sd	s0,16(sp)
-    800029f4:	e426                	sd	s1,8(sp)
-    800029f6:	e04a                	sd	s2,0(sp)
-    800029f8:	1000                	addi	s0,sp,32
-    800029fa:	84aa                	mv	s1,a0
-    800029fc:	892e                	mv	s2,a1
+    80001f80:	00006517          	auipc	a0,0x6
+    80001f84:	43850513          	addi	a0,a0,1080 # 800083b8 <states.0+0x148>
+    80001f88:	00004097          	auipc	ra,0x4
+    80001f8c:	d68080e7          	jalr	-664(ra) # 80005cf0 <panic>
+
+0000000080001f90 <fetchaddr>:
+{
+    80001f90:	1101                	addi	sp,sp,-32
+    80001f92:	ec06                	sd	ra,24(sp)
+    80001f94:	e822                	sd	s0,16(sp)
+    80001f96:	e426                	sd	s1,8(sp)
+    80001f98:	e04a                	sd	s2,0(sp)
+    80001f9a:	1000                	addi	s0,sp,32
+    80001f9c:	84aa                	mv	s1,a0
+    80001f9e:	892e                	mv	s2,a1
   struct proc *p = myproc();
-    800029fe:	fffff097          	auipc	ra,0xfffff
-    80002a02:	fce080e7          	jalr	-50(ra) # 800019cc <myproc>
+    80001fa0:	fffff097          	auipc	ra,0xfffff
+    80001fa4:	f9e080e7          	jalr	-98(ra) # 80000f3e <myproc>
   if(addr >= p->sz || addr+sizeof(uint64) > p->sz)
-    80002a06:	653c                	ld	a5,72(a0)
-    80002a08:	02f4f863          	bgeu	s1,a5,80002a38 <fetchaddr+0x4a>
-    80002a0c:	00848713          	addi	a4,s1,8
-    80002a10:	02e7e663          	bltu	a5,a4,80002a3c <fetchaddr+0x4e>
+    80001fa8:	653c                	ld	a5,72(a0)
+    80001faa:	02f4f863          	bgeu	s1,a5,80001fda <fetchaddr+0x4a>
+    80001fae:	00848713          	addi	a4,s1,8
+    80001fb2:	02e7e663          	bltu	a5,a4,80001fde <fetchaddr+0x4e>
   if(copyin(p->pagetable, (char *)ip, addr, sizeof(*ip)) != 0)
-    80002a14:	46a1                	li	a3,8
-    80002a16:	8626                	mv	a2,s1
-    80002a18:	85ca                	mv	a1,s2
-    80002a1a:	6928                	ld	a0,80(a0)
-    80002a1c:	fffff097          	auipc	ra,0xfffff
-    80002a20:	d32080e7          	jalr	-718(ra) # 8000174e <copyin>
-    80002a24:	00a03533          	snez	a0,a0
-    80002a28:	40a00533          	neg	a0,a0
-}
-    80002a2c:	60e2                	ld	ra,24(sp)
-    80002a2e:	6442                	ld	s0,16(sp)
-    80002a30:	64a2                	ld	s1,8(sp)
-    80002a32:	6902                	ld	s2,0(sp)
-    80002a34:	6105                	addi	sp,sp,32
-    80002a36:	8082                	ret
-    return -1;
-    80002a38:	557d                	li	a0,-1
-    80002a3a:	bfcd                	j	80002a2c <fetchaddr+0x3e>
-    80002a3c:	557d                	li	a0,-1
-    80002a3e:	b7fd                	j	80002a2c <fetchaddr+0x3e>
-
-0000000080002a40 <fetchstr>:
-{
-    80002a40:	7179                	addi	sp,sp,-48
-    80002a42:	f406                	sd	ra,40(sp)
-    80002a44:	f022                	sd	s0,32(sp)
-    80002a46:	ec26                	sd	s1,24(sp)
-    80002a48:	e84a                	sd	s2,16(sp)
-    80002a4a:	e44e                	sd	s3,8(sp)
-    80002a4c:	1800                	addi	s0,sp,48
-    80002a4e:	892a                	mv	s2,a0
-    80002a50:	84ae                	mv	s1,a1
-    80002a52:	89b2                	mv	s3,a2
+    80001fb6:	46a1                	li	a3,8
+    80001fb8:	8626                	mv	a2,s1
+    80001fba:	85ca                	mv	a1,s2
+    80001fbc:	6928                	ld	a0,80(a0)
+    80001fbe:	fffff097          	auipc	ra,0xfffff
+    80001fc2:	cd0080e7          	jalr	-816(ra) # 80000c8e <copyin>
+    80001fc6:	00a03533          	snez	a0,a0
+    80001fca:	40a00533          	neg	a0,a0
+}
+    80001fce:	60e2                	ld	ra,24(sp)
+    80001fd0:	6442                	ld	s0,16(sp)
+    80001fd2:	64a2                	ld	s1,8(sp)
+    80001fd4:	6902                	ld	s2,0(sp)
+    80001fd6:	6105                	addi	sp,sp,32
+    80001fd8:	8082                	ret
+    return -1;
+    80001fda:	557d                	li	a0,-1
+    80001fdc:	bfcd                	j	80001fce <fetchaddr+0x3e>
+    80001fde:	557d                	li	a0,-1
+    80001fe0:	b7fd                	j	80001fce <fetchaddr+0x3e>
+
+0000000080001fe2 <fetchstr>:
+{
+    80001fe2:	7179                	addi	sp,sp,-48
+    80001fe4:	f406                	sd	ra,40(sp)
+    80001fe6:	f022                	sd	s0,32(sp)
+    80001fe8:	ec26                	sd	s1,24(sp)
+    80001fea:	e84a                	sd	s2,16(sp)
+    80001fec:	e44e                	sd	s3,8(sp)
+    80001fee:	1800                	addi	s0,sp,48
+    80001ff0:	892a                	mv	s2,a0
+    80001ff2:	84ae                	mv	s1,a1
+    80001ff4:	89b2                	mv	s3,a2
   struct proc *p = myproc();
-    80002a54:	fffff097          	auipc	ra,0xfffff
-    80002a58:	f78080e7          	jalr	-136(ra) # 800019cc <myproc>
+    80001ff6:	fffff097          	auipc	ra,0xfffff
+    80001ffa:	f48080e7          	jalr	-184(ra) # 80000f3e <myproc>
   int err = copyinstr(p->pagetable, buf, addr, max);
-    80002a5c:	86ce                	mv	a3,s3
-    80002a5e:	864a                	mv	a2,s2
-    80002a60:	85a6                	mv	a1,s1
-    80002a62:	6928                	ld	a0,80(a0)
-    80002a64:	fffff097          	auipc	ra,0xfffff
-    80002a68:	d78080e7          	jalr	-648(ra) # 800017dc <copyinstr>
+    80001ffe:	86ce                	mv	a3,s3
+    80002000:	864a                	mv	a2,s2
+    80002002:	85a6                	mv	a1,s1
+    80002004:	6928                	ld	a0,80(a0)
+    80002006:	fffff097          	auipc	ra,0xfffff
+    8000200a:	d16080e7          	jalr	-746(ra) # 80000d1c <copyinstr>
   if(err < 0)
-    80002a6c:	00054763          	bltz	a0,80002a7a <fetchstr+0x3a>
+    8000200e:	00054763          	bltz	a0,8000201c <fetchstr+0x3a>
   return strlen(buf);
-    80002a70:	8526                	mv	a0,s1
-    80002a72:	ffffe097          	auipc	ra,0xffffe
-    80002a76:	40e080e7          	jalr	1038(ra) # 80000e80 <strlen>
-}
-    80002a7a:	70a2                	ld	ra,40(sp)
-    80002a7c:	7402                	ld	s0,32(sp)
-    80002a7e:	64e2                	ld	s1,24(sp)
-    80002a80:	6942                	ld	s2,16(sp)
-    80002a82:	69a2                	ld	s3,8(sp)
-    80002a84:	6145                	addi	sp,sp,48
-    80002a86:	8082                	ret
+    80002012:	8526                	mv	a0,s1
+    80002014:	ffffe097          	auipc	ra,0xffffe
+    80002018:	306080e7          	jalr	774(ra) # 8000031a <strlen>
+}
+    8000201c:	70a2                	ld	ra,40(sp)
+    8000201e:	7402                	ld	s0,32(sp)
+    80002020:	64e2                	ld	s1,24(sp)
+    80002022:	6942                	ld	s2,16(sp)
+    80002024:	69a2                	ld	s3,8(sp)
+    80002026:	6145                	addi	sp,sp,48
+    80002028:	8082                	ret
 
-0000000080002a88 <argint>:
+000000008000202a <argint>:
 
 // Fetch the nth 32-bit system call argument.
 int
 argint(int n, int *ip)
 {
-    80002a88:	1101                	addi	sp,sp,-32
-    80002a8a:	ec06                	sd	ra,24(sp)
-    80002a8c:	e822                	sd	s0,16(sp)
-    80002a8e:	e426                	sd	s1,8(sp)
-    80002a90:	1000                	addi	s0,sp,32
-    80002a92:	84ae                	mv	s1,a1
+    8000202a:	1101                	addi	sp,sp,-32
+    8000202c:	ec06                	sd	ra,24(sp)
+    8000202e:	e822                	sd	s0,16(sp)
+    80002030:	e426                	sd	s1,8(sp)
+    80002032:	1000                	addi	s0,sp,32
+    80002034:	84ae                	mv	s1,a1
   *ip = argraw(n);
-    80002a94:	00000097          	auipc	ra,0x0
-    80002a98:	ef2080e7          	jalr	-270(ra) # 80002986 <argraw>
-    80002a9c:	c088                	sw	a0,0(s1)
+    80002036:	00000097          	auipc	ra,0x0
+    8000203a:	ef2080e7          	jalr	-270(ra) # 80001f28 <argraw>
+    8000203e:	c088                	sw	a0,0(s1)
   return 0;
 }
-    80002a9e:	4501                	li	a0,0
-    80002aa0:	60e2                	ld	ra,24(sp)
-    80002aa2:	6442                	ld	s0,16(sp)
-    80002aa4:	64a2                	ld	s1,8(sp)
-    80002aa6:	6105                	addi	sp,sp,32
-    80002aa8:	8082                	ret
+    80002040:	4501                	li	a0,0
+    80002042:	60e2                	ld	ra,24(sp)
+    80002044:	6442                	ld	s0,16(sp)
+    80002046:	64a2                	ld	s1,8(sp)
+    80002048:	6105                	addi	sp,sp,32
+    8000204a:	8082                	ret
 
-0000000080002aaa <argaddr>:
+000000008000204c <argaddr>:
 // Retrieve an argument as a pointer.
 // Doesn't check for legality, since
 // copyin/copyout will do that.
 int
 argaddr(int n, uint64 *ip)
 {
-    80002aaa:	1101                	addi	sp,sp,-32
-    80002aac:	ec06                	sd	ra,24(sp)
-    80002aae:	e822                	sd	s0,16(sp)
-    80002ab0:	e426                	sd	s1,8(sp)
-    80002ab2:	1000                	addi	s0,sp,32
-    80002ab4:	84ae                	mv	s1,a1
+    8000204c:	1101                	addi	sp,sp,-32
+    8000204e:	ec06                	sd	ra,24(sp)
+    80002050:	e822                	sd	s0,16(sp)
+    80002052:	e426                	sd	s1,8(sp)
+    80002054:	1000                	addi	s0,sp,32
+    80002056:	84ae                	mv	s1,a1
   *ip = argraw(n);
-    80002ab6:	00000097          	auipc	ra,0x0
-    80002aba:	ed0080e7          	jalr	-304(ra) # 80002986 <argraw>
-    80002abe:	e088                	sd	a0,0(s1)
+    80002058:	00000097          	auipc	ra,0x0
+    8000205c:	ed0080e7          	jalr	-304(ra) # 80001f28 <argraw>
+    80002060:	e088                	sd	a0,0(s1)
   return 0;
 }
-    80002ac0:	4501                	li	a0,0
-    80002ac2:	60e2                	ld	ra,24(sp)
-    80002ac4:	6442                	ld	s0,16(sp)
-    80002ac6:	64a2                	ld	s1,8(sp)
-    80002ac8:	6105                	addi	sp,sp,32
-    80002aca:	8082                	ret
+    80002062:	4501                	li	a0,0
+    80002064:	60e2                	ld	ra,24(sp)
+    80002066:	6442                	ld	s0,16(sp)
+    80002068:	64a2                	ld	s1,8(sp)
+    8000206a:	6105                	addi	sp,sp,32
+    8000206c:	8082                	ret
 
-0000000080002acc <argstr>:
+000000008000206e <argstr>:
 // Fetch the nth word-sized system call argument as a null-terminated string.
 // Copies into buf, at most max.
 // Returns string length if OK (including nul), -1 if error.
 int
 argstr(int n, char *buf, int max)
 {
-    80002acc:	1101                	addi	sp,sp,-32
-    80002ace:	ec06                	sd	ra,24(sp)
-    80002ad0:	e822                	sd	s0,16(sp)
-    80002ad2:	e426                	sd	s1,8(sp)
-    80002ad4:	e04a                	sd	s2,0(sp)
-    80002ad6:	1000                	addi	s0,sp,32
-    80002ad8:	84ae                	mv	s1,a1
-    80002ada:	8932                	mv	s2,a2
+    8000206e:	1101                	addi	sp,sp,-32
+    80002070:	ec06                	sd	ra,24(sp)
+    80002072:	e822                	sd	s0,16(sp)
+    80002074:	e426                	sd	s1,8(sp)
+    80002076:	e04a                	sd	s2,0(sp)
+    80002078:	1000                	addi	s0,sp,32
+    8000207a:	84ae                	mv	s1,a1
+    8000207c:	8932                	mv	s2,a2
   *ip = argraw(n);
-    80002adc:	00000097          	auipc	ra,0x0
-    80002ae0:	eaa080e7          	jalr	-342(ra) # 80002986 <argraw>
+    8000207e:	00000097          	auipc	ra,0x0
+    80002082:	eaa080e7          	jalr	-342(ra) # 80001f28 <argraw>
   uint64 addr;
   if(argaddr(n, &addr) < 0)
     return -1;
   return fetchstr(addr, buf, max);
-    80002ae4:	864a                	mv	a2,s2
-    80002ae6:	85a6                	mv	a1,s1
-    80002ae8:	00000097          	auipc	ra,0x0
-    80002aec:	f58080e7          	jalr	-168(ra) # 80002a40 <fetchstr>
-}
-    80002af0:	60e2                	ld	ra,24(sp)
-    80002af2:	6442                	ld	s0,16(sp)
-    80002af4:	64a2                	ld	s1,8(sp)
-    80002af6:	6902                	ld	s2,0(sp)
-    80002af8:	6105                	addi	sp,sp,32
-    80002afa:	8082                	ret
-
-0000000080002afc <syscall>:
-[SYS_close]   sys_close,
-};
+    80002086:	864a                	mv	a2,s2
+    80002088:	85a6                	mv	a1,s1
+    8000208a:	00000097          	auipc	ra,0x0
+    8000208e:	f58080e7          	jalr	-168(ra) # 80001fe2 <fetchstr>
+}
+    80002092:	60e2                	ld	ra,24(sp)
+    80002094:	6442                	ld	s0,16(sp)
+    80002096:	64a2                	ld	s1,8(sp)
+    80002098:	6902                	ld	s2,0(sp)
+    8000209a:	6105                	addi	sp,sp,32
+    8000209c:	8082                	ret
+
+000000008000209e <syscall>:
+    "sbrk", "sleep", "uptime", "open", "write", "mknod", "unlink",
+    "link", "mkdir", "close", "trace", "sysinfo"};
 
 void
 syscall(void)
 {
-    80002afc:	1101                	addi	sp,sp,-32
-    80002afe:	ec06                	sd	ra,24(sp)
-    80002b00:	e822                	sd	s0,16(sp)
-    80002b02:	e426                	sd	s1,8(sp)
-    80002b04:	e04a                	sd	s2,0(sp)
-    80002b06:	1000                	addi	s0,sp,32
+    8000209e:	7179                	addi	sp,sp,-48
+    800020a0:	f406                	sd	ra,40(sp)
+    800020a2:	f022                	sd	s0,32(sp)
+    800020a4:	ec26                	sd	s1,24(sp)
+    800020a6:	e84a                	sd	s2,16(sp)
+    800020a8:	e44e                	sd	s3,8(sp)
+    800020aa:	1800                	addi	s0,sp,48
   int num;
   struct proc *p = myproc();
-    80002b08:	fffff097          	auipc	ra,0xfffff
-    80002b0c:	ec4080e7          	jalr	-316(ra) # 800019cc <myproc>
-    80002b10:	84aa                	mv	s1,a0
+    800020ac:	fffff097          	auipc	ra,0xfffff
+    800020b0:	e92080e7          	jalr	-366(ra) # 80000f3e <myproc>
+    800020b4:	84aa                	mv	s1,a0
 
   num = p->trapframe->a7;
-    80002b12:	05853903          	ld	s2,88(a0)
-    80002b16:	0a893783          	ld	a5,168(s2)
-    80002b1a:	0007869b          	sext.w	a3,a5
+    800020b6:	05853903          	ld	s2,88(a0)
+    800020ba:	0a893783          	ld	a5,168(s2)
+    800020be:	0007899b          	sext.w	s3,a5
   if(num > 0 && num < NELEM(syscalls) && syscalls[num]) {
-    80002b1e:	37fd                	addiw	a5,a5,-1
-    80002b20:	4751                	li	a4,20
-    80002b22:	00f76f63          	bltu	a4,a5,80002b40 <syscall+0x44>
-    80002b26:	00369713          	slli	a4,a3,0x3
-    80002b2a:	00006797          	auipc	a5,0x6
-    80002b2e:	8fe78793          	addi	a5,a5,-1794 # 80008428 <syscalls>
-    80002b32:	97ba                	add	a5,a5,a4
-    80002b34:	639c                	ld	a5,0(a5)
-    80002b36:	c789                	beqz	a5,80002b40 <syscall+0x44>
+    800020c2:	37fd                	addiw	a5,a5,-1
+    800020c4:	4759                	li	a4,22
+    800020c6:	04f76863          	bltu	a4,a5,80002116 <syscall+0x78>
+    800020ca:	00399713          	slli	a4,s3,0x3
+    800020ce:	00006797          	auipc	a5,0x6
+    800020d2:	3f278793          	addi	a5,a5,1010 # 800084c0 <syscalls>
+    800020d6:	97ba                	add	a5,a5,a4
+    800020d8:	639c                	ld	a5,0(a5)
+    800020da:	cf95                	beqz	a5,80002116 <syscall+0x78>
     p->trapframe->a0 = syscalls[num]();
-    80002b38:	9782                	jalr	a5
-    80002b3a:	06a93823          	sd	a0,112(s2)
-    80002b3e:	a839                	j	80002b5c <syscall+0x60>
+    800020dc:	9782                	jalr	a5
+    800020de:	06a93823          	sd	a0,112(s2)
+    if (p->trace_mask & (1 << num)) {
+    800020e2:	1684a783          	lw	a5,360(s1)
+    800020e6:	4137d7bb          	sraw	a5,a5,s3
+    800020ea:	8b85                	andi	a5,a5,1
+    800020ec:	c7a1                	beqz	a5,80002134 <syscall+0x96>
+        printf("%d: syscall %s -> %d\n", p->pid, syscall_name[num - 1], p->trapframe->a0);
+    800020ee:	6cb8                	ld	a4,88(s1)
+    800020f0:	39fd                	addiw	s3,s3,-1
+    800020f2:	098e                	slli	s3,s3,0x3
+    800020f4:	00006797          	auipc	a5,0x6
+    800020f8:	3cc78793          	addi	a5,a5,972 # 800084c0 <syscalls>
+    800020fc:	97ce                	add	a5,a5,s3
+    800020fe:	7b34                	ld	a3,112(a4)
+    80002100:	63f0                	ld	a2,192(a5)
+    80002102:	588c                	lw	a1,48(s1)
+    80002104:	00006517          	auipc	a0,0x6
+    80002108:	2bc50513          	addi	a0,a0,700 # 800083c0 <states.0+0x150>
+    8000210c:	00004097          	auipc	ra,0x4
+    80002110:	c2e080e7          	jalr	-978(ra) # 80005d3a <printf>
+    80002114:	a005                	j	80002134 <syscall+0x96>
+    }
   } else {
     printf("%d %s: unknown sys call %d\n",
-    80002b40:	15848613          	addi	a2,s1,344
-    80002b44:	5c8c                	lw	a1,56(s1)
-    80002b46:	00006517          	auipc	a0,0x6
-    80002b4a:	8aa50513          	addi	a0,a0,-1878 # 800083f0 <states.0+0x148>
-    80002b4e:	ffffe097          	auipc	ra,0xffffe
-    80002b52:	a42080e7          	jalr	-1470(ra) # 80000590 <printf>
+    80002116:	86ce                	mv	a3,s3
+    80002118:	15848613          	addi	a2,s1,344
+    8000211c:	588c                	lw	a1,48(s1)
+    8000211e:	00006517          	auipc	a0,0x6
+    80002122:	2ba50513          	addi	a0,a0,698 # 800083d8 <states.0+0x168>
+    80002126:	00004097          	auipc	ra,0x4
+    8000212a:	c14080e7          	jalr	-1004(ra) # 80005d3a <printf>
             p->pid, p->name, num);
     p->trapframe->a0 = -1;
-    80002b56:	6cbc                	ld	a5,88(s1)
-    80002b58:	577d                	li	a4,-1
-    80002b5a:	fbb8                	sd	a4,112(a5)
+    8000212e:	6cbc                	ld	a5,88(s1)
+    80002130:	577d                	li	a4,-1
+    80002132:	fbb8                	sd	a4,112(a5)
   }
 }
-    80002b5c:	60e2                	ld	ra,24(sp)
-    80002b5e:	6442                	ld	s0,16(sp)
-    80002b60:	64a2                	ld	s1,8(sp)
-    80002b62:	6902                	ld	s2,0(sp)
-    80002b64:	6105                	addi	sp,sp,32
-    80002b66:	8082                	ret
+    80002134:	70a2                	ld	ra,40(sp)
+    80002136:	7402                	ld	s0,32(sp)
+    80002138:	64e2                	ld	s1,24(sp)
+    8000213a:	6942                	ld	s2,16(sp)
+    8000213c:	69a2                	ld	s3,8(sp)
+    8000213e:	6145                	addi	sp,sp,48
+    80002140:	8082                	ret
 
-0000000080002b68 <sys_exit>:
-#include "spinlock.h"
+0000000080002142 <sys_exit>:
 #include "proc.h"
+#include "sysinfo.h"
 
 uint64
 sys_exit(void)
 {
-    80002b68:	1101                	addi	sp,sp,-32
-    80002b6a:	ec06                	sd	ra,24(sp)
-    80002b6c:	e822                	sd	s0,16(sp)
-    80002b6e:	1000                	addi	s0,sp,32
+    80002142:	1101                	addi	sp,sp,-32
+    80002144:	ec06                	sd	ra,24(sp)
+    80002146:	e822                	sd	s0,16(sp)
+    80002148:	1000                	addi	s0,sp,32
   int n;
   if(argint(0, &n) < 0)
-    80002b70:	fec40593          	addi	a1,s0,-20
-    80002b74:	4501                	li	a0,0
-    80002b76:	00000097          	auipc	ra,0x0
-    80002b7a:	f12080e7          	jalr	-238(ra) # 80002a88 <argint>
+    8000214a:	fec40593          	addi	a1,s0,-20
+    8000214e:	4501                	li	a0,0
+    80002150:	00000097          	auipc	ra,0x0
+    80002154:	eda080e7          	jalr	-294(ra) # 8000202a <argint>
     return -1;
-    80002b7e:	57fd                	li	a5,-1
+    80002158:	57fd                	li	a5,-1
   if(argint(0, &n) < 0)
-    80002b80:	00054963          	bltz	a0,80002b92 <sys_exit+0x2a>
+    8000215a:	00054963          	bltz	a0,8000216c <sys_exit+0x2a>
   exit(n);
-    80002b84:	fec42503          	lw	a0,-20(s0)
-    80002b88:	fffff097          	auipc	ra,0xfffff
-    80002b8c:	512080e7          	jalr	1298(ra) # 8000209a <exit>
+    8000215e:	fec42503          	lw	a0,-20(s0)
+    80002162:	fffff097          	auipc	ra,0xfffff
+    80002166:	704080e7          	jalr	1796(ra) # 80001866 <exit>
   return 0;  // not reached
-    80002b90:	4781                	li	a5,0
+    8000216a:	4781                	li	a5,0
 }
-    80002b92:	853e                	mv	a0,a5
-    80002b94:	60e2                	ld	ra,24(sp)
-    80002b96:	6442                	ld	s0,16(sp)
-    80002b98:	6105                	addi	sp,sp,32
-    80002b9a:	8082                	ret
+    8000216c:	853e                	mv	a0,a5
+    8000216e:	60e2                	ld	ra,24(sp)
+    80002170:	6442                	ld	s0,16(sp)
+    80002172:	6105                	addi	sp,sp,32
+    80002174:	8082                	ret
 
-0000000080002b9c <sys_getpid>:
+0000000080002176 <sys_getpid>:
 
 uint64
 sys_getpid(void)
 {
-    80002b9c:	1141                	addi	sp,sp,-16
-    80002b9e:	e406                	sd	ra,8(sp)
-    80002ba0:	e022                	sd	s0,0(sp)
-    80002ba2:	0800                	addi	s0,sp,16
+    80002176:	1141                	addi	sp,sp,-16
+    80002178:	e406                	sd	ra,8(sp)
+    8000217a:	e022                	sd	s0,0(sp)
+    8000217c:	0800                	addi	s0,sp,16
   return myproc()->pid;
-    80002ba4:	fffff097          	auipc	ra,0xfffff
-    80002ba8:	e28080e7          	jalr	-472(ra) # 800019cc <myproc>
+    8000217e:	fffff097          	auipc	ra,0xfffff
+    80002182:	dc0080e7          	jalr	-576(ra) # 80000f3e <myproc>
 }
-    80002bac:	5d08                	lw	a0,56(a0)
-    80002bae:	60a2                	ld	ra,8(sp)
-    80002bb0:	6402                	ld	s0,0(sp)
-    80002bb2:	0141                	addi	sp,sp,16
-    80002bb4:	8082                	ret
+    80002186:	5908                	lw	a0,48(a0)
+    80002188:	60a2                	ld	ra,8(sp)
+    8000218a:	6402                	ld	s0,0(sp)
+    8000218c:	0141                	addi	sp,sp,16
+    8000218e:	8082                	ret
 
-0000000080002bb6 <sys_fork>:
+0000000080002190 <sys_fork>:
 
 uint64
 sys_fork(void)
 {
-    80002bb6:	1141                	addi	sp,sp,-16
-    80002bb8:	e406                	sd	ra,8(sp)
-    80002bba:	e022                	sd	s0,0(sp)
-    80002bbc:	0800                	addi	s0,sp,16
+    80002190:	1141                	addi	sp,sp,-16
+    80002192:	e406                	sd	ra,8(sp)
+    80002194:	e022                	sd	s0,0(sp)
+    80002196:	0800                	addi	s0,sp,16
   return fork();
-    80002bbe:	fffff097          	auipc	ra,0xfffff
-    80002bc2:	1d2080e7          	jalr	466(ra) # 80001d90 <fork>
+    80002198:	fffff097          	auipc	ra,0xfffff
+    8000219c:	178080e7          	jalr	376(ra) # 80001310 <fork>
 }
-    80002bc6:	60a2                	ld	ra,8(sp)
-    80002bc8:	6402                	ld	s0,0(sp)
-    80002bca:	0141                	addi	sp,sp,16
-    80002bcc:	8082                	ret
+    800021a0:	60a2                	ld	ra,8(sp)
+    800021a2:	6402                	ld	s0,0(sp)
+    800021a4:	0141                	addi	sp,sp,16
+    800021a6:	8082                	ret
 
-0000000080002bce <sys_wait>:
+00000000800021a8 <sys_wait>:
 
 uint64
 sys_wait(void)
 {
-    80002bce:	1101                	addi	sp,sp,-32
-    80002bd0:	ec06                	sd	ra,24(sp)
-    80002bd2:	e822                	sd	s0,16(sp)
-    80002bd4:	1000                	addi	s0,sp,32
+    800021a8:	1101                	addi	sp,sp,-32
+    800021aa:	ec06                	sd	ra,24(sp)
+    800021ac:	e822                	sd	s0,16(sp)
+    800021ae:	1000                	addi	s0,sp,32
   uint64 p;
   if(argaddr(0, &p) < 0)
-    80002bd6:	fe840593          	addi	a1,s0,-24
-    80002bda:	4501                	li	a0,0
-    80002bdc:	00000097          	auipc	ra,0x0
-    80002be0:	ece080e7          	jalr	-306(ra) # 80002aaa <argaddr>
-    80002be4:	87aa                	mv	a5,a0
+    800021b0:	fe840593          	addi	a1,s0,-24
+    800021b4:	4501                	li	a0,0
+    800021b6:	00000097          	auipc	ra,0x0
+    800021ba:	e96080e7          	jalr	-362(ra) # 8000204c <argaddr>
+    800021be:	87aa                	mv	a5,a0
     return -1;
-    80002be6:	557d                	li	a0,-1
+    800021c0:	557d                	li	a0,-1
   if(argaddr(0, &p) < 0)
-    80002be8:	0007c863          	bltz	a5,80002bf8 <sys_wait+0x2a>
+    800021c2:	0007c863          	bltz	a5,800021d2 <sys_wait+0x2a>
   return wait(p);
-    80002bec:	fe843503          	ld	a0,-24(s0)
-    80002bf0:	fffff097          	auipc	ra,0xfffff
-    80002bf4:	66e080e7          	jalr	1646(ra) # 8000225e <wait>
-}
-    80002bf8:	60e2                	ld	ra,24(sp)
-    80002bfa:	6442                	ld	s0,16(sp)
-    80002bfc:	6105                	addi	sp,sp,32
-    80002bfe:	8082                	ret
+    800021c6:	fe843503          	ld	a0,-24(s0)
+    800021ca:	fffff097          	auipc	ra,0xfffff
+    800021ce:	4a4080e7          	jalr	1188(ra) # 8000166e <wait>
+}
+    800021d2:	60e2                	ld	ra,24(sp)
+    800021d4:	6442                	ld	s0,16(sp)
+    800021d6:	6105                	addi	sp,sp,32
+    800021d8:	8082                	ret
 
-0000000080002c00 <sys_sbrk>:
+00000000800021da <sys_sbrk>:
 
 uint64
 sys_sbrk(void)
 {
-    80002c00:	7179                	addi	sp,sp,-48
-    80002c02:	f406                	sd	ra,40(sp)
-    80002c04:	f022                	sd	s0,32(sp)
-    80002c06:	ec26                	sd	s1,24(sp)
-    80002c08:	1800                	addi	s0,sp,48
+    800021da:	7179                	addi	sp,sp,-48
+    800021dc:	f406                	sd	ra,40(sp)
+    800021de:	f022                	sd	s0,32(sp)
+    800021e0:	ec26                	sd	s1,24(sp)
+    800021e2:	1800                	addi	s0,sp,48
   int addr;
   int n;
 
   if(argint(0, &n) < 0)
-    80002c0a:	fdc40593          	addi	a1,s0,-36
-    80002c0e:	4501                	li	a0,0
-    80002c10:	00000097          	auipc	ra,0x0
-    80002c14:	e78080e7          	jalr	-392(ra) # 80002a88 <argint>
-    80002c18:	87aa                	mv	a5,a0
+    800021e4:	fdc40593          	addi	a1,s0,-36
+    800021e8:	4501                	li	a0,0
+    800021ea:	00000097          	auipc	ra,0x0
+    800021ee:	e40080e7          	jalr	-448(ra) # 8000202a <argint>
+    800021f2:	87aa                	mv	a5,a0
     return -1;
-    80002c1a:	557d                	li	a0,-1
+    800021f4:	557d                	li	a0,-1
   if(argint(0, &n) < 0)
-    80002c1c:	0207c063          	bltz	a5,80002c3c <sys_sbrk+0x3c>
+    800021f6:	0207c063          	bltz	a5,80002216 <sys_sbrk+0x3c>
   addr = myproc()->sz;
-    80002c20:	fffff097          	auipc	ra,0xfffff
-    80002c24:	dac080e7          	jalr	-596(ra) # 800019cc <myproc>
-    80002c28:	4524                	lw	s1,72(a0)
+    800021fa:	fffff097          	auipc	ra,0xfffff
+    800021fe:	d44080e7          	jalr	-700(ra) # 80000f3e <myproc>
+    80002202:	4524                	lw	s1,72(a0)
   if(growproc(n) < 0)
-    80002c2a:	fdc42503          	lw	a0,-36(s0)
-    80002c2e:	fffff097          	auipc	ra,0xfffff
-    80002c32:	0ea080e7          	jalr	234(ra) # 80001d18 <growproc>
-    80002c36:	00054863          	bltz	a0,80002c46 <sys_sbrk+0x46>
+    80002204:	fdc42503          	lw	a0,-36(s0)
+    80002208:	fffff097          	auipc	ra,0xfffff
+    8000220c:	090080e7          	jalr	144(ra) # 80001298 <growproc>
+    80002210:	00054863          	bltz	a0,80002220 <sys_sbrk+0x46>
     return -1;
   return addr;
-    80002c3a:	8526                	mv	a0,s1
+    80002214:	8526                	mv	a0,s1
 }
-    80002c3c:	70a2                	ld	ra,40(sp)
-    80002c3e:	7402                	ld	s0,32(sp)
-    80002c40:	64e2                	ld	s1,24(sp)
-    80002c42:	6145                	addi	sp,sp,48
-    80002c44:	8082                	ret
+    80002216:	70a2                	ld	ra,40(sp)
+    80002218:	7402                	ld	s0,32(sp)
+    8000221a:	64e2                	ld	s1,24(sp)
+    8000221c:	6145                	addi	sp,sp,48
+    8000221e:	8082                	ret
     return -1;
-    80002c46:	557d                	li	a0,-1
-    80002c48:	bfd5                	j	80002c3c <sys_sbrk+0x3c>
+    80002220:	557d                	li	a0,-1
+    80002222:	bfd5                	j	80002216 <sys_sbrk+0x3c>
 
-0000000080002c4a <sys_sleep>:
+0000000080002224 <sys_sleep>:
 
 uint64
 sys_sleep(void)
 {
-    80002c4a:	7139                	addi	sp,sp,-64
-    80002c4c:	fc06                	sd	ra,56(sp)
-    80002c4e:	f822                	sd	s0,48(sp)
-    80002c50:	f426                	sd	s1,40(sp)
-    80002c52:	f04a                	sd	s2,32(sp)
-    80002c54:	ec4e                	sd	s3,24(sp)
-    80002c56:	0080                	addi	s0,sp,64
+    80002224:	7139                	addi	sp,sp,-64
+    80002226:	fc06                	sd	ra,56(sp)
+    80002228:	f822                	sd	s0,48(sp)
+    8000222a:	f426                	sd	s1,40(sp)
+    8000222c:	f04a                	sd	s2,32(sp)
+    8000222e:	ec4e                	sd	s3,24(sp)
+    80002230:	0080                	addi	s0,sp,64
   int n;
   uint ticks0;
 
   if(argint(0, &n) < 0)
-    80002c58:	fcc40593          	addi	a1,s0,-52
-    80002c5c:	4501                	li	a0,0
-    80002c5e:	00000097          	auipc	ra,0x0
-    80002c62:	e2a080e7          	jalr	-470(ra) # 80002a88 <argint>
+    80002232:	fcc40593          	addi	a1,s0,-52
+    80002236:	4501                	li	a0,0
+    80002238:	00000097          	auipc	ra,0x0
+    8000223c:	df2080e7          	jalr	-526(ra) # 8000202a <argint>
     return -1;
-    80002c66:	57fd                	li	a5,-1
+    80002240:	57fd                	li	a5,-1
   if(argint(0, &n) < 0)
-    80002c68:	06054563          	bltz	a0,80002cd2 <sys_sleep+0x88>
+    80002242:	06054563          	bltz	a0,800022ac <sys_sleep+0x88>
   acquire(&tickslock);
-    80002c6c:	00015517          	auipc	a0,0x15
-    80002c70:	afc50513          	addi	a0,a0,-1284 # 80017768 <tickslock>
-    80002c74:	ffffe097          	auipc	ra,0xffffe
-    80002c78:	f8c080e7          	jalr	-116(ra) # 80000c00 <acquire>
+    80002246:	0000d517          	auipc	a0,0xd
+    8000224a:	e3a50513          	addi	a0,a0,-454 # 8000f080 <tickslock>
+    8000224e:	00004097          	auipc	ra,0x4
+    80002252:	fda080e7          	jalr	-38(ra) # 80006228 <acquire>
   ticks0 = ticks;
-    80002c7c:	00006917          	auipc	s2,0x6
-    80002c80:	3a492903          	lw	s2,932(s2) # 80009020 <ticks>
+    80002256:	00007917          	auipc	s2,0x7
+    8000225a:	dc292903          	lw	s2,-574(s2) # 80009018 <ticks>
   while(ticks - ticks0 < n){
-    80002c84:	fcc42783          	lw	a5,-52(s0)
-    80002c88:	cf85                	beqz	a5,80002cc0 <sys_sleep+0x76>
+    8000225e:	fcc42783          	lw	a5,-52(s0)
+    80002262:	cf85                	beqz	a5,8000229a <sys_sleep+0x76>
     if(myproc()->killed){
       release(&tickslock);
       return -1;
     }
     sleep(&ticks, &tickslock);
-    80002c8a:	00015997          	auipc	s3,0x15
-    80002c8e:	ade98993          	addi	s3,s3,-1314 # 80017768 <tickslock>
-    80002c92:	00006497          	auipc	s1,0x6
-    80002c96:	38e48493          	addi	s1,s1,910 # 80009020 <ticks>
+    80002264:	0000d997          	auipc	s3,0xd
+    80002268:	e1c98993          	addi	s3,s3,-484 # 8000f080 <tickslock>
+    8000226c:	00007497          	auipc	s1,0x7
+    80002270:	dac48493          	addi	s1,s1,-596 # 80009018 <ticks>
     if(myproc()->killed){
-    80002c9a:	fffff097          	auipc	ra,0xfffff
-    80002c9e:	d32080e7          	jalr	-718(ra) # 800019cc <myproc>
-    80002ca2:	591c                	lw	a5,48(a0)
-    80002ca4:	ef9d                	bnez	a5,80002ce2 <sys_sleep+0x98>
+    80002274:	fffff097          	auipc	ra,0xfffff
+    80002278:	cca080e7          	jalr	-822(ra) # 80000f3e <myproc>
+    8000227c:	551c                	lw	a5,40(a0)
+    8000227e:	ef9d                	bnez	a5,800022bc <sys_sleep+0x98>
     sleep(&ticks, &tickslock);
-    80002ca6:	85ce                	mv	a1,s3
-    80002ca8:	8526                	mv	a0,s1
-    80002caa:	fffff097          	auipc	ra,0xfffff
-    80002cae:	536080e7          	jalr	1334(ra) # 800021e0 <sleep>
+    80002280:	85ce                	mv	a1,s3
+    80002282:	8526                	mv	a0,s1
+    80002284:	fffff097          	auipc	ra,0xfffff
+    80002288:	386080e7          	jalr	902(ra) # 8000160a <sleep>
   while(ticks - ticks0 < n){
-    80002cb2:	409c                	lw	a5,0(s1)
-    80002cb4:	412787bb          	subw	a5,a5,s2
-    80002cb8:	fcc42703          	lw	a4,-52(s0)
-    80002cbc:	fce7efe3          	bltu	a5,a4,80002c9a <sys_sleep+0x50>
+    8000228c:	409c                	lw	a5,0(s1)
+    8000228e:	412787bb          	subw	a5,a5,s2
+    80002292:	fcc42703          	lw	a4,-52(s0)
+    80002296:	fce7efe3          	bltu	a5,a4,80002274 <sys_sleep+0x50>
   }
   release(&tickslock);
-    80002cc0:	00015517          	auipc	a0,0x15
-    80002cc4:	aa850513          	addi	a0,a0,-1368 # 80017768 <tickslock>
-    80002cc8:	ffffe097          	auipc	ra,0xffffe
-    80002ccc:	fec080e7          	jalr	-20(ra) # 80000cb4 <release>
+    8000229a:	0000d517          	auipc	a0,0xd
+    8000229e:	de650513          	addi	a0,a0,-538 # 8000f080 <tickslock>
+    800022a2:	00004097          	auipc	ra,0x4
+    800022a6:	03a080e7          	jalr	58(ra) # 800062dc <release>
   return 0;
-    80002cd0:	4781                	li	a5,0
+    800022aa:	4781                	li	a5,0
 }
-    80002cd2:	853e                	mv	a0,a5
-    80002cd4:	70e2                	ld	ra,56(sp)
-    80002cd6:	7442                	ld	s0,48(sp)
-    80002cd8:	74a2                	ld	s1,40(sp)
-    80002cda:	7902                	ld	s2,32(sp)
-    80002cdc:	69e2                	ld	s3,24(sp)
-    80002cde:	6121                	addi	sp,sp,64
-    80002ce0:	8082                	ret
+    800022ac:	853e                	mv	a0,a5
+    800022ae:	70e2                	ld	ra,56(sp)
+    800022b0:	7442                	ld	s0,48(sp)
+    800022b2:	74a2                	ld	s1,40(sp)
+    800022b4:	7902                	ld	s2,32(sp)
+    800022b6:	69e2                	ld	s3,24(sp)
+    800022b8:	6121                	addi	sp,sp,64
+    800022ba:	8082                	ret
       release(&tickslock);
-    80002ce2:	00015517          	auipc	a0,0x15
-    80002ce6:	a8650513          	addi	a0,a0,-1402 # 80017768 <tickslock>
-    80002cea:	ffffe097          	auipc	ra,0xffffe
-    80002cee:	fca080e7          	jalr	-54(ra) # 80000cb4 <release>
+    800022bc:	0000d517          	auipc	a0,0xd
+    800022c0:	dc450513          	addi	a0,a0,-572 # 8000f080 <tickslock>
+    800022c4:	00004097          	auipc	ra,0x4
+    800022c8:	018080e7          	jalr	24(ra) # 800062dc <release>
       return -1;
-    80002cf2:	57fd                	li	a5,-1
-    80002cf4:	bff9                	j	80002cd2 <sys_sleep+0x88>
+    800022cc:	57fd                	li	a5,-1
+    800022ce:	bff9                	j	800022ac <sys_sleep+0x88>
 
-0000000080002cf6 <sys_kill>:
+00000000800022d0 <sys_kill>:
 
 uint64
 sys_kill(void)
 {
-    80002cf6:	1101                	addi	sp,sp,-32
-    80002cf8:	ec06                	sd	ra,24(sp)
-    80002cfa:	e822                	sd	s0,16(sp)
-    80002cfc:	1000                	addi	s0,sp,32
+    800022d0:	1101                	addi	sp,sp,-32
+    800022d2:	ec06                	sd	ra,24(sp)
+    800022d4:	e822                	sd	s0,16(sp)
+    800022d6:	1000                	addi	s0,sp,32
   int pid;
 
   if(argint(0, &pid) < 0)
-    80002cfe:	fec40593          	addi	a1,s0,-20
-    80002d02:	4501                	li	a0,0
-    80002d04:	00000097          	auipc	ra,0x0
-    80002d08:	d84080e7          	jalr	-636(ra) # 80002a88 <argint>
-    80002d0c:	87aa                	mv	a5,a0
+    800022d8:	fec40593          	addi	a1,s0,-20
+    800022dc:	4501                	li	a0,0
+    800022de:	00000097          	auipc	ra,0x0
+    800022e2:	d4c080e7          	jalr	-692(ra) # 8000202a <argint>
+    800022e6:	87aa                	mv	a5,a0
     return -1;
-    80002d0e:	557d                	li	a0,-1
+    800022e8:	557d                	li	a0,-1
   if(argint(0, &pid) < 0)
-    80002d10:	0007c863          	bltz	a5,80002d20 <sys_kill+0x2a>
+    800022ea:	0007c863          	bltz	a5,800022fa <sys_kill+0x2a>
   return kill(pid);
-    80002d14:	fec42503          	lw	a0,-20(s0)
-    80002d18:	fffff097          	auipc	ra,0xfffff
-    80002d1c:	6b2080e7          	jalr	1714(ra) # 800023ca <kill>
-}
-    80002d20:	60e2                	ld	ra,24(sp)
-    80002d22:	6442                	ld	s0,16(sp)
-    80002d24:	6105                	addi	sp,sp,32
-    80002d26:	8082                	ret
+    800022ee:	fec42503          	lw	a0,-20(s0)
+    800022f2:	fffff097          	auipc	ra,0xfffff
+    800022f6:	64a080e7          	jalr	1610(ra) # 8000193c <kill>
+}
+    800022fa:	60e2                	ld	ra,24(sp)
+    800022fc:	6442                	ld	s0,16(sp)
+    800022fe:	6105                	addi	sp,sp,32
+    80002300:	8082                	ret
 
-0000000080002d28 <sys_uptime>:
+0000000080002302 <sys_uptime>:
 
 // return how many clock tick interrupts have occurred
 // since start.
 uint64
 sys_uptime(void)
 {
-    80002d28:	1101                	addi	sp,sp,-32
-    80002d2a:	ec06                	sd	ra,24(sp)
-    80002d2c:	e822                	sd	s0,16(sp)
-    80002d2e:	e426                	sd	s1,8(sp)
-    80002d30:	1000                	addi	s0,sp,32
+    80002302:	1101                	addi	sp,sp,-32
+    80002304:	ec06                	sd	ra,24(sp)
+    80002306:	e822                	sd	s0,16(sp)
+    80002308:	e426                	sd	s1,8(sp)
+    8000230a:	1000                	addi	s0,sp,32
   uint xticks;
 
   acquire(&tickslock);
-    80002d32:	00015517          	auipc	a0,0x15
-    80002d36:	a3650513          	addi	a0,a0,-1482 # 80017768 <tickslock>
-    80002d3a:	ffffe097          	auipc	ra,0xffffe
-    80002d3e:	ec6080e7          	jalr	-314(ra) # 80000c00 <acquire>
+    8000230c:	0000d517          	auipc	a0,0xd
+    80002310:	d7450513          	addi	a0,a0,-652 # 8000f080 <tickslock>
+    80002314:	00004097          	auipc	ra,0x4
+    80002318:	f14080e7          	jalr	-236(ra) # 80006228 <acquire>
   xticks = ticks;
-    80002d42:	00006497          	auipc	s1,0x6
-    80002d46:	2de4a483          	lw	s1,734(s1) # 80009020 <ticks>
+    8000231c:	00007497          	auipc	s1,0x7
+    80002320:	cfc4a483          	lw	s1,-772(s1) # 80009018 <ticks>
   release(&tickslock);
-    80002d4a:	00015517          	auipc	a0,0x15
-    80002d4e:	a1e50513          	addi	a0,a0,-1506 # 80017768 <tickslock>
-    80002d52:	ffffe097          	auipc	ra,0xffffe
-    80002d56:	f62080e7          	jalr	-158(ra) # 80000cb4 <release>
+    80002324:	0000d517          	auipc	a0,0xd
+    80002328:	d5c50513          	addi	a0,a0,-676 # 8000f080 <tickslock>
+    8000232c:	00004097          	auipc	ra,0x4
+    80002330:	fb0080e7          	jalr	-80(ra) # 800062dc <release>
   return xticks;
 }
-    80002d5a:	02049513          	slli	a0,s1,0x20
-    80002d5e:	9101                	srli	a0,a0,0x20
-    80002d60:	60e2                	ld	ra,24(sp)
-    80002d62:	6442                	ld	s0,16(sp)
-    80002d64:	64a2                	ld	s1,8(sp)
-    80002d66:	6105                	addi	sp,sp,32
-    80002d68:	8082                	ret
+    80002334:	02049513          	slli	a0,s1,0x20
+    80002338:	9101                	srli	a0,a0,0x20
+    8000233a:	60e2                	ld	ra,24(sp)
+    8000233c:	6442                	ld	s0,16(sp)
+    8000233e:	64a2                	ld	s1,8(sp)
+    80002340:	6105                	addi	sp,sp,32
+    80002342:	8082                	ret
+
+0000000080002344 <sys_trace>:
+
+uint64 sys_trace(void) {
+    80002344:	1101                	addi	sp,sp,-32
+    80002346:	ec06                	sd	ra,24(sp)
+    80002348:	e822                	sd	s0,16(sp)
+    8000234a:	1000                	addi	s0,sp,32
+    int mask;
+    if (argint(0, &mask) < 0) {
+    8000234c:	fec40593          	addi	a1,s0,-20
+    80002350:	4501                	li	a0,0
+    80002352:	00000097          	auipc	ra,0x0
+    80002356:	cd8080e7          	jalr	-808(ra) # 8000202a <argint>
+        return -1;
+    8000235a:	57fd                	li	a5,-1
+    if (argint(0, &mask) < 0) {
+    8000235c:	00054b63          	bltz	a0,80002372 <sys_trace+0x2e>
+    }
+    myproc()->trace_mask = mask;
+    80002360:	fffff097          	auipc	ra,0xfffff
+    80002364:	bde080e7          	jalr	-1058(ra) # 80000f3e <myproc>
+    80002368:	fec42783          	lw	a5,-20(s0)
+    8000236c:	16f52423          	sw	a5,360(a0)
+    return 0;
+    80002370:	4781                	li	a5,0
+}
+    80002372:	853e                	mv	a0,a5
+    80002374:	60e2                	ld	ra,24(sp)
+    80002376:	6442                	ld	s0,16(sp)
+    80002378:	6105                	addi	sp,sp,32
+    8000237a:	8082                	ret
+
+000000008000237c <sys_sysinfo>:
+
+uint64 sys_sysinfo(void) {
+    8000237c:	7139                	addi	sp,sp,-64
+    8000237e:	fc06                	sd	ra,56(sp)
+    80002380:	f822                	sd	s0,48(sp)
+    80002382:	f426                	sd	s1,40(sp)
+    80002384:	0080                	addi	s0,sp,64
+    uint64 info_addr;
+    if (argaddr(0, &info_addr) < 0) {
+    80002386:	fd840593          	addi	a1,s0,-40
+    8000238a:	4501                	li	a0,0
+    8000238c:	00000097          	auipc	ra,0x0
+    80002390:	cc0080e7          	jalr	-832(ra) # 8000204c <argaddr>
+    80002394:	87aa                	mv	a5,a0
+        return -1;
+    80002396:	557d                	li	a0,-1
+    if (argaddr(0, &info_addr) < 0) {
+    80002398:	0207ce63          	bltz	a5,800023d4 <sys_sysinfo+0x58>
+    }
+    struct proc *p = myproc();
+    8000239c:	fffff097          	auipc	ra,0xfffff
+    800023a0:	ba2080e7          	jalr	-1118(ra) # 80000f3e <myproc>
+    800023a4:	84aa                	mv	s1,a0
+    struct sysinfo kernel_info;
+    kernel_info.nproc = collect_processes();
+    800023a6:	fffff097          	auipc	ra,0xfffff
+    800023aa:	764080e7          	jalr	1892(ra) # 80001b0a <collect_processes>
+    800023ae:	fca43823          	sd	a0,-48(s0)
+    kernel_info.freemem = collect_free_memory();
+    800023b2:	ffffe097          	auipc	ra,0xffffe
+    800023b6:	dc8080e7          	jalr	-568(ra) # 8000017a <collect_free_memory>
+    800023ba:	fca43423          	sd	a0,-56(s0)
+    if (copyout(p->pagetable, info_addr, (char*)&kernel_info, sizeof(kernel_info)) < 0) {
+    800023be:	46c1                	li	a3,16
+    800023c0:	fc840613          	addi	a2,s0,-56
+    800023c4:	fd843583          	ld	a1,-40(s0)
+    800023c8:	68a8                	ld	a0,80(s1)
+    800023ca:	fffff097          	auipc	ra,0xfffff
+    800023ce:	838080e7          	jalr	-1992(ra) # 80000c02 <copyout>
+    800023d2:	957d                	srai	a0,a0,0x3f
+        return -1;
+    }
+    return 0;
+}
+    800023d4:	70e2                	ld	ra,56(sp)
+    800023d6:	7442                	ld	s0,48(sp)
+    800023d8:	74a2                	ld	s1,40(sp)
+    800023da:	6121                	addi	sp,sp,64
+    800023dc:	8082                	ret
 
-0000000080002d6a <binit>:
+00000000800023de <binit>:
   struct buf head;
 } bcache;
 
 void
 binit(void)
 {
-    80002d6a:	7179                	addi	sp,sp,-48
-    80002d6c:	f406                	sd	ra,40(sp)
-    80002d6e:	f022                	sd	s0,32(sp)
-    80002d70:	ec26                	sd	s1,24(sp)
-    80002d72:	e84a                	sd	s2,16(sp)
-    80002d74:	e44e                	sd	s3,8(sp)
-    80002d76:	e052                	sd	s4,0(sp)
-    80002d78:	1800                	addi	s0,sp,48
+    800023de:	7179                	addi	sp,sp,-48
+    800023e0:	f406                	sd	ra,40(sp)
+    800023e2:	f022                	sd	s0,32(sp)
+    800023e4:	ec26                	sd	s1,24(sp)
+    800023e6:	e84a                	sd	s2,16(sp)
+    800023e8:	e44e                	sd	s3,8(sp)
+    800023ea:	e052                	sd	s4,0(sp)
+    800023ec:	1800                	addi	s0,sp,48
   struct buf *b;
 
   initlock(&bcache.lock, "bcache");
-    80002d7a:	00005597          	auipc	a1,0x5
-    80002d7e:	75e58593          	addi	a1,a1,1886 # 800084d8 <syscalls+0xb0>
-    80002d82:	00015517          	auipc	a0,0x15
-    80002d86:	9fe50513          	addi	a0,a0,-1538 # 80017780 <bcache>
-    80002d8a:	ffffe097          	auipc	ra,0xffffe
-    80002d8e:	de6080e7          	jalr	-538(ra) # 80000b70 <initlock>
+    800023ee:	00006597          	auipc	a1,0x6
+    800023f2:	24a58593          	addi	a1,a1,586 # 80008638 <syscall_name+0xb8>
+    800023f6:	0000d517          	auipc	a0,0xd
+    800023fa:	ca250513          	addi	a0,a0,-862 # 8000f098 <bcache>
+    800023fe:	00004097          	auipc	ra,0x4
+    80002402:	d9a080e7          	jalr	-614(ra) # 80006198 <initlock>
 
   // Create linked list of buffers
   bcache.head.prev = &bcache.head;
-    80002d92:	0001d797          	auipc	a5,0x1d
-    80002d96:	9ee78793          	addi	a5,a5,-1554 # 8001f780 <bcache+0x8000>
-    80002d9a:	0001d717          	auipc	a4,0x1d
-    80002d9e:	c4e70713          	addi	a4,a4,-946 # 8001f9e8 <bcache+0x8268>
-    80002da2:	2ae7b823          	sd	a4,688(a5)
+    80002406:	00015797          	auipc	a5,0x15
+    8000240a:	c9278793          	addi	a5,a5,-878 # 80017098 <bcache+0x8000>
+    8000240e:	00015717          	auipc	a4,0x15
+    80002412:	ef270713          	addi	a4,a4,-270 # 80017300 <bcache+0x8268>
+    80002416:	2ae7b823          	sd	a4,688(a5)
   bcache.head.next = &bcache.head;
-    80002da6:	2ae7bc23          	sd	a4,696(a5)
+    8000241a:	2ae7bc23          	sd	a4,696(a5)
   for(b = bcache.buf; b < bcache.buf+NBUF; b++){
-    80002daa:	00015497          	auipc	s1,0x15
-    80002dae:	9ee48493          	addi	s1,s1,-1554 # 80017798 <bcache+0x18>
+    8000241e:	0000d497          	auipc	s1,0xd
+    80002422:	c9248493          	addi	s1,s1,-878 # 8000f0b0 <bcache+0x18>
     b->next = bcache.head.next;
-    80002db2:	893e                	mv	s2,a5
+    80002426:	893e                	mv	s2,a5
     b->prev = &bcache.head;
-    80002db4:	89ba                	mv	s3,a4
+    80002428:	89ba                	mv	s3,a4
     initsleeplock(&b->lock, "buffer");
-    80002db6:	00005a17          	auipc	s4,0x5
-    80002dba:	72aa0a13          	addi	s4,s4,1834 # 800084e0 <syscalls+0xb8>
+    8000242a:	00006a17          	auipc	s4,0x6
+    8000242e:	216a0a13          	addi	s4,s4,534 # 80008640 <syscall_name+0xc0>
     b->next = bcache.head.next;
-    80002dbe:	2b893783          	ld	a5,696(s2)
-    80002dc2:	e8bc                	sd	a5,80(s1)
+    80002432:	2b893783          	ld	a5,696(s2)
+    80002436:	e8bc                	sd	a5,80(s1)
     b->prev = &bcache.head;
-    80002dc4:	0534b423          	sd	s3,72(s1)
+    80002438:	0534b423          	sd	s3,72(s1)
     initsleeplock(&b->lock, "buffer");
-    80002dc8:	85d2                	mv	a1,s4
-    80002dca:	01048513          	addi	a0,s1,16
-    80002dce:	00001097          	auipc	ra,0x1
-    80002dd2:	4b2080e7          	jalr	1202(ra) # 80004280 <initsleeplock>
+    8000243c:	85d2                	mv	a1,s4
+    8000243e:	01048513          	addi	a0,s1,16
+    80002442:	00001097          	auipc	ra,0x1
+    80002446:	4c2080e7          	jalr	1218(ra) # 80003904 <initsleeplock>
     bcache.head.next->prev = b;
-    80002dd6:	2b893783          	ld	a5,696(s2)
-    80002dda:	e7a4                	sd	s1,72(a5)
+    8000244a:	2b893783          	ld	a5,696(s2)
+    8000244e:	e7a4                	sd	s1,72(a5)
     bcache.head.next = b;
-    80002ddc:	2a993c23          	sd	s1,696(s2)
+    80002450:	2a993c23          	sd	s1,696(s2)
   for(b = bcache.buf; b < bcache.buf+NBUF; b++){
-    80002de0:	45848493          	addi	s1,s1,1112
-    80002de4:	fd349de3          	bne	s1,s3,80002dbe <binit+0x54>
+    80002454:	45848493          	addi	s1,s1,1112
+    80002458:	fd349de3          	bne	s1,s3,80002432 <binit+0x54>
   }
 }
-    80002de8:	70a2                	ld	ra,40(sp)
-    80002dea:	7402                	ld	s0,32(sp)
-    80002dec:	64e2                	ld	s1,24(sp)
-    80002dee:	6942                	ld	s2,16(sp)
-    80002df0:	69a2                	ld	s3,8(sp)
-    80002df2:	6a02                	ld	s4,0(sp)
-    80002df4:	6145                	addi	sp,sp,48
-    80002df6:	8082                	ret
+    8000245c:	70a2                	ld	ra,40(sp)
+    8000245e:	7402                	ld	s0,32(sp)
+    80002460:	64e2                	ld	s1,24(sp)
+    80002462:	6942                	ld	s2,16(sp)
+    80002464:	69a2                	ld	s3,8(sp)
+    80002466:	6a02                	ld	s4,0(sp)
+    80002468:	6145                	addi	sp,sp,48
+    8000246a:	8082                	ret
 
-0000000080002df8 <bread>:
+000000008000246c <bread>:
 }
 
 // Return a locked buf with the contents of the indicated block.
 struct buf*
 bread(uint dev, uint blockno)
 {
-    80002df8:	7179                	addi	sp,sp,-48
-    80002dfa:	f406                	sd	ra,40(sp)
-    80002dfc:	f022                	sd	s0,32(sp)
-    80002dfe:	ec26                	sd	s1,24(sp)
-    80002e00:	e84a                	sd	s2,16(sp)
-    80002e02:	e44e                	sd	s3,8(sp)
-    80002e04:	1800                	addi	s0,sp,48
-    80002e06:	892a                	mv	s2,a0
-    80002e08:	89ae                	mv	s3,a1
+    8000246c:	7179                	addi	sp,sp,-48
+    8000246e:	f406                	sd	ra,40(sp)
+    80002470:	f022                	sd	s0,32(sp)
+    80002472:	ec26                	sd	s1,24(sp)
+    80002474:	e84a                	sd	s2,16(sp)
+    80002476:	e44e                	sd	s3,8(sp)
+    80002478:	1800                	addi	s0,sp,48
+    8000247a:	892a                	mv	s2,a0
+    8000247c:	89ae                	mv	s3,a1
   acquire(&bcache.lock);
-    80002e0a:	00015517          	auipc	a0,0x15
-    80002e0e:	97650513          	addi	a0,a0,-1674 # 80017780 <bcache>
-    80002e12:	ffffe097          	auipc	ra,0xffffe
-    80002e16:	dee080e7          	jalr	-530(ra) # 80000c00 <acquire>
+    8000247e:	0000d517          	auipc	a0,0xd
+    80002482:	c1a50513          	addi	a0,a0,-998 # 8000f098 <bcache>
+    80002486:	00004097          	auipc	ra,0x4
+    8000248a:	da2080e7          	jalr	-606(ra) # 80006228 <acquire>
   for(b = bcache.head.next; b != &bcache.head; b = b->next){
-    80002e1a:	0001d497          	auipc	s1,0x1d
-    80002e1e:	c1e4b483          	ld	s1,-994(s1) # 8001fa38 <bcache+0x82b8>
-    80002e22:	0001d797          	auipc	a5,0x1d
-    80002e26:	bc678793          	addi	a5,a5,-1082 # 8001f9e8 <bcache+0x8268>
-    80002e2a:	02f48f63          	beq	s1,a5,80002e68 <bread+0x70>
-    80002e2e:	873e                	mv	a4,a5
-    80002e30:	a021                	j	80002e38 <bread+0x40>
-    80002e32:	68a4                	ld	s1,80(s1)
-    80002e34:	02e48a63          	beq	s1,a4,80002e68 <bread+0x70>
+    8000248e:	00015497          	auipc	s1,0x15
+    80002492:	ec24b483          	ld	s1,-318(s1) # 80017350 <bcache+0x82b8>
+    80002496:	00015797          	auipc	a5,0x15
+    8000249a:	e6a78793          	addi	a5,a5,-406 # 80017300 <bcache+0x8268>
+    8000249e:	02f48f63          	beq	s1,a5,800024dc <bread+0x70>
+    800024a2:	873e                	mv	a4,a5
+    800024a4:	a021                	j	800024ac <bread+0x40>
+    800024a6:	68a4                	ld	s1,80(s1)
+    800024a8:	02e48a63          	beq	s1,a4,800024dc <bread+0x70>
     if(b->dev == dev && b->blockno == blockno){
-    80002e38:	449c                	lw	a5,8(s1)
-    80002e3a:	ff279ce3          	bne	a5,s2,80002e32 <bread+0x3a>
-    80002e3e:	44dc                	lw	a5,12(s1)
-    80002e40:	ff3799e3          	bne	a5,s3,80002e32 <bread+0x3a>
+    800024ac:	449c                	lw	a5,8(s1)
+    800024ae:	ff279ce3          	bne	a5,s2,800024a6 <bread+0x3a>
+    800024b2:	44dc                	lw	a5,12(s1)
+    800024b4:	ff3799e3          	bne	a5,s3,800024a6 <bread+0x3a>
       b->refcnt++;
-    80002e44:	40bc                	lw	a5,64(s1)
-    80002e46:	2785                	addiw	a5,a5,1
-    80002e48:	c0bc                	sw	a5,64(s1)
+    800024b8:	40bc                	lw	a5,64(s1)
+    800024ba:	2785                	addiw	a5,a5,1
+    800024bc:	c0bc                	sw	a5,64(s1)
       release(&bcache.lock);
-    80002e4a:	00015517          	auipc	a0,0x15
-    80002e4e:	93650513          	addi	a0,a0,-1738 # 80017780 <bcache>
-    80002e52:	ffffe097          	auipc	ra,0xffffe
-    80002e56:	e62080e7          	jalr	-414(ra) # 80000cb4 <release>
+    800024be:	0000d517          	auipc	a0,0xd
+    800024c2:	bda50513          	addi	a0,a0,-1062 # 8000f098 <bcache>
+    800024c6:	00004097          	auipc	ra,0x4
+    800024ca:	e16080e7          	jalr	-490(ra) # 800062dc <release>
       acquiresleep(&b->lock);
-    80002e5a:	01048513          	addi	a0,s1,16
-    80002e5e:	00001097          	auipc	ra,0x1
-    80002e62:	45c080e7          	jalr	1116(ra) # 800042ba <acquiresleep>
+    800024ce:	01048513          	addi	a0,s1,16
+    800024d2:	00001097          	auipc	ra,0x1
+    800024d6:	46c080e7          	jalr	1132(ra) # 8000393e <acquiresleep>
       return b;
-    80002e66:	a8b9                	j	80002ec4 <bread+0xcc>
+    800024da:	a8b9                	j	80002538 <bread+0xcc>
   for(b = bcache.head.prev; b != &bcache.head; b = b->prev){
-    80002e68:	0001d497          	auipc	s1,0x1d
-    80002e6c:	bc84b483          	ld	s1,-1080(s1) # 8001fa30 <bcache+0x82b0>
-    80002e70:	0001d797          	auipc	a5,0x1d
-    80002e74:	b7878793          	addi	a5,a5,-1160 # 8001f9e8 <bcache+0x8268>
-    80002e78:	00f48863          	beq	s1,a5,80002e88 <bread+0x90>
-    80002e7c:	873e                	mv	a4,a5
+    800024dc:	00015497          	auipc	s1,0x15
+    800024e0:	e6c4b483          	ld	s1,-404(s1) # 80017348 <bcache+0x82b0>
+    800024e4:	00015797          	auipc	a5,0x15
+    800024e8:	e1c78793          	addi	a5,a5,-484 # 80017300 <bcache+0x8268>
+    800024ec:	00f48863          	beq	s1,a5,800024fc <bread+0x90>
+    800024f0:	873e                	mv	a4,a5
     if(b->refcnt == 0) {
-    80002e7e:	40bc                	lw	a5,64(s1)
-    80002e80:	cf81                	beqz	a5,80002e98 <bread+0xa0>
+    800024f2:	40bc                	lw	a5,64(s1)
+    800024f4:	cf81                	beqz	a5,8000250c <bread+0xa0>
   for(b = bcache.head.prev; b != &bcache.head; b = b->prev){
-    80002e82:	64a4                	ld	s1,72(s1)
-    80002e84:	fee49de3          	bne	s1,a4,80002e7e <bread+0x86>
+    800024f6:	64a4                	ld	s1,72(s1)
+    800024f8:	fee49de3          	bne	s1,a4,800024f2 <bread+0x86>
   panic("bget: no buffers");
-    80002e88:	00005517          	auipc	a0,0x5
-    80002e8c:	66050513          	addi	a0,a0,1632 # 800084e8 <syscalls+0xc0>
-    80002e90:	ffffd097          	auipc	ra,0xffffd
-    80002e94:	6b6080e7          	jalr	1718(ra) # 80000546 <panic>
+    800024fc:	00006517          	auipc	a0,0x6
+    80002500:	14c50513          	addi	a0,a0,332 # 80008648 <syscall_name+0xc8>
+    80002504:	00003097          	auipc	ra,0x3
+    80002508:	7ec080e7          	jalr	2028(ra) # 80005cf0 <panic>
       b->dev = dev;
-    80002e98:	0124a423          	sw	s2,8(s1)
+    8000250c:	0124a423          	sw	s2,8(s1)
       b->blockno = blockno;
-    80002e9c:	0134a623          	sw	s3,12(s1)
+    80002510:	0134a623          	sw	s3,12(s1)
       b->valid = 0;
-    80002ea0:	0004a023          	sw	zero,0(s1)
+    80002514:	0004a023          	sw	zero,0(s1)
       b->refcnt = 1;
-    80002ea4:	4785                	li	a5,1
-    80002ea6:	c0bc                	sw	a5,64(s1)
+    80002518:	4785                	li	a5,1
+    8000251a:	c0bc                	sw	a5,64(s1)
       release(&bcache.lock);
-    80002ea8:	00015517          	auipc	a0,0x15
-    80002eac:	8d850513          	addi	a0,a0,-1832 # 80017780 <bcache>
-    80002eb0:	ffffe097          	auipc	ra,0xffffe
-    80002eb4:	e04080e7          	jalr	-508(ra) # 80000cb4 <release>
+    8000251c:	0000d517          	auipc	a0,0xd
+    80002520:	b7c50513          	addi	a0,a0,-1156 # 8000f098 <bcache>
+    80002524:	00004097          	auipc	ra,0x4
+    80002528:	db8080e7          	jalr	-584(ra) # 800062dc <release>
       acquiresleep(&b->lock);
-    80002eb8:	01048513          	addi	a0,s1,16
-    80002ebc:	00001097          	auipc	ra,0x1
-    80002ec0:	3fe080e7          	jalr	1022(ra) # 800042ba <acquiresleep>
+    8000252c:	01048513          	addi	a0,s1,16
+    80002530:	00001097          	auipc	ra,0x1
+    80002534:	40e080e7          	jalr	1038(ra) # 8000393e <acquiresleep>
   struct buf *b;
 
   b = bget(dev, blockno);
   if(!b->valid) {
-    80002ec4:	409c                	lw	a5,0(s1)
-    80002ec6:	cb89                	beqz	a5,80002ed8 <bread+0xe0>
+    80002538:	409c                	lw	a5,0(s1)
+    8000253a:	cb89                	beqz	a5,8000254c <bread+0xe0>
     virtio_disk_rw(b, 0);
     b->valid = 1;
   }
   return b;
 }
-    80002ec8:	8526                	mv	a0,s1
-    80002eca:	70a2                	ld	ra,40(sp)
-    80002ecc:	7402                	ld	s0,32(sp)
-    80002ece:	64e2                	ld	s1,24(sp)
-    80002ed0:	6942                	ld	s2,16(sp)
-    80002ed2:	69a2                	ld	s3,8(sp)
-    80002ed4:	6145                	addi	sp,sp,48
-    80002ed6:	8082                	ret
+    8000253c:	8526                	mv	a0,s1
+    8000253e:	70a2                	ld	ra,40(sp)
+    80002540:	7402                	ld	s0,32(sp)
+    80002542:	64e2                	ld	s1,24(sp)
+    80002544:	6942                	ld	s2,16(sp)
+    80002546:	69a2                	ld	s3,8(sp)
+    80002548:	6145                	addi	sp,sp,48
+    8000254a:	8082                	ret
     virtio_disk_rw(b, 0);
-    80002ed8:	4581                	li	a1,0
-    80002eda:	8526                	mv	a0,s1
-    80002edc:	00003097          	auipc	ra,0x3
-    80002ee0:	f2c080e7          	jalr	-212(ra) # 80005e08 <virtio_disk_rw>
+    8000254c:	4581                	li	a1,0
+    8000254e:	8526                	mv	a0,s1
+    80002550:	00003097          	auipc	ra,0x3
+    80002554:	f32080e7          	jalr	-206(ra) # 80005482 <virtio_disk_rw>
     b->valid = 1;
-    80002ee4:	4785                	li	a5,1
-    80002ee6:	c09c                	sw	a5,0(s1)
+    80002558:	4785                	li	a5,1
+    8000255a:	c09c                	sw	a5,0(s1)
   return b;
-    80002ee8:	b7c5                	j	80002ec8 <bread+0xd0>
+    8000255c:	b7c5                	j	8000253c <bread+0xd0>
 
-0000000080002eea <bwrite>:
+000000008000255e <bwrite>:
 
 // Write b's contents to disk.  Must be locked.
 void
 bwrite(struct buf *b)
 {
-    80002eea:	1101                	addi	sp,sp,-32
-    80002eec:	ec06                	sd	ra,24(sp)
-    80002eee:	e822                	sd	s0,16(sp)
-    80002ef0:	e426                	sd	s1,8(sp)
-    80002ef2:	1000                	addi	s0,sp,32
-    80002ef4:	84aa                	mv	s1,a0
+    8000255e:	1101                	addi	sp,sp,-32
+    80002560:	ec06                	sd	ra,24(sp)
+    80002562:	e822                	sd	s0,16(sp)
+    80002564:	e426                	sd	s1,8(sp)
+    80002566:	1000                	addi	s0,sp,32
+    80002568:	84aa                	mv	s1,a0
   if(!holdingsleep(&b->lock))
-    80002ef6:	0541                	addi	a0,a0,16
-    80002ef8:	00001097          	auipc	ra,0x1
-    80002efc:	45c080e7          	jalr	1116(ra) # 80004354 <holdingsleep>
-    80002f00:	cd01                	beqz	a0,80002f18 <bwrite+0x2e>
+    8000256a:	0541                	addi	a0,a0,16
+    8000256c:	00001097          	auipc	ra,0x1
+    80002570:	46c080e7          	jalr	1132(ra) # 800039d8 <holdingsleep>
+    80002574:	cd01                	beqz	a0,8000258c <bwrite+0x2e>
     panic("bwrite");
   virtio_disk_rw(b, 1);
-    80002f02:	4585                	li	a1,1
-    80002f04:	8526                	mv	a0,s1
-    80002f06:	00003097          	auipc	ra,0x3
-    80002f0a:	f02080e7          	jalr	-254(ra) # 80005e08 <virtio_disk_rw>
-}
-    80002f0e:	60e2                	ld	ra,24(sp)
-    80002f10:	6442                	ld	s0,16(sp)
-    80002f12:	64a2                	ld	s1,8(sp)
-    80002f14:	6105                	addi	sp,sp,32
-    80002f16:	8082                	ret
+    80002576:	4585                	li	a1,1
+    80002578:	8526                	mv	a0,s1
+    8000257a:	00003097          	auipc	ra,0x3
+    8000257e:	f08080e7          	jalr	-248(ra) # 80005482 <virtio_disk_rw>
+}
+    80002582:	60e2                	ld	ra,24(sp)
+    80002584:	6442                	ld	s0,16(sp)
+    80002586:	64a2                	ld	s1,8(sp)
+    80002588:	6105                	addi	sp,sp,32
+    8000258a:	8082                	ret
     panic("bwrite");
-    80002f18:	00005517          	auipc	a0,0x5
-    80002f1c:	5e850513          	addi	a0,a0,1512 # 80008500 <syscalls+0xd8>
-    80002f20:	ffffd097          	auipc	ra,0xffffd
-    80002f24:	626080e7          	jalr	1574(ra) # 80000546 <panic>
+    8000258c:	00006517          	auipc	a0,0x6
+    80002590:	0d450513          	addi	a0,a0,212 # 80008660 <syscall_name+0xe0>
+    80002594:	00003097          	auipc	ra,0x3
+    80002598:	75c080e7          	jalr	1884(ra) # 80005cf0 <panic>
 
-0000000080002f28 <brelse>:
+000000008000259c <brelse>:
 
 // Release a locked buffer.
 // Move to the head of the most-recently-used list.
 void
 brelse(struct buf *b)
 {
-    80002f28:	1101                	addi	sp,sp,-32
-    80002f2a:	ec06                	sd	ra,24(sp)
-    80002f2c:	e822                	sd	s0,16(sp)
-    80002f2e:	e426                	sd	s1,8(sp)
-    80002f30:	e04a                	sd	s2,0(sp)
-    80002f32:	1000                	addi	s0,sp,32
-    80002f34:	84aa                	mv	s1,a0
+    8000259c:	1101                	addi	sp,sp,-32
+    8000259e:	ec06                	sd	ra,24(sp)
+    800025a0:	e822                	sd	s0,16(sp)
+    800025a2:	e426                	sd	s1,8(sp)
+    800025a4:	e04a                	sd	s2,0(sp)
+    800025a6:	1000                	addi	s0,sp,32
+    800025a8:	84aa                	mv	s1,a0
   if(!holdingsleep(&b->lock))
-    80002f36:	01050913          	addi	s2,a0,16
-    80002f3a:	854a                	mv	a0,s2
-    80002f3c:	00001097          	auipc	ra,0x1
-    80002f40:	418080e7          	jalr	1048(ra) # 80004354 <holdingsleep>
-    80002f44:	c92d                	beqz	a0,80002fb6 <brelse+0x8e>
+    800025aa:	01050913          	addi	s2,a0,16
+    800025ae:	854a                	mv	a0,s2
+    800025b0:	00001097          	auipc	ra,0x1
+    800025b4:	428080e7          	jalr	1064(ra) # 800039d8 <holdingsleep>
+    800025b8:	c92d                	beqz	a0,8000262a <brelse+0x8e>
     panic("brelse");
 
   releasesleep(&b->lock);
-    80002f46:	854a                	mv	a0,s2
-    80002f48:	00001097          	auipc	ra,0x1
-    80002f4c:	3c8080e7          	jalr	968(ra) # 80004310 <releasesleep>
+    800025ba:	854a                	mv	a0,s2
+    800025bc:	00001097          	auipc	ra,0x1
+    800025c0:	3d8080e7          	jalr	984(ra) # 80003994 <releasesleep>
 
   acquire(&bcache.lock);
-    80002f50:	00015517          	auipc	a0,0x15
-    80002f54:	83050513          	addi	a0,a0,-2000 # 80017780 <bcache>
-    80002f58:	ffffe097          	auipc	ra,0xffffe
-    80002f5c:	ca8080e7          	jalr	-856(ra) # 80000c00 <acquire>
+    800025c4:	0000d517          	auipc	a0,0xd
+    800025c8:	ad450513          	addi	a0,a0,-1324 # 8000f098 <bcache>
+    800025cc:	00004097          	auipc	ra,0x4
+    800025d0:	c5c080e7          	jalr	-932(ra) # 80006228 <acquire>
   b->refcnt--;
-    80002f60:	40bc                	lw	a5,64(s1)
-    80002f62:	37fd                	addiw	a5,a5,-1
-    80002f64:	0007871b          	sext.w	a4,a5
-    80002f68:	c0bc                	sw	a5,64(s1)
+    800025d4:	40bc                	lw	a5,64(s1)
+    800025d6:	37fd                	addiw	a5,a5,-1
+    800025d8:	0007871b          	sext.w	a4,a5
+    800025dc:	c0bc                	sw	a5,64(s1)
   if (b->refcnt == 0) {
-    80002f6a:	eb05                	bnez	a4,80002f9a <brelse+0x72>
+    800025de:	eb05                	bnez	a4,8000260e <brelse+0x72>
     // no one is waiting for it.
     b->next->prev = b->prev;
-    80002f6c:	68bc                	ld	a5,80(s1)
-    80002f6e:	64b8                	ld	a4,72(s1)
-    80002f70:	e7b8                	sd	a4,72(a5)
+    800025e0:	68bc                	ld	a5,80(s1)
+    800025e2:	64b8                	ld	a4,72(s1)
+    800025e4:	e7b8                	sd	a4,72(a5)
     b->prev->next = b->next;
-    80002f72:	64bc                	ld	a5,72(s1)
-    80002f74:	68b8                	ld	a4,80(s1)
-    80002f76:	ebb8                	sd	a4,80(a5)
+    800025e6:	64bc                	ld	a5,72(s1)
+    800025e8:	68b8                	ld	a4,80(s1)
+    800025ea:	ebb8                	sd	a4,80(a5)
     b->next = bcache.head.next;
-    80002f78:	0001d797          	auipc	a5,0x1d
-    80002f7c:	80878793          	addi	a5,a5,-2040 # 8001f780 <bcache+0x8000>
-    80002f80:	2b87b703          	ld	a4,696(a5)
-    80002f84:	e8b8                	sd	a4,80(s1)
+    800025ec:	00015797          	auipc	a5,0x15
+    800025f0:	aac78793          	addi	a5,a5,-1364 # 80017098 <bcache+0x8000>
+    800025f4:	2b87b703          	ld	a4,696(a5)
+    800025f8:	e8b8                	sd	a4,80(s1)
     b->prev = &bcache.head;
-    80002f86:	0001d717          	auipc	a4,0x1d
-    80002f8a:	a6270713          	addi	a4,a4,-1438 # 8001f9e8 <bcache+0x8268>
-    80002f8e:	e4b8                	sd	a4,72(s1)
+    800025fa:	00015717          	auipc	a4,0x15
+    800025fe:	d0670713          	addi	a4,a4,-762 # 80017300 <bcache+0x8268>
+    80002602:	e4b8                	sd	a4,72(s1)
     bcache.head.next->prev = b;
-    80002f90:	2b87b703          	ld	a4,696(a5)
-    80002f94:	e724                	sd	s1,72(a4)
+    80002604:	2b87b703          	ld	a4,696(a5)
+    80002608:	e724                	sd	s1,72(a4)
     bcache.head.next = b;
-    80002f96:	2a97bc23          	sd	s1,696(a5)
+    8000260a:	2a97bc23          	sd	s1,696(a5)
   }
   
   release(&bcache.lock);
-    80002f9a:	00014517          	auipc	a0,0x14
-    80002f9e:	7e650513          	addi	a0,a0,2022 # 80017780 <bcache>
-    80002fa2:	ffffe097          	auipc	ra,0xffffe
-    80002fa6:	d12080e7          	jalr	-750(ra) # 80000cb4 <release>
-}
-    80002faa:	60e2                	ld	ra,24(sp)
-    80002fac:	6442                	ld	s0,16(sp)
-    80002fae:	64a2                	ld	s1,8(sp)
-    80002fb0:	6902                	ld	s2,0(sp)
-    80002fb2:	6105                	addi	sp,sp,32
-    80002fb4:	8082                	ret
+    8000260e:	0000d517          	auipc	a0,0xd
+    80002612:	a8a50513          	addi	a0,a0,-1398 # 8000f098 <bcache>
+    80002616:	00004097          	auipc	ra,0x4
+    8000261a:	cc6080e7          	jalr	-826(ra) # 800062dc <release>
+}
+    8000261e:	60e2                	ld	ra,24(sp)
+    80002620:	6442                	ld	s0,16(sp)
+    80002622:	64a2                	ld	s1,8(sp)
+    80002624:	6902                	ld	s2,0(sp)
+    80002626:	6105                	addi	sp,sp,32
+    80002628:	8082                	ret
     panic("brelse");
-    80002fb6:	00005517          	auipc	a0,0x5
-    80002fba:	55250513          	addi	a0,a0,1362 # 80008508 <syscalls+0xe0>
-    80002fbe:	ffffd097          	auipc	ra,0xffffd
-    80002fc2:	588080e7          	jalr	1416(ra) # 80000546 <panic>
+    8000262a:	00006517          	auipc	a0,0x6
+    8000262e:	03e50513          	addi	a0,a0,62 # 80008668 <syscall_name+0xe8>
+    80002632:	00003097          	auipc	ra,0x3
+    80002636:	6be080e7          	jalr	1726(ra) # 80005cf0 <panic>
 
-0000000080002fc6 <bpin>:
+000000008000263a <bpin>:
 
 void
 bpin(struct buf *b) {
-    80002fc6:	1101                	addi	sp,sp,-32
-    80002fc8:	ec06                	sd	ra,24(sp)
-    80002fca:	e822                	sd	s0,16(sp)
-    80002fcc:	e426                	sd	s1,8(sp)
-    80002fce:	1000                	addi	s0,sp,32
-    80002fd0:	84aa                	mv	s1,a0
+    8000263a:	1101                	addi	sp,sp,-32
+    8000263c:	ec06                	sd	ra,24(sp)
+    8000263e:	e822                	sd	s0,16(sp)
+    80002640:	e426                	sd	s1,8(sp)
+    80002642:	1000                	addi	s0,sp,32
+    80002644:	84aa                	mv	s1,a0
   acquire(&bcache.lock);
-    80002fd2:	00014517          	auipc	a0,0x14
-    80002fd6:	7ae50513          	addi	a0,a0,1966 # 80017780 <bcache>
-    80002fda:	ffffe097          	auipc	ra,0xffffe
-    80002fde:	c26080e7          	jalr	-986(ra) # 80000c00 <acquire>
+    80002646:	0000d517          	auipc	a0,0xd
+    8000264a:	a5250513          	addi	a0,a0,-1454 # 8000f098 <bcache>
+    8000264e:	00004097          	auipc	ra,0x4
+    80002652:	bda080e7          	jalr	-1062(ra) # 80006228 <acquire>
   b->refcnt++;
-    80002fe2:	40bc                	lw	a5,64(s1)
-    80002fe4:	2785                	addiw	a5,a5,1
-    80002fe6:	c0bc                	sw	a5,64(s1)
+    80002656:	40bc                	lw	a5,64(s1)
+    80002658:	2785                	addiw	a5,a5,1
+    8000265a:	c0bc                	sw	a5,64(s1)
   release(&bcache.lock);
-    80002fe8:	00014517          	auipc	a0,0x14
-    80002fec:	79850513          	addi	a0,a0,1944 # 80017780 <bcache>
-    80002ff0:	ffffe097          	auipc	ra,0xffffe
-    80002ff4:	cc4080e7          	jalr	-828(ra) # 80000cb4 <release>
-}
-    80002ff8:	60e2                	ld	ra,24(sp)
-    80002ffa:	6442                	ld	s0,16(sp)
-    80002ffc:	64a2                	ld	s1,8(sp)
-    80002ffe:	6105                	addi	sp,sp,32
-    80003000:	8082                	ret
+    8000265c:	0000d517          	auipc	a0,0xd
+    80002660:	a3c50513          	addi	a0,a0,-1476 # 8000f098 <bcache>
+    80002664:	00004097          	auipc	ra,0x4
+    80002668:	c78080e7          	jalr	-904(ra) # 800062dc <release>
+}
+    8000266c:	60e2                	ld	ra,24(sp)
+    8000266e:	6442                	ld	s0,16(sp)
+    80002670:	64a2                	ld	s1,8(sp)
+    80002672:	6105                	addi	sp,sp,32
+    80002674:	8082                	ret
 
-0000000080003002 <bunpin>:
+0000000080002676 <bunpin>:
 
 void
 bunpin(struct buf *b) {
-    80003002:	1101                	addi	sp,sp,-32
-    80003004:	ec06                	sd	ra,24(sp)
-    80003006:	e822                	sd	s0,16(sp)
-    80003008:	e426                	sd	s1,8(sp)
-    8000300a:	1000                	addi	s0,sp,32
-    8000300c:	84aa                	mv	s1,a0
+    80002676:	1101                	addi	sp,sp,-32
+    80002678:	ec06                	sd	ra,24(sp)
+    8000267a:	e822                	sd	s0,16(sp)
+    8000267c:	e426                	sd	s1,8(sp)
+    8000267e:	1000                	addi	s0,sp,32
+    80002680:	84aa                	mv	s1,a0
   acquire(&bcache.lock);
-    8000300e:	00014517          	auipc	a0,0x14
-    80003012:	77250513          	addi	a0,a0,1906 # 80017780 <bcache>
-    80003016:	ffffe097          	auipc	ra,0xffffe
-    8000301a:	bea080e7          	jalr	-1046(ra) # 80000c00 <acquire>
+    80002682:	0000d517          	auipc	a0,0xd
+    80002686:	a1650513          	addi	a0,a0,-1514 # 8000f098 <bcache>
+    8000268a:	00004097          	auipc	ra,0x4
+    8000268e:	b9e080e7          	jalr	-1122(ra) # 80006228 <acquire>
   b->refcnt--;
-    8000301e:	40bc                	lw	a5,64(s1)
-    80003020:	37fd                	addiw	a5,a5,-1
-    80003022:	c0bc                	sw	a5,64(s1)
+    80002692:	40bc                	lw	a5,64(s1)
+    80002694:	37fd                	addiw	a5,a5,-1
+    80002696:	c0bc                	sw	a5,64(s1)
   release(&bcache.lock);
-    80003024:	00014517          	auipc	a0,0x14
-    80003028:	75c50513          	addi	a0,a0,1884 # 80017780 <bcache>
-    8000302c:	ffffe097          	auipc	ra,0xffffe
-    80003030:	c88080e7          	jalr	-888(ra) # 80000cb4 <release>
-}
-    80003034:	60e2                	ld	ra,24(sp)
-    80003036:	6442                	ld	s0,16(sp)
-    80003038:	64a2                	ld	s1,8(sp)
-    8000303a:	6105                	addi	sp,sp,32
-    8000303c:	8082                	ret
+    80002698:	0000d517          	auipc	a0,0xd
+    8000269c:	a0050513          	addi	a0,a0,-1536 # 8000f098 <bcache>
+    800026a0:	00004097          	auipc	ra,0x4
+    800026a4:	c3c080e7          	jalr	-964(ra) # 800062dc <release>
+}
+    800026a8:	60e2                	ld	ra,24(sp)
+    800026aa:	6442                	ld	s0,16(sp)
+    800026ac:	64a2                	ld	s1,8(sp)
+    800026ae:	6105                	addi	sp,sp,32
+    800026b0:	8082                	ret
 
-000000008000303e <bfree>:
+00000000800026b2 <bfree>:
 }
 
 // Free a disk block.
 static void
 bfree(int dev, uint b)
 {
-    8000303e:	1101                	addi	sp,sp,-32
-    80003040:	ec06                	sd	ra,24(sp)
-    80003042:	e822                	sd	s0,16(sp)
-    80003044:	e426                	sd	s1,8(sp)
-    80003046:	e04a                	sd	s2,0(sp)
-    80003048:	1000                	addi	s0,sp,32
-    8000304a:	84ae                	mv	s1,a1
+    800026b2:	1101                	addi	sp,sp,-32
+    800026b4:	ec06                	sd	ra,24(sp)
+    800026b6:	e822                	sd	s0,16(sp)
+    800026b8:	e426                	sd	s1,8(sp)
+    800026ba:	e04a                	sd	s2,0(sp)
+    800026bc:	1000                	addi	s0,sp,32
+    800026be:	84ae                	mv	s1,a1
   struct buf *bp;
   int bi, m;
 
   bp = bread(dev, BBLOCK(b, sb));
-    8000304c:	00d5d59b          	srliw	a1,a1,0xd
-    80003050:	0001d797          	auipc	a5,0x1d
-    80003054:	e0c7a783          	lw	a5,-500(a5) # 8001fe5c <sb+0x1c>
-    80003058:	9dbd                	addw	a1,a1,a5
-    8000305a:	00000097          	auipc	ra,0x0
-    8000305e:	d9e080e7          	jalr	-610(ra) # 80002df8 <bread>
+    800026c0:	00d5d59b          	srliw	a1,a1,0xd
+    800026c4:	00015797          	auipc	a5,0x15
+    800026c8:	0b07a783          	lw	a5,176(a5) # 80017774 <sb+0x1c>
+    800026cc:	9dbd                	addw	a1,a1,a5
+    800026ce:	00000097          	auipc	ra,0x0
+    800026d2:	d9e080e7          	jalr	-610(ra) # 8000246c <bread>
   bi = b % BPB;
   m = 1 << (bi % 8);
-    80003062:	0074f713          	andi	a4,s1,7
-    80003066:	4785                	li	a5,1
-    80003068:	00e797bb          	sllw	a5,a5,a4
+    800026d6:	0074f713          	andi	a4,s1,7
+    800026da:	4785                	li	a5,1
+    800026dc:	00e797bb          	sllw	a5,a5,a4
   if((bp->data[bi/8] & m) == 0)
-    8000306c:	14ce                	slli	s1,s1,0x33
-    8000306e:	90d9                	srli	s1,s1,0x36
-    80003070:	00950733          	add	a4,a0,s1
-    80003074:	05874703          	lbu	a4,88(a4)
-    80003078:	00e7f6b3          	and	a3,a5,a4
-    8000307c:	c69d                	beqz	a3,800030aa <bfree+0x6c>
-    8000307e:	892a                	mv	s2,a0
+    800026e0:	14ce                	slli	s1,s1,0x33
+    800026e2:	90d9                	srli	s1,s1,0x36
+    800026e4:	00950733          	add	a4,a0,s1
+    800026e8:	05874703          	lbu	a4,88(a4)
+    800026ec:	00e7f6b3          	and	a3,a5,a4
+    800026f0:	c69d                	beqz	a3,8000271e <bfree+0x6c>
+    800026f2:	892a                	mv	s2,a0
     panic("freeing free block");
   bp->data[bi/8] &= ~m;
-    80003080:	94aa                	add	s1,s1,a0
-    80003082:	fff7c793          	not	a5,a5
-    80003086:	8f7d                	and	a4,a4,a5
-    80003088:	04e48c23          	sb	a4,88(s1)
+    800026f4:	94aa                	add	s1,s1,a0
+    800026f6:	fff7c793          	not	a5,a5
+    800026fa:	8f7d                	and	a4,a4,a5
+    800026fc:	04e48c23          	sb	a4,88(s1)
   log_write(bp);
-    8000308c:	00001097          	auipc	ra,0x1
-    80003090:	108080e7          	jalr	264(ra) # 80004194 <log_write>
+    80002700:	00001097          	auipc	ra,0x1
+    80002704:	120080e7          	jalr	288(ra) # 80003820 <log_write>
   brelse(bp);
-    80003094:	854a                	mv	a0,s2
-    80003096:	00000097          	auipc	ra,0x0
-    8000309a:	e92080e7          	jalr	-366(ra) # 80002f28 <brelse>
-}
-    8000309e:	60e2                	ld	ra,24(sp)
-    800030a0:	6442                	ld	s0,16(sp)
-    800030a2:	64a2                	ld	s1,8(sp)
-    800030a4:	6902                	ld	s2,0(sp)
-    800030a6:	6105                	addi	sp,sp,32
-    800030a8:	8082                	ret
+    80002708:	854a                	mv	a0,s2
+    8000270a:	00000097          	auipc	ra,0x0
+    8000270e:	e92080e7          	jalr	-366(ra) # 8000259c <brelse>
+}
+    80002712:	60e2                	ld	ra,24(sp)
+    80002714:	6442                	ld	s0,16(sp)
+    80002716:	64a2                	ld	s1,8(sp)
+    80002718:	6902                	ld	s2,0(sp)
+    8000271a:	6105                	addi	sp,sp,32
+    8000271c:	8082                	ret
     panic("freeing free block");
-    800030aa:	00005517          	auipc	a0,0x5
-    800030ae:	46650513          	addi	a0,a0,1126 # 80008510 <syscalls+0xe8>
-    800030b2:	ffffd097          	auipc	ra,0xffffd
-    800030b6:	494080e7          	jalr	1172(ra) # 80000546 <panic>
-
-00000000800030ba <balloc>:
-{
-    800030ba:	711d                	addi	sp,sp,-96
-    800030bc:	ec86                	sd	ra,88(sp)
-    800030be:	e8a2                	sd	s0,80(sp)
-    800030c0:	e4a6                	sd	s1,72(sp)
-    800030c2:	e0ca                	sd	s2,64(sp)
-    800030c4:	fc4e                	sd	s3,56(sp)
-    800030c6:	f852                	sd	s4,48(sp)
-    800030c8:	f456                	sd	s5,40(sp)
-    800030ca:	f05a                	sd	s6,32(sp)
-    800030cc:	ec5e                	sd	s7,24(sp)
-    800030ce:	e862                	sd	s8,16(sp)
-    800030d0:	e466                	sd	s9,8(sp)
-    800030d2:	1080                	addi	s0,sp,96
+    8000271e:	00006517          	auipc	a0,0x6
+    80002722:	f5250513          	addi	a0,a0,-174 # 80008670 <syscall_name+0xf0>
+    80002726:	00003097          	auipc	ra,0x3
+    8000272a:	5ca080e7          	jalr	1482(ra) # 80005cf0 <panic>
+
+000000008000272e <balloc>:
+{
+    8000272e:	711d                	addi	sp,sp,-96
+    80002730:	ec86                	sd	ra,88(sp)
+    80002732:	e8a2                	sd	s0,80(sp)
+    80002734:	e4a6                	sd	s1,72(sp)
+    80002736:	e0ca                	sd	s2,64(sp)
+    80002738:	fc4e                	sd	s3,56(sp)
+    8000273a:	f852                	sd	s4,48(sp)
+    8000273c:	f456                	sd	s5,40(sp)
+    8000273e:	f05a                	sd	s6,32(sp)
+    80002740:	ec5e                	sd	s7,24(sp)
+    80002742:	e862                	sd	s8,16(sp)
+    80002744:	e466                	sd	s9,8(sp)
+    80002746:	1080                	addi	s0,sp,96
   for(b = 0; b < sb.size; b += BPB){
-    800030d4:	0001d797          	auipc	a5,0x1d
-    800030d8:	d707a783          	lw	a5,-656(a5) # 8001fe44 <sb+0x4>
-    800030dc:	cbc1                	beqz	a5,8000316c <balloc+0xb2>
-    800030de:	8baa                	mv	s7,a0
-    800030e0:	4a81                	li	s5,0
+    80002748:	00015797          	auipc	a5,0x15
+    8000274c:	0147a783          	lw	a5,20(a5) # 8001775c <sb+0x4>
+    80002750:	cbc1                	beqz	a5,800027e0 <balloc+0xb2>
+    80002752:	8baa                	mv	s7,a0
+    80002754:	4a81                	li	s5,0
     bp = bread(dev, BBLOCK(b, sb));
-    800030e2:	0001db17          	auipc	s6,0x1d
-    800030e6:	d5eb0b13          	addi	s6,s6,-674 # 8001fe40 <sb>
+    80002756:	00015b17          	auipc	s6,0x15
+    8000275a:	002b0b13          	addi	s6,s6,2 # 80017758 <sb>
     for(bi = 0; bi < BPB && b + bi < sb.size; bi++){
-    800030ea:	4c01                	li	s8,0
+    8000275e:	4c01                	li	s8,0
       m = 1 << (bi % 8);
-    800030ec:	4985                	li	s3,1
+    80002760:	4985                	li	s3,1
     for(bi = 0; bi < BPB && b + bi < sb.size; bi++){
-    800030ee:	6a09                	lui	s4,0x2
+    80002762:	6a09                	lui	s4,0x2
   for(b = 0; b < sb.size; b += BPB){
-    800030f0:	6c89                	lui	s9,0x2
-    800030f2:	a831                	j	8000310e <balloc+0x54>
+    80002764:	6c89                	lui	s9,0x2
+    80002766:	a831                	j	80002782 <balloc+0x54>
     brelse(bp);
-    800030f4:	854a                	mv	a0,s2
-    800030f6:	00000097          	auipc	ra,0x0
-    800030fa:	e32080e7          	jalr	-462(ra) # 80002f28 <brelse>
+    80002768:	854a                	mv	a0,s2
+    8000276a:	00000097          	auipc	ra,0x0
+    8000276e:	e32080e7          	jalr	-462(ra) # 8000259c <brelse>
   for(b = 0; b < sb.size; b += BPB){
-    800030fe:	015c87bb          	addw	a5,s9,s5
-    80003102:	00078a9b          	sext.w	s5,a5
-    80003106:	004b2703          	lw	a4,4(s6)
-    8000310a:	06eaf163          	bgeu	s5,a4,8000316c <balloc+0xb2>
+    80002772:	015c87bb          	addw	a5,s9,s5
+    80002776:	00078a9b          	sext.w	s5,a5
+    8000277a:	004b2703          	lw	a4,4(s6)
+    8000277e:	06eaf163          	bgeu	s5,a4,800027e0 <balloc+0xb2>
     bp = bread(dev, BBLOCK(b, sb));
-    8000310e:	41fad79b          	sraiw	a5,s5,0x1f
-    80003112:	0137d79b          	srliw	a5,a5,0x13
-    80003116:	015787bb          	addw	a5,a5,s5
-    8000311a:	40d7d79b          	sraiw	a5,a5,0xd
-    8000311e:	01cb2583          	lw	a1,28(s6)
-    80003122:	9dbd                	addw	a1,a1,a5
-    80003124:	855e                	mv	a0,s7
-    80003126:	00000097          	auipc	ra,0x0
-    8000312a:	cd2080e7          	jalr	-814(ra) # 80002df8 <bread>
-    8000312e:	892a                	mv	s2,a0
+    80002782:	41fad79b          	sraiw	a5,s5,0x1f
+    80002786:	0137d79b          	srliw	a5,a5,0x13
+    8000278a:	015787bb          	addw	a5,a5,s5
+    8000278e:	40d7d79b          	sraiw	a5,a5,0xd
+    80002792:	01cb2583          	lw	a1,28(s6)
+    80002796:	9dbd                	addw	a1,a1,a5
+    80002798:	855e                	mv	a0,s7
+    8000279a:	00000097          	auipc	ra,0x0
+    8000279e:	cd2080e7          	jalr	-814(ra) # 8000246c <bread>
+    800027a2:	892a                	mv	s2,a0
     for(bi = 0; bi < BPB && b + bi < sb.size; bi++){
-    80003130:	004b2503          	lw	a0,4(s6)
-    80003134:	000a849b          	sext.w	s1,s5
-    80003138:	8762                	mv	a4,s8
-    8000313a:	faa4fde3          	bgeu	s1,a0,800030f4 <balloc+0x3a>
+    800027a4:	004b2503          	lw	a0,4(s6)
+    800027a8:	000a849b          	sext.w	s1,s5
+    800027ac:	8762                	mv	a4,s8
+    800027ae:	faa4fde3          	bgeu	s1,a0,80002768 <balloc+0x3a>
       m = 1 << (bi % 8);
-    8000313e:	00777693          	andi	a3,a4,7
-    80003142:	00d996bb          	sllw	a3,s3,a3
+    800027b2:	00777693          	andi	a3,a4,7
+    800027b6:	00d996bb          	sllw	a3,s3,a3
       if((bp->data[bi/8] & m) == 0){  // Is block free?
-    80003146:	41f7579b          	sraiw	a5,a4,0x1f
-    8000314a:	01d7d79b          	srliw	a5,a5,0x1d
-    8000314e:	9fb9                	addw	a5,a5,a4
-    80003150:	4037d79b          	sraiw	a5,a5,0x3
-    80003154:	00f90633          	add	a2,s2,a5
-    80003158:	05864603          	lbu	a2,88(a2)
-    8000315c:	00c6f5b3          	and	a1,a3,a2
-    80003160:	cd91                	beqz	a1,8000317c <balloc+0xc2>
+    800027ba:	41f7579b          	sraiw	a5,a4,0x1f
+    800027be:	01d7d79b          	srliw	a5,a5,0x1d
+    800027c2:	9fb9                	addw	a5,a5,a4
+    800027c4:	4037d79b          	sraiw	a5,a5,0x3
+    800027c8:	00f90633          	add	a2,s2,a5
+    800027cc:	05864603          	lbu	a2,88(a2)
+    800027d0:	00c6f5b3          	and	a1,a3,a2
+    800027d4:	cd91                	beqz	a1,800027f0 <balloc+0xc2>
     for(bi = 0; bi < BPB && b + bi < sb.size; bi++){
-    80003162:	2705                	addiw	a4,a4,1
-    80003164:	2485                	addiw	s1,s1,1
-    80003166:	fd471ae3          	bne	a4,s4,8000313a <balloc+0x80>
-    8000316a:	b769                	j	800030f4 <balloc+0x3a>
+    800027d6:	2705                	addiw	a4,a4,1
+    800027d8:	2485                	addiw	s1,s1,1
+    800027da:	fd471ae3          	bne	a4,s4,800027ae <balloc+0x80>
+    800027de:	b769                	j	80002768 <balloc+0x3a>
   panic("balloc: out of blocks");
-    8000316c:	00005517          	auipc	a0,0x5
-    80003170:	3bc50513          	addi	a0,a0,956 # 80008528 <syscalls+0x100>
-    80003174:	ffffd097          	auipc	ra,0xffffd
-    80003178:	3d2080e7          	jalr	978(ra) # 80000546 <panic>
+    800027e0:	00006517          	auipc	a0,0x6
+    800027e4:	ea850513          	addi	a0,a0,-344 # 80008688 <syscall_name+0x108>
+    800027e8:	00003097          	auipc	ra,0x3
+    800027ec:	508080e7          	jalr	1288(ra) # 80005cf0 <panic>
         bp->data[bi/8] |= m;  // Mark block in use.
-    8000317c:	97ca                	add	a5,a5,s2
-    8000317e:	8e55                	or	a2,a2,a3
-    80003180:	04c78c23          	sb	a2,88(a5)
+    800027f0:	97ca                	add	a5,a5,s2
+    800027f2:	8e55                	or	a2,a2,a3
+    800027f4:	04c78c23          	sb	a2,88(a5)
         log_write(bp);
-    80003184:	854a                	mv	a0,s2
-    80003186:	00001097          	auipc	ra,0x1
-    8000318a:	00e080e7          	jalr	14(ra) # 80004194 <log_write>
+    800027f8:	854a                	mv	a0,s2
+    800027fa:	00001097          	auipc	ra,0x1
+    800027fe:	026080e7          	jalr	38(ra) # 80003820 <log_write>
         brelse(bp);
-    8000318e:	854a                	mv	a0,s2
-    80003190:	00000097          	auipc	ra,0x0
-    80003194:	d98080e7          	jalr	-616(ra) # 80002f28 <brelse>
+    80002802:	854a                	mv	a0,s2
+    80002804:	00000097          	auipc	ra,0x0
+    80002808:	d98080e7          	jalr	-616(ra) # 8000259c <brelse>
   bp = bread(dev, bno);
-    80003198:	85a6                	mv	a1,s1
-    8000319a:	855e                	mv	a0,s7
-    8000319c:	00000097          	auipc	ra,0x0
-    800031a0:	c5c080e7          	jalr	-932(ra) # 80002df8 <bread>
-    800031a4:	892a                	mv	s2,a0
+    8000280c:	85a6                	mv	a1,s1
+    8000280e:	855e                	mv	a0,s7
+    80002810:	00000097          	auipc	ra,0x0
+    80002814:	c5c080e7          	jalr	-932(ra) # 8000246c <bread>
+    80002818:	892a                	mv	s2,a0
   memset(bp->data, 0, BSIZE);
-    800031a6:	40000613          	li	a2,1024
-    800031aa:	4581                	li	a1,0
-    800031ac:	05850513          	addi	a0,a0,88
-    800031b0:	ffffe097          	auipc	ra,0xffffe
-    800031b4:	b4c080e7          	jalr	-1204(ra) # 80000cfc <memset>
+    8000281a:	40000613          	li	a2,1024
+    8000281e:	4581                	li	a1,0
+    80002820:	05850513          	addi	a0,a0,88
+    80002824:	ffffe097          	auipc	ra,0xffffe
+    80002828:	97a080e7          	jalr	-1670(ra) # 8000019e <memset>
   log_write(bp);
-    800031b8:	854a                	mv	a0,s2
-    800031ba:	00001097          	auipc	ra,0x1
-    800031be:	fda080e7          	jalr	-38(ra) # 80004194 <log_write>
+    8000282c:	854a                	mv	a0,s2
+    8000282e:	00001097          	auipc	ra,0x1
+    80002832:	ff2080e7          	jalr	-14(ra) # 80003820 <log_write>
   brelse(bp);
-    800031c2:	854a                	mv	a0,s2
-    800031c4:	00000097          	auipc	ra,0x0
-    800031c8:	d64080e7          	jalr	-668(ra) # 80002f28 <brelse>
-}
-    800031cc:	8526                	mv	a0,s1
-    800031ce:	60e6                	ld	ra,88(sp)
-    800031d0:	6446                	ld	s0,80(sp)
-    800031d2:	64a6                	ld	s1,72(sp)
-    800031d4:	6906                	ld	s2,64(sp)
-    800031d6:	79e2                	ld	s3,56(sp)
-    800031d8:	7a42                	ld	s4,48(sp)
-    800031da:	7aa2                	ld	s5,40(sp)
-    800031dc:	7b02                	ld	s6,32(sp)
-    800031de:	6be2                	ld	s7,24(sp)
-    800031e0:	6c42                	ld	s8,16(sp)
-    800031e2:	6ca2                	ld	s9,8(sp)
-    800031e4:	6125                	addi	sp,sp,96
-    800031e6:	8082                	ret
+    80002836:	854a                	mv	a0,s2
+    80002838:	00000097          	auipc	ra,0x0
+    8000283c:	d64080e7          	jalr	-668(ra) # 8000259c <brelse>
+}
+    80002840:	8526                	mv	a0,s1
+    80002842:	60e6                	ld	ra,88(sp)
+    80002844:	6446                	ld	s0,80(sp)
+    80002846:	64a6                	ld	s1,72(sp)
+    80002848:	6906                	ld	s2,64(sp)
+    8000284a:	79e2                	ld	s3,56(sp)
+    8000284c:	7a42                	ld	s4,48(sp)
+    8000284e:	7aa2                	ld	s5,40(sp)
+    80002850:	7b02                	ld	s6,32(sp)
+    80002852:	6be2                	ld	s7,24(sp)
+    80002854:	6c42                	ld	s8,16(sp)
+    80002856:	6ca2                	ld	s9,8(sp)
+    80002858:	6125                	addi	sp,sp,96
+    8000285a:	8082                	ret
 
-00000000800031e8 <bmap>:
+000000008000285c <bmap>:
 
 // Return the disk block address of the nth block in inode ip.
 // If there is no such block, bmap allocates one.
 static uint
 bmap(struct inode *ip, uint bn)
 {
-    800031e8:	7179                	addi	sp,sp,-48
-    800031ea:	f406                	sd	ra,40(sp)
-    800031ec:	f022                	sd	s0,32(sp)
-    800031ee:	ec26                	sd	s1,24(sp)
-    800031f0:	e84a                	sd	s2,16(sp)
-    800031f2:	e44e                	sd	s3,8(sp)
-    800031f4:	e052                	sd	s4,0(sp)
-    800031f6:	1800                	addi	s0,sp,48
-    800031f8:	892a                	mv	s2,a0
+    8000285c:	7179                	addi	sp,sp,-48
+    8000285e:	f406                	sd	ra,40(sp)
+    80002860:	f022                	sd	s0,32(sp)
+    80002862:	ec26                	sd	s1,24(sp)
+    80002864:	e84a                	sd	s2,16(sp)
+    80002866:	e44e                	sd	s3,8(sp)
+    80002868:	e052                	sd	s4,0(sp)
+    8000286a:	1800                	addi	s0,sp,48
+    8000286c:	892a                	mv	s2,a0
   uint addr, *a;
   struct buf *bp;
 
   if(bn < NDIRECT){
-    800031fa:	47ad                	li	a5,11
-    800031fc:	04b7fe63          	bgeu	a5,a1,80003258 <bmap+0x70>
+    8000286e:	47ad                	li	a5,11
+    80002870:	04b7fe63          	bgeu	a5,a1,800028cc <bmap+0x70>
     if((addr = ip->addrs[bn]) == 0)
       ip->addrs[bn] = addr = balloc(ip->dev);
     return addr;
   }
   bn -= NDIRECT;
-    80003200:	ff45849b          	addiw	s1,a1,-12
-    80003204:	0004871b          	sext.w	a4,s1
+    80002874:	ff45849b          	addiw	s1,a1,-12
+    80002878:	0004871b          	sext.w	a4,s1
 
   if(bn < NINDIRECT){
-    80003208:	0ff00793          	li	a5,255
-    8000320c:	0ae7e463          	bltu	a5,a4,800032b4 <bmap+0xcc>
+    8000287c:	0ff00793          	li	a5,255
+    80002880:	0ae7e463          	bltu	a5,a4,80002928 <bmap+0xcc>
     // Load indirect block, allocating if necessary.
     if((addr = ip->addrs[NDIRECT]) == 0)
-    80003210:	08052583          	lw	a1,128(a0)
-    80003214:	c5b5                	beqz	a1,80003280 <bmap+0x98>
+    80002884:	08052583          	lw	a1,128(a0)
+    80002888:	c5b5                	beqz	a1,800028f4 <bmap+0x98>
       ip->addrs[NDIRECT] = addr = balloc(ip->dev);
     bp = bread(ip->dev, addr);
-    80003216:	00092503          	lw	a0,0(s2)
-    8000321a:	00000097          	auipc	ra,0x0
-    8000321e:	bde080e7          	jalr	-1058(ra) # 80002df8 <bread>
-    80003222:	8a2a                	mv	s4,a0
+    8000288a:	00092503          	lw	a0,0(s2)
+    8000288e:	00000097          	auipc	ra,0x0
+    80002892:	bde080e7          	jalr	-1058(ra) # 8000246c <bread>
+    80002896:	8a2a                	mv	s4,a0
     a = (uint*)bp->data;
-    80003224:	05850793          	addi	a5,a0,88
+    80002898:	05850793          	addi	a5,a0,88
     if((addr = a[bn]) == 0){
-    80003228:	02049713          	slli	a4,s1,0x20
-    8000322c:	01e75593          	srli	a1,a4,0x1e
-    80003230:	00b784b3          	add	s1,a5,a1
-    80003234:	0004a983          	lw	s3,0(s1)
-    80003238:	04098e63          	beqz	s3,80003294 <bmap+0xac>
+    8000289c:	02049713          	slli	a4,s1,0x20
+    800028a0:	01e75593          	srli	a1,a4,0x1e
+    800028a4:	00b784b3          	add	s1,a5,a1
+    800028a8:	0004a983          	lw	s3,0(s1)
+    800028ac:	04098e63          	beqz	s3,80002908 <bmap+0xac>
       a[bn] = addr = balloc(ip->dev);
       log_write(bp);
     }
     brelse(bp);
-    8000323c:	8552                	mv	a0,s4
-    8000323e:	00000097          	auipc	ra,0x0
-    80003242:	cea080e7          	jalr	-790(ra) # 80002f28 <brelse>
+    800028b0:	8552                	mv	a0,s4
+    800028b2:	00000097          	auipc	ra,0x0
+    800028b6:	cea080e7          	jalr	-790(ra) # 8000259c <brelse>
     return addr;
   }
 
   panic("bmap: out of range");
 }
-    80003246:	854e                	mv	a0,s3
-    80003248:	70a2                	ld	ra,40(sp)
-    8000324a:	7402                	ld	s0,32(sp)
-    8000324c:	64e2                	ld	s1,24(sp)
-    8000324e:	6942                	ld	s2,16(sp)
-    80003250:	69a2                	ld	s3,8(sp)
-    80003252:	6a02                	ld	s4,0(sp)
-    80003254:	6145                	addi	sp,sp,48
-    80003256:	8082                	ret
+    800028ba:	854e                	mv	a0,s3
+    800028bc:	70a2                	ld	ra,40(sp)
+    800028be:	7402                	ld	s0,32(sp)
+    800028c0:	64e2                	ld	s1,24(sp)
+    800028c2:	6942                	ld	s2,16(sp)
+    800028c4:	69a2                	ld	s3,8(sp)
+    800028c6:	6a02                	ld	s4,0(sp)
+    800028c8:	6145                	addi	sp,sp,48
+    800028ca:	8082                	ret
     if((addr = ip->addrs[bn]) == 0)
-    80003258:	02059793          	slli	a5,a1,0x20
-    8000325c:	01e7d593          	srli	a1,a5,0x1e
-    80003260:	00b504b3          	add	s1,a0,a1
-    80003264:	0504a983          	lw	s3,80(s1)
-    80003268:	fc099fe3          	bnez	s3,80003246 <bmap+0x5e>
+    800028cc:	02059793          	slli	a5,a1,0x20
+    800028d0:	01e7d593          	srli	a1,a5,0x1e
+    800028d4:	00b504b3          	add	s1,a0,a1
+    800028d8:	0504a983          	lw	s3,80(s1)
+    800028dc:	fc099fe3          	bnez	s3,800028ba <bmap+0x5e>
       ip->addrs[bn] = addr = balloc(ip->dev);
-    8000326c:	4108                	lw	a0,0(a0)
-    8000326e:	00000097          	auipc	ra,0x0
-    80003272:	e4c080e7          	jalr	-436(ra) # 800030ba <balloc>
-    80003276:	0005099b          	sext.w	s3,a0
-    8000327a:	0534a823          	sw	s3,80(s1)
-    8000327e:	b7e1                	j	80003246 <bmap+0x5e>
+    800028e0:	4108                	lw	a0,0(a0)
+    800028e2:	00000097          	auipc	ra,0x0
+    800028e6:	e4c080e7          	jalr	-436(ra) # 8000272e <balloc>
+    800028ea:	0005099b          	sext.w	s3,a0
+    800028ee:	0534a823          	sw	s3,80(s1)
+    800028f2:	b7e1                	j	800028ba <bmap+0x5e>
       ip->addrs[NDIRECT] = addr = balloc(ip->dev);
-    80003280:	4108                	lw	a0,0(a0)
-    80003282:	00000097          	auipc	ra,0x0
-    80003286:	e38080e7          	jalr	-456(ra) # 800030ba <balloc>
-    8000328a:	0005059b          	sext.w	a1,a0
-    8000328e:	08b92023          	sw	a1,128(s2)
-    80003292:	b751                	j	80003216 <bmap+0x2e>
+    800028f4:	4108                	lw	a0,0(a0)
+    800028f6:	00000097          	auipc	ra,0x0
+    800028fa:	e38080e7          	jalr	-456(ra) # 8000272e <balloc>
+    800028fe:	0005059b          	sext.w	a1,a0
+    80002902:	08b92023          	sw	a1,128(s2)
+    80002906:	b751                	j	8000288a <bmap+0x2e>
       a[bn] = addr = balloc(ip->dev);
-    80003294:	00092503          	lw	a0,0(s2)
-    80003298:	00000097          	auipc	ra,0x0
-    8000329c:	e22080e7          	jalr	-478(ra) # 800030ba <balloc>
-    800032a0:	0005099b          	sext.w	s3,a0
-    800032a4:	0134a023          	sw	s3,0(s1)
+    80002908:	00092503          	lw	a0,0(s2)
+    8000290c:	00000097          	auipc	ra,0x0
+    80002910:	e22080e7          	jalr	-478(ra) # 8000272e <balloc>
+    80002914:	0005099b          	sext.w	s3,a0
+    80002918:	0134a023          	sw	s3,0(s1)
       log_write(bp);
-    800032a8:	8552                	mv	a0,s4
-    800032aa:	00001097          	auipc	ra,0x1
-    800032ae:	eea080e7          	jalr	-278(ra) # 80004194 <log_write>
-    800032b2:	b769                	j	8000323c <bmap+0x54>
+    8000291c:	8552                	mv	a0,s4
+    8000291e:	00001097          	auipc	ra,0x1
+    80002922:	f02080e7          	jalr	-254(ra) # 80003820 <log_write>
+    80002926:	b769                	j	800028b0 <bmap+0x54>
   panic("bmap: out of range");
-    800032b4:	00005517          	auipc	a0,0x5
-    800032b8:	28c50513          	addi	a0,a0,652 # 80008540 <syscalls+0x118>
-    800032bc:	ffffd097          	auipc	ra,0xffffd
-    800032c0:	28a080e7          	jalr	650(ra) # 80000546 <panic>
-
-00000000800032c4 <iget>:
-{
-    800032c4:	7179                	addi	sp,sp,-48
-    800032c6:	f406                	sd	ra,40(sp)
-    800032c8:	f022                	sd	s0,32(sp)
-    800032ca:	ec26                	sd	s1,24(sp)
-    800032cc:	e84a                	sd	s2,16(sp)
-    800032ce:	e44e                	sd	s3,8(sp)
-    800032d0:	e052                	sd	s4,0(sp)
-    800032d2:	1800                	addi	s0,sp,48
-    800032d4:	89aa                	mv	s3,a0
-    800032d6:	8a2e                	mv	s4,a1
-  acquire(&icache.lock);
-    800032d8:	0001d517          	auipc	a0,0x1d
-    800032dc:	b8850513          	addi	a0,a0,-1144 # 8001fe60 <icache>
-    800032e0:	ffffe097          	auipc	ra,0xffffe
-    800032e4:	920080e7          	jalr	-1760(ra) # 80000c00 <acquire>
+    80002928:	00006517          	auipc	a0,0x6
+    8000292c:	d7850513          	addi	a0,a0,-648 # 800086a0 <syscall_name+0x120>
+    80002930:	00003097          	auipc	ra,0x3
+    80002934:	3c0080e7          	jalr	960(ra) # 80005cf0 <panic>
+
+0000000080002938 <iget>:
+{
+    80002938:	7179                	addi	sp,sp,-48
+    8000293a:	f406                	sd	ra,40(sp)
+    8000293c:	f022                	sd	s0,32(sp)
+    8000293e:	ec26                	sd	s1,24(sp)
+    80002940:	e84a                	sd	s2,16(sp)
+    80002942:	e44e                	sd	s3,8(sp)
+    80002944:	e052                	sd	s4,0(sp)
+    80002946:	1800                	addi	s0,sp,48
+    80002948:	89aa                	mv	s3,a0
+    8000294a:	8a2e                	mv	s4,a1
+  acquire(&itable.lock);
+    8000294c:	00015517          	auipc	a0,0x15
+    80002950:	e2c50513          	addi	a0,a0,-468 # 80017778 <itable>
+    80002954:	00004097          	auipc	ra,0x4
+    80002958:	8d4080e7          	jalr	-1836(ra) # 80006228 <acquire>
   empty = 0;
-    800032e8:	4901                	li	s2,0
-  for(ip = &icache.inode[0]; ip < &icache.inode[NINODE]; ip++){
-    800032ea:	0001d497          	auipc	s1,0x1d
-    800032ee:	b8e48493          	addi	s1,s1,-1138 # 8001fe78 <icache+0x18>
-    800032f2:	0001e697          	auipc	a3,0x1e
-    800032f6:	61668693          	addi	a3,a3,1558 # 80021908 <log>
-    800032fa:	a039                	j	80003308 <iget+0x44>
+    8000295c:	4901                	li	s2,0
+  for(ip = &itable.inode[0]; ip < &itable.inode[NINODE]; ip++){
+    8000295e:	00015497          	auipc	s1,0x15
+    80002962:	e3248493          	addi	s1,s1,-462 # 80017790 <itable+0x18>
+    80002966:	00017697          	auipc	a3,0x17
+    8000296a:	8ba68693          	addi	a3,a3,-1862 # 80019220 <log>
+    8000296e:	a039                	j	8000297c <iget+0x44>
     if(empty == 0 && ip->ref == 0)    // Remember empty slot.
-    800032fc:	02090b63          	beqz	s2,80003332 <iget+0x6e>
-  for(ip = &icache.inode[0]; ip < &icache.inode[NINODE]; ip++){
-    80003300:	08848493          	addi	s1,s1,136
-    80003304:	02d48a63          	beq	s1,a3,80003338 <iget+0x74>
+    80002970:	02090b63          	beqz	s2,800029a6 <iget+0x6e>
+  for(ip = &itable.inode[0]; ip < &itable.inode[NINODE]; ip++){
+    80002974:	08848493          	addi	s1,s1,136
+    80002978:	02d48a63          	beq	s1,a3,800029ac <iget+0x74>
     if(ip->ref > 0 && ip->dev == dev && ip->inum == inum){
-    80003308:	449c                	lw	a5,8(s1)
-    8000330a:	fef059e3          	blez	a5,800032fc <iget+0x38>
-    8000330e:	4098                	lw	a4,0(s1)
-    80003310:	ff3716e3          	bne	a4,s3,800032fc <iget+0x38>
-    80003314:	40d8                	lw	a4,4(s1)
-    80003316:	ff4713e3          	bne	a4,s4,800032fc <iget+0x38>
+    8000297c:	449c                	lw	a5,8(s1)
+    8000297e:	fef059e3          	blez	a5,80002970 <iget+0x38>
+    80002982:	4098                	lw	a4,0(s1)
+    80002984:	ff3716e3          	bne	a4,s3,80002970 <iget+0x38>
+    80002988:	40d8                	lw	a4,4(s1)
+    8000298a:	ff4713e3          	bne	a4,s4,80002970 <iget+0x38>
       ip->ref++;
-    8000331a:	2785                	addiw	a5,a5,1
-    8000331c:	c49c                	sw	a5,8(s1)
-      release(&icache.lock);
-    8000331e:	0001d517          	auipc	a0,0x1d
-    80003322:	b4250513          	addi	a0,a0,-1214 # 8001fe60 <icache>
-    80003326:	ffffe097          	auipc	ra,0xffffe
-    8000332a:	98e080e7          	jalr	-1650(ra) # 80000cb4 <release>
+    8000298e:	2785                	addiw	a5,a5,1
+    80002990:	c49c                	sw	a5,8(s1)
+      release(&itable.lock);
+    80002992:	00015517          	auipc	a0,0x15
+    80002996:	de650513          	addi	a0,a0,-538 # 80017778 <itable>
+    8000299a:	00004097          	auipc	ra,0x4
+    8000299e:	942080e7          	jalr	-1726(ra) # 800062dc <release>
       return ip;
-    8000332e:	8926                	mv	s2,s1
-    80003330:	a03d                	j	8000335e <iget+0x9a>
+    800029a2:	8926                	mv	s2,s1
+    800029a4:	a03d                	j	800029d2 <iget+0x9a>
     if(empty == 0 && ip->ref == 0)    // Remember empty slot.
-    80003332:	f7f9                	bnez	a5,80003300 <iget+0x3c>
-    80003334:	8926                	mv	s2,s1
-    80003336:	b7e9                	j	80003300 <iget+0x3c>
+    800029a6:	f7f9                	bnez	a5,80002974 <iget+0x3c>
+    800029a8:	8926                	mv	s2,s1
+    800029aa:	b7e9                	j	80002974 <iget+0x3c>
   if(empty == 0)
-    80003338:	02090c63          	beqz	s2,80003370 <iget+0xac>
+    800029ac:	02090c63          	beqz	s2,800029e4 <iget+0xac>
   ip->dev = dev;
-    8000333c:	01392023          	sw	s3,0(s2)
+    800029b0:	01392023          	sw	s3,0(s2)
   ip->inum = inum;
-    80003340:	01492223          	sw	s4,4(s2)
+    800029b4:	01492223          	sw	s4,4(s2)
   ip->ref = 1;
-    80003344:	4785                	li	a5,1
-    80003346:	00f92423          	sw	a5,8(s2)
+    800029b8:	4785                	li	a5,1
+    800029ba:	00f92423          	sw	a5,8(s2)
   ip->valid = 0;
-    8000334a:	04092023          	sw	zero,64(s2)
-  release(&icache.lock);
-    8000334e:	0001d517          	auipc	a0,0x1d
-    80003352:	b1250513          	addi	a0,a0,-1262 # 8001fe60 <icache>
-    80003356:	ffffe097          	auipc	ra,0xffffe
-    8000335a:	95e080e7          	jalr	-1698(ra) # 80000cb4 <release>
-}
-    8000335e:	854a                	mv	a0,s2
-    80003360:	70a2                	ld	ra,40(sp)
-    80003362:	7402                	ld	s0,32(sp)
-    80003364:	64e2                	ld	s1,24(sp)
-    80003366:	6942                	ld	s2,16(sp)
-    80003368:	69a2                	ld	s3,8(sp)
-    8000336a:	6a02                	ld	s4,0(sp)
-    8000336c:	6145                	addi	sp,sp,48
-    8000336e:	8082                	ret
+    800029be:	04092023          	sw	zero,64(s2)
+  release(&itable.lock);
+    800029c2:	00015517          	auipc	a0,0x15
+    800029c6:	db650513          	addi	a0,a0,-586 # 80017778 <itable>
+    800029ca:	00004097          	auipc	ra,0x4
+    800029ce:	912080e7          	jalr	-1774(ra) # 800062dc <release>
+}
+    800029d2:	854a                	mv	a0,s2
+    800029d4:	70a2                	ld	ra,40(sp)
+    800029d6:	7402                	ld	s0,32(sp)
+    800029d8:	64e2                	ld	s1,24(sp)
+    800029da:	6942                	ld	s2,16(sp)
+    800029dc:	69a2                	ld	s3,8(sp)
+    800029de:	6a02                	ld	s4,0(sp)
+    800029e0:	6145                	addi	sp,sp,48
+    800029e2:	8082                	ret
     panic("iget: no inodes");
-    80003370:	00005517          	auipc	a0,0x5
-    80003374:	1e850513          	addi	a0,a0,488 # 80008558 <syscalls+0x130>
-    80003378:	ffffd097          	auipc	ra,0xffffd
-    8000337c:	1ce080e7          	jalr	462(ra) # 80000546 <panic>
+    800029e4:	00006517          	auipc	a0,0x6
+    800029e8:	cd450513          	addi	a0,a0,-812 # 800086b8 <syscall_name+0x138>
+    800029ec:	00003097          	auipc	ra,0x3
+    800029f0:	304080e7          	jalr	772(ra) # 80005cf0 <panic>
 
-0000000080003380 <fsinit>:
+00000000800029f4 <fsinit>:
 fsinit(int dev) {
-    80003380:	7179                	addi	sp,sp,-48
-    80003382:	f406                	sd	ra,40(sp)
-    80003384:	f022                	sd	s0,32(sp)
-    80003386:	ec26                	sd	s1,24(sp)
-    80003388:	e84a                	sd	s2,16(sp)
-    8000338a:	e44e                	sd	s3,8(sp)
-    8000338c:	1800                	addi	s0,sp,48
-    8000338e:	892a                	mv	s2,a0
+    800029f4:	7179                	addi	sp,sp,-48
+    800029f6:	f406                	sd	ra,40(sp)
+    800029f8:	f022                	sd	s0,32(sp)
+    800029fa:	ec26                	sd	s1,24(sp)
+    800029fc:	e84a                	sd	s2,16(sp)
+    800029fe:	e44e                	sd	s3,8(sp)
+    80002a00:	1800                	addi	s0,sp,48
+    80002a02:	892a                	mv	s2,a0
   bp = bread(dev, 1);
-    80003390:	4585                	li	a1,1
-    80003392:	00000097          	auipc	ra,0x0
-    80003396:	a66080e7          	jalr	-1434(ra) # 80002df8 <bread>
-    8000339a:	84aa                	mv	s1,a0
+    80002a04:	4585                	li	a1,1
+    80002a06:	00000097          	auipc	ra,0x0
+    80002a0a:	a66080e7          	jalr	-1434(ra) # 8000246c <bread>
+    80002a0e:	84aa                	mv	s1,a0
   memmove(sb, bp->data, sizeof(*sb));
-    8000339c:	0001d997          	auipc	s3,0x1d
-    800033a0:	aa498993          	addi	s3,s3,-1372 # 8001fe40 <sb>
-    800033a4:	02000613          	li	a2,32
-    800033a8:	05850593          	addi	a1,a0,88
-    800033ac:	854e                	mv	a0,s3
-    800033ae:	ffffe097          	auipc	ra,0xffffe
-    800033b2:	9aa080e7          	jalr	-1622(ra) # 80000d58 <memmove>
+    80002a10:	00015997          	auipc	s3,0x15
+    80002a14:	d4898993          	addi	s3,s3,-696 # 80017758 <sb>
+    80002a18:	02000613          	li	a2,32
+    80002a1c:	05850593          	addi	a1,a0,88
+    80002a20:	854e                	mv	a0,s3
+    80002a22:	ffffd097          	auipc	ra,0xffffd
+    80002a26:	7d8080e7          	jalr	2008(ra) # 800001fa <memmove>
   brelse(bp);
-    800033b6:	8526                	mv	a0,s1
-    800033b8:	00000097          	auipc	ra,0x0
-    800033bc:	b70080e7          	jalr	-1168(ra) # 80002f28 <brelse>
+    80002a2a:	8526                	mv	a0,s1
+    80002a2c:	00000097          	auipc	ra,0x0
+    80002a30:	b70080e7          	jalr	-1168(ra) # 8000259c <brelse>
   if(sb.magic != FSMAGIC)
-    800033c0:	0009a703          	lw	a4,0(s3)
-    800033c4:	102037b7          	lui	a5,0x10203
-    800033c8:	04078793          	addi	a5,a5,64 # 10203040 <_entry-0x6fdfcfc0>
-    800033cc:	02f71263          	bne	a4,a5,800033f0 <fsinit+0x70>
+    80002a34:	0009a703          	lw	a4,0(s3)
+    80002a38:	102037b7          	lui	a5,0x10203
+    80002a3c:	04078793          	addi	a5,a5,64 # 10203040 <_entry-0x6fdfcfc0>
+    80002a40:	02f71263          	bne	a4,a5,80002a64 <fsinit+0x70>
   initlog(dev, &sb);
-    800033d0:	0001d597          	auipc	a1,0x1d
-    800033d4:	a7058593          	addi	a1,a1,-1424 # 8001fe40 <sb>
-    800033d8:	854a                	mv	a0,s2
-    800033da:	00001097          	auipc	ra,0x1
-    800033de:	b42080e7          	jalr	-1214(ra) # 80003f1c <initlog>
-}
-    800033e2:	70a2                	ld	ra,40(sp)
-    800033e4:	7402                	ld	s0,32(sp)
-    800033e6:	64e2                	ld	s1,24(sp)
-    800033e8:	6942                	ld	s2,16(sp)
-    800033ea:	69a2                	ld	s3,8(sp)
-    800033ec:	6145                	addi	sp,sp,48
-    800033ee:	8082                	ret
+    80002a44:	00015597          	auipc	a1,0x15
+    80002a48:	d1458593          	addi	a1,a1,-748 # 80017758 <sb>
+    80002a4c:	854a                	mv	a0,s2
+    80002a4e:	00001097          	auipc	ra,0x1
+    80002a52:	b56080e7          	jalr	-1194(ra) # 800035a4 <initlog>
+}
+    80002a56:	70a2                	ld	ra,40(sp)
+    80002a58:	7402                	ld	s0,32(sp)
+    80002a5a:	64e2                	ld	s1,24(sp)
+    80002a5c:	6942                	ld	s2,16(sp)
+    80002a5e:	69a2                	ld	s3,8(sp)
+    80002a60:	6145                	addi	sp,sp,48
+    80002a62:	8082                	ret
     panic("invalid file system");
-    800033f0:	00005517          	auipc	a0,0x5
-    800033f4:	17850513          	addi	a0,a0,376 # 80008568 <syscalls+0x140>
-    800033f8:	ffffd097          	auipc	ra,0xffffd
-    800033fc:	14e080e7          	jalr	334(ra) # 80000546 <panic>
-
-0000000080003400 <iinit>:
-{
-    80003400:	7179                	addi	sp,sp,-48
-    80003402:	f406                	sd	ra,40(sp)
-    80003404:	f022                	sd	s0,32(sp)
-    80003406:	ec26                	sd	s1,24(sp)
-    80003408:	e84a                	sd	s2,16(sp)
-    8000340a:	e44e                	sd	s3,8(sp)
-    8000340c:	1800                	addi	s0,sp,48
-  initlock(&icache.lock, "icache");
-    8000340e:	00005597          	auipc	a1,0x5
-    80003412:	17258593          	addi	a1,a1,370 # 80008580 <syscalls+0x158>
-    80003416:	0001d517          	auipc	a0,0x1d
-    8000341a:	a4a50513          	addi	a0,a0,-1462 # 8001fe60 <icache>
-    8000341e:	ffffd097          	auipc	ra,0xffffd
-    80003422:	752080e7          	jalr	1874(ra) # 80000b70 <initlock>
+    80002a64:	00006517          	auipc	a0,0x6
+    80002a68:	c6450513          	addi	a0,a0,-924 # 800086c8 <syscall_name+0x148>
+    80002a6c:	00003097          	auipc	ra,0x3
+    80002a70:	284080e7          	jalr	644(ra) # 80005cf0 <panic>
+
+0000000080002a74 <iinit>:
+{
+    80002a74:	7179                	addi	sp,sp,-48
+    80002a76:	f406                	sd	ra,40(sp)
+    80002a78:	f022                	sd	s0,32(sp)
+    80002a7a:	ec26                	sd	s1,24(sp)
+    80002a7c:	e84a                	sd	s2,16(sp)
+    80002a7e:	e44e                	sd	s3,8(sp)
+    80002a80:	1800                	addi	s0,sp,48
+  initlock(&itable.lock, "itable");
+    80002a82:	00006597          	auipc	a1,0x6
+    80002a86:	c5e58593          	addi	a1,a1,-930 # 800086e0 <syscall_name+0x160>
+    80002a8a:	00015517          	auipc	a0,0x15
+    80002a8e:	cee50513          	addi	a0,a0,-786 # 80017778 <itable>
+    80002a92:	00003097          	auipc	ra,0x3
+    80002a96:	706080e7          	jalr	1798(ra) # 80006198 <initlock>
   for(i = 0; i < NINODE; i++) {
-    80003426:	0001d497          	auipc	s1,0x1d
-    8000342a:	a6248493          	addi	s1,s1,-1438 # 8001fe88 <icache+0x28>
-    8000342e:	0001e997          	auipc	s3,0x1e
-    80003432:	4ea98993          	addi	s3,s3,1258 # 80021918 <log+0x10>
-    initsleeplock(&icache.inode[i].lock, "inode");
-    80003436:	00005917          	auipc	s2,0x5
-    8000343a:	15290913          	addi	s2,s2,338 # 80008588 <syscalls+0x160>
-    8000343e:	85ca                	mv	a1,s2
-    80003440:	8526                	mv	a0,s1
-    80003442:	00001097          	auipc	ra,0x1
-    80003446:	e3e080e7          	jalr	-450(ra) # 80004280 <initsleeplock>
+    80002a9a:	00015497          	auipc	s1,0x15
+    80002a9e:	d0648493          	addi	s1,s1,-762 # 800177a0 <itable+0x28>
+    80002aa2:	00016997          	auipc	s3,0x16
+    80002aa6:	78e98993          	addi	s3,s3,1934 # 80019230 <log+0x10>
+    initsleeplock(&itable.inode[i].lock, "inode");
+    80002aaa:	00006917          	auipc	s2,0x6
+    80002aae:	c3e90913          	addi	s2,s2,-962 # 800086e8 <syscall_name+0x168>
+    80002ab2:	85ca                	mv	a1,s2
+    80002ab4:	8526                	mv	a0,s1
+    80002ab6:	00001097          	auipc	ra,0x1
+    80002aba:	e4e080e7          	jalr	-434(ra) # 80003904 <initsleeplock>
   for(i = 0; i < NINODE; i++) {
-    8000344a:	08848493          	addi	s1,s1,136
-    8000344e:	ff3498e3          	bne	s1,s3,8000343e <iinit+0x3e>
+    80002abe:	08848493          	addi	s1,s1,136
+    80002ac2:	ff3498e3          	bne	s1,s3,80002ab2 <iinit+0x3e>
 }
-    80003452:	70a2                	ld	ra,40(sp)
-    80003454:	7402                	ld	s0,32(sp)
-    80003456:	64e2                	ld	s1,24(sp)
-    80003458:	6942                	ld	s2,16(sp)
-    8000345a:	69a2                	ld	s3,8(sp)
-    8000345c:	6145                	addi	sp,sp,48
-    8000345e:	8082                	ret
-
-0000000080003460 <ialloc>:
-{
-    80003460:	715d                	addi	sp,sp,-80
-    80003462:	e486                	sd	ra,72(sp)
-    80003464:	e0a2                	sd	s0,64(sp)
-    80003466:	fc26                	sd	s1,56(sp)
-    80003468:	f84a                	sd	s2,48(sp)
-    8000346a:	f44e                	sd	s3,40(sp)
-    8000346c:	f052                	sd	s4,32(sp)
-    8000346e:	ec56                	sd	s5,24(sp)
-    80003470:	e85a                	sd	s6,16(sp)
-    80003472:	e45e                	sd	s7,8(sp)
-    80003474:	0880                	addi	s0,sp,80
+    80002ac6:	70a2                	ld	ra,40(sp)
+    80002ac8:	7402                	ld	s0,32(sp)
+    80002aca:	64e2                	ld	s1,24(sp)
+    80002acc:	6942                	ld	s2,16(sp)
+    80002ace:	69a2                	ld	s3,8(sp)
+    80002ad0:	6145                	addi	sp,sp,48
+    80002ad2:	8082                	ret
+
+0000000080002ad4 <ialloc>:
+{
+    80002ad4:	715d                	addi	sp,sp,-80
+    80002ad6:	e486                	sd	ra,72(sp)
+    80002ad8:	e0a2                	sd	s0,64(sp)
+    80002ada:	fc26                	sd	s1,56(sp)
+    80002adc:	f84a                	sd	s2,48(sp)
+    80002ade:	f44e                	sd	s3,40(sp)
+    80002ae0:	f052                	sd	s4,32(sp)
+    80002ae2:	ec56                	sd	s5,24(sp)
+    80002ae4:	e85a                	sd	s6,16(sp)
+    80002ae6:	e45e                	sd	s7,8(sp)
+    80002ae8:	0880                	addi	s0,sp,80
   for(inum = 1; inum < sb.ninodes; inum++){
-    80003476:	0001d717          	auipc	a4,0x1d
-    8000347a:	9d672703          	lw	a4,-1578(a4) # 8001fe4c <sb+0xc>
-    8000347e:	4785                	li	a5,1
-    80003480:	04e7fa63          	bgeu	a5,a4,800034d4 <ialloc+0x74>
-    80003484:	8aaa                	mv	s5,a0
-    80003486:	8bae                	mv	s7,a1
-    80003488:	4485                	li	s1,1
+    80002aea:	00015717          	auipc	a4,0x15
+    80002aee:	c7a72703          	lw	a4,-902(a4) # 80017764 <sb+0xc>
+    80002af2:	4785                	li	a5,1
+    80002af4:	04e7fa63          	bgeu	a5,a4,80002b48 <ialloc+0x74>
+    80002af8:	8aaa                	mv	s5,a0
+    80002afa:	8bae                	mv	s7,a1
+    80002afc:	4485                	li	s1,1
     bp = bread(dev, IBLOCK(inum, sb));
-    8000348a:	0001da17          	auipc	s4,0x1d
-    8000348e:	9b6a0a13          	addi	s4,s4,-1610 # 8001fe40 <sb>
-    80003492:	00048b1b          	sext.w	s6,s1
-    80003496:	0044d593          	srli	a1,s1,0x4
-    8000349a:	018a2783          	lw	a5,24(s4)
-    8000349e:	9dbd                	addw	a1,a1,a5
-    800034a0:	8556                	mv	a0,s5
-    800034a2:	00000097          	auipc	ra,0x0
-    800034a6:	956080e7          	jalr	-1706(ra) # 80002df8 <bread>
-    800034aa:	892a                	mv	s2,a0
+    80002afe:	00015a17          	auipc	s4,0x15
+    80002b02:	c5aa0a13          	addi	s4,s4,-934 # 80017758 <sb>
+    80002b06:	00048b1b          	sext.w	s6,s1
+    80002b0a:	0044d593          	srli	a1,s1,0x4
+    80002b0e:	018a2783          	lw	a5,24(s4)
+    80002b12:	9dbd                	addw	a1,a1,a5
+    80002b14:	8556                	mv	a0,s5
+    80002b16:	00000097          	auipc	ra,0x0
+    80002b1a:	956080e7          	jalr	-1706(ra) # 8000246c <bread>
+    80002b1e:	892a                	mv	s2,a0
     dip = (struct dinode*)bp->data + inum%IPB;
-    800034ac:	05850993          	addi	s3,a0,88
-    800034b0:	00f4f793          	andi	a5,s1,15
-    800034b4:	079a                	slli	a5,a5,0x6
-    800034b6:	99be                	add	s3,s3,a5
+    80002b20:	05850993          	addi	s3,a0,88
+    80002b24:	00f4f793          	andi	a5,s1,15
+    80002b28:	079a                	slli	a5,a5,0x6
+    80002b2a:	99be                	add	s3,s3,a5
     if(dip->type == 0){  // a free inode
-    800034b8:	00099783          	lh	a5,0(s3)
-    800034bc:	c785                	beqz	a5,800034e4 <ialloc+0x84>
+    80002b2c:	00099783          	lh	a5,0(s3)
+    80002b30:	c785                	beqz	a5,80002b58 <ialloc+0x84>
     brelse(bp);
-    800034be:	00000097          	auipc	ra,0x0
-    800034c2:	a6a080e7          	jalr	-1430(ra) # 80002f28 <brelse>
+    80002b32:	00000097          	auipc	ra,0x0
+    80002b36:	a6a080e7          	jalr	-1430(ra) # 8000259c <brelse>
   for(inum = 1; inum < sb.ninodes; inum++){
-    800034c6:	0485                	addi	s1,s1,1
-    800034c8:	00ca2703          	lw	a4,12(s4)
-    800034cc:	0004879b          	sext.w	a5,s1
-    800034d0:	fce7e1e3          	bltu	a5,a4,80003492 <ialloc+0x32>
+    80002b3a:	0485                	addi	s1,s1,1
+    80002b3c:	00ca2703          	lw	a4,12(s4)
+    80002b40:	0004879b          	sext.w	a5,s1
+    80002b44:	fce7e1e3          	bltu	a5,a4,80002b06 <ialloc+0x32>
   panic("ialloc: no inodes");
-    800034d4:	00005517          	auipc	a0,0x5
-    800034d8:	0bc50513          	addi	a0,a0,188 # 80008590 <syscalls+0x168>
-    800034dc:	ffffd097          	auipc	ra,0xffffd
-    800034e0:	06a080e7          	jalr	106(ra) # 80000546 <panic>
+    80002b48:	00006517          	auipc	a0,0x6
+    80002b4c:	ba850513          	addi	a0,a0,-1112 # 800086f0 <syscall_name+0x170>
+    80002b50:	00003097          	auipc	ra,0x3
+    80002b54:	1a0080e7          	jalr	416(ra) # 80005cf0 <panic>
       memset(dip, 0, sizeof(*dip));
-    800034e4:	04000613          	li	a2,64
-    800034e8:	4581                	li	a1,0
-    800034ea:	854e                	mv	a0,s3
-    800034ec:	ffffe097          	auipc	ra,0xffffe
-    800034f0:	810080e7          	jalr	-2032(ra) # 80000cfc <memset>
+    80002b58:	04000613          	li	a2,64
+    80002b5c:	4581                	li	a1,0
+    80002b5e:	854e                	mv	a0,s3
+    80002b60:	ffffd097          	auipc	ra,0xffffd
+    80002b64:	63e080e7          	jalr	1598(ra) # 8000019e <memset>
       dip->type = type;
-    800034f4:	01799023          	sh	s7,0(s3)
+    80002b68:	01799023          	sh	s7,0(s3)
       log_write(bp);   // mark it allocated on the disk
-    800034f8:	854a                	mv	a0,s2
-    800034fa:	00001097          	auipc	ra,0x1
-    800034fe:	c9a080e7          	jalr	-870(ra) # 80004194 <log_write>
+    80002b6c:	854a                	mv	a0,s2
+    80002b6e:	00001097          	auipc	ra,0x1
+    80002b72:	cb2080e7          	jalr	-846(ra) # 80003820 <log_write>
       brelse(bp);
-    80003502:	854a                	mv	a0,s2
-    80003504:	00000097          	auipc	ra,0x0
-    80003508:	a24080e7          	jalr	-1500(ra) # 80002f28 <brelse>
+    80002b76:	854a                	mv	a0,s2
+    80002b78:	00000097          	auipc	ra,0x0
+    80002b7c:	a24080e7          	jalr	-1500(ra) # 8000259c <brelse>
       return iget(dev, inum);
-    8000350c:	85da                	mv	a1,s6
-    8000350e:	8556                	mv	a0,s5
-    80003510:	00000097          	auipc	ra,0x0
-    80003514:	db4080e7          	jalr	-588(ra) # 800032c4 <iget>
-}
-    80003518:	60a6                	ld	ra,72(sp)
-    8000351a:	6406                	ld	s0,64(sp)
-    8000351c:	74e2                	ld	s1,56(sp)
-    8000351e:	7942                	ld	s2,48(sp)
-    80003520:	79a2                	ld	s3,40(sp)
-    80003522:	7a02                	ld	s4,32(sp)
-    80003524:	6ae2                	ld	s5,24(sp)
-    80003526:	6b42                	ld	s6,16(sp)
-    80003528:	6ba2                	ld	s7,8(sp)
-    8000352a:	6161                	addi	sp,sp,80
-    8000352c:	8082                	ret
-
-000000008000352e <iupdate>:
-{
-    8000352e:	1101                	addi	sp,sp,-32
-    80003530:	ec06                	sd	ra,24(sp)
-    80003532:	e822                	sd	s0,16(sp)
-    80003534:	e426                	sd	s1,8(sp)
-    80003536:	e04a                	sd	s2,0(sp)
-    80003538:	1000                	addi	s0,sp,32
-    8000353a:	84aa                	mv	s1,a0
+    80002b80:	85da                	mv	a1,s6
+    80002b82:	8556                	mv	a0,s5
+    80002b84:	00000097          	auipc	ra,0x0
+    80002b88:	db4080e7          	jalr	-588(ra) # 80002938 <iget>
+}
+    80002b8c:	60a6                	ld	ra,72(sp)
+    80002b8e:	6406                	ld	s0,64(sp)
+    80002b90:	74e2                	ld	s1,56(sp)
+    80002b92:	7942                	ld	s2,48(sp)
+    80002b94:	79a2                	ld	s3,40(sp)
+    80002b96:	7a02                	ld	s4,32(sp)
+    80002b98:	6ae2                	ld	s5,24(sp)
+    80002b9a:	6b42                	ld	s6,16(sp)
+    80002b9c:	6ba2                	ld	s7,8(sp)
+    80002b9e:	6161                	addi	sp,sp,80
+    80002ba0:	8082                	ret
+
+0000000080002ba2 <iupdate>:
+{
+    80002ba2:	1101                	addi	sp,sp,-32
+    80002ba4:	ec06                	sd	ra,24(sp)
+    80002ba6:	e822                	sd	s0,16(sp)
+    80002ba8:	e426                	sd	s1,8(sp)
+    80002baa:	e04a                	sd	s2,0(sp)
+    80002bac:	1000                	addi	s0,sp,32
+    80002bae:	84aa                	mv	s1,a0
   bp = bread(ip->dev, IBLOCK(ip->inum, sb));
-    8000353c:	415c                	lw	a5,4(a0)
-    8000353e:	0047d79b          	srliw	a5,a5,0x4
-    80003542:	0001d597          	auipc	a1,0x1d
-    80003546:	9165a583          	lw	a1,-1770(a1) # 8001fe58 <sb+0x18>
-    8000354a:	9dbd                	addw	a1,a1,a5
-    8000354c:	4108                	lw	a0,0(a0)
-    8000354e:	00000097          	auipc	ra,0x0
-    80003552:	8aa080e7          	jalr	-1878(ra) # 80002df8 <bread>
-    80003556:	892a                	mv	s2,a0
+    80002bb0:	415c                	lw	a5,4(a0)
+    80002bb2:	0047d79b          	srliw	a5,a5,0x4
+    80002bb6:	00015597          	auipc	a1,0x15
+    80002bba:	bba5a583          	lw	a1,-1094(a1) # 80017770 <sb+0x18>
+    80002bbe:	9dbd                	addw	a1,a1,a5
+    80002bc0:	4108                	lw	a0,0(a0)
+    80002bc2:	00000097          	auipc	ra,0x0
+    80002bc6:	8aa080e7          	jalr	-1878(ra) # 8000246c <bread>
+    80002bca:	892a                	mv	s2,a0
   dip = (struct dinode*)bp->data + ip->inum%IPB;
-    80003558:	05850793          	addi	a5,a0,88
-    8000355c:	40d8                	lw	a4,4(s1)
-    8000355e:	8b3d                	andi	a4,a4,15
-    80003560:	071a                	slli	a4,a4,0x6
-    80003562:	97ba                	add	a5,a5,a4
+    80002bcc:	05850793          	addi	a5,a0,88
+    80002bd0:	40d8                	lw	a4,4(s1)
+    80002bd2:	8b3d                	andi	a4,a4,15
+    80002bd4:	071a                	slli	a4,a4,0x6
+    80002bd6:	97ba                	add	a5,a5,a4
   dip->type = ip->type;
-    80003564:	04449703          	lh	a4,68(s1)
-    80003568:	00e79023          	sh	a4,0(a5)
+    80002bd8:	04449703          	lh	a4,68(s1)
+    80002bdc:	00e79023          	sh	a4,0(a5)
   dip->major = ip->major;
-    8000356c:	04649703          	lh	a4,70(s1)
-    80003570:	00e79123          	sh	a4,2(a5)
+    80002be0:	04649703          	lh	a4,70(s1)
+    80002be4:	00e79123          	sh	a4,2(a5)
   dip->minor = ip->minor;
-    80003574:	04849703          	lh	a4,72(s1)
-    80003578:	00e79223          	sh	a4,4(a5)
+    80002be8:	04849703          	lh	a4,72(s1)
+    80002bec:	00e79223          	sh	a4,4(a5)
   dip->nlink = ip->nlink;
-    8000357c:	04a49703          	lh	a4,74(s1)
-    80003580:	00e79323          	sh	a4,6(a5)
+    80002bf0:	04a49703          	lh	a4,74(s1)
+    80002bf4:	00e79323          	sh	a4,6(a5)
   dip->size = ip->size;
-    80003584:	44f8                	lw	a4,76(s1)
-    80003586:	c798                	sw	a4,8(a5)
+    80002bf8:	44f8                	lw	a4,76(s1)
+    80002bfa:	c798                	sw	a4,8(a5)
   memmove(dip->addrs, ip->addrs, sizeof(ip->addrs));
-    80003588:	03400613          	li	a2,52
-    8000358c:	05048593          	addi	a1,s1,80
-    80003590:	00c78513          	addi	a0,a5,12
-    80003594:	ffffd097          	auipc	ra,0xffffd
-    80003598:	7c4080e7          	jalr	1988(ra) # 80000d58 <memmove>
+    80002bfc:	03400613          	li	a2,52
+    80002c00:	05048593          	addi	a1,s1,80
+    80002c04:	00c78513          	addi	a0,a5,12
+    80002c08:	ffffd097          	auipc	ra,0xffffd
+    80002c0c:	5f2080e7          	jalr	1522(ra) # 800001fa <memmove>
   log_write(bp);
-    8000359c:	854a                	mv	a0,s2
-    8000359e:	00001097          	auipc	ra,0x1
-    800035a2:	bf6080e7          	jalr	-1034(ra) # 80004194 <log_write>
+    80002c10:	854a                	mv	a0,s2
+    80002c12:	00001097          	auipc	ra,0x1
+    80002c16:	c0e080e7          	jalr	-1010(ra) # 80003820 <log_write>
   brelse(bp);
-    800035a6:	854a                	mv	a0,s2
-    800035a8:	00000097          	auipc	ra,0x0
-    800035ac:	980080e7          	jalr	-1664(ra) # 80002f28 <brelse>
-}
-    800035b0:	60e2                	ld	ra,24(sp)
-    800035b2:	6442                	ld	s0,16(sp)
-    800035b4:	64a2                	ld	s1,8(sp)
-    800035b6:	6902                	ld	s2,0(sp)
-    800035b8:	6105                	addi	sp,sp,32
-    800035ba:	8082                	ret
-
-00000000800035bc <idup>:
-{
-    800035bc:	1101                	addi	sp,sp,-32
-    800035be:	ec06                	sd	ra,24(sp)
-    800035c0:	e822                	sd	s0,16(sp)
-    800035c2:	e426                	sd	s1,8(sp)
-    800035c4:	1000                	addi	s0,sp,32
-    800035c6:	84aa                	mv	s1,a0
-  acquire(&icache.lock);
-    800035c8:	0001d517          	auipc	a0,0x1d
-    800035cc:	89850513          	addi	a0,a0,-1896 # 8001fe60 <icache>
-    800035d0:	ffffd097          	auipc	ra,0xffffd
-    800035d4:	630080e7          	jalr	1584(ra) # 80000c00 <acquire>
+    80002c1a:	854a                	mv	a0,s2
+    80002c1c:	00000097          	auipc	ra,0x0
+    80002c20:	980080e7          	jalr	-1664(ra) # 8000259c <brelse>
+}
+    80002c24:	60e2                	ld	ra,24(sp)
+    80002c26:	6442                	ld	s0,16(sp)
+    80002c28:	64a2                	ld	s1,8(sp)
+    80002c2a:	6902                	ld	s2,0(sp)
+    80002c2c:	6105                	addi	sp,sp,32
+    80002c2e:	8082                	ret
+
+0000000080002c30 <idup>:
+{
+    80002c30:	1101                	addi	sp,sp,-32
+    80002c32:	ec06                	sd	ra,24(sp)
+    80002c34:	e822                	sd	s0,16(sp)
+    80002c36:	e426                	sd	s1,8(sp)
+    80002c38:	1000                	addi	s0,sp,32
+    80002c3a:	84aa                	mv	s1,a0
+  acquire(&itable.lock);
+    80002c3c:	00015517          	auipc	a0,0x15
+    80002c40:	b3c50513          	addi	a0,a0,-1220 # 80017778 <itable>
+    80002c44:	00003097          	auipc	ra,0x3
+    80002c48:	5e4080e7          	jalr	1508(ra) # 80006228 <acquire>
   ip->ref++;
-    800035d8:	449c                	lw	a5,8(s1)
-    800035da:	2785                	addiw	a5,a5,1
-    800035dc:	c49c                	sw	a5,8(s1)
-  release(&icache.lock);
-    800035de:	0001d517          	auipc	a0,0x1d
-    800035e2:	88250513          	addi	a0,a0,-1918 # 8001fe60 <icache>
-    800035e6:	ffffd097          	auipc	ra,0xffffd
-    800035ea:	6ce080e7          	jalr	1742(ra) # 80000cb4 <release>
-}
-    800035ee:	8526                	mv	a0,s1
-    800035f0:	60e2                	ld	ra,24(sp)
-    800035f2:	6442                	ld	s0,16(sp)
-    800035f4:	64a2                	ld	s1,8(sp)
-    800035f6:	6105                	addi	sp,sp,32
-    800035f8:	8082                	ret
-
-00000000800035fa <ilock>:
-{
-    800035fa:	1101                	addi	sp,sp,-32
-    800035fc:	ec06                	sd	ra,24(sp)
-    800035fe:	e822                	sd	s0,16(sp)
-    80003600:	e426                	sd	s1,8(sp)
-    80003602:	e04a                	sd	s2,0(sp)
-    80003604:	1000                	addi	s0,sp,32
+    80002c4c:	449c                	lw	a5,8(s1)
+    80002c4e:	2785                	addiw	a5,a5,1
+    80002c50:	c49c                	sw	a5,8(s1)
+  release(&itable.lock);
+    80002c52:	00015517          	auipc	a0,0x15
+    80002c56:	b2650513          	addi	a0,a0,-1242 # 80017778 <itable>
+    80002c5a:	00003097          	auipc	ra,0x3
+    80002c5e:	682080e7          	jalr	1666(ra) # 800062dc <release>
+}
+    80002c62:	8526                	mv	a0,s1
+    80002c64:	60e2                	ld	ra,24(sp)
+    80002c66:	6442                	ld	s0,16(sp)
+    80002c68:	64a2                	ld	s1,8(sp)
+    80002c6a:	6105                	addi	sp,sp,32
+    80002c6c:	8082                	ret
+
+0000000080002c6e <ilock>:
+{
+    80002c6e:	1101                	addi	sp,sp,-32
+    80002c70:	ec06                	sd	ra,24(sp)
+    80002c72:	e822                	sd	s0,16(sp)
+    80002c74:	e426                	sd	s1,8(sp)
+    80002c76:	e04a                	sd	s2,0(sp)
+    80002c78:	1000                	addi	s0,sp,32
   if(ip == 0 || ip->ref < 1)
-    80003606:	c115                	beqz	a0,8000362a <ilock+0x30>
-    80003608:	84aa                	mv	s1,a0
-    8000360a:	451c                	lw	a5,8(a0)
-    8000360c:	00f05f63          	blez	a5,8000362a <ilock+0x30>
+    80002c7a:	c115                	beqz	a0,80002c9e <ilock+0x30>
+    80002c7c:	84aa                	mv	s1,a0
+    80002c7e:	451c                	lw	a5,8(a0)
+    80002c80:	00f05f63          	blez	a5,80002c9e <ilock+0x30>
   acquiresleep(&ip->lock);
-    80003610:	0541                	addi	a0,a0,16
-    80003612:	00001097          	auipc	ra,0x1
-    80003616:	ca8080e7          	jalr	-856(ra) # 800042ba <acquiresleep>
+    80002c84:	0541                	addi	a0,a0,16
+    80002c86:	00001097          	auipc	ra,0x1
+    80002c8a:	cb8080e7          	jalr	-840(ra) # 8000393e <acquiresleep>
   if(ip->valid == 0){
-    8000361a:	40bc                	lw	a5,64(s1)
-    8000361c:	cf99                	beqz	a5,8000363a <ilock+0x40>
+    80002c8e:	40bc                	lw	a5,64(s1)
+    80002c90:	cf99                	beqz	a5,80002cae <ilock+0x40>
 }
-    8000361e:	60e2                	ld	ra,24(sp)
-    80003620:	6442                	ld	s0,16(sp)
-    80003622:	64a2                	ld	s1,8(sp)
-    80003624:	6902                	ld	s2,0(sp)
-    80003626:	6105                	addi	sp,sp,32
-    80003628:	8082                	ret
+    80002c92:	60e2                	ld	ra,24(sp)
+    80002c94:	6442                	ld	s0,16(sp)
+    80002c96:	64a2                	ld	s1,8(sp)
+    80002c98:	6902                	ld	s2,0(sp)
+    80002c9a:	6105                	addi	sp,sp,32
+    80002c9c:	8082                	ret
     panic("ilock");
-    8000362a:	00005517          	auipc	a0,0x5
-    8000362e:	f7e50513          	addi	a0,a0,-130 # 800085a8 <syscalls+0x180>
-    80003632:	ffffd097          	auipc	ra,0xffffd
-    80003636:	f14080e7          	jalr	-236(ra) # 80000546 <panic>
+    80002c9e:	00006517          	auipc	a0,0x6
+    80002ca2:	a6a50513          	addi	a0,a0,-1430 # 80008708 <syscall_name+0x188>
+    80002ca6:	00003097          	auipc	ra,0x3
+    80002caa:	04a080e7          	jalr	74(ra) # 80005cf0 <panic>
     bp = bread(ip->dev, IBLOCK(ip->inum, sb));
-    8000363a:	40dc                	lw	a5,4(s1)
-    8000363c:	0047d79b          	srliw	a5,a5,0x4
-    80003640:	0001d597          	auipc	a1,0x1d
-    80003644:	8185a583          	lw	a1,-2024(a1) # 8001fe58 <sb+0x18>
-    80003648:	9dbd                	addw	a1,a1,a5
-    8000364a:	4088                	lw	a0,0(s1)
-    8000364c:	fffff097          	auipc	ra,0xfffff
-    80003650:	7ac080e7          	jalr	1964(ra) # 80002df8 <bread>
-    80003654:	892a                	mv	s2,a0
+    80002cae:	40dc                	lw	a5,4(s1)
+    80002cb0:	0047d79b          	srliw	a5,a5,0x4
+    80002cb4:	00015597          	auipc	a1,0x15
+    80002cb8:	abc5a583          	lw	a1,-1348(a1) # 80017770 <sb+0x18>
+    80002cbc:	9dbd                	addw	a1,a1,a5
+    80002cbe:	4088                	lw	a0,0(s1)
+    80002cc0:	fffff097          	auipc	ra,0xfffff
+    80002cc4:	7ac080e7          	jalr	1964(ra) # 8000246c <bread>
+    80002cc8:	892a                	mv	s2,a0
     dip = (struct dinode*)bp->data + ip->inum%IPB;
-    80003656:	05850593          	addi	a1,a0,88
-    8000365a:	40dc                	lw	a5,4(s1)
-    8000365c:	8bbd                	andi	a5,a5,15
-    8000365e:	079a                	slli	a5,a5,0x6
-    80003660:	95be                	add	a1,a1,a5
+    80002cca:	05850593          	addi	a1,a0,88
+    80002cce:	40dc                	lw	a5,4(s1)
+    80002cd0:	8bbd                	andi	a5,a5,15
+    80002cd2:	079a                	slli	a5,a5,0x6
+    80002cd4:	95be                	add	a1,a1,a5
     ip->type = dip->type;
-    80003662:	00059783          	lh	a5,0(a1)
-    80003666:	04f49223          	sh	a5,68(s1)
+    80002cd6:	00059783          	lh	a5,0(a1)
+    80002cda:	04f49223          	sh	a5,68(s1)
     ip->major = dip->major;
-    8000366a:	00259783          	lh	a5,2(a1)
-    8000366e:	04f49323          	sh	a5,70(s1)
+    80002cde:	00259783          	lh	a5,2(a1)
+    80002ce2:	04f49323          	sh	a5,70(s1)
     ip->minor = dip->minor;
-    80003672:	00459783          	lh	a5,4(a1)
-    80003676:	04f49423          	sh	a5,72(s1)
+    80002ce6:	00459783          	lh	a5,4(a1)
+    80002cea:	04f49423          	sh	a5,72(s1)
     ip->nlink = dip->nlink;
-    8000367a:	00659783          	lh	a5,6(a1)
-    8000367e:	04f49523          	sh	a5,74(s1)
+    80002cee:	00659783          	lh	a5,6(a1)
+    80002cf2:	04f49523          	sh	a5,74(s1)
     ip->size = dip->size;
-    80003682:	459c                	lw	a5,8(a1)
-    80003684:	c4fc                	sw	a5,76(s1)
+    80002cf6:	459c                	lw	a5,8(a1)
+    80002cf8:	c4fc                	sw	a5,76(s1)
     memmove(ip->addrs, dip->addrs, sizeof(ip->addrs));
-    80003686:	03400613          	li	a2,52
-    8000368a:	05b1                	addi	a1,a1,12
-    8000368c:	05048513          	addi	a0,s1,80
-    80003690:	ffffd097          	auipc	ra,0xffffd
-    80003694:	6c8080e7          	jalr	1736(ra) # 80000d58 <memmove>
+    80002cfa:	03400613          	li	a2,52
+    80002cfe:	05b1                	addi	a1,a1,12
+    80002d00:	05048513          	addi	a0,s1,80
+    80002d04:	ffffd097          	auipc	ra,0xffffd
+    80002d08:	4f6080e7          	jalr	1270(ra) # 800001fa <memmove>
     brelse(bp);
-    80003698:	854a                	mv	a0,s2
-    8000369a:	00000097          	auipc	ra,0x0
-    8000369e:	88e080e7          	jalr	-1906(ra) # 80002f28 <brelse>
+    80002d0c:	854a                	mv	a0,s2
+    80002d0e:	00000097          	auipc	ra,0x0
+    80002d12:	88e080e7          	jalr	-1906(ra) # 8000259c <brelse>
     ip->valid = 1;
-    800036a2:	4785                	li	a5,1
-    800036a4:	c0bc                	sw	a5,64(s1)
+    80002d16:	4785                	li	a5,1
+    80002d18:	c0bc                	sw	a5,64(s1)
     if(ip->type == 0)
-    800036a6:	04449783          	lh	a5,68(s1)
-    800036aa:	fbb5                	bnez	a5,8000361e <ilock+0x24>
+    80002d1a:	04449783          	lh	a5,68(s1)
+    80002d1e:	fbb5                	bnez	a5,80002c92 <ilock+0x24>
       panic("ilock: no type");
-    800036ac:	00005517          	auipc	a0,0x5
-    800036b0:	f0450513          	addi	a0,a0,-252 # 800085b0 <syscalls+0x188>
-    800036b4:	ffffd097          	auipc	ra,0xffffd
-    800036b8:	e92080e7          	jalr	-366(ra) # 80000546 <panic>
-
-00000000800036bc <iunlock>:
-{
-    800036bc:	1101                	addi	sp,sp,-32
-    800036be:	ec06                	sd	ra,24(sp)
-    800036c0:	e822                	sd	s0,16(sp)
-    800036c2:	e426                	sd	s1,8(sp)
-    800036c4:	e04a                	sd	s2,0(sp)
-    800036c6:	1000                	addi	s0,sp,32
+    80002d20:	00006517          	auipc	a0,0x6
+    80002d24:	9f050513          	addi	a0,a0,-1552 # 80008710 <syscall_name+0x190>
+    80002d28:	00003097          	auipc	ra,0x3
+    80002d2c:	fc8080e7          	jalr	-56(ra) # 80005cf0 <panic>
+
+0000000080002d30 <iunlock>:
+{
+    80002d30:	1101                	addi	sp,sp,-32
+    80002d32:	ec06                	sd	ra,24(sp)
+    80002d34:	e822                	sd	s0,16(sp)
+    80002d36:	e426                	sd	s1,8(sp)
+    80002d38:	e04a                	sd	s2,0(sp)
+    80002d3a:	1000                	addi	s0,sp,32
   if(ip == 0 || !holdingsleep(&ip->lock) || ip->ref < 1)
-    800036c8:	c905                	beqz	a0,800036f8 <iunlock+0x3c>
-    800036ca:	84aa                	mv	s1,a0
-    800036cc:	01050913          	addi	s2,a0,16
-    800036d0:	854a                	mv	a0,s2
-    800036d2:	00001097          	auipc	ra,0x1
-    800036d6:	c82080e7          	jalr	-894(ra) # 80004354 <holdingsleep>
-    800036da:	cd19                	beqz	a0,800036f8 <iunlock+0x3c>
-    800036dc:	449c                	lw	a5,8(s1)
-    800036de:	00f05d63          	blez	a5,800036f8 <iunlock+0x3c>
+    80002d3c:	c905                	beqz	a0,80002d6c <iunlock+0x3c>
+    80002d3e:	84aa                	mv	s1,a0
+    80002d40:	01050913          	addi	s2,a0,16
+    80002d44:	854a                	mv	a0,s2
+    80002d46:	00001097          	auipc	ra,0x1
+    80002d4a:	c92080e7          	jalr	-878(ra) # 800039d8 <holdingsleep>
+    80002d4e:	cd19                	beqz	a0,80002d6c <iunlock+0x3c>
+    80002d50:	449c                	lw	a5,8(s1)
+    80002d52:	00f05d63          	blez	a5,80002d6c <iunlock+0x3c>
   releasesleep(&ip->lock);
-    800036e2:	854a                	mv	a0,s2
-    800036e4:	00001097          	auipc	ra,0x1
-    800036e8:	c2c080e7          	jalr	-980(ra) # 80004310 <releasesleep>
-}
-    800036ec:	60e2                	ld	ra,24(sp)
-    800036ee:	6442                	ld	s0,16(sp)
-    800036f0:	64a2                	ld	s1,8(sp)
-    800036f2:	6902                	ld	s2,0(sp)
-    800036f4:	6105                	addi	sp,sp,32
-    800036f6:	8082                	ret
+    80002d56:	854a                	mv	a0,s2
+    80002d58:	00001097          	auipc	ra,0x1
+    80002d5c:	c3c080e7          	jalr	-964(ra) # 80003994 <releasesleep>
+}
+    80002d60:	60e2                	ld	ra,24(sp)
+    80002d62:	6442                	ld	s0,16(sp)
+    80002d64:	64a2                	ld	s1,8(sp)
+    80002d66:	6902                	ld	s2,0(sp)
+    80002d68:	6105                	addi	sp,sp,32
+    80002d6a:	8082                	ret
     panic("iunlock");
-    800036f8:	00005517          	auipc	a0,0x5
-    800036fc:	ec850513          	addi	a0,a0,-312 # 800085c0 <syscalls+0x198>
-    80003700:	ffffd097          	auipc	ra,0xffffd
-    80003704:	e46080e7          	jalr	-442(ra) # 80000546 <panic>
+    80002d6c:	00006517          	auipc	a0,0x6
+    80002d70:	9b450513          	addi	a0,a0,-1612 # 80008720 <syscall_name+0x1a0>
+    80002d74:	00003097          	auipc	ra,0x3
+    80002d78:	f7c080e7          	jalr	-132(ra) # 80005cf0 <panic>
 
-0000000080003708 <itrunc>:
+0000000080002d7c <itrunc>:
 
 // Truncate inode (discard contents).
 // Caller must hold ip->lock.
 void
 itrunc(struct inode *ip)
 {
-    80003708:	7179                	addi	sp,sp,-48
-    8000370a:	f406                	sd	ra,40(sp)
-    8000370c:	f022                	sd	s0,32(sp)
-    8000370e:	ec26                	sd	s1,24(sp)
-    80003710:	e84a                	sd	s2,16(sp)
-    80003712:	e44e                	sd	s3,8(sp)
-    80003714:	e052                	sd	s4,0(sp)
-    80003716:	1800                	addi	s0,sp,48
-    80003718:	89aa                	mv	s3,a0
+    80002d7c:	7179                	addi	sp,sp,-48
+    80002d7e:	f406                	sd	ra,40(sp)
+    80002d80:	f022                	sd	s0,32(sp)
+    80002d82:	ec26                	sd	s1,24(sp)
+    80002d84:	e84a                	sd	s2,16(sp)
+    80002d86:	e44e                	sd	s3,8(sp)
+    80002d88:	e052                	sd	s4,0(sp)
+    80002d8a:	1800                	addi	s0,sp,48
+    80002d8c:	89aa                	mv	s3,a0
   int i, j;
   struct buf *bp;
   uint *a;
 
   for(i = 0; i < NDIRECT; i++){
-    8000371a:	05050493          	addi	s1,a0,80
-    8000371e:	08050913          	addi	s2,a0,128
-    80003722:	a021                	j	8000372a <itrunc+0x22>
-    80003724:	0491                	addi	s1,s1,4
-    80003726:	01248d63          	beq	s1,s2,80003740 <itrunc+0x38>
+    80002d8e:	05050493          	addi	s1,a0,80
+    80002d92:	08050913          	addi	s2,a0,128
+    80002d96:	a021                	j	80002d9e <itrunc+0x22>
+    80002d98:	0491                	addi	s1,s1,4
+    80002d9a:	01248d63          	beq	s1,s2,80002db4 <itrunc+0x38>
     if(ip->addrs[i]){
-    8000372a:	408c                	lw	a1,0(s1)
-    8000372c:	dde5                	beqz	a1,80003724 <itrunc+0x1c>
+    80002d9e:	408c                	lw	a1,0(s1)
+    80002da0:	dde5                	beqz	a1,80002d98 <itrunc+0x1c>
       bfree(ip->dev, ip->addrs[i]);
-    8000372e:	0009a503          	lw	a0,0(s3)
-    80003732:	00000097          	auipc	ra,0x0
-    80003736:	90c080e7          	jalr	-1780(ra) # 8000303e <bfree>
+    80002da2:	0009a503          	lw	a0,0(s3)
+    80002da6:	00000097          	auipc	ra,0x0
+    80002daa:	90c080e7          	jalr	-1780(ra) # 800026b2 <bfree>
       ip->addrs[i] = 0;
-    8000373a:	0004a023          	sw	zero,0(s1)
-    8000373e:	b7dd                	j	80003724 <itrunc+0x1c>
+    80002dae:	0004a023          	sw	zero,0(s1)
+    80002db2:	b7dd                	j	80002d98 <itrunc+0x1c>
     }
   }
 
   if(ip->addrs[NDIRECT]){
-    80003740:	0809a583          	lw	a1,128(s3)
-    80003744:	e185                	bnez	a1,80003764 <itrunc+0x5c>
+    80002db4:	0809a583          	lw	a1,128(s3)
+    80002db8:	e185                	bnez	a1,80002dd8 <itrunc+0x5c>
     brelse(bp);
     bfree(ip->dev, ip->addrs[NDIRECT]);
     ip->addrs[NDIRECT] = 0;
   }
 
   ip->size = 0;
-    80003746:	0409a623          	sw	zero,76(s3)
+    80002dba:	0409a623          	sw	zero,76(s3)
   iupdate(ip);
-    8000374a:	854e                	mv	a0,s3
-    8000374c:	00000097          	auipc	ra,0x0
-    80003750:	de2080e7          	jalr	-542(ra) # 8000352e <iupdate>
-}
-    80003754:	70a2                	ld	ra,40(sp)
-    80003756:	7402                	ld	s0,32(sp)
-    80003758:	64e2                	ld	s1,24(sp)
-    8000375a:	6942                	ld	s2,16(sp)
-    8000375c:	69a2                	ld	s3,8(sp)
-    8000375e:	6a02                	ld	s4,0(sp)
-    80003760:	6145                	addi	sp,sp,48
-    80003762:	8082                	ret
+    80002dbe:	854e                	mv	a0,s3
+    80002dc0:	00000097          	auipc	ra,0x0
+    80002dc4:	de2080e7          	jalr	-542(ra) # 80002ba2 <iupdate>
+}
+    80002dc8:	70a2                	ld	ra,40(sp)
+    80002dca:	7402                	ld	s0,32(sp)
+    80002dcc:	64e2                	ld	s1,24(sp)
+    80002dce:	6942                	ld	s2,16(sp)
+    80002dd0:	69a2                	ld	s3,8(sp)
+    80002dd2:	6a02                	ld	s4,0(sp)
+    80002dd4:	6145                	addi	sp,sp,48
+    80002dd6:	8082                	ret
     bp = bread(ip->dev, ip->addrs[NDIRECT]);
-    80003764:	0009a503          	lw	a0,0(s3)
-    80003768:	fffff097          	auipc	ra,0xfffff
-    8000376c:	690080e7          	jalr	1680(ra) # 80002df8 <bread>
-    80003770:	8a2a                	mv	s4,a0
+    80002dd8:	0009a503          	lw	a0,0(s3)
+    80002ddc:	fffff097          	auipc	ra,0xfffff
+    80002de0:	690080e7          	jalr	1680(ra) # 8000246c <bread>
+    80002de4:	8a2a                	mv	s4,a0
     for(j = 0; j < NINDIRECT; j++){
-    80003772:	05850493          	addi	s1,a0,88
-    80003776:	45850913          	addi	s2,a0,1112
-    8000377a:	a021                	j	80003782 <itrunc+0x7a>
-    8000377c:	0491                	addi	s1,s1,4
-    8000377e:	01248b63          	beq	s1,s2,80003794 <itrunc+0x8c>
+    80002de6:	05850493          	addi	s1,a0,88
+    80002dea:	45850913          	addi	s2,a0,1112
+    80002dee:	a021                	j	80002df6 <itrunc+0x7a>
+    80002df0:	0491                	addi	s1,s1,4
+    80002df2:	01248b63          	beq	s1,s2,80002e08 <itrunc+0x8c>
       if(a[j])
-    80003782:	408c                	lw	a1,0(s1)
-    80003784:	dde5                	beqz	a1,8000377c <itrunc+0x74>
+    80002df6:	408c                	lw	a1,0(s1)
+    80002df8:	dde5                	beqz	a1,80002df0 <itrunc+0x74>
         bfree(ip->dev, a[j]);
-    80003786:	0009a503          	lw	a0,0(s3)
-    8000378a:	00000097          	auipc	ra,0x0
-    8000378e:	8b4080e7          	jalr	-1868(ra) # 8000303e <bfree>
-    80003792:	b7ed                	j	8000377c <itrunc+0x74>
+    80002dfa:	0009a503          	lw	a0,0(s3)
+    80002dfe:	00000097          	auipc	ra,0x0
+    80002e02:	8b4080e7          	jalr	-1868(ra) # 800026b2 <bfree>
+    80002e06:	b7ed                	j	80002df0 <itrunc+0x74>
     brelse(bp);
-    80003794:	8552                	mv	a0,s4
-    80003796:	fffff097          	auipc	ra,0xfffff
-    8000379a:	792080e7          	jalr	1938(ra) # 80002f28 <brelse>
+    80002e08:	8552                	mv	a0,s4
+    80002e0a:	fffff097          	auipc	ra,0xfffff
+    80002e0e:	792080e7          	jalr	1938(ra) # 8000259c <brelse>
     bfree(ip->dev, ip->addrs[NDIRECT]);
-    8000379e:	0809a583          	lw	a1,128(s3)
-    800037a2:	0009a503          	lw	a0,0(s3)
-    800037a6:	00000097          	auipc	ra,0x0
-    800037aa:	898080e7          	jalr	-1896(ra) # 8000303e <bfree>
+    80002e12:	0809a583          	lw	a1,128(s3)
+    80002e16:	0009a503          	lw	a0,0(s3)
+    80002e1a:	00000097          	auipc	ra,0x0
+    80002e1e:	898080e7          	jalr	-1896(ra) # 800026b2 <bfree>
     ip->addrs[NDIRECT] = 0;
-    800037ae:	0809a023          	sw	zero,128(s3)
-    800037b2:	bf51                	j	80003746 <itrunc+0x3e>
+    80002e22:	0809a023          	sw	zero,128(s3)
+    80002e26:	bf51                	j	80002dba <itrunc+0x3e>
 
-00000000800037b4 <iput>:
+0000000080002e28 <iput>:
 {
-    800037b4:	1101                	addi	sp,sp,-32
-    800037b6:	ec06                	sd	ra,24(sp)
-    800037b8:	e822                	sd	s0,16(sp)
-    800037ba:	e426                	sd	s1,8(sp)
-    800037bc:	e04a                	sd	s2,0(sp)
-    800037be:	1000                	addi	s0,sp,32
-    800037c0:	84aa                	mv	s1,a0
-  acquire(&icache.lock);
-    800037c2:	0001c517          	auipc	a0,0x1c
-    800037c6:	69e50513          	addi	a0,a0,1694 # 8001fe60 <icache>
-    800037ca:	ffffd097          	auipc	ra,0xffffd
-    800037ce:	436080e7          	jalr	1078(ra) # 80000c00 <acquire>
+    80002e28:	1101                	addi	sp,sp,-32
+    80002e2a:	ec06                	sd	ra,24(sp)
+    80002e2c:	e822                	sd	s0,16(sp)
+    80002e2e:	e426                	sd	s1,8(sp)
+    80002e30:	e04a                	sd	s2,0(sp)
+    80002e32:	1000                	addi	s0,sp,32
+    80002e34:	84aa                	mv	s1,a0
+  acquire(&itable.lock);
+    80002e36:	00015517          	auipc	a0,0x15
+    80002e3a:	94250513          	addi	a0,a0,-1726 # 80017778 <itable>
+    80002e3e:	00003097          	auipc	ra,0x3
+    80002e42:	3ea080e7          	jalr	1002(ra) # 80006228 <acquire>
   if(ip->ref == 1 && ip->valid && ip->nlink == 0){
-    800037d2:	4498                	lw	a4,8(s1)
-    800037d4:	4785                	li	a5,1
-    800037d6:	02f70363          	beq	a4,a5,800037fc <iput+0x48>
+    80002e46:	4498                	lw	a4,8(s1)
+    80002e48:	4785                	li	a5,1
+    80002e4a:	02f70363          	beq	a4,a5,80002e70 <iput+0x48>
   ip->ref--;
-    800037da:	449c                	lw	a5,8(s1)
-    800037dc:	37fd                	addiw	a5,a5,-1
-    800037de:	c49c                	sw	a5,8(s1)
-  release(&icache.lock);
-    800037e0:	0001c517          	auipc	a0,0x1c
-    800037e4:	68050513          	addi	a0,a0,1664 # 8001fe60 <icache>
-    800037e8:	ffffd097          	auipc	ra,0xffffd
-    800037ec:	4cc080e7          	jalr	1228(ra) # 80000cb4 <release>
-}
-    800037f0:	60e2                	ld	ra,24(sp)
-    800037f2:	6442                	ld	s0,16(sp)
-    800037f4:	64a2                	ld	s1,8(sp)
-    800037f6:	6902                	ld	s2,0(sp)
-    800037f8:	6105                	addi	sp,sp,32
-    800037fa:	8082                	ret
+    80002e4e:	449c                	lw	a5,8(s1)
+    80002e50:	37fd                	addiw	a5,a5,-1
+    80002e52:	c49c                	sw	a5,8(s1)
+  release(&itable.lock);
+    80002e54:	00015517          	auipc	a0,0x15
+    80002e58:	92450513          	addi	a0,a0,-1756 # 80017778 <itable>
+    80002e5c:	00003097          	auipc	ra,0x3
+    80002e60:	480080e7          	jalr	1152(ra) # 800062dc <release>
+}
+    80002e64:	60e2                	ld	ra,24(sp)
+    80002e66:	6442                	ld	s0,16(sp)
+    80002e68:	64a2                	ld	s1,8(sp)
+    80002e6a:	6902                	ld	s2,0(sp)
+    80002e6c:	6105                	addi	sp,sp,32
+    80002e6e:	8082                	ret
   if(ip->ref == 1 && ip->valid && ip->nlink == 0){
-    800037fc:	40bc                	lw	a5,64(s1)
-    800037fe:	dff1                	beqz	a5,800037da <iput+0x26>
-    80003800:	04a49783          	lh	a5,74(s1)
-    80003804:	fbf9                	bnez	a5,800037da <iput+0x26>
+    80002e70:	40bc                	lw	a5,64(s1)
+    80002e72:	dff1                	beqz	a5,80002e4e <iput+0x26>
+    80002e74:	04a49783          	lh	a5,74(s1)
+    80002e78:	fbf9                	bnez	a5,80002e4e <iput+0x26>
     acquiresleep(&ip->lock);
-    80003806:	01048913          	addi	s2,s1,16
-    8000380a:	854a                	mv	a0,s2
-    8000380c:	00001097          	auipc	ra,0x1
-    80003810:	aae080e7          	jalr	-1362(ra) # 800042ba <acquiresleep>
-    release(&icache.lock);
-    80003814:	0001c517          	auipc	a0,0x1c
-    80003818:	64c50513          	addi	a0,a0,1612 # 8001fe60 <icache>
-    8000381c:	ffffd097          	auipc	ra,0xffffd
-    80003820:	498080e7          	jalr	1176(ra) # 80000cb4 <release>
+    80002e7a:	01048913          	addi	s2,s1,16
+    80002e7e:	854a                	mv	a0,s2
+    80002e80:	00001097          	auipc	ra,0x1
+    80002e84:	abe080e7          	jalr	-1346(ra) # 8000393e <acquiresleep>
+    release(&itable.lock);
+    80002e88:	00015517          	auipc	a0,0x15
+    80002e8c:	8f050513          	addi	a0,a0,-1808 # 80017778 <itable>
+    80002e90:	00003097          	auipc	ra,0x3
+    80002e94:	44c080e7          	jalr	1100(ra) # 800062dc <release>
     itrunc(ip);
-    80003824:	8526                	mv	a0,s1
-    80003826:	00000097          	auipc	ra,0x0
-    8000382a:	ee2080e7          	jalr	-286(ra) # 80003708 <itrunc>
+    80002e98:	8526                	mv	a0,s1
+    80002e9a:	00000097          	auipc	ra,0x0
+    80002e9e:	ee2080e7          	jalr	-286(ra) # 80002d7c <itrunc>
     ip->type = 0;
-    8000382e:	04049223          	sh	zero,68(s1)
+    80002ea2:	04049223          	sh	zero,68(s1)
     iupdate(ip);
-    80003832:	8526                	mv	a0,s1
-    80003834:	00000097          	auipc	ra,0x0
-    80003838:	cfa080e7          	jalr	-774(ra) # 8000352e <iupdate>
+    80002ea6:	8526                	mv	a0,s1
+    80002ea8:	00000097          	auipc	ra,0x0
+    80002eac:	cfa080e7          	jalr	-774(ra) # 80002ba2 <iupdate>
     ip->valid = 0;
-    8000383c:	0404a023          	sw	zero,64(s1)
+    80002eb0:	0404a023          	sw	zero,64(s1)
     releasesleep(&ip->lock);
-    80003840:	854a                	mv	a0,s2
-    80003842:	00001097          	auipc	ra,0x1
-    80003846:	ace080e7          	jalr	-1330(ra) # 80004310 <releasesleep>
-    acquire(&icache.lock);
-    8000384a:	0001c517          	auipc	a0,0x1c
-    8000384e:	61650513          	addi	a0,a0,1558 # 8001fe60 <icache>
-    80003852:	ffffd097          	auipc	ra,0xffffd
-    80003856:	3ae080e7          	jalr	942(ra) # 80000c00 <acquire>
-    8000385a:	b741                	j	800037da <iput+0x26>
-
-000000008000385c <iunlockput>:
-{
-    8000385c:	1101                	addi	sp,sp,-32
-    8000385e:	ec06                	sd	ra,24(sp)
-    80003860:	e822                	sd	s0,16(sp)
-    80003862:	e426                	sd	s1,8(sp)
-    80003864:	1000                	addi	s0,sp,32
-    80003866:	84aa                	mv	s1,a0
+    80002eb4:	854a                	mv	a0,s2
+    80002eb6:	00001097          	auipc	ra,0x1
+    80002eba:	ade080e7          	jalr	-1314(ra) # 80003994 <releasesleep>
+    acquire(&itable.lock);
+    80002ebe:	00015517          	auipc	a0,0x15
+    80002ec2:	8ba50513          	addi	a0,a0,-1862 # 80017778 <itable>
+    80002ec6:	00003097          	auipc	ra,0x3
+    80002eca:	362080e7          	jalr	866(ra) # 80006228 <acquire>
+    80002ece:	b741                	j	80002e4e <iput+0x26>
+
+0000000080002ed0 <iunlockput>:
+{
+    80002ed0:	1101                	addi	sp,sp,-32
+    80002ed2:	ec06                	sd	ra,24(sp)
+    80002ed4:	e822                	sd	s0,16(sp)
+    80002ed6:	e426                	sd	s1,8(sp)
+    80002ed8:	1000                	addi	s0,sp,32
+    80002eda:	84aa                	mv	s1,a0
   iunlock(ip);
-    80003868:	00000097          	auipc	ra,0x0
-    8000386c:	e54080e7          	jalr	-428(ra) # 800036bc <iunlock>
+    80002edc:	00000097          	auipc	ra,0x0
+    80002ee0:	e54080e7          	jalr	-428(ra) # 80002d30 <iunlock>
   iput(ip);
-    80003870:	8526                	mv	a0,s1
-    80003872:	00000097          	auipc	ra,0x0
-    80003876:	f42080e7          	jalr	-190(ra) # 800037b4 <iput>
-}
-    8000387a:	60e2                	ld	ra,24(sp)
-    8000387c:	6442                	ld	s0,16(sp)
-    8000387e:	64a2                	ld	s1,8(sp)
-    80003880:	6105                	addi	sp,sp,32
-    80003882:	8082                	ret
+    80002ee4:	8526                	mv	a0,s1
+    80002ee6:	00000097          	auipc	ra,0x0
+    80002eea:	f42080e7          	jalr	-190(ra) # 80002e28 <iput>
+}
+    80002eee:	60e2                	ld	ra,24(sp)
+    80002ef0:	6442                	ld	s0,16(sp)
+    80002ef2:	64a2                	ld	s1,8(sp)
+    80002ef4:	6105                	addi	sp,sp,32
+    80002ef6:	8082                	ret
 
-0000000080003884 <stati>:
+0000000080002ef8 <stati>:
 
 // Copy stat information from inode.
 // Caller must hold ip->lock.
 void
 stati(struct inode *ip, struct stat *st)
 {
-    80003884:	1141                	addi	sp,sp,-16
-    80003886:	e422                	sd	s0,8(sp)
-    80003888:	0800                	addi	s0,sp,16
+    80002ef8:	1141                	addi	sp,sp,-16
+    80002efa:	e422                	sd	s0,8(sp)
+    80002efc:	0800                	addi	s0,sp,16
   st->dev = ip->dev;
-    8000388a:	411c                	lw	a5,0(a0)
-    8000388c:	c19c                	sw	a5,0(a1)
+    80002efe:	411c                	lw	a5,0(a0)
+    80002f00:	c19c                	sw	a5,0(a1)
   st->ino = ip->inum;
-    8000388e:	415c                	lw	a5,4(a0)
-    80003890:	c1dc                	sw	a5,4(a1)
+    80002f02:	415c                	lw	a5,4(a0)
+    80002f04:	c1dc                	sw	a5,4(a1)
   st->type = ip->type;
-    80003892:	04451783          	lh	a5,68(a0)
-    80003896:	00f59423          	sh	a5,8(a1)
+    80002f06:	04451783          	lh	a5,68(a0)
+    80002f0a:	00f59423          	sh	a5,8(a1)
   st->nlink = ip->nlink;
-    8000389a:	04a51783          	lh	a5,74(a0)
-    8000389e:	00f59523          	sh	a5,10(a1)
+    80002f0e:	04a51783          	lh	a5,74(a0)
+    80002f12:	00f59523          	sh	a5,10(a1)
   st->size = ip->size;
-    800038a2:	04c56783          	lwu	a5,76(a0)
-    800038a6:	e99c                	sd	a5,16(a1)
+    80002f16:	04c56783          	lwu	a5,76(a0)
+    80002f1a:	e99c                	sd	a5,16(a1)
 }
-    800038a8:	6422                	ld	s0,8(sp)
-    800038aa:	0141                	addi	sp,sp,16
-    800038ac:	8082                	ret
+    80002f1c:	6422                	ld	s0,8(sp)
+    80002f1e:	0141                	addi	sp,sp,16
+    80002f20:	8082                	ret
 
-00000000800038ae <readi>:
+0000000080002f22 <readi>:
 readi(struct inode *ip, int user_dst, uint64 dst, uint off, uint n)
 {
   uint tot, m;
   struct buf *bp;
 
   if(off > ip->size || off + n < off)
-    800038ae:	457c                	lw	a5,76(a0)
-    800038b0:	0ed7e863          	bltu	a5,a3,800039a0 <readi+0xf2>
+    80002f22:	457c                	lw	a5,76(a0)
+    80002f24:	0ed7e963          	bltu	a5,a3,80003016 <readi+0xf4>
 {
-    800038b4:	7159                	addi	sp,sp,-112
-    800038b6:	f486                	sd	ra,104(sp)
-    800038b8:	f0a2                	sd	s0,96(sp)
-    800038ba:	eca6                	sd	s1,88(sp)
-    800038bc:	e8ca                	sd	s2,80(sp)
-    800038be:	e4ce                	sd	s3,72(sp)
-    800038c0:	e0d2                	sd	s4,64(sp)
-    800038c2:	fc56                	sd	s5,56(sp)
-    800038c4:	f85a                	sd	s6,48(sp)
-    800038c6:	f45e                	sd	s7,40(sp)
-    800038c8:	f062                	sd	s8,32(sp)
-    800038ca:	ec66                	sd	s9,24(sp)
-    800038cc:	e86a                	sd	s10,16(sp)
-    800038ce:	e46e                	sd	s11,8(sp)
-    800038d0:	1880                	addi	s0,sp,112
-    800038d2:	8baa                	mv	s7,a0
-    800038d4:	8c2e                	mv	s8,a1
-    800038d6:	8ab2                	mv	s5,a2
-    800038d8:	84b6                	mv	s1,a3
-    800038da:	8b3a                	mv	s6,a4
+    80002f28:	7159                	addi	sp,sp,-112
+    80002f2a:	f486                	sd	ra,104(sp)
+    80002f2c:	f0a2                	sd	s0,96(sp)
+    80002f2e:	eca6                	sd	s1,88(sp)
+    80002f30:	e8ca                	sd	s2,80(sp)
+    80002f32:	e4ce                	sd	s3,72(sp)
+    80002f34:	e0d2                	sd	s4,64(sp)
+    80002f36:	fc56                	sd	s5,56(sp)
+    80002f38:	f85a                	sd	s6,48(sp)
+    80002f3a:	f45e                	sd	s7,40(sp)
+    80002f3c:	f062                	sd	s8,32(sp)
+    80002f3e:	ec66                	sd	s9,24(sp)
+    80002f40:	e86a                	sd	s10,16(sp)
+    80002f42:	e46e                	sd	s11,8(sp)
+    80002f44:	1880                	addi	s0,sp,112
+    80002f46:	8baa                	mv	s7,a0
+    80002f48:	8c2e                	mv	s8,a1
+    80002f4a:	8ab2                	mv	s5,a2
+    80002f4c:	84b6                	mv	s1,a3
+    80002f4e:	8b3a                	mv	s6,a4
   if(off > ip->size || off + n < off)
-    800038dc:	9f35                	addw	a4,a4,a3
+    80002f50:	9f35                	addw	a4,a4,a3
     return 0;
-    800038de:	4501                	li	a0,0
+    80002f52:	4501                	li	a0,0
   if(off > ip->size || off + n < off)
-    800038e0:	08d76f63          	bltu	a4,a3,8000397e <readi+0xd0>
+    80002f54:	0ad76063          	bltu	a4,a3,80002ff4 <readi+0xd2>
   if(off + n > ip->size)
-    800038e4:	00e7f463          	bgeu	a5,a4,800038ec <readi+0x3e>
+    80002f58:	00e7f463          	bgeu	a5,a4,80002f60 <readi+0x3e>
     n = ip->size - off;
-    800038e8:	40d78b3b          	subw	s6,a5,a3
+    80002f5c:	40d78b3b          	subw	s6,a5,a3
 
   for(tot=0; tot<n; tot+=m, off+=m, dst+=m){
-    800038ec:	0a0b0863          	beqz	s6,8000399c <readi+0xee>
-    800038f0:	4981                	li	s3,0
+    80002f60:	0a0b0963          	beqz	s6,80003012 <readi+0xf0>
+    80002f64:	4981                	li	s3,0
     bp = bread(ip->dev, bmap(ip, off/BSIZE));
     m = min(n - tot, BSIZE - off%BSIZE);
-    800038f2:	40000d13          	li	s10,1024
+    80002f66:	40000d13          	li	s10,1024
     if(either_copyout(user_dst, dst, bp->data + (off % BSIZE), m) == -1) {
-    800038f6:	5cfd                	li	s9,-1
-    800038f8:	a82d                	j	80003932 <readi+0x84>
-    800038fa:	020a1d93          	slli	s11,s4,0x20
-    800038fe:	020ddd93          	srli	s11,s11,0x20
-    80003902:	05890613          	addi	a2,s2,88
-    80003906:	86ee                	mv	a3,s11
-    80003908:	963a                	add	a2,a2,a4
-    8000390a:	85d6                	mv	a1,s5
-    8000390c:	8562                	mv	a0,s8
-    8000390e:	fffff097          	auipc	ra,0xfffff
-    80003912:	b2c080e7          	jalr	-1236(ra) # 8000243a <either_copyout>
-    80003916:	05950d63          	beq	a0,s9,80003970 <readi+0xc2>
+    80002f6a:	5cfd                	li	s9,-1
+    80002f6c:	a82d                	j	80002fa6 <readi+0x84>
+    80002f6e:	020a1d93          	slli	s11,s4,0x20
+    80002f72:	020ddd93          	srli	s11,s11,0x20
+    80002f76:	05890613          	addi	a2,s2,88
+    80002f7a:	86ee                	mv	a3,s11
+    80002f7c:	963a                	add	a2,a2,a4
+    80002f7e:	85d6                	mv	a1,s5
+    80002f80:	8562                	mv	a0,s8
+    80002f82:	fffff097          	auipc	ra,0xfffff
+    80002f86:	a2c080e7          	jalr	-1492(ra) # 800019ae <either_copyout>
+    80002f8a:	05950d63          	beq	a0,s9,80002fe4 <readi+0xc2>
       brelse(bp);
+      tot = -1;
       break;
     }
     brelse(bp);
-    8000391a:	854a                	mv	a0,s2
-    8000391c:	fffff097          	auipc	ra,0xfffff
-    80003920:	60c080e7          	jalr	1548(ra) # 80002f28 <brelse>
+    80002f8e:	854a                	mv	a0,s2
+    80002f90:	fffff097          	auipc	ra,0xfffff
+    80002f94:	60c080e7          	jalr	1548(ra) # 8000259c <brelse>
   for(tot=0; tot<n; tot+=m, off+=m, dst+=m){
-    80003924:	013a09bb          	addw	s3,s4,s3
-    80003928:	009a04bb          	addw	s1,s4,s1
-    8000392c:	9aee                	add	s5,s5,s11
-    8000392e:	0569f663          	bgeu	s3,s6,8000397a <readi+0xcc>
+    80002f98:	013a09bb          	addw	s3,s4,s3
+    80002f9c:	009a04bb          	addw	s1,s4,s1
+    80002fa0:	9aee                	add	s5,s5,s11
+    80002fa2:	0569f763          	bgeu	s3,s6,80002ff0 <readi+0xce>
     bp = bread(ip->dev, bmap(ip, off/BSIZE));
-    80003932:	000ba903          	lw	s2,0(s7)
-    80003936:	00a4d59b          	srliw	a1,s1,0xa
-    8000393a:	855e                	mv	a0,s7
-    8000393c:	00000097          	auipc	ra,0x0
-    80003940:	8ac080e7          	jalr	-1876(ra) # 800031e8 <bmap>
-    80003944:	0005059b          	sext.w	a1,a0
-    80003948:	854a                	mv	a0,s2
-    8000394a:	fffff097          	auipc	ra,0xfffff
-    8000394e:	4ae080e7          	jalr	1198(ra) # 80002df8 <bread>
-    80003952:	892a                	mv	s2,a0
+    80002fa6:	000ba903          	lw	s2,0(s7)
+    80002faa:	00a4d59b          	srliw	a1,s1,0xa
+    80002fae:	855e                	mv	a0,s7
+    80002fb0:	00000097          	auipc	ra,0x0
+    80002fb4:	8ac080e7          	jalr	-1876(ra) # 8000285c <bmap>
+    80002fb8:	0005059b          	sext.w	a1,a0
+    80002fbc:	854a                	mv	a0,s2
+    80002fbe:	fffff097          	auipc	ra,0xfffff
+    80002fc2:	4ae080e7          	jalr	1198(ra) # 8000246c <bread>
+    80002fc6:	892a                	mv	s2,a0
     m = min(n - tot, BSIZE - off%BSIZE);
-    80003954:	3ff4f713          	andi	a4,s1,1023
-    80003958:	40ed07bb          	subw	a5,s10,a4
-    8000395c:	413b06bb          	subw	a3,s6,s3
-    80003960:	8a3e                	mv	s4,a5
-    80003962:	2781                	sext.w	a5,a5
-    80003964:	0006861b          	sext.w	a2,a3
-    80003968:	f8f679e3          	bgeu	a2,a5,800038fa <readi+0x4c>
-    8000396c:	8a36                	mv	s4,a3
-    8000396e:	b771                	j	800038fa <readi+0x4c>
+    80002fc8:	3ff4f713          	andi	a4,s1,1023
+    80002fcc:	40ed07bb          	subw	a5,s10,a4
+    80002fd0:	413b06bb          	subw	a3,s6,s3
+    80002fd4:	8a3e                	mv	s4,a5
+    80002fd6:	2781                	sext.w	a5,a5
+    80002fd8:	0006861b          	sext.w	a2,a3
+    80002fdc:	f8f679e3          	bgeu	a2,a5,80002f6e <readi+0x4c>
+    80002fe0:	8a36                	mv	s4,a3
+    80002fe2:	b771                	j	80002f6e <readi+0x4c>
       brelse(bp);
-    80003970:	854a                	mv	a0,s2
-    80003972:	fffff097          	auipc	ra,0xfffff
-    80003976:	5b6080e7          	jalr	1462(ra) # 80002f28 <brelse>
+    80002fe4:	854a                	mv	a0,s2
+    80002fe6:	fffff097          	auipc	ra,0xfffff
+    80002fea:	5b6080e7          	jalr	1462(ra) # 8000259c <brelse>
+      tot = -1;
+    80002fee:	59fd                	li	s3,-1
   }
   return tot;
-    8000397a:	0009851b          	sext.w	a0,s3
+    80002ff0:	0009851b          	sext.w	a0,s3
 }
-    8000397e:	70a6                	ld	ra,104(sp)
-    80003980:	7406                	ld	s0,96(sp)
-    80003982:	64e6                	ld	s1,88(sp)
-    80003984:	6946                	ld	s2,80(sp)
-    80003986:	69a6                	ld	s3,72(sp)
-    80003988:	6a06                	ld	s4,64(sp)
-    8000398a:	7ae2                	ld	s5,56(sp)
-    8000398c:	7b42                	ld	s6,48(sp)
-    8000398e:	7ba2                	ld	s7,40(sp)
-    80003990:	7c02                	ld	s8,32(sp)
-    80003992:	6ce2                	ld	s9,24(sp)
-    80003994:	6d42                	ld	s10,16(sp)
-    80003996:	6da2                	ld	s11,8(sp)
-    80003998:	6165                	addi	sp,sp,112
-    8000399a:	8082                	ret
+    80002ff4:	70a6                	ld	ra,104(sp)
+    80002ff6:	7406                	ld	s0,96(sp)
+    80002ff8:	64e6                	ld	s1,88(sp)
+    80002ffa:	6946                	ld	s2,80(sp)
+    80002ffc:	69a6                	ld	s3,72(sp)
+    80002ffe:	6a06                	ld	s4,64(sp)
+    80003000:	7ae2                	ld	s5,56(sp)
+    80003002:	7b42                	ld	s6,48(sp)
+    80003004:	7ba2                	ld	s7,40(sp)
+    80003006:	7c02                	ld	s8,32(sp)
+    80003008:	6ce2                	ld	s9,24(sp)
+    8000300a:	6d42                	ld	s10,16(sp)
+    8000300c:	6da2                	ld	s11,8(sp)
+    8000300e:	6165                	addi	sp,sp,112
+    80003010:	8082                	ret
   for(tot=0; tot<n; tot+=m, off+=m, dst+=m){
-    8000399c:	89da                	mv	s3,s6
-    8000399e:	bff1                	j	8000397a <readi+0xcc>
+    80003012:	89da                	mv	s3,s6
+    80003014:	bff1                	j	80002ff0 <readi+0xce>
     return 0;
-    800039a0:	4501                	li	a0,0
+    80003016:	4501                	li	a0,0
 }
-    800039a2:	8082                	ret
+    80003018:	8082                	ret
 
-00000000800039a4 <writei>:
+000000008000301a <writei>:
 writei(struct inode *ip, int user_src, uint64 src, uint off, uint n)
 {
   uint tot, m;
   struct buf *bp;
 
   if(off > ip->size || off + n < off)
-    800039a4:	457c                	lw	a5,76(a0)
-    800039a6:	10d7e663          	bltu	a5,a3,80003ab2 <writei+0x10e>
+    8000301a:	457c                	lw	a5,76(a0)
+    8000301c:	10d7e863          	bltu	a5,a3,8000312c <writei+0x112>
 {
-    800039aa:	7159                	addi	sp,sp,-112
-    800039ac:	f486                	sd	ra,104(sp)
-    800039ae:	f0a2                	sd	s0,96(sp)
-    800039b0:	eca6                	sd	s1,88(sp)
-    800039b2:	e8ca                	sd	s2,80(sp)
-    800039b4:	e4ce                	sd	s3,72(sp)
-    800039b6:	e0d2                	sd	s4,64(sp)
-    800039b8:	fc56                	sd	s5,56(sp)
-    800039ba:	f85a                	sd	s6,48(sp)
-    800039bc:	f45e                	sd	s7,40(sp)
-    800039be:	f062                	sd	s8,32(sp)
-    800039c0:	ec66                	sd	s9,24(sp)
-    800039c2:	e86a                	sd	s10,16(sp)
-    800039c4:	e46e                	sd	s11,8(sp)
-    800039c6:	1880                	addi	s0,sp,112
-    800039c8:	8baa                	mv	s7,a0
-    800039ca:	8c2e                	mv	s8,a1
-    800039cc:	8ab2                	mv	s5,a2
-    800039ce:	8936                	mv	s2,a3
-    800039d0:	8b3a                	mv	s6,a4
+    80003020:	7159                	addi	sp,sp,-112
+    80003022:	f486                	sd	ra,104(sp)
+    80003024:	f0a2                	sd	s0,96(sp)
+    80003026:	eca6                	sd	s1,88(sp)
+    80003028:	e8ca                	sd	s2,80(sp)
+    8000302a:	e4ce                	sd	s3,72(sp)
+    8000302c:	e0d2                	sd	s4,64(sp)
+    8000302e:	fc56                	sd	s5,56(sp)
+    80003030:	f85a                	sd	s6,48(sp)
+    80003032:	f45e                	sd	s7,40(sp)
+    80003034:	f062                	sd	s8,32(sp)
+    80003036:	ec66                	sd	s9,24(sp)
+    80003038:	e86a                	sd	s10,16(sp)
+    8000303a:	e46e                	sd	s11,8(sp)
+    8000303c:	1880                	addi	s0,sp,112
+    8000303e:	8b2a                	mv	s6,a0
+    80003040:	8c2e                	mv	s8,a1
+    80003042:	8ab2                	mv	s5,a2
+    80003044:	8936                	mv	s2,a3
+    80003046:	8bba                	mv	s7,a4
   if(off > ip->size || off + n < off)
-    800039d2:	00e687bb          	addw	a5,a3,a4
-    800039d6:	0ed7e063          	bltu	a5,a3,80003ab6 <writei+0x112>
+    80003048:	00e687bb          	addw	a5,a3,a4
+    8000304c:	0ed7e263          	bltu	a5,a3,80003130 <writei+0x116>
     return -1;
   if(off + n > MAXFILE*BSIZE)
-    800039da:	00043737          	lui	a4,0x43
-    800039de:	0cf76e63          	bltu	a4,a5,80003aba <writei+0x116>
+    80003050:	00043737          	lui	a4,0x43
+    80003054:	0ef76063          	bltu	a4,a5,80003134 <writei+0x11a>
     return -1;
 
   for(tot=0; tot<n; tot+=m, off+=m, src+=m){
-    800039e2:	0a0b0763          	beqz	s6,80003a90 <writei+0xec>
-    800039e6:	4a01                	li	s4,0
+    80003058:	0c0b8863          	beqz	s7,80003128 <writei+0x10e>
+    8000305c:	4a01                	li	s4,0
     bp = bread(ip->dev, bmap(ip, off/BSIZE));
     m = min(n - tot, BSIZE - off%BSIZE);
-    800039e8:	40000d13          	li	s10,1024
+    8000305e:	40000d13          	li	s10,1024
     if(either_copyin(bp->data + (off % BSIZE), user_src, src, m) == -1) {
-    800039ec:	5cfd                	li	s9,-1
-    800039ee:	a091                	j	80003a32 <writei+0x8e>
-    800039f0:	02099d93          	slli	s11,s3,0x20
-    800039f4:	020ddd93          	srli	s11,s11,0x20
-    800039f8:	05848513          	addi	a0,s1,88
-    800039fc:	86ee                	mv	a3,s11
-    800039fe:	8656                	mv	a2,s5
-    80003a00:	85e2                	mv	a1,s8
-    80003a02:	953a                	add	a0,a0,a4
-    80003a04:	fffff097          	auipc	ra,0xfffff
-    80003a08:	a8c080e7          	jalr	-1396(ra) # 80002490 <either_copyin>
-    80003a0c:	07950263          	beq	a0,s9,80003a70 <writei+0xcc>
+    80003062:	5cfd                	li	s9,-1
+    80003064:	a091                	j	800030a8 <writei+0x8e>
+    80003066:	02099d93          	slli	s11,s3,0x20
+    8000306a:	020ddd93          	srli	s11,s11,0x20
+    8000306e:	05848513          	addi	a0,s1,88
+    80003072:	86ee                	mv	a3,s11
+    80003074:	8656                	mv	a2,s5
+    80003076:	85e2                	mv	a1,s8
+    80003078:	953a                	add	a0,a0,a4
+    8000307a:	fffff097          	auipc	ra,0xfffff
+    8000307e:	98a080e7          	jalr	-1654(ra) # 80001a04 <either_copyin>
+    80003082:	07950263          	beq	a0,s9,800030e6 <writei+0xcc>
       brelse(bp);
       break;
     }
     log_write(bp);
-    80003a10:	8526                	mv	a0,s1
-    80003a12:	00000097          	auipc	ra,0x0
-    80003a16:	782080e7          	jalr	1922(ra) # 80004194 <log_write>
+    80003086:	8526                	mv	a0,s1
+    80003088:	00000097          	auipc	ra,0x0
+    8000308c:	798080e7          	jalr	1944(ra) # 80003820 <log_write>
     brelse(bp);
-    80003a1a:	8526                	mv	a0,s1
-    80003a1c:	fffff097          	auipc	ra,0xfffff
-    80003a20:	50c080e7          	jalr	1292(ra) # 80002f28 <brelse>
+    80003090:	8526                	mv	a0,s1
+    80003092:	fffff097          	auipc	ra,0xfffff
+    80003096:	50a080e7          	jalr	1290(ra) # 8000259c <brelse>
   for(tot=0; tot<n; tot+=m, off+=m, src+=m){
-    80003a24:	01498a3b          	addw	s4,s3,s4
-    80003a28:	0129893b          	addw	s2,s3,s2
-    80003a2c:	9aee                	add	s5,s5,s11
-    80003a2e:	056a7663          	bgeu	s4,s6,80003a7a <writei+0xd6>
+    8000309a:	01498a3b          	addw	s4,s3,s4
+    8000309e:	0129893b          	addw	s2,s3,s2
+    800030a2:	9aee                	add	s5,s5,s11
+    800030a4:	057a7663          	bgeu	s4,s7,800030f0 <writei+0xd6>
     bp = bread(ip->dev, bmap(ip, off/BSIZE));
-    80003a32:	000ba483          	lw	s1,0(s7)
-    80003a36:	00a9559b          	srliw	a1,s2,0xa
-    80003a3a:	855e                	mv	a0,s7
-    80003a3c:	fffff097          	auipc	ra,0xfffff
-    80003a40:	7ac080e7          	jalr	1964(ra) # 800031e8 <bmap>
-    80003a44:	0005059b          	sext.w	a1,a0
-    80003a48:	8526                	mv	a0,s1
-    80003a4a:	fffff097          	auipc	ra,0xfffff
-    80003a4e:	3ae080e7          	jalr	942(ra) # 80002df8 <bread>
-    80003a52:	84aa                	mv	s1,a0
+    800030a8:	000b2483          	lw	s1,0(s6)
+    800030ac:	00a9559b          	srliw	a1,s2,0xa
+    800030b0:	855a                	mv	a0,s6
+    800030b2:	fffff097          	auipc	ra,0xfffff
+    800030b6:	7aa080e7          	jalr	1962(ra) # 8000285c <bmap>
+    800030ba:	0005059b          	sext.w	a1,a0
+    800030be:	8526                	mv	a0,s1
+    800030c0:	fffff097          	auipc	ra,0xfffff
+    800030c4:	3ac080e7          	jalr	940(ra) # 8000246c <bread>
+    800030c8:	84aa                	mv	s1,a0
     m = min(n - tot, BSIZE - off%BSIZE);
-    80003a54:	3ff97713          	andi	a4,s2,1023
-    80003a58:	40ed07bb          	subw	a5,s10,a4
-    80003a5c:	414b06bb          	subw	a3,s6,s4
-    80003a60:	89be                	mv	s3,a5
-    80003a62:	2781                	sext.w	a5,a5
-    80003a64:	0006861b          	sext.w	a2,a3
-    80003a68:	f8f674e3          	bgeu	a2,a5,800039f0 <writei+0x4c>
-    80003a6c:	89b6                	mv	s3,a3
-    80003a6e:	b749                	j	800039f0 <writei+0x4c>
+    800030ca:	3ff97713          	andi	a4,s2,1023
+    800030ce:	40ed07bb          	subw	a5,s10,a4
+    800030d2:	414b86bb          	subw	a3,s7,s4
+    800030d6:	89be                	mv	s3,a5
+    800030d8:	2781                	sext.w	a5,a5
+    800030da:	0006861b          	sext.w	a2,a3
+    800030de:	f8f674e3          	bgeu	a2,a5,80003066 <writei+0x4c>
+    800030e2:	89b6                	mv	s3,a3
+    800030e4:	b749                	j	80003066 <writei+0x4c>
       brelse(bp);
-    80003a70:	8526                	mv	a0,s1
-    80003a72:	fffff097          	auipc	ra,0xfffff
-    80003a76:	4b6080e7          	jalr	1206(ra) # 80002f28 <brelse>
+    800030e6:	8526                	mv	a0,s1
+    800030e8:	fffff097          	auipc	ra,0xfffff
+    800030ec:	4b4080e7          	jalr	1204(ra) # 8000259c <brelse>
   }
 
-  if(n > 0){
-    if(off > ip->size)
-    80003a7a:	04cba783          	lw	a5,76(s7)
-    80003a7e:	0127f463          	bgeu	a5,s2,80003a86 <writei+0xe2>
-      ip->size = off;
-    80003a82:	052ba623          	sw	s2,76(s7)
-    // write the i-node back to disk even if the size didn't change
-    // because the loop above might have called bmap() and added a new
-    // block to ip->addrs[].
-    iupdate(ip);
-    80003a86:	855e                	mv	a0,s7
-    80003a88:	00000097          	auipc	ra,0x0
-    80003a8c:	aa6080e7          	jalr	-1370(ra) # 8000352e <iupdate>
-  }
+  if(off > ip->size)
+    800030f0:	04cb2783          	lw	a5,76(s6)
+    800030f4:	0127f463          	bgeu	a5,s2,800030fc <writei+0xe2>
+    ip->size = off;
+    800030f8:	052b2623          	sw	s2,76(s6)
+
+  // write the i-node back to disk even if the size didn't change
+  // because the loop above might have called bmap() and added a new
+  // block to ip->addrs[].
+  iupdate(ip);
+    800030fc:	855a                	mv	a0,s6
+    800030fe:	00000097          	auipc	ra,0x0
+    80003102:	aa4080e7          	jalr	-1372(ra) # 80002ba2 <iupdate>
 
-  return n;
-    80003a90:	000b051b          	sext.w	a0,s6
+  return tot;
+    80003106:	000a051b          	sext.w	a0,s4
 }
-    80003a94:	70a6                	ld	ra,104(sp)
-    80003a96:	7406                	ld	s0,96(sp)
-    80003a98:	64e6                	ld	s1,88(sp)
-    80003a9a:	6946                	ld	s2,80(sp)
-    80003a9c:	69a6                	ld	s3,72(sp)
-    80003a9e:	6a06                	ld	s4,64(sp)
-    80003aa0:	7ae2                	ld	s5,56(sp)
-    80003aa2:	7b42                	ld	s6,48(sp)
-    80003aa4:	7ba2                	ld	s7,40(sp)
-    80003aa6:	7c02                	ld	s8,32(sp)
-    80003aa8:	6ce2                	ld	s9,24(sp)
-    80003aaa:	6d42                	ld	s10,16(sp)
-    80003aac:	6da2                	ld	s11,8(sp)
-    80003aae:	6165                	addi	sp,sp,112
-    80003ab0:	8082                	ret
-    return -1;
-    80003ab2:	557d                	li	a0,-1
-}
-    80003ab4:	8082                	ret
+    8000310a:	70a6                	ld	ra,104(sp)
+    8000310c:	7406                	ld	s0,96(sp)
+    8000310e:	64e6                	ld	s1,88(sp)
+    80003110:	6946                	ld	s2,80(sp)
+    80003112:	69a6                	ld	s3,72(sp)
+    80003114:	6a06                	ld	s4,64(sp)
+    80003116:	7ae2                	ld	s5,56(sp)
+    80003118:	7b42                	ld	s6,48(sp)
+    8000311a:	7ba2                	ld	s7,40(sp)
+    8000311c:	7c02                	ld	s8,32(sp)
+    8000311e:	6ce2                	ld	s9,24(sp)
+    80003120:	6d42                	ld	s10,16(sp)
+    80003122:	6da2                	ld	s11,8(sp)
+    80003124:	6165                	addi	sp,sp,112
+    80003126:	8082                	ret
+  for(tot=0; tot<n; tot+=m, off+=m, src+=m){
+    80003128:	8a5e                	mv	s4,s7
+    8000312a:	bfc9                	j	800030fc <writei+0xe2>
+    return -1;
+    8000312c:	557d                	li	a0,-1
+}
+    8000312e:	8082                	ret
     return -1;
-    80003ab6:	557d                	li	a0,-1
-    80003ab8:	bff1                	j	80003a94 <writei+0xf0>
+    80003130:	557d                	li	a0,-1
+    80003132:	bfe1                	j	8000310a <writei+0xf0>
     return -1;
-    80003aba:	557d                	li	a0,-1
-    80003abc:	bfe1                	j	80003a94 <writei+0xf0>
+    80003134:	557d                	li	a0,-1
+    80003136:	bfd1                	j	8000310a <writei+0xf0>
 
-0000000080003abe <namecmp>:
+0000000080003138 <namecmp>:
 
 // Directories
 
 int
 namecmp(const char *s, const char *t)
 {
-    80003abe:	1141                	addi	sp,sp,-16
-    80003ac0:	e406                	sd	ra,8(sp)
-    80003ac2:	e022                	sd	s0,0(sp)
-    80003ac4:	0800                	addi	s0,sp,16
+    80003138:	1141                	addi	sp,sp,-16
+    8000313a:	e406                	sd	ra,8(sp)
+    8000313c:	e022                	sd	s0,0(sp)
+    8000313e:	0800                	addi	s0,sp,16
   return strncmp(s, t, DIRSIZ);
-    80003ac6:	4639                	li	a2,14
-    80003ac8:	ffffd097          	auipc	ra,0xffffd
-    80003acc:	30c080e7          	jalr	780(ra) # 80000dd4 <strncmp>
-}
-    80003ad0:	60a2                	ld	ra,8(sp)
-    80003ad2:	6402                	ld	s0,0(sp)
-    80003ad4:	0141                	addi	sp,sp,16
-    80003ad6:	8082                	ret
+    80003140:	4639                	li	a2,14
+    80003142:	ffffd097          	auipc	ra,0xffffd
+    80003146:	12c080e7          	jalr	300(ra) # 8000026e <strncmp>
+}
+    8000314a:	60a2                	ld	ra,8(sp)
+    8000314c:	6402                	ld	s0,0(sp)
+    8000314e:	0141                	addi	sp,sp,16
+    80003150:	8082                	ret
 
-0000000080003ad8 <dirlookup>:
+0000000080003152 <dirlookup>:
 
 // Look for a directory entry in a directory.
 // If found, set *poff to byte offset of entry.
 struct inode*
 dirlookup(struct inode *dp, char *name, uint *poff)
 {
-    80003ad8:	7139                	addi	sp,sp,-64
-    80003ada:	fc06                	sd	ra,56(sp)
-    80003adc:	f822                	sd	s0,48(sp)
-    80003ade:	f426                	sd	s1,40(sp)
-    80003ae0:	f04a                	sd	s2,32(sp)
-    80003ae2:	ec4e                	sd	s3,24(sp)
-    80003ae4:	e852                	sd	s4,16(sp)
-    80003ae6:	0080                	addi	s0,sp,64
+    80003152:	7139                	addi	sp,sp,-64
+    80003154:	fc06                	sd	ra,56(sp)
+    80003156:	f822                	sd	s0,48(sp)
+    80003158:	f426                	sd	s1,40(sp)
+    8000315a:	f04a                	sd	s2,32(sp)
+    8000315c:	ec4e                	sd	s3,24(sp)
+    8000315e:	e852                	sd	s4,16(sp)
+    80003160:	0080                	addi	s0,sp,64
   uint off, inum;
   struct dirent de;
 
   if(dp->type != T_DIR)
-    80003ae8:	04451703          	lh	a4,68(a0)
-    80003aec:	4785                	li	a5,1
-    80003aee:	00f71a63          	bne	a4,a5,80003b02 <dirlookup+0x2a>
-    80003af2:	892a                	mv	s2,a0
-    80003af4:	89ae                	mv	s3,a1
-    80003af6:	8a32                	mv	s4,a2
+    80003162:	04451703          	lh	a4,68(a0)
+    80003166:	4785                	li	a5,1
+    80003168:	00f71a63          	bne	a4,a5,8000317c <dirlookup+0x2a>
+    8000316c:	892a                	mv	s2,a0
+    8000316e:	89ae                	mv	s3,a1
+    80003170:	8a32                	mv	s4,a2
     panic("dirlookup not DIR");
 
   for(off = 0; off < dp->size; off += sizeof(de)){
-    80003af8:	457c                	lw	a5,76(a0)
-    80003afa:	4481                	li	s1,0
+    80003172:	457c                	lw	a5,76(a0)
+    80003174:	4481                	li	s1,0
       inum = de.inum;
       return iget(dp->dev, inum);
     }
   }
 
   return 0;
-    80003afc:	4501                	li	a0,0
+    80003176:	4501                	li	a0,0
   for(off = 0; off < dp->size; off += sizeof(de)){
-    80003afe:	e79d                	bnez	a5,80003b2c <dirlookup+0x54>
-    80003b00:	a8a5                	j	80003b78 <dirlookup+0xa0>
+    80003178:	e79d                	bnez	a5,800031a6 <dirlookup+0x54>
+    8000317a:	a8a5                	j	800031f2 <dirlookup+0xa0>
     panic("dirlookup not DIR");
-    80003b02:	00005517          	auipc	a0,0x5
-    80003b06:	ac650513          	addi	a0,a0,-1338 # 800085c8 <syscalls+0x1a0>
-    80003b0a:	ffffd097          	auipc	ra,0xffffd
-    80003b0e:	a3c080e7          	jalr	-1476(ra) # 80000546 <panic>
+    8000317c:	00005517          	auipc	a0,0x5
+    80003180:	5ac50513          	addi	a0,a0,1452 # 80008728 <syscall_name+0x1a8>
+    80003184:	00003097          	auipc	ra,0x3
+    80003188:	b6c080e7          	jalr	-1172(ra) # 80005cf0 <panic>
       panic("dirlookup read");
-    80003b12:	00005517          	auipc	a0,0x5
-    80003b16:	ace50513          	addi	a0,a0,-1330 # 800085e0 <syscalls+0x1b8>
-    80003b1a:	ffffd097          	auipc	ra,0xffffd
-    80003b1e:	a2c080e7          	jalr	-1492(ra) # 80000546 <panic>
+    8000318c:	00005517          	auipc	a0,0x5
+    80003190:	5b450513          	addi	a0,a0,1460 # 80008740 <syscall_name+0x1c0>
+    80003194:	00003097          	auipc	ra,0x3
+    80003198:	b5c080e7          	jalr	-1188(ra) # 80005cf0 <panic>
   for(off = 0; off < dp->size; off += sizeof(de)){
-    80003b22:	24c1                	addiw	s1,s1,16
-    80003b24:	04c92783          	lw	a5,76(s2)
-    80003b28:	04f4f763          	bgeu	s1,a5,80003b76 <dirlookup+0x9e>
+    8000319c:	24c1                	addiw	s1,s1,16
+    8000319e:	04c92783          	lw	a5,76(s2)
+    800031a2:	04f4f763          	bgeu	s1,a5,800031f0 <dirlookup+0x9e>
     if(readi(dp, 0, (uint64)&de, off, sizeof(de)) != sizeof(de))
-    80003b2c:	4741                	li	a4,16
-    80003b2e:	86a6                	mv	a3,s1
-    80003b30:	fc040613          	addi	a2,s0,-64
-    80003b34:	4581                	li	a1,0
-    80003b36:	854a                	mv	a0,s2
-    80003b38:	00000097          	auipc	ra,0x0
-    80003b3c:	d76080e7          	jalr	-650(ra) # 800038ae <readi>
-    80003b40:	47c1                	li	a5,16
-    80003b42:	fcf518e3          	bne	a0,a5,80003b12 <dirlookup+0x3a>
+    800031a6:	4741                	li	a4,16
+    800031a8:	86a6                	mv	a3,s1
+    800031aa:	fc040613          	addi	a2,s0,-64
+    800031ae:	4581                	li	a1,0
+    800031b0:	854a                	mv	a0,s2
+    800031b2:	00000097          	auipc	ra,0x0
+    800031b6:	d70080e7          	jalr	-656(ra) # 80002f22 <readi>
+    800031ba:	47c1                	li	a5,16
+    800031bc:	fcf518e3          	bne	a0,a5,8000318c <dirlookup+0x3a>
     if(de.inum == 0)
-    80003b46:	fc045783          	lhu	a5,-64(s0)
-    80003b4a:	dfe1                	beqz	a5,80003b22 <dirlookup+0x4a>
+    800031c0:	fc045783          	lhu	a5,-64(s0)
+    800031c4:	dfe1                	beqz	a5,8000319c <dirlookup+0x4a>
     if(namecmp(name, de.name) == 0){
-    80003b4c:	fc240593          	addi	a1,s0,-62
-    80003b50:	854e                	mv	a0,s3
-    80003b52:	00000097          	auipc	ra,0x0
-    80003b56:	f6c080e7          	jalr	-148(ra) # 80003abe <namecmp>
-    80003b5a:	f561                	bnez	a0,80003b22 <dirlookup+0x4a>
+    800031c6:	fc240593          	addi	a1,s0,-62
+    800031ca:	854e                	mv	a0,s3
+    800031cc:	00000097          	auipc	ra,0x0
+    800031d0:	f6c080e7          	jalr	-148(ra) # 80003138 <namecmp>
+    800031d4:	f561                	bnez	a0,8000319c <dirlookup+0x4a>
       if(poff)
-    80003b5c:	000a0463          	beqz	s4,80003b64 <dirlookup+0x8c>
+    800031d6:	000a0463          	beqz	s4,800031de <dirlookup+0x8c>
         *poff = off;
-    80003b60:	009a2023          	sw	s1,0(s4)
+    800031da:	009a2023          	sw	s1,0(s4)
       return iget(dp->dev, inum);
-    80003b64:	fc045583          	lhu	a1,-64(s0)
-    80003b68:	00092503          	lw	a0,0(s2)
-    80003b6c:	fffff097          	auipc	ra,0xfffff
-    80003b70:	758080e7          	jalr	1880(ra) # 800032c4 <iget>
-    80003b74:	a011                	j	80003b78 <dirlookup+0xa0>
+    800031de:	fc045583          	lhu	a1,-64(s0)
+    800031e2:	00092503          	lw	a0,0(s2)
+    800031e6:	fffff097          	auipc	ra,0xfffff
+    800031ea:	752080e7          	jalr	1874(ra) # 80002938 <iget>
+    800031ee:	a011                	j	800031f2 <dirlookup+0xa0>
   return 0;
-    80003b76:	4501                	li	a0,0
+    800031f0:	4501                	li	a0,0
 }
-    80003b78:	70e2                	ld	ra,56(sp)
-    80003b7a:	7442                	ld	s0,48(sp)
-    80003b7c:	74a2                	ld	s1,40(sp)
-    80003b7e:	7902                	ld	s2,32(sp)
-    80003b80:	69e2                	ld	s3,24(sp)
-    80003b82:	6a42                	ld	s4,16(sp)
-    80003b84:	6121                	addi	sp,sp,64
-    80003b86:	8082                	ret
+    800031f2:	70e2                	ld	ra,56(sp)
+    800031f4:	7442                	ld	s0,48(sp)
+    800031f6:	74a2                	ld	s1,40(sp)
+    800031f8:	7902                	ld	s2,32(sp)
+    800031fa:	69e2                	ld	s3,24(sp)
+    800031fc:	6a42                	ld	s4,16(sp)
+    800031fe:	6121                	addi	sp,sp,64
+    80003200:	8082                	ret
 
-0000000080003b88 <namex>:
+0000000080003202 <namex>:
 // If parent != 0, return the inode for the parent and copy the final
 // path element into name, which must have room for DIRSIZ bytes.
 // Must be called inside a transaction since it calls iput().
 static struct inode*
 namex(char *path, int nameiparent, char *name)
 {
-    80003b88:	711d                	addi	sp,sp,-96
-    80003b8a:	ec86                	sd	ra,88(sp)
-    80003b8c:	e8a2                	sd	s0,80(sp)
-    80003b8e:	e4a6                	sd	s1,72(sp)
-    80003b90:	e0ca                	sd	s2,64(sp)
-    80003b92:	fc4e                	sd	s3,56(sp)
-    80003b94:	f852                	sd	s4,48(sp)
-    80003b96:	f456                	sd	s5,40(sp)
-    80003b98:	f05a                	sd	s6,32(sp)
-    80003b9a:	ec5e                	sd	s7,24(sp)
-    80003b9c:	e862                	sd	s8,16(sp)
-    80003b9e:	e466                	sd	s9,8(sp)
-    80003ba0:	e06a                	sd	s10,0(sp)
-    80003ba2:	1080                	addi	s0,sp,96
-    80003ba4:	84aa                	mv	s1,a0
-    80003ba6:	8b2e                	mv	s6,a1
-    80003ba8:	8ab2                	mv	s5,a2
+    80003202:	711d                	addi	sp,sp,-96
+    80003204:	ec86                	sd	ra,88(sp)
+    80003206:	e8a2                	sd	s0,80(sp)
+    80003208:	e4a6                	sd	s1,72(sp)
+    8000320a:	e0ca                	sd	s2,64(sp)
+    8000320c:	fc4e                	sd	s3,56(sp)
+    8000320e:	f852                	sd	s4,48(sp)
+    80003210:	f456                	sd	s5,40(sp)
+    80003212:	f05a                	sd	s6,32(sp)
+    80003214:	ec5e                	sd	s7,24(sp)
+    80003216:	e862                	sd	s8,16(sp)
+    80003218:	e466                	sd	s9,8(sp)
+    8000321a:	e06a                	sd	s10,0(sp)
+    8000321c:	1080                	addi	s0,sp,96
+    8000321e:	84aa                	mv	s1,a0
+    80003220:	8b2e                	mv	s6,a1
+    80003222:	8ab2                	mv	s5,a2
   struct inode *ip, *next;
 
   if(*path == '/')
-    80003baa:	00054703          	lbu	a4,0(a0)
-    80003bae:	02f00793          	li	a5,47
-    80003bb2:	02f70363          	beq	a4,a5,80003bd8 <namex+0x50>
+    80003224:	00054703          	lbu	a4,0(a0)
+    80003228:	02f00793          	li	a5,47
+    8000322c:	02f70363          	beq	a4,a5,80003252 <namex+0x50>
     ip = iget(ROOTDEV, ROOTINO);
   else
     ip = idup(myproc()->cwd);
-    80003bb6:	ffffe097          	auipc	ra,0xffffe
-    80003bba:	e16080e7          	jalr	-490(ra) # 800019cc <myproc>
-    80003bbe:	15053503          	ld	a0,336(a0)
-    80003bc2:	00000097          	auipc	ra,0x0
-    80003bc6:	9fa080e7          	jalr	-1542(ra) # 800035bc <idup>
-    80003bca:	8a2a                	mv	s4,a0
+    80003230:	ffffe097          	auipc	ra,0xffffe
+    80003234:	d0e080e7          	jalr	-754(ra) # 80000f3e <myproc>
+    80003238:	15053503          	ld	a0,336(a0)
+    8000323c:	00000097          	auipc	ra,0x0
+    80003240:	9f4080e7          	jalr	-1548(ra) # 80002c30 <idup>
+    80003244:	8a2a                	mv	s4,a0
   while(*path == '/')
-    80003bcc:	02f00913          	li	s2,47
+    80003246:	02f00913          	li	s2,47
   if(len >= DIRSIZ)
-    80003bd0:	4cb5                	li	s9,13
+    8000324a:	4cb5                	li	s9,13
   len = path - s;
-    80003bd2:	4b81                	li	s7,0
+    8000324c:	4b81                	li	s7,0
 
   while((path = skipelem(path, name)) != 0){
     ilock(ip);
     if(ip->type != T_DIR){
-    80003bd4:	4c05                	li	s8,1
-    80003bd6:	a87d                	j	80003c94 <namex+0x10c>
+    8000324e:	4c05                	li	s8,1
+    80003250:	a87d                	j	8000330e <namex+0x10c>
     ip = iget(ROOTDEV, ROOTINO);
-    80003bd8:	4585                	li	a1,1
-    80003bda:	4505                	li	a0,1
-    80003bdc:	fffff097          	auipc	ra,0xfffff
-    80003be0:	6e8080e7          	jalr	1768(ra) # 800032c4 <iget>
-    80003be4:	8a2a                	mv	s4,a0
-    80003be6:	b7dd                	j	80003bcc <namex+0x44>
+    80003252:	4585                	li	a1,1
+    80003254:	4505                	li	a0,1
+    80003256:	fffff097          	auipc	ra,0xfffff
+    8000325a:	6e2080e7          	jalr	1762(ra) # 80002938 <iget>
+    8000325e:	8a2a                	mv	s4,a0
+    80003260:	b7dd                	j	80003246 <namex+0x44>
       iunlockput(ip);
-    80003be8:	8552                	mv	a0,s4
-    80003bea:	00000097          	auipc	ra,0x0
-    80003bee:	c72080e7          	jalr	-910(ra) # 8000385c <iunlockput>
+    80003262:	8552                	mv	a0,s4
+    80003264:	00000097          	auipc	ra,0x0
+    80003268:	c6c080e7          	jalr	-916(ra) # 80002ed0 <iunlockput>
       return 0;
-    80003bf2:	4a01                	li	s4,0
+    8000326c:	4a01                	li	s4,0
   if(nameiparent){
     iput(ip);
     return 0;
   }
   return ip;
 }
-    80003bf4:	8552                	mv	a0,s4
-    80003bf6:	60e6                	ld	ra,88(sp)
-    80003bf8:	6446                	ld	s0,80(sp)
-    80003bfa:	64a6                	ld	s1,72(sp)
-    80003bfc:	6906                	ld	s2,64(sp)
-    80003bfe:	79e2                	ld	s3,56(sp)
-    80003c00:	7a42                	ld	s4,48(sp)
-    80003c02:	7aa2                	ld	s5,40(sp)
-    80003c04:	7b02                	ld	s6,32(sp)
-    80003c06:	6be2                	ld	s7,24(sp)
-    80003c08:	6c42                	ld	s8,16(sp)
-    80003c0a:	6ca2                	ld	s9,8(sp)
-    80003c0c:	6d02                	ld	s10,0(sp)
-    80003c0e:	6125                	addi	sp,sp,96
-    80003c10:	8082                	ret
+    8000326e:	8552                	mv	a0,s4
+    80003270:	60e6                	ld	ra,88(sp)
+    80003272:	6446                	ld	s0,80(sp)
+    80003274:	64a6                	ld	s1,72(sp)
+    80003276:	6906                	ld	s2,64(sp)
+    80003278:	79e2                	ld	s3,56(sp)
+    8000327a:	7a42                	ld	s4,48(sp)
+    8000327c:	7aa2                	ld	s5,40(sp)
+    8000327e:	7b02                	ld	s6,32(sp)
+    80003280:	6be2                	ld	s7,24(sp)
+    80003282:	6c42                	ld	s8,16(sp)
+    80003284:	6ca2                	ld	s9,8(sp)
+    80003286:	6d02                	ld	s10,0(sp)
+    80003288:	6125                	addi	sp,sp,96
+    8000328a:	8082                	ret
       iunlock(ip);
-    80003c12:	8552                	mv	a0,s4
-    80003c14:	00000097          	auipc	ra,0x0
-    80003c18:	aa8080e7          	jalr	-1368(ra) # 800036bc <iunlock>
+    8000328c:	8552                	mv	a0,s4
+    8000328e:	00000097          	auipc	ra,0x0
+    80003292:	aa2080e7          	jalr	-1374(ra) # 80002d30 <iunlock>
       return ip;
-    80003c1c:	bfe1                	j	80003bf4 <namex+0x6c>
+    80003296:	bfe1                	j	8000326e <namex+0x6c>
       iunlockput(ip);
-    80003c1e:	8552                	mv	a0,s4
-    80003c20:	00000097          	auipc	ra,0x0
-    80003c24:	c3c080e7          	jalr	-964(ra) # 8000385c <iunlockput>
+    80003298:	8552                	mv	a0,s4
+    8000329a:	00000097          	auipc	ra,0x0
+    8000329e:	c36080e7          	jalr	-970(ra) # 80002ed0 <iunlockput>
       return 0;
-    80003c28:	8a4e                	mv	s4,s3
-    80003c2a:	b7e9                	j	80003bf4 <namex+0x6c>
+    800032a2:	8a4e                	mv	s4,s3
+    800032a4:	b7e9                	j	8000326e <namex+0x6c>
   len = path - s;
-    80003c2c:	40998633          	sub	a2,s3,s1
-    80003c30:	00060d1b          	sext.w	s10,a2
+    800032a6:	40998633          	sub	a2,s3,s1
+    800032aa:	00060d1b          	sext.w	s10,a2
   if(len >= DIRSIZ)
-    80003c34:	09acd863          	bge	s9,s10,80003cc4 <namex+0x13c>
+    800032ae:	09acd863          	bge	s9,s10,8000333e <namex+0x13c>
     memmove(name, s, DIRSIZ);
-    80003c38:	4639                	li	a2,14
-    80003c3a:	85a6                	mv	a1,s1
-    80003c3c:	8556                	mv	a0,s5
-    80003c3e:	ffffd097          	auipc	ra,0xffffd
-    80003c42:	11a080e7          	jalr	282(ra) # 80000d58 <memmove>
-    80003c46:	84ce                	mv	s1,s3
+    800032b2:	4639                	li	a2,14
+    800032b4:	85a6                	mv	a1,s1
+    800032b6:	8556                	mv	a0,s5
+    800032b8:	ffffd097          	auipc	ra,0xffffd
+    800032bc:	f42080e7          	jalr	-190(ra) # 800001fa <memmove>
+    800032c0:	84ce                	mv	s1,s3
   while(*path == '/')
-    80003c48:	0004c783          	lbu	a5,0(s1)
-    80003c4c:	01279763          	bne	a5,s2,80003c5a <namex+0xd2>
+    800032c2:	0004c783          	lbu	a5,0(s1)
+    800032c6:	01279763          	bne	a5,s2,800032d4 <namex+0xd2>
     path++;
-    80003c50:	0485                	addi	s1,s1,1
+    800032ca:	0485                	addi	s1,s1,1
   while(*path == '/')
-    80003c52:	0004c783          	lbu	a5,0(s1)
-    80003c56:	ff278de3          	beq	a5,s2,80003c50 <namex+0xc8>
+    800032cc:	0004c783          	lbu	a5,0(s1)
+    800032d0:	ff278de3          	beq	a5,s2,800032ca <namex+0xc8>
     ilock(ip);
-    80003c5a:	8552                	mv	a0,s4
-    80003c5c:	00000097          	auipc	ra,0x0
-    80003c60:	99e080e7          	jalr	-1634(ra) # 800035fa <ilock>
+    800032d4:	8552                	mv	a0,s4
+    800032d6:	00000097          	auipc	ra,0x0
+    800032da:	998080e7          	jalr	-1640(ra) # 80002c6e <ilock>
     if(ip->type != T_DIR){
-    80003c64:	044a1783          	lh	a5,68(s4)
-    80003c68:	f98790e3          	bne	a5,s8,80003be8 <namex+0x60>
+    800032de:	044a1783          	lh	a5,68(s4)
+    800032e2:	f98790e3          	bne	a5,s8,80003262 <namex+0x60>
     if(nameiparent && *path == '\0'){
-    80003c6c:	000b0563          	beqz	s6,80003c76 <namex+0xee>
-    80003c70:	0004c783          	lbu	a5,0(s1)
-    80003c74:	dfd9                	beqz	a5,80003c12 <namex+0x8a>
+    800032e6:	000b0563          	beqz	s6,800032f0 <namex+0xee>
+    800032ea:	0004c783          	lbu	a5,0(s1)
+    800032ee:	dfd9                	beqz	a5,8000328c <namex+0x8a>
     if((next = dirlookup(ip, name, 0)) == 0){
-    80003c76:	865e                	mv	a2,s7
-    80003c78:	85d6                	mv	a1,s5
-    80003c7a:	8552                	mv	a0,s4
-    80003c7c:	00000097          	auipc	ra,0x0
-    80003c80:	e5c080e7          	jalr	-420(ra) # 80003ad8 <dirlookup>
-    80003c84:	89aa                	mv	s3,a0
-    80003c86:	dd41                	beqz	a0,80003c1e <namex+0x96>
+    800032f0:	865e                	mv	a2,s7
+    800032f2:	85d6                	mv	a1,s5
+    800032f4:	8552                	mv	a0,s4
+    800032f6:	00000097          	auipc	ra,0x0
+    800032fa:	e5c080e7          	jalr	-420(ra) # 80003152 <dirlookup>
+    800032fe:	89aa                	mv	s3,a0
+    80003300:	dd41                	beqz	a0,80003298 <namex+0x96>
     iunlockput(ip);
-    80003c88:	8552                	mv	a0,s4
-    80003c8a:	00000097          	auipc	ra,0x0
-    80003c8e:	bd2080e7          	jalr	-1070(ra) # 8000385c <iunlockput>
+    80003302:	8552                	mv	a0,s4
+    80003304:	00000097          	auipc	ra,0x0
+    80003308:	bcc080e7          	jalr	-1076(ra) # 80002ed0 <iunlockput>
     ip = next;
-    80003c92:	8a4e                	mv	s4,s3
+    8000330c:	8a4e                	mv	s4,s3
   while(*path == '/')
-    80003c94:	0004c783          	lbu	a5,0(s1)
-    80003c98:	01279763          	bne	a5,s2,80003ca6 <namex+0x11e>
+    8000330e:	0004c783          	lbu	a5,0(s1)
+    80003312:	01279763          	bne	a5,s2,80003320 <namex+0x11e>
     path++;
-    80003c9c:	0485                	addi	s1,s1,1
+    80003316:	0485                	addi	s1,s1,1
   while(*path == '/')
-    80003c9e:	0004c783          	lbu	a5,0(s1)
-    80003ca2:	ff278de3          	beq	a5,s2,80003c9c <namex+0x114>
+    80003318:	0004c783          	lbu	a5,0(s1)
+    8000331c:	ff278de3          	beq	a5,s2,80003316 <namex+0x114>
   if(*path == 0)
-    80003ca6:	cb9d                	beqz	a5,80003cdc <namex+0x154>
+    80003320:	cb9d                	beqz	a5,80003356 <namex+0x154>
   while(*path != '/' && *path != 0)
-    80003ca8:	0004c783          	lbu	a5,0(s1)
-    80003cac:	89a6                	mv	s3,s1
+    80003322:	0004c783          	lbu	a5,0(s1)
+    80003326:	89a6                	mv	s3,s1
   len = path - s;
-    80003cae:	8d5e                	mv	s10,s7
-    80003cb0:	865e                	mv	a2,s7
+    80003328:	8d5e                	mv	s10,s7
+    8000332a:	865e                	mv	a2,s7
   while(*path != '/' && *path != 0)
-    80003cb2:	01278963          	beq	a5,s2,80003cc4 <namex+0x13c>
-    80003cb6:	dbbd                	beqz	a5,80003c2c <namex+0xa4>
+    8000332c:	01278963          	beq	a5,s2,8000333e <namex+0x13c>
+    80003330:	dbbd                	beqz	a5,800032a6 <namex+0xa4>
     path++;
-    80003cb8:	0985                	addi	s3,s3,1
+    80003332:	0985                	addi	s3,s3,1
   while(*path != '/' && *path != 0)
-    80003cba:	0009c783          	lbu	a5,0(s3)
-    80003cbe:	ff279ce3          	bne	a5,s2,80003cb6 <namex+0x12e>
-    80003cc2:	b7ad                	j	80003c2c <namex+0xa4>
+    80003334:	0009c783          	lbu	a5,0(s3)
+    80003338:	ff279ce3          	bne	a5,s2,80003330 <namex+0x12e>
+    8000333c:	b7ad                	j	800032a6 <namex+0xa4>
     memmove(name, s, len);
-    80003cc4:	2601                	sext.w	a2,a2
-    80003cc6:	85a6                	mv	a1,s1
-    80003cc8:	8556                	mv	a0,s5
-    80003cca:	ffffd097          	auipc	ra,0xffffd
-    80003cce:	08e080e7          	jalr	142(ra) # 80000d58 <memmove>
+    8000333e:	2601                	sext.w	a2,a2
+    80003340:	85a6                	mv	a1,s1
+    80003342:	8556                	mv	a0,s5
+    80003344:	ffffd097          	auipc	ra,0xffffd
+    80003348:	eb6080e7          	jalr	-330(ra) # 800001fa <memmove>
     name[len] = 0;
-    80003cd2:	9d56                	add	s10,s10,s5
-    80003cd4:	000d0023          	sb	zero,0(s10)
-    80003cd8:	84ce                	mv	s1,s3
-    80003cda:	b7bd                	j	80003c48 <namex+0xc0>
+    8000334c:	9d56                	add	s10,s10,s5
+    8000334e:	000d0023          	sb	zero,0(s10)
+    80003352:	84ce                	mv	s1,s3
+    80003354:	b7bd                	j	800032c2 <namex+0xc0>
   if(nameiparent){
-    80003cdc:	f00b0ce3          	beqz	s6,80003bf4 <namex+0x6c>
+    80003356:	f00b0ce3          	beqz	s6,8000326e <namex+0x6c>
     iput(ip);
-    80003ce0:	8552                	mv	a0,s4
-    80003ce2:	00000097          	auipc	ra,0x0
-    80003ce6:	ad2080e7          	jalr	-1326(ra) # 800037b4 <iput>
+    8000335a:	8552                	mv	a0,s4
+    8000335c:	00000097          	auipc	ra,0x0
+    80003360:	acc080e7          	jalr	-1332(ra) # 80002e28 <iput>
     return 0;
-    80003cea:	4a01                	li	s4,0
-    80003cec:	b721                	j	80003bf4 <namex+0x6c>
+    80003364:	4a01                	li	s4,0
+    80003366:	b721                	j	8000326e <namex+0x6c>
 
-0000000080003cee <dirlink>:
+0000000080003368 <dirlink>:
 {
-    80003cee:	7139                	addi	sp,sp,-64
-    80003cf0:	fc06                	sd	ra,56(sp)
-    80003cf2:	f822                	sd	s0,48(sp)
-    80003cf4:	f426                	sd	s1,40(sp)
-    80003cf6:	f04a                	sd	s2,32(sp)
-    80003cf8:	ec4e                	sd	s3,24(sp)
-    80003cfa:	e852                	sd	s4,16(sp)
-    80003cfc:	0080                	addi	s0,sp,64
-    80003cfe:	892a                	mv	s2,a0
-    80003d00:	8a2e                	mv	s4,a1
-    80003d02:	89b2                	mv	s3,a2
+    80003368:	7139                	addi	sp,sp,-64
+    8000336a:	fc06                	sd	ra,56(sp)
+    8000336c:	f822                	sd	s0,48(sp)
+    8000336e:	f426                	sd	s1,40(sp)
+    80003370:	f04a                	sd	s2,32(sp)
+    80003372:	ec4e                	sd	s3,24(sp)
+    80003374:	e852                	sd	s4,16(sp)
+    80003376:	0080                	addi	s0,sp,64
+    80003378:	892a                	mv	s2,a0
+    8000337a:	8a2e                	mv	s4,a1
+    8000337c:	89b2                	mv	s3,a2
   if((ip = dirlookup(dp, name, 0)) != 0){
-    80003d04:	4601                	li	a2,0
-    80003d06:	00000097          	auipc	ra,0x0
-    80003d0a:	dd2080e7          	jalr	-558(ra) # 80003ad8 <dirlookup>
-    80003d0e:	e93d                	bnez	a0,80003d84 <dirlink+0x96>
+    8000337e:	4601                	li	a2,0
+    80003380:	00000097          	auipc	ra,0x0
+    80003384:	dd2080e7          	jalr	-558(ra) # 80003152 <dirlookup>
+    80003388:	e93d                	bnez	a0,800033fe <dirlink+0x96>
   for(off = 0; off < dp->size; off += sizeof(de)){
-    80003d10:	04c92483          	lw	s1,76(s2)
-    80003d14:	c49d                	beqz	s1,80003d42 <dirlink+0x54>
-    80003d16:	4481                	li	s1,0
+    8000338a:	04c92483          	lw	s1,76(s2)
+    8000338e:	c49d                	beqz	s1,800033bc <dirlink+0x54>
+    80003390:	4481                	li	s1,0
     if(readi(dp, 0, (uint64)&de, off, sizeof(de)) != sizeof(de))
-    80003d18:	4741                	li	a4,16
-    80003d1a:	86a6                	mv	a3,s1
-    80003d1c:	fc040613          	addi	a2,s0,-64
-    80003d20:	4581                	li	a1,0
-    80003d22:	854a                	mv	a0,s2
-    80003d24:	00000097          	auipc	ra,0x0
-    80003d28:	b8a080e7          	jalr	-1142(ra) # 800038ae <readi>
-    80003d2c:	47c1                	li	a5,16
-    80003d2e:	06f51163          	bne	a0,a5,80003d90 <dirlink+0xa2>
+    80003392:	4741                	li	a4,16
+    80003394:	86a6                	mv	a3,s1
+    80003396:	fc040613          	addi	a2,s0,-64
+    8000339a:	4581                	li	a1,0
+    8000339c:	854a                	mv	a0,s2
+    8000339e:	00000097          	auipc	ra,0x0
+    800033a2:	b84080e7          	jalr	-1148(ra) # 80002f22 <readi>
+    800033a6:	47c1                	li	a5,16
+    800033a8:	06f51163          	bne	a0,a5,8000340a <dirlink+0xa2>
     if(de.inum == 0)
-    80003d32:	fc045783          	lhu	a5,-64(s0)
-    80003d36:	c791                	beqz	a5,80003d42 <dirlink+0x54>
+    800033ac:	fc045783          	lhu	a5,-64(s0)
+    800033b0:	c791                	beqz	a5,800033bc <dirlink+0x54>
   for(off = 0; off < dp->size; off += sizeof(de)){
-    80003d38:	24c1                	addiw	s1,s1,16
-    80003d3a:	04c92783          	lw	a5,76(s2)
-    80003d3e:	fcf4ede3          	bltu	s1,a5,80003d18 <dirlink+0x2a>
+    800033b2:	24c1                	addiw	s1,s1,16
+    800033b4:	04c92783          	lw	a5,76(s2)
+    800033b8:	fcf4ede3          	bltu	s1,a5,80003392 <dirlink+0x2a>
   strncpy(de.name, name, DIRSIZ);
-    80003d42:	4639                	li	a2,14
-    80003d44:	85d2                	mv	a1,s4
-    80003d46:	fc240513          	addi	a0,s0,-62
-    80003d4a:	ffffd097          	auipc	ra,0xffffd
-    80003d4e:	0c6080e7          	jalr	198(ra) # 80000e10 <strncpy>
+    800033bc:	4639                	li	a2,14
+    800033be:	85d2                	mv	a1,s4
+    800033c0:	fc240513          	addi	a0,s0,-62
+    800033c4:	ffffd097          	auipc	ra,0xffffd
+    800033c8:	ee6080e7          	jalr	-282(ra) # 800002aa <strncpy>
   de.inum = inum;
-    80003d52:	fd341023          	sh	s3,-64(s0)
+    800033cc:	fd341023          	sh	s3,-64(s0)
   if(writei(dp, 0, (uint64)&de, off, sizeof(de)) != sizeof(de))
-    80003d56:	4741                	li	a4,16
-    80003d58:	86a6                	mv	a3,s1
-    80003d5a:	fc040613          	addi	a2,s0,-64
-    80003d5e:	4581                	li	a1,0
-    80003d60:	854a                	mv	a0,s2
-    80003d62:	00000097          	auipc	ra,0x0
-    80003d66:	c42080e7          	jalr	-958(ra) # 800039a4 <writei>
-    80003d6a:	872a                	mv	a4,a0
-    80003d6c:	47c1                	li	a5,16
+    800033d0:	4741                	li	a4,16
+    800033d2:	86a6                	mv	a3,s1
+    800033d4:	fc040613          	addi	a2,s0,-64
+    800033d8:	4581                	li	a1,0
+    800033da:	854a                	mv	a0,s2
+    800033dc:	00000097          	auipc	ra,0x0
+    800033e0:	c3e080e7          	jalr	-962(ra) # 8000301a <writei>
+    800033e4:	872a                	mv	a4,a0
+    800033e6:	47c1                	li	a5,16
   return 0;
-    80003d6e:	4501                	li	a0,0
+    800033e8:	4501                	li	a0,0
   if(writei(dp, 0, (uint64)&de, off, sizeof(de)) != sizeof(de))
-    80003d70:	02f71863          	bne	a4,a5,80003da0 <dirlink+0xb2>
+    800033ea:	02f71863          	bne	a4,a5,8000341a <dirlink+0xb2>
 }
-    80003d74:	70e2                	ld	ra,56(sp)
-    80003d76:	7442                	ld	s0,48(sp)
-    80003d78:	74a2                	ld	s1,40(sp)
-    80003d7a:	7902                	ld	s2,32(sp)
-    80003d7c:	69e2                	ld	s3,24(sp)
-    80003d7e:	6a42                	ld	s4,16(sp)
-    80003d80:	6121                	addi	sp,sp,64
-    80003d82:	8082                	ret
+    800033ee:	70e2                	ld	ra,56(sp)
+    800033f0:	7442                	ld	s0,48(sp)
+    800033f2:	74a2                	ld	s1,40(sp)
+    800033f4:	7902                	ld	s2,32(sp)
+    800033f6:	69e2                	ld	s3,24(sp)
+    800033f8:	6a42                	ld	s4,16(sp)
+    800033fa:	6121                	addi	sp,sp,64
+    800033fc:	8082                	ret
     iput(ip);
-    80003d84:	00000097          	auipc	ra,0x0
-    80003d88:	a30080e7          	jalr	-1488(ra) # 800037b4 <iput>
+    800033fe:	00000097          	auipc	ra,0x0
+    80003402:	a2a080e7          	jalr	-1494(ra) # 80002e28 <iput>
     return -1;
-    80003d8c:	557d                	li	a0,-1
-    80003d8e:	b7dd                	j	80003d74 <dirlink+0x86>
+    80003406:	557d                	li	a0,-1
+    80003408:	b7dd                	j	800033ee <dirlink+0x86>
       panic("dirlink read");
-    80003d90:	00005517          	auipc	a0,0x5
-    80003d94:	86050513          	addi	a0,a0,-1952 # 800085f0 <syscalls+0x1c8>
-    80003d98:	ffffc097          	auipc	ra,0xffffc
-    80003d9c:	7ae080e7          	jalr	1966(ra) # 80000546 <panic>
+    8000340a:	00005517          	auipc	a0,0x5
+    8000340e:	34650513          	addi	a0,a0,838 # 80008750 <syscall_name+0x1d0>
+    80003412:	00003097          	auipc	ra,0x3
+    80003416:	8de080e7          	jalr	-1826(ra) # 80005cf0 <panic>
     panic("dirlink");
-    80003da0:	00005517          	auipc	a0,0x5
-    80003da4:	97050513          	addi	a0,a0,-1680 # 80008710 <syscalls+0x2e8>
-    80003da8:	ffffc097          	auipc	ra,0xffffc
-    80003dac:	79e080e7          	jalr	1950(ra) # 80000546 <panic>
+    8000341a:	00005517          	auipc	a0,0x5
+    8000341e:	43e50513          	addi	a0,a0,1086 # 80008858 <syscall_name+0x2d8>
+    80003422:	00003097          	auipc	ra,0x3
+    80003426:	8ce080e7          	jalr	-1842(ra) # 80005cf0 <panic>
 
-0000000080003db0 <namei>:
+000000008000342a <namei>:
 
 struct inode*
 namei(char *path)
 {
-    80003db0:	1101                	addi	sp,sp,-32
-    80003db2:	ec06                	sd	ra,24(sp)
-    80003db4:	e822                	sd	s0,16(sp)
-    80003db6:	1000                	addi	s0,sp,32
+    8000342a:	1101                	addi	sp,sp,-32
+    8000342c:	ec06                	sd	ra,24(sp)
+    8000342e:	e822                	sd	s0,16(sp)
+    80003430:	1000                	addi	s0,sp,32
   char name[DIRSIZ];
   return namex(path, 0, name);
-    80003db8:	fe040613          	addi	a2,s0,-32
-    80003dbc:	4581                	li	a1,0
-    80003dbe:	00000097          	auipc	ra,0x0
-    80003dc2:	dca080e7          	jalr	-566(ra) # 80003b88 <namex>
-}
-    80003dc6:	60e2                	ld	ra,24(sp)
-    80003dc8:	6442                	ld	s0,16(sp)
-    80003dca:	6105                	addi	sp,sp,32
-    80003dcc:	8082                	ret
+    80003432:	fe040613          	addi	a2,s0,-32
+    80003436:	4581                	li	a1,0
+    80003438:	00000097          	auipc	ra,0x0
+    8000343c:	dca080e7          	jalr	-566(ra) # 80003202 <namex>
+}
+    80003440:	60e2                	ld	ra,24(sp)
+    80003442:	6442                	ld	s0,16(sp)
+    80003444:	6105                	addi	sp,sp,32
+    80003446:	8082                	ret
 
-0000000080003dce <nameiparent>:
+0000000080003448 <nameiparent>:
 
 struct inode*
 nameiparent(char *path, char *name)
 {
-    80003dce:	1141                	addi	sp,sp,-16
-    80003dd0:	e406                	sd	ra,8(sp)
-    80003dd2:	e022                	sd	s0,0(sp)
-    80003dd4:	0800                	addi	s0,sp,16
-    80003dd6:	862e                	mv	a2,a1
+    80003448:	1141                	addi	sp,sp,-16
+    8000344a:	e406                	sd	ra,8(sp)
+    8000344c:	e022                	sd	s0,0(sp)
+    8000344e:	0800                	addi	s0,sp,16
+    80003450:	862e                	mv	a2,a1
   return namex(path, 1, name);
-    80003dd8:	4585                	li	a1,1
-    80003dda:	00000097          	auipc	ra,0x0
-    80003dde:	dae080e7          	jalr	-594(ra) # 80003b88 <namex>
-}
-    80003de2:	60a2                	ld	ra,8(sp)
-    80003de4:	6402                	ld	s0,0(sp)
-    80003de6:	0141                	addi	sp,sp,16
-    80003de8:	8082                	ret
+    80003452:	4585                	li	a1,1
+    80003454:	00000097          	auipc	ra,0x0
+    80003458:	dae080e7          	jalr	-594(ra) # 80003202 <namex>
+}
+    8000345c:	60a2                	ld	ra,8(sp)
+    8000345e:	6402                	ld	s0,0(sp)
+    80003460:	0141                	addi	sp,sp,16
+    80003462:	8082                	ret
 
-0000000080003dea <write_head>:
+0000000080003464 <write_head>:
 // Write in-memory log header to disk.
 // This is the true point at which the
 // current transaction commits.
 static void
 write_head(void)
 {
-    80003dea:	1101                	addi	sp,sp,-32
-    80003dec:	ec06                	sd	ra,24(sp)
-    80003dee:	e822                	sd	s0,16(sp)
-    80003df0:	e426                	sd	s1,8(sp)
-    80003df2:	e04a                	sd	s2,0(sp)
-    80003df4:	1000                	addi	s0,sp,32
+    80003464:	1101                	addi	sp,sp,-32
+    80003466:	ec06                	sd	ra,24(sp)
+    80003468:	e822                	sd	s0,16(sp)
+    8000346a:	e426                	sd	s1,8(sp)
+    8000346c:	e04a                	sd	s2,0(sp)
+    8000346e:	1000                	addi	s0,sp,32
   struct buf *buf = bread(log.dev, log.start);
-    80003df6:	0001e917          	auipc	s2,0x1e
-    80003dfa:	b1290913          	addi	s2,s2,-1262 # 80021908 <log>
-    80003dfe:	01892583          	lw	a1,24(s2)
-    80003e02:	02892503          	lw	a0,40(s2)
-    80003e06:	fffff097          	auipc	ra,0xfffff
-    80003e0a:	ff2080e7          	jalr	-14(ra) # 80002df8 <bread>
-    80003e0e:	84aa                	mv	s1,a0
+    80003470:	00016917          	auipc	s2,0x16
+    80003474:	db090913          	addi	s2,s2,-592 # 80019220 <log>
+    80003478:	01892583          	lw	a1,24(s2)
+    8000347c:	02892503          	lw	a0,40(s2)
+    80003480:	fffff097          	auipc	ra,0xfffff
+    80003484:	fec080e7          	jalr	-20(ra) # 8000246c <bread>
+    80003488:	84aa                	mv	s1,a0
   struct logheader *hb = (struct logheader *) (buf->data);
   int i;
   hb->n = log.lh.n;
-    80003e10:	02c92683          	lw	a3,44(s2)
-    80003e14:	cd34                	sw	a3,88(a0)
+    8000348a:	02c92683          	lw	a3,44(s2)
+    8000348e:	cd34                	sw	a3,88(a0)
   for (i = 0; i < log.lh.n; i++) {
-    80003e16:	02d05863          	blez	a3,80003e46 <write_head+0x5c>
-    80003e1a:	0001e797          	auipc	a5,0x1e
-    80003e1e:	b1e78793          	addi	a5,a5,-1250 # 80021938 <log+0x30>
-    80003e22:	05c50713          	addi	a4,a0,92
-    80003e26:	36fd                	addiw	a3,a3,-1
-    80003e28:	02069613          	slli	a2,a3,0x20
-    80003e2c:	01e65693          	srli	a3,a2,0x1e
-    80003e30:	0001e617          	auipc	a2,0x1e
-    80003e34:	b0c60613          	addi	a2,a2,-1268 # 8002193c <log+0x34>
-    80003e38:	96b2                	add	a3,a3,a2
+    80003490:	02d05863          	blez	a3,800034c0 <write_head+0x5c>
+    80003494:	00016797          	auipc	a5,0x16
+    80003498:	dbc78793          	addi	a5,a5,-580 # 80019250 <log+0x30>
+    8000349c:	05c50713          	addi	a4,a0,92
+    800034a0:	36fd                	addiw	a3,a3,-1
+    800034a2:	02069613          	slli	a2,a3,0x20
+    800034a6:	01e65693          	srli	a3,a2,0x1e
+    800034aa:	00016617          	auipc	a2,0x16
+    800034ae:	daa60613          	addi	a2,a2,-598 # 80019254 <log+0x34>
+    800034b2:	96b2                	add	a3,a3,a2
     hb->block[i] = log.lh.block[i];
-    80003e3a:	4390                	lw	a2,0(a5)
-    80003e3c:	c310                	sw	a2,0(a4)
+    800034b4:	4390                	lw	a2,0(a5)
+    800034b6:	c310                	sw	a2,0(a4)
   for (i = 0; i < log.lh.n; i++) {
-    80003e3e:	0791                	addi	a5,a5,4
-    80003e40:	0711                	addi	a4,a4,4
-    80003e42:	fed79ce3          	bne	a5,a3,80003e3a <write_head+0x50>
+    800034b8:	0791                	addi	a5,a5,4
+    800034ba:	0711                	addi	a4,a4,4
+    800034bc:	fed79ce3          	bne	a5,a3,800034b4 <write_head+0x50>
   }
   bwrite(buf);
-    80003e46:	8526                	mv	a0,s1
-    80003e48:	fffff097          	auipc	ra,0xfffff
-    80003e4c:	0a2080e7          	jalr	162(ra) # 80002eea <bwrite>
+    800034c0:	8526                	mv	a0,s1
+    800034c2:	fffff097          	auipc	ra,0xfffff
+    800034c6:	09c080e7          	jalr	156(ra) # 8000255e <bwrite>
   brelse(buf);
-    80003e50:	8526                	mv	a0,s1
-    80003e52:	fffff097          	auipc	ra,0xfffff
-    80003e56:	0d6080e7          	jalr	214(ra) # 80002f28 <brelse>
-}
-    80003e5a:	60e2                	ld	ra,24(sp)
-    80003e5c:	6442                	ld	s0,16(sp)
-    80003e5e:	64a2                	ld	s1,8(sp)
-    80003e60:	6902                	ld	s2,0(sp)
-    80003e62:	6105                	addi	sp,sp,32
-    80003e64:	8082                	ret
+    800034ca:	8526                	mv	a0,s1
+    800034cc:	fffff097          	auipc	ra,0xfffff
+    800034d0:	0d0080e7          	jalr	208(ra) # 8000259c <brelse>
+}
+    800034d4:	60e2                	ld	ra,24(sp)
+    800034d6:	6442                	ld	s0,16(sp)
+    800034d8:	64a2                	ld	s1,8(sp)
+    800034da:	6902                	ld	s2,0(sp)
+    800034dc:	6105                	addi	sp,sp,32
+    800034de:	8082                	ret
 
-0000000080003e66 <install_trans>:
+00000000800034e0 <install_trans>:
   for (tail = 0; tail < log.lh.n; tail++) {
-    80003e66:	0001e797          	auipc	a5,0x1e
-    80003e6a:	ace7a783          	lw	a5,-1330(a5) # 80021934 <log+0x2c>
-    80003e6e:	0af05663          	blez	a5,80003f1a <install_trans+0xb4>
-{
-    80003e72:	7139                	addi	sp,sp,-64
-    80003e74:	fc06                	sd	ra,56(sp)
-    80003e76:	f822                	sd	s0,48(sp)
-    80003e78:	f426                	sd	s1,40(sp)
-    80003e7a:	f04a                	sd	s2,32(sp)
-    80003e7c:	ec4e                	sd	s3,24(sp)
-    80003e7e:	e852                	sd	s4,16(sp)
-    80003e80:	e456                	sd	s5,8(sp)
-    80003e82:	0080                	addi	s0,sp,64
-    80003e84:	0001ea97          	auipc	s5,0x1e
-    80003e88:	ab4a8a93          	addi	s5,s5,-1356 # 80021938 <log+0x30>
+    800034e0:	00016797          	auipc	a5,0x16
+    800034e4:	d6c7a783          	lw	a5,-660(a5) # 8001924c <log+0x2c>
+    800034e8:	0af05d63          	blez	a5,800035a2 <install_trans+0xc2>
+{
+    800034ec:	7139                	addi	sp,sp,-64
+    800034ee:	fc06                	sd	ra,56(sp)
+    800034f0:	f822                	sd	s0,48(sp)
+    800034f2:	f426                	sd	s1,40(sp)
+    800034f4:	f04a                	sd	s2,32(sp)
+    800034f6:	ec4e                	sd	s3,24(sp)
+    800034f8:	e852                	sd	s4,16(sp)
+    800034fa:	e456                	sd	s5,8(sp)
+    800034fc:	e05a                	sd	s6,0(sp)
+    800034fe:	0080                	addi	s0,sp,64
+    80003500:	8b2a                	mv	s6,a0
+    80003502:	00016a97          	auipc	s5,0x16
+    80003506:	d4ea8a93          	addi	s5,s5,-690 # 80019250 <log+0x30>
   for (tail = 0; tail < log.lh.n; tail++) {
-    80003e8c:	4a01                	li	s4,0
+    8000350a:	4a01                	li	s4,0
     struct buf *lbuf = bread(log.dev, log.start+tail+1); // read log block
-    80003e8e:	0001e997          	auipc	s3,0x1e
-    80003e92:	a7a98993          	addi	s3,s3,-1414 # 80021908 <log>
-    80003e96:	0189a583          	lw	a1,24(s3)
-    80003e9a:	014585bb          	addw	a1,a1,s4
-    80003e9e:	2585                	addiw	a1,a1,1
-    80003ea0:	0289a503          	lw	a0,40(s3)
-    80003ea4:	fffff097          	auipc	ra,0xfffff
-    80003ea8:	f54080e7          	jalr	-172(ra) # 80002df8 <bread>
-    80003eac:	892a                	mv	s2,a0
-    struct buf *dbuf = bread(log.dev, log.lh.block[tail]); // read dst
-    80003eae:	000aa583          	lw	a1,0(s5)
-    80003eb2:	0289a503          	lw	a0,40(s3)
-    80003eb6:	fffff097          	auipc	ra,0xfffff
-    80003eba:	f42080e7          	jalr	-190(ra) # 80002df8 <bread>
-    80003ebe:	84aa                	mv	s1,a0
-    memmove(dbuf->data, lbuf->data, BSIZE);  // copy block to dst
-    80003ec0:	40000613          	li	a2,1024
-    80003ec4:	05890593          	addi	a1,s2,88
-    80003ec8:	05850513          	addi	a0,a0,88
-    80003ecc:	ffffd097          	auipc	ra,0xffffd
-    80003ed0:	e8c080e7          	jalr	-372(ra) # 80000d58 <memmove>
-    bwrite(dbuf);  // write dst to disk
-    80003ed4:	8526                	mv	a0,s1
-    80003ed6:	fffff097          	auipc	ra,0xfffff
-    80003eda:	014080e7          	jalr	20(ra) # 80002eea <bwrite>
-    bunpin(dbuf);
-    80003ede:	8526                	mv	a0,s1
-    80003ee0:	fffff097          	auipc	ra,0xfffff
-    80003ee4:	122080e7          	jalr	290(ra) # 80003002 <bunpin>
+    8000350c:	00016997          	auipc	s3,0x16
+    80003510:	d1498993          	addi	s3,s3,-748 # 80019220 <log>
+    80003514:	a00d                	j	80003536 <install_trans+0x56>
     brelse(lbuf);
-    80003ee8:	854a                	mv	a0,s2
-    80003eea:	fffff097          	auipc	ra,0xfffff
-    80003eee:	03e080e7          	jalr	62(ra) # 80002f28 <brelse>
+    80003516:	854a                	mv	a0,s2
+    80003518:	fffff097          	auipc	ra,0xfffff
+    8000351c:	084080e7          	jalr	132(ra) # 8000259c <brelse>
     brelse(dbuf);
-    80003ef2:	8526                	mv	a0,s1
-    80003ef4:	fffff097          	auipc	ra,0xfffff
-    80003ef8:	034080e7          	jalr	52(ra) # 80002f28 <brelse>
+    80003520:	8526                	mv	a0,s1
+    80003522:	fffff097          	auipc	ra,0xfffff
+    80003526:	07a080e7          	jalr	122(ra) # 8000259c <brelse>
   for (tail = 0; tail < log.lh.n; tail++) {
-    80003efc:	2a05                	addiw	s4,s4,1
-    80003efe:	0a91                	addi	s5,s5,4
-    80003f00:	02c9a783          	lw	a5,44(s3)
-    80003f04:	f8fa49e3          	blt	s4,a5,80003e96 <install_trans+0x30>
-}
-    80003f08:	70e2                	ld	ra,56(sp)
-    80003f0a:	7442                	ld	s0,48(sp)
-    80003f0c:	74a2                	ld	s1,40(sp)
-    80003f0e:	7902                	ld	s2,32(sp)
-    80003f10:	69e2                	ld	s3,24(sp)
-    80003f12:	6a42                	ld	s4,16(sp)
-    80003f14:	6aa2                	ld	s5,8(sp)
-    80003f16:	6121                	addi	sp,sp,64
-    80003f18:	8082                	ret
-    80003f1a:	8082                	ret
-
-0000000080003f1c <initlog>:
-{
-    80003f1c:	7179                	addi	sp,sp,-48
-    80003f1e:	f406                	sd	ra,40(sp)
-    80003f20:	f022                	sd	s0,32(sp)
-    80003f22:	ec26                	sd	s1,24(sp)
-    80003f24:	e84a                	sd	s2,16(sp)
-    80003f26:	e44e                	sd	s3,8(sp)
-    80003f28:	1800                	addi	s0,sp,48
-    80003f2a:	892a                	mv	s2,a0
-    80003f2c:	89ae                	mv	s3,a1
+    8000352a:	2a05                	addiw	s4,s4,1
+    8000352c:	0a91                	addi	s5,s5,4
+    8000352e:	02c9a783          	lw	a5,44(s3)
+    80003532:	04fa5e63          	bge	s4,a5,8000358e <install_trans+0xae>
+    struct buf *lbuf = bread(log.dev, log.start+tail+1); // read log block
+    80003536:	0189a583          	lw	a1,24(s3)
+    8000353a:	014585bb          	addw	a1,a1,s4
+    8000353e:	2585                	addiw	a1,a1,1
+    80003540:	0289a503          	lw	a0,40(s3)
+    80003544:	fffff097          	auipc	ra,0xfffff
+    80003548:	f28080e7          	jalr	-216(ra) # 8000246c <bread>
+    8000354c:	892a                	mv	s2,a0
+    struct buf *dbuf = bread(log.dev, log.lh.block[tail]); // read dst
+    8000354e:	000aa583          	lw	a1,0(s5)
+    80003552:	0289a503          	lw	a0,40(s3)
+    80003556:	fffff097          	auipc	ra,0xfffff
+    8000355a:	f16080e7          	jalr	-234(ra) # 8000246c <bread>
+    8000355e:	84aa                	mv	s1,a0
+    memmove(dbuf->data, lbuf->data, BSIZE);  // copy block to dst
+    80003560:	40000613          	li	a2,1024
+    80003564:	05890593          	addi	a1,s2,88
+    80003568:	05850513          	addi	a0,a0,88
+    8000356c:	ffffd097          	auipc	ra,0xffffd
+    80003570:	c8e080e7          	jalr	-882(ra) # 800001fa <memmove>
+    bwrite(dbuf);  // write dst to disk
+    80003574:	8526                	mv	a0,s1
+    80003576:	fffff097          	auipc	ra,0xfffff
+    8000357a:	fe8080e7          	jalr	-24(ra) # 8000255e <bwrite>
+    if(recovering == 0)
+    8000357e:	f80b1ce3          	bnez	s6,80003516 <install_trans+0x36>
+      bunpin(dbuf);
+    80003582:	8526                	mv	a0,s1
+    80003584:	fffff097          	auipc	ra,0xfffff
+    80003588:	0f2080e7          	jalr	242(ra) # 80002676 <bunpin>
+    8000358c:	b769                	j	80003516 <install_trans+0x36>
+}
+    8000358e:	70e2                	ld	ra,56(sp)
+    80003590:	7442                	ld	s0,48(sp)
+    80003592:	74a2                	ld	s1,40(sp)
+    80003594:	7902                	ld	s2,32(sp)
+    80003596:	69e2                	ld	s3,24(sp)
+    80003598:	6a42                	ld	s4,16(sp)
+    8000359a:	6aa2                	ld	s5,8(sp)
+    8000359c:	6b02                	ld	s6,0(sp)
+    8000359e:	6121                	addi	sp,sp,64
+    800035a0:	8082                	ret
+    800035a2:	8082                	ret
+
+00000000800035a4 <initlog>:
+{
+    800035a4:	7179                	addi	sp,sp,-48
+    800035a6:	f406                	sd	ra,40(sp)
+    800035a8:	f022                	sd	s0,32(sp)
+    800035aa:	ec26                	sd	s1,24(sp)
+    800035ac:	e84a                	sd	s2,16(sp)
+    800035ae:	e44e                	sd	s3,8(sp)
+    800035b0:	1800                	addi	s0,sp,48
+    800035b2:	892a                	mv	s2,a0
+    800035b4:	89ae                	mv	s3,a1
   initlock(&log.lock, "log");
-    80003f2e:	0001e497          	auipc	s1,0x1e
-    80003f32:	9da48493          	addi	s1,s1,-1574 # 80021908 <log>
-    80003f36:	00004597          	auipc	a1,0x4
-    80003f3a:	6ca58593          	addi	a1,a1,1738 # 80008600 <syscalls+0x1d8>
-    80003f3e:	8526                	mv	a0,s1
-    80003f40:	ffffd097          	auipc	ra,0xffffd
-    80003f44:	c30080e7          	jalr	-976(ra) # 80000b70 <initlock>
+    800035b6:	00016497          	auipc	s1,0x16
+    800035ba:	c6a48493          	addi	s1,s1,-918 # 80019220 <log>
+    800035be:	00005597          	auipc	a1,0x5
+    800035c2:	1a258593          	addi	a1,a1,418 # 80008760 <syscall_name+0x1e0>
+    800035c6:	8526                	mv	a0,s1
+    800035c8:	00003097          	auipc	ra,0x3
+    800035cc:	bd0080e7          	jalr	-1072(ra) # 80006198 <initlock>
   log.start = sb->logstart;
-    80003f48:	0149a583          	lw	a1,20(s3)
-    80003f4c:	cc8c                	sw	a1,24(s1)
+    800035d0:	0149a583          	lw	a1,20(s3)
+    800035d4:	cc8c                	sw	a1,24(s1)
   log.size = sb->nlog;
-    80003f4e:	0109a783          	lw	a5,16(s3)
-    80003f52:	ccdc                	sw	a5,28(s1)
+    800035d6:	0109a783          	lw	a5,16(s3)
+    800035da:	ccdc                	sw	a5,28(s1)
   log.dev = dev;
-    80003f54:	0324a423          	sw	s2,40(s1)
+    800035dc:	0324a423          	sw	s2,40(s1)
   struct buf *buf = bread(log.dev, log.start);
-    80003f58:	854a                	mv	a0,s2
-    80003f5a:	fffff097          	auipc	ra,0xfffff
-    80003f5e:	e9e080e7          	jalr	-354(ra) # 80002df8 <bread>
+    800035e0:	854a                	mv	a0,s2
+    800035e2:	fffff097          	auipc	ra,0xfffff
+    800035e6:	e8a080e7          	jalr	-374(ra) # 8000246c <bread>
   log.lh.n = lh->n;
-    80003f62:	4d34                	lw	a3,88(a0)
-    80003f64:	d4d4                	sw	a3,44(s1)
+    800035ea:	4d34                	lw	a3,88(a0)
+    800035ec:	d4d4                	sw	a3,44(s1)
   for (i = 0; i < log.lh.n; i++) {
-    80003f66:	02d05663          	blez	a3,80003f92 <initlog+0x76>
-    80003f6a:	05c50793          	addi	a5,a0,92
-    80003f6e:	0001e717          	auipc	a4,0x1e
-    80003f72:	9ca70713          	addi	a4,a4,-1590 # 80021938 <log+0x30>
-    80003f76:	36fd                	addiw	a3,a3,-1
-    80003f78:	02069613          	slli	a2,a3,0x20
-    80003f7c:	01e65693          	srli	a3,a2,0x1e
-    80003f80:	06050613          	addi	a2,a0,96
-    80003f84:	96b2                	add	a3,a3,a2
+    800035ee:	02d05663          	blez	a3,8000361a <initlog+0x76>
+    800035f2:	05c50793          	addi	a5,a0,92
+    800035f6:	00016717          	auipc	a4,0x16
+    800035fa:	c5a70713          	addi	a4,a4,-934 # 80019250 <log+0x30>
+    800035fe:	36fd                	addiw	a3,a3,-1
+    80003600:	02069613          	slli	a2,a3,0x20
+    80003604:	01e65693          	srli	a3,a2,0x1e
+    80003608:	06050613          	addi	a2,a0,96
+    8000360c:	96b2                	add	a3,a3,a2
     log.lh.block[i] = lh->block[i];
-    80003f86:	4390                	lw	a2,0(a5)
-    80003f88:	c310                	sw	a2,0(a4)
+    8000360e:	4390                	lw	a2,0(a5)
+    80003610:	c310                	sw	a2,0(a4)
   for (i = 0; i < log.lh.n; i++) {
-    80003f8a:	0791                	addi	a5,a5,4
-    80003f8c:	0711                	addi	a4,a4,4
-    80003f8e:	fed79ce3          	bne	a5,a3,80003f86 <initlog+0x6a>
+    80003612:	0791                	addi	a5,a5,4
+    80003614:	0711                	addi	a4,a4,4
+    80003616:	fed79ce3          	bne	a5,a3,8000360e <initlog+0x6a>
   brelse(buf);
-    80003f92:	fffff097          	auipc	ra,0xfffff
-    80003f96:	f96080e7          	jalr	-106(ra) # 80002f28 <brelse>
+    8000361a:	fffff097          	auipc	ra,0xfffff
+    8000361e:	f82080e7          	jalr	-126(ra) # 8000259c <brelse>
 
 static void
 recover_from_log(void)
 {
   read_head();
-  install_trans(); // if committed, copy from log to disk
-    80003f9a:	00000097          	auipc	ra,0x0
-    80003f9e:	ecc080e7          	jalr	-308(ra) # 80003e66 <install_trans>
+  install_trans(1); // if committed, copy from log to disk
+    80003622:	4505                	li	a0,1
+    80003624:	00000097          	auipc	ra,0x0
+    80003628:	ebc080e7          	jalr	-324(ra) # 800034e0 <install_trans>
   log.lh.n = 0;
-    80003fa2:	0001e797          	auipc	a5,0x1e
-    80003fa6:	9807a923          	sw	zero,-1646(a5) # 80021934 <log+0x2c>
+    8000362c:	00016797          	auipc	a5,0x16
+    80003630:	c207a023          	sw	zero,-992(a5) # 8001924c <log+0x2c>
   write_head(); // clear the log
-    80003faa:	00000097          	auipc	ra,0x0
-    80003fae:	e40080e7          	jalr	-448(ra) # 80003dea <write_head>
+    80003634:	00000097          	auipc	ra,0x0
+    80003638:	e30080e7          	jalr	-464(ra) # 80003464 <write_head>
 }
-    80003fb2:	70a2                	ld	ra,40(sp)
-    80003fb4:	7402                	ld	s0,32(sp)
-    80003fb6:	64e2                	ld	s1,24(sp)
-    80003fb8:	6942                	ld	s2,16(sp)
-    80003fba:	69a2                	ld	s3,8(sp)
-    80003fbc:	6145                	addi	sp,sp,48
-    80003fbe:	8082                	ret
+    8000363c:	70a2                	ld	ra,40(sp)
+    8000363e:	7402                	ld	s0,32(sp)
+    80003640:	64e2                	ld	s1,24(sp)
+    80003642:	6942                	ld	s2,16(sp)
+    80003644:	69a2                	ld	s3,8(sp)
+    80003646:	6145                	addi	sp,sp,48
+    80003648:	8082                	ret
 
-0000000080003fc0 <begin_op>:
+000000008000364a <begin_op>:
 }
 
 // called at the start of each FS system call.
 void
 begin_op(void)
 {
-    80003fc0:	1101                	addi	sp,sp,-32
-    80003fc2:	ec06                	sd	ra,24(sp)
-    80003fc4:	e822                	sd	s0,16(sp)
-    80003fc6:	e426                	sd	s1,8(sp)
-    80003fc8:	e04a                	sd	s2,0(sp)
-    80003fca:	1000                	addi	s0,sp,32
+    8000364a:	1101                	addi	sp,sp,-32
+    8000364c:	ec06                	sd	ra,24(sp)
+    8000364e:	e822                	sd	s0,16(sp)
+    80003650:	e426                	sd	s1,8(sp)
+    80003652:	e04a                	sd	s2,0(sp)
+    80003654:	1000                	addi	s0,sp,32
   acquire(&log.lock);
-    80003fcc:	0001e517          	auipc	a0,0x1e
-    80003fd0:	93c50513          	addi	a0,a0,-1732 # 80021908 <log>
-    80003fd4:	ffffd097          	auipc	ra,0xffffd
-    80003fd8:	c2c080e7          	jalr	-980(ra) # 80000c00 <acquire>
+    80003656:	00016517          	auipc	a0,0x16
+    8000365a:	bca50513          	addi	a0,a0,-1078 # 80019220 <log>
+    8000365e:	00003097          	auipc	ra,0x3
+    80003662:	bca080e7          	jalr	-1078(ra) # 80006228 <acquire>
   while(1){
     if(log.committing){
-    80003fdc:	0001e497          	auipc	s1,0x1e
-    80003fe0:	92c48493          	addi	s1,s1,-1748 # 80021908 <log>
+    80003666:	00016497          	auipc	s1,0x16
+    8000366a:	bba48493          	addi	s1,s1,-1094 # 80019220 <log>
       sleep(&log, &log.lock);
     } else if(log.lh.n + (log.outstanding+1)*MAXOPBLOCKS > LOGSIZE){
-    80003fe4:	4979                	li	s2,30
-    80003fe6:	a039                	j	80003ff4 <begin_op+0x34>
+    8000366e:	4979                	li	s2,30
+    80003670:	a039                	j	8000367e <begin_op+0x34>
       sleep(&log, &log.lock);
-    80003fe8:	85a6                	mv	a1,s1
-    80003fea:	8526                	mv	a0,s1
-    80003fec:	ffffe097          	auipc	ra,0xffffe
-    80003ff0:	1f4080e7          	jalr	500(ra) # 800021e0 <sleep>
+    80003672:	85a6                	mv	a1,s1
+    80003674:	8526                	mv	a0,s1
+    80003676:	ffffe097          	auipc	ra,0xffffe
+    8000367a:	f94080e7          	jalr	-108(ra) # 8000160a <sleep>
     if(log.committing){
-    80003ff4:	50dc                	lw	a5,36(s1)
-    80003ff6:	fbed                	bnez	a5,80003fe8 <begin_op+0x28>
+    8000367e:	50dc                	lw	a5,36(s1)
+    80003680:	fbed                	bnez	a5,80003672 <begin_op+0x28>
     } else if(log.lh.n + (log.outstanding+1)*MAXOPBLOCKS > LOGSIZE){
-    80003ff8:	5098                	lw	a4,32(s1)
-    80003ffa:	2705                	addiw	a4,a4,1
-    80003ffc:	0007069b          	sext.w	a3,a4
-    80004000:	0027179b          	slliw	a5,a4,0x2
-    80004004:	9fb9                	addw	a5,a5,a4
-    80004006:	0017979b          	slliw	a5,a5,0x1
-    8000400a:	54d8                	lw	a4,44(s1)
-    8000400c:	9fb9                	addw	a5,a5,a4
-    8000400e:	00f95963          	bge	s2,a5,80004020 <begin_op+0x60>
+    80003682:	5098                	lw	a4,32(s1)
+    80003684:	2705                	addiw	a4,a4,1
+    80003686:	0007069b          	sext.w	a3,a4
+    8000368a:	0027179b          	slliw	a5,a4,0x2
+    8000368e:	9fb9                	addw	a5,a5,a4
+    80003690:	0017979b          	slliw	a5,a5,0x1
+    80003694:	54d8                	lw	a4,44(s1)
+    80003696:	9fb9                	addw	a5,a5,a4
+    80003698:	00f95963          	bge	s2,a5,800036aa <begin_op+0x60>
       // this op might exhaust log space; wait for commit.
       sleep(&log, &log.lock);
-    80004012:	85a6                	mv	a1,s1
-    80004014:	8526                	mv	a0,s1
-    80004016:	ffffe097          	auipc	ra,0xffffe
-    8000401a:	1ca080e7          	jalr	458(ra) # 800021e0 <sleep>
-    8000401e:	bfd9                	j	80003ff4 <begin_op+0x34>
+    8000369c:	85a6                	mv	a1,s1
+    8000369e:	8526                	mv	a0,s1
+    800036a0:	ffffe097          	auipc	ra,0xffffe
+    800036a4:	f6a080e7          	jalr	-150(ra) # 8000160a <sleep>
+    800036a8:	bfd9                	j	8000367e <begin_op+0x34>
     } else {
       log.outstanding += 1;
-    80004020:	0001e517          	auipc	a0,0x1e
-    80004024:	8e850513          	addi	a0,a0,-1816 # 80021908 <log>
-    80004028:	d114                	sw	a3,32(a0)
+    800036aa:	00016517          	auipc	a0,0x16
+    800036ae:	b7650513          	addi	a0,a0,-1162 # 80019220 <log>
+    800036b2:	d114                	sw	a3,32(a0)
       release(&log.lock);
-    8000402a:	ffffd097          	auipc	ra,0xffffd
-    8000402e:	c8a080e7          	jalr	-886(ra) # 80000cb4 <release>
+    800036b4:	00003097          	auipc	ra,0x3
+    800036b8:	c28080e7          	jalr	-984(ra) # 800062dc <release>
       break;
     }
   }
 }
-    80004032:	60e2                	ld	ra,24(sp)
-    80004034:	6442                	ld	s0,16(sp)
-    80004036:	64a2                	ld	s1,8(sp)
-    80004038:	6902                	ld	s2,0(sp)
-    8000403a:	6105                	addi	sp,sp,32
-    8000403c:	8082                	ret
+    800036bc:	60e2                	ld	ra,24(sp)
+    800036be:	6442                	ld	s0,16(sp)
+    800036c0:	64a2                	ld	s1,8(sp)
+    800036c2:	6902                	ld	s2,0(sp)
+    800036c4:	6105                	addi	sp,sp,32
+    800036c6:	8082                	ret
 
-000000008000403e <end_op>:
+00000000800036c8 <end_op>:
 
 // called at the end of each FS system call.
 // commits if this was the last outstanding operation.
 void
 end_op(void)
 {
-    8000403e:	7139                	addi	sp,sp,-64
-    80004040:	fc06                	sd	ra,56(sp)
-    80004042:	f822                	sd	s0,48(sp)
-    80004044:	f426                	sd	s1,40(sp)
-    80004046:	f04a                	sd	s2,32(sp)
-    80004048:	ec4e                	sd	s3,24(sp)
-    8000404a:	e852                	sd	s4,16(sp)
-    8000404c:	e456                	sd	s5,8(sp)
-    8000404e:	0080                	addi	s0,sp,64
+    800036c8:	7139                	addi	sp,sp,-64
+    800036ca:	fc06                	sd	ra,56(sp)
+    800036cc:	f822                	sd	s0,48(sp)
+    800036ce:	f426                	sd	s1,40(sp)
+    800036d0:	f04a                	sd	s2,32(sp)
+    800036d2:	ec4e                	sd	s3,24(sp)
+    800036d4:	e852                	sd	s4,16(sp)
+    800036d6:	e456                	sd	s5,8(sp)
+    800036d8:	0080                	addi	s0,sp,64
   int do_commit = 0;
 
   acquire(&log.lock);
-    80004050:	0001e497          	auipc	s1,0x1e
-    80004054:	8b848493          	addi	s1,s1,-1864 # 80021908 <log>
-    80004058:	8526                	mv	a0,s1
-    8000405a:	ffffd097          	auipc	ra,0xffffd
-    8000405e:	ba6080e7          	jalr	-1114(ra) # 80000c00 <acquire>
+    800036da:	00016497          	auipc	s1,0x16
+    800036de:	b4648493          	addi	s1,s1,-1210 # 80019220 <log>
+    800036e2:	8526                	mv	a0,s1
+    800036e4:	00003097          	auipc	ra,0x3
+    800036e8:	b44080e7          	jalr	-1212(ra) # 80006228 <acquire>
   log.outstanding -= 1;
-    80004062:	509c                	lw	a5,32(s1)
-    80004064:	37fd                	addiw	a5,a5,-1
-    80004066:	0007891b          	sext.w	s2,a5
-    8000406a:	d09c                	sw	a5,32(s1)
+    800036ec:	509c                	lw	a5,32(s1)
+    800036ee:	37fd                	addiw	a5,a5,-1
+    800036f0:	0007891b          	sext.w	s2,a5
+    800036f4:	d09c                	sw	a5,32(s1)
   if(log.committing)
-    8000406c:	50dc                	lw	a5,36(s1)
-    8000406e:	e7b9                	bnez	a5,800040bc <end_op+0x7e>
+    800036f6:	50dc                	lw	a5,36(s1)
+    800036f8:	e7b9                	bnez	a5,80003746 <end_op+0x7e>
     panic("log.committing");
   if(log.outstanding == 0){
-    80004070:	04091e63          	bnez	s2,800040cc <end_op+0x8e>
+    800036fa:	04091e63          	bnez	s2,80003756 <end_op+0x8e>
     do_commit = 1;
     log.committing = 1;
-    80004074:	0001e497          	auipc	s1,0x1e
-    80004078:	89448493          	addi	s1,s1,-1900 # 80021908 <log>
-    8000407c:	4785                	li	a5,1
-    8000407e:	d0dc                	sw	a5,36(s1)
+    800036fe:	00016497          	auipc	s1,0x16
+    80003702:	b2248493          	addi	s1,s1,-1246 # 80019220 <log>
+    80003706:	4785                	li	a5,1
+    80003708:	d0dc                	sw	a5,36(s1)
     // begin_op() may be waiting for log space,
     // and decrementing log.outstanding has decreased
     // the amount of reserved space.
     wakeup(&log);
   }
   release(&log.lock);
-    80004080:	8526                	mv	a0,s1
-    80004082:	ffffd097          	auipc	ra,0xffffd
-    80004086:	c32080e7          	jalr	-974(ra) # 80000cb4 <release>
+    8000370a:	8526                	mv	a0,s1
+    8000370c:	00003097          	auipc	ra,0x3
+    80003710:	bd0080e7          	jalr	-1072(ra) # 800062dc <release>
 }
 
 static void
 commit()
 {
   if (log.lh.n > 0) {
-    8000408a:	54dc                	lw	a5,44(s1)
-    8000408c:	06f04763          	bgtz	a5,800040fa <end_op+0xbc>
+    80003714:	54dc                	lw	a5,44(s1)
+    80003716:	06f04763          	bgtz	a5,80003784 <end_op+0xbc>
     acquire(&log.lock);
-    80004090:	0001e497          	auipc	s1,0x1e
-    80004094:	87848493          	addi	s1,s1,-1928 # 80021908 <log>
-    80004098:	8526                	mv	a0,s1
-    8000409a:	ffffd097          	auipc	ra,0xffffd
-    8000409e:	b66080e7          	jalr	-1178(ra) # 80000c00 <acquire>
+    8000371a:	00016497          	auipc	s1,0x16
+    8000371e:	b0648493          	addi	s1,s1,-1274 # 80019220 <log>
+    80003722:	8526                	mv	a0,s1
+    80003724:	00003097          	auipc	ra,0x3
+    80003728:	b04080e7          	jalr	-1276(ra) # 80006228 <acquire>
     log.committing = 0;
-    800040a2:	0204a223          	sw	zero,36(s1)
+    8000372c:	0204a223          	sw	zero,36(s1)
     wakeup(&log);
-    800040a6:	8526                	mv	a0,s1
-    800040a8:	ffffe097          	auipc	ra,0xffffe
-    800040ac:	2b8080e7          	jalr	696(ra) # 80002360 <wakeup>
+    80003730:	8526                	mv	a0,s1
+    80003732:	ffffe097          	auipc	ra,0xffffe
+    80003736:	064080e7          	jalr	100(ra) # 80001796 <wakeup>
     release(&log.lock);
-    800040b0:	8526                	mv	a0,s1
-    800040b2:	ffffd097          	auipc	ra,0xffffd
-    800040b6:	c02080e7          	jalr	-1022(ra) # 80000cb4 <release>
+    8000373a:	8526                	mv	a0,s1
+    8000373c:	00003097          	auipc	ra,0x3
+    80003740:	ba0080e7          	jalr	-1120(ra) # 800062dc <release>
 }
-    800040ba:	a03d                	j	800040e8 <end_op+0xaa>
+    80003744:	a03d                	j	80003772 <end_op+0xaa>
     panic("log.committing");
-    800040bc:	00004517          	auipc	a0,0x4
-    800040c0:	54c50513          	addi	a0,a0,1356 # 80008608 <syscalls+0x1e0>
-    800040c4:	ffffc097          	auipc	ra,0xffffc
-    800040c8:	482080e7          	jalr	1154(ra) # 80000546 <panic>
+    80003746:	00005517          	auipc	a0,0x5
+    8000374a:	02250513          	addi	a0,a0,34 # 80008768 <syscall_name+0x1e8>
+    8000374e:	00002097          	auipc	ra,0x2
+    80003752:	5a2080e7          	jalr	1442(ra) # 80005cf0 <panic>
     wakeup(&log);
-    800040cc:	0001e497          	auipc	s1,0x1e
-    800040d0:	83c48493          	addi	s1,s1,-1988 # 80021908 <log>
-    800040d4:	8526                	mv	a0,s1
-    800040d6:	ffffe097          	auipc	ra,0xffffe
-    800040da:	28a080e7          	jalr	650(ra) # 80002360 <wakeup>
+    80003756:	00016497          	auipc	s1,0x16
+    8000375a:	aca48493          	addi	s1,s1,-1334 # 80019220 <log>
+    8000375e:	8526                	mv	a0,s1
+    80003760:	ffffe097          	auipc	ra,0xffffe
+    80003764:	036080e7          	jalr	54(ra) # 80001796 <wakeup>
   release(&log.lock);
-    800040de:	8526                	mv	a0,s1
-    800040e0:	ffffd097          	auipc	ra,0xffffd
-    800040e4:	bd4080e7          	jalr	-1068(ra) # 80000cb4 <release>
-}
-    800040e8:	70e2                	ld	ra,56(sp)
-    800040ea:	7442                	ld	s0,48(sp)
-    800040ec:	74a2                	ld	s1,40(sp)
-    800040ee:	7902                	ld	s2,32(sp)
-    800040f0:	69e2                	ld	s3,24(sp)
-    800040f2:	6a42                	ld	s4,16(sp)
-    800040f4:	6aa2                	ld	s5,8(sp)
-    800040f6:	6121                	addi	sp,sp,64
-    800040f8:	8082                	ret
+    80003768:	8526                	mv	a0,s1
+    8000376a:	00003097          	auipc	ra,0x3
+    8000376e:	b72080e7          	jalr	-1166(ra) # 800062dc <release>
+}
+    80003772:	70e2                	ld	ra,56(sp)
+    80003774:	7442                	ld	s0,48(sp)
+    80003776:	74a2                	ld	s1,40(sp)
+    80003778:	7902                	ld	s2,32(sp)
+    8000377a:	69e2                	ld	s3,24(sp)
+    8000377c:	6a42                	ld	s4,16(sp)
+    8000377e:	6aa2                	ld	s5,8(sp)
+    80003780:	6121                	addi	sp,sp,64
+    80003782:	8082                	ret
   for (tail = 0; tail < log.lh.n; tail++) {
-    800040fa:	0001ea97          	auipc	s5,0x1e
-    800040fe:	83ea8a93          	addi	s5,s5,-1986 # 80021938 <log+0x30>
+    80003784:	00016a97          	auipc	s5,0x16
+    80003788:	acca8a93          	addi	s5,s5,-1332 # 80019250 <log+0x30>
     struct buf *to = bread(log.dev, log.start+tail+1); // log block
-    80004102:	0001ea17          	auipc	s4,0x1e
-    80004106:	806a0a13          	addi	s4,s4,-2042 # 80021908 <log>
-    8000410a:	018a2583          	lw	a1,24(s4)
-    8000410e:	012585bb          	addw	a1,a1,s2
-    80004112:	2585                	addiw	a1,a1,1
-    80004114:	028a2503          	lw	a0,40(s4)
-    80004118:	fffff097          	auipc	ra,0xfffff
-    8000411c:	ce0080e7          	jalr	-800(ra) # 80002df8 <bread>
-    80004120:	84aa                	mv	s1,a0
+    8000378c:	00016a17          	auipc	s4,0x16
+    80003790:	a94a0a13          	addi	s4,s4,-1388 # 80019220 <log>
+    80003794:	018a2583          	lw	a1,24(s4)
+    80003798:	012585bb          	addw	a1,a1,s2
+    8000379c:	2585                	addiw	a1,a1,1
+    8000379e:	028a2503          	lw	a0,40(s4)
+    800037a2:	fffff097          	auipc	ra,0xfffff
+    800037a6:	cca080e7          	jalr	-822(ra) # 8000246c <bread>
+    800037aa:	84aa                	mv	s1,a0
     struct buf *from = bread(log.dev, log.lh.block[tail]); // cache block
-    80004122:	000aa583          	lw	a1,0(s5)
-    80004126:	028a2503          	lw	a0,40(s4)
-    8000412a:	fffff097          	auipc	ra,0xfffff
-    8000412e:	cce080e7          	jalr	-818(ra) # 80002df8 <bread>
-    80004132:	89aa                	mv	s3,a0
+    800037ac:	000aa583          	lw	a1,0(s5)
+    800037b0:	028a2503          	lw	a0,40(s4)
+    800037b4:	fffff097          	auipc	ra,0xfffff
+    800037b8:	cb8080e7          	jalr	-840(ra) # 8000246c <bread>
+    800037bc:	89aa                	mv	s3,a0
     memmove(to->data, from->data, BSIZE);
-    80004134:	40000613          	li	a2,1024
-    80004138:	05850593          	addi	a1,a0,88
-    8000413c:	05848513          	addi	a0,s1,88
-    80004140:	ffffd097          	auipc	ra,0xffffd
-    80004144:	c18080e7          	jalr	-1000(ra) # 80000d58 <memmove>
+    800037be:	40000613          	li	a2,1024
+    800037c2:	05850593          	addi	a1,a0,88
+    800037c6:	05848513          	addi	a0,s1,88
+    800037ca:	ffffd097          	auipc	ra,0xffffd
+    800037ce:	a30080e7          	jalr	-1488(ra) # 800001fa <memmove>
     bwrite(to);  // write the log
-    80004148:	8526                	mv	a0,s1
-    8000414a:	fffff097          	auipc	ra,0xfffff
-    8000414e:	da0080e7          	jalr	-608(ra) # 80002eea <bwrite>
+    800037d2:	8526                	mv	a0,s1
+    800037d4:	fffff097          	auipc	ra,0xfffff
+    800037d8:	d8a080e7          	jalr	-630(ra) # 8000255e <bwrite>
     brelse(from);
-    80004152:	854e                	mv	a0,s3
-    80004154:	fffff097          	auipc	ra,0xfffff
-    80004158:	dd4080e7          	jalr	-556(ra) # 80002f28 <brelse>
+    800037dc:	854e                	mv	a0,s3
+    800037de:	fffff097          	auipc	ra,0xfffff
+    800037e2:	dbe080e7          	jalr	-578(ra) # 8000259c <brelse>
     brelse(to);
-    8000415c:	8526                	mv	a0,s1
-    8000415e:	fffff097          	auipc	ra,0xfffff
-    80004162:	dca080e7          	jalr	-566(ra) # 80002f28 <brelse>
+    800037e6:	8526                	mv	a0,s1
+    800037e8:	fffff097          	auipc	ra,0xfffff
+    800037ec:	db4080e7          	jalr	-588(ra) # 8000259c <brelse>
   for (tail = 0; tail < log.lh.n; tail++) {
-    80004166:	2905                	addiw	s2,s2,1
-    80004168:	0a91                	addi	s5,s5,4
-    8000416a:	02ca2783          	lw	a5,44(s4)
-    8000416e:	f8f94ee3          	blt	s2,a5,8000410a <end_op+0xcc>
+    800037f0:	2905                	addiw	s2,s2,1
+    800037f2:	0a91                	addi	s5,s5,4
+    800037f4:	02ca2783          	lw	a5,44(s4)
+    800037f8:	f8f94ee3          	blt	s2,a5,80003794 <end_op+0xcc>
     write_log();     // Write modified blocks from cache to log
     write_head();    // Write header to disk -- the real commit
-    80004172:	00000097          	auipc	ra,0x0
-    80004176:	c78080e7          	jalr	-904(ra) # 80003dea <write_head>
-    install_trans(); // Now install writes to home locations
-    8000417a:	00000097          	auipc	ra,0x0
-    8000417e:	cec080e7          	jalr	-788(ra) # 80003e66 <install_trans>
+    800037fc:	00000097          	auipc	ra,0x0
+    80003800:	c68080e7          	jalr	-920(ra) # 80003464 <write_head>
+    install_trans(0); // Now install writes to home locations
+    80003804:	4501                	li	a0,0
+    80003806:	00000097          	auipc	ra,0x0
+    8000380a:	cda080e7          	jalr	-806(ra) # 800034e0 <install_trans>
     log.lh.n = 0;
-    80004182:	0001d797          	auipc	a5,0x1d
-    80004186:	7a07a923          	sw	zero,1970(a5) # 80021934 <log+0x2c>
+    8000380e:	00016797          	auipc	a5,0x16
+    80003812:	a207af23          	sw	zero,-1474(a5) # 8001924c <log+0x2c>
     write_head();    // Erase the transaction from the log
-    8000418a:	00000097          	auipc	ra,0x0
-    8000418e:	c60080e7          	jalr	-928(ra) # 80003dea <write_head>
-    80004192:	bdfd                	j	80004090 <end_op+0x52>
+    80003816:	00000097          	auipc	ra,0x0
+    8000381a:	c4e080e7          	jalr	-946(ra) # 80003464 <write_head>
+    8000381e:	bdf5                	j	8000371a <end_op+0x52>
 
-0000000080004194 <log_write>:
+0000000080003820 <log_write>:
 //   modify bp->data[]
 //   log_write(bp)
 //   brelse(bp)
 void
 log_write(struct buf *b)
 {
-    80004194:	1101                	addi	sp,sp,-32
-    80004196:	ec06                	sd	ra,24(sp)
-    80004198:	e822                	sd	s0,16(sp)
-    8000419a:	e426                	sd	s1,8(sp)
-    8000419c:	e04a                	sd	s2,0(sp)
-    8000419e:	1000                	addi	s0,sp,32
+    80003820:	1101                	addi	sp,sp,-32
+    80003822:	ec06                	sd	ra,24(sp)
+    80003824:	e822                	sd	s0,16(sp)
+    80003826:	e426                	sd	s1,8(sp)
+    80003828:	e04a                	sd	s2,0(sp)
+    8000382a:	1000                	addi	s0,sp,32
+    8000382c:	84aa                	mv	s1,a0
   int i;
 
+  acquire(&log.lock);
+    8000382e:	00016917          	auipc	s2,0x16
+    80003832:	9f290913          	addi	s2,s2,-1550 # 80019220 <log>
+    80003836:	854a                	mv	a0,s2
+    80003838:	00003097          	auipc	ra,0x3
+    8000383c:	9f0080e7          	jalr	-1552(ra) # 80006228 <acquire>
   if (log.lh.n >= LOGSIZE || log.lh.n >= log.size - 1)
-    800041a0:	0001d717          	auipc	a4,0x1d
-    800041a4:	79472703          	lw	a4,1940(a4) # 80021934 <log+0x2c>
-    800041a8:	47f5                	li	a5,29
-    800041aa:	08e7c063          	blt	a5,a4,8000422a <log_write+0x96>
-    800041ae:	84aa                	mv	s1,a0
-    800041b0:	0001d797          	auipc	a5,0x1d
-    800041b4:	7747a783          	lw	a5,1908(a5) # 80021924 <log+0x1c>
-    800041b8:	37fd                	addiw	a5,a5,-1
-    800041ba:	06f75863          	bge	a4,a5,8000422a <log_write+0x96>
+    80003840:	02c92603          	lw	a2,44(s2)
+    80003844:	47f5                	li	a5,29
+    80003846:	06c7c563          	blt	a5,a2,800038b0 <log_write+0x90>
+    8000384a:	00016797          	auipc	a5,0x16
+    8000384e:	9f27a783          	lw	a5,-1550(a5) # 8001923c <log+0x1c>
+    80003852:	37fd                	addiw	a5,a5,-1
+    80003854:	04f65e63          	bge	a2,a5,800038b0 <log_write+0x90>
     panic("too big a transaction");
   if (log.outstanding < 1)
-    800041be:	0001d797          	auipc	a5,0x1d
-    800041c2:	76a7a783          	lw	a5,1898(a5) # 80021928 <log+0x20>
-    800041c6:	06f05a63          	blez	a5,8000423a <log_write+0xa6>
+    80003858:	00016797          	auipc	a5,0x16
+    8000385c:	9e87a783          	lw	a5,-1560(a5) # 80019240 <log+0x20>
+    80003860:	06f05063          	blez	a5,800038c0 <log_write+0xa0>
     panic("log_write outside of trans");
 
-  acquire(&log.lock);
-    800041ca:	0001d917          	auipc	s2,0x1d
-    800041ce:	73e90913          	addi	s2,s2,1854 # 80021908 <log>
-    800041d2:	854a                	mv	a0,s2
-    800041d4:	ffffd097          	auipc	ra,0xffffd
-    800041d8:	a2c080e7          	jalr	-1492(ra) # 80000c00 <acquire>
   for (i = 0; i < log.lh.n; i++) {
-    800041dc:	02c92603          	lw	a2,44(s2)
-    800041e0:	06c05563          	blez	a2,8000424a <log_write+0xb6>
-    if (log.lh.block[i] == b->blockno)   // log absorbtion
-    800041e4:	44cc                	lw	a1,12(s1)
-    800041e6:	0001d717          	auipc	a4,0x1d
-    800041ea:	75270713          	addi	a4,a4,1874 # 80021938 <log+0x30>
+    80003864:	4781                	li	a5,0
+    80003866:	06c05563          	blez	a2,800038d0 <log_write+0xb0>
+    if (log.lh.block[i] == b->blockno)   // log absorption
+    8000386a:	44cc                	lw	a1,12(s1)
+    8000386c:	00016717          	auipc	a4,0x16
+    80003870:	9e470713          	addi	a4,a4,-1564 # 80019250 <log+0x30>
   for (i = 0; i < log.lh.n; i++) {
-    800041ee:	4781                	li	a5,0
-    if (log.lh.block[i] == b->blockno)   // log absorbtion
-    800041f0:	4314                	lw	a3,0(a4)
-    800041f2:	04b68d63          	beq	a3,a1,8000424c <log_write+0xb8>
+    80003874:	4781                	li	a5,0
+    if (log.lh.block[i] == b->blockno)   // log absorption
+    80003876:	4314                	lw	a3,0(a4)
+    80003878:	04b68c63          	beq	a3,a1,800038d0 <log_write+0xb0>
   for (i = 0; i < log.lh.n; i++) {
-    800041f6:	2785                	addiw	a5,a5,1
-    800041f8:	0711                	addi	a4,a4,4
-    800041fa:	fec79be3          	bne	a5,a2,800041f0 <log_write+0x5c>
+    8000387c:	2785                	addiw	a5,a5,1
+    8000387e:	0711                	addi	a4,a4,4
+    80003880:	fef61be3          	bne	a2,a5,80003876 <log_write+0x56>
       break;
   }
   log.lh.block[i] = b->blockno;
-    800041fe:	0621                	addi	a2,a2,8
-    80004200:	060a                	slli	a2,a2,0x2
-    80004202:	0001d797          	auipc	a5,0x1d
-    80004206:	70678793          	addi	a5,a5,1798 # 80021908 <log>
-    8000420a:	97b2                	add	a5,a5,a2
-    8000420c:	44d8                	lw	a4,12(s1)
-    8000420e:	cb98                	sw	a4,16(a5)
+    80003884:	0621                	addi	a2,a2,8
+    80003886:	060a                	slli	a2,a2,0x2
+    80003888:	00016797          	auipc	a5,0x16
+    8000388c:	99878793          	addi	a5,a5,-1640 # 80019220 <log>
+    80003890:	97b2                	add	a5,a5,a2
+    80003892:	44d8                	lw	a4,12(s1)
+    80003894:	cb98                	sw	a4,16(a5)
   if (i == log.lh.n) {  // Add new block to log?
     bpin(b);
-    80004210:	8526                	mv	a0,s1
-    80004212:	fffff097          	auipc	ra,0xfffff
-    80004216:	db4080e7          	jalr	-588(ra) # 80002fc6 <bpin>
+    80003896:	8526                	mv	a0,s1
+    80003898:	fffff097          	auipc	ra,0xfffff
+    8000389c:	da2080e7          	jalr	-606(ra) # 8000263a <bpin>
     log.lh.n++;
-    8000421a:	0001d717          	auipc	a4,0x1d
-    8000421e:	6ee70713          	addi	a4,a4,1774 # 80021908 <log>
-    80004222:	575c                	lw	a5,44(a4)
-    80004224:	2785                	addiw	a5,a5,1
-    80004226:	d75c                	sw	a5,44(a4)
-    80004228:	a835                	j	80004264 <log_write+0xd0>
+    800038a0:	00016717          	auipc	a4,0x16
+    800038a4:	98070713          	addi	a4,a4,-1664 # 80019220 <log>
+    800038a8:	575c                	lw	a5,44(a4)
+    800038aa:	2785                	addiw	a5,a5,1
+    800038ac:	d75c                	sw	a5,44(a4)
+    800038ae:	a82d                	j	800038e8 <log_write+0xc8>
     panic("too big a transaction");
-    8000422a:	00004517          	auipc	a0,0x4
-    8000422e:	3ee50513          	addi	a0,a0,1006 # 80008618 <syscalls+0x1f0>
-    80004232:	ffffc097          	auipc	ra,0xffffc
-    80004236:	314080e7          	jalr	788(ra) # 80000546 <panic>
+    800038b0:	00005517          	auipc	a0,0x5
+    800038b4:	ec850513          	addi	a0,a0,-312 # 80008778 <syscall_name+0x1f8>
+    800038b8:	00002097          	auipc	ra,0x2
+    800038bc:	438080e7          	jalr	1080(ra) # 80005cf0 <panic>
     panic("log_write outside of trans");
-    8000423a:	00004517          	auipc	a0,0x4
-    8000423e:	3f650513          	addi	a0,a0,1014 # 80008630 <syscalls+0x208>
-    80004242:	ffffc097          	auipc	ra,0xffffc
-    80004246:	304080e7          	jalr	772(ra) # 80000546 <panic>
-  for (i = 0; i < log.lh.n; i++) {
-    8000424a:	4781                	li	a5,0
+    800038c0:	00005517          	auipc	a0,0x5
+    800038c4:	ed050513          	addi	a0,a0,-304 # 80008790 <syscall_name+0x210>
+    800038c8:	00002097          	auipc	ra,0x2
+    800038cc:	428080e7          	jalr	1064(ra) # 80005cf0 <panic>
   log.lh.block[i] = b->blockno;
-    8000424c:	00878693          	addi	a3,a5,8
-    80004250:	068a                	slli	a3,a3,0x2
-    80004252:	0001d717          	auipc	a4,0x1d
-    80004256:	6b670713          	addi	a4,a4,1718 # 80021908 <log>
-    8000425a:	9736                	add	a4,a4,a3
-    8000425c:	44d4                	lw	a3,12(s1)
-    8000425e:	cb14                	sw	a3,16(a4)
+    800038d0:	00878693          	addi	a3,a5,8
+    800038d4:	068a                	slli	a3,a3,0x2
+    800038d6:	00016717          	auipc	a4,0x16
+    800038da:	94a70713          	addi	a4,a4,-1718 # 80019220 <log>
+    800038de:	9736                	add	a4,a4,a3
+    800038e0:	44d4                	lw	a3,12(s1)
+    800038e2:	cb14                	sw	a3,16(a4)
   if (i == log.lh.n) {  // Add new block to log?
-    80004260:	faf608e3          	beq	a2,a5,80004210 <log_write+0x7c>
+    800038e4:	faf609e3          	beq	a2,a5,80003896 <log_write+0x76>
   }
   release(&log.lock);
-    80004264:	0001d517          	auipc	a0,0x1d
-    80004268:	6a450513          	addi	a0,a0,1700 # 80021908 <log>
-    8000426c:	ffffd097          	auipc	ra,0xffffd
-    80004270:	a48080e7          	jalr	-1464(ra) # 80000cb4 <release>
-}
-    80004274:	60e2                	ld	ra,24(sp)
-    80004276:	6442                	ld	s0,16(sp)
-    80004278:	64a2                	ld	s1,8(sp)
-    8000427a:	6902                	ld	s2,0(sp)
-    8000427c:	6105                	addi	sp,sp,32
-    8000427e:	8082                	ret
+    800038e8:	00016517          	auipc	a0,0x16
+    800038ec:	93850513          	addi	a0,a0,-1736 # 80019220 <log>
+    800038f0:	00003097          	auipc	ra,0x3
+    800038f4:	9ec080e7          	jalr	-1556(ra) # 800062dc <release>
+}
+    800038f8:	60e2                	ld	ra,24(sp)
+    800038fa:	6442                	ld	s0,16(sp)
+    800038fc:	64a2                	ld	s1,8(sp)
+    800038fe:	6902                	ld	s2,0(sp)
+    80003900:	6105                	addi	sp,sp,32
+    80003902:	8082                	ret
 
-0000000080004280 <initsleeplock>:
+0000000080003904 <initsleeplock>:
 #include "proc.h"
 #include "sleeplock.h"
 
 void
 initsleeplock(struct sleeplock *lk, char *name)
 {
-    80004280:	1101                	addi	sp,sp,-32
-    80004282:	ec06                	sd	ra,24(sp)
-    80004284:	e822                	sd	s0,16(sp)
-    80004286:	e426                	sd	s1,8(sp)
-    80004288:	e04a                	sd	s2,0(sp)
-    8000428a:	1000                	addi	s0,sp,32
-    8000428c:	84aa                	mv	s1,a0
-    8000428e:	892e                	mv	s2,a1
+    80003904:	1101                	addi	sp,sp,-32
+    80003906:	ec06                	sd	ra,24(sp)
+    80003908:	e822                	sd	s0,16(sp)
+    8000390a:	e426                	sd	s1,8(sp)
+    8000390c:	e04a                	sd	s2,0(sp)
+    8000390e:	1000                	addi	s0,sp,32
+    80003910:	84aa                	mv	s1,a0
+    80003912:	892e                	mv	s2,a1
   initlock(&lk->lk, "sleep lock");
-    80004290:	00004597          	auipc	a1,0x4
-    80004294:	3c058593          	addi	a1,a1,960 # 80008650 <syscalls+0x228>
-    80004298:	0521                	addi	a0,a0,8
-    8000429a:	ffffd097          	auipc	ra,0xffffd
-    8000429e:	8d6080e7          	jalr	-1834(ra) # 80000b70 <initlock>
+    80003914:	00005597          	auipc	a1,0x5
+    80003918:	e9c58593          	addi	a1,a1,-356 # 800087b0 <syscall_name+0x230>
+    8000391c:	0521                	addi	a0,a0,8
+    8000391e:	00003097          	auipc	ra,0x3
+    80003922:	87a080e7          	jalr	-1926(ra) # 80006198 <initlock>
   lk->name = name;
-    800042a2:	0324b023          	sd	s2,32(s1)
+    80003926:	0324b023          	sd	s2,32(s1)
   lk->locked = 0;
-    800042a6:	0004a023          	sw	zero,0(s1)
+    8000392a:	0004a023          	sw	zero,0(s1)
   lk->pid = 0;
-    800042aa:	0204a423          	sw	zero,40(s1)
+    8000392e:	0204a423          	sw	zero,40(s1)
 }
-    800042ae:	60e2                	ld	ra,24(sp)
-    800042b0:	6442                	ld	s0,16(sp)
-    800042b2:	64a2                	ld	s1,8(sp)
-    800042b4:	6902                	ld	s2,0(sp)
-    800042b6:	6105                	addi	sp,sp,32
-    800042b8:	8082                	ret
+    80003932:	60e2                	ld	ra,24(sp)
+    80003934:	6442                	ld	s0,16(sp)
+    80003936:	64a2                	ld	s1,8(sp)
+    80003938:	6902                	ld	s2,0(sp)
+    8000393a:	6105                	addi	sp,sp,32
+    8000393c:	8082                	ret
 
-00000000800042ba <acquiresleep>:
+000000008000393e <acquiresleep>:
 
 void
 acquiresleep(struct sleeplock *lk)
 {
-    800042ba:	1101                	addi	sp,sp,-32
-    800042bc:	ec06                	sd	ra,24(sp)
-    800042be:	e822                	sd	s0,16(sp)
-    800042c0:	e426                	sd	s1,8(sp)
-    800042c2:	e04a                	sd	s2,0(sp)
-    800042c4:	1000                	addi	s0,sp,32
-    800042c6:	84aa                	mv	s1,a0
+    8000393e:	1101                	addi	sp,sp,-32
+    80003940:	ec06                	sd	ra,24(sp)
+    80003942:	e822                	sd	s0,16(sp)
+    80003944:	e426                	sd	s1,8(sp)
+    80003946:	e04a                	sd	s2,0(sp)
+    80003948:	1000                	addi	s0,sp,32
+    8000394a:	84aa                	mv	s1,a0
   acquire(&lk->lk);
-    800042c8:	00850913          	addi	s2,a0,8
-    800042cc:	854a                	mv	a0,s2
-    800042ce:	ffffd097          	auipc	ra,0xffffd
-    800042d2:	932080e7          	jalr	-1742(ra) # 80000c00 <acquire>
+    8000394c:	00850913          	addi	s2,a0,8
+    80003950:	854a                	mv	a0,s2
+    80003952:	00003097          	auipc	ra,0x3
+    80003956:	8d6080e7          	jalr	-1834(ra) # 80006228 <acquire>
   while (lk->locked) {
-    800042d6:	409c                	lw	a5,0(s1)
-    800042d8:	cb89                	beqz	a5,800042ea <acquiresleep+0x30>
+    8000395a:	409c                	lw	a5,0(s1)
+    8000395c:	cb89                	beqz	a5,8000396e <acquiresleep+0x30>
     sleep(lk, &lk->lk);
-    800042da:	85ca                	mv	a1,s2
-    800042dc:	8526                	mv	a0,s1
-    800042de:	ffffe097          	auipc	ra,0xffffe
-    800042e2:	f02080e7          	jalr	-254(ra) # 800021e0 <sleep>
+    8000395e:	85ca                	mv	a1,s2
+    80003960:	8526                	mv	a0,s1
+    80003962:	ffffe097          	auipc	ra,0xffffe
+    80003966:	ca8080e7          	jalr	-856(ra) # 8000160a <sleep>
   while (lk->locked) {
-    800042e6:	409c                	lw	a5,0(s1)
-    800042e8:	fbed                	bnez	a5,800042da <acquiresleep+0x20>
+    8000396a:	409c                	lw	a5,0(s1)
+    8000396c:	fbed                	bnez	a5,8000395e <acquiresleep+0x20>
   }
   lk->locked = 1;
-    800042ea:	4785                	li	a5,1
-    800042ec:	c09c                	sw	a5,0(s1)
+    8000396e:	4785                	li	a5,1
+    80003970:	c09c                	sw	a5,0(s1)
   lk->pid = myproc()->pid;
-    800042ee:	ffffd097          	auipc	ra,0xffffd
-    800042f2:	6de080e7          	jalr	1758(ra) # 800019cc <myproc>
-    800042f6:	5d1c                	lw	a5,56(a0)
-    800042f8:	d49c                	sw	a5,40(s1)
+    80003972:	ffffd097          	auipc	ra,0xffffd
+    80003976:	5cc080e7          	jalr	1484(ra) # 80000f3e <myproc>
+    8000397a:	591c                	lw	a5,48(a0)
+    8000397c:	d49c                	sw	a5,40(s1)
   release(&lk->lk);
-    800042fa:	854a                	mv	a0,s2
-    800042fc:	ffffd097          	auipc	ra,0xffffd
-    80004300:	9b8080e7          	jalr	-1608(ra) # 80000cb4 <release>
-}
-    80004304:	60e2                	ld	ra,24(sp)
-    80004306:	6442                	ld	s0,16(sp)
-    80004308:	64a2                	ld	s1,8(sp)
-    8000430a:	6902                	ld	s2,0(sp)
-    8000430c:	6105                	addi	sp,sp,32
-    8000430e:	8082                	ret
+    8000397e:	854a                	mv	a0,s2
+    80003980:	00003097          	auipc	ra,0x3
+    80003984:	95c080e7          	jalr	-1700(ra) # 800062dc <release>
+}
+    80003988:	60e2                	ld	ra,24(sp)
+    8000398a:	6442                	ld	s0,16(sp)
+    8000398c:	64a2                	ld	s1,8(sp)
+    8000398e:	6902                	ld	s2,0(sp)
+    80003990:	6105                	addi	sp,sp,32
+    80003992:	8082                	ret
 
-0000000080004310 <releasesleep>:
+0000000080003994 <releasesleep>:
 
 void
 releasesleep(struct sleeplock *lk)
 {
-    80004310:	1101                	addi	sp,sp,-32
-    80004312:	ec06                	sd	ra,24(sp)
-    80004314:	e822                	sd	s0,16(sp)
-    80004316:	e426                	sd	s1,8(sp)
-    80004318:	e04a                	sd	s2,0(sp)
-    8000431a:	1000                	addi	s0,sp,32
-    8000431c:	84aa                	mv	s1,a0
+    80003994:	1101                	addi	sp,sp,-32
+    80003996:	ec06                	sd	ra,24(sp)
+    80003998:	e822                	sd	s0,16(sp)
+    8000399a:	e426                	sd	s1,8(sp)
+    8000399c:	e04a                	sd	s2,0(sp)
+    8000399e:	1000                	addi	s0,sp,32
+    800039a0:	84aa                	mv	s1,a0
   acquire(&lk->lk);
-    8000431e:	00850913          	addi	s2,a0,8
-    80004322:	854a                	mv	a0,s2
-    80004324:	ffffd097          	auipc	ra,0xffffd
-    80004328:	8dc080e7          	jalr	-1828(ra) # 80000c00 <acquire>
+    800039a2:	00850913          	addi	s2,a0,8
+    800039a6:	854a                	mv	a0,s2
+    800039a8:	00003097          	auipc	ra,0x3
+    800039ac:	880080e7          	jalr	-1920(ra) # 80006228 <acquire>
   lk->locked = 0;
-    8000432c:	0004a023          	sw	zero,0(s1)
+    800039b0:	0004a023          	sw	zero,0(s1)
   lk->pid = 0;
-    80004330:	0204a423          	sw	zero,40(s1)
+    800039b4:	0204a423          	sw	zero,40(s1)
   wakeup(lk);
-    80004334:	8526                	mv	a0,s1
-    80004336:	ffffe097          	auipc	ra,0xffffe
-    8000433a:	02a080e7          	jalr	42(ra) # 80002360 <wakeup>
+    800039b8:	8526                	mv	a0,s1
+    800039ba:	ffffe097          	auipc	ra,0xffffe
+    800039be:	ddc080e7          	jalr	-548(ra) # 80001796 <wakeup>
   release(&lk->lk);
-    8000433e:	854a                	mv	a0,s2
-    80004340:	ffffd097          	auipc	ra,0xffffd
-    80004344:	974080e7          	jalr	-1676(ra) # 80000cb4 <release>
-}
-    80004348:	60e2                	ld	ra,24(sp)
-    8000434a:	6442                	ld	s0,16(sp)
-    8000434c:	64a2                	ld	s1,8(sp)
-    8000434e:	6902                	ld	s2,0(sp)
-    80004350:	6105                	addi	sp,sp,32
-    80004352:	8082                	ret
+    800039c2:	854a                	mv	a0,s2
+    800039c4:	00003097          	auipc	ra,0x3
+    800039c8:	918080e7          	jalr	-1768(ra) # 800062dc <release>
+}
+    800039cc:	60e2                	ld	ra,24(sp)
+    800039ce:	6442                	ld	s0,16(sp)
+    800039d0:	64a2                	ld	s1,8(sp)
+    800039d2:	6902                	ld	s2,0(sp)
+    800039d4:	6105                	addi	sp,sp,32
+    800039d6:	8082                	ret
 
-0000000080004354 <holdingsleep>:
+00000000800039d8 <holdingsleep>:
 
 int
 holdingsleep(struct sleeplock *lk)
 {
-    80004354:	7179                	addi	sp,sp,-48
-    80004356:	f406                	sd	ra,40(sp)
-    80004358:	f022                	sd	s0,32(sp)
-    8000435a:	ec26                	sd	s1,24(sp)
-    8000435c:	e84a                	sd	s2,16(sp)
-    8000435e:	e44e                	sd	s3,8(sp)
-    80004360:	1800                	addi	s0,sp,48
-    80004362:	84aa                	mv	s1,a0
+    800039d8:	7179                	addi	sp,sp,-48
+    800039da:	f406                	sd	ra,40(sp)
+    800039dc:	f022                	sd	s0,32(sp)
+    800039de:	ec26                	sd	s1,24(sp)
+    800039e0:	e84a                	sd	s2,16(sp)
+    800039e2:	e44e                	sd	s3,8(sp)
+    800039e4:	1800                	addi	s0,sp,48
+    800039e6:	84aa                	mv	s1,a0
   int r;
   
   acquire(&lk->lk);
-    80004364:	00850913          	addi	s2,a0,8
-    80004368:	854a                	mv	a0,s2
-    8000436a:	ffffd097          	auipc	ra,0xffffd
-    8000436e:	896080e7          	jalr	-1898(ra) # 80000c00 <acquire>
+    800039e8:	00850913          	addi	s2,a0,8
+    800039ec:	854a                	mv	a0,s2
+    800039ee:	00003097          	auipc	ra,0x3
+    800039f2:	83a080e7          	jalr	-1990(ra) # 80006228 <acquire>
   r = lk->locked && (lk->pid == myproc()->pid);
-    80004372:	409c                	lw	a5,0(s1)
-    80004374:	ef99                	bnez	a5,80004392 <holdingsleep+0x3e>
-    80004376:	4481                	li	s1,0
+    800039f6:	409c                	lw	a5,0(s1)
+    800039f8:	ef99                	bnez	a5,80003a16 <holdingsleep+0x3e>
+    800039fa:	4481                	li	s1,0
   release(&lk->lk);
-    80004378:	854a                	mv	a0,s2
-    8000437a:	ffffd097          	auipc	ra,0xffffd
-    8000437e:	93a080e7          	jalr	-1734(ra) # 80000cb4 <release>
+    800039fc:	854a                	mv	a0,s2
+    800039fe:	00003097          	auipc	ra,0x3
+    80003a02:	8de080e7          	jalr	-1826(ra) # 800062dc <release>
   return r;
 }
-    80004382:	8526                	mv	a0,s1
-    80004384:	70a2                	ld	ra,40(sp)
-    80004386:	7402                	ld	s0,32(sp)
-    80004388:	64e2                	ld	s1,24(sp)
-    8000438a:	6942                	ld	s2,16(sp)
-    8000438c:	69a2                	ld	s3,8(sp)
-    8000438e:	6145                	addi	sp,sp,48
-    80004390:	8082                	ret
+    80003a06:	8526                	mv	a0,s1
+    80003a08:	70a2                	ld	ra,40(sp)
+    80003a0a:	7402                	ld	s0,32(sp)
+    80003a0c:	64e2                	ld	s1,24(sp)
+    80003a0e:	6942                	ld	s2,16(sp)
+    80003a10:	69a2                	ld	s3,8(sp)
+    80003a12:	6145                	addi	sp,sp,48
+    80003a14:	8082                	ret
   r = lk->locked && (lk->pid == myproc()->pid);
-    80004392:	0284a983          	lw	s3,40(s1)
-    80004396:	ffffd097          	auipc	ra,0xffffd
-    8000439a:	636080e7          	jalr	1590(ra) # 800019cc <myproc>
-    8000439e:	5d04                	lw	s1,56(a0)
-    800043a0:	413484b3          	sub	s1,s1,s3
-    800043a4:	0014b493          	seqz	s1,s1
-    800043a8:	bfc1                	j	80004378 <holdingsleep+0x24>
+    80003a16:	0284a983          	lw	s3,40(s1)
+    80003a1a:	ffffd097          	auipc	ra,0xffffd
+    80003a1e:	524080e7          	jalr	1316(ra) # 80000f3e <myproc>
+    80003a22:	5904                	lw	s1,48(a0)
+    80003a24:	413484b3          	sub	s1,s1,s3
+    80003a28:	0014b493          	seqz	s1,s1
+    80003a2c:	bfc1                	j	800039fc <holdingsleep+0x24>
 
-00000000800043aa <fileinit>:
+0000000080003a2e <fileinit>:
   struct file file[NFILE];
 } ftable;
 
 void
 fileinit(void)
 {
-    800043aa:	1141                	addi	sp,sp,-16
-    800043ac:	e406                	sd	ra,8(sp)
-    800043ae:	e022                	sd	s0,0(sp)
-    800043b0:	0800                	addi	s0,sp,16
+    80003a2e:	1141                	addi	sp,sp,-16
+    80003a30:	e406                	sd	ra,8(sp)
+    80003a32:	e022                	sd	s0,0(sp)
+    80003a34:	0800                	addi	s0,sp,16
   initlock(&ftable.lock, "ftable");
-    800043b2:	00004597          	auipc	a1,0x4
-    800043b6:	2ae58593          	addi	a1,a1,686 # 80008660 <syscalls+0x238>
-    800043ba:	0001d517          	auipc	a0,0x1d
-    800043be:	69650513          	addi	a0,a0,1686 # 80021a50 <ftable>
-    800043c2:	ffffc097          	auipc	ra,0xffffc
-    800043c6:	7ae080e7          	jalr	1966(ra) # 80000b70 <initlock>
-}
-    800043ca:	60a2                	ld	ra,8(sp)
-    800043cc:	6402                	ld	s0,0(sp)
-    800043ce:	0141                	addi	sp,sp,16
-    800043d0:	8082                	ret
+    80003a36:	00005597          	auipc	a1,0x5
+    80003a3a:	d8a58593          	addi	a1,a1,-630 # 800087c0 <syscall_name+0x240>
+    80003a3e:	00016517          	auipc	a0,0x16
+    80003a42:	92a50513          	addi	a0,a0,-1750 # 80019368 <ftable>
+    80003a46:	00002097          	auipc	ra,0x2
+    80003a4a:	752080e7          	jalr	1874(ra) # 80006198 <initlock>
+}
+    80003a4e:	60a2                	ld	ra,8(sp)
+    80003a50:	6402                	ld	s0,0(sp)
+    80003a52:	0141                	addi	sp,sp,16
+    80003a54:	8082                	ret
 
-00000000800043d2 <filealloc>:
+0000000080003a56 <filealloc>:
 
 // Allocate a file structure.
 struct file*
 filealloc(void)
 {
-    800043d2:	1101                	addi	sp,sp,-32
-    800043d4:	ec06                	sd	ra,24(sp)
-    800043d6:	e822                	sd	s0,16(sp)
-    800043d8:	e426                	sd	s1,8(sp)
-    800043da:	1000                	addi	s0,sp,32
+    80003a56:	1101                	addi	sp,sp,-32
+    80003a58:	ec06                	sd	ra,24(sp)
+    80003a5a:	e822                	sd	s0,16(sp)
+    80003a5c:	e426                	sd	s1,8(sp)
+    80003a5e:	1000                	addi	s0,sp,32
   struct file *f;
 
   acquire(&ftable.lock);
-    800043dc:	0001d517          	auipc	a0,0x1d
-    800043e0:	67450513          	addi	a0,a0,1652 # 80021a50 <ftable>
-    800043e4:	ffffd097          	auipc	ra,0xffffd
-    800043e8:	81c080e7          	jalr	-2020(ra) # 80000c00 <acquire>
+    80003a60:	00016517          	auipc	a0,0x16
+    80003a64:	90850513          	addi	a0,a0,-1784 # 80019368 <ftable>
+    80003a68:	00002097          	auipc	ra,0x2
+    80003a6c:	7c0080e7          	jalr	1984(ra) # 80006228 <acquire>
   for(f = ftable.file; f < ftable.file + NFILE; f++){
-    800043ec:	0001d497          	auipc	s1,0x1d
-    800043f0:	67c48493          	addi	s1,s1,1660 # 80021a68 <ftable+0x18>
-    800043f4:	0001e717          	auipc	a4,0x1e
-    800043f8:	61470713          	addi	a4,a4,1556 # 80022a08 <ftable+0xfb8>
+    80003a70:	00016497          	auipc	s1,0x16
+    80003a74:	91048493          	addi	s1,s1,-1776 # 80019380 <ftable+0x18>
+    80003a78:	00017717          	auipc	a4,0x17
+    80003a7c:	8a870713          	addi	a4,a4,-1880 # 8001a320 <ftable+0xfb8>
     if(f->ref == 0){
-    800043fc:	40dc                	lw	a5,4(s1)
-    800043fe:	cf99                	beqz	a5,8000441c <filealloc+0x4a>
+    80003a80:	40dc                	lw	a5,4(s1)
+    80003a82:	cf99                	beqz	a5,80003aa0 <filealloc+0x4a>
   for(f = ftable.file; f < ftable.file + NFILE; f++){
-    80004400:	02848493          	addi	s1,s1,40
-    80004404:	fee49ce3          	bne	s1,a4,800043fc <filealloc+0x2a>
+    80003a84:	02848493          	addi	s1,s1,40
+    80003a88:	fee49ce3          	bne	s1,a4,80003a80 <filealloc+0x2a>
       f->ref = 1;
       release(&ftable.lock);
       return f;
     }
   }
   release(&ftable.lock);
-    80004408:	0001d517          	auipc	a0,0x1d
-    8000440c:	64850513          	addi	a0,a0,1608 # 80021a50 <ftable>
-    80004410:	ffffd097          	auipc	ra,0xffffd
-    80004414:	8a4080e7          	jalr	-1884(ra) # 80000cb4 <release>
+    80003a8c:	00016517          	auipc	a0,0x16
+    80003a90:	8dc50513          	addi	a0,a0,-1828 # 80019368 <ftable>
+    80003a94:	00003097          	auipc	ra,0x3
+    80003a98:	848080e7          	jalr	-1976(ra) # 800062dc <release>
   return 0;
-    80004418:	4481                	li	s1,0
-    8000441a:	a819                	j	80004430 <filealloc+0x5e>
+    80003a9c:	4481                	li	s1,0
+    80003a9e:	a819                	j	80003ab4 <filealloc+0x5e>
       f->ref = 1;
-    8000441c:	4785                	li	a5,1
-    8000441e:	c0dc                	sw	a5,4(s1)
+    80003aa0:	4785                	li	a5,1
+    80003aa2:	c0dc                	sw	a5,4(s1)
       release(&ftable.lock);
-    80004420:	0001d517          	auipc	a0,0x1d
-    80004424:	63050513          	addi	a0,a0,1584 # 80021a50 <ftable>
-    80004428:	ffffd097          	auipc	ra,0xffffd
-    8000442c:	88c080e7          	jalr	-1908(ra) # 80000cb4 <release>
-}
-    80004430:	8526                	mv	a0,s1
-    80004432:	60e2                	ld	ra,24(sp)
-    80004434:	6442                	ld	s0,16(sp)
-    80004436:	64a2                	ld	s1,8(sp)
-    80004438:	6105                	addi	sp,sp,32
-    8000443a:	8082                	ret
+    80003aa4:	00016517          	auipc	a0,0x16
+    80003aa8:	8c450513          	addi	a0,a0,-1852 # 80019368 <ftable>
+    80003aac:	00003097          	auipc	ra,0x3
+    80003ab0:	830080e7          	jalr	-2000(ra) # 800062dc <release>
+}
+    80003ab4:	8526                	mv	a0,s1
+    80003ab6:	60e2                	ld	ra,24(sp)
+    80003ab8:	6442                	ld	s0,16(sp)
+    80003aba:	64a2                	ld	s1,8(sp)
+    80003abc:	6105                	addi	sp,sp,32
+    80003abe:	8082                	ret
 
-000000008000443c <filedup>:
+0000000080003ac0 <filedup>:
 
 // Increment ref count for file f.
 struct file*
 filedup(struct file *f)
 {
-    8000443c:	1101                	addi	sp,sp,-32
-    8000443e:	ec06                	sd	ra,24(sp)
-    80004440:	e822                	sd	s0,16(sp)
-    80004442:	e426                	sd	s1,8(sp)
-    80004444:	1000                	addi	s0,sp,32
-    80004446:	84aa                	mv	s1,a0
+    80003ac0:	1101                	addi	sp,sp,-32
+    80003ac2:	ec06                	sd	ra,24(sp)
+    80003ac4:	e822                	sd	s0,16(sp)
+    80003ac6:	e426                	sd	s1,8(sp)
+    80003ac8:	1000                	addi	s0,sp,32
+    80003aca:	84aa                	mv	s1,a0
   acquire(&ftable.lock);
-    80004448:	0001d517          	auipc	a0,0x1d
-    8000444c:	60850513          	addi	a0,a0,1544 # 80021a50 <ftable>
-    80004450:	ffffc097          	auipc	ra,0xffffc
-    80004454:	7b0080e7          	jalr	1968(ra) # 80000c00 <acquire>
+    80003acc:	00016517          	auipc	a0,0x16
+    80003ad0:	89c50513          	addi	a0,a0,-1892 # 80019368 <ftable>
+    80003ad4:	00002097          	auipc	ra,0x2
+    80003ad8:	754080e7          	jalr	1876(ra) # 80006228 <acquire>
   if(f->ref < 1)
-    80004458:	40dc                	lw	a5,4(s1)
-    8000445a:	02f05263          	blez	a5,8000447e <filedup+0x42>
+    80003adc:	40dc                	lw	a5,4(s1)
+    80003ade:	02f05263          	blez	a5,80003b02 <filedup+0x42>
     panic("filedup");
   f->ref++;
-    8000445e:	2785                	addiw	a5,a5,1
-    80004460:	c0dc                	sw	a5,4(s1)
+    80003ae2:	2785                	addiw	a5,a5,1
+    80003ae4:	c0dc                	sw	a5,4(s1)
   release(&ftable.lock);
-    80004462:	0001d517          	auipc	a0,0x1d
-    80004466:	5ee50513          	addi	a0,a0,1518 # 80021a50 <ftable>
-    8000446a:	ffffd097          	auipc	ra,0xffffd
-    8000446e:	84a080e7          	jalr	-1974(ra) # 80000cb4 <release>
+    80003ae6:	00016517          	auipc	a0,0x16
+    80003aea:	88250513          	addi	a0,a0,-1918 # 80019368 <ftable>
+    80003aee:	00002097          	auipc	ra,0x2
+    80003af2:	7ee080e7          	jalr	2030(ra) # 800062dc <release>
   return f;
 }
-    80004472:	8526                	mv	a0,s1
-    80004474:	60e2                	ld	ra,24(sp)
-    80004476:	6442                	ld	s0,16(sp)
-    80004478:	64a2                	ld	s1,8(sp)
-    8000447a:	6105                	addi	sp,sp,32
-    8000447c:	8082                	ret
+    80003af6:	8526                	mv	a0,s1
+    80003af8:	60e2                	ld	ra,24(sp)
+    80003afa:	6442                	ld	s0,16(sp)
+    80003afc:	64a2                	ld	s1,8(sp)
+    80003afe:	6105                	addi	sp,sp,32
+    80003b00:	8082                	ret
     panic("filedup");
-    8000447e:	00004517          	auipc	a0,0x4
-    80004482:	1ea50513          	addi	a0,a0,490 # 80008668 <syscalls+0x240>
-    80004486:	ffffc097          	auipc	ra,0xffffc
-    8000448a:	0c0080e7          	jalr	192(ra) # 80000546 <panic>
+    80003b02:	00005517          	auipc	a0,0x5
+    80003b06:	cc650513          	addi	a0,a0,-826 # 800087c8 <syscall_name+0x248>
+    80003b0a:	00002097          	auipc	ra,0x2
+    80003b0e:	1e6080e7          	jalr	486(ra) # 80005cf0 <panic>
 
-000000008000448e <fileclose>:
+0000000080003b12 <fileclose>:
 
 // Close file f.  (Decrement ref count, close when reaches 0.)
 void
 fileclose(struct file *f)
 {
-    8000448e:	7139                	addi	sp,sp,-64
-    80004490:	fc06                	sd	ra,56(sp)
-    80004492:	f822                	sd	s0,48(sp)
-    80004494:	f426                	sd	s1,40(sp)
-    80004496:	f04a                	sd	s2,32(sp)
-    80004498:	ec4e                	sd	s3,24(sp)
-    8000449a:	e852                	sd	s4,16(sp)
-    8000449c:	e456                	sd	s5,8(sp)
-    8000449e:	0080                	addi	s0,sp,64
-    800044a0:	84aa                	mv	s1,a0
+    80003b12:	7139                	addi	sp,sp,-64
+    80003b14:	fc06                	sd	ra,56(sp)
+    80003b16:	f822                	sd	s0,48(sp)
+    80003b18:	f426                	sd	s1,40(sp)
+    80003b1a:	f04a                	sd	s2,32(sp)
+    80003b1c:	ec4e                	sd	s3,24(sp)
+    80003b1e:	e852                	sd	s4,16(sp)
+    80003b20:	e456                	sd	s5,8(sp)
+    80003b22:	0080                	addi	s0,sp,64
+    80003b24:	84aa                	mv	s1,a0
   struct file ff;
 
   acquire(&ftable.lock);
-    800044a2:	0001d517          	auipc	a0,0x1d
-    800044a6:	5ae50513          	addi	a0,a0,1454 # 80021a50 <ftable>
-    800044aa:	ffffc097          	auipc	ra,0xffffc
-    800044ae:	756080e7          	jalr	1878(ra) # 80000c00 <acquire>
+    80003b26:	00016517          	auipc	a0,0x16
+    80003b2a:	84250513          	addi	a0,a0,-1982 # 80019368 <ftable>
+    80003b2e:	00002097          	auipc	ra,0x2
+    80003b32:	6fa080e7          	jalr	1786(ra) # 80006228 <acquire>
   if(f->ref < 1)
-    800044b2:	40dc                	lw	a5,4(s1)
-    800044b4:	06f05163          	blez	a5,80004516 <fileclose+0x88>
+    80003b36:	40dc                	lw	a5,4(s1)
+    80003b38:	06f05163          	blez	a5,80003b9a <fileclose+0x88>
     panic("fileclose");
   if(--f->ref > 0){
-    800044b8:	37fd                	addiw	a5,a5,-1
-    800044ba:	0007871b          	sext.w	a4,a5
-    800044be:	c0dc                	sw	a5,4(s1)
-    800044c0:	06e04363          	bgtz	a4,80004526 <fileclose+0x98>
+    80003b3c:	37fd                	addiw	a5,a5,-1
+    80003b3e:	0007871b          	sext.w	a4,a5
+    80003b42:	c0dc                	sw	a5,4(s1)
+    80003b44:	06e04363          	bgtz	a4,80003baa <fileclose+0x98>
     release(&ftable.lock);
     return;
   }
   ff = *f;
-    800044c4:	0004a903          	lw	s2,0(s1)
-    800044c8:	0094ca83          	lbu	s5,9(s1)
-    800044cc:	0104ba03          	ld	s4,16(s1)
-    800044d0:	0184b983          	ld	s3,24(s1)
+    80003b48:	0004a903          	lw	s2,0(s1)
+    80003b4c:	0094ca83          	lbu	s5,9(s1)
+    80003b50:	0104ba03          	ld	s4,16(s1)
+    80003b54:	0184b983          	ld	s3,24(s1)
   f->ref = 0;
-    800044d4:	0004a223          	sw	zero,4(s1)
+    80003b58:	0004a223          	sw	zero,4(s1)
   f->type = FD_NONE;
-    800044d8:	0004a023          	sw	zero,0(s1)
+    80003b5c:	0004a023          	sw	zero,0(s1)
   release(&ftable.lock);
-    800044dc:	0001d517          	auipc	a0,0x1d
-    800044e0:	57450513          	addi	a0,a0,1396 # 80021a50 <ftable>
-    800044e4:	ffffc097          	auipc	ra,0xffffc
-    800044e8:	7d0080e7          	jalr	2000(ra) # 80000cb4 <release>
+    80003b60:	00016517          	auipc	a0,0x16
+    80003b64:	80850513          	addi	a0,a0,-2040 # 80019368 <ftable>
+    80003b68:	00002097          	auipc	ra,0x2
+    80003b6c:	774080e7          	jalr	1908(ra) # 800062dc <release>
 
   if(ff.type == FD_PIPE){
-    800044ec:	4785                	li	a5,1
-    800044ee:	04f90d63          	beq	s2,a5,80004548 <fileclose+0xba>
+    80003b70:	4785                	li	a5,1
+    80003b72:	04f90d63          	beq	s2,a5,80003bcc <fileclose+0xba>
     pipeclose(ff.pipe, ff.writable);
   } else if(ff.type == FD_INODE || ff.type == FD_DEVICE){
-    800044f2:	3979                	addiw	s2,s2,-2
-    800044f4:	4785                	li	a5,1
-    800044f6:	0527e063          	bltu	a5,s2,80004536 <fileclose+0xa8>
+    80003b76:	3979                	addiw	s2,s2,-2
+    80003b78:	4785                	li	a5,1
+    80003b7a:	0527e063          	bltu	a5,s2,80003bba <fileclose+0xa8>
     begin_op();
-    800044fa:	00000097          	auipc	ra,0x0
-    800044fe:	ac6080e7          	jalr	-1338(ra) # 80003fc0 <begin_op>
+    80003b7e:	00000097          	auipc	ra,0x0
+    80003b82:	acc080e7          	jalr	-1332(ra) # 8000364a <begin_op>
     iput(ff.ip);
-    80004502:	854e                	mv	a0,s3
-    80004504:	fffff097          	auipc	ra,0xfffff
-    80004508:	2b0080e7          	jalr	688(ra) # 800037b4 <iput>
+    80003b86:	854e                	mv	a0,s3
+    80003b88:	fffff097          	auipc	ra,0xfffff
+    80003b8c:	2a0080e7          	jalr	672(ra) # 80002e28 <iput>
     end_op();
-    8000450c:	00000097          	auipc	ra,0x0
-    80004510:	b32080e7          	jalr	-1230(ra) # 8000403e <end_op>
-    80004514:	a00d                	j	80004536 <fileclose+0xa8>
+    80003b90:	00000097          	auipc	ra,0x0
+    80003b94:	b38080e7          	jalr	-1224(ra) # 800036c8 <end_op>
+    80003b98:	a00d                	j	80003bba <fileclose+0xa8>
     panic("fileclose");
-    80004516:	00004517          	auipc	a0,0x4
-    8000451a:	15a50513          	addi	a0,a0,346 # 80008670 <syscalls+0x248>
-    8000451e:	ffffc097          	auipc	ra,0xffffc
-    80004522:	028080e7          	jalr	40(ra) # 80000546 <panic>
+    80003b9a:	00005517          	auipc	a0,0x5
+    80003b9e:	c3650513          	addi	a0,a0,-970 # 800087d0 <syscall_name+0x250>
+    80003ba2:	00002097          	auipc	ra,0x2
+    80003ba6:	14e080e7          	jalr	334(ra) # 80005cf0 <panic>
     release(&ftable.lock);
-    80004526:	0001d517          	auipc	a0,0x1d
-    8000452a:	52a50513          	addi	a0,a0,1322 # 80021a50 <ftable>
-    8000452e:	ffffc097          	auipc	ra,0xffffc
-    80004532:	786080e7          	jalr	1926(ra) # 80000cb4 <release>
+    80003baa:	00015517          	auipc	a0,0x15
+    80003bae:	7be50513          	addi	a0,a0,1982 # 80019368 <ftable>
+    80003bb2:	00002097          	auipc	ra,0x2
+    80003bb6:	72a080e7          	jalr	1834(ra) # 800062dc <release>
   }
 }
-    80004536:	70e2                	ld	ra,56(sp)
-    80004538:	7442                	ld	s0,48(sp)
-    8000453a:	74a2                	ld	s1,40(sp)
-    8000453c:	7902                	ld	s2,32(sp)
-    8000453e:	69e2                	ld	s3,24(sp)
-    80004540:	6a42                	ld	s4,16(sp)
-    80004542:	6aa2                	ld	s5,8(sp)
-    80004544:	6121                	addi	sp,sp,64
-    80004546:	8082                	ret
+    80003bba:	70e2                	ld	ra,56(sp)
+    80003bbc:	7442                	ld	s0,48(sp)
+    80003bbe:	74a2                	ld	s1,40(sp)
+    80003bc0:	7902                	ld	s2,32(sp)
+    80003bc2:	69e2                	ld	s3,24(sp)
+    80003bc4:	6a42                	ld	s4,16(sp)
+    80003bc6:	6aa2                	ld	s5,8(sp)
+    80003bc8:	6121                	addi	sp,sp,64
+    80003bca:	8082                	ret
     pipeclose(ff.pipe, ff.writable);
-    80004548:	85d6                	mv	a1,s5
-    8000454a:	8552                	mv	a0,s4
-    8000454c:	00000097          	auipc	ra,0x0
-    80004550:	372080e7          	jalr	882(ra) # 800048be <pipeclose>
-    80004554:	b7cd                	j	80004536 <fileclose+0xa8>
+    80003bcc:	85d6                	mv	a1,s5
+    80003bce:	8552                	mv	a0,s4
+    80003bd0:	00000097          	auipc	ra,0x0
+    80003bd4:	34c080e7          	jalr	844(ra) # 80003f1c <pipeclose>
+    80003bd8:	b7cd                	j	80003bba <fileclose+0xa8>
 
-0000000080004556 <filestat>:
+0000000080003bda <filestat>:
 
 // Get metadata about file f.
 // addr is a user virtual address, pointing to a struct stat.
 int
 filestat(struct file *f, uint64 addr)
 {
-    80004556:	715d                	addi	sp,sp,-80
-    80004558:	e486                	sd	ra,72(sp)
-    8000455a:	e0a2                	sd	s0,64(sp)
-    8000455c:	fc26                	sd	s1,56(sp)
-    8000455e:	f84a                	sd	s2,48(sp)
-    80004560:	f44e                	sd	s3,40(sp)
-    80004562:	0880                	addi	s0,sp,80
-    80004564:	84aa                	mv	s1,a0
-    80004566:	89ae                	mv	s3,a1
+    80003bda:	715d                	addi	sp,sp,-80
+    80003bdc:	e486                	sd	ra,72(sp)
+    80003bde:	e0a2                	sd	s0,64(sp)
+    80003be0:	fc26                	sd	s1,56(sp)
+    80003be2:	f84a                	sd	s2,48(sp)
+    80003be4:	f44e                	sd	s3,40(sp)
+    80003be6:	0880                	addi	s0,sp,80
+    80003be8:	84aa                	mv	s1,a0
+    80003bea:	89ae                	mv	s3,a1
   struct proc *p = myproc();
-    80004568:	ffffd097          	auipc	ra,0xffffd
-    8000456c:	464080e7          	jalr	1124(ra) # 800019cc <myproc>
+    80003bec:	ffffd097          	auipc	ra,0xffffd
+    80003bf0:	352080e7          	jalr	850(ra) # 80000f3e <myproc>
   struct stat st;
   
   if(f->type == FD_INODE || f->type == FD_DEVICE){
-    80004570:	409c                	lw	a5,0(s1)
-    80004572:	37f9                	addiw	a5,a5,-2
-    80004574:	4705                	li	a4,1
-    80004576:	04f76763          	bltu	a4,a5,800045c4 <filestat+0x6e>
-    8000457a:	892a                	mv	s2,a0
+    80003bf4:	409c                	lw	a5,0(s1)
+    80003bf6:	37f9                	addiw	a5,a5,-2
+    80003bf8:	4705                	li	a4,1
+    80003bfa:	04f76763          	bltu	a4,a5,80003c48 <filestat+0x6e>
+    80003bfe:	892a                	mv	s2,a0
     ilock(f->ip);
-    8000457c:	6c88                	ld	a0,24(s1)
-    8000457e:	fffff097          	auipc	ra,0xfffff
-    80004582:	07c080e7          	jalr	124(ra) # 800035fa <ilock>
+    80003c00:	6c88                	ld	a0,24(s1)
+    80003c02:	fffff097          	auipc	ra,0xfffff
+    80003c06:	06c080e7          	jalr	108(ra) # 80002c6e <ilock>
     stati(f->ip, &st);
-    80004586:	fb840593          	addi	a1,s0,-72
-    8000458a:	6c88                	ld	a0,24(s1)
-    8000458c:	fffff097          	auipc	ra,0xfffff
-    80004590:	2f8080e7          	jalr	760(ra) # 80003884 <stati>
+    80003c0a:	fb840593          	addi	a1,s0,-72
+    80003c0e:	6c88                	ld	a0,24(s1)
+    80003c10:	fffff097          	auipc	ra,0xfffff
+    80003c14:	2e8080e7          	jalr	744(ra) # 80002ef8 <stati>
     iunlock(f->ip);
-    80004594:	6c88                	ld	a0,24(s1)
-    80004596:	fffff097          	auipc	ra,0xfffff
-    8000459a:	126080e7          	jalr	294(ra) # 800036bc <iunlock>
+    80003c18:	6c88                	ld	a0,24(s1)
+    80003c1a:	fffff097          	auipc	ra,0xfffff
+    80003c1e:	116080e7          	jalr	278(ra) # 80002d30 <iunlock>
     if(copyout(p->pagetable, addr, (char *)&st, sizeof(st)) < 0)
-    8000459e:	46e1                	li	a3,24
-    800045a0:	fb840613          	addi	a2,s0,-72
-    800045a4:	85ce                	mv	a1,s3
-    800045a6:	05093503          	ld	a0,80(s2)
-    800045aa:	ffffd097          	auipc	ra,0xffffd
-    800045ae:	118080e7          	jalr	280(ra) # 800016c2 <copyout>
-    800045b2:	41f5551b          	sraiw	a0,a0,0x1f
+    80003c22:	46e1                	li	a3,24
+    80003c24:	fb840613          	addi	a2,s0,-72
+    80003c28:	85ce                	mv	a1,s3
+    80003c2a:	05093503          	ld	a0,80(s2)
+    80003c2e:	ffffd097          	auipc	ra,0xffffd
+    80003c32:	fd4080e7          	jalr	-44(ra) # 80000c02 <copyout>
+    80003c36:	41f5551b          	sraiw	a0,a0,0x1f
       return -1;
     return 0;
   }
   return -1;
 }
-    800045b6:	60a6                	ld	ra,72(sp)
-    800045b8:	6406                	ld	s0,64(sp)
-    800045ba:	74e2                	ld	s1,56(sp)
-    800045bc:	7942                	ld	s2,48(sp)
-    800045be:	79a2                	ld	s3,40(sp)
-    800045c0:	6161                	addi	sp,sp,80
-    800045c2:	8082                	ret
+    80003c3a:	60a6                	ld	ra,72(sp)
+    80003c3c:	6406                	ld	s0,64(sp)
+    80003c3e:	74e2                	ld	s1,56(sp)
+    80003c40:	7942                	ld	s2,48(sp)
+    80003c42:	79a2                	ld	s3,40(sp)
+    80003c44:	6161                	addi	sp,sp,80
+    80003c46:	8082                	ret
   return -1;
-    800045c4:	557d                	li	a0,-1
-    800045c6:	bfc5                	j	800045b6 <filestat+0x60>
+    80003c48:	557d                	li	a0,-1
+    80003c4a:	bfc5                	j	80003c3a <filestat+0x60>
 
-00000000800045c8 <fileread>:
+0000000080003c4c <fileread>:
 
 // Read from file f.
 // addr is a user virtual address.
 int
 fileread(struct file *f, uint64 addr, int n)
 {
-    800045c8:	7179                	addi	sp,sp,-48
-    800045ca:	f406                	sd	ra,40(sp)
-    800045cc:	f022                	sd	s0,32(sp)
-    800045ce:	ec26                	sd	s1,24(sp)
-    800045d0:	e84a                	sd	s2,16(sp)
-    800045d2:	e44e                	sd	s3,8(sp)
-    800045d4:	1800                	addi	s0,sp,48
+    80003c4c:	7179                	addi	sp,sp,-48
+    80003c4e:	f406                	sd	ra,40(sp)
+    80003c50:	f022                	sd	s0,32(sp)
+    80003c52:	ec26                	sd	s1,24(sp)
+    80003c54:	e84a                	sd	s2,16(sp)
+    80003c56:	e44e                	sd	s3,8(sp)
+    80003c58:	1800                	addi	s0,sp,48
   int r = 0;
 
   if(f->readable == 0)
-    800045d6:	00854783          	lbu	a5,8(a0)
-    800045da:	c3d5                	beqz	a5,8000467e <fileread+0xb6>
-    800045dc:	84aa                	mv	s1,a0
-    800045de:	89ae                	mv	s3,a1
-    800045e0:	8932                	mv	s2,a2
+    80003c5a:	00854783          	lbu	a5,8(a0)
+    80003c5e:	c3d5                	beqz	a5,80003d02 <fileread+0xb6>
+    80003c60:	84aa                	mv	s1,a0
+    80003c62:	89ae                	mv	s3,a1
+    80003c64:	8932                	mv	s2,a2
     return -1;
 
   if(f->type == FD_PIPE){
-    800045e2:	411c                	lw	a5,0(a0)
-    800045e4:	4705                	li	a4,1
-    800045e6:	04e78963          	beq	a5,a4,80004638 <fileread+0x70>
+    80003c66:	411c                	lw	a5,0(a0)
+    80003c68:	4705                	li	a4,1
+    80003c6a:	04e78963          	beq	a5,a4,80003cbc <fileread+0x70>
     r = piperead(f->pipe, addr, n);
   } else if(f->type == FD_DEVICE){
-    800045ea:	470d                	li	a4,3
-    800045ec:	04e78d63          	beq	a5,a4,80004646 <fileread+0x7e>
+    80003c6e:	470d                	li	a4,3
+    80003c70:	04e78d63          	beq	a5,a4,80003cca <fileread+0x7e>
     if(f->major < 0 || f->major >= NDEV || !devsw[f->major].read)
       return -1;
     r = devsw[f->major].read(1, addr, n);
   } else if(f->type == FD_INODE){
-    800045f0:	4709                	li	a4,2
-    800045f2:	06e79e63          	bne	a5,a4,8000466e <fileread+0xa6>
+    80003c74:	4709                	li	a4,2
+    80003c76:	06e79e63          	bne	a5,a4,80003cf2 <fileread+0xa6>
     ilock(f->ip);
-    800045f6:	6d08                	ld	a0,24(a0)
-    800045f8:	fffff097          	auipc	ra,0xfffff
-    800045fc:	002080e7          	jalr	2(ra) # 800035fa <ilock>
+    80003c7a:	6d08                	ld	a0,24(a0)
+    80003c7c:	fffff097          	auipc	ra,0xfffff
+    80003c80:	ff2080e7          	jalr	-14(ra) # 80002c6e <ilock>
     if((r = readi(f->ip, 1, addr, f->off, n)) > 0)
-    80004600:	874a                	mv	a4,s2
-    80004602:	5094                	lw	a3,32(s1)
-    80004604:	864e                	mv	a2,s3
-    80004606:	4585                	li	a1,1
-    80004608:	6c88                	ld	a0,24(s1)
-    8000460a:	fffff097          	auipc	ra,0xfffff
-    8000460e:	2a4080e7          	jalr	676(ra) # 800038ae <readi>
-    80004612:	892a                	mv	s2,a0
-    80004614:	00a05563          	blez	a0,8000461e <fileread+0x56>
+    80003c84:	874a                	mv	a4,s2
+    80003c86:	5094                	lw	a3,32(s1)
+    80003c88:	864e                	mv	a2,s3
+    80003c8a:	4585                	li	a1,1
+    80003c8c:	6c88                	ld	a0,24(s1)
+    80003c8e:	fffff097          	auipc	ra,0xfffff
+    80003c92:	294080e7          	jalr	660(ra) # 80002f22 <readi>
+    80003c96:	892a                	mv	s2,a0
+    80003c98:	00a05563          	blez	a0,80003ca2 <fileread+0x56>
       f->off += r;
-    80004618:	509c                	lw	a5,32(s1)
-    8000461a:	9fa9                	addw	a5,a5,a0
-    8000461c:	d09c                	sw	a5,32(s1)
+    80003c9c:	509c                	lw	a5,32(s1)
+    80003c9e:	9fa9                	addw	a5,a5,a0
+    80003ca0:	d09c                	sw	a5,32(s1)
     iunlock(f->ip);
-    8000461e:	6c88                	ld	a0,24(s1)
-    80004620:	fffff097          	auipc	ra,0xfffff
-    80004624:	09c080e7          	jalr	156(ra) # 800036bc <iunlock>
+    80003ca2:	6c88                	ld	a0,24(s1)
+    80003ca4:	fffff097          	auipc	ra,0xfffff
+    80003ca8:	08c080e7          	jalr	140(ra) # 80002d30 <iunlock>
   } else {
     panic("fileread");
   }
 
   return r;
 }
-    80004628:	854a                	mv	a0,s2
-    8000462a:	70a2                	ld	ra,40(sp)
-    8000462c:	7402                	ld	s0,32(sp)
-    8000462e:	64e2                	ld	s1,24(sp)
-    80004630:	6942                	ld	s2,16(sp)
-    80004632:	69a2                	ld	s3,8(sp)
-    80004634:	6145                	addi	sp,sp,48
-    80004636:	8082                	ret
+    80003cac:	854a                	mv	a0,s2
+    80003cae:	70a2                	ld	ra,40(sp)
+    80003cb0:	7402                	ld	s0,32(sp)
+    80003cb2:	64e2                	ld	s1,24(sp)
+    80003cb4:	6942                	ld	s2,16(sp)
+    80003cb6:	69a2                	ld	s3,8(sp)
+    80003cb8:	6145                	addi	sp,sp,48
+    80003cba:	8082                	ret
     r = piperead(f->pipe, addr, n);
-    80004638:	6908                	ld	a0,16(a0)
-    8000463a:	00000097          	auipc	ra,0x0
-    8000463e:	3f6080e7          	jalr	1014(ra) # 80004a30 <piperead>
-    80004642:	892a                	mv	s2,a0
-    80004644:	b7d5                	j	80004628 <fileread+0x60>
+    80003cbc:	6908                	ld	a0,16(a0)
+    80003cbe:	00000097          	auipc	ra,0x0
+    80003cc2:	3c0080e7          	jalr	960(ra) # 8000407e <piperead>
+    80003cc6:	892a                	mv	s2,a0
+    80003cc8:	b7d5                	j	80003cac <fileread+0x60>
     if(f->major < 0 || f->major >= NDEV || !devsw[f->major].read)
-    80004646:	02451783          	lh	a5,36(a0)
-    8000464a:	03079693          	slli	a3,a5,0x30
-    8000464e:	92c1                	srli	a3,a3,0x30
-    80004650:	4725                	li	a4,9
-    80004652:	02d76863          	bltu	a4,a3,80004682 <fileread+0xba>
-    80004656:	0792                	slli	a5,a5,0x4
-    80004658:	0001d717          	auipc	a4,0x1d
-    8000465c:	35870713          	addi	a4,a4,856 # 800219b0 <devsw>
-    80004660:	97ba                	add	a5,a5,a4
-    80004662:	639c                	ld	a5,0(a5)
-    80004664:	c38d                	beqz	a5,80004686 <fileread+0xbe>
+    80003cca:	02451783          	lh	a5,36(a0)
+    80003cce:	03079693          	slli	a3,a5,0x30
+    80003cd2:	92c1                	srli	a3,a3,0x30
+    80003cd4:	4725                	li	a4,9
+    80003cd6:	02d76863          	bltu	a4,a3,80003d06 <fileread+0xba>
+    80003cda:	0792                	slli	a5,a5,0x4
+    80003cdc:	00015717          	auipc	a4,0x15
+    80003ce0:	5ec70713          	addi	a4,a4,1516 # 800192c8 <devsw>
+    80003ce4:	97ba                	add	a5,a5,a4
+    80003ce6:	639c                	ld	a5,0(a5)
+    80003ce8:	c38d                	beqz	a5,80003d0a <fileread+0xbe>
     r = devsw[f->major].read(1, addr, n);
-    80004666:	4505                	li	a0,1
-    80004668:	9782                	jalr	a5
-    8000466a:	892a                	mv	s2,a0
-    8000466c:	bf75                	j	80004628 <fileread+0x60>
+    80003cea:	4505                	li	a0,1
+    80003cec:	9782                	jalr	a5
+    80003cee:	892a                	mv	s2,a0
+    80003cf0:	bf75                	j	80003cac <fileread+0x60>
     panic("fileread");
-    8000466e:	00004517          	auipc	a0,0x4
-    80004672:	01250513          	addi	a0,a0,18 # 80008680 <syscalls+0x258>
-    80004676:	ffffc097          	auipc	ra,0xffffc
-    8000467a:	ed0080e7          	jalr	-304(ra) # 80000546 <panic>
+    80003cf2:	00005517          	auipc	a0,0x5
+    80003cf6:	aee50513          	addi	a0,a0,-1298 # 800087e0 <syscall_name+0x260>
+    80003cfa:	00002097          	auipc	ra,0x2
+    80003cfe:	ff6080e7          	jalr	-10(ra) # 80005cf0 <panic>
     return -1;
-    8000467e:	597d                	li	s2,-1
-    80004680:	b765                	j	80004628 <fileread+0x60>
+    80003d02:	597d                	li	s2,-1
+    80003d04:	b765                	j	80003cac <fileread+0x60>
       return -1;
-    80004682:	597d                	li	s2,-1
-    80004684:	b755                	j	80004628 <fileread+0x60>
-    80004686:	597d                	li	s2,-1
-    80004688:	b745                	j	80004628 <fileread+0x60>
+    80003d06:	597d                	li	s2,-1
+    80003d08:	b755                	j	80003cac <fileread+0x60>
+    80003d0a:	597d                	li	s2,-1
+    80003d0c:	b745                	j	80003cac <fileread+0x60>
 
-000000008000468a <filewrite>:
+0000000080003d0e <filewrite>:
+
+// Write to file f.
+// addr is a user virtual address.
 int
 filewrite(struct file *f, uint64 addr, int n)
 {
+    80003d0e:	715d                	addi	sp,sp,-80
+    80003d10:	e486                	sd	ra,72(sp)
+    80003d12:	e0a2                	sd	s0,64(sp)
+    80003d14:	fc26                	sd	s1,56(sp)
+    80003d16:	f84a                	sd	s2,48(sp)
+    80003d18:	f44e                	sd	s3,40(sp)
+    80003d1a:	f052                	sd	s4,32(sp)
+    80003d1c:	ec56                	sd	s5,24(sp)
+    80003d1e:	e85a                	sd	s6,16(sp)
+    80003d20:	e45e                	sd	s7,8(sp)
+    80003d22:	e062                	sd	s8,0(sp)
+    80003d24:	0880                	addi	s0,sp,80
   int r, ret = 0;
 
   if(f->writable == 0)
-    8000468a:	00954783          	lbu	a5,9(a0)
-    8000468e:	14078563          	beqz	a5,800047d8 <filewrite+0x14e>
-{
-    80004692:	715d                	addi	sp,sp,-80
-    80004694:	e486                	sd	ra,72(sp)
-    80004696:	e0a2                	sd	s0,64(sp)
-    80004698:	fc26                	sd	s1,56(sp)
-    8000469a:	f84a                	sd	s2,48(sp)
-    8000469c:	f44e                	sd	s3,40(sp)
-    8000469e:	f052                	sd	s4,32(sp)
-    800046a0:	ec56                	sd	s5,24(sp)
-    800046a2:	e85a                	sd	s6,16(sp)
-    800046a4:	e45e                	sd	s7,8(sp)
-    800046a6:	e062                	sd	s8,0(sp)
-    800046a8:	0880                	addi	s0,sp,80
-    800046aa:	892a                	mv	s2,a0
-    800046ac:	8b2e                	mv	s6,a1
-    800046ae:	8a32                	mv	s4,a2
+    80003d26:	00954783          	lbu	a5,9(a0)
+    80003d2a:	10078663          	beqz	a5,80003e36 <filewrite+0x128>
+    80003d2e:	892a                	mv	s2,a0
+    80003d30:	8b2e                	mv	s6,a1
+    80003d32:	8a32                	mv	s4,a2
     return -1;
 
   if(f->type == FD_PIPE){
-    800046b0:	411c                	lw	a5,0(a0)
-    800046b2:	4705                	li	a4,1
-    800046b4:	02e78263          	beq	a5,a4,800046d8 <filewrite+0x4e>
+    80003d34:	411c                	lw	a5,0(a0)
+    80003d36:	4705                	li	a4,1
+    80003d38:	02e78263          	beq	a5,a4,80003d5c <filewrite+0x4e>
     ret = pipewrite(f->pipe, addr, n);
   } else if(f->type == FD_DEVICE){
-    800046b8:	470d                	li	a4,3
-    800046ba:	02e78563          	beq	a5,a4,800046e4 <filewrite+0x5a>
+    80003d3c:	470d                	li	a4,3
+    80003d3e:	02e78663          	beq	a5,a4,80003d6a <filewrite+0x5c>
     if(f->major < 0 || f->major >= NDEV || !devsw[f->major].write)
       return -1;
     ret = devsw[f->major].write(1, addr, n);
   } else if(f->type == FD_INODE){
-    800046be:	4709                	li	a4,2
-    800046c0:	10e79463          	bne	a5,a4,800047c8 <filewrite+0x13e>
+    80003d42:	4709                	li	a4,2
+    80003d44:	0ee79163          	bne	a5,a4,80003e26 <filewrite+0x118>
     // and 2 blocks of slop for non-aligned writes.
     // this really belongs lower down, since writei()
     // might be writing a device like the console.
     int max = ((MAXOPBLOCKS-1-1-2) / 2) * BSIZE;
     int i = 0;
     while(i < n){
-    800046c4:	0ec05e63          	blez	a2,800047c0 <filewrite+0x136>
+    80003d48:	0ac05d63          	blez	a2,80003e02 <filewrite+0xf4>
     int i = 0;
-    800046c8:	4981                	li	s3,0
-    800046ca:	6b85                	lui	s7,0x1
-    800046cc:	c00b8b93          	addi	s7,s7,-1024 # c00 <_entry-0x7ffff400>
-    800046d0:	6c05                	lui	s8,0x1
-    800046d2:	c00c0c1b          	addiw	s8,s8,-1024
-    800046d6:	a851                	j	8000476a <filewrite+0xe0>
+    80003d4c:	4981                	li	s3,0
+    80003d4e:	6b85                	lui	s7,0x1
+    80003d50:	c00b8b93          	addi	s7,s7,-1024 # c00 <_entry-0x7ffff400>
+    80003d54:	6c05                	lui	s8,0x1
+    80003d56:	c00c0c1b          	addiw	s8,s8,-1024
+    80003d5a:	a861                	j	80003df2 <filewrite+0xe4>
     ret = pipewrite(f->pipe, addr, n);
-    800046d8:	6908                	ld	a0,16(a0)
-    800046da:	00000097          	auipc	ra,0x0
-    800046de:	254080e7          	jalr	596(ra) # 8000492e <pipewrite>
-    800046e2:	a85d                	j	80004798 <filewrite+0x10e>
+    80003d5c:	6908                	ld	a0,16(a0)
+    80003d5e:	00000097          	auipc	ra,0x0
+    80003d62:	22e080e7          	jalr	558(ra) # 80003f8c <pipewrite>
+    80003d66:	8a2a                	mv	s4,a0
+    80003d68:	a045                	j	80003e08 <filewrite+0xfa>
     if(f->major < 0 || f->major >= NDEV || !devsw[f->major].write)
-    800046e4:	02451783          	lh	a5,36(a0)
-    800046e8:	03079693          	slli	a3,a5,0x30
-    800046ec:	92c1                	srli	a3,a3,0x30
-    800046ee:	4725                	li	a4,9
-    800046f0:	0ed76663          	bltu	a4,a3,800047dc <filewrite+0x152>
-    800046f4:	0792                	slli	a5,a5,0x4
-    800046f6:	0001d717          	auipc	a4,0x1d
-    800046fa:	2ba70713          	addi	a4,a4,698 # 800219b0 <devsw>
-    800046fe:	97ba                	add	a5,a5,a4
-    80004700:	679c                	ld	a5,8(a5)
-    80004702:	cff9                	beqz	a5,800047e0 <filewrite+0x156>
+    80003d6a:	02451783          	lh	a5,36(a0)
+    80003d6e:	03079693          	slli	a3,a5,0x30
+    80003d72:	92c1                	srli	a3,a3,0x30
+    80003d74:	4725                	li	a4,9
+    80003d76:	0cd76263          	bltu	a4,a3,80003e3a <filewrite+0x12c>
+    80003d7a:	0792                	slli	a5,a5,0x4
+    80003d7c:	00015717          	auipc	a4,0x15
+    80003d80:	54c70713          	addi	a4,a4,1356 # 800192c8 <devsw>
+    80003d84:	97ba                	add	a5,a5,a4
+    80003d86:	679c                	ld	a5,8(a5)
+    80003d88:	cbdd                	beqz	a5,80003e3e <filewrite+0x130>
     ret = devsw[f->major].write(1, addr, n);
-    80004704:	4505                	li	a0,1
-    80004706:	9782                	jalr	a5
-    80004708:	a841                	j	80004798 <filewrite+0x10e>
-    8000470a:	00048a9b          	sext.w	s5,s1
+    80003d8a:	4505                	li	a0,1
+    80003d8c:	9782                	jalr	a5
+    80003d8e:	8a2a                	mv	s4,a0
+    80003d90:	a8a5                	j	80003e08 <filewrite+0xfa>
+    80003d92:	00048a9b          	sext.w	s5,s1
       int n1 = n - i;
       if(n1 > max)
         n1 = max;
 
       begin_op();
-    8000470e:	00000097          	auipc	ra,0x0
-    80004712:	8b2080e7          	jalr	-1870(ra) # 80003fc0 <begin_op>
+    80003d96:	00000097          	auipc	ra,0x0
+    80003d9a:	8b4080e7          	jalr	-1868(ra) # 8000364a <begin_op>
       ilock(f->ip);
-    80004716:	01893503          	ld	a0,24(s2)
-    8000471a:	fffff097          	auipc	ra,0xfffff
-    8000471e:	ee0080e7          	jalr	-288(ra) # 800035fa <ilock>
+    80003d9e:	01893503          	ld	a0,24(s2)
+    80003da2:	fffff097          	auipc	ra,0xfffff
+    80003da6:	ecc080e7          	jalr	-308(ra) # 80002c6e <ilock>
       if ((r = writei(f->ip, 1, addr + i, f->off, n1)) > 0)
-    80004722:	8756                	mv	a4,s5
-    80004724:	02092683          	lw	a3,32(s2)
-    80004728:	01698633          	add	a2,s3,s6
-    8000472c:	4585                	li	a1,1
-    8000472e:	01893503          	ld	a0,24(s2)
-    80004732:	fffff097          	auipc	ra,0xfffff
-    80004736:	272080e7          	jalr	626(ra) # 800039a4 <writei>
-    8000473a:	84aa                	mv	s1,a0
-    8000473c:	02a05f63          	blez	a0,8000477a <filewrite+0xf0>
+    80003daa:	8756                	mv	a4,s5
+    80003dac:	02092683          	lw	a3,32(s2)
+    80003db0:	01698633          	add	a2,s3,s6
+    80003db4:	4585                	li	a1,1
+    80003db6:	01893503          	ld	a0,24(s2)
+    80003dba:	fffff097          	auipc	ra,0xfffff
+    80003dbe:	260080e7          	jalr	608(ra) # 8000301a <writei>
+    80003dc2:	84aa                	mv	s1,a0
+    80003dc4:	00a05763          	blez	a0,80003dd2 <filewrite+0xc4>
         f->off += r;
-    80004740:	02092783          	lw	a5,32(s2)
-    80004744:	9fa9                	addw	a5,a5,a0
-    80004746:	02f92023          	sw	a5,32(s2)
+    80003dc8:	02092783          	lw	a5,32(s2)
+    80003dcc:	9fa9                	addw	a5,a5,a0
+    80003dce:	02f92023          	sw	a5,32(s2)
       iunlock(f->ip);
-    8000474a:	01893503          	ld	a0,24(s2)
-    8000474e:	fffff097          	auipc	ra,0xfffff
-    80004752:	f6e080e7          	jalr	-146(ra) # 800036bc <iunlock>
+    80003dd2:	01893503          	ld	a0,24(s2)
+    80003dd6:	fffff097          	auipc	ra,0xfffff
+    80003dda:	f5a080e7          	jalr	-166(ra) # 80002d30 <iunlock>
       end_op();
-    80004756:	00000097          	auipc	ra,0x0
-    8000475a:	8e8080e7          	jalr	-1816(ra) # 8000403e <end_op>
+    80003dde:	00000097          	auipc	ra,0x0
+    80003de2:	8ea080e7          	jalr	-1814(ra) # 800036c8 <end_op>
 
-      if(r < 0)
+      if(r != n1){
+    80003de6:	009a9f63          	bne	s5,s1,80003e04 <filewrite+0xf6>
+        // error from writei
         break;
-      if(r != n1)
-    8000475e:	049a9963          	bne	s5,s1,800047b0 <filewrite+0x126>
-        panic("short filewrite");
+      }
       i += r;
-    80004762:	013489bb          	addw	s3,s1,s3
+    80003dea:	013489bb          	addw	s3,s1,s3
     while(i < n){
-    80004766:	0349d663          	bge	s3,s4,80004792 <filewrite+0x108>
+    80003dee:	0149db63          	bge	s3,s4,80003e04 <filewrite+0xf6>
       int n1 = n - i;
-    8000476a:	413a04bb          	subw	s1,s4,s3
-    8000476e:	0004879b          	sext.w	a5,s1
-    80004772:	f8fbdce3          	bge	s7,a5,8000470a <filewrite+0x80>
-    80004776:	84e2                	mv	s1,s8
-    80004778:	bf49                	j	8000470a <filewrite+0x80>
-      iunlock(f->ip);
-    8000477a:	01893503          	ld	a0,24(s2)
-    8000477e:	fffff097          	auipc	ra,0xfffff
-    80004782:	f3e080e7          	jalr	-194(ra) # 800036bc <iunlock>
-      end_op();
-    80004786:	00000097          	auipc	ra,0x0
-    8000478a:	8b8080e7          	jalr	-1864(ra) # 8000403e <end_op>
-      if(r < 0)
-    8000478e:	fc04d8e3          	bgez	s1,8000475e <filewrite+0xd4>
+    80003df2:	413a04bb          	subw	s1,s4,s3
+    80003df6:	0004879b          	sext.w	a5,s1
+    80003dfa:	f8fbdce3          	bge	s7,a5,80003d92 <filewrite+0x84>
+    80003dfe:	84e2                	mv	s1,s8
+    80003e00:	bf49                	j	80003d92 <filewrite+0x84>
+    int i = 0;
+    80003e02:	4981                	li	s3,0
     }
     ret = (i == n ? n : -1);
-    80004792:	8552                	mv	a0,s4
-    80004794:	033a1863          	bne	s4,s3,800047c4 <filewrite+0x13a>
+    80003e04:	013a1f63          	bne	s4,s3,80003e22 <filewrite+0x114>
   } else {
     panic("filewrite");
   }
 
   return ret;
 }
-    80004798:	60a6                	ld	ra,72(sp)
-    8000479a:	6406                	ld	s0,64(sp)
-    8000479c:	74e2                	ld	s1,56(sp)
-    8000479e:	7942                	ld	s2,48(sp)
-    800047a0:	79a2                	ld	s3,40(sp)
-    800047a2:	7a02                	ld	s4,32(sp)
-    800047a4:	6ae2                	ld	s5,24(sp)
-    800047a6:	6b42                	ld	s6,16(sp)
-    800047a8:	6ba2                	ld	s7,8(sp)
-    800047aa:	6c02                	ld	s8,0(sp)
-    800047ac:	6161                	addi	sp,sp,80
-    800047ae:	8082                	ret
-        panic("short filewrite");
-    800047b0:	00004517          	auipc	a0,0x4
-    800047b4:	ee050513          	addi	a0,a0,-288 # 80008690 <syscalls+0x268>
-    800047b8:	ffffc097          	auipc	ra,0xffffc
-    800047bc:	d8e080e7          	jalr	-626(ra) # 80000546 <panic>
-    int i = 0;
-    800047c0:	4981                	li	s3,0
-    800047c2:	bfc1                	j	80004792 <filewrite+0x108>
+    80003e08:	8552                	mv	a0,s4
+    80003e0a:	60a6                	ld	ra,72(sp)
+    80003e0c:	6406                	ld	s0,64(sp)
+    80003e0e:	74e2                	ld	s1,56(sp)
+    80003e10:	7942                	ld	s2,48(sp)
+    80003e12:	79a2                	ld	s3,40(sp)
+    80003e14:	7a02                	ld	s4,32(sp)
+    80003e16:	6ae2                	ld	s5,24(sp)
+    80003e18:	6b42                	ld	s6,16(sp)
+    80003e1a:	6ba2                	ld	s7,8(sp)
+    80003e1c:	6c02                	ld	s8,0(sp)
+    80003e1e:	6161                	addi	sp,sp,80
+    80003e20:	8082                	ret
     ret = (i == n ? n : -1);
-    800047c4:	557d                	li	a0,-1
-    800047c6:	bfc9                	j	80004798 <filewrite+0x10e>
+    80003e22:	5a7d                	li	s4,-1
+    80003e24:	b7d5                	j	80003e08 <filewrite+0xfa>
     panic("filewrite");
-    800047c8:	00004517          	auipc	a0,0x4
-    800047cc:	ed850513          	addi	a0,a0,-296 # 800086a0 <syscalls+0x278>
-    800047d0:	ffffc097          	auipc	ra,0xffffc
-    800047d4:	d76080e7          	jalr	-650(ra) # 80000546 <panic>
+    80003e26:	00005517          	auipc	a0,0x5
+    80003e2a:	9ca50513          	addi	a0,a0,-1590 # 800087f0 <syscall_name+0x270>
+    80003e2e:	00002097          	auipc	ra,0x2
+    80003e32:	ec2080e7          	jalr	-318(ra) # 80005cf0 <panic>
     return -1;
-    800047d8:	557d                	li	a0,-1
-}
-    800047da:	8082                	ret
+    80003e36:	5a7d                	li	s4,-1
+    80003e38:	bfc1                	j	80003e08 <filewrite+0xfa>
       return -1;
-    800047dc:	557d                	li	a0,-1
-    800047de:	bf6d                	j	80004798 <filewrite+0x10e>
-    800047e0:	557d                	li	a0,-1
-    800047e2:	bf5d                	j	80004798 <filewrite+0x10e>
+    80003e3a:	5a7d                	li	s4,-1
+    80003e3c:	b7f1                	j	80003e08 <filewrite+0xfa>
+    80003e3e:	5a7d                	li	s4,-1
+    80003e40:	b7e1                	j	80003e08 <filewrite+0xfa>
 
-00000000800047e4 <pipealloc>:
+0000000080003e42 <pipealloc>:
   int writeopen;  // write fd is still open
 };
 
 int
 pipealloc(struct file **f0, struct file **f1)
 {
-    800047e4:	7179                	addi	sp,sp,-48
-    800047e6:	f406                	sd	ra,40(sp)
-    800047e8:	f022                	sd	s0,32(sp)
-    800047ea:	ec26                	sd	s1,24(sp)
-    800047ec:	e84a                	sd	s2,16(sp)
-    800047ee:	e44e                	sd	s3,8(sp)
-    800047f0:	e052                	sd	s4,0(sp)
-    800047f2:	1800                	addi	s0,sp,48
-    800047f4:	84aa                	mv	s1,a0
-    800047f6:	8a2e                	mv	s4,a1
+    80003e42:	7179                	addi	sp,sp,-48
+    80003e44:	f406                	sd	ra,40(sp)
+    80003e46:	f022                	sd	s0,32(sp)
+    80003e48:	ec26                	sd	s1,24(sp)
+    80003e4a:	e84a                	sd	s2,16(sp)
+    80003e4c:	e44e                	sd	s3,8(sp)
+    80003e4e:	e052                	sd	s4,0(sp)
+    80003e50:	1800                	addi	s0,sp,48
+    80003e52:	84aa                	mv	s1,a0
+    80003e54:	8a2e                	mv	s4,a1
   struct pipe *pi;
 
   pi = 0;
   *f0 = *f1 = 0;
-    800047f8:	0005b023          	sd	zero,0(a1)
-    800047fc:	00053023          	sd	zero,0(a0)
+    80003e56:	0005b023          	sd	zero,0(a1)
+    80003e5a:	00053023          	sd	zero,0(a0)
   if((*f0 = filealloc()) == 0 || (*f1 = filealloc()) == 0)
-    80004800:	00000097          	auipc	ra,0x0
-    80004804:	bd2080e7          	jalr	-1070(ra) # 800043d2 <filealloc>
-    80004808:	e088                	sd	a0,0(s1)
-    8000480a:	c551                	beqz	a0,80004896 <pipealloc+0xb2>
-    8000480c:	00000097          	auipc	ra,0x0
-    80004810:	bc6080e7          	jalr	-1082(ra) # 800043d2 <filealloc>
-    80004814:	00aa3023          	sd	a0,0(s4)
-    80004818:	c92d                	beqz	a0,8000488a <pipealloc+0xa6>
+    80003e5e:	00000097          	auipc	ra,0x0
+    80003e62:	bf8080e7          	jalr	-1032(ra) # 80003a56 <filealloc>
+    80003e66:	e088                	sd	a0,0(s1)
+    80003e68:	c551                	beqz	a0,80003ef4 <pipealloc+0xb2>
+    80003e6a:	00000097          	auipc	ra,0x0
+    80003e6e:	bec080e7          	jalr	-1044(ra) # 80003a56 <filealloc>
+    80003e72:	00aa3023          	sd	a0,0(s4)
+    80003e76:	c92d                	beqz	a0,80003ee8 <pipealloc+0xa6>
     goto bad;
   if((pi = (struct pipe*)kalloc()) == 0)
-    8000481a:	ffffc097          	auipc	ra,0xffffc
-    8000481e:	2f6080e7          	jalr	758(ra) # 80000b10 <kalloc>
-    80004822:	892a                	mv	s2,a0
-    80004824:	c125                	beqz	a0,80004884 <pipealloc+0xa0>
+    80003e78:	ffffc097          	auipc	ra,0xffffc
+    80003e7c:	2a2080e7          	jalr	674(ra) # 8000011a <kalloc>
+    80003e80:	892a                	mv	s2,a0
+    80003e82:	c125                	beqz	a0,80003ee2 <pipealloc+0xa0>
     goto bad;
   pi->readopen = 1;
-    80004826:	4985                	li	s3,1
-    80004828:	23352023          	sw	s3,544(a0)
+    80003e84:	4985                	li	s3,1
+    80003e86:	23352023          	sw	s3,544(a0)
   pi->writeopen = 1;
-    8000482c:	23352223          	sw	s3,548(a0)
+    80003e8a:	23352223          	sw	s3,548(a0)
   pi->nwrite = 0;
-    80004830:	20052e23          	sw	zero,540(a0)
+    80003e8e:	20052e23          	sw	zero,540(a0)
   pi->nread = 0;
-    80004834:	20052c23          	sw	zero,536(a0)
+    80003e92:	20052c23          	sw	zero,536(a0)
   initlock(&pi->lock, "pipe");
-    80004838:	00004597          	auipc	a1,0x4
-    8000483c:	e7858593          	addi	a1,a1,-392 # 800086b0 <syscalls+0x288>
-    80004840:	ffffc097          	auipc	ra,0xffffc
-    80004844:	330080e7          	jalr	816(ra) # 80000b70 <initlock>
+    80003e96:	00004597          	auipc	a1,0x4
+    80003e9a:	57a58593          	addi	a1,a1,1402 # 80008410 <states.0+0x1a0>
+    80003e9e:	00002097          	auipc	ra,0x2
+    80003ea2:	2fa080e7          	jalr	762(ra) # 80006198 <initlock>
   (*f0)->type = FD_PIPE;
-    80004848:	609c                	ld	a5,0(s1)
-    8000484a:	0137a023          	sw	s3,0(a5)
+    80003ea6:	609c                	ld	a5,0(s1)
+    80003ea8:	0137a023          	sw	s3,0(a5)
   (*f0)->readable = 1;
-    8000484e:	609c                	ld	a5,0(s1)
-    80004850:	01378423          	sb	s3,8(a5)
+    80003eac:	609c                	ld	a5,0(s1)
+    80003eae:	01378423          	sb	s3,8(a5)
   (*f0)->writable = 0;
-    80004854:	609c                	ld	a5,0(s1)
-    80004856:	000784a3          	sb	zero,9(a5)
+    80003eb2:	609c                	ld	a5,0(s1)
+    80003eb4:	000784a3          	sb	zero,9(a5)
   (*f0)->pipe = pi;
-    8000485a:	609c                	ld	a5,0(s1)
-    8000485c:	0127b823          	sd	s2,16(a5)
+    80003eb8:	609c                	ld	a5,0(s1)
+    80003eba:	0127b823          	sd	s2,16(a5)
   (*f1)->type = FD_PIPE;
-    80004860:	000a3783          	ld	a5,0(s4)
-    80004864:	0137a023          	sw	s3,0(a5)
+    80003ebe:	000a3783          	ld	a5,0(s4)
+    80003ec2:	0137a023          	sw	s3,0(a5)
   (*f1)->readable = 0;
-    80004868:	000a3783          	ld	a5,0(s4)
-    8000486c:	00078423          	sb	zero,8(a5)
+    80003ec6:	000a3783          	ld	a5,0(s4)
+    80003eca:	00078423          	sb	zero,8(a5)
   (*f1)->writable = 1;
-    80004870:	000a3783          	ld	a5,0(s4)
-    80004874:	013784a3          	sb	s3,9(a5)
+    80003ece:	000a3783          	ld	a5,0(s4)
+    80003ed2:	013784a3          	sb	s3,9(a5)
   (*f1)->pipe = pi;
-    80004878:	000a3783          	ld	a5,0(s4)
-    8000487c:	0127b823          	sd	s2,16(a5)
+    80003ed6:	000a3783          	ld	a5,0(s4)
+    80003eda:	0127b823          	sd	s2,16(a5)
   return 0;
-    80004880:	4501                	li	a0,0
-    80004882:	a025                	j	800048aa <pipealloc+0xc6>
+    80003ede:	4501                	li	a0,0
+    80003ee0:	a025                	j	80003f08 <pipealloc+0xc6>
 
  bad:
   if(pi)
     kfree((char*)pi);
   if(*f0)
-    80004884:	6088                	ld	a0,0(s1)
-    80004886:	e501                	bnez	a0,8000488e <pipealloc+0xaa>
-    80004888:	a039                	j	80004896 <pipealloc+0xb2>
-    8000488a:	6088                	ld	a0,0(s1)
-    8000488c:	c51d                	beqz	a0,800048ba <pipealloc+0xd6>
+    80003ee2:	6088                	ld	a0,0(s1)
+    80003ee4:	e501                	bnez	a0,80003eec <pipealloc+0xaa>
+    80003ee6:	a039                	j	80003ef4 <pipealloc+0xb2>
+    80003ee8:	6088                	ld	a0,0(s1)
+    80003eea:	c51d                	beqz	a0,80003f18 <pipealloc+0xd6>
     fileclose(*f0);
-    8000488e:	00000097          	auipc	ra,0x0
-    80004892:	c00080e7          	jalr	-1024(ra) # 8000448e <fileclose>
+    80003eec:	00000097          	auipc	ra,0x0
+    80003ef0:	c26080e7          	jalr	-986(ra) # 80003b12 <fileclose>
   if(*f1)
-    80004896:	000a3783          	ld	a5,0(s4)
+    80003ef4:	000a3783          	ld	a5,0(s4)
     fileclose(*f1);
   return -1;
-    8000489a:	557d                	li	a0,-1
+    80003ef8:	557d                	li	a0,-1
   if(*f1)
-    8000489c:	c799                	beqz	a5,800048aa <pipealloc+0xc6>
+    80003efa:	c799                	beqz	a5,80003f08 <pipealloc+0xc6>
     fileclose(*f1);
-    8000489e:	853e                	mv	a0,a5
-    800048a0:	00000097          	auipc	ra,0x0
-    800048a4:	bee080e7          	jalr	-1042(ra) # 8000448e <fileclose>
+    80003efc:	853e                	mv	a0,a5
+    80003efe:	00000097          	auipc	ra,0x0
+    80003f02:	c14080e7          	jalr	-1004(ra) # 80003b12 <fileclose>
   return -1;
-    800048a8:	557d                	li	a0,-1
+    80003f06:	557d                	li	a0,-1
 }
-    800048aa:	70a2                	ld	ra,40(sp)
-    800048ac:	7402                	ld	s0,32(sp)
-    800048ae:	64e2                	ld	s1,24(sp)
-    800048b0:	6942                	ld	s2,16(sp)
-    800048b2:	69a2                	ld	s3,8(sp)
-    800048b4:	6a02                	ld	s4,0(sp)
-    800048b6:	6145                	addi	sp,sp,48
-    800048b8:	8082                	ret
+    80003f08:	70a2                	ld	ra,40(sp)
+    80003f0a:	7402                	ld	s0,32(sp)
+    80003f0c:	64e2                	ld	s1,24(sp)
+    80003f0e:	6942                	ld	s2,16(sp)
+    80003f10:	69a2                	ld	s3,8(sp)
+    80003f12:	6a02                	ld	s4,0(sp)
+    80003f14:	6145                	addi	sp,sp,48
+    80003f16:	8082                	ret
   return -1;
-    800048ba:	557d                	li	a0,-1
-    800048bc:	b7fd                	j	800048aa <pipealloc+0xc6>
+    80003f18:	557d                	li	a0,-1
+    80003f1a:	b7fd                	j	80003f08 <pipealloc+0xc6>
 
-00000000800048be <pipeclose>:
+0000000080003f1c <pipeclose>:
 
 void
 pipeclose(struct pipe *pi, int writable)
 {
-    800048be:	1101                	addi	sp,sp,-32
-    800048c0:	ec06                	sd	ra,24(sp)
-    800048c2:	e822                	sd	s0,16(sp)
-    800048c4:	e426                	sd	s1,8(sp)
-    800048c6:	e04a                	sd	s2,0(sp)
-    800048c8:	1000                	addi	s0,sp,32
-    800048ca:	84aa                	mv	s1,a0
-    800048cc:	892e                	mv	s2,a1
+    80003f1c:	1101                	addi	sp,sp,-32
+    80003f1e:	ec06                	sd	ra,24(sp)
+    80003f20:	e822                	sd	s0,16(sp)
+    80003f22:	e426                	sd	s1,8(sp)
+    80003f24:	e04a                	sd	s2,0(sp)
+    80003f26:	1000                	addi	s0,sp,32
+    80003f28:	84aa                	mv	s1,a0
+    80003f2a:	892e                	mv	s2,a1
   acquire(&pi->lock);
-    800048ce:	ffffc097          	auipc	ra,0xffffc
-    800048d2:	332080e7          	jalr	818(ra) # 80000c00 <acquire>
+    80003f2c:	00002097          	auipc	ra,0x2
+    80003f30:	2fc080e7          	jalr	764(ra) # 80006228 <acquire>
   if(writable){
-    800048d6:	02090d63          	beqz	s2,80004910 <pipeclose+0x52>
+    80003f34:	02090d63          	beqz	s2,80003f6e <pipeclose+0x52>
     pi->writeopen = 0;
-    800048da:	2204a223          	sw	zero,548(s1)
+    80003f38:	2204a223          	sw	zero,548(s1)
     wakeup(&pi->nread);
-    800048de:	21848513          	addi	a0,s1,536
-    800048e2:	ffffe097          	auipc	ra,0xffffe
-    800048e6:	a7e080e7          	jalr	-1410(ra) # 80002360 <wakeup>
+    80003f3c:	21848513          	addi	a0,s1,536
+    80003f40:	ffffe097          	auipc	ra,0xffffe
+    80003f44:	856080e7          	jalr	-1962(ra) # 80001796 <wakeup>
   } else {
     pi->readopen = 0;
     wakeup(&pi->nwrite);
   }
   if(pi->readopen == 0 && pi->writeopen == 0){
-    800048ea:	2204b783          	ld	a5,544(s1)
-    800048ee:	eb95                	bnez	a5,80004922 <pipeclose+0x64>
+    80003f48:	2204b783          	ld	a5,544(s1)
+    80003f4c:	eb95                	bnez	a5,80003f80 <pipeclose+0x64>
     release(&pi->lock);
-    800048f0:	8526                	mv	a0,s1
-    800048f2:	ffffc097          	auipc	ra,0xffffc
-    800048f6:	3c2080e7          	jalr	962(ra) # 80000cb4 <release>
+    80003f4e:	8526                	mv	a0,s1
+    80003f50:	00002097          	auipc	ra,0x2
+    80003f54:	38c080e7          	jalr	908(ra) # 800062dc <release>
     kfree((char*)pi);
-    800048fa:	8526                	mv	a0,s1
-    800048fc:	ffffc097          	auipc	ra,0xffffc
-    80004900:	116080e7          	jalr	278(ra) # 80000a12 <kfree>
+    80003f58:	8526                	mv	a0,s1
+    80003f5a:	ffffc097          	auipc	ra,0xffffc
+    80003f5e:	0c2080e7          	jalr	194(ra) # 8000001c <kfree>
   } else
     release(&pi->lock);
 }
-    80004904:	60e2                	ld	ra,24(sp)
-    80004906:	6442                	ld	s0,16(sp)
-    80004908:	64a2                	ld	s1,8(sp)
-    8000490a:	6902                	ld	s2,0(sp)
-    8000490c:	6105                	addi	sp,sp,32
-    8000490e:	8082                	ret
+    80003f62:	60e2                	ld	ra,24(sp)
+    80003f64:	6442                	ld	s0,16(sp)
+    80003f66:	64a2                	ld	s1,8(sp)
+    80003f68:	6902                	ld	s2,0(sp)
+    80003f6a:	6105                	addi	sp,sp,32
+    80003f6c:	8082                	ret
     pi->readopen = 0;
-    80004910:	2204a023          	sw	zero,544(s1)
+    80003f6e:	2204a023          	sw	zero,544(s1)
     wakeup(&pi->nwrite);
-    80004914:	21c48513          	addi	a0,s1,540
-    80004918:	ffffe097          	auipc	ra,0xffffe
-    8000491c:	a48080e7          	jalr	-1464(ra) # 80002360 <wakeup>
-    80004920:	b7e9                	j	800048ea <pipeclose+0x2c>
+    80003f72:	21c48513          	addi	a0,s1,540
+    80003f76:	ffffe097          	auipc	ra,0xffffe
+    80003f7a:	820080e7          	jalr	-2016(ra) # 80001796 <wakeup>
+    80003f7e:	b7e9                	j	80003f48 <pipeclose+0x2c>
     release(&pi->lock);
-    80004922:	8526                	mv	a0,s1
-    80004924:	ffffc097          	auipc	ra,0xffffc
-    80004928:	390080e7          	jalr	912(ra) # 80000cb4 <release>
+    80003f80:	8526                	mv	a0,s1
+    80003f82:	00002097          	auipc	ra,0x2
+    80003f86:	35a080e7          	jalr	858(ra) # 800062dc <release>
 }
-    8000492c:	bfe1                	j	80004904 <pipeclose+0x46>
+    80003f8a:	bfe1                	j	80003f62 <pipeclose+0x46>
 
-000000008000492e <pipewrite>:
+0000000080003f8c <pipewrite>:
 
 int
 pipewrite(struct pipe *pi, uint64 addr, int n)
 {
-    8000492e:	711d                	addi	sp,sp,-96
-    80004930:	ec86                	sd	ra,88(sp)
-    80004932:	e8a2                	sd	s0,80(sp)
-    80004934:	e4a6                	sd	s1,72(sp)
-    80004936:	e0ca                	sd	s2,64(sp)
-    80004938:	fc4e                	sd	s3,56(sp)
-    8000493a:	f852                	sd	s4,48(sp)
-    8000493c:	f456                	sd	s5,40(sp)
-    8000493e:	f05a                	sd	s6,32(sp)
-    80004940:	ec5e                	sd	s7,24(sp)
-    80004942:	e862                	sd	s8,16(sp)
-    80004944:	1080                	addi	s0,sp,96
-    80004946:	84aa                	mv	s1,a0
-    80004948:	8b2e                	mv	s6,a1
-    8000494a:	8ab2                	mv	s5,a2
-  int i;
-  char ch;
+    80003f8c:	711d                	addi	sp,sp,-96
+    80003f8e:	ec86                	sd	ra,88(sp)
+    80003f90:	e8a2                	sd	s0,80(sp)
+    80003f92:	e4a6                	sd	s1,72(sp)
+    80003f94:	e0ca                	sd	s2,64(sp)
+    80003f96:	fc4e                	sd	s3,56(sp)
+    80003f98:	f852                	sd	s4,48(sp)
+    80003f9a:	f456                	sd	s5,40(sp)
+    80003f9c:	f05a                	sd	s6,32(sp)
+    80003f9e:	ec5e                	sd	s7,24(sp)
+    80003fa0:	e862                	sd	s8,16(sp)
+    80003fa2:	1080                	addi	s0,sp,96
+    80003fa4:	84aa                	mv	s1,a0
+    80003fa6:	8aae                	mv	s5,a1
+    80003fa8:	8a32                	mv	s4,a2
+  int i = 0;
   struct proc *pr = myproc();
-    8000494c:	ffffd097          	auipc	ra,0xffffd
-    80004950:	080080e7          	jalr	128(ra) # 800019cc <myproc>
-    80004954:	892a                	mv	s2,a0
+    80003faa:	ffffd097          	auipc	ra,0xffffd
+    80003fae:	f94080e7          	jalr	-108(ra) # 80000f3e <myproc>
+    80003fb2:	89aa                	mv	s3,a0
 
   acquire(&pi->lock);
-    80004956:	8526                	mv	a0,s1
-    80004958:	ffffc097          	auipc	ra,0xffffc
-    8000495c:	2a8080e7          	jalr	680(ra) # 80000c00 <acquire>
-  for(i = 0; i < n; i++){
-    80004960:	09505863          	blez	s5,800049f0 <pipewrite+0xc2>
-    80004964:	4b81                	li	s7,0
-    while(pi->nwrite == pi->nread + PIPESIZE){  //DOC: pipewrite-full
-      if(pi->readopen == 0 || pr->killed){
-        release(&pi->lock);
-        return -1;
-      }
+    80003fb4:	8526                	mv	a0,s1
+    80003fb6:	00002097          	auipc	ra,0x2
+    80003fba:	272080e7          	jalr	626(ra) # 80006228 <acquire>
+  while(i < n){
+    80003fbe:	0b405363          	blez	s4,80004064 <pipewrite+0xd8>
+  int i = 0;
+    80003fc2:	4901                	li	s2,0
+    if(pi->nwrite == pi->nread + PIPESIZE){ //DOC: pipewrite-full
       wakeup(&pi->nread);
-    80004966:	21848a13          	addi	s4,s1,536
       sleep(&pi->nwrite, &pi->lock);
-    8000496a:	21c48993          	addi	s3,s1,540
-    }
-    if(copyin(pr->pagetable, &ch, addr + i, 1) == -1)
-    8000496e:	5c7d                	li	s8,-1
-    while(pi->nwrite == pi->nread + PIPESIZE){  //DOC: pipewrite-full
-    80004970:	2184a783          	lw	a5,536(s1)
-    80004974:	21c4a703          	lw	a4,540(s1)
-    80004978:	2007879b          	addiw	a5,a5,512
-    8000497c:	02f71b63          	bne	a4,a5,800049b2 <pipewrite+0x84>
-      if(pi->readopen == 0 || pr->killed){
-    80004980:	2204a783          	lw	a5,544(s1)
-    80004984:	c3d9                	beqz	a5,80004a0a <pipewrite+0xdc>
-    80004986:	03092783          	lw	a5,48(s2)
-    8000498a:	e3c1                	bnez	a5,80004a0a <pipewrite+0xdc>
+    } else {
+      char ch;
+      if(copyin(pr->pagetable, &ch, addr + i, 1) == -1)
+    80003fc4:	5b7d                	li	s6,-1
       wakeup(&pi->nread);
-    8000498c:	8552                	mv	a0,s4
-    8000498e:	ffffe097          	auipc	ra,0xffffe
-    80004992:	9d2080e7          	jalr	-1582(ra) # 80002360 <wakeup>
+    80003fc6:	21848c13          	addi	s8,s1,536
       sleep(&pi->nwrite, &pi->lock);
-    80004996:	85a6                	mv	a1,s1
-    80004998:	854e                	mv	a0,s3
-    8000499a:	ffffe097          	auipc	ra,0xffffe
-    8000499e:	846080e7          	jalr	-1978(ra) # 800021e0 <sleep>
-    while(pi->nwrite == pi->nread + PIPESIZE){  //DOC: pipewrite-full
-    800049a2:	2184a783          	lw	a5,536(s1)
-    800049a6:	21c4a703          	lw	a4,540(s1)
-    800049aa:	2007879b          	addiw	a5,a5,512
-    800049ae:	fcf709e3          	beq	a4,a5,80004980 <pipewrite+0x52>
-    if(copyin(pr->pagetable, &ch, addr + i, 1) == -1)
-    800049b2:	4685                	li	a3,1
-    800049b4:	865a                	mv	a2,s6
-    800049b6:	faf40593          	addi	a1,s0,-81
-    800049ba:	05093503          	ld	a0,80(s2)
-    800049be:	ffffd097          	auipc	ra,0xffffd
-    800049c2:	d90080e7          	jalr	-624(ra) # 8000174e <copyin>
-    800049c6:	03850663          	beq	a0,s8,800049f2 <pipewrite+0xc4>
-      break;
-    pi->data[pi->nwrite++ % PIPESIZE] = ch;
-    800049ca:	21c4a783          	lw	a5,540(s1)
-    800049ce:	0017871b          	addiw	a4,a5,1
-    800049d2:	20e4ae23          	sw	a4,540(s1)
-    800049d6:	1ff7f793          	andi	a5,a5,511
-    800049da:	97a6                	add	a5,a5,s1
-    800049dc:	faf44703          	lbu	a4,-81(s0)
-    800049e0:	00e78c23          	sb	a4,24(a5)
-  for(i = 0; i < n; i++){
-    800049e4:	2b85                	addiw	s7,s7,1
-    800049e6:	0b05                	addi	s6,s6,1
-    800049e8:	f97a94e3          	bne	s5,s7,80004970 <pipewrite+0x42>
-    800049ec:	8bd6                	mv	s7,s5
-    800049ee:	a011                	j	800049f2 <pipewrite+0xc4>
-    800049f0:	4b81                	li	s7,0
+    80003fca:	21c48b93          	addi	s7,s1,540
+    80003fce:	a089                	j	80004010 <pipewrite+0x84>
+      release(&pi->lock);
+    80003fd0:	8526                	mv	a0,s1
+    80003fd2:	00002097          	auipc	ra,0x2
+    80003fd6:	30a080e7          	jalr	778(ra) # 800062dc <release>
+      return -1;
+    80003fda:	597d                	li	s2,-1
   }
   wakeup(&pi->nread);
-    800049f2:	21848513          	addi	a0,s1,536
-    800049f6:	ffffe097          	auipc	ra,0xffffe
-    800049fa:	96a080e7          	jalr	-1686(ra) # 80002360 <wakeup>
   release(&pi->lock);
-    800049fe:	8526                	mv	a0,s1
-    80004a00:	ffffc097          	auipc	ra,0xffffc
-    80004a04:	2b4080e7          	jalr	692(ra) # 80000cb4 <release>
+
   return i;
-    80004a08:	a039                	j	80004a16 <pipewrite+0xe8>
-        release(&pi->lock);
-    80004a0a:	8526                	mv	a0,s1
-    80004a0c:	ffffc097          	auipc	ra,0xffffc
-    80004a10:	2a8080e7          	jalr	680(ra) # 80000cb4 <release>
-        return -1;
-    80004a14:	5bfd                	li	s7,-1
 }
-    80004a16:	855e                	mv	a0,s7
-    80004a18:	60e6                	ld	ra,88(sp)
-    80004a1a:	6446                	ld	s0,80(sp)
-    80004a1c:	64a6                	ld	s1,72(sp)
-    80004a1e:	6906                	ld	s2,64(sp)
-    80004a20:	79e2                	ld	s3,56(sp)
-    80004a22:	7a42                	ld	s4,48(sp)
-    80004a24:	7aa2                	ld	s5,40(sp)
-    80004a26:	7b02                	ld	s6,32(sp)
-    80004a28:	6be2                	ld	s7,24(sp)
-    80004a2a:	6c42                	ld	s8,16(sp)
-    80004a2c:	6125                	addi	sp,sp,96
-    80004a2e:	8082                	ret
+    80003fdc:	854a                	mv	a0,s2
+    80003fde:	60e6                	ld	ra,88(sp)
+    80003fe0:	6446                	ld	s0,80(sp)
+    80003fe2:	64a6                	ld	s1,72(sp)
+    80003fe4:	6906                	ld	s2,64(sp)
+    80003fe6:	79e2                	ld	s3,56(sp)
+    80003fe8:	7a42                	ld	s4,48(sp)
+    80003fea:	7aa2                	ld	s5,40(sp)
+    80003fec:	7b02                	ld	s6,32(sp)
+    80003fee:	6be2                	ld	s7,24(sp)
+    80003ff0:	6c42                	ld	s8,16(sp)
+    80003ff2:	6125                	addi	sp,sp,96
+    80003ff4:	8082                	ret
+      wakeup(&pi->nread);
+    80003ff6:	8562                	mv	a0,s8
+    80003ff8:	ffffd097          	auipc	ra,0xffffd
+    80003ffc:	79e080e7          	jalr	1950(ra) # 80001796 <wakeup>
+      sleep(&pi->nwrite, &pi->lock);
+    80004000:	85a6                	mv	a1,s1
+    80004002:	855e                	mv	a0,s7
+    80004004:	ffffd097          	auipc	ra,0xffffd
+    80004008:	606080e7          	jalr	1542(ra) # 8000160a <sleep>
+  while(i < n){
+    8000400c:	05495d63          	bge	s2,s4,80004066 <pipewrite+0xda>
+    if(pi->readopen == 0 || pr->killed){
+    80004010:	2204a783          	lw	a5,544(s1)
+    80004014:	dfd5                	beqz	a5,80003fd0 <pipewrite+0x44>
+    80004016:	0289a783          	lw	a5,40(s3)
+    8000401a:	fbdd                	bnez	a5,80003fd0 <pipewrite+0x44>
+    if(pi->nwrite == pi->nread + PIPESIZE){ //DOC: pipewrite-full
+    8000401c:	2184a783          	lw	a5,536(s1)
+    80004020:	21c4a703          	lw	a4,540(s1)
+    80004024:	2007879b          	addiw	a5,a5,512
+    80004028:	fcf707e3          	beq	a4,a5,80003ff6 <pipewrite+0x6a>
+      if(copyin(pr->pagetable, &ch, addr + i, 1) == -1)
+    8000402c:	4685                	li	a3,1
+    8000402e:	01590633          	add	a2,s2,s5
+    80004032:	faf40593          	addi	a1,s0,-81
+    80004036:	0509b503          	ld	a0,80(s3)
+    8000403a:	ffffd097          	auipc	ra,0xffffd
+    8000403e:	c54080e7          	jalr	-940(ra) # 80000c8e <copyin>
+    80004042:	03650263          	beq	a0,s6,80004066 <pipewrite+0xda>
+      pi->data[pi->nwrite++ % PIPESIZE] = ch;
+    80004046:	21c4a783          	lw	a5,540(s1)
+    8000404a:	0017871b          	addiw	a4,a5,1
+    8000404e:	20e4ae23          	sw	a4,540(s1)
+    80004052:	1ff7f793          	andi	a5,a5,511
+    80004056:	97a6                	add	a5,a5,s1
+    80004058:	faf44703          	lbu	a4,-81(s0)
+    8000405c:	00e78c23          	sb	a4,24(a5)
+      i++;
+    80004060:	2905                	addiw	s2,s2,1
+    80004062:	b76d                	j	8000400c <pipewrite+0x80>
+  int i = 0;
+    80004064:	4901                	li	s2,0
+  wakeup(&pi->nread);
+    80004066:	21848513          	addi	a0,s1,536
+    8000406a:	ffffd097          	auipc	ra,0xffffd
+    8000406e:	72c080e7          	jalr	1836(ra) # 80001796 <wakeup>
+  release(&pi->lock);
+    80004072:	8526                	mv	a0,s1
+    80004074:	00002097          	auipc	ra,0x2
+    80004078:	268080e7          	jalr	616(ra) # 800062dc <release>
+  return i;
+    8000407c:	b785                	j	80003fdc <pipewrite+0x50>
 
-0000000080004a30 <piperead>:
+000000008000407e <piperead>:
 
 int
 piperead(struct pipe *pi, uint64 addr, int n)
 {
-    80004a30:	715d                	addi	sp,sp,-80
-    80004a32:	e486                	sd	ra,72(sp)
-    80004a34:	e0a2                	sd	s0,64(sp)
-    80004a36:	fc26                	sd	s1,56(sp)
-    80004a38:	f84a                	sd	s2,48(sp)
-    80004a3a:	f44e                	sd	s3,40(sp)
-    80004a3c:	f052                	sd	s4,32(sp)
-    80004a3e:	ec56                	sd	s5,24(sp)
-    80004a40:	e85a                	sd	s6,16(sp)
-    80004a42:	0880                	addi	s0,sp,80
-    80004a44:	84aa                	mv	s1,a0
-    80004a46:	892e                	mv	s2,a1
-    80004a48:	8ab2                	mv	s5,a2
+    8000407e:	715d                	addi	sp,sp,-80
+    80004080:	e486                	sd	ra,72(sp)
+    80004082:	e0a2                	sd	s0,64(sp)
+    80004084:	fc26                	sd	s1,56(sp)
+    80004086:	f84a                	sd	s2,48(sp)
+    80004088:	f44e                	sd	s3,40(sp)
+    8000408a:	f052                	sd	s4,32(sp)
+    8000408c:	ec56                	sd	s5,24(sp)
+    8000408e:	e85a                	sd	s6,16(sp)
+    80004090:	0880                	addi	s0,sp,80
+    80004092:	84aa                	mv	s1,a0
+    80004094:	892e                	mv	s2,a1
+    80004096:	8ab2                	mv	s5,a2
   int i;
   struct proc *pr = myproc();
-    80004a4a:	ffffd097          	auipc	ra,0xffffd
-    80004a4e:	f82080e7          	jalr	-126(ra) # 800019cc <myproc>
-    80004a52:	8a2a                	mv	s4,a0
+    80004098:	ffffd097          	auipc	ra,0xffffd
+    8000409c:	ea6080e7          	jalr	-346(ra) # 80000f3e <myproc>
+    800040a0:	8a2a                	mv	s4,a0
   char ch;
 
   acquire(&pi->lock);
-    80004a54:	8526                	mv	a0,s1
-    80004a56:	ffffc097          	auipc	ra,0xffffc
-    80004a5a:	1aa080e7          	jalr	426(ra) # 80000c00 <acquire>
+    800040a2:	8526                	mv	a0,s1
+    800040a4:	00002097          	auipc	ra,0x2
+    800040a8:	184080e7          	jalr	388(ra) # 80006228 <acquire>
   while(pi->nread == pi->nwrite && pi->writeopen){  //DOC: pipe-empty
-    80004a5e:	2184a703          	lw	a4,536(s1)
-    80004a62:	21c4a783          	lw	a5,540(s1)
+    800040ac:	2184a703          	lw	a4,536(s1)
+    800040b0:	21c4a783          	lw	a5,540(s1)
     if(pr->killed){
       release(&pi->lock);
       return -1;
     }
     sleep(&pi->nread, &pi->lock); //DOC: piperead-sleep
-    80004a66:	21848993          	addi	s3,s1,536
+    800040b4:	21848993          	addi	s3,s1,536
   while(pi->nread == pi->nwrite && pi->writeopen){  //DOC: pipe-empty
-    80004a6a:	02f71463          	bne	a4,a5,80004a92 <piperead+0x62>
-    80004a6e:	2244a783          	lw	a5,548(s1)
-    80004a72:	c385                	beqz	a5,80004a92 <piperead+0x62>
+    800040b8:	02f71463          	bne	a4,a5,800040e0 <piperead+0x62>
+    800040bc:	2244a783          	lw	a5,548(s1)
+    800040c0:	c385                	beqz	a5,800040e0 <piperead+0x62>
     if(pr->killed){
-    80004a74:	030a2783          	lw	a5,48(s4)
-    80004a78:	ebc9                	bnez	a5,80004b0a <piperead+0xda>
+    800040c2:	028a2783          	lw	a5,40(s4)
+    800040c6:	ebc9                	bnez	a5,80004158 <piperead+0xda>
     sleep(&pi->nread, &pi->lock); //DOC: piperead-sleep
-    80004a7a:	85a6                	mv	a1,s1
-    80004a7c:	854e                	mv	a0,s3
-    80004a7e:	ffffd097          	auipc	ra,0xffffd
-    80004a82:	762080e7          	jalr	1890(ra) # 800021e0 <sleep>
+    800040c8:	85a6                	mv	a1,s1
+    800040ca:	854e                	mv	a0,s3
+    800040cc:	ffffd097          	auipc	ra,0xffffd
+    800040d0:	53e080e7          	jalr	1342(ra) # 8000160a <sleep>
   while(pi->nread == pi->nwrite && pi->writeopen){  //DOC: pipe-empty
-    80004a86:	2184a703          	lw	a4,536(s1)
-    80004a8a:	21c4a783          	lw	a5,540(s1)
-    80004a8e:	fef700e3          	beq	a4,a5,80004a6e <piperead+0x3e>
+    800040d4:	2184a703          	lw	a4,536(s1)
+    800040d8:	21c4a783          	lw	a5,540(s1)
+    800040dc:	fef700e3          	beq	a4,a5,800040bc <piperead+0x3e>
   }
   for(i = 0; i < n; i++){  //DOC: piperead-copy
-    80004a92:	4981                	li	s3,0
+    800040e0:	4981                	li	s3,0
     if(pi->nread == pi->nwrite)
       break;
     ch = pi->data[pi->nread++ % PIPESIZE];
     if(copyout(pr->pagetable, addr + i, &ch, 1) == -1)
-    80004a94:	5b7d                	li	s6,-1
+    800040e2:	5b7d                	li	s6,-1
   for(i = 0; i < n; i++){  //DOC: piperead-copy
-    80004a96:	05505463          	blez	s5,80004ade <piperead+0xae>
+    800040e4:	05505463          	blez	s5,8000412c <piperead+0xae>
     if(pi->nread == pi->nwrite)
-    80004a9a:	2184a783          	lw	a5,536(s1)
-    80004a9e:	21c4a703          	lw	a4,540(s1)
-    80004aa2:	02f70e63          	beq	a4,a5,80004ade <piperead+0xae>
+    800040e8:	2184a783          	lw	a5,536(s1)
+    800040ec:	21c4a703          	lw	a4,540(s1)
+    800040f0:	02f70e63          	beq	a4,a5,8000412c <piperead+0xae>
     ch = pi->data[pi->nread++ % PIPESIZE];
-    80004aa6:	0017871b          	addiw	a4,a5,1
-    80004aaa:	20e4ac23          	sw	a4,536(s1)
-    80004aae:	1ff7f793          	andi	a5,a5,511
-    80004ab2:	97a6                	add	a5,a5,s1
-    80004ab4:	0187c783          	lbu	a5,24(a5)
-    80004ab8:	faf40fa3          	sb	a5,-65(s0)
+    800040f4:	0017871b          	addiw	a4,a5,1
+    800040f8:	20e4ac23          	sw	a4,536(s1)
+    800040fc:	1ff7f793          	andi	a5,a5,511
+    80004100:	97a6                	add	a5,a5,s1
+    80004102:	0187c783          	lbu	a5,24(a5)
+    80004106:	faf40fa3          	sb	a5,-65(s0)
     if(copyout(pr->pagetable, addr + i, &ch, 1) == -1)
-    80004abc:	4685                	li	a3,1
-    80004abe:	fbf40613          	addi	a2,s0,-65
-    80004ac2:	85ca                	mv	a1,s2
-    80004ac4:	050a3503          	ld	a0,80(s4)
-    80004ac8:	ffffd097          	auipc	ra,0xffffd
-    80004acc:	bfa080e7          	jalr	-1030(ra) # 800016c2 <copyout>
-    80004ad0:	01650763          	beq	a0,s6,80004ade <piperead+0xae>
+    8000410a:	4685                	li	a3,1
+    8000410c:	fbf40613          	addi	a2,s0,-65
+    80004110:	85ca                	mv	a1,s2
+    80004112:	050a3503          	ld	a0,80(s4)
+    80004116:	ffffd097          	auipc	ra,0xffffd
+    8000411a:	aec080e7          	jalr	-1300(ra) # 80000c02 <copyout>
+    8000411e:	01650763          	beq	a0,s6,8000412c <piperead+0xae>
   for(i = 0; i < n; i++){  //DOC: piperead-copy
-    80004ad4:	2985                	addiw	s3,s3,1
-    80004ad6:	0905                	addi	s2,s2,1
-    80004ad8:	fd3a91e3          	bne	s5,s3,80004a9a <piperead+0x6a>
-    80004adc:	89d6                	mv	s3,s5
+    80004122:	2985                	addiw	s3,s3,1
+    80004124:	0905                	addi	s2,s2,1
+    80004126:	fd3a91e3          	bne	s5,s3,800040e8 <piperead+0x6a>
+    8000412a:	89d6                	mv	s3,s5
       break;
   }
   wakeup(&pi->nwrite);  //DOC: piperead-wakeup
-    80004ade:	21c48513          	addi	a0,s1,540
-    80004ae2:	ffffe097          	auipc	ra,0xffffe
-    80004ae6:	87e080e7          	jalr	-1922(ra) # 80002360 <wakeup>
+    8000412c:	21c48513          	addi	a0,s1,540
+    80004130:	ffffd097          	auipc	ra,0xffffd
+    80004134:	666080e7          	jalr	1638(ra) # 80001796 <wakeup>
   release(&pi->lock);
-    80004aea:	8526                	mv	a0,s1
-    80004aec:	ffffc097          	auipc	ra,0xffffc
-    80004af0:	1c8080e7          	jalr	456(ra) # 80000cb4 <release>
+    80004138:	8526                	mv	a0,s1
+    8000413a:	00002097          	auipc	ra,0x2
+    8000413e:	1a2080e7          	jalr	418(ra) # 800062dc <release>
   return i;
 }
-    80004af4:	854e                	mv	a0,s3
-    80004af6:	60a6                	ld	ra,72(sp)
-    80004af8:	6406                	ld	s0,64(sp)
-    80004afa:	74e2                	ld	s1,56(sp)
-    80004afc:	7942                	ld	s2,48(sp)
-    80004afe:	79a2                	ld	s3,40(sp)
-    80004b00:	7a02                	ld	s4,32(sp)
-    80004b02:	6ae2                	ld	s5,24(sp)
-    80004b04:	6b42                	ld	s6,16(sp)
-    80004b06:	6161                	addi	sp,sp,80
-    80004b08:	8082                	ret
+    80004142:	854e                	mv	a0,s3
+    80004144:	60a6                	ld	ra,72(sp)
+    80004146:	6406                	ld	s0,64(sp)
+    80004148:	74e2                	ld	s1,56(sp)
+    8000414a:	7942                	ld	s2,48(sp)
+    8000414c:	79a2                	ld	s3,40(sp)
+    8000414e:	7a02                	ld	s4,32(sp)
+    80004150:	6ae2                	ld	s5,24(sp)
+    80004152:	6b42                	ld	s6,16(sp)
+    80004154:	6161                	addi	sp,sp,80
+    80004156:	8082                	ret
       release(&pi->lock);
-    80004b0a:	8526                	mv	a0,s1
-    80004b0c:	ffffc097          	auipc	ra,0xffffc
-    80004b10:	1a8080e7          	jalr	424(ra) # 80000cb4 <release>
+    80004158:	8526                	mv	a0,s1
+    8000415a:	00002097          	auipc	ra,0x2
+    8000415e:	182080e7          	jalr	386(ra) # 800062dc <release>
       return -1;
-    80004b14:	59fd                	li	s3,-1
-    80004b16:	bff9                	j	80004af4 <piperead+0xc4>
+    80004162:	59fd                	li	s3,-1
+    80004164:	bff9                	j	80004142 <piperead+0xc4>
 
-0000000080004b18 <exec>:
+0000000080004166 <exec>:
 
 static int loadseg(pde_t *pgdir, uint64 addr, struct inode *ip, uint offset, uint sz);
 
 int
 exec(char *path, char **argv)
 {
-    80004b18:	de010113          	addi	sp,sp,-544
-    80004b1c:	20113c23          	sd	ra,536(sp)
-    80004b20:	20813823          	sd	s0,528(sp)
-    80004b24:	20913423          	sd	s1,520(sp)
-    80004b28:	21213023          	sd	s2,512(sp)
-    80004b2c:	ffce                	sd	s3,504(sp)
-    80004b2e:	fbd2                	sd	s4,496(sp)
-    80004b30:	f7d6                	sd	s5,488(sp)
-    80004b32:	f3da                	sd	s6,480(sp)
-    80004b34:	efde                	sd	s7,472(sp)
-    80004b36:	ebe2                	sd	s8,464(sp)
-    80004b38:	e7e6                	sd	s9,456(sp)
-    80004b3a:	e3ea                	sd	s10,448(sp)
-    80004b3c:	ff6e                	sd	s11,440(sp)
-    80004b3e:	1400                	addi	s0,sp,544
-    80004b40:	892a                	mv	s2,a0
-    80004b42:	dea43423          	sd	a0,-536(s0)
-    80004b46:	deb43823          	sd	a1,-528(s0)
-  uint64 argc, sz = 0, sp, ustack[MAXARG+1], stackbase;
+    80004166:	de010113          	addi	sp,sp,-544
+    8000416a:	20113c23          	sd	ra,536(sp)
+    8000416e:	20813823          	sd	s0,528(sp)
+    80004172:	20913423          	sd	s1,520(sp)
+    80004176:	21213023          	sd	s2,512(sp)
+    8000417a:	ffce                	sd	s3,504(sp)
+    8000417c:	fbd2                	sd	s4,496(sp)
+    8000417e:	f7d6                	sd	s5,488(sp)
+    80004180:	f3da                	sd	s6,480(sp)
+    80004182:	efde                	sd	s7,472(sp)
+    80004184:	ebe2                	sd	s8,464(sp)
+    80004186:	e7e6                	sd	s9,456(sp)
+    80004188:	e3ea                	sd	s10,448(sp)
+    8000418a:	ff6e                	sd	s11,440(sp)
+    8000418c:	1400                	addi	s0,sp,544
+    8000418e:	892a                	mv	s2,a0
+    80004190:	dea43423          	sd	a0,-536(s0)
+    80004194:	deb43823          	sd	a1,-528(s0)
+  uint64 argc, sz = 0, sp, ustack[MAXARG], stackbase;
   struct elfhdr elf;
   struct inode *ip;
   struct proghdr ph;
   pagetable_t pagetable = 0, oldpagetable;
   struct proc *p = myproc();
-    80004b4a:	ffffd097          	auipc	ra,0xffffd
-    80004b4e:	e82080e7          	jalr	-382(ra) # 800019cc <myproc>
-    80004b52:	84aa                	mv	s1,a0
+    80004198:	ffffd097          	auipc	ra,0xffffd
+    8000419c:	da6080e7          	jalr	-602(ra) # 80000f3e <myproc>
+    800041a0:	84aa                	mv	s1,a0
 
   begin_op();
-    80004b54:	fffff097          	auipc	ra,0xfffff
-    80004b58:	46c080e7          	jalr	1132(ra) # 80003fc0 <begin_op>
+    800041a2:	fffff097          	auipc	ra,0xfffff
+    800041a6:	4a8080e7          	jalr	1192(ra) # 8000364a <begin_op>
 
   if((ip = namei(path)) == 0){
-    80004b5c:	854a                	mv	a0,s2
-    80004b5e:	fffff097          	auipc	ra,0xfffff
-    80004b62:	252080e7          	jalr	594(ra) # 80003db0 <namei>
-    80004b66:	c93d                	beqz	a0,80004bdc <exec+0xc4>
-    80004b68:	8aaa                	mv	s5,a0
+    800041aa:	854a                	mv	a0,s2
+    800041ac:	fffff097          	auipc	ra,0xfffff
+    800041b0:	27e080e7          	jalr	638(ra) # 8000342a <namei>
+    800041b4:	c93d                	beqz	a0,8000422a <exec+0xc4>
+    800041b6:	8aaa                	mv	s5,a0
     end_op();
     return -1;
   }
   ilock(ip);
-    80004b6a:	fffff097          	auipc	ra,0xfffff
-    80004b6e:	a90080e7          	jalr	-1392(ra) # 800035fa <ilock>
+    800041b8:	fffff097          	auipc	ra,0xfffff
+    800041bc:	ab6080e7          	jalr	-1354(ra) # 80002c6e <ilock>
 
   // Check ELF header
   if(readi(ip, 0, (uint64)&elf, 0, sizeof(elf)) != sizeof(elf))
-    80004b72:	04000713          	li	a4,64
-    80004b76:	4681                	li	a3,0
-    80004b78:	e4840613          	addi	a2,s0,-440
-    80004b7c:	4581                	li	a1,0
-    80004b7e:	8556                	mv	a0,s5
-    80004b80:	fffff097          	auipc	ra,0xfffff
-    80004b84:	d2e080e7          	jalr	-722(ra) # 800038ae <readi>
-    80004b88:	04000793          	li	a5,64
-    80004b8c:	00f51a63          	bne	a0,a5,80004ba0 <exec+0x88>
+    800041c0:	04000713          	li	a4,64
+    800041c4:	4681                	li	a3,0
+    800041c6:	e5040613          	addi	a2,s0,-432
+    800041ca:	4581                	li	a1,0
+    800041cc:	8556                	mv	a0,s5
+    800041ce:	fffff097          	auipc	ra,0xfffff
+    800041d2:	d54080e7          	jalr	-684(ra) # 80002f22 <readi>
+    800041d6:	04000793          	li	a5,64
+    800041da:	00f51a63          	bne	a0,a5,800041ee <exec+0x88>
     goto bad;
   if(elf.magic != ELF_MAGIC)
-    80004b90:	e4842703          	lw	a4,-440(s0)
-    80004b94:	464c47b7          	lui	a5,0x464c4
-    80004b98:	57f78793          	addi	a5,a5,1407 # 464c457f <_entry-0x39b3ba81>
-    80004b9c:	04f70663          	beq	a4,a5,80004be8 <exec+0xd0>
+    800041de:	e5042703          	lw	a4,-432(s0)
+    800041e2:	464c47b7          	lui	a5,0x464c4
+    800041e6:	57f78793          	addi	a5,a5,1407 # 464c457f <_entry-0x39b3ba81>
+    800041ea:	04f70663          	beq	a4,a5,80004236 <exec+0xd0>
 
  bad:
   if(pagetable)
     proc_freepagetable(pagetable, sz);
   if(ip){
     iunlockput(ip);
-    80004ba0:	8556                	mv	a0,s5
-    80004ba2:	fffff097          	auipc	ra,0xfffff
-    80004ba6:	cba080e7          	jalr	-838(ra) # 8000385c <iunlockput>
+    800041ee:	8556                	mv	a0,s5
+    800041f0:	fffff097          	auipc	ra,0xfffff
+    800041f4:	ce0080e7          	jalr	-800(ra) # 80002ed0 <iunlockput>
     end_op();
-    80004baa:	fffff097          	auipc	ra,0xfffff
-    80004bae:	494080e7          	jalr	1172(ra) # 8000403e <end_op>
+    800041f8:	fffff097          	auipc	ra,0xfffff
+    800041fc:	4d0080e7          	jalr	1232(ra) # 800036c8 <end_op>
   }
   return -1;
-    80004bb2:	557d                	li	a0,-1
+    80004200:	557d                	li	a0,-1
 }
-    80004bb4:	21813083          	ld	ra,536(sp)
-    80004bb8:	21013403          	ld	s0,528(sp)
-    80004bbc:	20813483          	ld	s1,520(sp)
-    80004bc0:	20013903          	ld	s2,512(sp)
-    80004bc4:	79fe                	ld	s3,504(sp)
-    80004bc6:	7a5e                	ld	s4,496(sp)
-    80004bc8:	7abe                	ld	s5,488(sp)
-    80004bca:	7b1e                	ld	s6,480(sp)
-    80004bcc:	6bfe                	ld	s7,472(sp)
-    80004bce:	6c5e                	ld	s8,464(sp)
-    80004bd0:	6cbe                	ld	s9,456(sp)
-    80004bd2:	6d1e                	ld	s10,448(sp)
-    80004bd4:	7dfa                	ld	s11,440(sp)
-    80004bd6:	22010113          	addi	sp,sp,544
-    80004bda:	8082                	ret
+    80004202:	21813083          	ld	ra,536(sp)
+    80004206:	21013403          	ld	s0,528(sp)
+    8000420a:	20813483          	ld	s1,520(sp)
+    8000420e:	20013903          	ld	s2,512(sp)
+    80004212:	79fe                	ld	s3,504(sp)
+    80004214:	7a5e                	ld	s4,496(sp)
+    80004216:	7abe                	ld	s5,488(sp)
+    80004218:	7b1e                	ld	s6,480(sp)
+    8000421a:	6bfe                	ld	s7,472(sp)
+    8000421c:	6c5e                	ld	s8,464(sp)
+    8000421e:	6cbe                	ld	s9,456(sp)
+    80004220:	6d1e                	ld	s10,448(sp)
+    80004222:	7dfa                	ld	s11,440(sp)
+    80004224:	22010113          	addi	sp,sp,544
+    80004228:	8082                	ret
     end_op();
-    80004bdc:	fffff097          	auipc	ra,0xfffff
-    80004be0:	462080e7          	jalr	1122(ra) # 8000403e <end_op>
+    8000422a:	fffff097          	auipc	ra,0xfffff
+    8000422e:	49e080e7          	jalr	1182(ra) # 800036c8 <end_op>
     return -1;
-    80004be4:	557d                	li	a0,-1
-    80004be6:	b7f9                	j	80004bb4 <exec+0x9c>
+    80004232:	557d                	li	a0,-1
+    80004234:	b7f9                	j	80004202 <exec+0x9c>
   if((pagetable = proc_pagetable(p)) == 0)
-    80004be8:	8526                	mv	a0,s1
-    80004bea:	ffffd097          	auipc	ra,0xffffd
-    80004bee:	ea6080e7          	jalr	-346(ra) # 80001a90 <proc_pagetable>
-    80004bf2:	8b2a                	mv	s6,a0
-    80004bf4:	d555                	beqz	a0,80004ba0 <exec+0x88>
+    80004236:	8526                	mv	a0,s1
+    80004238:	ffffd097          	auipc	ra,0xffffd
+    8000423c:	dca080e7          	jalr	-566(ra) # 80001002 <proc_pagetable>
+    80004240:	8b2a                	mv	s6,a0
+    80004242:	d555                	beqz	a0,800041ee <exec+0x88>
   for(i=0, off=elf.phoff; i<elf.phnum; i++, off+=sizeof(ph)){
-    80004bf6:	e6842783          	lw	a5,-408(s0)
-    80004bfa:	e8045703          	lhu	a4,-384(s0)
-    80004bfe:	c735                	beqz	a4,80004c6a <exec+0x152>
-  uint64 argc, sz = 0, sp, ustack[MAXARG+1], stackbase;
-    80004c00:	4481                	li	s1,0
+    80004244:	e7042783          	lw	a5,-400(s0)
+    80004248:	e8845703          	lhu	a4,-376(s0)
+    8000424c:	c735                	beqz	a4,800042b8 <exec+0x152>
+  uint64 argc, sz = 0, sp, ustack[MAXARG], stackbase;
+    8000424e:	4481                	li	s1,0
   for(i=0, off=elf.phoff; i<elf.phnum; i++, off+=sizeof(ph)){
-    80004c02:	e0043423          	sd	zero,-504(s0)
-    if(ph.vaddr % PGSIZE != 0)
-    80004c06:	6a05                	lui	s4,0x1
-    80004c08:	fffa0713          	addi	a4,s4,-1 # fff <_entry-0x7ffff001>
-    80004c0c:	dee43023          	sd	a4,-544(s0)
+    80004250:	e0043423          	sd	zero,-504(s0)
+    if((ph.vaddr % PGSIZE) != 0)
+    80004254:	6a05                	lui	s4,0x1
+    80004256:	fffa0713          	addi	a4,s4,-1 # fff <_entry-0x7ffff001>
+    8000425a:	dee43023          	sd	a4,-544(s0)
+loadseg(pagetable_t pagetable, uint64 va, struct inode *ip, uint offset, uint sz)
+{
+  uint i, n;
   uint64 pa;
 
-  if((va % PGSIZE) != 0)
-    panic("loadseg: va must be page aligned");
-
   for(i = 0; i < sz; i += PGSIZE){
-    80004c10:	6d85                	lui	s11,0x1
-    80004c12:	7d7d                	lui	s10,0xfffff
-    80004c14:	ac1d                	j	80004e4a <exec+0x332>
+    8000425e:	6d85                	lui	s11,0x1
+    80004260:	7d7d                	lui	s10,0xfffff
+    80004262:	a489                	j	800044a4 <exec+0x33e>
     pa = walkaddr(pagetable, va + i);
     if(pa == 0)
       panic("loadseg: address should exist");
-    80004c16:	00004517          	auipc	a0,0x4
-    80004c1a:	aa250513          	addi	a0,a0,-1374 # 800086b8 <syscalls+0x290>
-    80004c1e:	ffffc097          	auipc	ra,0xffffc
-    80004c22:	928080e7          	jalr	-1752(ra) # 80000546 <panic>
+    80004264:	00004517          	auipc	a0,0x4
+    80004268:	59c50513          	addi	a0,a0,1436 # 80008800 <syscall_name+0x280>
+    8000426c:	00002097          	auipc	ra,0x2
+    80004270:	a84080e7          	jalr	-1404(ra) # 80005cf0 <panic>
     if(sz - i < PGSIZE)
       n = sz - i;
     else
       n = PGSIZE;
     if(readi(ip, 0, (uint64)pa, offset+i, n) != n)
-    80004c26:	874a                	mv	a4,s2
-    80004c28:	009c86bb          	addw	a3,s9,s1
-    80004c2c:	4581                	li	a1,0
-    80004c2e:	8556                	mv	a0,s5
-    80004c30:	fffff097          	auipc	ra,0xfffff
-    80004c34:	c7e080e7          	jalr	-898(ra) # 800038ae <readi>
-    80004c38:	2501                	sext.w	a0,a0
-    80004c3a:	1aa91863          	bne	s2,a0,80004dea <exec+0x2d2>
+    80004274:	874a                	mv	a4,s2
+    80004276:	009c86bb          	addw	a3,s9,s1
+    8000427a:	4581                	li	a1,0
+    8000427c:	8556                	mv	a0,s5
+    8000427e:	fffff097          	auipc	ra,0xfffff
+    80004282:	ca4080e7          	jalr	-860(ra) # 80002f22 <readi>
+    80004286:	2501                	sext.w	a0,a0
+    80004288:	1aa91e63          	bne	s2,a0,80004444 <exec+0x2de>
   for(i = 0; i < sz; i += PGSIZE){
-    80004c3e:	009d84bb          	addw	s1,s11,s1
-    80004c42:	013d09bb          	addw	s3,s10,s3
-    80004c46:	1f74f263          	bgeu	s1,s7,80004e2a <exec+0x312>
+    8000428c:	009d84bb          	addw	s1,s11,s1
+    80004290:	013d09bb          	addw	s3,s10,s3
+    80004294:	1f74f863          	bgeu	s1,s7,80004484 <exec+0x31e>
     pa = walkaddr(pagetable, va + i);
-    80004c4a:	02049593          	slli	a1,s1,0x20
-    80004c4e:	9181                	srli	a1,a1,0x20
-    80004c50:	95e2                	add	a1,a1,s8
-    80004c52:	855a                	mv	a0,s6
-    80004c54:	ffffc097          	auipc	ra,0xffffc
-    80004c58:	436080e7          	jalr	1078(ra) # 8000108a <walkaddr>
-    80004c5c:	862a                	mv	a2,a0
+    80004298:	02049593          	slli	a1,s1,0x20
+    8000429c:	9181                	srli	a1,a1,0x20
+    8000429e:	95e2                	add	a1,a1,s8
+    800042a0:	855a                	mv	a0,s6
+    800042a2:	ffffc097          	auipc	ra,0xffffc
+    800042a6:	358080e7          	jalr	856(ra) # 800005fa <walkaddr>
+    800042aa:	862a                	mv	a2,a0
     if(pa == 0)
-    80004c5e:	dd45                	beqz	a0,80004c16 <exec+0xfe>
+    800042ac:	dd45                	beqz	a0,80004264 <exec+0xfe>
       n = PGSIZE;
-    80004c60:	8952                	mv	s2,s4
+    800042ae:	8952                	mv	s2,s4
     if(sz - i < PGSIZE)
-    80004c62:	fd49f2e3          	bgeu	s3,s4,80004c26 <exec+0x10e>
+    800042b0:	fd49f2e3          	bgeu	s3,s4,80004274 <exec+0x10e>
       n = sz - i;
-    80004c66:	894e                	mv	s2,s3
-    80004c68:	bf7d                	j	80004c26 <exec+0x10e>
-  uint64 argc, sz = 0, sp, ustack[MAXARG+1], stackbase;
-    80004c6a:	4481                	li	s1,0
+    800042b4:	894e                	mv	s2,s3
+    800042b6:	bf7d                	j	80004274 <exec+0x10e>
+  uint64 argc, sz = 0, sp, ustack[MAXARG], stackbase;
+    800042b8:	4481                	li	s1,0
   iunlockput(ip);
-    80004c6c:	8556                	mv	a0,s5
-    80004c6e:	fffff097          	auipc	ra,0xfffff
-    80004c72:	bee080e7          	jalr	-1042(ra) # 8000385c <iunlockput>
+    800042ba:	8556                	mv	a0,s5
+    800042bc:	fffff097          	auipc	ra,0xfffff
+    800042c0:	c14080e7          	jalr	-1004(ra) # 80002ed0 <iunlockput>
   end_op();
-    80004c76:	fffff097          	auipc	ra,0xfffff
-    80004c7a:	3c8080e7          	jalr	968(ra) # 8000403e <end_op>
+    800042c4:	fffff097          	auipc	ra,0xfffff
+    800042c8:	404080e7          	jalr	1028(ra) # 800036c8 <end_op>
   p = myproc();
-    80004c7e:	ffffd097          	auipc	ra,0xffffd
-    80004c82:	d4e080e7          	jalr	-690(ra) # 800019cc <myproc>
-    80004c86:	8baa                	mv	s7,a0
+    800042cc:	ffffd097          	auipc	ra,0xffffd
+    800042d0:	c72080e7          	jalr	-910(ra) # 80000f3e <myproc>
+    800042d4:	8baa                	mv	s7,a0
   uint64 oldsz = p->sz;
-    80004c88:	04853d03          	ld	s10,72(a0)
+    800042d6:	04853d03          	ld	s10,72(a0)
   sz = PGROUNDUP(sz);
-    80004c8c:	6785                	lui	a5,0x1
-    80004c8e:	17fd                	addi	a5,a5,-1
-    80004c90:	97a6                	add	a5,a5,s1
-    80004c92:	777d                	lui	a4,0xfffff
-    80004c94:	8ff9                	and	a5,a5,a4
-    80004c96:	def43c23          	sd	a5,-520(s0)
+    800042da:	6785                	lui	a5,0x1
+    800042dc:	17fd                	addi	a5,a5,-1
+    800042de:	97a6                	add	a5,a5,s1
+    800042e0:	777d                	lui	a4,0xfffff
+    800042e2:	8ff9                	and	a5,a5,a4
+    800042e4:	def43c23          	sd	a5,-520(s0)
   if((sz1 = uvmalloc(pagetable, sz, sz + 2*PGSIZE)) == 0)
-    80004c9a:	6609                	lui	a2,0x2
-    80004c9c:	963e                	add	a2,a2,a5
-    80004c9e:	85be                	mv	a1,a5
-    80004ca0:	855a                	mv	a0,s6
-    80004ca2:	ffffc097          	auipc	ra,0xffffc
-    80004ca6:	7cc080e7          	jalr	1996(ra) # 8000146e <uvmalloc>
-    80004caa:	8c2a                	mv	s8,a0
+    800042e8:	6609                	lui	a2,0x2
+    800042ea:	963e                	add	a2,a2,a5
+    800042ec:	85be                	mv	a1,a5
+    800042ee:	855a                	mv	a0,s6
+    800042f0:	ffffc097          	auipc	ra,0xffffc
+    800042f4:	6be080e7          	jalr	1726(ra) # 800009ae <uvmalloc>
+    800042f8:	8c2a                	mv	s8,a0
   ip = 0;
-    80004cac:	4a81                	li	s5,0
+    800042fa:	4a81                	li	s5,0
   if((sz1 = uvmalloc(pagetable, sz, sz + 2*PGSIZE)) == 0)
-    80004cae:	12050e63          	beqz	a0,80004dea <exec+0x2d2>
+    800042fc:	14050463          	beqz	a0,80004444 <exec+0x2de>
   uvmclear(pagetable, sz-2*PGSIZE);
-    80004cb2:	75f9                	lui	a1,0xffffe
-    80004cb4:	95aa                	add	a1,a1,a0
-    80004cb6:	855a                	mv	a0,s6
-    80004cb8:	ffffd097          	auipc	ra,0xffffd
-    80004cbc:	9d8080e7          	jalr	-1576(ra) # 80001690 <uvmclear>
+    80004300:	75f9                	lui	a1,0xffffe
+    80004302:	95aa                	add	a1,a1,a0
+    80004304:	855a                	mv	a0,s6
+    80004306:	ffffd097          	auipc	ra,0xffffd
+    8000430a:	8ca080e7          	jalr	-1846(ra) # 80000bd0 <uvmclear>
   stackbase = sp - PGSIZE;
-    80004cc0:	7afd                	lui	s5,0xfffff
-    80004cc2:	9ae2                	add	s5,s5,s8
+    8000430e:	7afd                	lui	s5,0xfffff
+    80004310:	9ae2                	add	s5,s5,s8
   for(argc = 0; argv[argc]; argc++) {
-    80004cc4:	df043783          	ld	a5,-528(s0)
-    80004cc8:	6388                	ld	a0,0(a5)
-    80004cca:	c925                	beqz	a0,80004d3a <exec+0x222>
-    80004ccc:	e8840993          	addi	s3,s0,-376
-    80004cd0:	f8840c93          	addi	s9,s0,-120
+    80004312:	df043783          	ld	a5,-528(s0)
+    80004316:	6388                	ld	a0,0(a5)
+    80004318:	c925                	beqz	a0,80004388 <exec+0x222>
+    8000431a:	e9040993          	addi	s3,s0,-368
+    8000431e:	f9040c93          	addi	s9,s0,-112
   sp = sz;
-    80004cd4:	8962                	mv	s2,s8
+    80004322:	8962                	mv	s2,s8
   for(argc = 0; argv[argc]; argc++) {
-    80004cd6:	4481                	li	s1,0
+    80004324:	4481                	li	s1,0
     sp -= strlen(argv[argc]) + 1;
-    80004cd8:	ffffc097          	auipc	ra,0xffffc
-    80004cdc:	1a8080e7          	jalr	424(ra) # 80000e80 <strlen>
-    80004ce0:	0015079b          	addiw	a5,a0,1
-    80004ce4:	40f907b3          	sub	a5,s2,a5
+    80004326:	ffffc097          	auipc	ra,0xffffc
+    8000432a:	ff4080e7          	jalr	-12(ra) # 8000031a <strlen>
+    8000432e:	0015079b          	addiw	a5,a0,1
+    80004332:	40f907b3          	sub	a5,s2,a5
     sp -= sp % 16; // riscv sp must be 16-byte aligned
-    80004ce8:	ff07f913          	andi	s2,a5,-16
+    80004336:	ff07f913          	andi	s2,a5,-16
     if(sp < stackbase)
-    80004cec:	13596363          	bltu	s2,s5,80004e12 <exec+0x2fa>
+    8000433a:	13596963          	bltu	s2,s5,8000446c <exec+0x306>
     if(copyout(pagetable, sp, argv[argc], strlen(argv[argc]) + 1) < 0)
-    80004cf0:	df043d83          	ld	s11,-528(s0)
-    80004cf4:	000dba03          	ld	s4,0(s11) # 1000 <_entry-0x7ffff000>
-    80004cf8:	8552                	mv	a0,s4
-    80004cfa:	ffffc097          	auipc	ra,0xffffc
-    80004cfe:	186080e7          	jalr	390(ra) # 80000e80 <strlen>
-    80004d02:	0015069b          	addiw	a3,a0,1
-    80004d06:	8652                	mv	a2,s4
-    80004d08:	85ca                	mv	a1,s2
-    80004d0a:	855a                	mv	a0,s6
-    80004d0c:	ffffd097          	auipc	ra,0xffffd
-    80004d10:	9b6080e7          	jalr	-1610(ra) # 800016c2 <copyout>
-    80004d14:	10054363          	bltz	a0,80004e1a <exec+0x302>
+    8000433e:	df043d83          	ld	s11,-528(s0)
+    80004342:	000dba03          	ld	s4,0(s11) # 1000 <_entry-0x7ffff000>
+    80004346:	8552                	mv	a0,s4
+    80004348:	ffffc097          	auipc	ra,0xffffc
+    8000434c:	fd2080e7          	jalr	-46(ra) # 8000031a <strlen>
+    80004350:	0015069b          	addiw	a3,a0,1
+    80004354:	8652                	mv	a2,s4
+    80004356:	85ca                	mv	a1,s2
+    80004358:	855a                	mv	a0,s6
+    8000435a:	ffffd097          	auipc	ra,0xffffd
+    8000435e:	8a8080e7          	jalr	-1880(ra) # 80000c02 <copyout>
+    80004362:	10054963          	bltz	a0,80004474 <exec+0x30e>
     ustack[argc] = sp;
-    80004d18:	0129b023          	sd	s2,0(s3)
+    80004366:	0129b023          	sd	s2,0(s3)
   for(argc = 0; argv[argc]; argc++) {
-    80004d1c:	0485                	addi	s1,s1,1
-    80004d1e:	008d8793          	addi	a5,s11,8
-    80004d22:	def43823          	sd	a5,-528(s0)
-    80004d26:	008db503          	ld	a0,8(s11)
-    80004d2a:	c911                	beqz	a0,80004d3e <exec+0x226>
+    8000436a:	0485                	addi	s1,s1,1
+    8000436c:	008d8793          	addi	a5,s11,8
+    80004370:	def43823          	sd	a5,-528(s0)
+    80004374:	008db503          	ld	a0,8(s11)
+    80004378:	c911                	beqz	a0,8000438c <exec+0x226>
     if(argc >= MAXARG)
-    80004d2c:	09a1                	addi	s3,s3,8
-    80004d2e:	fb3c95e3          	bne	s9,s3,80004cd8 <exec+0x1c0>
+    8000437a:	09a1                	addi	s3,s3,8
+    8000437c:	fb3c95e3          	bne	s9,s3,80004326 <exec+0x1c0>
   sz = sz1;
-    80004d32:	df843c23          	sd	s8,-520(s0)
+    80004380:	df843c23          	sd	s8,-520(s0)
   ip = 0;
-    80004d36:	4a81                	li	s5,0
-    80004d38:	a84d                	j	80004dea <exec+0x2d2>
+    80004384:	4a81                	li	s5,0
+    80004386:	a87d                	j	80004444 <exec+0x2de>
   sp = sz;
-    80004d3a:	8962                	mv	s2,s8
+    80004388:	8962                	mv	s2,s8
   for(argc = 0; argv[argc]; argc++) {
-    80004d3c:	4481                	li	s1,0
+    8000438a:	4481                	li	s1,0
   ustack[argc] = 0;
-    80004d3e:	00349793          	slli	a5,s1,0x3
-    80004d42:	f9078793          	addi	a5,a5,-112 # f90 <_entry-0x7ffff070>
-    80004d46:	97a2                	add	a5,a5,s0
-    80004d48:	ee07bc23          	sd	zero,-264(a5)
+    8000438c:	00349793          	slli	a5,s1,0x3
+    80004390:	f9078793          	addi	a5,a5,-112 # f90 <_entry-0x7ffff070>
+    80004394:	97a2                	add	a5,a5,s0
+    80004396:	f007b023          	sd	zero,-256(a5)
   sp -= (argc+1) * sizeof(uint64);
-    80004d4c:	00148693          	addi	a3,s1,1
-    80004d50:	068e                	slli	a3,a3,0x3
-    80004d52:	40d90933          	sub	s2,s2,a3
+    8000439a:	00148693          	addi	a3,s1,1
+    8000439e:	068e                	slli	a3,a3,0x3
+    800043a0:	40d90933          	sub	s2,s2,a3
   sp -= sp % 16;
-    80004d56:	ff097913          	andi	s2,s2,-16
+    800043a4:	ff097913          	andi	s2,s2,-16
   if(sp < stackbase)
-    80004d5a:	01597663          	bgeu	s2,s5,80004d66 <exec+0x24e>
+    800043a8:	01597663          	bgeu	s2,s5,800043b4 <exec+0x24e>
   sz = sz1;
-    80004d5e:	df843c23          	sd	s8,-520(s0)
+    800043ac:	df843c23          	sd	s8,-520(s0)
   ip = 0;
-    80004d62:	4a81                	li	s5,0
-    80004d64:	a059                	j	80004dea <exec+0x2d2>
+    800043b0:	4a81                	li	s5,0
+    800043b2:	a849                	j	80004444 <exec+0x2de>
   if(copyout(pagetable, sp, (char *)ustack, (argc+1)*sizeof(uint64)) < 0)
-    80004d66:	e8840613          	addi	a2,s0,-376
-    80004d6a:	85ca                	mv	a1,s2
-    80004d6c:	855a                	mv	a0,s6
-    80004d6e:	ffffd097          	auipc	ra,0xffffd
-    80004d72:	954080e7          	jalr	-1708(ra) # 800016c2 <copyout>
-    80004d76:	0a054663          	bltz	a0,80004e22 <exec+0x30a>
+    800043b4:	e9040613          	addi	a2,s0,-368
+    800043b8:	85ca                	mv	a1,s2
+    800043ba:	855a                	mv	a0,s6
+    800043bc:	ffffd097          	auipc	ra,0xffffd
+    800043c0:	846080e7          	jalr	-1978(ra) # 80000c02 <copyout>
+    800043c4:	0a054c63          	bltz	a0,8000447c <exec+0x316>
   p->trapframe->a1 = sp;
-    80004d7a:	058bb783          	ld	a5,88(s7)
-    80004d7e:	0727bc23          	sd	s2,120(a5)
+    800043c8:	058bb783          	ld	a5,88(s7)
+    800043cc:	0727bc23          	sd	s2,120(a5)
   for(last=s=path; *s; s++)
-    80004d82:	de843783          	ld	a5,-536(s0)
-    80004d86:	0007c703          	lbu	a4,0(a5)
-    80004d8a:	cf11                	beqz	a4,80004da6 <exec+0x28e>
-    80004d8c:	0785                	addi	a5,a5,1
+    800043d0:	de843783          	ld	a5,-536(s0)
+    800043d4:	0007c703          	lbu	a4,0(a5)
+    800043d8:	cf11                	beqz	a4,800043f4 <exec+0x28e>
+    800043da:	0785                	addi	a5,a5,1
     if(*s == '/')
-    80004d8e:	02f00693          	li	a3,47
-    80004d92:	a039                	j	80004da0 <exec+0x288>
+    800043dc:	02f00693          	li	a3,47
+    800043e0:	a039                	j	800043ee <exec+0x288>
       last = s+1;
-    80004d94:	def43423          	sd	a5,-536(s0)
+    800043e2:	def43423          	sd	a5,-536(s0)
   for(last=s=path; *s; s++)
-    80004d98:	0785                	addi	a5,a5,1
-    80004d9a:	fff7c703          	lbu	a4,-1(a5)
-    80004d9e:	c701                	beqz	a4,80004da6 <exec+0x28e>
+    800043e6:	0785                	addi	a5,a5,1
+    800043e8:	fff7c703          	lbu	a4,-1(a5)
+    800043ec:	c701                	beqz	a4,800043f4 <exec+0x28e>
     if(*s == '/')
-    80004da0:	fed71ce3          	bne	a4,a3,80004d98 <exec+0x280>
-    80004da4:	bfc5                	j	80004d94 <exec+0x27c>
+    800043ee:	fed71ce3          	bne	a4,a3,800043e6 <exec+0x280>
+    800043f2:	bfc5                	j	800043e2 <exec+0x27c>
   safestrcpy(p->name, last, sizeof(p->name));
-    80004da6:	4641                	li	a2,16
-    80004da8:	de843583          	ld	a1,-536(s0)
-    80004dac:	158b8513          	addi	a0,s7,344
-    80004db0:	ffffc097          	auipc	ra,0xffffc
-    80004db4:	09e080e7          	jalr	158(ra) # 80000e4e <safestrcpy>
+    800043f4:	4641                	li	a2,16
+    800043f6:	de843583          	ld	a1,-536(s0)
+    800043fa:	158b8513          	addi	a0,s7,344
+    800043fe:	ffffc097          	auipc	ra,0xffffc
+    80004402:	eea080e7          	jalr	-278(ra) # 800002e8 <safestrcpy>
   oldpagetable = p->pagetable;
-    80004db8:	050bb503          	ld	a0,80(s7)
+    80004406:	050bb503          	ld	a0,80(s7)
   p->pagetable = pagetable;
-    80004dbc:	056bb823          	sd	s6,80(s7)
+    8000440a:	056bb823          	sd	s6,80(s7)
   p->sz = sz;
-    80004dc0:	058bb423          	sd	s8,72(s7)
+    8000440e:	058bb423          	sd	s8,72(s7)
   p->trapframe->epc = elf.entry;  // initial program counter = main
-    80004dc4:	058bb783          	ld	a5,88(s7)
-    80004dc8:	e6043703          	ld	a4,-416(s0)
-    80004dcc:	ef98                	sd	a4,24(a5)
+    80004412:	058bb783          	ld	a5,88(s7)
+    80004416:	e6843703          	ld	a4,-408(s0)
+    8000441a:	ef98                	sd	a4,24(a5)
   p->trapframe->sp = sp; // initial stack pointer
-    80004dce:	058bb783          	ld	a5,88(s7)
-    80004dd2:	0327b823          	sd	s2,48(a5)
+    8000441c:	058bb783          	ld	a5,88(s7)
+    80004420:	0327b823          	sd	s2,48(a5)
   proc_freepagetable(oldpagetable, oldsz);
-    80004dd6:	85ea                	mv	a1,s10
-    80004dd8:	ffffd097          	auipc	ra,0xffffd
-    80004ddc:	d54080e7          	jalr	-684(ra) # 80001b2c <proc_freepagetable>
+    80004424:	85ea                	mv	a1,s10
+    80004426:	ffffd097          	auipc	ra,0xffffd
+    8000442a:	c78080e7          	jalr	-904(ra) # 8000109e <proc_freepagetable>
+  vmprint(p->pagetable);
+    8000442e:	050bb503          	ld	a0,80(s7)
+    80004432:	ffffc097          	auipc	ra,0xffffc
+    80004436:	1ae080e7          	jalr	430(ra) # 800005e0 <vmprint>
   return argc; // this ends up in a0, the first argument to main(argc, argv)
-    80004de0:	0004851b          	sext.w	a0,s1
-    80004de4:	bbc1                	j	80004bb4 <exec+0x9c>
-    80004de6:	de943c23          	sd	s1,-520(s0)
+    8000443a:	0004851b          	sext.w	a0,s1
+    8000443e:	b3d1                	j	80004202 <exec+0x9c>
+    80004440:	de943c23          	sd	s1,-520(s0)
     proc_freepagetable(pagetable, sz);
-    80004dea:	df843583          	ld	a1,-520(s0)
-    80004dee:	855a                	mv	a0,s6
-    80004df0:	ffffd097          	auipc	ra,0xffffd
-    80004df4:	d3c080e7          	jalr	-708(ra) # 80001b2c <proc_freepagetable>
+    80004444:	df843583          	ld	a1,-520(s0)
+    80004448:	855a                	mv	a0,s6
+    8000444a:	ffffd097          	auipc	ra,0xffffd
+    8000444e:	c54080e7          	jalr	-940(ra) # 8000109e <proc_freepagetable>
   if(ip){
-    80004df8:	da0a94e3          	bnez	s5,80004ba0 <exec+0x88>
+    80004452:	d80a9ee3          	bnez	s5,800041ee <exec+0x88>
   return -1;
-    80004dfc:	557d                	li	a0,-1
-    80004dfe:	bb5d                	j	80004bb4 <exec+0x9c>
-    80004e00:	de943c23          	sd	s1,-520(s0)
-    80004e04:	b7dd                	j	80004dea <exec+0x2d2>
-    80004e06:	de943c23          	sd	s1,-520(s0)
-    80004e0a:	b7c5                	j	80004dea <exec+0x2d2>
-    80004e0c:	de943c23          	sd	s1,-520(s0)
-    80004e10:	bfe9                	j	80004dea <exec+0x2d2>
+    80004456:	557d                	li	a0,-1
+    80004458:	b36d                	j	80004202 <exec+0x9c>
+    8000445a:	de943c23          	sd	s1,-520(s0)
+    8000445e:	b7dd                	j	80004444 <exec+0x2de>
+    80004460:	de943c23          	sd	s1,-520(s0)
+    80004464:	b7c5                	j	80004444 <exec+0x2de>
+    80004466:	de943c23          	sd	s1,-520(s0)
+    8000446a:	bfe9                	j	80004444 <exec+0x2de>
   sz = sz1;
-    80004e12:	df843c23          	sd	s8,-520(s0)
+    8000446c:	df843c23          	sd	s8,-520(s0)
   ip = 0;
-    80004e16:	4a81                	li	s5,0
-    80004e18:	bfc9                	j	80004dea <exec+0x2d2>
+    80004470:	4a81                	li	s5,0
+    80004472:	bfc9                	j	80004444 <exec+0x2de>
   sz = sz1;
-    80004e1a:	df843c23          	sd	s8,-520(s0)
+    80004474:	df843c23          	sd	s8,-520(s0)
   ip = 0;
-    80004e1e:	4a81                	li	s5,0
-    80004e20:	b7e9                	j	80004dea <exec+0x2d2>
+    80004478:	4a81                	li	s5,0
+    8000447a:	b7e9                	j	80004444 <exec+0x2de>
   sz = sz1;
-    80004e22:	df843c23          	sd	s8,-520(s0)
+    8000447c:	df843c23          	sd	s8,-520(s0)
   ip = 0;
-    80004e26:	4a81                	li	s5,0
-    80004e28:	b7c9                	j	80004dea <exec+0x2d2>
+    80004480:	4a81                	li	s5,0
+    80004482:	b7c9                	j	80004444 <exec+0x2de>
     if((sz1 = uvmalloc(pagetable, sz, ph.vaddr + ph.memsz)) == 0)
-    80004e2a:	df843483          	ld	s1,-520(s0)
+    80004484:	df843483          	ld	s1,-520(s0)
   for(i=0, off=elf.phoff; i<elf.phnum; i++, off+=sizeof(ph)){
-    80004e2e:	e0843783          	ld	a5,-504(s0)
-    80004e32:	0017869b          	addiw	a3,a5,1
-    80004e36:	e0d43423          	sd	a3,-504(s0)
-    80004e3a:	e0043783          	ld	a5,-512(s0)
-    80004e3e:	0387879b          	addiw	a5,a5,56
-    80004e42:	e8045703          	lhu	a4,-384(s0)
-    80004e46:	e2e6d3e3          	bge	a3,a4,80004c6c <exec+0x154>
+    80004488:	e0843783          	ld	a5,-504(s0)
+    8000448c:	0017869b          	addiw	a3,a5,1
+    80004490:	e0d43423          	sd	a3,-504(s0)
+    80004494:	e0043783          	ld	a5,-512(s0)
+    80004498:	0387879b          	addiw	a5,a5,56
+    8000449c:	e8845703          	lhu	a4,-376(s0)
+    800044a0:	e0e6dde3          	bge	a3,a4,800042ba <exec+0x154>
     if(readi(ip, 0, (uint64)&ph, off, sizeof(ph)) != sizeof(ph))
-    80004e4a:	2781                	sext.w	a5,a5
-    80004e4c:	e0f43023          	sd	a5,-512(s0)
-    80004e50:	03800713          	li	a4,56
-    80004e54:	86be                	mv	a3,a5
-    80004e56:	e1040613          	addi	a2,s0,-496
-    80004e5a:	4581                	li	a1,0
-    80004e5c:	8556                	mv	a0,s5
-    80004e5e:	fffff097          	auipc	ra,0xfffff
-    80004e62:	a50080e7          	jalr	-1456(ra) # 800038ae <readi>
-    80004e66:	03800793          	li	a5,56
-    80004e6a:	f6f51ee3          	bne	a0,a5,80004de6 <exec+0x2ce>
+    800044a4:	2781                	sext.w	a5,a5
+    800044a6:	e0f43023          	sd	a5,-512(s0)
+    800044aa:	03800713          	li	a4,56
+    800044ae:	86be                	mv	a3,a5
+    800044b0:	e1840613          	addi	a2,s0,-488
+    800044b4:	4581                	li	a1,0
+    800044b6:	8556                	mv	a0,s5
+    800044b8:	fffff097          	auipc	ra,0xfffff
+    800044bc:	a6a080e7          	jalr	-1430(ra) # 80002f22 <readi>
+    800044c0:	03800793          	li	a5,56
+    800044c4:	f6f51ee3          	bne	a0,a5,80004440 <exec+0x2da>
     if(ph.type != ELF_PROG_LOAD)
-    80004e6e:	e1042783          	lw	a5,-496(s0)
-    80004e72:	4705                	li	a4,1
-    80004e74:	fae79de3          	bne	a5,a4,80004e2e <exec+0x316>
+    800044c8:	e1842783          	lw	a5,-488(s0)
+    800044cc:	4705                	li	a4,1
+    800044ce:	fae79de3          	bne	a5,a4,80004488 <exec+0x322>
     if(ph.memsz < ph.filesz)
-    80004e78:	e3843603          	ld	a2,-456(s0)
-    80004e7c:	e3043783          	ld	a5,-464(s0)
-    80004e80:	f8f660e3          	bltu	a2,a5,80004e00 <exec+0x2e8>
+    800044d2:	e4043603          	ld	a2,-448(s0)
+    800044d6:	e3843783          	ld	a5,-456(s0)
+    800044da:	f8f660e3          	bltu	a2,a5,8000445a <exec+0x2f4>
     if(ph.vaddr + ph.memsz < ph.vaddr)
-    80004e84:	e2043783          	ld	a5,-480(s0)
-    80004e88:	963e                	add	a2,a2,a5
-    80004e8a:	f6f66ee3          	bltu	a2,a5,80004e06 <exec+0x2ee>
+    800044de:	e2843783          	ld	a5,-472(s0)
+    800044e2:	963e                	add	a2,a2,a5
+    800044e4:	f6f66ee3          	bltu	a2,a5,80004460 <exec+0x2fa>
     if((sz1 = uvmalloc(pagetable, sz, ph.vaddr + ph.memsz)) == 0)
-    80004e8e:	85a6                	mv	a1,s1
-    80004e90:	855a                	mv	a0,s6
-    80004e92:	ffffc097          	auipc	ra,0xffffc
-    80004e96:	5dc080e7          	jalr	1500(ra) # 8000146e <uvmalloc>
-    80004e9a:	dea43c23          	sd	a0,-520(s0)
-    80004e9e:	d53d                	beqz	a0,80004e0c <exec+0x2f4>
-    if(ph.vaddr % PGSIZE != 0)
-    80004ea0:	e2043c03          	ld	s8,-480(s0)
-    80004ea4:	de043783          	ld	a5,-544(s0)
-    80004ea8:	00fc77b3          	and	a5,s8,a5
-    80004eac:	ff9d                	bnez	a5,80004dea <exec+0x2d2>
+    800044e8:	85a6                	mv	a1,s1
+    800044ea:	855a                	mv	a0,s6
+    800044ec:	ffffc097          	auipc	ra,0xffffc
+    800044f0:	4c2080e7          	jalr	1218(ra) # 800009ae <uvmalloc>
+    800044f4:	dea43c23          	sd	a0,-520(s0)
+    800044f8:	d53d                	beqz	a0,80004466 <exec+0x300>
+    if((ph.vaddr % PGSIZE) != 0)
+    800044fa:	e2843c03          	ld	s8,-472(s0)
+    800044fe:	de043783          	ld	a5,-544(s0)
+    80004502:	00fc77b3          	and	a5,s8,a5
+    80004506:	ff9d                	bnez	a5,80004444 <exec+0x2de>
     if(loadseg(pagetable, ph.vaddr, ip, ph.off, ph.filesz) < 0)
-    80004eae:	e1842c83          	lw	s9,-488(s0)
-    80004eb2:	e3042b83          	lw	s7,-464(s0)
+    80004508:	e2042c83          	lw	s9,-480(s0)
+    8000450c:	e3842b83          	lw	s7,-456(s0)
   for(i = 0; i < sz; i += PGSIZE){
-    80004eb6:	f60b8ae3          	beqz	s7,80004e2a <exec+0x312>
-    80004eba:	89de                	mv	s3,s7
-    80004ebc:	4481                	li	s1,0
-    80004ebe:	b371                	j	80004c4a <exec+0x132>
+    80004510:	f60b8ae3          	beqz	s7,80004484 <exec+0x31e>
+    80004514:	89de                	mv	s3,s7
+    80004516:	4481                	li	s1,0
+    80004518:	b341                	j	80004298 <exec+0x132>
 
-0000000080004ec0 <argfd>:
+000000008000451a <argfd>:
 
 // Fetch the nth word-sized system call argument as a file descriptor
 // and return both the descriptor and the corresponding struct file.
 static int
 argfd(int n, int *pfd, struct file **pf)
 {
-    80004ec0:	7179                	addi	sp,sp,-48
-    80004ec2:	f406                	sd	ra,40(sp)
-    80004ec4:	f022                	sd	s0,32(sp)
-    80004ec6:	ec26                	sd	s1,24(sp)
-    80004ec8:	e84a                	sd	s2,16(sp)
-    80004eca:	1800                	addi	s0,sp,48
-    80004ecc:	892e                	mv	s2,a1
-    80004ece:	84b2                	mv	s1,a2
+    8000451a:	7179                	addi	sp,sp,-48
+    8000451c:	f406                	sd	ra,40(sp)
+    8000451e:	f022                	sd	s0,32(sp)
+    80004520:	ec26                	sd	s1,24(sp)
+    80004522:	e84a                	sd	s2,16(sp)
+    80004524:	1800                	addi	s0,sp,48
+    80004526:	892e                	mv	s2,a1
+    80004528:	84b2                	mv	s1,a2
   int fd;
   struct file *f;
 
   if(argint(n, &fd) < 0)
-    80004ed0:	fdc40593          	addi	a1,s0,-36
-    80004ed4:	ffffe097          	auipc	ra,0xffffe
-    80004ed8:	bb4080e7          	jalr	-1100(ra) # 80002a88 <argint>
-    80004edc:	04054063          	bltz	a0,80004f1c <argfd+0x5c>
+    8000452a:	fdc40593          	addi	a1,s0,-36
+    8000452e:	ffffe097          	auipc	ra,0xffffe
+    80004532:	afc080e7          	jalr	-1284(ra) # 8000202a <argint>
+    80004536:	04054063          	bltz	a0,80004576 <argfd+0x5c>
     return -1;
   if(fd < 0 || fd >= NOFILE || (f=myproc()->ofile[fd]) == 0)
-    80004ee0:	fdc42703          	lw	a4,-36(s0)
-    80004ee4:	47bd                	li	a5,15
-    80004ee6:	02e7ed63          	bltu	a5,a4,80004f20 <argfd+0x60>
-    80004eea:	ffffd097          	auipc	ra,0xffffd
-    80004eee:	ae2080e7          	jalr	-1310(ra) # 800019cc <myproc>
-    80004ef2:	fdc42703          	lw	a4,-36(s0)
-    80004ef6:	01a70793          	addi	a5,a4,26 # fffffffffffff01a <end+0xffffffff7ffd901a>
-    80004efa:	078e                	slli	a5,a5,0x3
-    80004efc:	953e                	add	a0,a0,a5
-    80004efe:	611c                	ld	a5,0(a0)
-    80004f00:	c395                	beqz	a5,80004f24 <argfd+0x64>
+    8000453a:	fdc42703          	lw	a4,-36(s0)
+    8000453e:	47bd                	li	a5,15
+    80004540:	02e7ed63          	bltu	a5,a4,8000457a <argfd+0x60>
+    80004544:	ffffd097          	auipc	ra,0xffffd
+    80004548:	9fa080e7          	jalr	-1542(ra) # 80000f3e <myproc>
+    8000454c:	fdc42703          	lw	a4,-36(s0)
+    80004550:	01a70793          	addi	a5,a4,26 # fffffffffffff01a <end+0xffffffff7ffd8dda>
+    80004554:	078e                	slli	a5,a5,0x3
+    80004556:	953e                	add	a0,a0,a5
+    80004558:	611c                	ld	a5,0(a0)
+    8000455a:	c395                	beqz	a5,8000457e <argfd+0x64>
     return -1;
   if(pfd)
-    80004f02:	00090463          	beqz	s2,80004f0a <argfd+0x4a>
+    8000455c:	00090463          	beqz	s2,80004564 <argfd+0x4a>
     *pfd = fd;
-    80004f06:	00e92023          	sw	a4,0(s2)
+    80004560:	00e92023          	sw	a4,0(s2)
   if(pf)
     *pf = f;
   return 0;
-    80004f0a:	4501                	li	a0,0
+    80004564:	4501                	li	a0,0
   if(pf)
-    80004f0c:	c091                	beqz	s1,80004f10 <argfd+0x50>
+    80004566:	c091                	beqz	s1,8000456a <argfd+0x50>
     *pf = f;
-    80004f0e:	e09c                	sd	a5,0(s1)
+    80004568:	e09c                	sd	a5,0(s1)
 }
-    80004f10:	70a2                	ld	ra,40(sp)
-    80004f12:	7402                	ld	s0,32(sp)
-    80004f14:	64e2                	ld	s1,24(sp)
-    80004f16:	6942                	ld	s2,16(sp)
-    80004f18:	6145                	addi	sp,sp,48
-    80004f1a:	8082                	ret
-    return -1;
-    80004f1c:	557d                	li	a0,-1
-    80004f1e:	bfcd                	j	80004f10 <argfd+0x50>
-    return -1;
-    80004f20:	557d                	li	a0,-1
-    80004f22:	b7fd                	j	80004f10 <argfd+0x50>
-    80004f24:	557d                	li	a0,-1
-    80004f26:	b7ed                	j	80004f10 <argfd+0x50>
+    8000456a:	70a2                	ld	ra,40(sp)
+    8000456c:	7402                	ld	s0,32(sp)
+    8000456e:	64e2                	ld	s1,24(sp)
+    80004570:	6942                	ld	s2,16(sp)
+    80004572:	6145                	addi	sp,sp,48
+    80004574:	8082                	ret
+    return -1;
+    80004576:	557d                	li	a0,-1
+    80004578:	bfcd                	j	8000456a <argfd+0x50>
+    return -1;
+    8000457a:	557d                	li	a0,-1
+    8000457c:	b7fd                	j	8000456a <argfd+0x50>
+    8000457e:	557d                	li	a0,-1
+    80004580:	b7ed                	j	8000456a <argfd+0x50>
 
-0000000080004f28 <fdalloc>:
+0000000080004582 <fdalloc>:
 
 // Allocate a file descriptor for the given file.
 // Takes over file reference from caller on success.
 static int
 fdalloc(struct file *f)
 {
-    80004f28:	1101                	addi	sp,sp,-32
-    80004f2a:	ec06                	sd	ra,24(sp)
-    80004f2c:	e822                	sd	s0,16(sp)
-    80004f2e:	e426                	sd	s1,8(sp)
-    80004f30:	1000                	addi	s0,sp,32
-    80004f32:	84aa                	mv	s1,a0
+    80004582:	1101                	addi	sp,sp,-32
+    80004584:	ec06                	sd	ra,24(sp)
+    80004586:	e822                	sd	s0,16(sp)
+    80004588:	e426                	sd	s1,8(sp)
+    8000458a:	1000                	addi	s0,sp,32
+    8000458c:	84aa                	mv	s1,a0
   int fd;
   struct proc *p = myproc();
-    80004f34:	ffffd097          	auipc	ra,0xffffd
-    80004f38:	a98080e7          	jalr	-1384(ra) # 800019cc <myproc>
-    80004f3c:	862a                	mv	a2,a0
+    8000458e:	ffffd097          	auipc	ra,0xffffd
+    80004592:	9b0080e7          	jalr	-1616(ra) # 80000f3e <myproc>
+    80004596:	862a                	mv	a2,a0
 
   for(fd = 0; fd < NOFILE; fd++){
-    80004f3e:	0d050793          	addi	a5,a0,208
-    80004f42:	4501                	li	a0,0
-    80004f44:	46c1                	li	a3,16
+    80004598:	0d050793          	addi	a5,a0,208
+    8000459c:	4501                	li	a0,0
+    8000459e:	46c1                	li	a3,16
     if(p->ofile[fd] == 0){
-    80004f46:	6398                	ld	a4,0(a5)
-    80004f48:	cb19                	beqz	a4,80004f5e <fdalloc+0x36>
+    800045a0:	6398                	ld	a4,0(a5)
+    800045a2:	cb19                	beqz	a4,800045b8 <fdalloc+0x36>
   for(fd = 0; fd < NOFILE; fd++){
-    80004f4a:	2505                	addiw	a0,a0,1
-    80004f4c:	07a1                	addi	a5,a5,8
-    80004f4e:	fed51ce3          	bne	a0,a3,80004f46 <fdalloc+0x1e>
+    800045a4:	2505                	addiw	a0,a0,1
+    800045a6:	07a1                	addi	a5,a5,8
+    800045a8:	fed51ce3          	bne	a0,a3,800045a0 <fdalloc+0x1e>
       p->ofile[fd] = f;
       return fd;
     }
   }
   return -1;
-    80004f52:	557d                	li	a0,-1
+    800045ac:	557d                	li	a0,-1
 }
-    80004f54:	60e2                	ld	ra,24(sp)
-    80004f56:	6442                	ld	s0,16(sp)
-    80004f58:	64a2                	ld	s1,8(sp)
-    80004f5a:	6105                	addi	sp,sp,32
-    80004f5c:	8082                	ret
+    800045ae:	60e2                	ld	ra,24(sp)
+    800045b0:	6442                	ld	s0,16(sp)
+    800045b2:	64a2                	ld	s1,8(sp)
+    800045b4:	6105                	addi	sp,sp,32
+    800045b6:	8082                	ret
       p->ofile[fd] = f;
-    80004f5e:	01a50793          	addi	a5,a0,26
-    80004f62:	078e                	slli	a5,a5,0x3
-    80004f64:	963e                	add	a2,a2,a5
-    80004f66:	e204                	sd	s1,0(a2)
+    800045b8:	01a50793          	addi	a5,a0,26
+    800045bc:	078e                	slli	a5,a5,0x3
+    800045be:	963e                	add	a2,a2,a5
+    800045c0:	e204                	sd	s1,0(a2)
       return fd;
-    80004f68:	b7f5                	j	80004f54 <fdalloc+0x2c>
+    800045c2:	b7f5                	j	800045ae <fdalloc+0x2c>
 
-0000000080004f6a <create>:
+00000000800045c4 <create>:
   return -1;
 }
 
 static struct inode*
 create(char *path, short type, short major, short minor)
 {
-    80004f6a:	715d                	addi	sp,sp,-80
-    80004f6c:	e486                	sd	ra,72(sp)
-    80004f6e:	e0a2                	sd	s0,64(sp)
-    80004f70:	fc26                	sd	s1,56(sp)
-    80004f72:	f84a                	sd	s2,48(sp)
-    80004f74:	f44e                	sd	s3,40(sp)
-    80004f76:	f052                	sd	s4,32(sp)
-    80004f78:	ec56                	sd	s5,24(sp)
-    80004f7a:	0880                	addi	s0,sp,80
-    80004f7c:	89ae                	mv	s3,a1
-    80004f7e:	8ab2                	mv	s5,a2
-    80004f80:	8a36                	mv	s4,a3
+    800045c4:	715d                	addi	sp,sp,-80
+    800045c6:	e486                	sd	ra,72(sp)
+    800045c8:	e0a2                	sd	s0,64(sp)
+    800045ca:	fc26                	sd	s1,56(sp)
+    800045cc:	f84a                	sd	s2,48(sp)
+    800045ce:	f44e                	sd	s3,40(sp)
+    800045d0:	f052                	sd	s4,32(sp)
+    800045d2:	ec56                	sd	s5,24(sp)
+    800045d4:	0880                	addi	s0,sp,80
+    800045d6:	89ae                	mv	s3,a1
+    800045d8:	8ab2                	mv	s5,a2
+    800045da:	8a36                	mv	s4,a3
   struct inode *ip, *dp;
   char name[DIRSIZ];
 
   if((dp = nameiparent(path, name)) == 0)
-    80004f82:	fb040593          	addi	a1,s0,-80
-    80004f86:	fffff097          	auipc	ra,0xfffff
-    80004f8a:	e48080e7          	jalr	-440(ra) # 80003dce <nameiparent>
-    80004f8e:	892a                	mv	s2,a0
-    80004f90:	12050e63          	beqz	a0,800050cc <create+0x162>
+    800045dc:	fb040593          	addi	a1,s0,-80
+    800045e0:	fffff097          	auipc	ra,0xfffff
+    800045e4:	e68080e7          	jalr	-408(ra) # 80003448 <nameiparent>
+    800045e8:	892a                	mv	s2,a0
+    800045ea:	12050e63          	beqz	a0,80004726 <create+0x162>
     return 0;
 
   ilock(dp);
-    80004f94:	ffffe097          	auipc	ra,0xffffe
-    80004f98:	666080e7          	jalr	1638(ra) # 800035fa <ilock>
+    800045ee:	ffffe097          	auipc	ra,0xffffe
+    800045f2:	680080e7          	jalr	1664(ra) # 80002c6e <ilock>
 
   if((ip = dirlookup(dp, name, 0)) != 0){
-    80004f9c:	4601                	li	a2,0
-    80004f9e:	fb040593          	addi	a1,s0,-80
-    80004fa2:	854a                	mv	a0,s2
-    80004fa4:	fffff097          	auipc	ra,0xfffff
-    80004fa8:	b34080e7          	jalr	-1228(ra) # 80003ad8 <dirlookup>
-    80004fac:	84aa                	mv	s1,a0
-    80004fae:	c921                	beqz	a0,80004ffe <create+0x94>
+    800045f6:	4601                	li	a2,0
+    800045f8:	fb040593          	addi	a1,s0,-80
+    800045fc:	854a                	mv	a0,s2
+    800045fe:	fffff097          	auipc	ra,0xfffff
+    80004602:	b54080e7          	jalr	-1196(ra) # 80003152 <dirlookup>
+    80004606:	84aa                	mv	s1,a0
+    80004608:	c921                	beqz	a0,80004658 <create+0x94>
     iunlockput(dp);
-    80004fb0:	854a                	mv	a0,s2
-    80004fb2:	fffff097          	auipc	ra,0xfffff
-    80004fb6:	8aa080e7          	jalr	-1878(ra) # 8000385c <iunlockput>
+    8000460a:	854a                	mv	a0,s2
+    8000460c:	fffff097          	auipc	ra,0xfffff
+    80004610:	8c4080e7          	jalr	-1852(ra) # 80002ed0 <iunlockput>
     ilock(ip);
-    80004fba:	8526                	mv	a0,s1
-    80004fbc:	ffffe097          	auipc	ra,0xffffe
-    80004fc0:	63e080e7          	jalr	1598(ra) # 800035fa <ilock>
+    80004614:	8526                	mv	a0,s1
+    80004616:	ffffe097          	auipc	ra,0xffffe
+    8000461a:	658080e7          	jalr	1624(ra) # 80002c6e <ilock>
     if(type == T_FILE && (ip->type == T_FILE || ip->type == T_DEVICE))
-    80004fc4:	2981                	sext.w	s3,s3
-    80004fc6:	4789                	li	a5,2
-    80004fc8:	02f99463          	bne	s3,a5,80004ff0 <create+0x86>
-    80004fcc:	0444d783          	lhu	a5,68(s1)
-    80004fd0:	37f9                	addiw	a5,a5,-2
-    80004fd2:	17c2                	slli	a5,a5,0x30
-    80004fd4:	93c1                	srli	a5,a5,0x30
-    80004fd6:	4705                	li	a4,1
-    80004fd8:	00f76c63          	bltu	a4,a5,80004ff0 <create+0x86>
+    8000461e:	2981                	sext.w	s3,s3
+    80004620:	4789                	li	a5,2
+    80004622:	02f99463          	bne	s3,a5,8000464a <create+0x86>
+    80004626:	0444d783          	lhu	a5,68(s1)
+    8000462a:	37f9                	addiw	a5,a5,-2
+    8000462c:	17c2                	slli	a5,a5,0x30
+    8000462e:	93c1                	srli	a5,a5,0x30
+    80004630:	4705                	li	a4,1
+    80004632:	00f76c63          	bltu	a4,a5,8000464a <create+0x86>
     panic("create: dirlink");
 
   iunlockput(dp);
 
   return ip;
 }
-    80004fdc:	8526                	mv	a0,s1
-    80004fde:	60a6                	ld	ra,72(sp)
-    80004fe0:	6406                	ld	s0,64(sp)
-    80004fe2:	74e2                	ld	s1,56(sp)
-    80004fe4:	7942                	ld	s2,48(sp)
-    80004fe6:	79a2                	ld	s3,40(sp)
-    80004fe8:	7a02                	ld	s4,32(sp)
-    80004fea:	6ae2                	ld	s5,24(sp)
-    80004fec:	6161                	addi	sp,sp,80
-    80004fee:	8082                	ret
+    80004636:	8526                	mv	a0,s1
+    80004638:	60a6                	ld	ra,72(sp)
+    8000463a:	6406                	ld	s0,64(sp)
+    8000463c:	74e2                	ld	s1,56(sp)
+    8000463e:	7942                	ld	s2,48(sp)
+    80004640:	79a2                	ld	s3,40(sp)
+    80004642:	7a02                	ld	s4,32(sp)
+    80004644:	6ae2                	ld	s5,24(sp)
+    80004646:	6161                	addi	sp,sp,80
+    80004648:	8082                	ret
     iunlockput(ip);
-    80004ff0:	8526                	mv	a0,s1
-    80004ff2:	fffff097          	auipc	ra,0xfffff
-    80004ff6:	86a080e7          	jalr	-1942(ra) # 8000385c <iunlockput>
+    8000464a:	8526                	mv	a0,s1
+    8000464c:	fffff097          	auipc	ra,0xfffff
+    80004650:	884080e7          	jalr	-1916(ra) # 80002ed0 <iunlockput>
     return 0;
-    80004ffa:	4481                	li	s1,0
-    80004ffc:	b7c5                	j	80004fdc <create+0x72>
+    80004654:	4481                	li	s1,0
+    80004656:	b7c5                	j	80004636 <create+0x72>
   if((ip = ialloc(dp->dev, type)) == 0)
-    80004ffe:	85ce                	mv	a1,s3
-    80005000:	00092503          	lw	a0,0(s2)
-    80005004:	ffffe097          	auipc	ra,0xffffe
-    80005008:	45c080e7          	jalr	1116(ra) # 80003460 <ialloc>
-    8000500c:	84aa                	mv	s1,a0
-    8000500e:	c521                	beqz	a0,80005056 <create+0xec>
+    80004658:	85ce                	mv	a1,s3
+    8000465a:	00092503          	lw	a0,0(s2)
+    8000465e:	ffffe097          	auipc	ra,0xffffe
+    80004662:	476080e7          	jalr	1142(ra) # 80002ad4 <ialloc>
+    80004666:	84aa                	mv	s1,a0
+    80004668:	c521                	beqz	a0,800046b0 <create+0xec>
   ilock(ip);
-    80005010:	ffffe097          	auipc	ra,0xffffe
-    80005014:	5ea080e7          	jalr	1514(ra) # 800035fa <ilock>
+    8000466a:	ffffe097          	auipc	ra,0xffffe
+    8000466e:	604080e7          	jalr	1540(ra) # 80002c6e <ilock>
   ip->major = major;
-    80005018:	05549323          	sh	s5,70(s1)
+    80004672:	05549323          	sh	s5,70(s1)
   ip->minor = minor;
-    8000501c:	05449423          	sh	s4,72(s1)
+    80004676:	05449423          	sh	s4,72(s1)
   ip->nlink = 1;
-    80005020:	4a05                	li	s4,1
-    80005022:	05449523          	sh	s4,74(s1)
+    8000467a:	4a05                	li	s4,1
+    8000467c:	05449523          	sh	s4,74(s1)
   iupdate(ip);
-    80005026:	8526                	mv	a0,s1
-    80005028:	ffffe097          	auipc	ra,0xffffe
-    8000502c:	506080e7          	jalr	1286(ra) # 8000352e <iupdate>
+    80004680:	8526                	mv	a0,s1
+    80004682:	ffffe097          	auipc	ra,0xffffe
+    80004686:	520080e7          	jalr	1312(ra) # 80002ba2 <iupdate>
   if(type == T_DIR){  // Create . and .. entries.
-    80005030:	2981                	sext.w	s3,s3
-    80005032:	03498a63          	beq	s3,s4,80005066 <create+0xfc>
+    8000468a:	2981                	sext.w	s3,s3
+    8000468c:	03498a63          	beq	s3,s4,800046c0 <create+0xfc>
   if(dirlink(dp, name, ip->inum) < 0)
-    80005036:	40d0                	lw	a2,4(s1)
-    80005038:	fb040593          	addi	a1,s0,-80
-    8000503c:	854a                	mv	a0,s2
-    8000503e:	fffff097          	auipc	ra,0xfffff
-    80005042:	cb0080e7          	jalr	-848(ra) # 80003cee <dirlink>
-    80005046:	06054b63          	bltz	a0,800050bc <create+0x152>
+    80004690:	40d0                	lw	a2,4(s1)
+    80004692:	fb040593          	addi	a1,s0,-80
+    80004696:	854a                	mv	a0,s2
+    80004698:	fffff097          	auipc	ra,0xfffff
+    8000469c:	cd0080e7          	jalr	-816(ra) # 80003368 <dirlink>
+    800046a0:	06054b63          	bltz	a0,80004716 <create+0x152>
   iunlockput(dp);
-    8000504a:	854a                	mv	a0,s2
-    8000504c:	fffff097          	auipc	ra,0xfffff
-    80005050:	810080e7          	jalr	-2032(ra) # 8000385c <iunlockput>
+    800046a4:	854a                	mv	a0,s2
+    800046a6:	fffff097          	auipc	ra,0xfffff
+    800046aa:	82a080e7          	jalr	-2006(ra) # 80002ed0 <iunlockput>
   return ip;
-    80005054:	b761                	j	80004fdc <create+0x72>
+    800046ae:	b761                	j	80004636 <create+0x72>
     panic("create: ialloc");
-    80005056:	00003517          	auipc	a0,0x3
-    8000505a:	68250513          	addi	a0,a0,1666 # 800086d8 <syscalls+0x2b0>
-    8000505e:	ffffb097          	auipc	ra,0xffffb
-    80005062:	4e8080e7          	jalr	1256(ra) # 80000546 <panic>
+    800046b0:	00004517          	auipc	a0,0x4
+    800046b4:	17050513          	addi	a0,a0,368 # 80008820 <syscall_name+0x2a0>
+    800046b8:	00001097          	auipc	ra,0x1
+    800046bc:	638080e7          	jalr	1592(ra) # 80005cf0 <panic>
     dp->nlink++;  // for ".."
-    80005066:	04a95783          	lhu	a5,74(s2)
-    8000506a:	2785                	addiw	a5,a5,1
-    8000506c:	04f91523          	sh	a5,74(s2)
+    800046c0:	04a95783          	lhu	a5,74(s2)
+    800046c4:	2785                	addiw	a5,a5,1
+    800046c6:	04f91523          	sh	a5,74(s2)
     iupdate(dp);
-    80005070:	854a                	mv	a0,s2
-    80005072:	ffffe097          	auipc	ra,0xffffe
-    80005076:	4bc080e7          	jalr	1212(ra) # 8000352e <iupdate>
+    800046ca:	854a                	mv	a0,s2
+    800046cc:	ffffe097          	auipc	ra,0xffffe
+    800046d0:	4d6080e7          	jalr	1238(ra) # 80002ba2 <iupdate>
     if(dirlink(ip, ".", ip->inum) < 0 || dirlink(ip, "..", dp->inum) < 0)
-    8000507a:	40d0                	lw	a2,4(s1)
-    8000507c:	00003597          	auipc	a1,0x3
-    80005080:	66c58593          	addi	a1,a1,1644 # 800086e8 <syscalls+0x2c0>
-    80005084:	8526                	mv	a0,s1
-    80005086:	fffff097          	auipc	ra,0xfffff
-    8000508a:	c68080e7          	jalr	-920(ra) # 80003cee <dirlink>
-    8000508e:	00054f63          	bltz	a0,800050ac <create+0x142>
-    80005092:	00492603          	lw	a2,4(s2)
-    80005096:	00003597          	auipc	a1,0x3
-    8000509a:	65a58593          	addi	a1,a1,1626 # 800086f0 <syscalls+0x2c8>
-    8000509e:	8526                	mv	a0,s1
-    800050a0:	fffff097          	auipc	ra,0xfffff
-    800050a4:	c4e080e7          	jalr	-946(ra) # 80003cee <dirlink>
-    800050a8:	f80557e3          	bgez	a0,80005036 <create+0xcc>
+    800046d4:	40d0                	lw	a2,4(s1)
+    800046d6:	00004597          	auipc	a1,0x4
+    800046da:	15a58593          	addi	a1,a1,346 # 80008830 <syscall_name+0x2b0>
+    800046de:	8526                	mv	a0,s1
+    800046e0:	fffff097          	auipc	ra,0xfffff
+    800046e4:	c88080e7          	jalr	-888(ra) # 80003368 <dirlink>
+    800046e8:	00054f63          	bltz	a0,80004706 <create+0x142>
+    800046ec:	00492603          	lw	a2,4(s2)
+    800046f0:	00004597          	auipc	a1,0x4
+    800046f4:	14858593          	addi	a1,a1,328 # 80008838 <syscall_name+0x2b8>
+    800046f8:	8526                	mv	a0,s1
+    800046fa:	fffff097          	auipc	ra,0xfffff
+    800046fe:	c6e080e7          	jalr	-914(ra) # 80003368 <dirlink>
+    80004702:	f80557e3          	bgez	a0,80004690 <create+0xcc>
       panic("create dots");
-    800050ac:	00003517          	auipc	a0,0x3
-    800050b0:	64c50513          	addi	a0,a0,1612 # 800086f8 <syscalls+0x2d0>
-    800050b4:	ffffb097          	auipc	ra,0xffffb
-    800050b8:	492080e7          	jalr	1170(ra) # 80000546 <panic>
+    80004706:	00004517          	auipc	a0,0x4
+    8000470a:	13a50513          	addi	a0,a0,314 # 80008840 <syscall_name+0x2c0>
+    8000470e:	00001097          	auipc	ra,0x1
+    80004712:	5e2080e7          	jalr	1506(ra) # 80005cf0 <panic>
     panic("create: dirlink");
-    800050bc:	00003517          	auipc	a0,0x3
-    800050c0:	64c50513          	addi	a0,a0,1612 # 80008708 <syscalls+0x2e0>
-    800050c4:	ffffb097          	auipc	ra,0xffffb
-    800050c8:	482080e7          	jalr	1154(ra) # 80000546 <panic>
+    80004716:	00004517          	auipc	a0,0x4
+    8000471a:	13a50513          	addi	a0,a0,314 # 80008850 <syscall_name+0x2d0>
+    8000471e:	00001097          	auipc	ra,0x1
+    80004722:	5d2080e7          	jalr	1490(ra) # 80005cf0 <panic>
     return 0;
-    800050cc:	84aa                	mv	s1,a0
-    800050ce:	b739                	j	80004fdc <create+0x72>
+    80004726:	84aa                	mv	s1,a0
+    80004728:	b739                	j	80004636 <create+0x72>
 
-00000000800050d0 <sys_dup>:
+000000008000472a <sys_dup>:
 {
-    800050d0:	7179                	addi	sp,sp,-48
-    800050d2:	f406                	sd	ra,40(sp)
-    800050d4:	f022                	sd	s0,32(sp)
-    800050d6:	ec26                	sd	s1,24(sp)
-    800050d8:	e84a                	sd	s2,16(sp)
-    800050da:	1800                	addi	s0,sp,48
+    8000472a:	7179                	addi	sp,sp,-48
+    8000472c:	f406                	sd	ra,40(sp)
+    8000472e:	f022                	sd	s0,32(sp)
+    80004730:	ec26                	sd	s1,24(sp)
+    80004732:	e84a                	sd	s2,16(sp)
+    80004734:	1800                	addi	s0,sp,48
   if(argfd(0, 0, &f) < 0)
-    800050dc:	fd840613          	addi	a2,s0,-40
-    800050e0:	4581                	li	a1,0
-    800050e2:	4501                	li	a0,0
-    800050e4:	00000097          	auipc	ra,0x0
-    800050e8:	ddc080e7          	jalr	-548(ra) # 80004ec0 <argfd>
+    80004736:	fd840613          	addi	a2,s0,-40
+    8000473a:	4581                	li	a1,0
+    8000473c:	4501                	li	a0,0
+    8000473e:	00000097          	auipc	ra,0x0
+    80004742:	ddc080e7          	jalr	-548(ra) # 8000451a <argfd>
     return -1;
-    800050ec:	57fd                	li	a5,-1
+    80004746:	57fd                	li	a5,-1
   if(argfd(0, 0, &f) < 0)
-    800050ee:	02054363          	bltz	a0,80005114 <sys_dup+0x44>
+    80004748:	02054363          	bltz	a0,8000476e <sys_dup+0x44>
   if((fd=fdalloc(f)) < 0)
-    800050f2:	fd843903          	ld	s2,-40(s0)
-    800050f6:	854a                	mv	a0,s2
-    800050f8:	00000097          	auipc	ra,0x0
-    800050fc:	e30080e7          	jalr	-464(ra) # 80004f28 <fdalloc>
-    80005100:	84aa                	mv	s1,a0
+    8000474c:	fd843903          	ld	s2,-40(s0)
+    80004750:	854a                	mv	a0,s2
+    80004752:	00000097          	auipc	ra,0x0
+    80004756:	e30080e7          	jalr	-464(ra) # 80004582 <fdalloc>
+    8000475a:	84aa                	mv	s1,a0
     return -1;
-    80005102:	57fd                	li	a5,-1
+    8000475c:	57fd                	li	a5,-1
   if((fd=fdalloc(f)) < 0)
-    80005104:	00054863          	bltz	a0,80005114 <sys_dup+0x44>
+    8000475e:	00054863          	bltz	a0,8000476e <sys_dup+0x44>
   filedup(f);
-    80005108:	854a                	mv	a0,s2
-    8000510a:	fffff097          	auipc	ra,0xfffff
-    8000510e:	332080e7          	jalr	818(ra) # 8000443c <filedup>
+    80004762:	854a                	mv	a0,s2
+    80004764:	fffff097          	auipc	ra,0xfffff
+    80004768:	35c080e7          	jalr	860(ra) # 80003ac0 <filedup>
   return fd;
-    80005112:	87a6                	mv	a5,s1
+    8000476c:	87a6                	mv	a5,s1
 }
-    80005114:	853e                	mv	a0,a5
-    80005116:	70a2                	ld	ra,40(sp)
-    80005118:	7402                	ld	s0,32(sp)
-    8000511a:	64e2                	ld	s1,24(sp)
-    8000511c:	6942                	ld	s2,16(sp)
-    8000511e:	6145                	addi	sp,sp,48
-    80005120:	8082                	ret
-
-0000000080005122 <sys_read>:
-{
-    80005122:	7179                	addi	sp,sp,-48
-    80005124:	f406                	sd	ra,40(sp)
-    80005126:	f022                	sd	s0,32(sp)
-    80005128:	1800                	addi	s0,sp,48
+    8000476e:	853e                	mv	a0,a5
+    80004770:	70a2                	ld	ra,40(sp)
+    80004772:	7402                	ld	s0,32(sp)
+    80004774:	64e2                	ld	s1,24(sp)
+    80004776:	6942                	ld	s2,16(sp)
+    80004778:	6145                	addi	sp,sp,48
+    8000477a:	8082                	ret
+
+000000008000477c <sys_read>:
+{
+    8000477c:	7179                	addi	sp,sp,-48
+    8000477e:	f406                	sd	ra,40(sp)
+    80004780:	f022                	sd	s0,32(sp)
+    80004782:	1800                	addi	s0,sp,48
   if(argfd(0, 0, &f) < 0 || argint(2, &n) < 0 || argaddr(1, &p) < 0)
-    8000512a:	fe840613          	addi	a2,s0,-24
-    8000512e:	4581                	li	a1,0
-    80005130:	4501                	li	a0,0
-    80005132:	00000097          	auipc	ra,0x0
-    80005136:	d8e080e7          	jalr	-626(ra) # 80004ec0 <argfd>
+    80004784:	fe840613          	addi	a2,s0,-24
+    80004788:	4581                	li	a1,0
+    8000478a:	4501                	li	a0,0
+    8000478c:	00000097          	auipc	ra,0x0
+    80004790:	d8e080e7          	jalr	-626(ra) # 8000451a <argfd>
     return -1;
-    8000513a:	57fd                	li	a5,-1
+    80004794:	57fd                	li	a5,-1
   if(argfd(0, 0, &f) < 0 || argint(2, &n) < 0 || argaddr(1, &p) < 0)
-    8000513c:	04054163          	bltz	a0,8000517e <sys_read+0x5c>
-    80005140:	fe440593          	addi	a1,s0,-28
-    80005144:	4509                	li	a0,2
-    80005146:	ffffe097          	auipc	ra,0xffffe
-    8000514a:	942080e7          	jalr	-1726(ra) # 80002a88 <argint>
+    80004796:	04054163          	bltz	a0,800047d8 <sys_read+0x5c>
+    8000479a:	fe440593          	addi	a1,s0,-28
+    8000479e:	4509                	li	a0,2
+    800047a0:	ffffe097          	auipc	ra,0xffffe
+    800047a4:	88a080e7          	jalr	-1910(ra) # 8000202a <argint>
     return -1;
-    8000514e:	57fd                	li	a5,-1
+    800047a8:	57fd                	li	a5,-1
   if(argfd(0, 0, &f) < 0 || argint(2, &n) < 0 || argaddr(1, &p) < 0)
-    80005150:	02054763          	bltz	a0,8000517e <sys_read+0x5c>
-    80005154:	fd840593          	addi	a1,s0,-40
-    80005158:	4505                	li	a0,1
-    8000515a:	ffffe097          	auipc	ra,0xffffe
-    8000515e:	950080e7          	jalr	-1712(ra) # 80002aaa <argaddr>
+    800047aa:	02054763          	bltz	a0,800047d8 <sys_read+0x5c>
+    800047ae:	fd840593          	addi	a1,s0,-40
+    800047b2:	4505                	li	a0,1
+    800047b4:	ffffe097          	auipc	ra,0xffffe
+    800047b8:	898080e7          	jalr	-1896(ra) # 8000204c <argaddr>
     return -1;
-    80005162:	57fd                	li	a5,-1
+    800047bc:	57fd                	li	a5,-1
   if(argfd(0, 0, &f) < 0 || argint(2, &n) < 0 || argaddr(1, &p) < 0)
-    80005164:	00054d63          	bltz	a0,8000517e <sys_read+0x5c>
+    800047be:	00054d63          	bltz	a0,800047d8 <sys_read+0x5c>
   return fileread(f, p, n);
-    80005168:	fe442603          	lw	a2,-28(s0)
-    8000516c:	fd843583          	ld	a1,-40(s0)
-    80005170:	fe843503          	ld	a0,-24(s0)
-    80005174:	fffff097          	auipc	ra,0xfffff
-    80005178:	454080e7          	jalr	1108(ra) # 800045c8 <fileread>
-    8000517c:	87aa                	mv	a5,a0
-}
-    8000517e:	853e                	mv	a0,a5
-    80005180:	70a2                	ld	ra,40(sp)
-    80005182:	7402                	ld	s0,32(sp)
-    80005184:	6145                	addi	sp,sp,48
-    80005186:	8082                	ret
-
-0000000080005188 <sys_write>:
-{
-    80005188:	7179                	addi	sp,sp,-48
-    8000518a:	f406                	sd	ra,40(sp)
-    8000518c:	f022                	sd	s0,32(sp)
-    8000518e:	1800                	addi	s0,sp,48
+    800047c2:	fe442603          	lw	a2,-28(s0)
+    800047c6:	fd843583          	ld	a1,-40(s0)
+    800047ca:	fe843503          	ld	a0,-24(s0)
+    800047ce:	fffff097          	auipc	ra,0xfffff
+    800047d2:	47e080e7          	jalr	1150(ra) # 80003c4c <fileread>
+    800047d6:	87aa                	mv	a5,a0
+}
+    800047d8:	853e                	mv	a0,a5
+    800047da:	70a2                	ld	ra,40(sp)
+    800047dc:	7402                	ld	s0,32(sp)
+    800047de:	6145                	addi	sp,sp,48
+    800047e0:	8082                	ret
+
+00000000800047e2 <sys_write>:
+{
+    800047e2:	7179                	addi	sp,sp,-48
+    800047e4:	f406                	sd	ra,40(sp)
+    800047e6:	f022                	sd	s0,32(sp)
+    800047e8:	1800                	addi	s0,sp,48
   if(argfd(0, 0, &f) < 0 || argint(2, &n) < 0 || argaddr(1, &p) < 0)
-    80005190:	fe840613          	addi	a2,s0,-24
-    80005194:	4581                	li	a1,0
-    80005196:	4501                	li	a0,0
-    80005198:	00000097          	auipc	ra,0x0
-    8000519c:	d28080e7          	jalr	-728(ra) # 80004ec0 <argfd>
+    800047ea:	fe840613          	addi	a2,s0,-24
+    800047ee:	4581                	li	a1,0
+    800047f0:	4501                	li	a0,0
+    800047f2:	00000097          	auipc	ra,0x0
+    800047f6:	d28080e7          	jalr	-728(ra) # 8000451a <argfd>
     return -1;
-    800051a0:	57fd                	li	a5,-1
+    800047fa:	57fd                	li	a5,-1
   if(argfd(0, 0, &f) < 0 || argint(2, &n) < 0 || argaddr(1, &p) < 0)
-    800051a2:	04054163          	bltz	a0,800051e4 <sys_write+0x5c>
-    800051a6:	fe440593          	addi	a1,s0,-28
-    800051aa:	4509                	li	a0,2
-    800051ac:	ffffe097          	auipc	ra,0xffffe
-    800051b0:	8dc080e7          	jalr	-1828(ra) # 80002a88 <argint>
+    800047fc:	04054163          	bltz	a0,8000483e <sys_write+0x5c>
+    80004800:	fe440593          	addi	a1,s0,-28
+    80004804:	4509                	li	a0,2
+    80004806:	ffffe097          	auipc	ra,0xffffe
+    8000480a:	824080e7          	jalr	-2012(ra) # 8000202a <argint>
     return -1;
-    800051b4:	57fd                	li	a5,-1
+    8000480e:	57fd                	li	a5,-1
   if(argfd(0, 0, &f) < 0 || argint(2, &n) < 0 || argaddr(1, &p) < 0)
-    800051b6:	02054763          	bltz	a0,800051e4 <sys_write+0x5c>
-    800051ba:	fd840593          	addi	a1,s0,-40
-    800051be:	4505                	li	a0,1
-    800051c0:	ffffe097          	auipc	ra,0xffffe
-    800051c4:	8ea080e7          	jalr	-1814(ra) # 80002aaa <argaddr>
+    80004810:	02054763          	bltz	a0,8000483e <sys_write+0x5c>
+    80004814:	fd840593          	addi	a1,s0,-40
+    80004818:	4505                	li	a0,1
+    8000481a:	ffffe097          	auipc	ra,0xffffe
+    8000481e:	832080e7          	jalr	-1998(ra) # 8000204c <argaddr>
     return -1;
-    800051c8:	57fd                	li	a5,-1
+    80004822:	57fd                	li	a5,-1
   if(argfd(0, 0, &f) < 0 || argint(2, &n) < 0 || argaddr(1, &p) < 0)
-    800051ca:	00054d63          	bltz	a0,800051e4 <sys_write+0x5c>
+    80004824:	00054d63          	bltz	a0,8000483e <sys_write+0x5c>
   return filewrite(f, p, n);
-    800051ce:	fe442603          	lw	a2,-28(s0)
-    800051d2:	fd843583          	ld	a1,-40(s0)
-    800051d6:	fe843503          	ld	a0,-24(s0)
-    800051da:	fffff097          	auipc	ra,0xfffff
-    800051de:	4b0080e7          	jalr	1200(ra) # 8000468a <filewrite>
-    800051e2:	87aa                	mv	a5,a0
-}
-    800051e4:	853e                	mv	a0,a5
-    800051e6:	70a2                	ld	ra,40(sp)
-    800051e8:	7402                	ld	s0,32(sp)
-    800051ea:	6145                	addi	sp,sp,48
-    800051ec:	8082                	ret
-
-00000000800051ee <sys_close>:
-{
-    800051ee:	1101                	addi	sp,sp,-32
-    800051f0:	ec06                	sd	ra,24(sp)
-    800051f2:	e822                	sd	s0,16(sp)
-    800051f4:	1000                	addi	s0,sp,32
+    80004828:	fe442603          	lw	a2,-28(s0)
+    8000482c:	fd843583          	ld	a1,-40(s0)
+    80004830:	fe843503          	ld	a0,-24(s0)
+    80004834:	fffff097          	auipc	ra,0xfffff
+    80004838:	4da080e7          	jalr	1242(ra) # 80003d0e <filewrite>
+    8000483c:	87aa                	mv	a5,a0
+}
+    8000483e:	853e                	mv	a0,a5
+    80004840:	70a2                	ld	ra,40(sp)
+    80004842:	7402                	ld	s0,32(sp)
+    80004844:	6145                	addi	sp,sp,48
+    80004846:	8082                	ret
+
+0000000080004848 <sys_close>:
+{
+    80004848:	1101                	addi	sp,sp,-32
+    8000484a:	ec06                	sd	ra,24(sp)
+    8000484c:	e822                	sd	s0,16(sp)
+    8000484e:	1000                	addi	s0,sp,32
   if(argfd(0, &fd, &f) < 0)
-    800051f6:	fe040613          	addi	a2,s0,-32
-    800051fa:	fec40593          	addi	a1,s0,-20
-    800051fe:	4501                	li	a0,0
-    80005200:	00000097          	auipc	ra,0x0
-    80005204:	cc0080e7          	jalr	-832(ra) # 80004ec0 <argfd>
+    80004850:	fe040613          	addi	a2,s0,-32
+    80004854:	fec40593          	addi	a1,s0,-20
+    80004858:	4501                	li	a0,0
+    8000485a:	00000097          	auipc	ra,0x0
+    8000485e:	cc0080e7          	jalr	-832(ra) # 8000451a <argfd>
     return -1;
-    80005208:	57fd                	li	a5,-1
+    80004862:	57fd                	li	a5,-1
   if(argfd(0, &fd, &f) < 0)
-    8000520a:	02054463          	bltz	a0,80005232 <sys_close+0x44>
+    80004864:	02054463          	bltz	a0,8000488c <sys_close+0x44>
   myproc()->ofile[fd] = 0;
-    8000520e:	ffffc097          	auipc	ra,0xffffc
-    80005212:	7be080e7          	jalr	1982(ra) # 800019cc <myproc>
-    80005216:	fec42783          	lw	a5,-20(s0)
-    8000521a:	07e9                	addi	a5,a5,26
-    8000521c:	078e                	slli	a5,a5,0x3
-    8000521e:	953e                	add	a0,a0,a5
-    80005220:	00053023          	sd	zero,0(a0)
+    80004868:	ffffc097          	auipc	ra,0xffffc
+    8000486c:	6d6080e7          	jalr	1750(ra) # 80000f3e <myproc>
+    80004870:	fec42783          	lw	a5,-20(s0)
+    80004874:	07e9                	addi	a5,a5,26
+    80004876:	078e                	slli	a5,a5,0x3
+    80004878:	953e                	add	a0,a0,a5
+    8000487a:	00053023          	sd	zero,0(a0)
   fileclose(f);
-    80005224:	fe043503          	ld	a0,-32(s0)
-    80005228:	fffff097          	auipc	ra,0xfffff
-    8000522c:	266080e7          	jalr	614(ra) # 8000448e <fileclose>
+    8000487e:	fe043503          	ld	a0,-32(s0)
+    80004882:	fffff097          	auipc	ra,0xfffff
+    80004886:	290080e7          	jalr	656(ra) # 80003b12 <fileclose>
   return 0;
-    80005230:	4781                	li	a5,0
+    8000488a:	4781                	li	a5,0
 }
-    80005232:	853e                	mv	a0,a5
-    80005234:	60e2                	ld	ra,24(sp)
-    80005236:	6442                	ld	s0,16(sp)
-    80005238:	6105                	addi	sp,sp,32
-    8000523a:	8082                	ret
-
-000000008000523c <sys_fstat>:
-{
-    8000523c:	1101                	addi	sp,sp,-32
-    8000523e:	ec06                	sd	ra,24(sp)
-    80005240:	e822                	sd	s0,16(sp)
-    80005242:	1000                	addi	s0,sp,32
+    8000488c:	853e                	mv	a0,a5
+    8000488e:	60e2                	ld	ra,24(sp)
+    80004890:	6442                	ld	s0,16(sp)
+    80004892:	6105                	addi	sp,sp,32
+    80004894:	8082                	ret
+
+0000000080004896 <sys_fstat>:
+{
+    80004896:	1101                	addi	sp,sp,-32
+    80004898:	ec06                	sd	ra,24(sp)
+    8000489a:	e822                	sd	s0,16(sp)
+    8000489c:	1000                	addi	s0,sp,32
   if(argfd(0, 0, &f) < 0 || argaddr(1, &st) < 0)
-    80005244:	fe840613          	addi	a2,s0,-24
-    80005248:	4581                	li	a1,0
-    8000524a:	4501                	li	a0,0
-    8000524c:	00000097          	auipc	ra,0x0
-    80005250:	c74080e7          	jalr	-908(ra) # 80004ec0 <argfd>
+    8000489e:	fe840613          	addi	a2,s0,-24
+    800048a2:	4581                	li	a1,0
+    800048a4:	4501                	li	a0,0
+    800048a6:	00000097          	auipc	ra,0x0
+    800048aa:	c74080e7          	jalr	-908(ra) # 8000451a <argfd>
     return -1;
-    80005254:	57fd                	li	a5,-1
+    800048ae:	57fd                	li	a5,-1
   if(argfd(0, 0, &f) < 0 || argaddr(1, &st) < 0)
-    80005256:	02054563          	bltz	a0,80005280 <sys_fstat+0x44>
-    8000525a:	fe040593          	addi	a1,s0,-32
-    8000525e:	4505                	li	a0,1
-    80005260:	ffffe097          	auipc	ra,0xffffe
-    80005264:	84a080e7          	jalr	-1974(ra) # 80002aaa <argaddr>
+    800048b0:	02054563          	bltz	a0,800048da <sys_fstat+0x44>
+    800048b4:	fe040593          	addi	a1,s0,-32
+    800048b8:	4505                	li	a0,1
+    800048ba:	ffffd097          	auipc	ra,0xffffd
+    800048be:	792080e7          	jalr	1938(ra) # 8000204c <argaddr>
     return -1;
-    80005268:	57fd                	li	a5,-1
+    800048c2:	57fd                	li	a5,-1
   if(argfd(0, 0, &f) < 0 || argaddr(1, &st) < 0)
-    8000526a:	00054b63          	bltz	a0,80005280 <sys_fstat+0x44>
+    800048c4:	00054b63          	bltz	a0,800048da <sys_fstat+0x44>
   return filestat(f, st);
-    8000526e:	fe043583          	ld	a1,-32(s0)
-    80005272:	fe843503          	ld	a0,-24(s0)
-    80005276:	fffff097          	auipc	ra,0xfffff
-    8000527a:	2e0080e7          	jalr	736(ra) # 80004556 <filestat>
-    8000527e:	87aa                	mv	a5,a0
-}
-    80005280:	853e                	mv	a0,a5
-    80005282:	60e2                	ld	ra,24(sp)
-    80005284:	6442                	ld	s0,16(sp)
-    80005286:	6105                	addi	sp,sp,32
-    80005288:	8082                	ret
-
-000000008000528a <sys_link>:
-{
-    8000528a:	7169                	addi	sp,sp,-304
-    8000528c:	f606                	sd	ra,296(sp)
-    8000528e:	f222                	sd	s0,288(sp)
-    80005290:	ee26                	sd	s1,280(sp)
-    80005292:	ea4a                	sd	s2,272(sp)
-    80005294:	1a00                	addi	s0,sp,304
+    800048c8:	fe043583          	ld	a1,-32(s0)
+    800048cc:	fe843503          	ld	a0,-24(s0)
+    800048d0:	fffff097          	auipc	ra,0xfffff
+    800048d4:	30a080e7          	jalr	778(ra) # 80003bda <filestat>
+    800048d8:	87aa                	mv	a5,a0
+}
+    800048da:	853e                	mv	a0,a5
+    800048dc:	60e2                	ld	ra,24(sp)
+    800048de:	6442                	ld	s0,16(sp)
+    800048e0:	6105                	addi	sp,sp,32
+    800048e2:	8082                	ret
+
+00000000800048e4 <sys_link>:
+{
+    800048e4:	7169                	addi	sp,sp,-304
+    800048e6:	f606                	sd	ra,296(sp)
+    800048e8:	f222                	sd	s0,288(sp)
+    800048ea:	ee26                	sd	s1,280(sp)
+    800048ec:	ea4a                	sd	s2,272(sp)
+    800048ee:	1a00                	addi	s0,sp,304
   if(argstr(0, old, MAXPATH) < 0 || argstr(1, new, MAXPATH) < 0)
-    80005296:	08000613          	li	a2,128
-    8000529a:	ed040593          	addi	a1,s0,-304
-    8000529e:	4501                	li	a0,0
-    800052a0:	ffffe097          	auipc	ra,0xffffe
-    800052a4:	82c080e7          	jalr	-2004(ra) # 80002acc <argstr>
+    800048f0:	08000613          	li	a2,128
+    800048f4:	ed040593          	addi	a1,s0,-304
+    800048f8:	4501                	li	a0,0
+    800048fa:	ffffd097          	auipc	ra,0xffffd
+    800048fe:	774080e7          	jalr	1908(ra) # 8000206e <argstr>
     return -1;
-    800052a8:	57fd                	li	a5,-1
+    80004902:	57fd                	li	a5,-1
   if(argstr(0, old, MAXPATH) < 0 || argstr(1, new, MAXPATH) < 0)
-    800052aa:	10054e63          	bltz	a0,800053c6 <sys_link+0x13c>
-    800052ae:	08000613          	li	a2,128
-    800052b2:	f5040593          	addi	a1,s0,-176
-    800052b6:	4505                	li	a0,1
-    800052b8:	ffffe097          	auipc	ra,0xffffe
-    800052bc:	814080e7          	jalr	-2028(ra) # 80002acc <argstr>
+    80004904:	10054e63          	bltz	a0,80004a20 <sys_link+0x13c>
+    80004908:	08000613          	li	a2,128
+    8000490c:	f5040593          	addi	a1,s0,-176
+    80004910:	4505                	li	a0,1
+    80004912:	ffffd097          	auipc	ra,0xffffd
+    80004916:	75c080e7          	jalr	1884(ra) # 8000206e <argstr>
     return -1;
-    800052c0:	57fd                	li	a5,-1
+    8000491a:	57fd                	li	a5,-1
   if(argstr(0, old, MAXPATH) < 0 || argstr(1, new, MAXPATH) < 0)
-    800052c2:	10054263          	bltz	a0,800053c6 <sys_link+0x13c>
+    8000491c:	10054263          	bltz	a0,80004a20 <sys_link+0x13c>
   begin_op();
-    800052c6:	fffff097          	auipc	ra,0xfffff
-    800052ca:	cfa080e7          	jalr	-774(ra) # 80003fc0 <begin_op>
+    80004920:	fffff097          	auipc	ra,0xfffff
+    80004924:	d2a080e7          	jalr	-726(ra) # 8000364a <begin_op>
   if((ip = namei(old)) == 0){
-    800052ce:	ed040513          	addi	a0,s0,-304
-    800052d2:	fffff097          	auipc	ra,0xfffff
-    800052d6:	ade080e7          	jalr	-1314(ra) # 80003db0 <namei>
-    800052da:	84aa                	mv	s1,a0
-    800052dc:	c551                	beqz	a0,80005368 <sys_link+0xde>
+    80004928:	ed040513          	addi	a0,s0,-304
+    8000492c:	fffff097          	auipc	ra,0xfffff
+    80004930:	afe080e7          	jalr	-1282(ra) # 8000342a <namei>
+    80004934:	84aa                	mv	s1,a0
+    80004936:	c551                	beqz	a0,800049c2 <sys_link+0xde>
   ilock(ip);
-    800052de:	ffffe097          	auipc	ra,0xffffe
-    800052e2:	31c080e7          	jalr	796(ra) # 800035fa <ilock>
+    80004938:	ffffe097          	auipc	ra,0xffffe
+    8000493c:	336080e7          	jalr	822(ra) # 80002c6e <ilock>
   if(ip->type == T_DIR){
-    800052e6:	04449703          	lh	a4,68(s1)
-    800052ea:	4785                	li	a5,1
-    800052ec:	08f70463          	beq	a4,a5,80005374 <sys_link+0xea>
+    80004940:	04449703          	lh	a4,68(s1)
+    80004944:	4785                	li	a5,1
+    80004946:	08f70463          	beq	a4,a5,800049ce <sys_link+0xea>
   ip->nlink++;
-    800052f0:	04a4d783          	lhu	a5,74(s1)
-    800052f4:	2785                	addiw	a5,a5,1
-    800052f6:	04f49523          	sh	a5,74(s1)
+    8000494a:	04a4d783          	lhu	a5,74(s1)
+    8000494e:	2785                	addiw	a5,a5,1
+    80004950:	04f49523          	sh	a5,74(s1)
   iupdate(ip);
-    800052fa:	8526                	mv	a0,s1
-    800052fc:	ffffe097          	auipc	ra,0xffffe
-    80005300:	232080e7          	jalr	562(ra) # 8000352e <iupdate>
+    80004954:	8526                	mv	a0,s1
+    80004956:	ffffe097          	auipc	ra,0xffffe
+    8000495a:	24c080e7          	jalr	588(ra) # 80002ba2 <iupdate>
   iunlock(ip);
-    80005304:	8526                	mv	a0,s1
-    80005306:	ffffe097          	auipc	ra,0xffffe
-    8000530a:	3b6080e7          	jalr	950(ra) # 800036bc <iunlock>
+    8000495e:	8526                	mv	a0,s1
+    80004960:	ffffe097          	auipc	ra,0xffffe
+    80004964:	3d0080e7          	jalr	976(ra) # 80002d30 <iunlock>
   if((dp = nameiparent(new, name)) == 0)
-    8000530e:	fd040593          	addi	a1,s0,-48
-    80005312:	f5040513          	addi	a0,s0,-176
-    80005316:	fffff097          	auipc	ra,0xfffff
-    8000531a:	ab8080e7          	jalr	-1352(ra) # 80003dce <nameiparent>
-    8000531e:	892a                	mv	s2,a0
-    80005320:	c935                	beqz	a0,80005394 <sys_link+0x10a>
+    80004968:	fd040593          	addi	a1,s0,-48
+    8000496c:	f5040513          	addi	a0,s0,-176
+    80004970:	fffff097          	auipc	ra,0xfffff
+    80004974:	ad8080e7          	jalr	-1320(ra) # 80003448 <nameiparent>
+    80004978:	892a                	mv	s2,a0
+    8000497a:	c935                	beqz	a0,800049ee <sys_link+0x10a>
   ilock(dp);
-    80005322:	ffffe097          	auipc	ra,0xffffe
-    80005326:	2d8080e7          	jalr	728(ra) # 800035fa <ilock>
+    8000497c:	ffffe097          	auipc	ra,0xffffe
+    80004980:	2f2080e7          	jalr	754(ra) # 80002c6e <ilock>
   if(dp->dev != ip->dev || dirlink(dp, name, ip->inum) < 0){
-    8000532a:	00092703          	lw	a4,0(s2)
-    8000532e:	409c                	lw	a5,0(s1)
-    80005330:	04f71d63          	bne	a4,a5,8000538a <sys_link+0x100>
-    80005334:	40d0                	lw	a2,4(s1)
-    80005336:	fd040593          	addi	a1,s0,-48
-    8000533a:	854a                	mv	a0,s2
-    8000533c:	fffff097          	auipc	ra,0xfffff
-    80005340:	9b2080e7          	jalr	-1614(ra) # 80003cee <dirlink>
-    80005344:	04054363          	bltz	a0,8000538a <sys_link+0x100>
+    80004984:	00092703          	lw	a4,0(s2)
+    80004988:	409c                	lw	a5,0(s1)
+    8000498a:	04f71d63          	bne	a4,a5,800049e4 <sys_link+0x100>
+    8000498e:	40d0                	lw	a2,4(s1)
+    80004990:	fd040593          	addi	a1,s0,-48
+    80004994:	854a                	mv	a0,s2
+    80004996:	fffff097          	auipc	ra,0xfffff
+    8000499a:	9d2080e7          	jalr	-1582(ra) # 80003368 <dirlink>
+    8000499e:	04054363          	bltz	a0,800049e4 <sys_link+0x100>
   iunlockput(dp);
-    80005348:	854a                	mv	a0,s2
-    8000534a:	ffffe097          	auipc	ra,0xffffe
-    8000534e:	512080e7          	jalr	1298(ra) # 8000385c <iunlockput>
+    800049a2:	854a                	mv	a0,s2
+    800049a4:	ffffe097          	auipc	ra,0xffffe
+    800049a8:	52c080e7          	jalr	1324(ra) # 80002ed0 <iunlockput>
   iput(ip);
-    80005352:	8526                	mv	a0,s1
-    80005354:	ffffe097          	auipc	ra,0xffffe
-    80005358:	460080e7          	jalr	1120(ra) # 800037b4 <iput>
+    800049ac:	8526                	mv	a0,s1
+    800049ae:	ffffe097          	auipc	ra,0xffffe
+    800049b2:	47a080e7          	jalr	1146(ra) # 80002e28 <iput>
   end_op();
-    8000535c:	fffff097          	auipc	ra,0xfffff
-    80005360:	ce2080e7          	jalr	-798(ra) # 8000403e <end_op>
+    800049b6:	fffff097          	auipc	ra,0xfffff
+    800049ba:	d12080e7          	jalr	-750(ra) # 800036c8 <end_op>
   return 0;
-    80005364:	4781                	li	a5,0
-    80005366:	a085                	j	800053c6 <sys_link+0x13c>
+    800049be:	4781                	li	a5,0
+    800049c0:	a085                	j	80004a20 <sys_link+0x13c>
     end_op();
-    80005368:	fffff097          	auipc	ra,0xfffff
-    8000536c:	cd6080e7          	jalr	-810(ra) # 8000403e <end_op>
+    800049c2:	fffff097          	auipc	ra,0xfffff
+    800049c6:	d06080e7          	jalr	-762(ra) # 800036c8 <end_op>
     return -1;
-    80005370:	57fd                	li	a5,-1
-    80005372:	a891                	j	800053c6 <sys_link+0x13c>
+    800049ca:	57fd                	li	a5,-1
+    800049cc:	a891                	j	80004a20 <sys_link+0x13c>
     iunlockput(ip);
-    80005374:	8526                	mv	a0,s1
-    80005376:	ffffe097          	auipc	ra,0xffffe
-    8000537a:	4e6080e7          	jalr	1254(ra) # 8000385c <iunlockput>
+    800049ce:	8526                	mv	a0,s1
+    800049d0:	ffffe097          	auipc	ra,0xffffe
+    800049d4:	500080e7          	jalr	1280(ra) # 80002ed0 <iunlockput>
     end_op();
-    8000537e:	fffff097          	auipc	ra,0xfffff
-    80005382:	cc0080e7          	jalr	-832(ra) # 8000403e <end_op>
+    800049d8:	fffff097          	auipc	ra,0xfffff
+    800049dc:	cf0080e7          	jalr	-784(ra) # 800036c8 <end_op>
     return -1;
-    80005386:	57fd                	li	a5,-1
-    80005388:	a83d                	j	800053c6 <sys_link+0x13c>
+    800049e0:	57fd                	li	a5,-1
+    800049e2:	a83d                	j	80004a20 <sys_link+0x13c>
     iunlockput(dp);
-    8000538a:	854a                	mv	a0,s2
-    8000538c:	ffffe097          	auipc	ra,0xffffe
-    80005390:	4d0080e7          	jalr	1232(ra) # 8000385c <iunlockput>
+    800049e4:	854a                	mv	a0,s2
+    800049e6:	ffffe097          	auipc	ra,0xffffe
+    800049ea:	4ea080e7          	jalr	1258(ra) # 80002ed0 <iunlockput>
   ilock(ip);
-    80005394:	8526                	mv	a0,s1
-    80005396:	ffffe097          	auipc	ra,0xffffe
-    8000539a:	264080e7          	jalr	612(ra) # 800035fa <ilock>
+    800049ee:	8526                	mv	a0,s1
+    800049f0:	ffffe097          	auipc	ra,0xffffe
+    800049f4:	27e080e7          	jalr	638(ra) # 80002c6e <ilock>
   ip->nlink--;
-    8000539e:	04a4d783          	lhu	a5,74(s1)
-    800053a2:	37fd                	addiw	a5,a5,-1
-    800053a4:	04f49523          	sh	a5,74(s1)
+    800049f8:	04a4d783          	lhu	a5,74(s1)
+    800049fc:	37fd                	addiw	a5,a5,-1
+    800049fe:	04f49523          	sh	a5,74(s1)
   iupdate(ip);
-    800053a8:	8526                	mv	a0,s1
-    800053aa:	ffffe097          	auipc	ra,0xffffe
-    800053ae:	184080e7          	jalr	388(ra) # 8000352e <iupdate>
+    80004a02:	8526                	mv	a0,s1
+    80004a04:	ffffe097          	auipc	ra,0xffffe
+    80004a08:	19e080e7          	jalr	414(ra) # 80002ba2 <iupdate>
   iunlockput(ip);
-    800053b2:	8526                	mv	a0,s1
-    800053b4:	ffffe097          	auipc	ra,0xffffe
-    800053b8:	4a8080e7          	jalr	1192(ra) # 8000385c <iunlockput>
+    80004a0c:	8526                	mv	a0,s1
+    80004a0e:	ffffe097          	auipc	ra,0xffffe
+    80004a12:	4c2080e7          	jalr	1218(ra) # 80002ed0 <iunlockput>
   end_op();
-    800053bc:	fffff097          	auipc	ra,0xfffff
-    800053c0:	c82080e7          	jalr	-894(ra) # 8000403e <end_op>
+    80004a16:	fffff097          	auipc	ra,0xfffff
+    80004a1a:	cb2080e7          	jalr	-846(ra) # 800036c8 <end_op>
   return -1;
-    800053c4:	57fd                	li	a5,-1
+    80004a1e:	57fd                	li	a5,-1
 }
-    800053c6:	853e                	mv	a0,a5
-    800053c8:	70b2                	ld	ra,296(sp)
-    800053ca:	7412                	ld	s0,288(sp)
-    800053cc:	64f2                	ld	s1,280(sp)
-    800053ce:	6952                	ld	s2,272(sp)
-    800053d0:	6155                	addi	sp,sp,304
-    800053d2:	8082                	ret
-
-00000000800053d4 <sys_unlink>:
-{
-    800053d4:	7151                	addi	sp,sp,-240
-    800053d6:	f586                	sd	ra,232(sp)
-    800053d8:	f1a2                	sd	s0,224(sp)
-    800053da:	eda6                	sd	s1,216(sp)
-    800053dc:	e9ca                	sd	s2,208(sp)
-    800053de:	e5ce                	sd	s3,200(sp)
-    800053e0:	1980                	addi	s0,sp,240
+    80004a20:	853e                	mv	a0,a5
+    80004a22:	70b2                	ld	ra,296(sp)
+    80004a24:	7412                	ld	s0,288(sp)
+    80004a26:	64f2                	ld	s1,280(sp)
+    80004a28:	6952                	ld	s2,272(sp)
+    80004a2a:	6155                	addi	sp,sp,304
+    80004a2c:	8082                	ret
+
+0000000080004a2e <sys_unlink>:
+{
+    80004a2e:	7151                	addi	sp,sp,-240
+    80004a30:	f586                	sd	ra,232(sp)
+    80004a32:	f1a2                	sd	s0,224(sp)
+    80004a34:	eda6                	sd	s1,216(sp)
+    80004a36:	e9ca                	sd	s2,208(sp)
+    80004a38:	e5ce                	sd	s3,200(sp)
+    80004a3a:	1980                	addi	s0,sp,240
   if(argstr(0, path, MAXPATH) < 0)
-    800053e2:	08000613          	li	a2,128
-    800053e6:	f3040593          	addi	a1,s0,-208
-    800053ea:	4501                	li	a0,0
-    800053ec:	ffffd097          	auipc	ra,0xffffd
-    800053f0:	6e0080e7          	jalr	1760(ra) # 80002acc <argstr>
-    800053f4:	18054163          	bltz	a0,80005576 <sys_unlink+0x1a2>
+    80004a3c:	08000613          	li	a2,128
+    80004a40:	f3040593          	addi	a1,s0,-208
+    80004a44:	4501                	li	a0,0
+    80004a46:	ffffd097          	auipc	ra,0xffffd
+    80004a4a:	628080e7          	jalr	1576(ra) # 8000206e <argstr>
+    80004a4e:	18054163          	bltz	a0,80004bd0 <sys_unlink+0x1a2>
   begin_op();
-    800053f8:	fffff097          	auipc	ra,0xfffff
-    800053fc:	bc8080e7          	jalr	-1080(ra) # 80003fc0 <begin_op>
+    80004a52:	fffff097          	auipc	ra,0xfffff
+    80004a56:	bf8080e7          	jalr	-1032(ra) # 8000364a <begin_op>
   if((dp = nameiparent(path, name)) == 0){
-    80005400:	fb040593          	addi	a1,s0,-80
-    80005404:	f3040513          	addi	a0,s0,-208
-    80005408:	fffff097          	auipc	ra,0xfffff
-    8000540c:	9c6080e7          	jalr	-1594(ra) # 80003dce <nameiparent>
-    80005410:	84aa                	mv	s1,a0
-    80005412:	c979                	beqz	a0,800054e8 <sys_unlink+0x114>
+    80004a5a:	fb040593          	addi	a1,s0,-80
+    80004a5e:	f3040513          	addi	a0,s0,-208
+    80004a62:	fffff097          	auipc	ra,0xfffff
+    80004a66:	9e6080e7          	jalr	-1562(ra) # 80003448 <nameiparent>
+    80004a6a:	84aa                	mv	s1,a0
+    80004a6c:	c979                	beqz	a0,80004b42 <sys_unlink+0x114>
   ilock(dp);
-    80005414:	ffffe097          	auipc	ra,0xffffe
-    80005418:	1e6080e7          	jalr	486(ra) # 800035fa <ilock>
+    80004a6e:	ffffe097          	auipc	ra,0xffffe
+    80004a72:	200080e7          	jalr	512(ra) # 80002c6e <ilock>
   if(namecmp(name, ".") == 0 || namecmp(name, "..") == 0)
-    8000541c:	00003597          	auipc	a1,0x3
-    80005420:	2cc58593          	addi	a1,a1,716 # 800086e8 <syscalls+0x2c0>
-    80005424:	fb040513          	addi	a0,s0,-80
-    80005428:	ffffe097          	auipc	ra,0xffffe
-    8000542c:	696080e7          	jalr	1686(ra) # 80003abe <namecmp>
-    80005430:	14050a63          	beqz	a0,80005584 <sys_unlink+0x1b0>
-    80005434:	00003597          	auipc	a1,0x3
-    80005438:	2bc58593          	addi	a1,a1,700 # 800086f0 <syscalls+0x2c8>
-    8000543c:	fb040513          	addi	a0,s0,-80
-    80005440:	ffffe097          	auipc	ra,0xffffe
-    80005444:	67e080e7          	jalr	1662(ra) # 80003abe <namecmp>
-    80005448:	12050e63          	beqz	a0,80005584 <sys_unlink+0x1b0>
+    80004a76:	00004597          	auipc	a1,0x4
+    80004a7a:	dba58593          	addi	a1,a1,-582 # 80008830 <syscall_name+0x2b0>
+    80004a7e:	fb040513          	addi	a0,s0,-80
+    80004a82:	ffffe097          	auipc	ra,0xffffe
+    80004a86:	6b6080e7          	jalr	1718(ra) # 80003138 <namecmp>
+    80004a8a:	14050a63          	beqz	a0,80004bde <sys_unlink+0x1b0>
+    80004a8e:	00004597          	auipc	a1,0x4
+    80004a92:	daa58593          	addi	a1,a1,-598 # 80008838 <syscall_name+0x2b8>
+    80004a96:	fb040513          	addi	a0,s0,-80
+    80004a9a:	ffffe097          	auipc	ra,0xffffe
+    80004a9e:	69e080e7          	jalr	1694(ra) # 80003138 <namecmp>
+    80004aa2:	12050e63          	beqz	a0,80004bde <sys_unlink+0x1b0>
   if((ip = dirlookup(dp, name, &off)) == 0)
-    8000544c:	f2c40613          	addi	a2,s0,-212
-    80005450:	fb040593          	addi	a1,s0,-80
-    80005454:	8526                	mv	a0,s1
-    80005456:	ffffe097          	auipc	ra,0xffffe
-    8000545a:	682080e7          	jalr	1666(ra) # 80003ad8 <dirlookup>
-    8000545e:	892a                	mv	s2,a0
-    80005460:	12050263          	beqz	a0,80005584 <sys_unlink+0x1b0>
+    80004aa6:	f2c40613          	addi	a2,s0,-212
+    80004aaa:	fb040593          	addi	a1,s0,-80
+    80004aae:	8526                	mv	a0,s1
+    80004ab0:	ffffe097          	auipc	ra,0xffffe
+    80004ab4:	6a2080e7          	jalr	1698(ra) # 80003152 <dirlookup>
+    80004ab8:	892a                	mv	s2,a0
+    80004aba:	12050263          	beqz	a0,80004bde <sys_unlink+0x1b0>
   ilock(ip);
-    80005464:	ffffe097          	auipc	ra,0xffffe
-    80005468:	196080e7          	jalr	406(ra) # 800035fa <ilock>
+    80004abe:	ffffe097          	auipc	ra,0xffffe
+    80004ac2:	1b0080e7          	jalr	432(ra) # 80002c6e <ilock>
   if(ip->nlink < 1)
-    8000546c:	04a91783          	lh	a5,74(s2)
-    80005470:	08f05263          	blez	a5,800054f4 <sys_unlink+0x120>
+    80004ac6:	04a91783          	lh	a5,74(s2)
+    80004aca:	08f05263          	blez	a5,80004b4e <sys_unlink+0x120>
   if(ip->type == T_DIR && !isdirempty(ip)){
-    80005474:	04491703          	lh	a4,68(s2)
-    80005478:	4785                	li	a5,1
-    8000547a:	08f70563          	beq	a4,a5,80005504 <sys_unlink+0x130>
+    80004ace:	04491703          	lh	a4,68(s2)
+    80004ad2:	4785                	li	a5,1
+    80004ad4:	08f70563          	beq	a4,a5,80004b5e <sys_unlink+0x130>
   memset(&de, 0, sizeof(de));
-    8000547e:	4641                	li	a2,16
-    80005480:	4581                	li	a1,0
-    80005482:	fc040513          	addi	a0,s0,-64
-    80005486:	ffffc097          	auipc	ra,0xffffc
-    8000548a:	876080e7          	jalr	-1930(ra) # 80000cfc <memset>
+    80004ad8:	4641                	li	a2,16
+    80004ada:	4581                	li	a1,0
+    80004adc:	fc040513          	addi	a0,s0,-64
+    80004ae0:	ffffb097          	auipc	ra,0xffffb
+    80004ae4:	6be080e7          	jalr	1726(ra) # 8000019e <memset>
   if(writei(dp, 0, (uint64)&de, off, sizeof(de)) != sizeof(de))
-    8000548e:	4741                	li	a4,16
-    80005490:	f2c42683          	lw	a3,-212(s0)
-    80005494:	fc040613          	addi	a2,s0,-64
-    80005498:	4581                	li	a1,0
-    8000549a:	8526                	mv	a0,s1
-    8000549c:	ffffe097          	auipc	ra,0xffffe
-    800054a0:	508080e7          	jalr	1288(ra) # 800039a4 <writei>
-    800054a4:	47c1                	li	a5,16
-    800054a6:	0af51563          	bne	a0,a5,80005550 <sys_unlink+0x17c>
+    80004ae8:	4741                	li	a4,16
+    80004aea:	f2c42683          	lw	a3,-212(s0)
+    80004aee:	fc040613          	addi	a2,s0,-64
+    80004af2:	4581                	li	a1,0
+    80004af4:	8526                	mv	a0,s1
+    80004af6:	ffffe097          	auipc	ra,0xffffe
+    80004afa:	524080e7          	jalr	1316(ra) # 8000301a <writei>
+    80004afe:	47c1                	li	a5,16
+    80004b00:	0af51563          	bne	a0,a5,80004baa <sys_unlink+0x17c>
   if(ip->type == T_DIR){
-    800054aa:	04491703          	lh	a4,68(s2)
-    800054ae:	4785                	li	a5,1
-    800054b0:	0af70863          	beq	a4,a5,80005560 <sys_unlink+0x18c>
+    80004b04:	04491703          	lh	a4,68(s2)
+    80004b08:	4785                	li	a5,1
+    80004b0a:	0af70863          	beq	a4,a5,80004bba <sys_unlink+0x18c>
   iunlockput(dp);
-    800054b4:	8526                	mv	a0,s1
-    800054b6:	ffffe097          	auipc	ra,0xffffe
-    800054ba:	3a6080e7          	jalr	934(ra) # 8000385c <iunlockput>
+    80004b0e:	8526                	mv	a0,s1
+    80004b10:	ffffe097          	auipc	ra,0xffffe
+    80004b14:	3c0080e7          	jalr	960(ra) # 80002ed0 <iunlockput>
   ip->nlink--;
-    800054be:	04a95783          	lhu	a5,74(s2)
-    800054c2:	37fd                	addiw	a5,a5,-1
-    800054c4:	04f91523          	sh	a5,74(s2)
+    80004b18:	04a95783          	lhu	a5,74(s2)
+    80004b1c:	37fd                	addiw	a5,a5,-1
+    80004b1e:	04f91523          	sh	a5,74(s2)
   iupdate(ip);
-    800054c8:	854a                	mv	a0,s2
-    800054ca:	ffffe097          	auipc	ra,0xffffe
-    800054ce:	064080e7          	jalr	100(ra) # 8000352e <iupdate>
+    80004b22:	854a                	mv	a0,s2
+    80004b24:	ffffe097          	auipc	ra,0xffffe
+    80004b28:	07e080e7          	jalr	126(ra) # 80002ba2 <iupdate>
   iunlockput(ip);
-    800054d2:	854a                	mv	a0,s2
-    800054d4:	ffffe097          	auipc	ra,0xffffe
-    800054d8:	388080e7          	jalr	904(ra) # 8000385c <iunlockput>
+    80004b2c:	854a                	mv	a0,s2
+    80004b2e:	ffffe097          	auipc	ra,0xffffe
+    80004b32:	3a2080e7          	jalr	930(ra) # 80002ed0 <iunlockput>
   end_op();
-    800054dc:	fffff097          	auipc	ra,0xfffff
-    800054e0:	b62080e7          	jalr	-1182(ra) # 8000403e <end_op>
+    80004b36:	fffff097          	auipc	ra,0xfffff
+    80004b3a:	b92080e7          	jalr	-1134(ra) # 800036c8 <end_op>
   return 0;
-    800054e4:	4501                	li	a0,0
-    800054e6:	a84d                	j	80005598 <sys_unlink+0x1c4>
+    80004b3e:	4501                	li	a0,0
+    80004b40:	a84d                	j	80004bf2 <sys_unlink+0x1c4>
     end_op();
-    800054e8:	fffff097          	auipc	ra,0xfffff
-    800054ec:	b56080e7          	jalr	-1194(ra) # 8000403e <end_op>
+    80004b42:	fffff097          	auipc	ra,0xfffff
+    80004b46:	b86080e7          	jalr	-1146(ra) # 800036c8 <end_op>
     return -1;
-    800054f0:	557d                	li	a0,-1
-    800054f2:	a05d                	j	80005598 <sys_unlink+0x1c4>
+    80004b4a:	557d                	li	a0,-1
+    80004b4c:	a05d                	j	80004bf2 <sys_unlink+0x1c4>
     panic("unlink: nlink < 1");
-    800054f4:	00003517          	auipc	a0,0x3
-    800054f8:	22450513          	addi	a0,a0,548 # 80008718 <syscalls+0x2f0>
-    800054fc:	ffffb097          	auipc	ra,0xffffb
-    80005500:	04a080e7          	jalr	74(ra) # 80000546 <panic>
+    80004b4e:	00004517          	auipc	a0,0x4
+    80004b52:	d1250513          	addi	a0,a0,-750 # 80008860 <syscall_name+0x2e0>
+    80004b56:	00001097          	auipc	ra,0x1
+    80004b5a:	19a080e7          	jalr	410(ra) # 80005cf0 <panic>
   for(off=2*sizeof(de); off<dp->size; off+=sizeof(de)){
-    80005504:	04c92703          	lw	a4,76(s2)
-    80005508:	02000793          	li	a5,32
-    8000550c:	f6e7f9e3          	bgeu	a5,a4,8000547e <sys_unlink+0xaa>
-    80005510:	02000993          	li	s3,32
+    80004b5e:	04c92703          	lw	a4,76(s2)
+    80004b62:	02000793          	li	a5,32
+    80004b66:	f6e7f9e3          	bgeu	a5,a4,80004ad8 <sys_unlink+0xaa>
+    80004b6a:	02000993          	li	s3,32
     if(readi(dp, 0, (uint64)&de, off, sizeof(de)) != sizeof(de))
-    80005514:	4741                	li	a4,16
-    80005516:	86ce                	mv	a3,s3
-    80005518:	f1840613          	addi	a2,s0,-232
-    8000551c:	4581                	li	a1,0
-    8000551e:	854a                	mv	a0,s2
-    80005520:	ffffe097          	auipc	ra,0xffffe
-    80005524:	38e080e7          	jalr	910(ra) # 800038ae <readi>
-    80005528:	47c1                	li	a5,16
-    8000552a:	00f51b63          	bne	a0,a5,80005540 <sys_unlink+0x16c>
+    80004b6e:	4741                	li	a4,16
+    80004b70:	86ce                	mv	a3,s3
+    80004b72:	f1840613          	addi	a2,s0,-232
+    80004b76:	4581                	li	a1,0
+    80004b78:	854a                	mv	a0,s2
+    80004b7a:	ffffe097          	auipc	ra,0xffffe
+    80004b7e:	3a8080e7          	jalr	936(ra) # 80002f22 <readi>
+    80004b82:	47c1                	li	a5,16
+    80004b84:	00f51b63          	bne	a0,a5,80004b9a <sys_unlink+0x16c>
     if(de.inum != 0)
-    8000552e:	f1845783          	lhu	a5,-232(s0)
-    80005532:	e7a1                	bnez	a5,8000557a <sys_unlink+0x1a6>
+    80004b88:	f1845783          	lhu	a5,-232(s0)
+    80004b8c:	e7a1                	bnez	a5,80004bd4 <sys_unlink+0x1a6>
   for(off=2*sizeof(de); off<dp->size; off+=sizeof(de)){
-    80005534:	29c1                	addiw	s3,s3,16
-    80005536:	04c92783          	lw	a5,76(s2)
-    8000553a:	fcf9ede3          	bltu	s3,a5,80005514 <sys_unlink+0x140>
-    8000553e:	b781                	j	8000547e <sys_unlink+0xaa>
+    80004b8e:	29c1                	addiw	s3,s3,16
+    80004b90:	04c92783          	lw	a5,76(s2)
+    80004b94:	fcf9ede3          	bltu	s3,a5,80004b6e <sys_unlink+0x140>
+    80004b98:	b781                	j	80004ad8 <sys_unlink+0xaa>
       panic("isdirempty: readi");
-    80005540:	00003517          	auipc	a0,0x3
-    80005544:	1f050513          	addi	a0,a0,496 # 80008730 <syscalls+0x308>
-    80005548:	ffffb097          	auipc	ra,0xffffb
-    8000554c:	ffe080e7          	jalr	-2(ra) # 80000546 <panic>
+    80004b9a:	00004517          	auipc	a0,0x4
+    80004b9e:	cde50513          	addi	a0,a0,-802 # 80008878 <syscall_name+0x2f8>
+    80004ba2:	00001097          	auipc	ra,0x1
+    80004ba6:	14e080e7          	jalr	334(ra) # 80005cf0 <panic>
     panic("unlink: writei");
-    80005550:	00003517          	auipc	a0,0x3
-    80005554:	1f850513          	addi	a0,a0,504 # 80008748 <syscalls+0x320>
-    80005558:	ffffb097          	auipc	ra,0xffffb
-    8000555c:	fee080e7          	jalr	-18(ra) # 80000546 <panic>
+    80004baa:	00004517          	auipc	a0,0x4
+    80004bae:	ce650513          	addi	a0,a0,-794 # 80008890 <syscall_name+0x310>
+    80004bb2:	00001097          	auipc	ra,0x1
+    80004bb6:	13e080e7          	jalr	318(ra) # 80005cf0 <panic>
     dp->nlink--;
-    80005560:	04a4d783          	lhu	a5,74(s1)
-    80005564:	37fd                	addiw	a5,a5,-1
-    80005566:	04f49523          	sh	a5,74(s1)
+    80004bba:	04a4d783          	lhu	a5,74(s1)
+    80004bbe:	37fd                	addiw	a5,a5,-1
+    80004bc0:	04f49523          	sh	a5,74(s1)
     iupdate(dp);
-    8000556a:	8526                	mv	a0,s1
-    8000556c:	ffffe097          	auipc	ra,0xffffe
-    80005570:	fc2080e7          	jalr	-62(ra) # 8000352e <iupdate>
-    80005574:	b781                	j	800054b4 <sys_unlink+0xe0>
+    80004bc4:	8526                	mv	a0,s1
+    80004bc6:	ffffe097          	auipc	ra,0xffffe
+    80004bca:	fdc080e7          	jalr	-36(ra) # 80002ba2 <iupdate>
+    80004bce:	b781                	j	80004b0e <sys_unlink+0xe0>
     return -1;
-    80005576:	557d                	li	a0,-1
-    80005578:	a005                	j	80005598 <sys_unlink+0x1c4>
+    80004bd0:	557d                	li	a0,-1
+    80004bd2:	a005                	j	80004bf2 <sys_unlink+0x1c4>
     iunlockput(ip);
-    8000557a:	854a                	mv	a0,s2
-    8000557c:	ffffe097          	auipc	ra,0xffffe
-    80005580:	2e0080e7          	jalr	736(ra) # 8000385c <iunlockput>
+    80004bd4:	854a                	mv	a0,s2
+    80004bd6:	ffffe097          	auipc	ra,0xffffe
+    80004bda:	2fa080e7          	jalr	762(ra) # 80002ed0 <iunlockput>
   iunlockput(dp);
-    80005584:	8526                	mv	a0,s1
-    80005586:	ffffe097          	auipc	ra,0xffffe
-    8000558a:	2d6080e7          	jalr	726(ra) # 8000385c <iunlockput>
+    80004bde:	8526                	mv	a0,s1
+    80004be0:	ffffe097          	auipc	ra,0xffffe
+    80004be4:	2f0080e7          	jalr	752(ra) # 80002ed0 <iunlockput>
   end_op();
-    8000558e:	fffff097          	auipc	ra,0xfffff
-    80005592:	ab0080e7          	jalr	-1360(ra) # 8000403e <end_op>
+    80004be8:	fffff097          	auipc	ra,0xfffff
+    80004bec:	ae0080e7          	jalr	-1312(ra) # 800036c8 <end_op>
   return -1;
-    80005596:	557d                	li	a0,-1
+    80004bf0:	557d                	li	a0,-1
 }
-    80005598:	70ae                	ld	ra,232(sp)
-    8000559a:	740e                	ld	s0,224(sp)
-    8000559c:	64ee                	ld	s1,216(sp)
-    8000559e:	694e                	ld	s2,208(sp)
-    800055a0:	69ae                	ld	s3,200(sp)
-    800055a2:	616d                	addi	sp,sp,240
-    800055a4:	8082                	ret
+    80004bf2:	70ae                	ld	ra,232(sp)
+    80004bf4:	740e                	ld	s0,224(sp)
+    80004bf6:	64ee                	ld	s1,216(sp)
+    80004bf8:	694e                	ld	s2,208(sp)
+    80004bfa:	69ae                	ld	s3,200(sp)
+    80004bfc:	616d                	addi	sp,sp,240
+    80004bfe:	8082                	ret
 
-00000000800055a6 <sys_open>:
+0000000080004c00 <sys_open>:
 
 uint64
 sys_open(void)
 {
-    800055a6:	7131                	addi	sp,sp,-192
-    800055a8:	fd06                	sd	ra,184(sp)
-    800055aa:	f922                	sd	s0,176(sp)
-    800055ac:	f526                	sd	s1,168(sp)
-    800055ae:	f14a                	sd	s2,160(sp)
-    800055b0:	ed4e                	sd	s3,152(sp)
-    800055b2:	0180                	addi	s0,sp,192
+    80004c00:	7131                	addi	sp,sp,-192
+    80004c02:	fd06                	sd	ra,184(sp)
+    80004c04:	f922                	sd	s0,176(sp)
+    80004c06:	f526                	sd	s1,168(sp)
+    80004c08:	f14a                	sd	s2,160(sp)
+    80004c0a:	ed4e                	sd	s3,152(sp)
+    80004c0c:	0180                	addi	s0,sp,192
   int fd, omode;
   struct file *f;
   struct inode *ip;
   int n;
 
   if((n = argstr(0, path, MAXPATH)) < 0 || argint(1, &omode) < 0)
-    800055b4:	08000613          	li	a2,128
-    800055b8:	f5040593          	addi	a1,s0,-176
-    800055bc:	4501                	li	a0,0
-    800055be:	ffffd097          	auipc	ra,0xffffd
-    800055c2:	50e080e7          	jalr	1294(ra) # 80002acc <argstr>
+    80004c0e:	08000613          	li	a2,128
+    80004c12:	f5040593          	addi	a1,s0,-176
+    80004c16:	4501                	li	a0,0
+    80004c18:	ffffd097          	auipc	ra,0xffffd
+    80004c1c:	456080e7          	jalr	1110(ra) # 8000206e <argstr>
     return -1;
-    800055c6:	54fd                	li	s1,-1
+    80004c20:	54fd                	li	s1,-1
   if((n = argstr(0, path, MAXPATH)) < 0 || argint(1, &omode) < 0)
-    800055c8:	0c054163          	bltz	a0,8000568a <sys_open+0xe4>
-    800055cc:	f4c40593          	addi	a1,s0,-180
-    800055d0:	4505                	li	a0,1
-    800055d2:	ffffd097          	auipc	ra,0xffffd
-    800055d6:	4b6080e7          	jalr	1206(ra) # 80002a88 <argint>
-    800055da:	0a054863          	bltz	a0,8000568a <sys_open+0xe4>
+    80004c22:	0c054163          	bltz	a0,80004ce4 <sys_open+0xe4>
+    80004c26:	f4c40593          	addi	a1,s0,-180
+    80004c2a:	4505                	li	a0,1
+    80004c2c:	ffffd097          	auipc	ra,0xffffd
+    80004c30:	3fe080e7          	jalr	1022(ra) # 8000202a <argint>
+    80004c34:	0a054863          	bltz	a0,80004ce4 <sys_open+0xe4>
 
   begin_op();
-    800055de:	fffff097          	auipc	ra,0xfffff
-    800055e2:	9e2080e7          	jalr	-1566(ra) # 80003fc0 <begin_op>
+    80004c38:	fffff097          	auipc	ra,0xfffff
+    80004c3c:	a12080e7          	jalr	-1518(ra) # 8000364a <begin_op>
 
   if(omode & O_CREATE){
-    800055e6:	f4c42783          	lw	a5,-180(s0)
-    800055ea:	2007f793          	andi	a5,a5,512
-    800055ee:	cbdd                	beqz	a5,800056a4 <sys_open+0xfe>
+    80004c40:	f4c42783          	lw	a5,-180(s0)
+    80004c44:	2007f793          	andi	a5,a5,512
+    80004c48:	cbdd                	beqz	a5,80004cfe <sys_open+0xfe>
     ip = create(path, T_FILE, 0, 0);
-    800055f0:	4681                	li	a3,0
-    800055f2:	4601                	li	a2,0
-    800055f4:	4589                	li	a1,2
-    800055f6:	f5040513          	addi	a0,s0,-176
-    800055fa:	00000097          	auipc	ra,0x0
-    800055fe:	970080e7          	jalr	-1680(ra) # 80004f6a <create>
-    80005602:	892a                	mv	s2,a0
+    80004c4a:	4681                	li	a3,0
+    80004c4c:	4601                	li	a2,0
+    80004c4e:	4589                	li	a1,2
+    80004c50:	f5040513          	addi	a0,s0,-176
+    80004c54:	00000097          	auipc	ra,0x0
+    80004c58:	970080e7          	jalr	-1680(ra) # 800045c4 <create>
+    80004c5c:	892a                	mv	s2,a0
     if(ip == 0){
-    80005604:	c959                	beqz	a0,8000569a <sys_open+0xf4>
+    80004c5e:	c959                	beqz	a0,80004cf4 <sys_open+0xf4>
       end_op();
       return -1;
     }
   }
 
   if(ip->type == T_DEVICE && (ip->major < 0 || ip->major >= NDEV)){
-    80005606:	04491703          	lh	a4,68(s2)
-    8000560a:	478d                	li	a5,3
-    8000560c:	00f71763          	bne	a4,a5,8000561a <sys_open+0x74>
-    80005610:	04695703          	lhu	a4,70(s2)
-    80005614:	47a5                	li	a5,9
-    80005616:	0ce7ec63          	bltu	a5,a4,800056ee <sys_open+0x148>
+    80004c60:	04491703          	lh	a4,68(s2)
+    80004c64:	478d                	li	a5,3
+    80004c66:	00f71763          	bne	a4,a5,80004c74 <sys_open+0x74>
+    80004c6a:	04695703          	lhu	a4,70(s2)
+    80004c6e:	47a5                	li	a5,9
+    80004c70:	0ce7ec63          	bltu	a5,a4,80004d48 <sys_open+0x148>
     iunlockput(ip);
     end_op();
     return -1;
   }
 
   if((f = filealloc()) == 0 || (fd = fdalloc(f)) < 0){
-    8000561a:	fffff097          	auipc	ra,0xfffff
-    8000561e:	db8080e7          	jalr	-584(ra) # 800043d2 <filealloc>
-    80005622:	89aa                	mv	s3,a0
-    80005624:	10050263          	beqz	a0,80005728 <sys_open+0x182>
-    80005628:	00000097          	auipc	ra,0x0
-    8000562c:	900080e7          	jalr	-1792(ra) # 80004f28 <fdalloc>
-    80005630:	84aa                	mv	s1,a0
-    80005632:	0e054663          	bltz	a0,8000571e <sys_open+0x178>
+    80004c74:	fffff097          	auipc	ra,0xfffff
+    80004c78:	de2080e7          	jalr	-542(ra) # 80003a56 <filealloc>
+    80004c7c:	89aa                	mv	s3,a0
+    80004c7e:	10050263          	beqz	a0,80004d82 <sys_open+0x182>
+    80004c82:	00000097          	auipc	ra,0x0
+    80004c86:	900080e7          	jalr	-1792(ra) # 80004582 <fdalloc>
+    80004c8a:	84aa                	mv	s1,a0
+    80004c8c:	0e054663          	bltz	a0,80004d78 <sys_open+0x178>
     iunlockput(ip);
     end_op();
     return -1;
   }
 
   if(ip->type == T_DEVICE){
-    80005636:	04491703          	lh	a4,68(s2)
-    8000563a:	478d                	li	a5,3
-    8000563c:	0cf70463          	beq	a4,a5,80005704 <sys_open+0x15e>
+    80004c90:	04491703          	lh	a4,68(s2)
+    80004c94:	478d                	li	a5,3
+    80004c96:	0cf70463          	beq	a4,a5,80004d5e <sys_open+0x15e>
     f->type = FD_DEVICE;
     f->major = ip->major;
   } else {
     f->type = FD_INODE;
-    80005640:	4789                	li	a5,2
-    80005642:	00f9a023          	sw	a5,0(s3)
+    80004c9a:	4789                	li	a5,2
+    80004c9c:	00f9a023          	sw	a5,0(s3)
     f->off = 0;
-    80005646:	0209a023          	sw	zero,32(s3)
+    80004ca0:	0209a023          	sw	zero,32(s3)
   }
   f->ip = ip;
-    8000564a:	0129bc23          	sd	s2,24(s3)
+    80004ca4:	0129bc23          	sd	s2,24(s3)
   f->readable = !(omode & O_WRONLY);
-    8000564e:	f4c42783          	lw	a5,-180(s0)
-    80005652:	0017c713          	xori	a4,a5,1
-    80005656:	8b05                	andi	a4,a4,1
-    80005658:	00e98423          	sb	a4,8(s3)
+    80004ca8:	f4c42783          	lw	a5,-180(s0)
+    80004cac:	0017c713          	xori	a4,a5,1
+    80004cb0:	8b05                	andi	a4,a4,1
+    80004cb2:	00e98423          	sb	a4,8(s3)
   f->writable = (omode & O_WRONLY) || (omode & O_RDWR);
-    8000565c:	0037f713          	andi	a4,a5,3
-    80005660:	00e03733          	snez	a4,a4
-    80005664:	00e984a3          	sb	a4,9(s3)
+    80004cb6:	0037f713          	andi	a4,a5,3
+    80004cba:	00e03733          	snez	a4,a4
+    80004cbe:	00e984a3          	sb	a4,9(s3)
 
   if((omode & O_TRUNC) && ip->type == T_FILE){
-    80005668:	4007f793          	andi	a5,a5,1024
-    8000566c:	c791                	beqz	a5,80005678 <sys_open+0xd2>
-    8000566e:	04491703          	lh	a4,68(s2)
-    80005672:	4789                	li	a5,2
-    80005674:	08f70f63          	beq	a4,a5,80005712 <sys_open+0x16c>
+    80004cc2:	4007f793          	andi	a5,a5,1024
+    80004cc6:	c791                	beqz	a5,80004cd2 <sys_open+0xd2>
+    80004cc8:	04491703          	lh	a4,68(s2)
+    80004ccc:	4789                	li	a5,2
+    80004cce:	08f70f63          	beq	a4,a5,80004d6c <sys_open+0x16c>
     itrunc(ip);
   }
 
   iunlock(ip);
-    80005678:	854a                	mv	a0,s2
-    8000567a:	ffffe097          	auipc	ra,0xffffe
-    8000567e:	042080e7          	jalr	66(ra) # 800036bc <iunlock>
+    80004cd2:	854a                	mv	a0,s2
+    80004cd4:	ffffe097          	auipc	ra,0xffffe
+    80004cd8:	05c080e7          	jalr	92(ra) # 80002d30 <iunlock>
   end_op();
-    80005682:	fffff097          	auipc	ra,0xfffff
-    80005686:	9bc080e7          	jalr	-1604(ra) # 8000403e <end_op>
+    80004cdc:	fffff097          	auipc	ra,0xfffff
+    80004ce0:	9ec080e7          	jalr	-1556(ra) # 800036c8 <end_op>
 
   return fd;
 }
-    8000568a:	8526                	mv	a0,s1
-    8000568c:	70ea                	ld	ra,184(sp)
-    8000568e:	744a                	ld	s0,176(sp)
-    80005690:	74aa                	ld	s1,168(sp)
-    80005692:	790a                	ld	s2,160(sp)
-    80005694:	69ea                	ld	s3,152(sp)
-    80005696:	6129                	addi	sp,sp,192
-    80005698:	8082                	ret
+    80004ce4:	8526                	mv	a0,s1
+    80004ce6:	70ea                	ld	ra,184(sp)
+    80004ce8:	744a                	ld	s0,176(sp)
+    80004cea:	74aa                	ld	s1,168(sp)
+    80004cec:	790a                	ld	s2,160(sp)
+    80004cee:	69ea                	ld	s3,152(sp)
+    80004cf0:	6129                	addi	sp,sp,192
+    80004cf2:	8082                	ret
       end_op();
-    8000569a:	fffff097          	auipc	ra,0xfffff
-    8000569e:	9a4080e7          	jalr	-1628(ra) # 8000403e <end_op>
+    80004cf4:	fffff097          	auipc	ra,0xfffff
+    80004cf8:	9d4080e7          	jalr	-1580(ra) # 800036c8 <end_op>
       return -1;
-    800056a2:	b7e5                	j	8000568a <sys_open+0xe4>
+    80004cfc:	b7e5                	j	80004ce4 <sys_open+0xe4>
     if((ip = namei(path)) == 0){
-    800056a4:	f5040513          	addi	a0,s0,-176
-    800056a8:	ffffe097          	auipc	ra,0xffffe
-    800056ac:	708080e7          	jalr	1800(ra) # 80003db0 <namei>
-    800056b0:	892a                	mv	s2,a0
-    800056b2:	c905                	beqz	a0,800056e2 <sys_open+0x13c>
+    80004cfe:	f5040513          	addi	a0,s0,-176
+    80004d02:	ffffe097          	auipc	ra,0xffffe
+    80004d06:	728080e7          	jalr	1832(ra) # 8000342a <namei>
+    80004d0a:	892a                	mv	s2,a0
+    80004d0c:	c905                	beqz	a0,80004d3c <sys_open+0x13c>
     ilock(ip);
-    800056b4:	ffffe097          	auipc	ra,0xffffe
-    800056b8:	f46080e7          	jalr	-186(ra) # 800035fa <ilock>
+    80004d0e:	ffffe097          	auipc	ra,0xffffe
+    80004d12:	f60080e7          	jalr	-160(ra) # 80002c6e <ilock>
     if(ip->type == T_DIR && omode != O_RDONLY){
-    800056bc:	04491703          	lh	a4,68(s2)
-    800056c0:	4785                	li	a5,1
-    800056c2:	f4f712e3          	bne	a4,a5,80005606 <sys_open+0x60>
-    800056c6:	f4c42783          	lw	a5,-180(s0)
-    800056ca:	dba1                	beqz	a5,8000561a <sys_open+0x74>
+    80004d16:	04491703          	lh	a4,68(s2)
+    80004d1a:	4785                	li	a5,1
+    80004d1c:	f4f712e3          	bne	a4,a5,80004c60 <sys_open+0x60>
+    80004d20:	f4c42783          	lw	a5,-180(s0)
+    80004d24:	dba1                	beqz	a5,80004c74 <sys_open+0x74>
       iunlockput(ip);
-    800056cc:	854a                	mv	a0,s2
-    800056ce:	ffffe097          	auipc	ra,0xffffe
-    800056d2:	18e080e7          	jalr	398(ra) # 8000385c <iunlockput>
+    80004d26:	854a                	mv	a0,s2
+    80004d28:	ffffe097          	auipc	ra,0xffffe
+    80004d2c:	1a8080e7          	jalr	424(ra) # 80002ed0 <iunlockput>
       end_op();
-    800056d6:	fffff097          	auipc	ra,0xfffff
-    800056da:	968080e7          	jalr	-1688(ra) # 8000403e <end_op>
+    80004d30:	fffff097          	auipc	ra,0xfffff
+    80004d34:	998080e7          	jalr	-1640(ra) # 800036c8 <end_op>
       return -1;
-    800056de:	54fd                	li	s1,-1
-    800056e0:	b76d                	j	8000568a <sys_open+0xe4>
+    80004d38:	54fd                	li	s1,-1
+    80004d3a:	b76d                	j	80004ce4 <sys_open+0xe4>
       end_op();
-    800056e2:	fffff097          	auipc	ra,0xfffff
-    800056e6:	95c080e7          	jalr	-1700(ra) # 8000403e <end_op>
+    80004d3c:	fffff097          	auipc	ra,0xfffff
+    80004d40:	98c080e7          	jalr	-1652(ra) # 800036c8 <end_op>
       return -1;
-    800056ea:	54fd                	li	s1,-1
-    800056ec:	bf79                	j	8000568a <sys_open+0xe4>
+    80004d44:	54fd                	li	s1,-1
+    80004d46:	bf79                	j	80004ce4 <sys_open+0xe4>
     iunlockput(ip);
-    800056ee:	854a                	mv	a0,s2
-    800056f0:	ffffe097          	auipc	ra,0xffffe
-    800056f4:	16c080e7          	jalr	364(ra) # 8000385c <iunlockput>
+    80004d48:	854a                	mv	a0,s2
+    80004d4a:	ffffe097          	auipc	ra,0xffffe
+    80004d4e:	186080e7          	jalr	390(ra) # 80002ed0 <iunlockput>
     end_op();
-    800056f8:	fffff097          	auipc	ra,0xfffff
-    800056fc:	946080e7          	jalr	-1722(ra) # 8000403e <end_op>
+    80004d52:	fffff097          	auipc	ra,0xfffff
+    80004d56:	976080e7          	jalr	-1674(ra) # 800036c8 <end_op>
     return -1;
-    80005700:	54fd                	li	s1,-1
-    80005702:	b761                	j	8000568a <sys_open+0xe4>
+    80004d5a:	54fd                	li	s1,-1
+    80004d5c:	b761                	j	80004ce4 <sys_open+0xe4>
     f->type = FD_DEVICE;
-    80005704:	00f9a023          	sw	a5,0(s3)
+    80004d5e:	00f9a023          	sw	a5,0(s3)
     f->major = ip->major;
-    80005708:	04691783          	lh	a5,70(s2)
-    8000570c:	02f99223          	sh	a5,36(s3)
-    80005710:	bf2d                	j	8000564a <sys_open+0xa4>
+    80004d62:	04691783          	lh	a5,70(s2)
+    80004d66:	02f99223          	sh	a5,36(s3)
+    80004d6a:	bf2d                	j	80004ca4 <sys_open+0xa4>
     itrunc(ip);
-    80005712:	854a                	mv	a0,s2
-    80005714:	ffffe097          	auipc	ra,0xffffe
-    80005718:	ff4080e7          	jalr	-12(ra) # 80003708 <itrunc>
-    8000571c:	bfb1                	j	80005678 <sys_open+0xd2>
+    80004d6c:	854a                	mv	a0,s2
+    80004d6e:	ffffe097          	auipc	ra,0xffffe
+    80004d72:	00e080e7          	jalr	14(ra) # 80002d7c <itrunc>
+    80004d76:	bfb1                	j	80004cd2 <sys_open+0xd2>
       fileclose(f);
-    8000571e:	854e                	mv	a0,s3
-    80005720:	fffff097          	auipc	ra,0xfffff
-    80005724:	d6e080e7          	jalr	-658(ra) # 8000448e <fileclose>
+    80004d78:	854e                	mv	a0,s3
+    80004d7a:	fffff097          	auipc	ra,0xfffff
+    80004d7e:	d98080e7          	jalr	-616(ra) # 80003b12 <fileclose>
     iunlockput(ip);
-    80005728:	854a                	mv	a0,s2
-    8000572a:	ffffe097          	auipc	ra,0xffffe
-    8000572e:	132080e7          	jalr	306(ra) # 8000385c <iunlockput>
+    80004d82:	854a                	mv	a0,s2
+    80004d84:	ffffe097          	auipc	ra,0xffffe
+    80004d88:	14c080e7          	jalr	332(ra) # 80002ed0 <iunlockput>
     end_op();
-    80005732:	fffff097          	auipc	ra,0xfffff
-    80005736:	90c080e7          	jalr	-1780(ra) # 8000403e <end_op>
+    80004d8c:	fffff097          	auipc	ra,0xfffff
+    80004d90:	93c080e7          	jalr	-1732(ra) # 800036c8 <end_op>
     return -1;
-    8000573a:	54fd                	li	s1,-1
-    8000573c:	b7b9                	j	8000568a <sys_open+0xe4>
+    80004d94:	54fd                	li	s1,-1
+    80004d96:	b7b9                	j	80004ce4 <sys_open+0xe4>
 
-000000008000573e <sys_mkdir>:
+0000000080004d98 <sys_mkdir>:
 
 uint64
 sys_mkdir(void)
 {
-    8000573e:	7175                	addi	sp,sp,-144
-    80005740:	e506                	sd	ra,136(sp)
-    80005742:	e122                	sd	s0,128(sp)
-    80005744:	0900                	addi	s0,sp,144
+    80004d98:	7175                	addi	sp,sp,-144
+    80004d9a:	e506                	sd	ra,136(sp)
+    80004d9c:	e122                	sd	s0,128(sp)
+    80004d9e:	0900                	addi	s0,sp,144
   char path[MAXPATH];
   struct inode *ip;
 
   begin_op();
-    80005746:	fffff097          	auipc	ra,0xfffff
-    8000574a:	87a080e7          	jalr	-1926(ra) # 80003fc0 <begin_op>
+    80004da0:	fffff097          	auipc	ra,0xfffff
+    80004da4:	8aa080e7          	jalr	-1878(ra) # 8000364a <begin_op>
   if(argstr(0, path, MAXPATH) < 0 || (ip = create(path, T_DIR, 0, 0)) == 0){
-    8000574e:	08000613          	li	a2,128
-    80005752:	f7040593          	addi	a1,s0,-144
-    80005756:	4501                	li	a0,0
-    80005758:	ffffd097          	auipc	ra,0xffffd
-    8000575c:	374080e7          	jalr	884(ra) # 80002acc <argstr>
-    80005760:	02054963          	bltz	a0,80005792 <sys_mkdir+0x54>
-    80005764:	4681                	li	a3,0
-    80005766:	4601                	li	a2,0
-    80005768:	4585                	li	a1,1
-    8000576a:	f7040513          	addi	a0,s0,-144
-    8000576e:	fffff097          	auipc	ra,0xfffff
-    80005772:	7fc080e7          	jalr	2044(ra) # 80004f6a <create>
-    80005776:	cd11                	beqz	a0,80005792 <sys_mkdir+0x54>
+    80004da8:	08000613          	li	a2,128
+    80004dac:	f7040593          	addi	a1,s0,-144
+    80004db0:	4501                	li	a0,0
+    80004db2:	ffffd097          	auipc	ra,0xffffd
+    80004db6:	2bc080e7          	jalr	700(ra) # 8000206e <argstr>
+    80004dba:	02054963          	bltz	a0,80004dec <sys_mkdir+0x54>
+    80004dbe:	4681                	li	a3,0
+    80004dc0:	4601                	li	a2,0
+    80004dc2:	4585                	li	a1,1
+    80004dc4:	f7040513          	addi	a0,s0,-144
+    80004dc8:	fffff097          	auipc	ra,0xfffff
+    80004dcc:	7fc080e7          	jalr	2044(ra) # 800045c4 <create>
+    80004dd0:	cd11                	beqz	a0,80004dec <sys_mkdir+0x54>
     end_op();
     return -1;
   }
   iunlockput(ip);
-    80005778:	ffffe097          	auipc	ra,0xffffe
-    8000577c:	0e4080e7          	jalr	228(ra) # 8000385c <iunlockput>
+    80004dd2:	ffffe097          	auipc	ra,0xffffe
+    80004dd6:	0fe080e7          	jalr	254(ra) # 80002ed0 <iunlockput>
   end_op();
-    80005780:	fffff097          	auipc	ra,0xfffff
-    80005784:	8be080e7          	jalr	-1858(ra) # 8000403e <end_op>
+    80004dda:	fffff097          	auipc	ra,0xfffff
+    80004dde:	8ee080e7          	jalr	-1810(ra) # 800036c8 <end_op>
   return 0;
-    80005788:	4501                	li	a0,0
+    80004de2:	4501                	li	a0,0
 }
-    8000578a:	60aa                	ld	ra,136(sp)
-    8000578c:	640a                	ld	s0,128(sp)
-    8000578e:	6149                	addi	sp,sp,144
-    80005790:	8082                	ret
+    80004de4:	60aa                	ld	ra,136(sp)
+    80004de6:	640a                	ld	s0,128(sp)
+    80004de8:	6149                	addi	sp,sp,144
+    80004dea:	8082                	ret
     end_op();
-    80005792:	fffff097          	auipc	ra,0xfffff
-    80005796:	8ac080e7          	jalr	-1876(ra) # 8000403e <end_op>
+    80004dec:	fffff097          	auipc	ra,0xfffff
+    80004df0:	8dc080e7          	jalr	-1828(ra) # 800036c8 <end_op>
     return -1;
-    8000579a:	557d                	li	a0,-1
-    8000579c:	b7fd                	j	8000578a <sys_mkdir+0x4c>
+    80004df4:	557d                	li	a0,-1
+    80004df6:	b7fd                	j	80004de4 <sys_mkdir+0x4c>
 
-000000008000579e <sys_mknod>:
+0000000080004df8 <sys_mknod>:
 
 uint64
 sys_mknod(void)
 {
-    8000579e:	7135                	addi	sp,sp,-160
-    800057a0:	ed06                	sd	ra,152(sp)
-    800057a2:	e922                	sd	s0,144(sp)
-    800057a4:	1100                	addi	s0,sp,160
+    80004df8:	7135                	addi	sp,sp,-160
+    80004dfa:	ed06                	sd	ra,152(sp)
+    80004dfc:	e922                	sd	s0,144(sp)
+    80004dfe:	1100                	addi	s0,sp,160
   struct inode *ip;
   char path[MAXPATH];
   int major, minor;
 
   begin_op();
-    800057a6:	fffff097          	auipc	ra,0xfffff
-    800057aa:	81a080e7          	jalr	-2022(ra) # 80003fc0 <begin_op>
+    80004e00:	fffff097          	auipc	ra,0xfffff
+    80004e04:	84a080e7          	jalr	-1974(ra) # 8000364a <begin_op>
   if((argstr(0, path, MAXPATH)) < 0 ||
-    800057ae:	08000613          	li	a2,128
-    800057b2:	f7040593          	addi	a1,s0,-144
-    800057b6:	4501                	li	a0,0
-    800057b8:	ffffd097          	auipc	ra,0xffffd
-    800057bc:	314080e7          	jalr	788(ra) # 80002acc <argstr>
-    800057c0:	04054a63          	bltz	a0,80005814 <sys_mknod+0x76>
+    80004e08:	08000613          	li	a2,128
+    80004e0c:	f7040593          	addi	a1,s0,-144
+    80004e10:	4501                	li	a0,0
+    80004e12:	ffffd097          	auipc	ra,0xffffd
+    80004e16:	25c080e7          	jalr	604(ra) # 8000206e <argstr>
+    80004e1a:	04054a63          	bltz	a0,80004e6e <sys_mknod+0x76>
      argint(1, &major) < 0 ||
-    800057c4:	f6c40593          	addi	a1,s0,-148
-    800057c8:	4505                	li	a0,1
-    800057ca:	ffffd097          	auipc	ra,0xffffd
-    800057ce:	2be080e7          	jalr	702(ra) # 80002a88 <argint>
+    80004e1e:	f6c40593          	addi	a1,s0,-148
+    80004e22:	4505                	li	a0,1
+    80004e24:	ffffd097          	auipc	ra,0xffffd
+    80004e28:	206080e7          	jalr	518(ra) # 8000202a <argint>
   if((argstr(0, path, MAXPATH)) < 0 ||
-    800057d2:	04054163          	bltz	a0,80005814 <sys_mknod+0x76>
+    80004e2c:	04054163          	bltz	a0,80004e6e <sys_mknod+0x76>
      argint(2, &minor) < 0 ||
-    800057d6:	f6840593          	addi	a1,s0,-152
-    800057da:	4509                	li	a0,2
-    800057dc:	ffffd097          	auipc	ra,0xffffd
-    800057e0:	2ac080e7          	jalr	684(ra) # 80002a88 <argint>
+    80004e30:	f6840593          	addi	a1,s0,-152
+    80004e34:	4509                	li	a0,2
+    80004e36:	ffffd097          	auipc	ra,0xffffd
+    80004e3a:	1f4080e7          	jalr	500(ra) # 8000202a <argint>
      argint(1, &major) < 0 ||
-    800057e4:	02054863          	bltz	a0,80005814 <sys_mknod+0x76>
+    80004e3e:	02054863          	bltz	a0,80004e6e <sys_mknod+0x76>
      (ip = create(path, T_DEVICE, major, minor)) == 0){
-    800057e8:	f6841683          	lh	a3,-152(s0)
-    800057ec:	f6c41603          	lh	a2,-148(s0)
-    800057f0:	458d                	li	a1,3
-    800057f2:	f7040513          	addi	a0,s0,-144
-    800057f6:	fffff097          	auipc	ra,0xfffff
-    800057fa:	774080e7          	jalr	1908(ra) # 80004f6a <create>
+    80004e42:	f6841683          	lh	a3,-152(s0)
+    80004e46:	f6c41603          	lh	a2,-148(s0)
+    80004e4a:	458d                	li	a1,3
+    80004e4c:	f7040513          	addi	a0,s0,-144
+    80004e50:	fffff097          	auipc	ra,0xfffff
+    80004e54:	774080e7          	jalr	1908(ra) # 800045c4 <create>
      argint(2, &minor) < 0 ||
-    800057fe:	c919                	beqz	a0,80005814 <sys_mknod+0x76>
+    80004e58:	c919                	beqz	a0,80004e6e <sys_mknod+0x76>
     end_op();
     return -1;
   }
   iunlockput(ip);
-    80005800:	ffffe097          	auipc	ra,0xffffe
-    80005804:	05c080e7          	jalr	92(ra) # 8000385c <iunlockput>
+    80004e5a:	ffffe097          	auipc	ra,0xffffe
+    80004e5e:	076080e7          	jalr	118(ra) # 80002ed0 <iunlockput>
   end_op();
-    80005808:	fffff097          	auipc	ra,0xfffff
-    8000580c:	836080e7          	jalr	-1994(ra) # 8000403e <end_op>
+    80004e62:	fffff097          	auipc	ra,0xfffff
+    80004e66:	866080e7          	jalr	-1946(ra) # 800036c8 <end_op>
   return 0;
-    80005810:	4501                	li	a0,0
-    80005812:	a031                	j	8000581e <sys_mknod+0x80>
+    80004e6a:	4501                	li	a0,0
+    80004e6c:	a031                	j	80004e78 <sys_mknod+0x80>
     end_op();
-    80005814:	fffff097          	auipc	ra,0xfffff
-    80005818:	82a080e7          	jalr	-2006(ra) # 8000403e <end_op>
+    80004e6e:	fffff097          	auipc	ra,0xfffff
+    80004e72:	85a080e7          	jalr	-1958(ra) # 800036c8 <end_op>
     return -1;
-    8000581c:	557d                	li	a0,-1
+    80004e76:	557d                	li	a0,-1
 }
-    8000581e:	60ea                	ld	ra,152(sp)
-    80005820:	644a                	ld	s0,144(sp)
-    80005822:	610d                	addi	sp,sp,160
-    80005824:	8082                	ret
+    80004e78:	60ea                	ld	ra,152(sp)
+    80004e7a:	644a                	ld	s0,144(sp)
+    80004e7c:	610d                	addi	sp,sp,160
+    80004e7e:	8082                	ret
 
-0000000080005826 <sys_chdir>:
+0000000080004e80 <sys_chdir>:
 
 uint64
 sys_chdir(void)
 {
-    80005826:	7135                	addi	sp,sp,-160
-    80005828:	ed06                	sd	ra,152(sp)
-    8000582a:	e922                	sd	s0,144(sp)
-    8000582c:	e526                	sd	s1,136(sp)
-    8000582e:	e14a                	sd	s2,128(sp)
-    80005830:	1100                	addi	s0,sp,160
+    80004e80:	7135                	addi	sp,sp,-160
+    80004e82:	ed06                	sd	ra,152(sp)
+    80004e84:	e922                	sd	s0,144(sp)
+    80004e86:	e526                	sd	s1,136(sp)
+    80004e88:	e14a                	sd	s2,128(sp)
+    80004e8a:	1100                	addi	s0,sp,160
   char path[MAXPATH];
   struct inode *ip;
   struct proc *p = myproc();
-    80005832:	ffffc097          	auipc	ra,0xffffc
-    80005836:	19a080e7          	jalr	410(ra) # 800019cc <myproc>
-    8000583a:	892a                	mv	s2,a0
+    80004e8c:	ffffc097          	auipc	ra,0xffffc
+    80004e90:	0b2080e7          	jalr	178(ra) # 80000f3e <myproc>
+    80004e94:	892a                	mv	s2,a0
   
   begin_op();
-    8000583c:	ffffe097          	auipc	ra,0xffffe
-    80005840:	784080e7          	jalr	1924(ra) # 80003fc0 <begin_op>
+    80004e96:	ffffe097          	auipc	ra,0xffffe
+    80004e9a:	7b4080e7          	jalr	1972(ra) # 8000364a <begin_op>
   if(argstr(0, path, MAXPATH) < 0 || (ip = namei(path)) == 0){
-    80005844:	08000613          	li	a2,128
-    80005848:	f6040593          	addi	a1,s0,-160
-    8000584c:	4501                	li	a0,0
-    8000584e:	ffffd097          	auipc	ra,0xffffd
-    80005852:	27e080e7          	jalr	638(ra) # 80002acc <argstr>
-    80005856:	04054b63          	bltz	a0,800058ac <sys_chdir+0x86>
-    8000585a:	f6040513          	addi	a0,s0,-160
-    8000585e:	ffffe097          	auipc	ra,0xffffe
-    80005862:	552080e7          	jalr	1362(ra) # 80003db0 <namei>
-    80005866:	84aa                	mv	s1,a0
-    80005868:	c131                	beqz	a0,800058ac <sys_chdir+0x86>
+    80004e9e:	08000613          	li	a2,128
+    80004ea2:	f6040593          	addi	a1,s0,-160
+    80004ea6:	4501                	li	a0,0
+    80004ea8:	ffffd097          	auipc	ra,0xffffd
+    80004eac:	1c6080e7          	jalr	454(ra) # 8000206e <argstr>
+    80004eb0:	04054b63          	bltz	a0,80004f06 <sys_chdir+0x86>
+    80004eb4:	f6040513          	addi	a0,s0,-160
+    80004eb8:	ffffe097          	auipc	ra,0xffffe
+    80004ebc:	572080e7          	jalr	1394(ra) # 8000342a <namei>
+    80004ec0:	84aa                	mv	s1,a0
+    80004ec2:	c131                	beqz	a0,80004f06 <sys_chdir+0x86>
     end_op();
     return -1;
   }
   ilock(ip);
-    8000586a:	ffffe097          	auipc	ra,0xffffe
-    8000586e:	d90080e7          	jalr	-624(ra) # 800035fa <ilock>
+    80004ec4:	ffffe097          	auipc	ra,0xffffe
+    80004ec8:	daa080e7          	jalr	-598(ra) # 80002c6e <ilock>
   if(ip->type != T_DIR){
-    80005872:	04449703          	lh	a4,68(s1)
-    80005876:	4785                	li	a5,1
-    80005878:	04f71063          	bne	a4,a5,800058b8 <sys_chdir+0x92>
+    80004ecc:	04449703          	lh	a4,68(s1)
+    80004ed0:	4785                	li	a5,1
+    80004ed2:	04f71063          	bne	a4,a5,80004f12 <sys_chdir+0x92>
     iunlockput(ip);
     end_op();
     return -1;
   }
   iunlock(ip);
-    8000587c:	8526                	mv	a0,s1
-    8000587e:	ffffe097          	auipc	ra,0xffffe
-    80005882:	e3e080e7          	jalr	-450(ra) # 800036bc <iunlock>
+    80004ed6:	8526                	mv	a0,s1
+    80004ed8:	ffffe097          	auipc	ra,0xffffe
+    80004edc:	e58080e7          	jalr	-424(ra) # 80002d30 <iunlock>
   iput(p->cwd);
-    80005886:	15093503          	ld	a0,336(s2)
-    8000588a:	ffffe097          	auipc	ra,0xffffe
-    8000588e:	f2a080e7          	jalr	-214(ra) # 800037b4 <iput>
+    80004ee0:	15093503          	ld	a0,336(s2)
+    80004ee4:	ffffe097          	auipc	ra,0xffffe
+    80004ee8:	f44080e7          	jalr	-188(ra) # 80002e28 <iput>
   end_op();
-    80005892:	ffffe097          	auipc	ra,0xffffe
-    80005896:	7ac080e7          	jalr	1964(ra) # 8000403e <end_op>
+    80004eec:	ffffe097          	auipc	ra,0xffffe
+    80004ef0:	7dc080e7          	jalr	2012(ra) # 800036c8 <end_op>
   p->cwd = ip;
-    8000589a:	14993823          	sd	s1,336(s2)
+    80004ef4:	14993823          	sd	s1,336(s2)
   return 0;
-    8000589e:	4501                	li	a0,0
+    80004ef8:	4501                	li	a0,0
 }
-    800058a0:	60ea                	ld	ra,152(sp)
-    800058a2:	644a                	ld	s0,144(sp)
-    800058a4:	64aa                	ld	s1,136(sp)
-    800058a6:	690a                	ld	s2,128(sp)
-    800058a8:	610d                	addi	sp,sp,160
-    800058aa:	8082                	ret
+    80004efa:	60ea                	ld	ra,152(sp)
+    80004efc:	644a                	ld	s0,144(sp)
+    80004efe:	64aa                	ld	s1,136(sp)
+    80004f00:	690a                	ld	s2,128(sp)
+    80004f02:	610d                	addi	sp,sp,160
+    80004f04:	8082                	ret
     end_op();
-    800058ac:	ffffe097          	auipc	ra,0xffffe
-    800058b0:	792080e7          	jalr	1938(ra) # 8000403e <end_op>
+    80004f06:	ffffe097          	auipc	ra,0xffffe
+    80004f0a:	7c2080e7          	jalr	1986(ra) # 800036c8 <end_op>
     return -1;
-    800058b4:	557d                	li	a0,-1
-    800058b6:	b7ed                	j	800058a0 <sys_chdir+0x7a>
+    80004f0e:	557d                	li	a0,-1
+    80004f10:	b7ed                	j	80004efa <sys_chdir+0x7a>
     iunlockput(ip);
-    800058b8:	8526                	mv	a0,s1
-    800058ba:	ffffe097          	auipc	ra,0xffffe
-    800058be:	fa2080e7          	jalr	-94(ra) # 8000385c <iunlockput>
+    80004f12:	8526                	mv	a0,s1
+    80004f14:	ffffe097          	auipc	ra,0xffffe
+    80004f18:	fbc080e7          	jalr	-68(ra) # 80002ed0 <iunlockput>
     end_op();
-    800058c2:	ffffe097          	auipc	ra,0xffffe
-    800058c6:	77c080e7          	jalr	1916(ra) # 8000403e <end_op>
+    80004f1c:	ffffe097          	auipc	ra,0xffffe
+    80004f20:	7ac080e7          	jalr	1964(ra) # 800036c8 <end_op>
     return -1;
-    800058ca:	557d                	li	a0,-1
-    800058cc:	bfd1                	j	800058a0 <sys_chdir+0x7a>
+    80004f24:	557d                	li	a0,-1
+    80004f26:	bfd1                	j	80004efa <sys_chdir+0x7a>
 
-00000000800058ce <sys_exec>:
+0000000080004f28 <sys_exec>:
 
 uint64
 sys_exec(void)
 {
-    800058ce:	7145                	addi	sp,sp,-464
-    800058d0:	e786                	sd	ra,456(sp)
-    800058d2:	e3a2                	sd	s0,448(sp)
-    800058d4:	ff26                	sd	s1,440(sp)
-    800058d6:	fb4a                	sd	s2,432(sp)
-    800058d8:	f74e                	sd	s3,424(sp)
-    800058da:	f352                	sd	s4,416(sp)
-    800058dc:	ef56                	sd	s5,408(sp)
-    800058de:	0b80                	addi	s0,sp,464
+    80004f28:	7145                	addi	sp,sp,-464
+    80004f2a:	e786                	sd	ra,456(sp)
+    80004f2c:	e3a2                	sd	s0,448(sp)
+    80004f2e:	ff26                	sd	s1,440(sp)
+    80004f30:	fb4a                	sd	s2,432(sp)
+    80004f32:	f74e                	sd	s3,424(sp)
+    80004f34:	f352                	sd	s4,416(sp)
+    80004f36:	ef56                	sd	s5,408(sp)
+    80004f38:	0b80                	addi	s0,sp,464
   char path[MAXPATH], *argv[MAXARG];
   int i;
   uint64 uargv, uarg;
 
   if(argstr(0, path, MAXPATH) < 0 || argaddr(1, &uargv) < 0){
-    800058e0:	08000613          	li	a2,128
-    800058e4:	f4040593          	addi	a1,s0,-192
-    800058e8:	4501                	li	a0,0
-    800058ea:	ffffd097          	auipc	ra,0xffffd
-    800058ee:	1e2080e7          	jalr	482(ra) # 80002acc <argstr>
+    80004f3a:	08000613          	li	a2,128
+    80004f3e:	f4040593          	addi	a1,s0,-192
+    80004f42:	4501                	li	a0,0
+    80004f44:	ffffd097          	auipc	ra,0xffffd
+    80004f48:	12a080e7          	jalr	298(ra) # 8000206e <argstr>
     return -1;
-    800058f2:	597d                	li	s2,-1
+    80004f4c:	597d                	li	s2,-1
   if(argstr(0, path, MAXPATH) < 0 || argaddr(1, &uargv) < 0){
-    800058f4:	0c054b63          	bltz	a0,800059ca <sys_exec+0xfc>
-    800058f8:	e3840593          	addi	a1,s0,-456
-    800058fc:	4505                	li	a0,1
-    800058fe:	ffffd097          	auipc	ra,0xffffd
-    80005902:	1ac080e7          	jalr	428(ra) # 80002aaa <argaddr>
-    80005906:	0c054263          	bltz	a0,800059ca <sys_exec+0xfc>
+    80004f4e:	0c054b63          	bltz	a0,80005024 <sys_exec+0xfc>
+    80004f52:	e3840593          	addi	a1,s0,-456
+    80004f56:	4505                	li	a0,1
+    80004f58:	ffffd097          	auipc	ra,0xffffd
+    80004f5c:	0f4080e7          	jalr	244(ra) # 8000204c <argaddr>
+    80004f60:	0c054263          	bltz	a0,80005024 <sys_exec+0xfc>
   }
   memset(argv, 0, sizeof(argv));
-    8000590a:	10000613          	li	a2,256
-    8000590e:	4581                	li	a1,0
-    80005910:	e4040513          	addi	a0,s0,-448
-    80005914:	ffffb097          	auipc	ra,0xffffb
-    80005918:	3e8080e7          	jalr	1000(ra) # 80000cfc <memset>
+    80004f64:	10000613          	li	a2,256
+    80004f68:	4581                	li	a1,0
+    80004f6a:	e4040513          	addi	a0,s0,-448
+    80004f6e:	ffffb097          	auipc	ra,0xffffb
+    80004f72:	230080e7          	jalr	560(ra) # 8000019e <memset>
   for(i=0;; i++){
     if(i >= NELEM(argv)){
-    8000591c:	e4040493          	addi	s1,s0,-448
+    80004f76:	e4040493          	addi	s1,s0,-448
   memset(argv, 0, sizeof(argv));
-    80005920:	89a6                	mv	s3,s1
-    80005922:	4901                	li	s2,0
+    80004f7a:	89a6                	mv	s3,s1
+    80004f7c:	4901                	li	s2,0
     if(i >= NELEM(argv)){
-    80005924:	02000a13          	li	s4,32
-    80005928:	00090a9b          	sext.w	s5,s2
+    80004f7e:	02000a13          	li	s4,32
+    80004f82:	00090a9b          	sext.w	s5,s2
       goto bad;
     }
     if(fetchaddr(uargv+sizeof(uint64)*i, (uint64*)&uarg) < 0){
-    8000592c:	00391513          	slli	a0,s2,0x3
-    80005930:	e3040593          	addi	a1,s0,-464
-    80005934:	e3843783          	ld	a5,-456(s0)
-    80005938:	953e                	add	a0,a0,a5
-    8000593a:	ffffd097          	auipc	ra,0xffffd
-    8000593e:	0b4080e7          	jalr	180(ra) # 800029ee <fetchaddr>
-    80005942:	02054a63          	bltz	a0,80005976 <sys_exec+0xa8>
+    80004f86:	00391513          	slli	a0,s2,0x3
+    80004f8a:	e3040593          	addi	a1,s0,-464
+    80004f8e:	e3843783          	ld	a5,-456(s0)
+    80004f92:	953e                	add	a0,a0,a5
+    80004f94:	ffffd097          	auipc	ra,0xffffd
+    80004f98:	ffc080e7          	jalr	-4(ra) # 80001f90 <fetchaddr>
+    80004f9c:	02054a63          	bltz	a0,80004fd0 <sys_exec+0xa8>
       goto bad;
     }
     if(uarg == 0){
-    80005946:	e3043783          	ld	a5,-464(s0)
-    8000594a:	c3b9                	beqz	a5,80005990 <sys_exec+0xc2>
+    80004fa0:	e3043783          	ld	a5,-464(s0)
+    80004fa4:	c3b9                	beqz	a5,80004fea <sys_exec+0xc2>
       argv[i] = 0;
       break;
     }
     argv[i] = kalloc();
-    8000594c:	ffffb097          	auipc	ra,0xffffb
-    80005950:	1c4080e7          	jalr	452(ra) # 80000b10 <kalloc>
-    80005954:	85aa                	mv	a1,a0
-    80005956:	00a9b023          	sd	a0,0(s3)
+    80004fa6:	ffffb097          	auipc	ra,0xffffb
+    80004faa:	174080e7          	jalr	372(ra) # 8000011a <kalloc>
+    80004fae:	85aa                	mv	a1,a0
+    80004fb0:	00a9b023          	sd	a0,0(s3)
     if(argv[i] == 0)
-    8000595a:	cd11                	beqz	a0,80005976 <sys_exec+0xa8>
+    80004fb4:	cd11                	beqz	a0,80004fd0 <sys_exec+0xa8>
       goto bad;
     if(fetchstr(uarg, argv[i], PGSIZE) < 0)
-    8000595c:	6605                	lui	a2,0x1
-    8000595e:	e3043503          	ld	a0,-464(s0)
-    80005962:	ffffd097          	auipc	ra,0xffffd
-    80005966:	0de080e7          	jalr	222(ra) # 80002a40 <fetchstr>
-    8000596a:	00054663          	bltz	a0,80005976 <sys_exec+0xa8>
+    80004fb6:	6605                	lui	a2,0x1
+    80004fb8:	e3043503          	ld	a0,-464(s0)
+    80004fbc:	ffffd097          	auipc	ra,0xffffd
+    80004fc0:	026080e7          	jalr	38(ra) # 80001fe2 <fetchstr>
+    80004fc4:	00054663          	bltz	a0,80004fd0 <sys_exec+0xa8>
     if(i >= NELEM(argv)){
-    8000596e:	0905                	addi	s2,s2,1
-    80005970:	09a1                	addi	s3,s3,8
-    80005972:	fb491be3          	bne	s2,s4,80005928 <sys_exec+0x5a>
+    80004fc8:	0905                	addi	s2,s2,1
+    80004fca:	09a1                	addi	s3,s3,8
+    80004fcc:	fb491be3          	bne	s2,s4,80004f82 <sys_exec+0x5a>
     kfree(argv[i]);
 
   return ret;
 
  bad:
   for(i = 0; i < NELEM(argv) && argv[i] != 0; i++)
-    80005976:	f4040913          	addi	s2,s0,-192
-    8000597a:	6088                	ld	a0,0(s1)
-    8000597c:	c531                	beqz	a0,800059c8 <sys_exec+0xfa>
+    80004fd0:	f4040913          	addi	s2,s0,-192
+    80004fd4:	6088                	ld	a0,0(s1)
+    80004fd6:	c531                	beqz	a0,80005022 <sys_exec+0xfa>
     kfree(argv[i]);
-    8000597e:	ffffb097          	auipc	ra,0xffffb
-    80005982:	094080e7          	jalr	148(ra) # 80000a12 <kfree>
+    80004fd8:	ffffb097          	auipc	ra,0xffffb
+    80004fdc:	044080e7          	jalr	68(ra) # 8000001c <kfree>
   for(i = 0; i < NELEM(argv) && argv[i] != 0; i++)
-    80005986:	04a1                	addi	s1,s1,8
-    80005988:	ff2499e3          	bne	s1,s2,8000597a <sys_exec+0xac>
+    80004fe0:	04a1                	addi	s1,s1,8
+    80004fe2:	ff2499e3          	bne	s1,s2,80004fd4 <sys_exec+0xac>
   return -1;
-    8000598c:	597d                	li	s2,-1
-    8000598e:	a835                	j	800059ca <sys_exec+0xfc>
+    80004fe6:	597d                	li	s2,-1
+    80004fe8:	a835                	j	80005024 <sys_exec+0xfc>
       argv[i] = 0;
-    80005990:	0a8e                	slli	s5,s5,0x3
-    80005992:	fc0a8793          	addi	a5,s5,-64 # ffffffffffffefc0 <end+0xffffffff7ffd8fc0>
-    80005996:	00878ab3          	add	s5,a5,s0
-    8000599a:	e80ab023          	sd	zero,-384(s5)
+    80004fea:	0a8e                	slli	s5,s5,0x3
+    80004fec:	fc0a8793          	addi	a5,s5,-64 # ffffffffffffefc0 <end+0xffffffff7ffd8d80>
+    80004ff0:	00878ab3          	add	s5,a5,s0
+    80004ff4:	e80ab023          	sd	zero,-384(s5)
   int ret = exec(path, argv);
-    8000599e:	e4040593          	addi	a1,s0,-448
-    800059a2:	f4040513          	addi	a0,s0,-192
-    800059a6:	fffff097          	auipc	ra,0xfffff
-    800059aa:	172080e7          	jalr	370(ra) # 80004b18 <exec>
-    800059ae:	892a                	mv	s2,a0
+    80004ff8:	e4040593          	addi	a1,s0,-448
+    80004ffc:	f4040513          	addi	a0,s0,-192
+    80005000:	fffff097          	auipc	ra,0xfffff
+    80005004:	166080e7          	jalr	358(ra) # 80004166 <exec>
+    80005008:	892a                	mv	s2,a0
   for(i = 0; i < NELEM(argv) && argv[i] != 0; i++)
-    800059b0:	f4040993          	addi	s3,s0,-192
-    800059b4:	6088                	ld	a0,0(s1)
-    800059b6:	c911                	beqz	a0,800059ca <sys_exec+0xfc>
+    8000500a:	f4040993          	addi	s3,s0,-192
+    8000500e:	6088                	ld	a0,0(s1)
+    80005010:	c911                	beqz	a0,80005024 <sys_exec+0xfc>
     kfree(argv[i]);
-    800059b8:	ffffb097          	auipc	ra,0xffffb
-    800059bc:	05a080e7          	jalr	90(ra) # 80000a12 <kfree>
+    80005012:	ffffb097          	auipc	ra,0xffffb
+    80005016:	00a080e7          	jalr	10(ra) # 8000001c <kfree>
   for(i = 0; i < NELEM(argv) && argv[i] != 0; i++)
-    800059c0:	04a1                	addi	s1,s1,8
-    800059c2:	ff3499e3          	bne	s1,s3,800059b4 <sys_exec+0xe6>
-    800059c6:	a011                	j	800059ca <sys_exec+0xfc>
+    8000501a:	04a1                	addi	s1,s1,8
+    8000501c:	ff3499e3          	bne	s1,s3,8000500e <sys_exec+0xe6>
+    80005020:	a011                	j	80005024 <sys_exec+0xfc>
   return -1;
-    800059c8:	597d                	li	s2,-1
+    80005022:	597d                	li	s2,-1
 }
-    800059ca:	854a                	mv	a0,s2
-    800059cc:	60be                	ld	ra,456(sp)
-    800059ce:	641e                	ld	s0,448(sp)
-    800059d0:	74fa                	ld	s1,440(sp)
-    800059d2:	795a                	ld	s2,432(sp)
-    800059d4:	79ba                	ld	s3,424(sp)
-    800059d6:	7a1a                	ld	s4,416(sp)
-    800059d8:	6afa                	ld	s5,408(sp)
-    800059da:	6179                	addi	sp,sp,464
-    800059dc:	8082                	ret
+    80005024:	854a                	mv	a0,s2
+    80005026:	60be                	ld	ra,456(sp)
+    80005028:	641e                	ld	s0,448(sp)
+    8000502a:	74fa                	ld	s1,440(sp)
+    8000502c:	795a                	ld	s2,432(sp)
+    8000502e:	79ba                	ld	s3,424(sp)
+    80005030:	7a1a                	ld	s4,416(sp)
+    80005032:	6afa                	ld	s5,408(sp)
+    80005034:	6179                	addi	sp,sp,464
+    80005036:	8082                	ret
 
-00000000800059de <sys_pipe>:
+0000000080005038 <sys_pipe>:
 
 uint64
 sys_pipe(void)
 {
-    800059de:	7139                	addi	sp,sp,-64
-    800059e0:	fc06                	sd	ra,56(sp)
-    800059e2:	f822                	sd	s0,48(sp)
-    800059e4:	f426                	sd	s1,40(sp)
-    800059e6:	0080                	addi	s0,sp,64
+    80005038:	7139                	addi	sp,sp,-64
+    8000503a:	fc06                	sd	ra,56(sp)
+    8000503c:	f822                	sd	s0,48(sp)
+    8000503e:	f426                	sd	s1,40(sp)
+    80005040:	0080                	addi	s0,sp,64
   uint64 fdarray; // user pointer to array of two integers
   struct file *rf, *wf;
   int fd0, fd1;
   struct proc *p = myproc();
-    800059e8:	ffffc097          	auipc	ra,0xffffc
-    800059ec:	fe4080e7          	jalr	-28(ra) # 800019cc <myproc>
-    800059f0:	84aa                	mv	s1,a0
+    80005042:	ffffc097          	auipc	ra,0xffffc
+    80005046:	efc080e7          	jalr	-260(ra) # 80000f3e <myproc>
+    8000504a:	84aa                	mv	s1,a0
 
   if(argaddr(0, &fdarray) < 0)
-    800059f2:	fd840593          	addi	a1,s0,-40
-    800059f6:	4501                	li	a0,0
-    800059f8:	ffffd097          	auipc	ra,0xffffd
-    800059fc:	0b2080e7          	jalr	178(ra) # 80002aaa <argaddr>
+    8000504c:	fd840593          	addi	a1,s0,-40
+    80005050:	4501                	li	a0,0
+    80005052:	ffffd097          	auipc	ra,0xffffd
+    80005056:	ffa080e7          	jalr	-6(ra) # 8000204c <argaddr>
     return -1;
-    80005a00:	57fd                	li	a5,-1
+    8000505a:	57fd                	li	a5,-1
   if(argaddr(0, &fdarray) < 0)
-    80005a02:	0e054063          	bltz	a0,80005ae2 <sys_pipe+0x104>
+    8000505c:	0e054063          	bltz	a0,8000513c <sys_pipe+0x104>
   if(pipealloc(&rf, &wf) < 0)
-    80005a06:	fc840593          	addi	a1,s0,-56
-    80005a0a:	fd040513          	addi	a0,s0,-48
-    80005a0e:	fffff097          	auipc	ra,0xfffff
-    80005a12:	dd6080e7          	jalr	-554(ra) # 800047e4 <pipealloc>
+    80005060:	fc840593          	addi	a1,s0,-56
+    80005064:	fd040513          	addi	a0,s0,-48
+    80005068:	fffff097          	auipc	ra,0xfffff
+    8000506c:	dda080e7          	jalr	-550(ra) # 80003e42 <pipealloc>
     return -1;
-    80005a16:	57fd                	li	a5,-1
+    80005070:	57fd                	li	a5,-1
   if(pipealloc(&rf, &wf) < 0)
-    80005a18:	0c054563          	bltz	a0,80005ae2 <sys_pipe+0x104>
+    80005072:	0c054563          	bltz	a0,8000513c <sys_pipe+0x104>
   fd0 = -1;
-    80005a1c:	fcf42223          	sw	a5,-60(s0)
+    80005076:	fcf42223          	sw	a5,-60(s0)
   if((fd0 = fdalloc(rf)) < 0 || (fd1 = fdalloc(wf)) < 0){
-    80005a20:	fd043503          	ld	a0,-48(s0)
-    80005a24:	fffff097          	auipc	ra,0xfffff
-    80005a28:	504080e7          	jalr	1284(ra) # 80004f28 <fdalloc>
-    80005a2c:	fca42223          	sw	a0,-60(s0)
-    80005a30:	08054c63          	bltz	a0,80005ac8 <sys_pipe+0xea>
-    80005a34:	fc843503          	ld	a0,-56(s0)
-    80005a38:	fffff097          	auipc	ra,0xfffff
-    80005a3c:	4f0080e7          	jalr	1264(ra) # 80004f28 <fdalloc>
-    80005a40:	fca42023          	sw	a0,-64(s0)
-    80005a44:	06054963          	bltz	a0,80005ab6 <sys_pipe+0xd8>
+    8000507a:	fd043503          	ld	a0,-48(s0)
+    8000507e:	fffff097          	auipc	ra,0xfffff
+    80005082:	504080e7          	jalr	1284(ra) # 80004582 <fdalloc>
+    80005086:	fca42223          	sw	a0,-60(s0)
+    8000508a:	08054c63          	bltz	a0,80005122 <sys_pipe+0xea>
+    8000508e:	fc843503          	ld	a0,-56(s0)
+    80005092:	fffff097          	auipc	ra,0xfffff
+    80005096:	4f0080e7          	jalr	1264(ra) # 80004582 <fdalloc>
+    8000509a:	fca42023          	sw	a0,-64(s0)
+    8000509e:	06054963          	bltz	a0,80005110 <sys_pipe+0xd8>
       p->ofile[fd0] = 0;
     fileclose(rf);
     fileclose(wf);
     return -1;
   }
   if(copyout(p->pagetable, fdarray, (char*)&fd0, sizeof(fd0)) < 0 ||
-    80005a48:	4691                	li	a3,4
-    80005a4a:	fc440613          	addi	a2,s0,-60
-    80005a4e:	fd843583          	ld	a1,-40(s0)
-    80005a52:	68a8                	ld	a0,80(s1)
-    80005a54:	ffffc097          	auipc	ra,0xffffc
-    80005a58:	c6e080e7          	jalr	-914(ra) # 800016c2 <copyout>
-    80005a5c:	02054063          	bltz	a0,80005a7c <sys_pipe+0x9e>
+    800050a2:	4691                	li	a3,4
+    800050a4:	fc440613          	addi	a2,s0,-60
+    800050a8:	fd843583          	ld	a1,-40(s0)
+    800050ac:	68a8                	ld	a0,80(s1)
+    800050ae:	ffffc097          	auipc	ra,0xffffc
+    800050b2:	b54080e7          	jalr	-1196(ra) # 80000c02 <copyout>
+    800050b6:	02054063          	bltz	a0,800050d6 <sys_pipe+0x9e>
      copyout(p->pagetable, fdarray+sizeof(fd0), (char *)&fd1, sizeof(fd1)) < 0){
-    80005a60:	4691                	li	a3,4
-    80005a62:	fc040613          	addi	a2,s0,-64
-    80005a66:	fd843583          	ld	a1,-40(s0)
-    80005a6a:	0591                	addi	a1,a1,4
-    80005a6c:	68a8                	ld	a0,80(s1)
-    80005a6e:	ffffc097          	auipc	ra,0xffffc
-    80005a72:	c54080e7          	jalr	-940(ra) # 800016c2 <copyout>
+    800050ba:	4691                	li	a3,4
+    800050bc:	fc040613          	addi	a2,s0,-64
+    800050c0:	fd843583          	ld	a1,-40(s0)
+    800050c4:	0591                	addi	a1,a1,4
+    800050c6:	68a8                	ld	a0,80(s1)
+    800050c8:	ffffc097          	auipc	ra,0xffffc
+    800050cc:	b3a080e7          	jalr	-1222(ra) # 80000c02 <copyout>
     p->ofile[fd1] = 0;
     fileclose(rf);
     fileclose(wf);
     return -1;
   }
   return 0;
-    80005a76:	4781                	li	a5,0
+    800050d0:	4781                	li	a5,0
   if(copyout(p->pagetable, fdarray, (char*)&fd0, sizeof(fd0)) < 0 ||
-    80005a78:	06055563          	bgez	a0,80005ae2 <sys_pipe+0x104>
+    800050d2:	06055563          	bgez	a0,8000513c <sys_pipe+0x104>
     p->ofile[fd0] = 0;
-    80005a7c:	fc442783          	lw	a5,-60(s0)
-    80005a80:	07e9                	addi	a5,a5,26
-    80005a82:	078e                	slli	a5,a5,0x3
-    80005a84:	97a6                	add	a5,a5,s1
-    80005a86:	0007b023          	sd	zero,0(a5)
+    800050d6:	fc442783          	lw	a5,-60(s0)
+    800050da:	07e9                	addi	a5,a5,26
+    800050dc:	078e                	slli	a5,a5,0x3
+    800050de:	97a6                	add	a5,a5,s1
+    800050e0:	0007b023          	sd	zero,0(a5)
     p->ofile[fd1] = 0;
-    80005a8a:	fc042783          	lw	a5,-64(s0)
-    80005a8e:	07e9                	addi	a5,a5,26
-    80005a90:	078e                	slli	a5,a5,0x3
-    80005a92:	00f48533          	add	a0,s1,a5
-    80005a96:	00053023          	sd	zero,0(a0)
+    800050e4:	fc042783          	lw	a5,-64(s0)
+    800050e8:	07e9                	addi	a5,a5,26
+    800050ea:	078e                	slli	a5,a5,0x3
+    800050ec:	00f48533          	add	a0,s1,a5
+    800050f0:	00053023          	sd	zero,0(a0)
     fileclose(rf);
-    80005a9a:	fd043503          	ld	a0,-48(s0)
-    80005a9e:	fffff097          	auipc	ra,0xfffff
-    80005aa2:	9f0080e7          	jalr	-1552(ra) # 8000448e <fileclose>
+    800050f4:	fd043503          	ld	a0,-48(s0)
+    800050f8:	fffff097          	auipc	ra,0xfffff
+    800050fc:	a1a080e7          	jalr	-1510(ra) # 80003b12 <fileclose>
     fileclose(wf);
-    80005aa6:	fc843503          	ld	a0,-56(s0)
-    80005aaa:	fffff097          	auipc	ra,0xfffff
-    80005aae:	9e4080e7          	jalr	-1564(ra) # 8000448e <fileclose>
+    80005100:	fc843503          	ld	a0,-56(s0)
+    80005104:	fffff097          	auipc	ra,0xfffff
+    80005108:	a0e080e7          	jalr	-1522(ra) # 80003b12 <fileclose>
     return -1;
-    80005ab2:	57fd                	li	a5,-1
-    80005ab4:	a03d                	j	80005ae2 <sys_pipe+0x104>
+    8000510c:	57fd                	li	a5,-1
+    8000510e:	a03d                	j	8000513c <sys_pipe+0x104>
     if(fd0 >= 0)
-    80005ab6:	fc442783          	lw	a5,-60(s0)
-    80005aba:	0007c763          	bltz	a5,80005ac8 <sys_pipe+0xea>
+    80005110:	fc442783          	lw	a5,-60(s0)
+    80005114:	0007c763          	bltz	a5,80005122 <sys_pipe+0xea>
       p->ofile[fd0] = 0;
-    80005abe:	07e9                	addi	a5,a5,26
-    80005ac0:	078e                	slli	a5,a5,0x3
-    80005ac2:	97a6                	add	a5,a5,s1
-    80005ac4:	0007b023          	sd	zero,0(a5)
+    80005118:	07e9                	addi	a5,a5,26
+    8000511a:	078e                	slli	a5,a5,0x3
+    8000511c:	97a6                	add	a5,a5,s1
+    8000511e:	0007b023          	sd	zero,0(a5)
     fileclose(rf);
-    80005ac8:	fd043503          	ld	a0,-48(s0)
-    80005acc:	fffff097          	auipc	ra,0xfffff
-    80005ad0:	9c2080e7          	jalr	-1598(ra) # 8000448e <fileclose>
+    80005122:	fd043503          	ld	a0,-48(s0)
+    80005126:	fffff097          	auipc	ra,0xfffff
+    8000512a:	9ec080e7          	jalr	-1556(ra) # 80003b12 <fileclose>
     fileclose(wf);
-    80005ad4:	fc843503          	ld	a0,-56(s0)
-    80005ad8:	fffff097          	auipc	ra,0xfffff
-    80005adc:	9b6080e7          	jalr	-1610(ra) # 8000448e <fileclose>
-    return -1;
-    80005ae0:	57fd                	li	a5,-1
-}
-    80005ae2:	853e                	mv	a0,a5
-    80005ae4:	70e2                	ld	ra,56(sp)
-    80005ae6:	7442                	ld	s0,48(sp)
-    80005ae8:	74a2                	ld	s1,40(sp)
-    80005aea:	6121                	addi	sp,sp,64
-    80005aec:	8082                	ret
+    8000512e:	fc843503          	ld	a0,-56(s0)
+    80005132:	fffff097          	auipc	ra,0xfffff
+    80005136:	9e0080e7          	jalr	-1568(ra) # 80003b12 <fileclose>
+    return -1;
+    8000513a:	57fd                	li	a5,-1
+}
+    8000513c:	853e                	mv	a0,a5
+    8000513e:	70e2                	ld	ra,56(sp)
+    80005140:	7442                	ld	s0,48(sp)
+    80005142:	74a2                	ld	s1,40(sp)
+    80005144:	6121                	addi	sp,sp,64
+    80005146:	8082                	ret
 	...
 
-0000000080005af0 <kernelvec>:
-    80005af0:	7111                	addi	sp,sp,-256
-    80005af2:	e006                	sd	ra,0(sp)
-    80005af4:	e40a                	sd	sp,8(sp)
-    80005af6:	e80e                	sd	gp,16(sp)
-    80005af8:	ec12                	sd	tp,24(sp)
-    80005afa:	f016                	sd	t0,32(sp)
-    80005afc:	f41a                	sd	t1,40(sp)
-    80005afe:	f81e                	sd	t2,48(sp)
-    80005b00:	fc22                	sd	s0,56(sp)
-    80005b02:	e0a6                	sd	s1,64(sp)
-    80005b04:	e4aa                	sd	a0,72(sp)
-    80005b06:	e8ae                	sd	a1,80(sp)
-    80005b08:	ecb2                	sd	a2,88(sp)
-    80005b0a:	f0b6                	sd	a3,96(sp)
-    80005b0c:	f4ba                	sd	a4,104(sp)
-    80005b0e:	f8be                	sd	a5,112(sp)
-    80005b10:	fcc2                	sd	a6,120(sp)
-    80005b12:	e146                	sd	a7,128(sp)
-    80005b14:	e54a                	sd	s2,136(sp)
-    80005b16:	e94e                	sd	s3,144(sp)
-    80005b18:	ed52                	sd	s4,152(sp)
-    80005b1a:	f156                	sd	s5,160(sp)
-    80005b1c:	f55a                	sd	s6,168(sp)
-    80005b1e:	f95e                	sd	s7,176(sp)
-    80005b20:	fd62                	sd	s8,184(sp)
-    80005b22:	e1e6                	sd	s9,192(sp)
-    80005b24:	e5ea                	sd	s10,200(sp)
-    80005b26:	e9ee                	sd	s11,208(sp)
-    80005b28:	edf2                	sd	t3,216(sp)
-    80005b2a:	f1f6                	sd	t4,224(sp)
-    80005b2c:	f5fa                	sd	t5,232(sp)
-    80005b2e:	f9fe                	sd	t6,240(sp)
-    80005b30:	d8bfc0ef          	jal	ra,800028ba <kerneltrap>
-    80005b34:	6082                	ld	ra,0(sp)
-    80005b36:	6122                	ld	sp,8(sp)
-    80005b38:	61c2                	ld	gp,16(sp)
-    80005b3a:	7282                	ld	t0,32(sp)
-    80005b3c:	7322                	ld	t1,40(sp)
-    80005b3e:	73c2                	ld	t2,48(sp)
-    80005b40:	7462                	ld	s0,56(sp)
-    80005b42:	6486                	ld	s1,64(sp)
-    80005b44:	6526                	ld	a0,72(sp)
-    80005b46:	65c6                	ld	a1,80(sp)
-    80005b48:	6666                	ld	a2,88(sp)
-    80005b4a:	7686                	ld	a3,96(sp)
-    80005b4c:	7726                	ld	a4,104(sp)
-    80005b4e:	77c6                	ld	a5,112(sp)
-    80005b50:	7866                	ld	a6,120(sp)
-    80005b52:	688a                	ld	a7,128(sp)
-    80005b54:	692a                	ld	s2,136(sp)
-    80005b56:	69ca                	ld	s3,144(sp)
-    80005b58:	6a6a                	ld	s4,152(sp)
-    80005b5a:	7a8a                	ld	s5,160(sp)
-    80005b5c:	7b2a                	ld	s6,168(sp)
-    80005b5e:	7bca                	ld	s7,176(sp)
-    80005b60:	7c6a                	ld	s8,184(sp)
-    80005b62:	6c8e                	ld	s9,192(sp)
-    80005b64:	6d2e                	ld	s10,200(sp)
-    80005b66:	6dce                	ld	s11,208(sp)
-    80005b68:	6e6e                	ld	t3,216(sp)
-    80005b6a:	7e8e                	ld	t4,224(sp)
-    80005b6c:	7f2e                	ld	t5,232(sp)
-    80005b6e:	7fce                	ld	t6,240(sp)
-    80005b70:	6111                	addi	sp,sp,256
-    80005b72:	10200073          	sret
-    80005b76:	00000013          	nop
-    80005b7a:	00000013          	nop
-    80005b7e:	0001                	nop
-
-0000000080005b80 <timervec>:
-    80005b80:	34051573          	csrrw	a0,mscratch,a0
-    80005b84:	e10c                	sd	a1,0(a0)
-    80005b86:	e510                	sd	a2,8(a0)
-    80005b88:	e914                	sd	a3,16(a0)
-    80005b8a:	710c                	ld	a1,32(a0)
-    80005b8c:	7510                	ld	a2,40(a0)
-    80005b8e:	6194                	ld	a3,0(a1)
-    80005b90:	96b2                	add	a3,a3,a2
-    80005b92:	e194                	sd	a3,0(a1)
-    80005b94:	4589                	li	a1,2
-    80005b96:	14459073          	csrw	sip,a1
-    80005b9a:	6914                	ld	a3,16(a0)
-    80005b9c:	6510                	ld	a2,8(a0)
-    80005b9e:	610c                	ld	a1,0(a0)
-    80005ba0:	34051573          	csrrw	a0,mscratch,a0
-    80005ba4:	30200073          	mret
+0000000080005150 <kernelvec>:
+    80005150:	7111                	addi	sp,sp,-256
+    80005152:	e006                	sd	ra,0(sp)
+    80005154:	e40a                	sd	sp,8(sp)
+    80005156:	e80e                	sd	gp,16(sp)
+    80005158:	ec12                	sd	tp,24(sp)
+    8000515a:	f016                	sd	t0,32(sp)
+    8000515c:	f41a                	sd	t1,40(sp)
+    8000515e:	f81e                	sd	t2,48(sp)
+    80005160:	fc22                	sd	s0,56(sp)
+    80005162:	e0a6                	sd	s1,64(sp)
+    80005164:	e4aa                	sd	a0,72(sp)
+    80005166:	e8ae                	sd	a1,80(sp)
+    80005168:	ecb2                	sd	a2,88(sp)
+    8000516a:	f0b6                	sd	a3,96(sp)
+    8000516c:	f4ba                	sd	a4,104(sp)
+    8000516e:	f8be                	sd	a5,112(sp)
+    80005170:	fcc2                	sd	a6,120(sp)
+    80005172:	e146                	sd	a7,128(sp)
+    80005174:	e54a                	sd	s2,136(sp)
+    80005176:	e94e                	sd	s3,144(sp)
+    80005178:	ed52                	sd	s4,152(sp)
+    8000517a:	f156                	sd	s5,160(sp)
+    8000517c:	f55a                	sd	s6,168(sp)
+    8000517e:	f95e                	sd	s7,176(sp)
+    80005180:	fd62                	sd	s8,184(sp)
+    80005182:	e1e6                	sd	s9,192(sp)
+    80005184:	e5ea                	sd	s10,200(sp)
+    80005186:	e9ee                	sd	s11,208(sp)
+    80005188:	edf2                	sd	t3,216(sp)
+    8000518a:	f1f6                	sd	t4,224(sp)
+    8000518c:	f5fa                	sd	t5,232(sp)
+    8000518e:	f9fe                	sd	t6,240(sp)
+    80005190:	ccdfc0ef          	jal	ra,80001e5c <kerneltrap>
+    80005194:	6082                	ld	ra,0(sp)
+    80005196:	6122                	ld	sp,8(sp)
+    80005198:	61c2                	ld	gp,16(sp)
+    8000519a:	7282                	ld	t0,32(sp)
+    8000519c:	7322                	ld	t1,40(sp)
+    8000519e:	73c2                	ld	t2,48(sp)
+    800051a0:	7462                	ld	s0,56(sp)
+    800051a2:	6486                	ld	s1,64(sp)
+    800051a4:	6526                	ld	a0,72(sp)
+    800051a6:	65c6                	ld	a1,80(sp)
+    800051a8:	6666                	ld	a2,88(sp)
+    800051aa:	7686                	ld	a3,96(sp)
+    800051ac:	7726                	ld	a4,104(sp)
+    800051ae:	77c6                	ld	a5,112(sp)
+    800051b0:	7866                	ld	a6,120(sp)
+    800051b2:	688a                	ld	a7,128(sp)
+    800051b4:	692a                	ld	s2,136(sp)
+    800051b6:	69ca                	ld	s3,144(sp)
+    800051b8:	6a6a                	ld	s4,152(sp)
+    800051ba:	7a8a                	ld	s5,160(sp)
+    800051bc:	7b2a                	ld	s6,168(sp)
+    800051be:	7bca                	ld	s7,176(sp)
+    800051c0:	7c6a                	ld	s8,184(sp)
+    800051c2:	6c8e                	ld	s9,192(sp)
+    800051c4:	6d2e                	ld	s10,200(sp)
+    800051c6:	6dce                	ld	s11,208(sp)
+    800051c8:	6e6e                	ld	t3,216(sp)
+    800051ca:	7e8e                	ld	t4,224(sp)
+    800051cc:	7f2e                	ld	t5,232(sp)
+    800051ce:	7fce                	ld	t6,240(sp)
+    800051d0:	6111                	addi	sp,sp,256
+    800051d2:	10200073          	sret
+    800051d6:	00000013          	nop
+    800051da:	00000013          	nop
+    800051de:	0001                	nop
+
+00000000800051e0 <timervec>:
+    800051e0:	34051573          	csrrw	a0,mscratch,a0
+    800051e4:	e10c                	sd	a1,0(a0)
+    800051e6:	e510                	sd	a2,8(a0)
+    800051e8:	e914                	sd	a3,16(a0)
+    800051ea:	6d0c                	ld	a1,24(a0)
+    800051ec:	7110                	ld	a2,32(a0)
+    800051ee:	6194                	ld	a3,0(a1)
+    800051f0:	96b2                	add	a3,a3,a2
+    800051f2:	e194                	sd	a3,0(a1)
+    800051f4:	4589                	li	a1,2
+    800051f6:	14459073          	csrw	sip,a1
+    800051fa:	6914                	ld	a3,16(a0)
+    800051fc:	6510                	ld	a2,8(a0)
+    800051fe:	610c                	ld	a1,0(a0)
+    80005200:	34051573          	csrrw	a0,mscratch,a0
+    80005204:	30200073          	mret
 	...
 
-0000000080005baa <plicinit>:
+000000008000520a <plicinit>:
 // the riscv Platform Level Interrupt Controller (PLIC).
 //
 
 void
 plicinit(void)
 {
-    80005baa:	1141                	addi	sp,sp,-16
-    80005bac:	e422                	sd	s0,8(sp)
-    80005bae:	0800                	addi	s0,sp,16
+    8000520a:	1141                	addi	sp,sp,-16
+    8000520c:	e422                	sd	s0,8(sp)
+    8000520e:	0800                	addi	s0,sp,16
   // set desired IRQ priorities non-zero (otherwise disabled).
   *(uint32*)(PLIC + UART0_IRQ*4) = 1;
-    80005bb0:	0c0007b7          	lui	a5,0xc000
-    80005bb4:	4705                	li	a4,1
-    80005bb6:	d798                	sw	a4,40(a5)
+    80005210:	0c0007b7          	lui	a5,0xc000
+    80005214:	4705                	li	a4,1
+    80005216:	d798                	sw	a4,40(a5)
   *(uint32*)(PLIC + VIRTIO0_IRQ*4) = 1;
-    80005bb8:	c3d8                	sw	a4,4(a5)
+    80005218:	c3d8                	sw	a4,4(a5)
+}
+    8000521a:	6422                	ld	s0,8(sp)
+    8000521c:	0141                	addi	sp,sp,16
+    8000521e:	8082                	ret
+
+0000000080005220 <plicinithart>:
+
+void
+plicinithart(void)
+{
+    80005220:	1141                	addi	sp,sp,-16
+    80005222:	e406                	sd	ra,8(sp)
+    80005224:	e022                	sd	s0,0(sp)
+    80005226:	0800                	addi	s0,sp,16
+  int hart = cpuid();
+    80005228:	ffffc097          	auipc	ra,0xffffc
+    8000522c:	cea080e7          	jalr	-790(ra) # 80000f12 <cpuid>
+  
+  // set uart's enable bit for this hart's S-mode. 
+  *(uint32*)PLIC_SENABLE(hart)= (1 << UART0_IRQ) | (1 << VIRTIO0_IRQ);
+    80005230:	0085171b          	slliw	a4,a0,0x8
+    80005234:	0c0027b7          	lui	a5,0xc002
+    80005238:	97ba                	add	a5,a5,a4
+    8000523a:	40200713          	li	a4,1026
+    8000523e:	08e7a023          	sw	a4,128(a5) # c002080 <_entry-0x73ffdf80>
+
+  // set this hart's S-mode priority threshold to 0.
+  *(uint32*)PLIC_SPRIORITY(hart) = 0;
+    80005242:	00d5151b          	slliw	a0,a0,0xd
+    80005246:	0c2017b7          	lui	a5,0xc201
+    8000524a:	97aa                	add	a5,a5,a0
+    8000524c:	0007a023          	sw	zero,0(a5) # c201000 <_entry-0x73dff000>
+}
+    80005250:	60a2                	ld	ra,8(sp)
+    80005252:	6402                	ld	s0,0(sp)
+    80005254:	0141                	addi	sp,sp,16
+    80005256:	8082                	ret
+
+0000000080005258 <plic_claim>:
+
+// ask the PLIC what interrupt we should serve.
+int
+plic_claim(void)
+{
+    80005258:	1141                	addi	sp,sp,-16
+    8000525a:	e406                	sd	ra,8(sp)
+    8000525c:	e022                	sd	s0,0(sp)
+    8000525e:	0800                	addi	s0,sp,16
+  int hart = cpuid();
+    80005260:	ffffc097          	auipc	ra,0xffffc
+    80005264:	cb2080e7          	jalr	-846(ra) # 80000f12 <cpuid>
+  int irq = *(uint32*)PLIC_SCLAIM(hart);
+    80005268:	00d5151b          	slliw	a0,a0,0xd
+    8000526c:	0c2017b7          	lui	a5,0xc201
+    80005270:	97aa                	add	a5,a5,a0
+  return irq;
+}
+    80005272:	43c8                	lw	a0,4(a5)
+    80005274:	60a2                	ld	ra,8(sp)
+    80005276:	6402                	ld	s0,0(sp)
+    80005278:	0141                	addi	sp,sp,16
+    8000527a:	8082                	ret
+
+000000008000527c <plic_complete>:
+
+// tell the PLIC we've served this IRQ.
+void
+plic_complete(int irq)
+{
+    8000527c:	1101                	addi	sp,sp,-32
+    8000527e:	ec06                	sd	ra,24(sp)
+    80005280:	e822                	sd	s0,16(sp)
+    80005282:	e426                	sd	s1,8(sp)
+    80005284:	1000                	addi	s0,sp,32
+    80005286:	84aa                	mv	s1,a0
+  int hart = cpuid();
+    80005288:	ffffc097          	auipc	ra,0xffffc
+    8000528c:	c8a080e7          	jalr	-886(ra) # 80000f12 <cpuid>
+  *(uint32*)PLIC_SCLAIM(hart) = irq;
+    80005290:	00d5151b          	slliw	a0,a0,0xd
+    80005294:	0c2017b7          	lui	a5,0xc201
+    80005298:	97aa                	add	a5,a5,a0
+    8000529a:	c3c4                	sw	s1,4(a5)
+}
+    8000529c:	60e2                	ld	ra,24(sp)
+    8000529e:	6442                	ld	s0,16(sp)
+    800052a0:	64a2                	ld	s1,8(sp)
+    800052a2:	6105                	addi	sp,sp,32
+    800052a4:	8082                	ret
+
+00000000800052a6 <free_desc>:
 }
-    80005bba:	6422                	ld	s0,8(sp)
-    80005bbc:	0141                	addi	sp,sp,16
-    80005bbe:	8082                	ret
 
-0000000080005bc0 <plicinithart>:
+// mark a descriptor as free.
+static void
+free_desc(int i)
+{
+    800052a6:	1141                	addi	sp,sp,-16
+    800052a8:	e406                	sd	ra,8(sp)
+    800052aa:	e022                	sd	s0,0(sp)
+    800052ac:	0800                	addi	s0,sp,16
+  if(i >= NUM)
+    800052ae:	479d                	li	a5,7
+    800052b0:	06a7c863          	blt	a5,a0,80005320 <free_desc+0x7a>
+    panic("free_desc 1");
+  if(disk.free[i])
+    800052b4:	00016717          	auipc	a4,0x16
+    800052b8:	d4c70713          	addi	a4,a4,-692 # 8001b000 <disk>
+    800052bc:	972a                	add	a4,a4,a0
+    800052be:	6789                	lui	a5,0x2
+    800052c0:	97ba                	add	a5,a5,a4
+    800052c2:	0187c783          	lbu	a5,24(a5) # 2018 <_entry-0x7fffdfe8>
+    800052c6:	e7ad                	bnez	a5,80005330 <free_desc+0x8a>
+    panic("free_desc 2");
+  disk.desc[i].addr = 0;
+    800052c8:	00451793          	slli	a5,a0,0x4
+    800052cc:	00018717          	auipc	a4,0x18
+    800052d0:	d3470713          	addi	a4,a4,-716 # 8001d000 <disk+0x2000>
+    800052d4:	6314                	ld	a3,0(a4)
+    800052d6:	96be                	add	a3,a3,a5
+    800052d8:	0006b023          	sd	zero,0(a3)
+  disk.desc[i].len = 0;
+    800052dc:	6314                	ld	a3,0(a4)
+    800052de:	96be                	add	a3,a3,a5
+    800052e0:	0006a423          	sw	zero,8(a3)
+  disk.desc[i].flags = 0;
+    800052e4:	6314                	ld	a3,0(a4)
+    800052e6:	96be                	add	a3,a3,a5
+    800052e8:	00069623          	sh	zero,12(a3)
+  disk.desc[i].next = 0;
+    800052ec:	6318                	ld	a4,0(a4)
+    800052ee:	97ba                	add	a5,a5,a4
+    800052f0:	00079723          	sh	zero,14(a5)
+  disk.free[i] = 1;
+    800052f4:	00016717          	auipc	a4,0x16
+    800052f8:	d0c70713          	addi	a4,a4,-756 # 8001b000 <disk>
+    800052fc:	972a                	add	a4,a4,a0
+    800052fe:	6789                	lui	a5,0x2
+    80005300:	97ba                	add	a5,a5,a4
+    80005302:	4705                	li	a4,1
+    80005304:	00e78c23          	sb	a4,24(a5) # 2018 <_entry-0x7fffdfe8>
+  wakeup(&disk.free[0]);
+    80005308:	00018517          	auipc	a0,0x18
+    8000530c:	d1050513          	addi	a0,a0,-752 # 8001d018 <disk+0x2018>
+    80005310:	ffffc097          	auipc	ra,0xffffc
+    80005314:	486080e7          	jalr	1158(ra) # 80001796 <wakeup>
+}
+    80005318:	60a2                	ld	ra,8(sp)
+    8000531a:	6402                	ld	s0,0(sp)
+    8000531c:	0141                	addi	sp,sp,16
+    8000531e:	8082                	ret
+    panic("free_desc 1");
+    80005320:	00003517          	auipc	a0,0x3
+    80005324:	58050513          	addi	a0,a0,1408 # 800088a0 <syscall_name+0x320>
+    80005328:	00001097          	auipc	ra,0x1
+    8000532c:	9c8080e7          	jalr	-1592(ra) # 80005cf0 <panic>
+    panic("free_desc 2");
+    80005330:	00003517          	auipc	a0,0x3
+    80005334:	58050513          	addi	a0,a0,1408 # 800088b0 <syscall_name+0x330>
+    80005338:	00001097          	auipc	ra,0x1
+    8000533c:	9b8080e7          	jalr	-1608(ra) # 80005cf0 <panic>
+
+0000000080005340 <virtio_disk_init>:
+{
+    80005340:	1101                	addi	sp,sp,-32
+    80005342:	ec06                	sd	ra,24(sp)
+    80005344:	e822                	sd	s0,16(sp)
+    80005346:	e426                	sd	s1,8(sp)
+    80005348:	1000                	addi	s0,sp,32
+  initlock(&disk.vdisk_lock, "virtio_disk");
+    8000534a:	00003597          	auipc	a1,0x3
+    8000534e:	57658593          	addi	a1,a1,1398 # 800088c0 <syscall_name+0x340>
+    80005352:	00018517          	auipc	a0,0x18
+    80005356:	dd650513          	addi	a0,a0,-554 # 8001d128 <disk+0x2128>
+    8000535a:	00001097          	auipc	ra,0x1
+    8000535e:	e3e080e7          	jalr	-450(ra) # 80006198 <initlock>
+  if(*R(VIRTIO_MMIO_MAGIC_VALUE) != 0x74726976 ||
+    80005362:	100017b7          	lui	a5,0x10001
+    80005366:	4398                	lw	a4,0(a5)
+    80005368:	2701                	sext.w	a4,a4
+    8000536a:	747277b7          	lui	a5,0x74727
+    8000536e:	97678793          	addi	a5,a5,-1674 # 74726976 <_entry-0xb8d968a>
+    80005372:	0ef71063          	bne	a4,a5,80005452 <virtio_disk_init+0x112>
+     *R(VIRTIO_MMIO_VERSION) != 1 ||
+    80005376:	100017b7          	lui	a5,0x10001
+    8000537a:	43dc                	lw	a5,4(a5)
+    8000537c:	2781                	sext.w	a5,a5
+  if(*R(VIRTIO_MMIO_MAGIC_VALUE) != 0x74726976 ||
+    8000537e:	4705                	li	a4,1
+    80005380:	0ce79963          	bne	a5,a4,80005452 <virtio_disk_init+0x112>
+     *R(VIRTIO_MMIO_DEVICE_ID) != 2 ||
+    80005384:	100017b7          	lui	a5,0x10001
+    80005388:	479c                	lw	a5,8(a5)
+    8000538a:	2781                	sext.w	a5,a5
+     *R(VIRTIO_MMIO_VERSION) != 1 ||
+    8000538c:	4709                	li	a4,2
+    8000538e:	0ce79263          	bne	a5,a4,80005452 <virtio_disk_init+0x112>
+     *R(VIRTIO_MMIO_VENDOR_ID) != 0x554d4551){
+    80005392:	100017b7          	lui	a5,0x10001
+    80005396:	47d8                	lw	a4,12(a5)
+    80005398:	2701                	sext.w	a4,a4
+     *R(VIRTIO_MMIO_DEVICE_ID) != 2 ||
+    8000539a:	554d47b7          	lui	a5,0x554d4
+    8000539e:	55178793          	addi	a5,a5,1361 # 554d4551 <_entry-0x2ab2baaf>
+    800053a2:	0af71863          	bne	a4,a5,80005452 <virtio_disk_init+0x112>
+  *R(VIRTIO_MMIO_STATUS) = status;
+    800053a6:	100017b7          	lui	a5,0x10001
+    800053aa:	4705                	li	a4,1
+    800053ac:	dbb8                	sw	a4,112(a5)
+  *R(VIRTIO_MMIO_STATUS) = status;
+    800053ae:	470d                	li	a4,3
+    800053b0:	dbb8                	sw	a4,112(a5)
+  uint64 features = *R(VIRTIO_MMIO_DEVICE_FEATURES);
+    800053b2:	4b98                	lw	a4,16(a5)
+  *R(VIRTIO_MMIO_DRIVER_FEATURES) = features;
+    800053b4:	c7ffe6b7          	lui	a3,0xc7ffe
+    800053b8:	75f68693          	addi	a3,a3,1887 # ffffffffc7ffe75f <end+0xffffffff47fd851f>
+    800053bc:	8f75                	and	a4,a4,a3
+    800053be:	d398                	sw	a4,32(a5)
+  *R(VIRTIO_MMIO_STATUS) = status;
+    800053c0:	472d                	li	a4,11
+    800053c2:	dbb8                	sw	a4,112(a5)
+  *R(VIRTIO_MMIO_STATUS) = status;
+    800053c4:	473d                	li	a4,15
+    800053c6:	dbb8                	sw	a4,112(a5)
+  *R(VIRTIO_MMIO_GUEST_PAGE_SIZE) = PGSIZE;
+    800053c8:	6705                	lui	a4,0x1
+    800053ca:	d798                	sw	a4,40(a5)
+  *R(VIRTIO_MMIO_QUEUE_SEL) = 0;
+    800053cc:	0207a823          	sw	zero,48(a5) # 10001030 <_entry-0x6fffefd0>
+  uint32 max = *R(VIRTIO_MMIO_QUEUE_NUM_MAX);
+    800053d0:	5bdc                	lw	a5,52(a5)
+    800053d2:	2781                	sext.w	a5,a5
+  if(max == 0)
+    800053d4:	c7d9                	beqz	a5,80005462 <virtio_disk_init+0x122>
+  if(max < NUM)
+    800053d6:	471d                	li	a4,7
+    800053d8:	08f77d63          	bgeu	a4,a5,80005472 <virtio_disk_init+0x132>
+  *R(VIRTIO_MMIO_QUEUE_NUM) = NUM;
+    800053dc:	100014b7          	lui	s1,0x10001
+    800053e0:	47a1                	li	a5,8
+    800053e2:	dc9c                	sw	a5,56(s1)
+  memset(disk.pages, 0, sizeof(disk.pages));
+    800053e4:	6609                	lui	a2,0x2
+    800053e6:	4581                	li	a1,0
+    800053e8:	00016517          	auipc	a0,0x16
+    800053ec:	c1850513          	addi	a0,a0,-1000 # 8001b000 <disk>
+    800053f0:	ffffb097          	auipc	ra,0xffffb
+    800053f4:	dae080e7          	jalr	-594(ra) # 8000019e <memset>
+  *R(VIRTIO_MMIO_QUEUE_PFN) = ((uint64)disk.pages) >> PGSHIFT;
+    800053f8:	00016717          	auipc	a4,0x16
+    800053fc:	c0870713          	addi	a4,a4,-1016 # 8001b000 <disk>
+    80005400:	00c75793          	srli	a5,a4,0xc
+    80005404:	2781                	sext.w	a5,a5
+    80005406:	c0bc                	sw	a5,64(s1)
+  disk.desc = (struct virtq_desc *) disk.pages;
+    80005408:	00018797          	auipc	a5,0x18
+    8000540c:	bf878793          	addi	a5,a5,-1032 # 8001d000 <disk+0x2000>
+    80005410:	e398                	sd	a4,0(a5)
+  disk.avail = (struct virtq_avail *)(disk.pages + NUM*sizeof(struct virtq_desc));
+    80005412:	00016717          	auipc	a4,0x16
+    80005416:	c6e70713          	addi	a4,a4,-914 # 8001b080 <disk+0x80>
+    8000541a:	e798                	sd	a4,8(a5)
+  disk.used = (struct virtq_used *) (disk.pages + PGSIZE);
+    8000541c:	00017717          	auipc	a4,0x17
+    80005420:	be470713          	addi	a4,a4,-1052 # 8001c000 <disk+0x1000>
+    80005424:	eb98                	sd	a4,16(a5)
+    disk.free[i] = 1;
+    80005426:	4705                	li	a4,1
+    80005428:	00e78c23          	sb	a4,24(a5)
+    8000542c:	00e78ca3          	sb	a4,25(a5)
+    80005430:	00e78d23          	sb	a4,26(a5)
+    80005434:	00e78da3          	sb	a4,27(a5)
+    80005438:	00e78e23          	sb	a4,28(a5)
+    8000543c:	00e78ea3          	sb	a4,29(a5)
+    80005440:	00e78f23          	sb	a4,30(a5)
+    80005444:	00e78fa3          	sb	a4,31(a5)
+}
+    80005448:	60e2                	ld	ra,24(sp)
+    8000544a:	6442                	ld	s0,16(sp)
+    8000544c:	64a2                	ld	s1,8(sp)
+    8000544e:	6105                	addi	sp,sp,32
+    80005450:	8082                	ret
+    panic("could not find virtio disk");
+    80005452:	00003517          	auipc	a0,0x3
+    80005456:	47e50513          	addi	a0,a0,1150 # 800088d0 <syscall_name+0x350>
+    8000545a:	00001097          	auipc	ra,0x1
+    8000545e:	896080e7          	jalr	-1898(ra) # 80005cf0 <panic>
+    panic("virtio disk has no queue 0");
+    80005462:	00003517          	auipc	a0,0x3
+    80005466:	48e50513          	addi	a0,a0,1166 # 800088f0 <syscall_name+0x370>
+    8000546a:	00001097          	auipc	ra,0x1
+    8000546e:	886080e7          	jalr	-1914(ra) # 80005cf0 <panic>
+    panic("virtio disk max queue too short");
+    80005472:	00003517          	auipc	a0,0x3
+    80005476:	49e50513          	addi	a0,a0,1182 # 80008910 <syscall_name+0x390>
+    8000547a:	00001097          	auipc	ra,0x1
+    8000547e:	876080e7          	jalr	-1930(ra) # 80005cf0 <panic>
+
+0000000080005482 <virtio_disk_rw>:
+  return 0;
+}
+
+void
+virtio_disk_rw(struct buf *b, int write)
+{
+    80005482:	7119                	addi	sp,sp,-128
+    80005484:	fc86                	sd	ra,120(sp)
+    80005486:	f8a2                	sd	s0,112(sp)
+    80005488:	f4a6                	sd	s1,104(sp)
+    8000548a:	f0ca                	sd	s2,96(sp)
+    8000548c:	ecce                	sd	s3,88(sp)
+    8000548e:	e8d2                	sd	s4,80(sp)
+    80005490:	e4d6                	sd	s5,72(sp)
+    80005492:	e0da                	sd	s6,64(sp)
+    80005494:	fc5e                	sd	s7,56(sp)
+    80005496:	f862                	sd	s8,48(sp)
+    80005498:	f466                	sd	s9,40(sp)
+    8000549a:	f06a                	sd	s10,32(sp)
+    8000549c:	ec6e                	sd	s11,24(sp)
+    8000549e:	0100                	addi	s0,sp,128
+    800054a0:	8aaa                	mv	s5,a0
+    800054a2:	8d2e                	mv	s10,a1
+  uint64 sector = b->blockno * (BSIZE / 512);
+    800054a4:	00c52c83          	lw	s9,12(a0)
+    800054a8:	001c9c9b          	slliw	s9,s9,0x1
+    800054ac:	1c82                	slli	s9,s9,0x20
+    800054ae:	020cdc93          	srli	s9,s9,0x20
+
+  acquire(&disk.vdisk_lock);
+    800054b2:	00018517          	auipc	a0,0x18
+    800054b6:	c7650513          	addi	a0,a0,-906 # 8001d128 <disk+0x2128>
+    800054ba:	00001097          	auipc	ra,0x1
+    800054be:	d6e080e7          	jalr	-658(ra) # 80006228 <acquire>
+  for(int i = 0; i < 3; i++){
+    800054c2:	4981                	li	s3,0
+  for(int i = 0; i < NUM; i++){
+    800054c4:	44a1                	li	s1,8
+      disk.free[i] = 0;
+    800054c6:	00016c17          	auipc	s8,0x16
+    800054ca:	b3ac0c13          	addi	s8,s8,-1222 # 8001b000 <disk>
+    800054ce:	6b89                	lui	s7,0x2
+  for(int i = 0; i < 3; i++){
+    800054d0:	4b0d                	li	s6,3
+    800054d2:	a0ad                	j	8000553c <virtio_disk_rw+0xba>
+      disk.free[i] = 0;
+    800054d4:	00fc0733          	add	a4,s8,a5
+    800054d8:	975e                	add	a4,a4,s7
+    800054da:	00070c23          	sb	zero,24(a4)
+    idx[i] = alloc_desc();
+    800054de:	c19c                	sw	a5,0(a1)
+    if(idx[i] < 0){
+    800054e0:	0207c563          	bltz	a5,8000550a <virtio_disk_rw+0x88>
+  for(int i = 0; i < 3; i++){
+    800054e4:	2905                	addiw	s2,s2,1
+    800054e6:	0611                	addi	a2,a2,4
+    800054e8:	19690c63          	beq	s2,s6,80005680 <virtio_disk_rw+0x1fe>
+    idx[i] = alloc_desc();
+    800054ec:	85b2                	mv	a1,a2
+  for(int i = 0; i < NUM; i++){
+    800054ee:	00018717          	auipc	a4,0x18
+    800054f2:	b2a70713          	addi	a4,a4,-1238 # 8001d018 <disk+0x2018>
+    800054f6:	87ce                	mv	a5,s3
+    if(disk.free[i]){
+    800054f8:	00074683          	lbu	a3,0(a4)
+    800054fc:	fee1                	bnez	a3,800054d4 <virtio_disk_rw+0x52>
+  for(int i = 0; i < NUM; i++){
+    800054fe:	2785                	addiw	a5,a5,1
+    80005500:	0705                	addi	a4,a4,1
+    80005502:	fe979be3          	bne	a5,s1,800054f8 <virtio_disk_rw+0x76>
+    idx[i] = alloc_desc();
+    80005506:	57fd                	li	a5,-1
+    80005508:	c19c                	sw	a5,0(a1)
+      for(int j = 0; j < i; j++)
+    8000550a:	01205d63          	blez	s2,80005524 <virtio_disk_rw+0xa2>
+    8000550e:	8dce                	mv	s11,s3
+        free_desc(idx[j]);
+    80005510:	000a2503          	lw	a0,0(s4)
+    80005514:	00000097          	auipc	ra,0x0
+    80005518:	d92080e7          	jalr	-622(ra) # 800052a6 <free_desc>
+      for(int j = 0; j < i; j++)
+    8000551c:	2d85                	addiw	s11,s11,1
+    8000551e:	0a11                	addi	s4,s4,4
+    80005520:	ff2d98e3          	bne	s11,s2,80005510 <virtio_disk_rw+0x8e>
+  int idx[3];
+  while(1){
+    if(alloc3_desc(idx) == 0) {
+      break;
+    }
+    sleep(&disk.free[0], &disk.vdisk_lock);
+    80005524:	00018597          	auipc	a1,0x18
+    80005528:	c0458593          	addi	a1,a1,-1020 # 8001d128 <disk+0x2128>
+    8000552c:	00018517          	auipc	a0,0x18
+    80005530:	aec50513          	addi	a0,a0,-1300 # 8001d018 <disk+0x2018>
+    80005534:	ffffc097          	auipc	ra,0xffffc
+    80005538:	0d6080e7          	jalr	214(ra) # 8000160a <sleep>
+  for(int i = 0; i < 3; i++){
+    8000553c:	f8040a13          	addi	s4,s0,-128
+{
+    80005540:	8652                	mv	a2,s4
+  for(int i = 0; i < 3; i++){
+    80005542:	894e                	mv	s2,s3
+    80005544:	b765                	j	800054ec <virtio_disk_rw+0x6a>
+  disk.desc[idx[0]].next = idx[1];
+
+  disk.desc[idx[1]].addr = (uint64) b->data;
+  disk.desc[idx[1]].len = BSIZE;
+  if(write)
+    disk.desc[idx[1]].flags = 0; // device reads b->data
+    80005546:	00018697          	auipc	a3,0x18
+    8000554a:	aba6b683          	ld	a3,-1350(a3) # 8001d000 <disk+0x2000>
+    8000554e:	96ba                	add	a3,a3,a4
+    80005550:	00069623          	sh	zero,12(a3)
+  else
+    disk.desc[idx[1]].flags = VRING_DESC_F_WRITE; // device writes b->data
+  disk.desc[idx[1]].flags |= VRING_DESC_F_NEXT;
+    80005554:	00016817          	auipc	a6,0x16
+    80005558:	aac80813          	addi	a6,a6,-1364 # 8001b000 <disk>
+    8000555c:	00018697          	auipc	a3,0x18
+    80005560:	aa468693          	addi	a3,a3,-1372 # 8001d000 <disk+0x2000>
+    80005564:	6290                	ld	a2,0(a3)
+    80005566:	963a                	add	a2,a2,a4
+    80005568:	00c65583          	lhu	a1,12(a2) # 200c <_entry-0x7fffdff4>
+    8000556c:	0015e593          	ori	a1,a1,1
+    80005570:	00b61623          	sh	a1,12(a2)
+  disk.desc[idx[1]].next = idx[2];
+    80005574:	f8842603          	lw	a2,-120(s0)
+    80005578:	628c                	ld	a1,0(a3)
+    8000557a:	972e                	add	a4,a4,a1
+    8000557c:	00c71723          	sh	a2,14(a4)
+
+  disk.info[idx[0]].status = 0xff; // device writes 0 on success
+    80005580:	20050593          	addi	a1,a0,512
+    80005584:	0592                	slli	a1,a1,0x4
+    80005586:	95c2                	add	a1,a1,a6
+    80005588:	577d                	li	a4,-1
+    8000558a:	02e58823          	sb	a4,48(a1)
+  disk.desc[idx[2]].addr = (uint64) &disk.info[idx[0]].status;
+    8000558e:	00461713          	slli	a4,a2,0x4
+    80005592:	6290                	ld	a2,0(a3)
+    80005594:	963a                	add	a2,a2,a4
+    80005596:	03078793          	addi	a5,a5,48
+    8000559a:	97c2                	add	a5,a5,a6
+    8000559c:	e21c                	sd	a5,0(a2)
+  disk.desc[idx[2]].len = 1;
+    8000559e:	629c                	ld	a5,0(a3)
+    800055a0:	97ba                	add	a5,a5,a4
+    800055a2:	4605                	li	a2,1
+    800055a4:	c790                	sw	a2,8(a5)
+  disk.desc[idx[2]].flags = VRING_DESC_F_WRITE; // device writes the status
+    800055a6:	629c                	ld	a5,0(a3)
+    800055a8:	97ba                	add	a5,a5,a4
+    800055aa:	4809                	li	a6,2
+    800055ac:	01079623          	sh	a6,12(a5)
+  disk.desc[idx[2]].next = 0;
+    800055b0:	629c                	ld	a5,0(a3)
+    800055b2:	97ba                	add	a5,a5,a4
+    800055b4:	00079723          	sh	zero,14(a5)
+
+  // record struct buf for virtio_disk_intr().
+  b->disk = 1;
+    800055b8:	00caa223          	sw	a2,4(s5)
+  disk.info[idx[0]].b = b;
+    800055bc:	0355b423          	sd	s5,40(a1)
+
+  // tell the device the first index in our chain of descriptors.
+  disk.avail->ring[disk.avail->idx % NUM] = idx[0];
+    800055c0:	6698                	ld	a4,8(a3)
+    800055c2:	00275783          	lhu	a5,2(a4)
+    800055c6:	8b9d                	andi	a5,a5,7
+    800055c8:	0786                	slli	a5,a5,0x1
+    800055ca:	973e                	add	a4,a4,a5
+    800055cc:	00a71223          	sh	a0,4(a4)
+
+  __sync_synchronize();
+    800055d0:	0ff0000f          	fence
+
+  // tell the device another avail ring entry is available.
+  disk.avail->idx += 1; // not % NUM ...
+    800055d4:	6698                	ld	a4,8(a3)
+    800055d6:	00275783          	lhu	a5,2(a4)
+    800055da:	2785                	addiw	a5,a5,1
+    800055dc:	00f71123          	sh	a5,2(a4)
+
+  __sync_synchronize();
+    800055e0:	0ff0000f          	fence
+
+  *R(VIRTIO_MMIO_QUEUE_NOTIFY) = 0; // value is queue number
+    800055e4:	100017b7          	lui	a5,0x10001
+    800055e8:	0407a823          	sw	zero,80(a5) # 10001050 <_entry-0x6fffefb0>
+
+  // Wait for virtio_disk_intr() to say request has finished.
+  while(b->disk == 1) {
+    800055ec:	004aa783          	lw	a5,4(s5)
+    800055f0:	02c79163          	bne	a5,a2,80005612 <virtio_disk_rw+0x190>
+    sleep(b, &disk.vdisk_lock);
+    800055f4:	00018917          	auipc	s2,0x18
+    800055f8:	b3490913          	addi	s2,s2,-1228 # 8001d128 <disk+0x2128>
+  while(b->disk == 1) {
+    800055fc:	4485                	li	s1,1
+    sleep(b, &disk.vdisk_lock);
+    800055fe:	85ca                	mv	a1,s2
+    80005600:	8556                	mv	a0,s5
+    80005602:	ffffc097          	auipc	ra,0xffffc
+    80005606:	008080e7          	jalr	8(ra) # 8000160a <sleep>
+  while(b->disk == 1) {
+    8000560a:	004aa783          	lw	a5,4(s5)
+    8000560e:	fe9788e3          	beq	a5,s1,800055fe <virtio_disk_rw+0x17c>
+  }
+
+  disk.info[idx[0]].b = 0;
+    80005612:	f8042903          	lw	s2,-128(s0)
+    80005616:	20090713          	addi	a4,s2,512
+    8000561a:	0712                	slli	a4,a4,0x4
+    8000561c:	00016797          	auipc	a5,0x16
+    80005620:	9e478793          	addi	a5,a5,-1564 # 8001b000 <disk>
+    80005624:	97ba                	add	a5,a5,a4
+    80005626:	0207b423          	sd	zero,40(a5)
+    int flag = disk.desc[i].flags;
+    8000562a:	00018997          	auipc	s3,0x18
+    8000562e:	9d698993          	addi	s3,s3,-1578 # 8001d000 <disk+0x2000>
+    80005632:	00491713          	slli	a4,s2,0x4
+    80005636:	0009b783          	ld	a5,0(s3)
+    8000563a:	97ba                	add	a5,a5,a4
+    8000563c:	00c7d483          	lhu	s1,12(a5)
+    int nxt = disk.desc[i].next;
+    80005640:	854a                	mv	a0,s2
+    80005642:	00e7d903          	lhu	s2,14(a5)
+    free_desc(i);
+    80005646:	00000097          	auipc	ra,0x0
+    8000564a:	c60080e7          	jalr	-928(ra) # 800052a6 <free_desc>
+    if(flag & VRING_DESC_F_NEXT)
+    8000564e:	8885                	andi	s1,s1,1
+    80005650:	f0ed                	bnez	s1,80005632 <virtio_disk_rw+0x1b0>
+  free_chain(idx[0]);
+
+  release(&disk.vdisk_lock);
+    80005652:	00018517          	auipc	a0,0x18
+    80005656:	ad650513          	addi	a0,a0,-1322 # 8001d128 <disk+0x2128>
+    8000565a:	00001097          	auipc	ra,0x1
+    8000565e:	c82080e7          	jalr	-894(ra) # 800062dc <release>
+}
+    80005662:	70e6                	ld	ra,120(sp)
+    80005664:	7446                	ld	s0,112(sp)
+    80005666:	74a6                	ld	s1,104(sp)
+    80005668:	7906                	ld	s2,96(sp)
+    8000566a:	69e6                	ld	s3,88(sp)
+    8000566c:	6a46                	ld	s4,80(sp)
+    8000566e:	6aa6                	ld	s5,72(sp)
+    80005670:	6b06                	ld	s6,64(sp)
+    80005672:	7be2                	ld	s7,56(sp)
+    80005674:	7c42                	ld	s8,48(sp)
+    80005676:	7ca2                	ld	s9,40(sp)
+    80005678:	7d02                	ld	s10,32(sp)
+    8000567a:	6de2                	ld	s11,24(sp)
+    8000567c:	6109                	addi	sp,sp,128
+    8000567e:	8082                	ret
+  struct virtio_blk_req *buf0 = &disk.ops[idx[0]];
+    80005680:	f8042503          	lw	a0,-128(s0)
+    80005684:	20050793          	addi	a5,a0,512
+    80005688:	0792                	slli	a5,a5,0x4
+  if(write)
+    8000568a:	00016817          	auipc	a6,0x16
+    8000568e:	97680813          	addi	a6,a6,-1674 # 8001b000 <disk>
+    80005692:	00f80733          	add	a4,a6,a5
+    80005696:	01a036b3          	snez	a3,s10
+    8000569a:	0ad72423          	sw	a3,168(a4)
+  buf0->reserved = 0;
+    8000569e:	0a072623          	sw	zero,172(a4)
+  buf0->sector = sector;
+    800056a2:	0b973823          	sd	s9,176(a4)
+  disk.desc[idx[0]].addr = (uint64) buf0;
+    800056a6:	7679                	lui	a2,0xffffe
+    800056a8:	963e                	add	a2,a2,a5
+    800056aa:	00018697          	auipc	a3,0x18
+    800056ae:	95668693          	addi	a3,a3,-1706 # 8001d000 <disk+0x2000>
+    800056b2:	6298                	ld	a4,0(a3)
+    800056b4:	9732                	add	a4,a4,a2
+  struct virtio_blk_req *buf0 = &disk.ops[idx[0]];
+    800056b6:	0a878593          	addi	a1,a5,168
+    800056ba:	95c2                	add	a1,a1,a6
+  disk.desc[idx[0]].addr = (uint64) buf0;
+    800056bc:	e30c                	sd	a1,0(a4)
+  disk.desc[idx[0]].len = sizeof(struct virtio_blk_req);
+    800056be:	6298                	ld	a4,0(a3)
+    800056c0:	9732                	add	a4,a4,a2
+    800056c2:	45c1                	li	a1,16
+    800056c4:	c70c                	sw	a1,8(a4)
+  disk.desc[idx[0]].flags = VRING_DESC_F_NEXT;
+    800056c6:	6298                	ld	a4,0(a3)
+    800056c8:	9732                	add	a4,a4,a2
+    800056ca:	4585                	li	a1,1
+    800056cc:	00b71623          	sh	a1,12(a4)
+  disk.desc[idx[0]].next = idx[1];
+    800056d0:	f8442703          	lw	a4,-124(s0)
+    800056d4:	628c                	ld	a1,0(a3)
+    800056d6:	962e                	add	a2,a2,a1
+    800056d8:	00e61723          	sh	a4,14(a2) # ffffffffffffe00e <end+0xffffffff7ffd7dce>
+  disk.desc[idx[1]].addr = (uint64) b->data;
+    800056dc:	0712                	slli	a4,a4,0x4
+    800056de:	6290                	ld	a2,0(a3)
+    800056e0:	963a                	add	a2,a2,a4
+    800056e2:	058a8593          	addi	a1,s5,88
+    800056e6:	e20c                	sd	a1,0(a2)
+  disk.desc[idx[1]].len = BSIZE;
+    800056e8:	6294                	ld	a3,0(a3)
+    800056ea:	96ba                	add	a3,a3,a4
+    800056ec:	40000613          	li	a2,1024
+    800056f0:	c690                	sw	a2,8(a3)
+  if(write)
+    800056f2:	e40d1ae3          	bnez	s10,80005546 <virtio_disk_rw+0xc4>
+    disk.desc[idx[1]].flags = VRING_DESC_F_WRITE; // device writes b->data
+    800056f6:	00018697          	auipc	a3,0x18
+    800056fa:	90a6b683          	ld	a3,-1782(a3) # 8001d000 <disk+0x2000>
+    800056fe:	96ba                	add	a3,a3,a4
+    80005700:	4609                	li	a2,2
+    80005702:	00c69623          	sh	a2,12(a3)
+    80005706:	b5b9                	j	80005554 <virtio_disk_rw+0xd2>
+
+0000000080005708 <virtio_disk_intr>:
+
+void
+virtio_disk_intr()
+{
+    80005708:	1101                	addi	sp,sp,-32
+    8000570a:	ec06                	sd	ra,24(sp)
+    8000570c:	e822                	sd	s0,16(sp)
+    8000570e:	e426                	sd	s1,8(sp)
+    80005710:	e04a                	sd	s2,0(sp)
+    80005712:	1000                	addi	s0,sp,32
+  acquire(&disk.vdisk_lock);
+    80005714:	00018517          	auipc	a0,0x18
+    80005718:	a1450513          	addi	a0,a0,-1516 # 8001d128 <disk+0x2128>
+    8000571c:	00001097          	auipc	ra,0x1
+    80005720:	b0c080e7          	jalr	-1268(ra) # 80006228 <acquire>
+  // we've seen this interrupt, which the following line does.
+  // this may race with the device writing new entries to
+  // the "used" ring, in which case we may process the new
+  // completion entries in this interrupt, and have nothing to do
+  // in the next interrupt, which is harmless.
+  *R(VIRTIO_MMIO_INTERRUPT_ACK) = *R(VIRTIO_MMIO_INTERRUPT_STATUS) & 0x3;
+    80005724:	10001737          	lui	a4,0x10001
+    80005728:	533c                	lw	a5,96(a4)
+    8000572a:	8b8d                	andi	a5,a5,3
+    8000572c:	d37c                	sw	a5,100(a4)
+
+  __sync_synchronize();
+    8000572e:	0ff0000f          	fence
+
+  // the device increments disk.used->idx when it
+  // adds an entry to the used ring.
+
+  while(disk.used_idx != disk.used->idx){
+    80005732:	00018797          	auipc	a5,0x18
+    80005736:	8ce78793          	addi	a5,a5,-1842 # 8001d000 <disk+0x2000>
+    8000573a:	6b94                	ld	a3,16(a5)
+    8000573c:	0207d703          	lhu	a4,32(a5)
+    80005740:	0026d783          	lhu	a5,2(a3)
+    80005744:	06f70163          	beq	a4,a5,800057a6 <virtio_disk_intr+0x9e>
+    __sync_synchronize();
+    int id = disk.used->ring[disk.used_idx % NUM].id;
+    80005748:	00016917          	auipc	s2,0x16
+    8000574c:	8b890913          	addi	s2,s2,-1864 # 8001b000 <disk>
+    80005750:	00018497          	auipc	s1,0x18
+    80005754:	8b048493          	addi	s1,s1,-1872 # 8001d000 <disk+0x2000>
+    __sync_synchronize();
+    80005758:	0ff0000f          	fence
+    int id = disk.used->ring[disk.used_idx % NUM].id;
+    8000575c:	6898                	ld	a4,16(s1)
+    8000575e:	0204d783          	lhu	a5,32(s1)
+    80005762:	8b9d                	andi	a5,a5,7
+    80005764:	078e                	slli	a5,a5,0x3
+    80005766:	97ba                	add	a5,a5,a4
+    80005768:	43dc                	lw	a5,4(a5)
+
+    if(disk.info[id].status != 0)
+    8000576a:	20078713          	addi	a4,a5,512
+    8000576e:	0712                	slli	a4,a4,0x4
+    80005770:	974a                	add	a4,a4,s2
+    80005772:	03074703          	lbu	a4,48(a4) # 10001030 <_entry-0x6fffefd0>
+    80005776:	e731                	bnez	a4,800057c2 <virtio_disk_intr+0xba>
+      panic("virtio_disk_intr status");
+
+    struct buf *b = disk.info[id].b;
+    80005778:	20078793          	addi	a5,a5,512
+    8000577c:	0792                	slli	a5,a5,0x4
+    8000577e:	97ca                	add	a5,a5,s2
+    80005780:	7788                	ld	a0,40(a5)
+    b->disk = 0;   // disk is done with buf
+    80005782:	00052223          	sw	zero,4(a0)
+    wakeup(b);
+    80005786:	ffffc097          	auipc	ra,0xffffc
+    8000578a:	010080e7          	jalr	16(ra) # 80001796 <wakeup>
+
+    disk.used_idx += 1;
+    8000578e:	0204d783          	lhu	a5,32(s1)
+    80005792:	2785                	addiw	a5,a5,1
+    80005794:	17c2                	slli	a5,a5,0x30
+    80005796:	93c1                	srli	a5,a5,0x30
+    80005798:	02f49023          	sh	a5,32(s1)
+  while(disk.used_idx != disk.used->idx){
+    8000579c:	6898                	ld	a4,16(s1)
+    8000579e:	00275703          	lhu	a4,2(a4)
+    800057a2:	faf71be3          	bne	a4,a5,80005758 <virtio_disk_intr+0x50>
+  }
+
+  release(&disk.vdisk_lock);
+    800057a6:	00018517          	auipc	a0,0x18
+    800057aa:	98250513          	addi	a0,a0,-1662 # 8001d128 <disk+0x2128>
+    800057ae:	00001097          	auipc	ra,0x1
+    800057b2:	b2e080e7          	jalr	-1234(ra) # 800062dc <release>
+}
+    800057b6:	60e2                	ld	ra,24(sp)
+    800057b8:	6442                	ld	s0,16(sp)
+    800057ba:	64a2                	ld	s1,8(sp)
+    800057bc:	6902                	ld	s2,0(sp)
+    800057be:	6105                	addi	sp,sp,32
+    800057c0:	8082                	ret
+      panic("virtio_disk_intr status");
+    800057c2:	00003517          	auipc	a0,0x3
+    800057c6:	16e50513          	addi	a0,a0,366 # 80008930 <syscall_name+0x3b0>
+    800057ca:	00000097          	auipc	ra,0x0
+    800057ce:	526080e7          	jalr	1318(ra) # 80005cf0 <panic>
+
+00000000800057d2 <timerinit>:
+// which arrive at timervec in kernelvec.S,
+// which turns them into software interrupts for
+// devintr() in trap.c.
+void
+timerinit()
+{
+    800057d2:	1141                	addi	sp,sp,-16
+    800057d4:	e422                	sd	s0,8(sp)
+    800057d6:	0800                	addi	s0,sp,16
+  asm volatile("csrr %0, mhartid" : "=r" (x) );
+    800057d8:	f14027f3          	csrr	a5,mhartid
+  // each CPU has a separate source of timer interrupts.
+  int id = r_mhartid();
+    800057dc:	0007859b          	sext.w	a1,a5
+
+  // ask the CLINT for a timer interrupt.
+  int interval = 1000000; // cycles; about 1/10th second in qemu.
+  *(uint64*)CLINT_MTIMECMP(id) = *(uint64*)CLINT_MTIME + interval;
+    800057e0:	0037979b          	slliw	a5,a5,0x3
+    800057e4:	02004737          	lui	a4,0x2004
+    800057e8:	97ba                	add	a5,a5,a4
+    800057ea:	0200c737          	lui	a4,0x200c
+    800057ee:	ff873703          	ld	a4,-8(a4) # 200bff8 <_entry-0x7dff4008>
+    800057f2:	000f4637          	lui	a2,0xf4
+    800057f6:	24060613          	addi	a2,a2,576 # f4240 <_entry-0x7ff0bdc0>
+    800057fa:	9732                	add	a4,a4,a2
+    800057fc:	e398                	sd	a4,0(a5)
+
+  // prepare information in scratch[] for timervec.
+  // scratch[0..2] : space for timervec to save registers.
+  // scratch[3] : address of CLINT MTIMECMP register.
+  // scratch[4] : desired interval (in cycles) between timer interrupts.
+  uint64 *scratch = &timer_scratch[id][0];
+    800057fe:	00259693          	slli	a3,a1,0x2
+    80005802:	96ae                	add	a3,a3,a1
+    80005804:	068e                	slli	a3,a3,0x3
+    80005806:	00018717          	auipc	a4,0x18
+    8000580a:	7fa70713          	addi	a4,a4,2042 # 8001e000 <timer_scratch>
+    8000580e:	9736                	add	a4,a4,a3
+  scratch[3] = CLINT_MTIMECMP(id);
+    80005810:	ef1c                	sd	a5,24(a4)
+  scratch[4] = interval;
+    80005812:	f310                	sd	a2,32(a4)
+  asm volatile("csrw mscratch, %0" : : "r" (x));
+    80005814:	34071073          	csrw	mscratch,a4
+  asm volatile("csrw mtvec, %0" : : "r" (x));
+    80005818:	00000797          	auipc	a5,0x0
+    8000581c:	9c878793          	addi	a5,a5,-1592 # 800051e0 <timervec>
+    80005820:	30579073          	csrw	mtvec,a5
+  asm volatile("csrr %0, mstatus" : "=r" (x) );
+    80005824:	300027f3          	csrr	a5,mstatus
+
+  // set the machine-mode trap handler.
+  w_mtvec((uint64)timervec);
+
+  // enable machine-mode interrupts.
+  w_mstatus(r_mstatus() | MSTATUS_MIE);
+    80005828:	0087e793          	ori	a5,a5,8
+  asm volatile("csrw mstatus, %0" : : "r" (x));
+    8000582c:	30079073          	csrw	mstatus,a5
+  asm volatile("csrr %0, mie" : "=r" (x) );
+    80005830:	304027f3          	csrr	a5,mie
+
+  // enable machine-mode timer interrupts.
+  w_mie(r_mie() | MIE_MTIE);
+    80005834:	0807e793          	ori	a5,a5,128
+  asm volatile("csrw mie, %0" : : "r" (x));
+    80005838:	30479073          	csrw	mie,a5
+}
+    8000583c:	6422                	ld	s0,8(sp)
+    8000583e:	0141                	addi	sp,sp,16
+    80005840:	8082                	ret
+
+0000000080005842 <start>:
+{
+    80005842:	1141                	addi	sp,sp,-16
+    80005844:	e406                	sd	ra,8(sp)
+    80005846:	e022                	sd	s0,0(sp)
+    80005848:	0800                	addi	s0,sp,16
+  asm volatile("csrr %0, mstatus" : "=r" (x) );
+    8000584a:	300027f3          	csrr	a5,mstatus
+  x &= ~MSTATUS_MPP_MASK;
+    8000584e:	7779                	lui	a4,0xffffe
+    80005850:	7ff70713          	addi	a4,a4,2047 # ffffffffffffe7ff <end+0xffffffff7ffd85bf>
+    80005854:	8ff9                	and	a5,a5,a4
+  x |= MSTATUS_MPP_S;
+    80005856:	6705                	lui	a4,0x1
+    80005858:	80070713          	addi	a4,a4,-2048 # 800 <_entry-0x7ffff800>
+    8000585c:	8fd9                	or	a5,a5,a4
+  asm volatile("csrw mstatus, %0" : : "r" (x));
+    8000585e:	30079073          	csrw	mstatus,a5
+  asm volatile("csrw mepc, %0" : : "r" (x));
+    80005862:	ffffb797          	auipc	a5,0xffffb
+    80005866:	ae278793          	addi	a5,a5,-1310 # 80000344 <main>
+    8000586a:	34179073          	csrw	mepc,a5
+  asm volatile("csrw satp, %0" : : "r" (x));
+    8000586e:	4781                	li	a5,0
+    80005870:	18079073          	csrw	satp,a5
+  asm volatile("csrw medeleg, %0" : : "r" (x));
+    80005874:	67c1                	lui	a5,0x10
+    80005876:	17fd                	addi	a5,a5,-1
+    80005878:	30279073          	csrw	medeleg,a5
+  asm volatile("csrw mideleg, %0" : : "r" (x));
+    8000587c:	30379073          	csrw	mideleg,a5
+  asm volatile("csrr %0, sie" : "=r" (x) );
+    80005880:	104027f3          	csrr	a5,sie
+  w_sie(r_sie() | SIE_SEIE | SIE_STIE | SIE_SSIE);
+    80005884:	2227e793          	ori	a5,a5,546
+  asm volatile("csrw sie, %0" : : "r" (x));
+    80005888:	10479073          	csrw	sie,a5
+  asm volatile("csrw pmpaddr0, %0" : : "r" (x));
+    8000588c:	57fd                	li	a5,-1
+    8000588e:	83a9                	srli	a5,a5,0xa
+    80005890:	3b079073          	csrw	pmpaddr0,a5
+  asm volatile("csrw pmpcfg0, %0" : : "r" (x));
+    80005894:	47bd                	li	a5,15
+    80005896:	3a079073          	csrw	pmpcfg0,a5
+  timerinit();
+    8000589a:	00000097          	auipc	ra,0x0
+    8000589e:	f38080e7          	jalr	-200(ra) # 800057d2 <timerinit>
+  asm volatile("csrr %0, mhartid" : "=r" (x) );
+    800058a2:	f14027f3          	csrr	a5,mhartid
+  w_tp(id);
+    800058a6:	2781                	sext.w	a5,a5
+  asm volatile("mv tp, %0" : : "r" (x));
+    800058a8:	823e                	mv	tp,a5
+  asm volatile("mret");
+    800058aa:	30200073          	mret
+}
+    800058ae:	60a2                	ld	ra,8(sp)
+    800058b0:	6402                	ld	s0,0(sp)
+    800058b2:	0141                	addi	sp,sp,16
+    800058b4:	8082                	ret
+
+00000000800058b6 <consolewrite>:
+//
+// user write()s to the console go here.
+//
+int
+consolewrite(int user_src, uint64 src, int n)
+{
+    800058b6:	715d                	addi	sp,sp,-80
+    800058b8:	e486                	sd	ra,72(sp)
+    800058ba:	e0a2                	sd	s0,64(sp)
+    800058bc:	fc26                	sd	s1,56(sp)
+    800058be:	f84a                	sd	s2,48(sp)
+    800058c0:	f44e                	sd	s3,40(sp)
+    800058c2:	f052                	sd	s4,32(sp)
+    800058c4:	ec56                	sd	s5,24(sp)
+    800058c6:	0880                	addi	s0,sp,80
+  int i;
+
+  for(i = 0; i < n; i++){
+    800058c8:	04c05763          	blez	a2,80005916 <consolewrite+0x60>
+    800058cc:	8a2a                	mv	s4,a0
+    800058ce:	84ae                	mv	s1,a1
+    800058d0:	89b2                	mv	s3,a2
+    800058d2:	4901                	li	s2,0
+    char c;
+    if(either_copyin(&c, user_src, src+i, 1) == -1)
+    800058d4:	5afd                	li	s5,-1
+    800058d6:	4685                	li	a3,1
+    800058d8:	8626                	mv	a2,s1
+    800058da:	85d2                	mv	a1,s4
+    800058dc:	fbf40513          	addi	a0,s0,-65
+    800058e0:	ffffc097          	auipc	ra,0xffffc
+    800058e4:	124080e7          	jalr	292(ra) # 80001a04 <either_copyin>
+    800058e8:	01550d63          	beq	a0,s5,80005902 <consolewrite+0x4c>
+      break;
+    uartputc(c);
+    800058ec:	fbf44503          	lbu	a0,-65(s0)
+    800058f0:	00000097          	auipc	ra,0x0
+    800058f4:	77e080e7          	jalr	1918(ra) # 8000606e <uartputc>
+  for(i = 0; i < n; i++){
+    800058f8:	2905                	addiw	s2,s2,1
+    800058fa:	0485                	addi	s1,s1,1
+    800058fc:	fd299de3          	bne	s3,s2,800058d6 <consolewrite+0x20>
+    80005900:	894e                	mv	s2,s3
+  }
+
+  return i;
+}
+    80005902:	854a                	mv	a0,s2
+    80005904:	60a6                	ld	ra,72(sp)
+    80005906:	6406                	ld	s0,64(sp)
+    80005908:	74e2                	ld	s1,56(sp)
+    8000590a:	7942                	ld	s2,48(sp)
+    8000590c:	79a2                	ld	s3,40(sp)
+    8000590e:	7a02                	ld	s4,32(sp)
+    80005910:	6ae2                	ld	s5,24(sp)
+    80005912:	6161                	addi	sp,sp,80
+    80005914:	8082                	ret
+  for(i = 0; i < n; i++){
+    80005916:	4901                	li	s2,0
+    80005918:	b7ed                	j	80005902 <consolewrite+0x4c>
+
+000000008000591a <consoleread>:
+// user_dist indicates whether dst is a user
+// or kernel address.
+//
+int
+consoleread(int user_dst, uint64 dst, int n)
+{
+    8000591a:	7159                	addi	sp,sp,-112
+    8000591c:	f486                	sd	ra,104(sp)
+    8000591e:	f0a2                	sd	s0,96(sp)
+    80005920:	eca6                	sd	s1,88(sp)
+    80005922:	e8ca                	sd	s2,80(sp)
+    80005924:	e4ce                	sd	s3,72(sp)
+    80005926:	e0d2                	sd	s4,64(sp)
+    80005928:	fc56                	sd	s5,56(sp)
+    8000592a:	f85a                	sd	s6,48(sp)
+    8000592c:	f45e                	sd	s7,40(sp)
+    8000592e:	f062                	sd	s8,32(sp)
+    80005930:	ec66                	sd	s9,24(sp)
+    80005932:	e86a                	sd	s10,16(sp)
+    80005934:	1880                	addi	s0,sp,112
+    80005936:	8aaa                	mv	s5,a0
+    80005938:	8a2e                	mv	s4,a1
+    8000593a:	89b2                	mv	s3,a2
+  uint target;
+  int c;
+  char cbuf;
+
+  target = n;
+    8000593c:	00060b1b          	sext.w	s6,a2
+  acquire(&cons.lock);
+    80005940:	00021517          	auipc	a0,0x21
+    80005944:	80050513          	addi	a0,a0,-2048 # 80026140 <cons>
+    80005948:	00001097          	auipc	ra,0x1
+    8000594c:	8e0080e7          	jalr	-1824(ra) # 80006228 <acquire>
+  while(n > 0){
+    // wait until interrupt handler has put some
+    // input into cons.buffer.
+    while(cons.r == cons.w){
+    80005950:	00020497          	auipc	s1,0x20
+    80005954:	7f048493          	addi	s1,s1,2032 # 80026140 <cons>
+      if(myproc()->killed){
+        release(&cons.lock);
+        return -1;
+      }
+      sleep(&cons.r, &cons.lock);
+    80005958:	00021917          	auipc	s2,0x21
+    8000595c:	88090913          	addi	s2,s2,-1920 # 800261d8 <cons+0x98>
+    }
+
+    c = cons.buf[cons.r++ % INPUT_BUF];
+
+    if(c == C('D')){  // end-of-file
+    80005960:	4b91                	li	s7,4
+      break;
+    }
+
+    // copy the input byte to the user-space buffer.
+    cbuf = c;
+    if(either_copyout(user_dst, dst, &cbuf, 1) == -1)
+    80005962:	5c7d                	li	s8,-1
+      break;
+
+    dst++;
+    --n;
+
+    if(c == '\n'){
+    80005964:	4ca9                	li	s9,10
+  while(n > 0){
+    80005966:	07305863          	blez	s3,800059d6 <consoleread+0xbc>
+    while(cons.r == cons.w){
+    8000596a:	0984a783          	lw	a5,152(s1)
+    8000596e:	09c4a703          	lw	a4,156(s1)
+    80005972:	02f71463          	bne	a4,a5,8000599a <consoleread+0x80>
+      if(myproc()->killed){
+    80005976:	ffffb097          	auipc	ra,0xffffb
+    8000597a:	5c8080e7          	jalr	1480(ra) # 80000f3e <myproc>
+    8000597e:	551c                	lw	a5,40(a0)
+    80005980:	e7b5                	bnez	a5,800059ec <consoleread+0xd2>
+      sleep(&cons.r, &cons.lock);
+    80005982:	85a6                	mv	a1,s1
+    80005984:	854a                	mv	a0,s2
+    80005986:	ffffc097          	auipc	ra,0xffffc
+    8000598a:	c84080e7          	jalr	-892(ra) # 8000160a <sleep>
+    while(cons.r == cons.w){
+    8000598e:	0984a783          	lw	a5,152(s1)
+    80005992:	09c4a703          	lw	a4,156(s1)
+    80005996:	fef700e3          	beq	a4,a5,80005976 <consoleread+0x5c>
+    c = cons.buf[cons.r++ % INPUT_BUF];
+    8000599a:	0017871b          	addiw	a4,a5,1
+    8000599e:	08e4ac23          	sw	a4,152(s1)
+    800059a2:	07f7f713          	andi	a4,a5,127
+    800059a6:	9726                	add	a4,a4,s1
+    800059a8:	01874703          	lbu	a4,24(a4)
+    800059ac:	00070d1b          	sext.w	s10,a4
+    if(c == C('D')){  // end-of-file
+    800059b0:	077d0563          	beq	s10,s7,80005a1a <consoleread+0x100>
+    cbuf = c;
+    800059b4:	f8e40fa3          	sb	a4,-97(s0)
+    if(either_copyout(user_dst, dst, &cbuf, 1) == -1)
+    800059b8:	4685                	li	a3,1
+    800059ba:	f9f40613          	addi	a2,s0,-97
+    800059be:	85d2                	mv	a1,s4
+    800059c0:	8556                	mv	a0,s5
+    800059c2:	ffffc097          	auipc	ra,0xffffc
+    800059c6:	fec080e7          	jalr	-20(ra) # 800019ae <either_copyout>
+    800059ca:	01850663          	beq	a0,s8,800059d6 <consoleread+0xbc>
+    dst++;
+    800059ce:	0a05                	addi	s4,s4,1
+    --n;
+    800059d0:	39fd                	addiw	s3,s3,-1
+    if(c == '\n'){
+    800059d2:	f99d1ae3          	bne	s10,s9,80005966 <consoleread+0x4c>
+      // a whole line has arrived, return to
+      // the user-level read().
+      break;
+    }
+  }
+  release(&cons.lock);
+    800059d6:	00020517          	auipc	a0,0x20
+    800059da:	76a50513          	addi	a0,a0,1898 # 80026140 <cons>
+    800059de:	00001097          	auipc	ra,0x1
+    800059e2:	8fe080e7          	jalr	-1794(ra) # 800062dc <release>
+
+  return target - n;
+    800059e6:	413b053b          	subw	a0,s6,s3
+    800059ea:	a811                	j	800059fe <consoleread+0xe4>
+        release(&cons.lock);
+    800059ec:	00020517          	auipc	a0,0x20
+    800059f0:	75450513          	addi	a0,a0,1876 # 80026140 <cons>
+    800059f4:	00001097          	auipc	ra,0x1
+    800059f8:	8e8080e7          	jalr	-1816(ra) # 800062dc <release>
+        return -1;
+    800059fc:	557d                	li	a0,-1
+}
+    800059fe:	70a6                	ld	ra,104(sp)
+    80005a00:	7406                	ld	s0,96(sp)
+    80005a02:	64e6                	ld	s1,88(sp)
+    80005a04:	6946                	ld	s2,80(sp)
+    80005a06:	69a6                	ld	s3,72(sp)
+    80005a08:	6a06                	ld	s4,64(sp)
+    80005a0a:	7ae2                	ld	s5,56(sp)
+    80005a0c:	7b42                	ld	s6,48(sp)
+    80005a0e:	7ba2                	ld	s7,40(sp)
+    80005a10:	7c02                	ld	s8,32(sp)
+    80005a12:	6ce2                	ld	s9,24(sp)
+    80005a14:	6d42                	ld	s10,16(sp)
+    80005a16:	6165                	addi	sp,sp,112
+    80005a18:	8082                	ret
+      if(n < target){
+    80005a1a:	0009871b          	sext.w	a4,s3
+    80005a1e:	fb677ce3          	bgeu	a4,s6,800059d6 <consoleread+0xbc>
+        cons.r--;
+    80005a22:	00020717          	auipc	a4,0x20
+    80005a26:	7af72b23          	sw	a5,1974(a4) # 800261d8 <cons+0x98>
+    80005a2a:	b775                	j	800059d6 <consoleread+0xbc>
+
+0000000080005a2c <consputc>:
+{
+    80005a2c:	1141                	addi	sp,sp,-16
+    80005a2e:	e406                	sd	ra,8(sp)
+    80005a30:	e022                	sd	s0,0(sp)
+    80005a32:	0800                	addi	s0,sp,16
+  if(c == BACKSPACE){
+    80005a34:	10000793          	li	a5,256
+    80005a38:	00f50a63          	beq	a0,a5,80005a4c <consputc+0x20>
+    uartputc_sync(c);
+    80005a3c:	00000097          	auipc	ra,0x0
+    80005a40:	560080e7          	jalr	1376(ra) # 80005f9c <uartputc_sync>
+}
+    80005a44:	60a2                	ld	ra,8(sp)
+    80005a46:	6402                	ld	s0,0(sp)
+    80005a48:	0141                	addi	sp,sp,16
+    80005a4a:	8082                	ret
+    uartputc_sync('\b'); uartputc_sync(' '); uartputc_sync('\b');
+    80005a4c:	4521                	li	a0,8
+    80005a4e:	00000097          	auipc	ra,0x0
+    80005a52:	54e080e7          	jalr	1358(ra) # 80005f9c <uartputc_sync>
+    80005a56:	02000513          	li	a0,32
+    80005a5a:	00000097          	auipc	ra,0x0
+    80005a5e:	542080e7          	jalr	1346(ra) # 80005f9c <uartputc_sync>
+    80005a62:	4521                	li	a0,8
+    80005a64:	00000097          	auipc	ra,0x0
+    80005a68:	538080e7          	jalr	1336(ra) # 80005f9c <uartputc_sync>
+    80005a6c:	bfe1                	j	80005a44 <consputc+0x18>
+
+0000000080005a6e <consoleintr>:
+// do erase/kill processing, append to cons.buf,
+// wake up consoleread() if a whole line has arrived.
+//
+void
+consoleintr(int c)
+{
+    80005a6e:	1101                	addi	sp,sp,-32
+    80005a70:	ec06                	sd	ra,24(sp)
+    80005a72:	e822                	sd	s0,16(sp)
+    80005a74:	e426                	sd	s1,8(sp)
+    80005a76:	e04a                	sd	s2,0(sp)
+    80005a78:	1000                	addi	s0,sp,32
+    80005a7a:	84aa                	mv	s1,a0
+  acquire(&cons.lock);
+    80005a7c:	00020517          	auipc	a0,0x20
+    80005a80:	6c450513          	addi	a0,a0,1732 # 80026140 <cons>
+    80005a84:	00000097          	auipc	ra,0x0
+    80005a88:	7a4080e7          	jalr	1956(ra) # 80006228 <acquire>
+
+  switch(c){
+    80005a8c:	47d5                	li	a5,21
+    80005a8e:	0af48663          	beq	s1,a5,80005b3a <consoleintr+0xcc>
+    80005a92:	0297ca63          	blt	a5,s1,80005ac6 <consoleintr+0x58>
+    80005a96:	47a1                	li	a5,8
+    80005a98:	0ef48763          	beq	s1,a5,80005b86 <consoleintr+0x118>
+    80005a9c:	47c1                	li	a5,16
+    80005a9e:	10f49a63          	bne	s1,a5,80005bb2 <consoleintr+0x144>
+  case C('P'):  // Print process list.
+    procdump();
+    80005aa2:	ffffc097          	auipc	ra,0xffffc
+    80005aa6:	fb8080e7          	jalr	-72(ra) # 80001a5a <procdump>
+      }
+    }
+    break;
+  }
+  
+  release(&cons.lock);
+    80005aaa:	00020517          	auipc	a0,0x20
+    80005aae:	69650513          	addi	a0,a0,1686 # 80026140 <cons>
+    80005ab2:	00001097          	auipc	ra,0x1
+    80005ab6:	82a080e7          	jalr	-2006(ra) # 800062dc <release>
+}
+    80005aba:	60e2                	ld	ra,24(sp)
+    80005abc:	6442                	ld	s0,16(sp)
+    80005abe:	64a2                	ld	s1,8(sp)
+    80005ac0:	6902                	ld	s2,0(sp)
+    80005ac2:	6105                	addi	sp,sp,32
+    80005ac4:	8082                	ret
+  switch(c){
+    80005ac6:	07f00793          	li	a5,127
+    80005aca:	0af48e63          	beq	s1,a5,80005b86 <consoleintr+0x118>
+    if(c != 0 && cons.e-cons.r < INPUT_BUF){
+    80005ace:	00020717          	auipc	a4,0x20
+    80005ad2:	67270713          	addi	a4,a4,1650 # 80026140 <cons>
+    80005ad6:	0a072783          	lw	a5,160(a4)
+    80005ada:	09872703          	lw	a4,152(a4)
+    80005ade:	9f99                	subw	a5,a5,a4
+    80005ae0:	07f00713          	li	a4,127
+    80005ae4:	fcf763e3          	bltu	a4,a5,80005aaa <consoleintr+0x3c>
+      c = (c == '\r') ? '\n' : c;
+    80005ae8:	47b5                	li	a5,13
+    80005aea:	0cf48763          	beq	s1,a5,80005bb8 <consoleintr+0x14a>
+      consputc(c);
+    80005aee:	8526                	mv	a0,s1
+    80005af0:	00000097          	auipc	ra,0x0
+    80005af4:	f3c080e7          	jalr	-196(ra) # 80005a2c <consputc>
+      cons.buf[cons.e++ % INPUT_BUF] = c;
+    80005af8:	00020797          	auipc	a5,0x20
+    80005afc:	64878793          	addi	a5,a5,1608 # 80026140 <cons>
+    80005b00:	0a07a703          	lw	a4,160(a5)
+    80005b04:	0017069b          	addiw	a3,a4,1
+    80005b08:	0006861b          	sext.w	a2,a3
+    80005b0c:	0ad7a023          	sw	a3,160(a5)
+    80005b10:	07f77713          	andi	a4,a4,127
+    80005b14:	97ba                	add	a5,a5,a4
+    80005b16:	00978c23          	sb	s1,24(a5)
+      if(c == '\n' || c == C('D') || cons.e == cons.r+INPUT_BUF){
+    80005b1a:	47a9                	li	a5,10
+    80005b1c:	0cf48563          	beq	s1,a5,80005be6 <consoleintr+0x178>
+    80005b20:	4791                	li	a5,4
+    80005b22:	0cf48263          	beq	s1,a5,80005be6 <consoleintr+0x178>
+    80005b26:	00020797          	auipc	a5,0x20
+    80005b2a:	6b27a783          	lw	a5,1714(a5) # 800261d8 <cons+0x98>
+    80005b2e:	0807879b          	addiw	a5,a5,128
+    80005b32:	f6f61ce3          	bne	a2,a5,80005aaa <consoleintr+0x3c>
+      cons.buf[cons.e++ % INPUT_BUF] = c;
+    80005b36:	863e                	mv	a2,a5
+    80005b38:	a07d                	j	80005be6 <consoleintr+0x178>
+    while(cons.e != cons.w &&
+    80005b3a:	00020717          	auipc	a4,0x20
+    80005b3e:	60670713          	addi	a4,a4,1542 # 80026140 <cons>
+    80005b42:	0a072783          	lw	a5,160(a4)
+    80005b46:	09c72703          	lw	a4,156(a4)
+          cons.buf[(cons.e-1) % INPUT_BUF] != '\n'){
+    80005b4a:	00020497          	auipc	s1,0x20
+    80005b4e:	5f648493          	addi	s1,s1,1526 # 80026140 <cons>
+    while(cons.e != cons.w &&
+    80005b52:	4929                	li	s2,10
+    80005b54:	f4f70be3          	beq	a4,a5,80005aaa <consoleintr+0x3c>
+          cons.buf[(cons.e-1) % INPUT_BUF] != '\n'){
+    80005b58:	37fd                	addiw	a5,a5,-1
+    80005b5a:	07f7f713          	andi	a4,a5,127
+    80005b5e:	9726                	add	a4,a4,s1
+    while(cons.e != cons.w &&
+    80005b60:	01874703          	lbu	a4,24(a4)
+    80005b64:	f52703e3          	beq	a4,s2,80005aaa <consoleintr+0x3c>
+      cons.e--;
+    80005b68:	0af4a023          	sw	a5,160(s1)
+      consputc(BACKSPACE);
+    80005b6c:	10000513          	li	a0,256
+    80005b70:	00000097          	auipc	ra,0x0
+    80005b74:	ebc080e7          	jalr	-324(ra) # 80005a2c <consputc>
+    while(cons.e != cons.w &&
+    80005b78:	0a04a783          	lw	a5,160(s1)
+    80005b7c:	09c4a703          	lw	a4,156(s1)
+    80005b80:	fcf71ce3          	bne	a4,a5,80005b58 <consoleintr+0xea>
+    80005b84:	b71d                	j	80005aaa <consoleintr+0x3c>
+    if(cons.e != cons.w){
+    80005b86:	00020717          	auipc	a4,0x20
+    80005b8a:	5ba70713          	addi	a4,a4,1466 # 80026140 <cons>
+    80005b8e:	0a072783          	lw	a5,160(a4)
+    80005b92:	09c72703          	lw	a4,156(a4)
+    80005b96:	f0f70ae3          	beq	a4,a5,80005aaa <consoleintr+0x3c>
+      cons.e--;
+    80005b9a:	37fd                	addiw	a5,a5,-1
+    80005b9c:	00020717          	auipc	a4,0x20
+    80005ba0:	64f72223          	sw	a5,1604(a4) # 800261e0 <cons+0xa0>
+      consputc(BACKSPACE);
+    80005ba4:	10000513          	li	a0,256
+    80005ba8:	00000097          	auipc	ra,0x0
+    80005bac:	e84080e7          	jalr	-380(ra) # 80005a2c <consputc>
+    80005bb0:	bded                	j	80005aaa <consoleintr+0x3c>
+    if(c != 0 && cons.e-cons.r < INPUT_BUF){
+    80005bb2:	ee048ce3          	beqz	s1,80005aaa <consoleintr+0x3c>
+    80005bb6:	bf21                	j	80005ace <consoleintr+0x60>
+      consputc(c);
+    80005bb8:	4529                	li	a0,10
+    80005bba:	00000097          	auipc	ra,0x0
+    80005bbe:	e72080e7          	jalr	-398(ra) # 80005a2c <consputc>
+      cons.buf[cons.e++ % INPUT_BUF] = c;
+    80005bc2:	00020797          	auipc	a5,0x20
+    80005bc6:	57e78793          	addi	a5,a5,1406 # 80026140 <cons>
+    80005bca:	0a07a703          	lw	a4,160(a5)
+    80005bce:	0017069b          	addiw	a3,a4,1
+    80005bd2:	0006861b          	sext.w	a2,a3
+    80005bd6:	0ad7a023          	sw	a3,160(a5)
+    80005bda:	07f77713          	andi	a4,a4,127
+    80005bde:	97ba                	add	a5,a5,a4
+    80005be0:	4729                	li	a4,10
+    80005be2:	00e78c23          	sb	a4,24(a5)
+        cons.w = cons.e;
+    80005be6:	00020797          	auipc	a5,0x20
+    80005bea:	5ec7ab23          	sw	a2,1526(a5) # 800261dc <cons+0x9c>
+        wakeup(&cons.r);
+    80005bee:	00020517          	auipc	a0,0x20
+    80005bf2:	5ea50513          	addi	a0,a0,1514 # 800261d8 <cons+0x98>
+    80005bf6:	ffffc097          	auipc	ra,0xffffc
+    80005bfa:	ba0080e7          	jalr	-1120(ra) # 80001796 <wakeup>
+    80005bfe:	b575                	j	80005aaa <consoleintr+0x3c>
+
+0000000080005c00 <consoleinit>:
+
+void
+consoleinit(void)
+{
+    80005c00:	1141                	addi	sp,sp,-16
+    80005c02:	e406                	sd	ra,8(sp)
+    80005c04:	e022                	sd	s0,0(sp)
+    80005c06:	0800                	addi	s0,sp,16
+  initlock(&cons.lock, "cons");
+    80005c08:	00003597          	auipc	a1,0x3
+    80005c0c:	d4058593          	addi	a1,a1,-704 # 80008948 <syscall_name+0x3c8>
+    80005c10:	00020517          	auipc	a0,0x20
+    80005c14:	53050513          	addi	a0,a0,1328 # 80026140 <cons>
+    80005c18:	00000097          	auipc	ra,0x0
+    80005c1c:	580080e7          	jalr	1408(ra) # 80006198 <initlock>
+
+  uartinit();
+    80005c20:	00000097          	auipc	ra,0x0
+    80005c24:	32c080e7          	jalr	812(ra) # 80005f4c <uartinit>
+
+  // connect read and write system calls
+  // to consoleread and consolewrite.
+  devsw[CONSOLE].read = consoleread;
+    80005c28:	00013797          	auipc	a5,0x13
+    80005c2c:	6a078793          	addi	a5,a5,1696 # 800192c8 <devsw>
+    80005c30:	00000717          	auipc	a4,0x0
+    80005c34:	cea70713          	addi	a4,a4,-790 # 8000591a <consoleread>
+    80005c38:	eb98                	sd	a4,16(a5)
+  devsw[CONSOLE].write = consolewrite;
+    80005c3a:	00000717          	auipc	a4,0x0
+    80005c3e:	c7c70713          	addi	a4,a4,-900 # 800058b6 <consolewrite>
+    80005c42:	ef98                	sd	a4,24(a5)
+}
+    80005c44:	60a2                	ld	ra,8(sp)
+    80005c46:	6402                	ld	s0,0(sp)
+    80005c48:	0141                	addi	sp,sp,16
+    80005c4a:	8082                	ret
+
+0000000080005c4c <printint>:
+
+static char digits[] = "0123456789abcdef";
+
+static void
+printint(int xx, int base, int sign)
+{
+    80005c4c:	7179                	addi	sp,sp,-48
+    80005c4e:	f406                	sd	ra,40(sp)
+    80005c50:	f022                	sd	s0,32(sp)
+    80005c52:	ec26                	sd	s1,24(sp)
+    80005c54:	e84a                	sd	s2,16(sp)
+    80005c56:	1800                	addi	s0,sp,48
+  char buf[16];
+  int i;
+  uint x;
+
+  if(sign && (sign = xx < 0))
+    80005c58:	c219                	beqz	a2,80005c5e <printint+0x12>
+    80005c5a:	08054763          	bltz	a0,80005ce8 <printint+0x9c>
+    x = -xx;
+  else
+    x = xx;
+    80005c5e:	2501                	sext.w	a0,a0
+    80005c60:	4881                	li	a7,0
+    80005c62:	fd040693          	addi	a3,s0,-48
+
+  i = 0;
+    80005c66:	4701                	li	a4,0
+  do {
+    buf[i++] = digits[x % base];
+    80005c68:	2581                	sext.w	a1,a1
+    80005c6a:	00003617          	auipc	a2,0x3
+    80005c6e:	d0e60613          	addi	a2,a2,-754 # 80008978 <digits>
+    80005c72:	883a                	mv	a6,a4
+    80005c74:	2705                	addiw	a4,a4,1
+    80005c76:	02b577bb          	remuw	a5,a0,a1
+    80005c7a:	1782                	slli	a5,a5,0x20
+    80005c7c:	9381                	srli	a5,a5,0x20
+    80005c7e:	97b2                	add	a5,a5,a2
+    80005c80:	0007c783          	lbu	a5,0(a5)
+    80005c84:	00f68023          	sb	a5,0(a3)
+  } while((x /= base) != 0);
+    80005c88:	0005079b          	sext.w	a5,a0
+    80005c8c:	02b5553b          	divuw	a0,a0,a1
+    80005c90:	0685                	addi	a3,a3,1
+    80005c92:	feb7f0e3          	bgeu	a5,a1,80005c72 <printint+0x26>
+
+  if(sign)
+    80005c96:	00088c63          	beqz	a7,80005cae <printint+0x62>
+    buf[i++] = '-';
+    80005c9a:	fe070793          	addi	a5,a4,-32
+    80005c9e:	00878733          	add	a4,a5,s0
+    80005ca2:	02d00793          	li	a5,45
+    80005ca6:	fef70823          	sb	a5,-16(a4)
+    80005caa:	0028071b          	addiw	a4,a6,2
+
+  while(--i >= 0)
+    80005cae:	02e05763          	blez	a4,80005cdc <printint+0x90>
+    80005cb2:	fd040793          	addi	a5,s0,-48
+    80005cb6:	00e784b3          	add	s1,a5,a4
+    80005cba:	fff78913          	addi	s2,a5,-1
+    80005cbe:	993a                	add	s2,s2,a4
+    80005cc0:	377d                	addiw	a4,a4,-1
+    80005cc2:	1702                	slli	a4,a4,0x20
+    80005cc4:	9301                	srli	a4,a4,0x20
+    80005cc6:	40e90933          	sub	s2,s2,a4
+    consputc(buf[i]);
+    80005cca:	fff4c503          	lbu	a0,-1(s1)
+    80005cce:	00000097          	auipc	ra,0x0
+    80005cd2:	d5e080e7          	jalr	-674(ra) # 80005a2c <consputc>
+  while(--i >= 0)
+    80005cd6:	14fd                	addi	s1,s1,-1
+    80005cd8:	ff2499e3          	bne	s1,s2,80005cca <printint+0x7e>
+}
+    80005cdc:	70a2                	ld	ra,40(sp)
+    80005cde:	7402                	ld	s0,32(sp)
+    80005ce0:	64e2                	ld	s1,24(sp)
+    80005ce2:	6942                	ld	s2,16(sp)
+    80005ce4:	6145                	addi	sp,sp,48
+    80005ce6:	8082                	ret
+    x = -xx;
+    80005ce8:	40a0053b          	negw	a0,a0
+  if(sign && (sign = xx < 0))
+    80005cec:	4885                	li	a7,1
+    x = -xx;
+    80005cee:	bf95                	j	80005c62 <printint+0x16>
+
+0000000080005cf0 <panic>:
+    release(&pr.lock);
+}
+
+void
+panic(char *s)
+{
+    80005cf0:	1101                	addi	sp,sp,-32
+    80005cf2:	ec06                	sd	ra,24(sp)
+    80005cf4:	e822                	sd	s0,16(sp)
+    80005cf6:	e426                	sd	s1,8(sp)
+    80005cf8:	1000                	addi	s0,sp,32
+    80005cfa:	84aa                	mv	s1,a0
+  pr.locking = 0;
+    80005cfc:	00020797          	auipc	a5,0x20
+    80005d00:	5007a223          	sw	zero,1284(a5) # 80026200 <pr+0x18>
+  printf("panic: ");
+    80005d04:	00003517          	auipc	a0,0x3
+    80005d08:	c4c50513          	addi	a0,a0,-948 # 80008950 <syscall_name+0x3d0>
+    80005d0c:	00000097          	auipc	ra,0x0
+    80005d10:	02e080e7          	jalr	46(ra) # 80005d3a <printf>
+  printf(s);
+    80005d14:	8526                	mv	a0,s1
+    80005d16:	00000097          	auipc	ra,0x0
+    80005d1a:	024080e7          	jalr	36(ra) # 80005d3a <printf>
+  printf("\n");
+    80005d1e:	00002517          	auipc	a0,0x2
+    80005d22:	32a50513          	addi	a0,a0,810 # 80008048 <etext+0x48>
+    80005d26:	00000097          	auipc	ra,0x0
+    80005d2a:	014080e7          	jalr	20(ra) # 80005d3a <printf>
+  panicked = 1; // freeze uart output from other CPUs
+    80005d2e:	4785                	li	a5,1
+    80005d30:	00003717          	auipc	a4,0x3
+    80005d34:	2ef72623          	sw	a5,748(a4) # 8000901c <panicked>
+  for(;;)
+    80005d38:	a001                	j	80005d38 <panic+0x48>
+
+0000000080005d3a <printf>:
+{
+    80005d3a:	7131                	addi	sp,sp,-192
+    80005d3c:	fc86                	sd	ra,120(sp)
+    80005d3e:	f8a2                	sd	s0,112(sp)
+    80005d40:	f4a6                	sd	s1,104(sp)
+    80005d42:	f0ca                	sd	s2,96(sp)
+    80005d44:	ecce                	sd	s3,88(sp)
+    80005d46:	e8d2                	sd	s4,80(sp)
+    80005d48:	e4d6                	sd	s5,72(sp)
+    80005d4a:	e0da                	sd	s6,64(sp)
+    80005d4c:	fc5e                	sd	s7,56(sp)
+    80005d4e:	f862                	sd	s8,48(sp)
+    80005d50:	f466                	sd	s9,40(sp)
+    80005d52:	f06a                	sd	s10,32(sp)
+    80005d54:	ec6e                	sd	s11,24(sp)
+    80005d56:	0100                	addi	s0,sp,128
+    80005d58:	8a2a                	mv	s4,a0
+    80005d5a:	e40c                	sd	a1,8(s0)
+    80005d5c:	e810                	sd	a2,16(s0)
+    80005d5e:	ec14                	sd	a3,24(s0)
+    80005d60:	f018                	sd	a4,32(s0)
+    80005d62:	f41c                	sd	a5,40(s0)
+    80005d64:	03043823          	sd	a6,48(s0)
+    80005d68:	03143c23          	sd	a7,56(s0)
+  locking = pr.locking;
+    80005d6c:	00020d97          	auipc	s11,0x20
+    80005d70:	494dad83          	lw	s11,1172(s11) # 80026200 <pr+0x18>
+  if(locking)
+    80005d74:	020d9b63          	bnez	s11,80005daa <printf+0x70>
+  if (fmt == 0)
+    80005d78:	040a0263          	beqz	s4,80005dbc <printf+0x82>
+  va_start(ap, fmt);
+    80005d7c:	00840793          	addi	a5,s0,8
+    80005d80:	f8f43423          	sd	a5,-120(s0)
+  for(i = 0; (c = fmt[i] & 0xff) != 0; i++){
+    80005d84:	000a4503          	lbu	a0,0(s4)
+    80005d88:	14050f63          	beqz	a0,80005ee6 <printf+0x1ac>
+    80005d8c:	4981                	li	s3,0
+    if(c != '%'){
+    80005d8e:	02500a93          	li	s5,37
+    switch(c){
+    80005d92:	07000b93          	li	s7,112
+  consputc('x');
+    80005d96:	4d41                	li	s10,16
+    consputc(digits[x >> (sizeof(uint64) * 8 - 4)]);
+    80005d98:	00003b17          	auipc	s6,0x3
+    80005d9c:	be0b0b13          	addi	s6,s6,-1056 # 80008978 <digits>
+    switch(c){
+    80005da0:	07300c93          	li	s9,115
+    80005da4:	06400c13          	li	s8,100
+    80005da8:	a82d                	j	80005de2 <printf+0xa8>
+    acquire(&pr.lock);
+    80005daa:	00020517          	auipc	a0,0x20
+    80005dae:	43e50513          	addi	a0,a0,1086 # 800261e8 <pr>
+    80005db2:	00000097          	auipc	ra,0x0
+    80005db6:	476080e7          	jalr	1142(ra) # 80006228 <acquire>
+    80005dba:	bf7d                	j	80005d78 <printf+0x3e>
+    panic("null fmt");
+    80005dbc:	00003517          	auipc	a0,0x3
+    80005dc0:	ba450513          	addi	a0,a0,-1116 # 80008960 <syscall_name+0x3e0>
+    80005dc4:	00000097          	auipc	ra,0x0
+    80005dc8:	f2c080e7          	jalr	-212(ra) # 80005cf0 <panic>
+      consputc(c);
+    80005dcc:	00000097          	auipc	ra,0x0
+    80005dd0:	c60080e7          	jalr	-928(ra) # 80005a2c <consputc>
+  for(i = 0; (c = fmt[i] & 0xff) != 0; i++){
+    80005dd4:	2985                	addiw	s3,s3,1
+    80005dd6:	013a07b3          	add	a5,s4,s3
+    80005dda:	0007c503          	lbu	a0,0(a5)
+    80005dde:	10050463          	beqz	a0,80005ee6 <printf+0x1ac>
+    if(c != '%'){
+    80005de2:	ff5515e3          	bne	a0,s5,80005dcc <printf+0x92>
+    c = fmt[++i] & 0xff;
+    80005de6:	2985                	addiw	s3,s3,1
+    80005de8:	013a07b3          	add	a5,s4,s3
+    80005dec:	0007c783          	lbu	a5,0(a5)
+    80005df0:	0007849b          	sext.w	s1,a5
+    if(c == 0)
+    80005df4:	cbed                	beqz	a5,80005ee6 <printf+0x1ac>
+    switch(c){
+    80005df6:	05778a63          	beq	a5,s7,80005e4a <printf+0x110>
+    80005dfa:	02fbf663          	bgeu	s7,a5,80005e26 <printf+0xec>
+    80005dfe:	09978863          	beq	a5,s9,80005e8e <printf+0x154>
+    80005e02:	07800713          	li	a4,120
+    80005e06:	0ce79563          	bne	a5,a4,80005ed0 <printf+0x196>
+      printint(va_arg(ap, int), 16, 1);
+    80005e0a:	f8843783          	ld	a5,-120(s0)
+    80005e0e:	00878713          	addi	a4,a5,8
+    80005e12:	f8e43423          	sd	a4,-120(s0)
+    80005e16:	4605                	li	a2,1
+    80005e18:	85ea                	mv	a1,s10
+    80005e1a:	4388                	lw	a0,0(a5)
+    80005e1c:	00000097          	auipc	ra,0x0
+    80005e20:	e30080e7          	jalr	-464(ra) # 80005c4c <printint>
+      break;
+    80005e24:	bf45                	j	80005dd4 <printf+0x9a>
+    switch(c){
+    80005e26:	09578f63          	beq	a5,s5,80005ec4 <printf+0x18a>
+    80005e2a:	0b879363          	bne	a5,s8,80005ed0 <printf+0x196>
+      printint(va_arg(ap, int), 10, 1);
+    80005e2e:	f8843783          	ld	a5,-120(s0)
+    80005e32:	00878713          	addi	a4,a5,8
+    80005e36:	f8e43423          	sd	a4,-120(s0)
+    80005e3a:	4605                	li	a2,1
+    80005e3c:	45a9                	li	a1,10
+    80005e3e:	4388                	lw	a0,0(a5)
+    80005e40:	00000097          	auipc	ra,0x0
+    80005e44:	e0c080e7          	jalr	-500(ra) # 80005c4c <printint>
+      break;
+    80005e48:	b771                	j	80005dd4 <printf+0x9a>
+      printptr(va_arg(ap, uint64));
+    80005e4a:	f8843783          	ld	a5,-120(s0)
+    80005e4e:	00878713          	addi	a4,a5,8
+    80005e52:	f8e43423          	sd	a4,-120(s0)
+    80005e56:	0007b903          	ld	s2,0(a5)
+  consputc('0');
+    80005e5a:	03000513          	li	a0,48
+    80005e5e:	00000097          	auipc	ra,0x0
+    80005e62:	bce080e7          	jalr	-1074(ra) # 80005a2c <consputc>
+  consputc('x');
+    80005e66:	07800513          	li	a0,120
+    80005e6a:	00000097          	auipc	ra,0x0
+    80005e6e:	bc2080e7          	jalr	-1086(ra) # 80005a2c <consputc>
+    80005e72:	84ea                	mv	s1,s10
+    consputc(digits[x >> (sizeof(uint64) * 8 - 4)]);
+    80005e74:	03c95793          	srli	a5,s2,0x3c
+    80005e78:	97da                	add	a5,a5,s6
+    80005e7a:	0007c503          	lbu	a0,0(a5)
+    80005e7e:	00000097          	auipc	ra,0x0
+    80005e82:	bae080e7          	jalr	-1106(ra) # 80005a2c <consputc>
+  for (i = 0; i < (sizeof(uint64) * 2); i++, x <<= 4)
+    80005e86:	0912                	slli	s2,s2,0x4
+    80005e88:	34fd                	addiw	s1,s1,-1
+    80005e8a:	f4ed                	bnez	s1,80005e74 <printf+0x13a>
+    80005e8c:	b7a1                	j	80005dd4 <printf+0x9a>
+      if((s = va_arg(ap, char*)) == 0)
+    80005e8e:	f8843783          	ld	a5,-120(s0)
+    80005e92:	00878713          	addi	a4,a5,8
+    80005e96:	f8e43423          	sd	a4,-120(s0)
+    80005e9a:	6384                	ld	s1,0(a5)
+    80005e9c:	cc89                	beqz	s1,80005eb6 <printf+0x17c>
+      for(; *s; s++)
+    80005e9e:	0004c503          	lbu	a0,0(s1)
+    80005ea2:	d90d                	beqz	a0,80005dd4 <printf+0x9a>
+        consputc(*s);
+    80005ea4:	00000097          	auipc	ra,0x0
+    80005ea8:	b88080e7          	jalr	-1144(ra) # 80005a2c <consputc>
+      for(; *s; s++)
+    80005eac:	0485                	addi	s1,s1,1
+    80005eae:	0004c503          	lbu	a0,0(s1)
+    80005eb2:	f96d                	bnez	a0,80005ea4 <printf+0x16a>
+    80005eb4:	b705                	j	80005dd4 <printf+0x9a>
+        s = "(null)";
+    80005eb6:	00003497          	auipc	s1,0x3
+    80005eba:	aa248493          	addi	s1,s1,-1374 # 80008958 <syscall_name+0x3d8>
+      for(; *s; s++)
+    80005ebe:	02800513          	li	a0,40
+    80005ec2:	b7cd                	j	80005ea4 <printf+0x16a>
+      consputc('%');
+    80005ec4:	8556                	mv	a0,s5
+    80005ec6:	00000097          	auipc	ra,0x0
+    80005eca:	b66080e7          	jalr	-1178(ra) # 80005a2c <consputc>
+      break;
+    80005ece:	b719                	j	80005dd4 <printf+0x9a>
+      consputc('%');
+    80005ed0:	8556                	mv	a0,s5
+    80005ed2:	00000097          	auipc	ra,0x0
+    80005ed6:	b5a080e7          	jalr	-1190(ra) # 80005a2c <consputc>
+      consputc(c);
+    80005eda:	8526                	mv	a0,s1
+    80005edc:	00000097          	auipc	ra,0x0
+    80005ee0:	b50080e7          	jalr	-1200(ra) # 80005a2c <consputc>
+      break;
+    80005ee4:	bdc5                	j	80005dd4 <printf+0x9a>
+  if(locking)
+    80005ee6:	020d9163          	bnez	s11,80005f08 <printf+0x1ce>
+}
+    80005eea:	70e6                	ld	ra,120(sp)
+    80005eec:	7446                	ld	s0,112(sp)
+    80005eee:	74a6                	ld	s1,104(sp)
+    80005ef0:	7906                	ld	s2,96(sp)
+    80005ef2:	69e6                	ld	s3,88(sp)
+    80005ef4:	6a46                	ld	s4,80(sp)
+    80005ef6:	6aa6                	ld	s5,72(sp)
+    80005ef8:	6b06                	ld	s6,64(sp)
+    80005efa:	7be2                	ld	s7,56(sp)
+    80005efc:	7c42                	ld	s8,48(sp)
+    80005efe:	7ca2                	ld	s9,40(sp)
+    80005f00:	7d02                	ld	s10,32(sp)
+    80005f02:	6de2                	ld	s11,24(sp)
+    80005f04:	6129                	addi	sp,sp,192
+    80005f06:	8082                	ret
+    release(&pr.lock);
+    80005f08:	00020517          	auipc	a0,0x20
+    80005f0c:	2e050513          	addi	a0,a0,736 # 800261e8 <pr>
+    80005f10:	00000097          	auipc	ra,0x0
+    80005f14:	3cc080e7          	jalr	972(ra) # 800062dc <release>
+}
+    80005f18:	bfc9                	j	80005eea <printf+0x1b0>
+
+0000000080005f1a <printfinit>:
+    ;
+}
+
+void
+printfinit(void)
+{
+    80005f1a:	1101                	addi	sp,sp,-32
+    80005f1c:	ec06                	sd	ra,24(sp)
+    80005f1e:	e822                	sd	s0,16(sp)
+    80005f20:	e426                	sd	s1,8(sp)
+    80005f22:	1000                	addi	s0,sp,32
+  initlock(&pr.lock, "pr");
+    80005f24:	00020497          	auipc	s1,0x20
+    80005f28:	2c448493          	addi	s1,s1,708 # 800261e8 <pr>
+    80005f2c:	00003597          	auipc	a1,0x3
+    80005f30:	a4458593          	addi	a1,a1,-1468 # 80008970 <syscall_name+0x3f0>
+    80005f34:	8526                	mv	a0,s1
+    80005f36:	00000097          	auipc	ra,0x0
+    80005f3a:	262080e7          	jalr	610(ra) # 80006198 <initlock>
+  pr.locking = 1;
+    80005f3e:	4785                	li	a5,1
+    80005f40:	cc9c                	sw	a5,24(s1)
+}
+    80005f42:	60e2                	ld	ra,24(sp)
+    80005f44:	6442                	ld	s0,16(sp)
+    80005f46:	64a2                	ld	s1,8(sp)
+    80005f48:	6105                	addi	sp,sp,32
+    80005f4a:	8082                	ret
+
+0000000080005f4c <uartinit>:
+
+void uartstart();
+
+void
+uartinit(void)
+{
+    80005f4c:	1141                	addi	sp,sp,-16
+    80005f4e:	e406                	sd	ra,8(sp)
+    80005f50:	e022                	sd	s0,0(sp)
+    80005f52:	0800                	addi	s0,sp,16
+  // disable interrupts.
+  WriteReg(IER, 0x00);
+    80005f54:	100007b7          	lui	a5,0x10000
+    80005f58:	000780a3          	sb	zero,1(a5) # 10000001 <_entry-0x6fffffff>
+
+  // special mode to set baud rate.
+  WriteReg(LCR, LCR_BAUD_LATCH);
+    80005f5c:	f8000713          	li	a4,-128
+    80005f60:	00e781a3          	sb	a4,3(a5)
+
+  // LSB for baud rate of 38.4K.
+  WriteReg(0, 0x03);
+    80005f64:	470d                	li	a4,3
+    80005f66:	00e78023          	sb	a4,0(a5)
+
+  // MSB for baud rate of 38.4K.
+  WriteReg(1, 0x00);
+    80005f6a:	000780a3          	sb	zero,1(a5)
+
+  // leave set-baud mode,
+  // and set word length to 8 bits, no parity.
+  WriteReg(LCR, LCR_EIGHT_BITS);
+    80005f6e:	00e781a3          	sb	a4,3(a5)
+
+  // reset and enable FIFOs.
+  WriteReg(FCR, FCR_FIFO_ENABLE | FCR_FIFO_CLEAR);
+    80005f72:	469d                	li	a3,7
+    80005f74:	00d78123          	sb	a3,2(a5)
+
+  // enable transmit and receive interrupts.
+  WriteReg(IER, IER_TX_ENABLE | IER_RX_ENABLE);
+    80005f78:	00e780a3          	sb	a4,1(a5)
+
+  initlock(&uart_tx_lock, "uart");
+    80005f7c:	00003597          	auipc	a1,0x3
+    80005f80:	a1458593          	addi	a1,a1,-1516 # 80008990 <digits+0x18>
+    80005f84:	00020517          	auipc	a0,0x20
+    80005f88:	28450513          	addi	a0,a0,644 # 80026208 <uart_tx_lock>
+    80005f8c:	00000097          	auipc	ra,0x0
+    80005f90:	20c080e7          	jalr	524(ra) # 80006198 <initlock>
+}
+    80005f94:	60a2                	ld	ra,8(sp)
+    80005f96:	6402                	ld	s0,0(sp)
+    80005f98:	0141                	addi	sp,sp,16
+    80005f9a:	8082                	ret
+
+0000000080005f9c <uartputc_sync>:
+// use interrupts, for use by kernel printf() and
+// to echo characters. it spins waiting for the uart's
+// output register to be empty.
+void
+uartputc_sync(int c)
+{
+    80005f9c:	1101                	addi	sp,sp,-32
+    80005f9e:	ec06                	sd	ra,24(sp)
+    80005fa0:	e822                	sd	s0,16(sp)
+    80005fa2:	e426                	sd	s1,8(sp)
+    80005fa4:	1000                	addi	s0,sp,32
+    80005fa6:	84aa                	mv	s1,a0
+  push_off();
+    80005fa8:	00000097          	auipc	ra,0x0
+    80005fac:	234080e7          	jalr	564(ra) # 800061dc <push_off>
+
+  if(panicked){
+    80005fb0:	00003797          	auipc	a5,0x3
+    80005fb4:	06c7a783          	lw	a5,108(a5) # 8000901c <panicked>
+    for(;;)
+      ;
+  }
+
+  // wait for Transmit Holding Empty to be set in LSR.
+  while((ReadReg(LSR) & LSR_TX_IDLE) == 0)
+    80005fb8:	10000737          	lui	a4,0x10000
+  if(panicked){
+    80005fbc:	c391                	beqz	a5,80005fc0 <uartputc_sync+0x24>
+    for(;;)
+    80005fbe:	a001                	j	80005fbe <uartputc_sync+0x22>
+  while((ReadReg(LSR) & LSR_TX_IDLE) == 0)
+    80005fc0:	00574783          	lbu	a5,5(a4) # 10000005 <_entry-0x6ffffffb>
+    80005fc4:	0207f793          	andi	a5,a5,32
+    80005fc8:	dfe5                	beqz	a5,80005fc0 <uartputc_sync+0x24>
+    ;
+  WriteReg(THR, c);
+    80005fca:	0ff4f513          	zext.b	a0,s1
+    80005fce:	100007b7          	lui	a5,0x10000
+    80005fd2:	00a78023          	sb	a0,0(a5) # 10000000 <_entry-0x70000000>
+
+  pop_off();
+    80005fd6:	00000097          	auipc	ra,0x0
+    80005fda:	2a6080e7          	jalr	678(ra) # 8000627c <pop_off>
+}
+    80005fde:	60e2                	ld	ra,24(sp)
+    80005fe0:	6442                	ld	s0,16(sp)
+    80005fe2:	64a2                	ld	s1,8(sp)
+    80005fe4:	6105                	addi	sp,sp,32
+    80005fe6:	8082                	ret
 
+0000000080005fe8 <uartstart>:
+// called from both the top- and bottom-half.
 void
-plicinithart(void)
+uartstart()
 {
-    80005bc0:	1141                	addi	sp,sp,-16
-    80005bc2:	e406                	sd	ra,8(sp)
-    80005bc4:	e022                	sd	s0,0(sp)
-    80005bc6:	0800                	addi	s0,sp,16
-  int hart = cpuid();
-    80005bc8:	ffffc097          	auipc	ra,0xffffc
-    80005bcc:	dd8080e7          	jalr	-552(ra) # 800019a0 <cpuid>
-  
-  // set uart's enable bit for this hart's S-mode. 
-  *(uint32*)PLIC_SENABLE(hart)= (1 << UART0_IRQ) | (1 << VIRTIO0_IRQ);
-    80005bd0:	0085171b          	slliw	a4,a0,0x8
-    80005bd4:	0c0027b7          	lui	a5,0xc002
-    80005bd8:	97ba                	add	a5,a5,a4
-    80005bda:	40200713          	li	a4,1026
-    80005bde:	08e7a023          	sw	a4,128(a5) # c002080 <_entry-0x73ffdf80>
-
-  // set this hart's S-mode priority threshold to 0.
-  *(uint32*)PLIC_SPRIORITY(hart) = 0;
-    80005be2:	00d5151b          	slliw	a0,a0,0xd
-    80005be6:	0c2017b7          	lui	a5,0xc201
-    80005bea:	97aa                	add	a5,a5,a0
-    80005bec:	0007a023          	sw	zero,0(a5) # c201000 <_entry-0x73dff000>
-}
-    80005bf0:	60a2                	ld	ra,8(sp)
-    80005bf2:	6402                	ld	s0,0(sp)
-    80005bf4:	0141                	addi	sp,sp,16
-    80005bf6:	8082                	ret
+  while(1){
+    if(uart_tx_w == uart_tx_r){
+    80005fe8:	00003797          	auipc	a5,0x3
+    80005fec:	0387b783          	ld	a5,56(a5) # 80009020 <uart_tx_r>
+    80005ff0:	00003717          	auipc	a4,0x3
+    80005ff4:	03873703          	ld	a4,56(a4) # 80009028 <uart_tx_w>
+    80005ff8:	06f70a63          	beq	a4,a5,8000606c <uartstart+0x84>
+{
+    80005ffc:	7139                	addi	sp,sp,-64
+    80005ffe:	fc06                	sd	ra,56(sp)
+    80006000:	f822                	sd	s0,48(sp)
+    80006002:	f426                	sd	s1,40(sp)
+    80006004:	f04a                	sd	s2,32(sp)
+    80006006:	ec4e                	sd	s3,24(sp)
+    80006008:	e852                	sd	s4,16(sp)
+    8000600a:	e456                	sd	s5,8(sp)
+    8000600c:	0080                	addi	s0,sp,64
+      // transmit buffer is empty.
+      return;
+    }
+    
+    if((ReadReg(LSR) & LSR_TX_IDLE) == 0){
+    8000600e:	10000937          	lui	s2,0x10000
+      // so we cannot give it another byte.
+      // it will interrupt when it's ready for a new byte.
+      return;
+    }
+    
+    int c = uart_tx_buf[uart_tx_r % UART_TX_BUF_SIZE];
+    80006012:	00020a17          	auipc	s4,0x20
+    80006016:	1f6a0a13          	addi	s4,s4,502 # 80026208 <uart_tx_lock>
+    uart_tx_r += 1;
+    8000601a:	00003497          	auipc	s1,0x3
+    8000601e:	00648493          	addi	s1,s1,6 # 80009020 <uart_tx_r>
+    if(uart_tx_w == uart_tx_r){
+    80006022:	00003997          	auipc	s3,0x3
+    80006026:	00698993          	addi	s3,s3,6 # 80009028 <uart_tx_w>
+    if((ReadReg(LSR) & LSR_TX_IDLE) == 0){
+    8000602a:	00594703          	lbu	a4,5(s2) # 10000005 <_entry-0x6ffffffb>
+    8000602e:	02077713          	andi	a4,a4,32
+    80006032:	c705                	beqz	a4,8000605a <uartstart+0x72>
+    int c = uart_tx_buf[uart_tx_r % UART_TX_BUF_SIZE];
+    80006034:	01f7f713          	andi	a4,a5,31
+    80006038:	9752                	add	a4,a4,s4
+    8000603a:	01874a83          	lbu	s5,24(a4)
+    uart_tx_r += 1;
+    8000603e:	0785                	addi	a5,a5,1
+    80006040:	e09c                	sd	a5,0(s1)
+    
+    // maybe uartputc() is waiting for space in the buffer.
+    wakeup(&uart_tx_r);
+    80006042:	8526                	mv	a0,s1
+    80006044:	ffffb097          	auipc	ra,0xffffb
+    80006048:	752080e7          	jalr	1874(ra) # 80001796 <wakeup>
+    
+    WriteReg(THR, c);
+    8000604c:	01590023          	sb	s5,0(s2)
+    if(uart_tx_w == uart_tx_r){
+    80006050:	609c                	ld	a5,0(s1)
+    80006052:	0009b703          	ld	a4,0(s3)
+    80006056:	fcf71ae3          	bne	a4,a5,8000602a <uartstart+0x42>
+  }
+}
+    8000605a:	70e2                	ld	ra,56(sp)
+    8000605c:	7442                	ld	s0,48(sp)
+    8000605e:	74a2                	ld	s1,40(sp)
+    80006060:	7902                	ld	s2,32(sp)
+    80006062:	69e2                	ld	s3,24(sp)
+    80006064:	6a42                	ld	s4,16(sp)
+    80006066:	6aa2                	ld	s5,8(sp)
+    80006068:	6121                	addi	sp,sp,64
+    8000606a:	8082                	ret
+    8000606c:	8082                	ret
+
+000000008000606e <uartputc>:
+{
+    8000606e:	7179                	addi	sp,sp,-48
+    80006070:	f406                	sd	ra,40(sp)
+    80006072:	f022                	sd	s0,32(sp)
+    80006074:	ec26                	sd	s1,24(sp)
+    80006076:	e84a                	sd	s2,16(sp)
+    80006078:	e44e                	sd	s3,8(sp)
+    8000607a:	e052                	sd	s4,0(sp)
+    8000607c:	1800                	addi	s0,sp,48
+    8000607e:	8a2a                	mv	s4,a0
+  acquire(&uart_tx_lock);
+    80006080:	00020517          	auipc	a0,0x20
+    80006084:	18850513          	addi	a0,a0,392 # 80026208 <uart_tx_lock>
+    80006088:	00000097          	auipc	ra,0x0
+    8000608c:	1a0080e7          	jalr	416(ra) # 80006228 <acquire>
+  if(panicked){
+    80006090:	00003797          	auipc	a5,0x3
+    80006094:	f8c7a783          	lw	a5,-116(a5) # 8000901c <panicked>
+    80006098:	c391                	beqz	a5,8000609c <uartputc+0x2e>
+    for(;;)
+    8000609a:	a001                	j	8000609a <uartputc+0x2c>
+    if(uart_tx_w == uart_tx_r + UART_TX_BUF_SIZE){
+    8000609c:	00003717          	auipc	a4,0x3
+    800060a0:	f8c73703          	ld	a4,-116(a4) # 80009028 <uart_tx_w>
+    800060a4:	00003797          	auipc	a5,0x3
+    800060a8:	f7c7b783          	ld	a5,-132(a5) # 80009020 <uart_tx_r>
+    800060ac:	02078793          	addi	a5,a5,32
+    800060b0:	02e79b63          	bne	a5,a4,800060e6 <uartputc+0x78>
+      sleep(&uart_tx_r, &uart_tx_lock);
+    800060b4:	00020997          	auipc	s3,0x20
+    800060b8:	15498993          	addi	s3,s3,340 # 80026208 <uart_tx_lock>
+    800060bc:	00003497          	auipc	s1,0x3
+    800060c0:	f6448493          	addi	s1,s1,-156 # 80009020 <uart_tx_r>
+    if(uart_tx_w == uart_tx_r + UART_TX_BUF_SIZE){
+    800060c4:	00003917          	auipc	s2,0x3
+    800060c8:	f6490913          	addi	s2,s2,-156 # 80009028 <uart_tx_w>
+      sleep(&uart_tx_r, &uart_tx_lock);
+    800060cc:	85ce                	mv	a1,s3
+    800060ce:	8526                	mv	a0,s1
+    800060d0:	ffffb097          	auipc	ra,0xffffb
+    800060d4:	53a080e7          	jalr	1338(ra) # 8000160a <sleep>
+    if(uart_tx_w == uart_tx_r + UART_TX_BUF_SIZE){
+    800060d8:	00093703          	ld	a4,0(s2)
+    800060dc:	609c                	ld	a5,0(s1)
+    800060de:	02078793          	addi	a5,a5,32
+    800060e2:	fee785e3          	beq	a5,a4,800060cc <uartputc+0x5e>
+      uart_tx_buf[uart_tx_w % UART_TX_BUF_SIZE] = c;
+    800060e6:	00020497          	auipc	s1,0x20
+    800060ea:	12248493          	addi	s1,s1,290 # 80026208 <uart_tx_lock>
+    800060ee:	01f77793          	andi	a5,a4,31
+    800060f2:	97a6                	add	a5,a5,s1
+    800060f4:	01478c23          	sb	s4,24(a5)
+      uart_tx_w += 1;
+    800060f8:	0705                	addi	a4,a4,1
+    800060fa:	00003797          	auipc	a5,0x3
+    800060fe:	f2e7b723          	sd	a4,-210(a5) # 80009028 <uart_tx_w>
+      uartstart();
+    80006102:	00000097          	auipc	ra,0x0
+    80006106:	ee6080e7          	jalr	-282(ra) # 80005fe8 <uartstart>
+      release(&uart_tx_lock);
+    8000610a:	8526                	mv	a0,s1
+    8000610c:	00000097          	auipc	ra,0x0
+    80006110:	1d0080e7          	jalr	464(ra) # 800062dc <release>
+}
+    80006114:	70a2                	ld	ra,40(sp)
+    80006116:	7402                	ld	s0,32(sp)
+    80006118:	64e2                	ld	s1,24(sp)
+    8000611a:	6942                	ld	s2,16(sp)
+    8000611c:	69a2                	ld	s3,8(sp)
+    8000611e:	6a02                	ld	s4,0(sp)
+    80006120:	6145                	addi	sp,sp,48
+    80006122:	8082                	ret
 
-0000000080005bf8 <plic_claim>:
+0000000080006124 <uartgetc>:
 
-// ask the PLIC what interrupt we should serve.
+// read one input character from the UART.
+// return -1 if none is waiting.
 int
-plic_claim(void)
+uartgetc(void)
 {
-    80005bf8:	1141                	addi	sp,sp,-16
-    80005bfa:	e406                	sd	ra,8(sp)
-    80005bfc:	e022                	sd	s0,0(sp)
-    80005bfe:	0800                	addi	s0,sp,16
-  int hart = cpuid();
-    80005c00:	ffffc097          	auipc	ra,0xffffc
-    80005c04:	da0080e7          	jalr	-608(ra) # 800019a0 <cpuid>
-  int irq = *(uint32*)PLIC_SCLAIM(hart);
-    80005c08:	00d5151b          	slliw	a0,a0,0xd
-    80005c0c:	0c2017b7          	lui	a5,0xc201
-    80005c10:	97aa                	add	a5,a5,a0
-  return irq;
+    80006124:	1141                	addi	sp,sp,-16
+    80006126:	e422                	sd	s0,8(sp)
+    80006128:	0800                	addi	s0,sp,16
+  if(ReadReg(LSR) & 0x01){
+    8000612a:	100007b7          	lui	a5,0x10000
+    8000612e:	0057c783          	lbu	a5,5(a5) # 10000005 <_entry-0x6ffffffb>
+    80006132:	8b85                	andi	a5,a5,1
+    80006134:	cb81                	beqz	a5,80006144 <uartgetc+0x20>
+    // input data is ready.
+    return ReadReg(RHR);
+    80006136:	100007b7          	lui	a5,0x10000
+    8000613a:	0007c503          	lbu	a0,0(a5) # 10000000 <_entry-0x70000000>
+  } else {
+    return -1;
+  }
 }
-    80005c12:	43c8                	lw	a0,4(a5)
-    80005c14:	60a2                	ld	ra,8(sp)
-    80005c16:	6402                	ld	s0,0(sp)
-    80005c18:	0141                	addi	sp,sp,16
-    80005c1a:	8082                	ret
-
-0000000080005c1c <plic_complete>:
+    8000613e:	6422                	ld	s0,8(sp)
+    80006140:	0141                	addi	sp,sp,16
+    80006142:	8082                	ret
+    return -1;
+    80006144:	557d                	li	a0,-1
+    80006146:	bfe5                	j	8000613e <uartgetc+0x1a>
 
-// tell the PLIC we've served this IRQ.
+0000000080006148 <uartintr>:
+// handle a uart interrupt, raised because input has
+// arrived, or the uart is ready for more output, or
+// both. called from trap.c.
 void
-plic_complete(int irq)
+uartintr(void)
 {
-    80005c1c:	1101                	addi	sp,sp,-32
-    80005c1e:	ec06                	sd	ra,24(sp)
-    80005c20:	e822                	sd	s0,16(sp)
-    80005c22:	e426                	sd	s1,8(sp)
-    80005c24:	1000                	addi	s0,sp,32
-    80005c26:	84aa                	mv	s1,a0
-  int hart = cpuid();
-    80005c28:	ffffc097          	auipc	ra,0xffffc
-    80005c2c:	d78080e7          	jalr	-648(ra) # 800019a0 <cpuid>
-  *(uint32*)PLIC_SCLAIM(hart) = irq;
-    80005c30:	00d5151b          	slliw	a0,a0,0xd
-    80005c34:	0c2017b7          	lui	a5,0xc201
-    80005c38:	97aa                	add	a5,a5,a0
-    80005c3a:	c3c4                	sw	s1,4(a5)
-}
-    80005c3c:	60e2                	ld	ra,24(sp)
-    80005c3e:	6442                	ld	s0,16(sp)
-    80005c40:	64a2                	ld	s1,8(sp)
-    80005c42:	6105                	addi	sp,sp,32
-    80005c44:	8082                	ret
-
-0000000080005c46 <free_desc>:
-}
+    80006148:	1101                	addi	sp,sp,-32
+    8000614a:	ec06                	sd	ra,24(sp)
+    8000614c:	e822                	sd	s0,16(sp)
+    8000614e:	e426                	sd	s1,8(sp)
+    80006150:	1000                	addi	s0,sp,32
+  // read and process incoming characters.
+  while(1){
+    int c = uartgetc();
+    if(c == -1)
+    80006152:	54fd                	li	s1,-1
+    80006154:	a029                	j	8000615e <uartintr+0x16>
+      break;
+    consoleintr(c);
+    80006156:	00000097          	auipc	ra,0x0
+    8000615a:	918080e7          	jalr	-1768(ra) # 80005a6e <consoleintr>
+    int c = uartgetc();
+    8000615e:	00000097          	auipc	ra,0x0
+    80006162:	fc6080e7          	jalr	-58(ra) # 80006124 <uartgetc>
+    if(c == -1)
+    80006166:	fe9518e3          	bne	a0,s1,80006156 <uartintr+0xe>
+  }
 
-// mark a descriptor as free.
-static void
-free_desc(int i)
-{
-    80005c46:	1141                	addi	sp,sp,-16
-    80005c48:	e406                	sd	ra,8(sp)
-    80005c4a:	e022                	sd	s0,0(sp)
-    80005c4c:	0800                	addi	s0,sp,16
-  if(i >= NUM)
-    80005c4e:	479d                	li	a5,7
-    80005c50:	04a7cb63          	blt	a5,a0,80005ca6 <free_desc+0x60>
-    panic("virtio_disk_intr 1");
-  if(disk.free[i])
-    80005c54:	0001d717          	auipc	a4,0x1d
-    80005c58:	3ac70713          	addi	a4,a4,940 # 80023000 <disk>
-    80005c5c:	972a                	add	a4,a4,a0
-    80005c5e:	6789                	lui	a5,0x2
-    80005c60:	97ba                	add	a5,a5,a4
-    80005c62:	0187c783          	lbu	a5,24(a5) # 2018 <_entry-0x7fffdfe8>
-    80005c66:	eba1                	bnez	a5,80005cb6 <free_desc+0x70>
-    panic("virtio_disk_intr 2");
-  disk.desc[i].addr = 0;
-    80005c68:	00451713          	slli	a4,a0,0x4
-    80005c6c:	0001f797          	auipc	a5,0x1f
-    80005c70:	3947b783          	ld	a5,916(a5) # 80025000 <disk+0x2000>
-    80005c74:	97ba                	add	a5,a5,a4
-    80005c76:	0007b023          	sd	zero,0(a5)
-  disk.free[i] = 1;
-    80005c7a:	0001d717          	auipc	a4,0x1d
-    80005c7e:	38670713          	addi	a4,a4,902 # 80023000 <disk>
-    80005c82:	972a                	add	a4,a4,a0
-    80005c84:	6789                	lui	a5,0x2
-    80005c86:	97ba                	add	a5,a5,a4
-    80005c88:	4705                	li	a4,1
-    80005c8a:	00e78c23          	sb	a4,24(a5) # 2018 <_entry-0x7fffdfe8>
-  wakeup(&disk.free[0]);
-    80005c8e:	0001f517          	auipc	a0,0x1f
-    80005c92:	38a50513          	addi	a0,a0,906 # 80025018 <disk+0x2018>
-    80005c96:	ffffc097          	auipc	ra,0xffffc
-    80005c9a:	6ca080e7          	jalr	1738(ra) # 80002360 <wakeup>
-}
-    80005c9e:	60a2                	ld	ra,8(sp)
-    80005ca0:	6402                	ld	s0,0(sp)
-    80005ca2:	0141                	addi	sp,sp,16
-    80005ca4:	8082                	ret
-    panic("virtio_disk_intr 1");
-    80005ca6:	00003517          	auipc	a0,0x3
-    80005caa:	ab250513          	addi	a0,a0,-1358 # 80008758 <syscalls+0x330>
-    80005cae:	ffffb097          	auipc	ra,0xffffb
-    80005cb2:	898080e7          	jalr	-1896(ra) # 80000546 <panic>
-    panic("virtio_disk_intr 2");
-    80005cb6:	00003517          	auipc	a0,0x3
-    80005cba:	aba50513          	addi	a0,a0,-1350 # 80008770 <syscalls+0x348>
-    80005cbe:	ffffb097          	auipc	ra,0xffffb
-    80005cc2:	888080e7          	jalr	-1912(ra) # 80000546 <panic>
-
-0000000080005cc6 <virtio_disk_init>:
-{
-    80005cc6:	1101                	addi	sp,sp,-32
-    80005cc8:	ec06                	sd	ra,24(sp)
-    80005cca:	e822                	sd	s0,16(sp)
-    80005ccc:	e426                	sd	s1,8(sp)
-    80005cce:	1000                	addi	s0,sp,32
-  initlock(&disk.vdisk_lock, "virtio_disk");
-    80005cd0:	00003597          	auipc	a1,0x3
-    80005cd4:	ab858593          	addi	a1,a1,-1352 # 80008788 <syscalls+0x360>
-    80005cd8:	0001f517          	auipc	a0,0x1f
-    80005cdc:	3d050513          	addi	a0,a0,976 # 800250a8 <disk+0x20a8>
-    80005ce0:	ffffb097          	auipc	ra,0xffffb
-    80005ce4:	e90080e7          	jalr	-368(ra) # 80000b70 <initlock>
-  if(*R(VIRTIO_MMIO_MAGIC_VALUE) != 0x74726976 ||
-    80005ce8:	100017b7          	lui	a5,0x10001
-    80005cec:	4398                	lw	a4,0(a5)
-    80005cee:	2701                	sext.w	a4,a4
-    80005cf0:	747277b7          	lui	a5,0x74727
-    80005cf4:	97678793          	addi	a5,a5,-1674 # 74726976 <_entry-0xb8d968a>
-    80005cf8:	0ef71063          	bne	a4,a5,80005dd8 <virtio_disk_init+0x112>
-     *R(VIRTIO_MMIO_VERSION) != 1 ||
-    80005cfc:	100017b7          	lui	a5,0x10001
-    80005d00:	43dc                	lw	a5,4(a5)
-    80005d02:	2781                	sext.w	a5,a5
-  if(*R(VIRTIO_MMIO_MAGIC_VALUE) != 0x74726976 ||
-    80005d04:	4705                	li	a4,1
-    80005d06:	0ce79963          	bne	a5,a4,80005dd8 <virtio_disk_init+0x112>
-     *R(VIRTIO_MMIO_DEVICE_ID) != 2 ||
-    80005d0a:	100017b7          	lui	a5,0x10001
-    80005d0e:	479c                	lw	a5,8(a5)
-    80005d10:	2781                	sext.w	a5,a5
-     *R(VIRTIO_MMIO_VERSION) != 1 ||
-    80005d12:	4709                	li	a4,2
-    80005d14:	0ce79263          	bne	a5,a4,80005dd8 <virtio_disk_init+0x112>
-     *R(VIRTIO_MMIO_VENDOR_ID) != 0x554d4551){
-    80005d18:	100017b7          	lui	a5,0x10001
-    80005d1c:	47d8                	lw	a4,12(a5)
-    80005d1e:	2701                	sext.w	a4,a4
-     *R(VIRTIO_MMIO_DEVICE_ID) != 2 ||
-    80005d20:	554d47b7          	lui	a5,0x554d4
-    80005d24:	55178793          	addi	a5,a5,1361 # 554d4551 <_entry-0x2ab2baaf>
-    80005d28:	0af71863          	bne	a4,a5,80005dd8 <virtio_disk_init+0x112>
-  *R(VIRTIO_MMIO_STATUS) = status;
-    80005d2c:	100017b7          	lui	a5,0x10001
-    80005d30:	4705                	li	a4,1
-    80005d32:	dbb8                	sw	a4,112(a5)
-  *R(VIRTIO_MMIO_STATUS) = status;
-    80005d34:	470d                	li	a4,3
-    80005d36:	dbb8                	sw	a4,112(a5)
-  uint64 features = *R(VIRTIO_MMIO_DEVICE_FEATURES);
-    80005d38:	4b98                	lw	a4,16(a5)
-  *R(VIRTIO_MMIO_DRIVER_FEATURES) = features;
-    80005d3a:	c7ffe6b7          	lui	a3,0xc7ffe
-    80005d3e:	75f68693          	addi	a3,a3,1887 # ffffffffc7ffe75f <end+0xffffffff47fd875f>
-    80005d42:	8f75                	and	a4,a4,a3
-    80005d44:	d398                	sw	a4,32(a5)
-  *R(VIRTIO_MMIO_STATUS) = status;
-    80005d46:	472d                	li	a4,11
-    80005d48:	dbb8                	sw	a4,112(a5)
-  *R(VIRTIO_MMIO_STATUS) = status;
-    80005d4a:	473d                	li	a4,15
-    80005d4c:	dbb8                	sw	a4,112(a5)
-  *R(VIRTIO_MMIO_GUEST_PAGE_SIZE) = PGSIZE;
-    80005d4e:	6705                	lui	a4,0x1
-    80005d50:	d798                	sw	a4,40(a5)
-  *R(VIRTIO_MMIO_QUEUE_SEL) = 0;
-    80005d52:	0207a823          	sw	zero,48(a5) # 10001030 <_entry-0x6fffefd0>
-  uint32 max = *R(VIRTIO_MMIO_QUEUE_NUM_MAX);
-    80005d56:	5bdc                	lw	a5,52(a5)
-    80005d58:	2781                	sext.w	a5,a5
-  if(max == 0)
-    80005d5a:	c7d9                	beqz	a5,80005de8 <virtio_disk_init+0x122>
-  if(max < NUM)
-    80005d5c:	471d                	li	a4,7
-    80005d5e:	08f77d63          	bgeu	a4,a5,80005df8 <virtio_disk_init+0x132>
-  *R(VIRTIO_MMIO_QUEUE_NUM) = NUM;
-    80005d62:	100014b7          	lui	s1,0x10001
-    80005d66:	47a1                	li	a5,8
-    80005d68:	dc9c                	sw	a5,56(s1)
-  memset(disk.pages, 0, sizeof(disk.pages));
-    80005d6a:	6609                	lui	a2,0x2
-    80005d6c:	4581                	li	a1,0
-    80005d6e:	0001d517          	auipc	a0,0x1d
-    80005d72:	29250513          	addi	a0,a0,658 # 80023000 <disk>
-    80005d76:	ffffb097          	auipc	ra,0xffffb
-    80005d7a:	f86080e7          	jalr	-122(ra) # 80000cfc <memset>
-  *R(VIRTIO_MMIO_QUEUE_PFN) = ((uint64)disk.pages) >> PGSHIFT;
-    80005d7e:	0001d717          	auipc	a4,0x1d
-    80005d82:	28270713          	addi	a4,a4,642 # 80023000 <disk>
-    80005d86:	00c75793          	srli	a5,a4,0xc
-    80005d8a:	2781                	sext.w	a5,a5
-    80005d8c:	c0bc                	sw	a5,64(s1)
-  disk.desc = (struct VRingDesc *) disk.pages;
-    80005d8e:	0001f797          	auipc	a5,0x1f
-    80005d92:	27278793          	addi	a5,a5,626 # 80025000 <disk+0x2000>
-    80005d96:	e398                	sd	a4,0(a5)
-  disk.avail = (uint16*)(((char*)disk.desc) + NUM*sizeof(struct VRingDesc));
-    80005d98:	0001d717          	auipc	a4,0x1d
-    80005d9c:	2e870713          	addi	a4,a4,744 # 80023080 <disk+0x80>
-    80005da0:	e798                	sd	a4,8(a5)
-  disk.used = (struct UsedArea *) (disk.pages + PGSIZE);
-    80005da2:	0001e717          	auipc	a4,0x1e
-    80005da6:	25e70713          	addi	a4,a4,606 # 80024000 <disk+0x1000>
-    80005daa:	eb98                	sd	a4,16(a5)
-    disk.free[i] = 1;
-    80005dac:	4705                	li	a4,1
-    80005dae:	00e78c23          	sb	a4,24(a5)
-    80005db2:	00e78ca3          	sb	a4,25(a5)
-    80005db6:	00e78d23          	sb	a4,26(a5)
-    80005dba:	00e78da3          	sb	a4,27(a5)
-    80005dbe:	00e78e23          	sb	a4,28(a5)
-    80005dc2:	00e78ea3          	sb	a4,29(a5)
-    80005dc6:	00e78f23          	sb	a4,30(a5)
-    80005dca:	00e78fa3          	sb	a4,31(a5)
-}
-    80005dce:	60e2                	ld	ra,24(sp)
-    80005dd0:	6442                	ld	s0,16(sp)
-    80005dd2:	64a2                	ld	s1,8(sp)
-    80005dd4:	6105                	addi	sp,sp,32
-    80005dd6:	8082                	ret
-    panic("could not find virtio disk");
-    80005dd8:	00003517          	auipc	a0,0x3
-    80005ddc:	9c050513          	addi	a0,a0,-1600 # 80008798 <syscalls+0x370>
-    80005de0:	ffffa097          	auipc	ra,0xffffa
-    80005de4:	766080e7          	jalr	1894(ra) # 80000546 <panic>
-    panic("virtio disk has no queue 0");
-    80005de8:	00003517          	auipc	a0,0x3
-    80005dec:	9d050513          	addi	a0,a0,-1584 # 800087b8 <syscalls+0x390>
-    80005df0:	ffffa097          	auipc	ra,0xffffa
-    80005df4:	756080e7          	jalr	1878(ra) # 80000546 <panic>
-    panic("virtio disk max queue too short");
-    80005df8:	00003517          	auipc	a0,0x3
-    80005dfc:	9e050513          	addi	a0,a0,-1568 # 800087d8 <syscalls+0x3b0>
-    80005e00:	ffffa097          	auipc	ra,0xffffa
-    80005e04:	746080e7          	jalr	1862(ra) # 80000546 <panic>
+  // send buffered characters.
+  acquire(&uart_tx_lock);
+    8000616a:	00020497          	auipc	s1,0x20
+    8000616e:	09e48493          	addi	s1,s1,158 # 80026208 <uart_tx_lock>
+    80006172:	8526                	mv	a0,s1
+    80006174:	00000097          	auipc	ra,0x0
+    80006178:	0b4080e7          	jalr	180(ra) # 80006228 <acquire>
+  uartstart();
+    8000617c:	00000097          	auipc	ra,0x0
+    80006180:	e6c080e7          	jalr	-404(ra) # 80005fe8 <uartstart>
+  release(&uart_tx_lock);
+    80006184:	8526                	mv	a0,s1
+    80006186:	00000097          	auipc	ra,0x0
+    8000618a:	156080e7          	jalr	342(ra) # 800062dc <release>
+}
+    8000618e:	60e2                	ld	ra,24(sp)
+    80006190:	6442                	ld	s0,16(sp)
+    80006192:	64a2                	ld	s1,8(sp)
+    80006194:	6105                	addi	sp,sp,32
+    80006196:	8082                	ret
 
-0000000080005e08 <virtio_disk_rw>:
-  return 0;
-}
+0000000080006198 <initlock>:
+#include "proc.h"
+#include "defs.h"
 
 void
-virtio_disk_rw(struct buf *b, int write)
+initlock(struct spinlock *lk, char *name)
 {
-    80005e08:	7175                	addi	sp,sp,-144
-    80005e0a:	e506                	sd	ra,136(sp)
-    80005e0c:	e122                	sd	s0,128(sp)
-    80005e0e:	fca6                	sd	s1,120(sp)
-    80005e10:	f8ca                	sd	s2,112(sp)
-    80005e12:	f4ce                	sd	s3,104(sp)
-    80005e14:	f0d2                	sd	s4,96(sp)
-    80005e16:	ecd6                	sd	s5,88(sp)
-    80005e18:	e8da                	sd	s6,80(sp)
-    80005e1a:	e4de                	sd	s7,72(sp)
-    80005e1c:	e0e2                	sd	s8,64(sp)
-    80005e1e:	fc66                	sd	s9,56(sp)
-    80005e20:	f86a                	sd	s10,48(sp)
-    80005e22:	f46e                	sd	s11,40(sp)
-    80005e24:	0900                	addi	s0,sp,144
-    80005e26:	8aaa                	mv	s5,a0
-    80005e28:	8d2e                	mv	s10,a1
-  uint64 sector = b->blockno * (BSIZE / 512);
-    80005e2a:	00c52c83          	lw	s9,12(a0)
-    80005e2e:	001c9c9b          	slliw	s9,s9,0x1
-    80005e32:	1c82                	slli	s9,s9,0x20
-    80005e34:	020cdc93          	srli	s9,s9,0x20
+    80006198:	1141                	addi	sp,sp,-16
+    8000619a:	e422                	sd	s0,8(sp)
+    8000619c:	0800                	addi	s0,sp,16
+  lk->name = name;
+    8000619e:	e50c                	sd	a1,8(a0)
+  lk->locked = 0;
+    800061a0:	00052023          	sw	zero,0(a0)
+  lk->cpu = 0;
+    800061a4:	00053823          	sd	zero,16(a0)
+}
+    800061a8:	6422                	ld	s0,8(sp)
+    800061aa:	0141                	addi	sp,sp,16
+    800061ac:	8082                	ret
 
-  acquire(&disk.vdisk_lock);
-    80005e38:	0001f517          	auipc	a0,0x1f
-    80005e3c:	27050513          	addi	a0,a0,624 # 800250a8 <disk+0x20a8>
-    80005e40:	ffffb097          	auipc	ra,0xffffb
-    80005e44:	dc0080e7          	jalr	-576(ra) # 80000c00 <acquire>
-  for(int i = 0; i < 3; i++){
-    80005e48:	4981                	li	s3,0
-  for(int i = 0; i < NUM; i++){
-    80005e4a:	44a1                	li	s1,8
-      disk.free[i] = 0;
-    80005e4c:	0001dc17          	auipc	s8,0x1d
-    80005e50:	1b4c0c13          	addi	s8,s8,436 # 80023000 <disk>
-    80005e54:	6b89                	lui	s7,0x2
-  for(int i = 0; i < 3; i++){
-    80005e56:	4b0d                	li	s6,3
-    80005e58:	a0ad                	j	80005ec2 <virtio_disk_rw+0xba>
-      disk.free[i] = 0;
-    80005e5a:	00fc0733          	add	a4,s8,a5
-    80005e5e:	975e                	add	a4,a4,s7
-    80005e60:	00070c23          	sb	zero,24(a4)
-    idx[i] = alloc_desc();
-    80005e64:	c19c                	sw	a5,0(a1)
-    if(idx[i] < 0){
-    80005e66:	0207c563          	bltz	a5,80005e90 <virtio_disk_rw+0x88>
-  for(int i = 0; i < 3; i++){
-    80005e6a:	2905                	addiw	s2,s2,1
-    80005e6c:	0611                	addi	a2,a2,4
-    80005e6e:	19690c63          	beq	s2,s6,80006006 <virtio_disk_rw+0x1fe>
-    idx[i] = alloc_desc();
-    80005e72:	85b2                	mv	a1,a2
-  for(int i = 0; i < NUM; i++){
-    80005e74:	0001f717          	auipc	a4,0x1f
-    80005e78:	1a470713          	addi	a4,a4,420 # 80025018 <disk+0x2018>
-    80005e7c:	87ce                	mv	a5,s3
-    if(disk.free[i]){
-    80005e7e:	00074683          	lbu	a3,0(a4)
-    80005e82:	fee1                	bnez	a3,80005e5a <virtio_disk_rw+0x52>
-  for(int i = 0; i < NUM; i++){
-    80005e84:	2785                	addiw	a5,a5,1
-    80005e86:	0705                	addi	a4,a4,1
-    80005e88:	fe979be3          	bne	a5,s1,80005e7e <virtio_disk_rw+0x76>
-    idx[i] = alloc_desc();
-    80005e8c:	57fd                	li	a5,-1
-    80005e8e:	c19c                	sw	a5,0(a1)
-      for(int j = 0; j < i; j++)
-    80005e90:	01205d63          	blez	s2,80005eaa <virtio_disk_rw+0xa2>
-    80005e94:	8dce                	mv	s11,s3
-        free_desc(idx[j]);
-    80005e96:	000a2503          	lw	a0,0(s4)
-    80005e9a:	00000097          	auipc	ra,0x0
-    80005e9e:	dac080e7          	jalr	-596(ra) # 80005c46 <free_desc>
-      for(int j = 0; j < i; j++)
-    80005ea2:	2d85                	addiw	s11,s11,1
-    80005ea4:	0a11                	addi	s4,s4,4
-    80005ea6:	ff2d98e3          	bne	s11,s2,80005e96 <virtio_disk_rw+0x8e>
-  int idx[3];
-  while(1){
-    if(alloc3_desc(idx) == 0) {
-      break;
-    }
-    sleep(&disk.free[0], &disk.vdisk_lock);
-    80005eaa:	0001f597          	auipc	a1,0x1f
-    80005eae:	1fe58593          	addi	a1,a1,510 # 800250a8 <disk+0x20a8>
-    80005eb2:	0001f517          	auipc	a0,0x1f
-    80005eb6:	16650513          	addi	a0,a0,358 # 80025018 <disk+0x2018>
-    80005eba:	ffffc097          	auipc	ra,0xffffc
-    80005ebe:	326080e7          	jalr	806(ra) # 800021e0 <sleep>
-  for(int i = 0; i < 3; i++){
-    80005ec2:	f8040a13          	addi	s4,s0,-128
+00000000800061ae <holding>:
+// Interrupts must be off.
+int
+holding(struct spinlock *lk)
 {
-    80005ec6:	8652                	mv	a2,s4
-  for(int i = 0; i < 3; i++){
-    80005ec8:	894e                	mv	s2,s3
-    80005eca:	b765                	j	80005e72 <virtio_disk_rw+0x6a>
-  disk.desc[idx[0]].next = idx[1];
+  int r;
+  r = (lk->locked && lk->cpu == mycpu());
+    800061ae:	411c                	lw	a5,0(a0)
+    800061b0:	e399                	bnez	a5,800061b6 <holding+0x8>
+    800061b2:	4501                	li	a0,0
+  return r;
+}
+    800061b4:	8082                	ret
+{
+    800061b6:	1101                	addi	sp,sp,-32
+    800061b8:	ec06                	sd	ra,24(sp)
+    800061ba:	e822                	sd	s0,16(sp)
+    800061bc:	e426                	sd	s1,8(sp)
+    800061be:	1000                	addi	s0,sp,32
+  r = (lk->locked && lk->cpu == mycpu());
+    800061c0:	6904                	ld	s1,16(a0)
+    800061c2:	ffffb097          	auipc	ra,0xffffb
+    800061c6:	d60080e7          	jalr	-672(ra) # 80000f22 <mycpu>
+    800061ca:	40a48533          	sub	a0,s1,a0
+    800061ce:	00153513          	seqz	a0,a0
+}
+    800061d2:	60e2                	ld	ra,24(sp)
+    800061d4:	6442                	ld	s0,16(sp)
+    800061d6:	64a2                	ld	s1,8(sp)
+    800061d8:	6105                	addi	sp,sp,32
+    800061da:	8082                	ret
 
-  disk.desc[idx[1]].addr = (uint64) b->data;
-  disk.desc[idx[1]].len = BSIZE;
-  if(write)
-    disk.desc[idx[1]].flags = 0; // device reads b->data
-    80005ecc:	0001f717          	auipc	a4,0x1f
-    80005ed0:	13473703          	ld	a4,308(a4) # 80025000 <disk+0x2000>
-    80005ed4:	973e                	add	a4,a4,a5
-    80005ed6:	00071623          	sh	zero,12(a4)
-  else
-    disk.desc[idx[1]].flags = VRING_DESC_F_WRITE; // device writes b->data
-  disk.desc[idx[1]].flags |= VRING_DESC_F_NEXT;
-    80005eda:	0001d517          	auipc	a0,0x1d
-    80005ede:	12650513          	addi	a0,a0,294 # 80023000 <disk>
-    80005ee2:	0001f717          	auipc	a4,0x1f
-    80005ee6:	11e70713          	addi	a4,a4,286 # 80025000 <disk+0x2000>
-    80005eea:	6314                	ld	a3,0(a4)
-    80005eec:	96be                	add	a3,a3,a5
-    80005eee:	00c6d603          	lhu	a2,12(a3)
-    80005ef2:	00166613          	ori	a2,a2,1
-    80005ef6:	00c69623          	sh	a2,12(a3)
-  disk.desc[idx[1]].next = idx[2];
-    80005efa:	f8842683          	lw	a3,-120(s0)
-    80005efe:	6310                	ld	a2,0(a4)
-    80005f00:	97b2                	add	a5,a5,a2
-    80005f02:	00d79723          	sh	a3,14(a5)
-
-  disk.info[idx[0]].status = 0;
-    80005f06:	20048613          	addi	a2,s1,512 # 10001200 <_entry-0x6fffee00>
-    80005f0a:	0612                	slli	a2,a2,0x4
-    80005f0c:	962a                	add	a2,a2,a0
-    80005f0e:	02060823          	sb	zero,48(a2) # 2030 <_entry-0x7fffdfd0>
-  disk.desc[idx[2]].addr = (uint64) &disk.info[idx[0]].status;
-    80005f12:	00469793          	slli	a5,a3,0x4
-    80005f16:	630c                	ld	a1,0(a4)
-    80005f18:	95be                	add	a1,a1,a5
-    80005f1a:	6689                	lui	a3,0x2
-    80005f1c:	03068693          	addi	a3,a3,48 # 2030 <_entry-0x7fffdfd0>
-    80005f20:	96ca                	add	a3,a3,s2
-    80005f22:	96aa                	add	a3,a3,a0
-    80005f24:	e194                	sd	a3,0(a1)
-  disk.desc[idx[2]].len = 1;
-    80005f26:	6314                	ld	a3,0(a4)
-    80005f28:	96be                	add	a3,a3,a5
-    80005f2a:	4585                	li	a1,1
-    80005f2c:	c68c                	sw	a1,8(a3)
-  disk.desc[idx[2]].flags = VRING_DESC_F_WRITE; // device writes the status
-    80005f2e:	6314                	ld	a3,0(a4)
-    80005f30:	96be                	add	a3,a3,a5
-    80005f32:	4509                	li	a0,2
-    80005f34:	00a69623          	sh	a0,12(a3)
-  disk.desc[idx[2]].next = 0;
-    80005f38:	6314                	ld	a3,0(a4)
-    80005f3a:	97b6                	add	a5,a5,a3
-    80005f3c:	00079723          	sh	zero,14(a5)
+00000000800061dc <push_off>:
+// it takes two pop_off()s to undo two push_off()s.  Also, if interrupts
+// are initially off, then push_off, pop_off leaves them off.
 
-  // record struct buf for virtio_disk_intr().
-  b->disk = 1;
-    80005f40:	00baa223          	sw	a1,4(s5)
-  disk.info[idx[0]].b = b;
-    80005f44:	03563423          	sd	s5,40(a2)
+void
+push_off(void)
+{
+    800061dc:	1101                	addi	sp,sp,-32
+    800061de:	ec06                	sd	ra,24(sp)
+    800061e0:	e822                	sd	s0,16(sp)
+    800061e2:	e426                	sd	s1,8(sp)
+    800061e4:	1000                	addi	s0,sp,32
+  asm volatile("csrr %0, sstatus" : "=r" (x) );
+    800061e6:	100024f3          	csrr	s1,sstatus
+    800061ea:	100027f3          	csrr	a5,sstatus
+  w_sstatus(r_sstatus() & ~SSTATUS_SIE);
+    800061ee:	9bf5                	andi	a5,a5,-3
+  asm volatile("csrw sstatus, %0" : : "r" (x));
+    800061f0:	10079073          	csrw	sstatus,a5
+  int old = intr_get();
 
-  // avail[0] is flags
-  // avail[1] tells the device how far to look in avail[2...].
-  // avail[2...] are desc[] indices the device should process.
-  // we only tell device the first index in our chain of descriptors.
-  disk.avail[2 + (disk.avail[1] % NUM)] = idx[0];
-    80005f48:	6714                	ld	a3,8(a4)
-    80005f4a:	0026d783          	lhu	a5,2(a3)
-    80005f4e:	8b9d                	andi	a5,a5,7
-    80005f50:	0789                	addi	a5,a5,2
-    80005f52:	0786                	slli	a5,a5,0x1
-    80005f54:	96be                	add	a3,a3,a5
-    80005f56:	00969023          	sh	s1,0(a3)
+  intr_off();
+  if(mycpu()->noff == 0)
+    800061f4:	ffffb097          	auipc	ra,0xffffb
+    800061f8:	d2e080e7          	jalr	-722(ra) # 80000f22 <mycpu>
+    800061fc:	5d3c                	lw	a5,120(a0)
+    800061fe:	cf89                	beqz	a5,80006218 <push_off+0x3c>
+    mycpu()->intena = old;
+  mycpu()->noff += 1;
+    80006200:	ffffb097          	auipc	ra,0xffffb
+    80006204:	d22080e7          	jalr	-734(ra) # 80000f22 <mycpu>
+    80006208:	5d3c                	lw	a5,120(a0)
+    8000620a:	2785                	addiw	a5,a5,1
+    8000620c:	dd3c                	sw	a5,120(a0)
+}
+    8000620e:	60e2                	ld	ra,24(sp)
+    80006210:	6442                	ld	s0,16(sp)
+    80006212:	64a2                	ld	s1,8(sp)
+    80006214:	6105                	addi	sp,sp,32
+    80006216:	8082                	ret
+    mycpu()->intena = old;
+    80006218:	ffffb097          	auipc	ra,0xffffb
+    8000621c:	d0a080e7          	jalr	-758(ra) # 80000f22 <mycpu>
+  return (x & SSTATUS_SIE) != 0;
+    80006220:	8085                	srli	s1,s1,0x1
+    80006222:	8885                	andi	s1,s1,1
+    80006224:	dd64                	sw	s1,124(a0)
+    80006226:	bfe9                	j	80006200 <push_off+0x24>
+
+0000000080006228 <acquire>:
+{
+    80006228:	1101                	addi	sp,sp,-32
+    8000622a:	ec06                	sd	ra,24(sp)
+    8000622c:	e822                	sd	s0,16(sp)
+    8000622e:	e426                	sd	s1,8(sp)
+    80006230:	1000                	addi	s0,sp,32
+    80006232:	84aa                	mv	s1,a0
+  push_off(); // disable interrupts to avoid deadlock.
+    80006234:	00000097          	auipc	ra,0x0
+    80006238:	fa8080e7          	jalr	-88(ra) # 800061dc <push_off>
+  if(holding(lk))
+    8000623c:	8526                	mv	a0,s1
+    8000623e:	00000097          	auipc	ra,0x0
+    80006242:	f70080e7          	jalr	-144(ra) # 800061ae <holding>
+  while(__sync_lock_test_and_set(&lk->locked, 1) != 0)
+    80006246:	4705                	li	a4,1
+  if(holding(lk))
+    80006248:	e115                	bnez	a0,8000626c <acquire+0x44>
+  while(__sync_lock_test_and_set(&lk->locked, 1) != 0)
+    8000624a:	87ba                	mv	a5,a4
+    8000624c:	0cf4a7af          	amoswap.w.aq	a5,a5,(s1)
+    80006250:	2781                	sext.w	a5,a5
+    80006252:	ffe5                	bnez	a5,8000624a <acquire+0x22>
   __sync_synchronize();
-    80005f5a:	0ff0000f          	fence
-  disk.avail[1] = disk.avail[1] + 1;
-    80005f5e:	6718                	ld	a4,8(a4)
-    80005f60:	00275783          	lhu	a5,2(a4)
-    80005f64:	2785                	addiw	a5,a5,1
-    80005f66:	00f71123          	sh	a5,2(a4)
-
-  *R(VIRTIO_MMIO_QUEUE_NOTIFY) = 0; // value is queue number
-    80005f6a:	100017b7          	lui	a5,0x10001
-    80005f6e:	0407a823          	sw	zero,80(a5) # 10001050 <_entry-0x6fffefb0>
-
-  // Wait for virtio_disk_intr() to say request has finished.
-  while(b->disk == 1) {
-    80005f72:	004aa783          	lw	a5,4(s5)
-    80005f76:	02b79163          	bne	a5,a1,80005f98 <virtio_disk_rw+0x190>
-    sleep(b, &disk.vdisk_lock);
-    80005f7a:	0001f917          	auipc	s2,0x1f
-    80005f7e:	12e90913          	addi	s2,s2,302 # 800250a8 <disk+0x20a8>
-  while(b->disk == 1) {
-    80005f82:	4485                	li	s1,1
-    sleep(b, &disk.vdisk_lock);
-    80005f84:	85ca                	mv	a1,s2
-    80005f86:	8556                	mv	a0,s5
-    80005f88:	ffffc097          	auipc	ra,0xffffc
-    80005f8c:	258080e7          	jalr	600(ra) # 800021e0 <sleep>
-  while(b->disk == 1) {
-    80005f90:	004aa783          	lw	a5,4(s5)
-    80005f94:	fe9788e3          	beq	a5,s1,80005f84 <virtio_disk_rw+0x17c>
-  }
-
-  disk.info[idx[0]].b = 0;
-    80005f98:	f8042483          	lw	s1,-128(s0)
-    80005f9c:	20048713          	addi	a4,s1,512
-    80005fa0:	0712                	slli	a4,a4,0x4
-    80005fa2:	0001d797          	auipc	a5,0x1d
-    80005fa6:	05e78793          	addi	a5,a5,94 # 80023000 <disk>
-    80005faa:	97ba                	add	a5,a5,a4
-    80005fac:	0207b423          	sd	zero,40(a5)
-    if(disk.desc[i].flags & VRING_DESC_F_NEXT)
-    80005fb0:	0001f917          	auipc	s2,0x1f
-    80005fb4:	05090913          	addi	s2,s2,80 # 80025000 <disk+0x2000>
-    80005fb8:	a019                	j	80005fbe <virtio_disk_rw+0x1b6>
-      i = disk.desc[i].next;
-    80005fba:	00e7d483          	lhu	s1,14(a5)
-    free_desc(i);
-    80005fbe:	8526                	mv	a0,s1
-    80005fc0:	00000097          	auipc	ra,0x0
-    80005fc4:	c86080e7          	jalr	-890(ra) # 80005c46 <free_desc>
-    if(disk.desc[i].flags & VRING_DESC_F_NEXT)
-    80005fc8:	0492                	slli	s1,s1,0x4
-    80005fca:	00093783          	ld	a5,0(s2)
-    80005fce:	97a6                	add	a5,a5,s1
-    80005fd0:	00c7d703          	lhu	a4,12(a5)
-    80005fd4:	8b05                	andi	a4,a4,1
-    80005fd6:	f375                	bnez	a4,80005fba <virtio_disk_rw+0x1b2>
-  free_chain(idx[0]);
-
-  release(&disk.vdisk_lock);
-    80005fd8:	0001f517          	auipc	a0,0x1f
-    80005fdc:	0d050513          	addi	a0,a0,208 # 800250a8 <disk+0x20a8>
-    80005fe0:	ffffb097          	auipc	ra,0xffffb
-    80005fe4:	cd4080e7          	jalr	-812(ra) # 80000cb4 <release>
-}
-    80005fe8:	60aa                	ld	ra,136(sp)
-    80005fea:	640a                	ld	s0,128(sp)
-    80005fec:	74e6                	ld	s1,120(sp)
-    80005fee:	7946                	ld	s2,112(sp)
-    80005ff0:	79a6                	ld	s3,104(sp)
-    80005ff2:	7a06                	ld	s4,96(sp)
-    80005ff4:	6ae6                	ld	s5,88(sp)
-    80005ff6:	6b46                	ld	s6,80(sp)
-    80005ff8:	6ba6                	ld	s7,72(sp)
-    80005ffa:	6c06                	ld	s8,64(sp)
-    80005ffc:	7ce2                	ld	s9,56(sp)
-    80005ffe:	7d42                	ld	s10,48(sp)
-    80006000:	7da2                	ld	s11,40(sp)
-    80006002:	6149                	addi	sp,sp,144
-    80006004:	8082                	ret
-  if(write)
-    80006006:	01a037b3          	snez	a5,s10
-    8000600a:	f6f42823          	sw	a5,-144(s0)
-  buf0.reserved = 0;
-    8000600e:	f6042a23          	sw	zero,-140(s0)
-  buf0.sector = sector;
-    80006012:	f7943c23          	sd	s9,-136(s0)
-  disk.desc[idx[0]].addr = (uint64) kvmpa((uint64) &buf0);
-    80006016:	f8042483          	lw	s1,-128(s0)
-    8000601a:	00449913          	slli	s2,s1,0x4
-    8000601e:	0001f997          	auipc	s3,0x1f
-    80006022:	fe298993          	addi	s3,s3,-30 # 80025000 <disk+0x2000>
-    80006026:	0009ba03          	ld	s4,0(s3)
-    8000602a:	9a4a                	add	s4,s4,s2
-    8000602c:	f7040513          	addi	a0,s0,-144
-    80006030:	ffffb097          	auipc	ra,0xffffb
-    80006034:	09c080e7          	jalr	156(ra) # 800010cc <kvmpa>
-    80006038:	00aa3023          	sd	a0,0(s4)
-  disk.desc[idx[0]].len = sizeof(buf0);
-    8000603c:	0009b783          	ld	a5,0(s3)
-    80006040:	97ca                	add	a5,a5,s2
-    80006042:	4741                	li	a4,16
-    80006044:	c798                	sw	a4,8(a5)
-  disk.desc[idx[0]].flags = VRING_DESC_F_NEXT;
-    80006046:	0009b783          	ld	a5,0(s3)
-    8000604a:	97ca                	add	a5,a5,s2
-    8000604c:	4705                	li	a4,1
-    8000604e:	00e79623          	sh	a4,12(a5)
-  disk.desc[idx[0]].next = idx[1];
-    80006052:	f8442783          	lw	a5,-124(s0)
-    80006056:	0009b703          	ld	a4,0(s3)
-    8000605a:	974a                	add	a4,a4,s2
-    8000605c:	00f71723          	sh	a5,14(a4)
-  disk.desc[idx[1]].addr = (uint64) b->data;
-    80006060:	0792                	slli	a5,a5,0x4
-    80006062:	0009b703          	ld	a4,0(s3)
-    80006066:	973e                	add	a4,a4,a5
-    80006068:	058a8693          	addi	a3,s5,88
-    8000606c:	e314                	sd	a3,0(a4)
-  disk.desc[idx[1]].len = BSIZE;
-    8000606e:	0009b703          	ld	a4,0(s3)
-    80006072:	973e                	add	a4,a4,a5
-    80006074:	40000693          	li	a3,1024
-    80006078:	c714                	sw	a3,8(a4)
-  if(write)
-    8000607a:	e40d19e3          	bnez	s10,80005ecc <virtio_disk_rw+0xc4>
-    disk.desc[idx[1]].flags = VRING_DESC_F_WRITE; // device writes b->data
-    8000607e:	0001f717          	auipc	a4,0x1f
-    80006082:	f8273703          	ld	a4,-126(a4) # 80025000 <disk+0x2000>
-    80006086:	973e                	add	a4,a4,a5
-    80006088:	4689                	li	a3,2
-    8000608a:	00d71623          	sh	a3,12(a4)
-    8000608e:	b5b1                	j	80005eda <virtio_disk_rw+0xd2>
+    80006254:	0ff0000f          	fence
+  lk->cpu = mycpu();
+    80006258:	ffffb097          	auipc	ra,0xffffb
+    8000625c:	cca080e7          	jalr	-822(ra) # 80000f22 <mycpu>
+    80006260:	e888                	sd	a0,16(s1)
+}
+    80006262:	60e2                	ld	ra,24(sp)
+    80006264:	6442                	ld	s0,16(sp)
+    80006266:	64a2                	ld	s1,8(sp)
+    80006268:	6105                	addi	sp,sp,32
+    8000626a:	8082                	ret
+    panic("acquire");
+    8000626c:	00002517          	auipc	a0,0x2
+    80006270:	72c50513          	addi	a0,a0,1836 # 80008998 <digits+0x20>
+    80006274:	00000097          	auipc	ra,0x0
+    80006278:	a7c080e7          	jalr	-1412(ra) # 80005cf0 <panic>
 
-0000000080006090 <virtio_disk_intr>:
+000000008000627c <pop_off>:
 
 void
-virtio_disk_intr()
+pop_off(void)
 {
-    80006090:	1101                	addi	sp,sp,-32
-    80006092:	ec06                	sd	ra,24(sp)
-    80006094:	e822                	sd	s0,16(sp)
-    80006096:	e426                	sd	s1,8(sp)
-    80006098:	e04a                	sd	s2,0(sp)
-    8000609a:	1000                	addi	s0,sp,32
-  acquire(&disk.vdisk_lock);
-    8000609c:	0001f517          	auipc	a0,0x1f
-    800060a0:	00c50513          	addi	a0,a0,12 # 800250a8 <disk+0x20a8>
-    800060a4:	ffffb097          	auipc	ra,0xffffb
-    800060a8:	b5c080e7          	jalr	-1188(ra) # 80000c00 <acquire>
-
-  while((disk.used_idx % NUM) != (disk.used->id % NUM)){
-    800060ac:	0001f717          	auipc	a4,0x1f
-    800060b0:	f5470713          	addi	a4,a4,-172 # 80025000 <disk+0x2000>
-    800060b4:	02075783          	lhu	a5,32(a4)
-    800060b8:	6b18                	ld	a4,16(a4)
-    800060ba:	00275683          	lhu	a3,2(a4)
-    800060be:	8ebd                	xor	a3,a3,a5
-    800060c0:	8a9d                	andi	a3,a3,7
-    800060c2:	cab9                	beqz	a3,80006118 <virtio_disk_intr+0x88>
-    int id = disk.used->elems[disk.used_idx].id;
-
-    if(disk.info[id].status != 0)
-    800060c4:	0001d917          	auipc	s2,0x1d
-    800060c8:	f3c90913          	addi	s2,s2,-196 # 80023000 <disk>
-      panic("virtio_disk_intr status");
-    
-    disk.info[id].b->disk = 0;   // disk is done with buf
-    wakeup(disk.info[id].b);
-
-    disk.used_idx = (disk.used_idx + 1) % NUM;
-    800060cc:	0001f497          	auipc	s1,0x1f
-    800060d0:	f3448493          	addi	s1,s1,-204 # 80025000 <disk+0x2000>
-    int id = disk.used->elems[disk.used_idx].id;
-    800060d4:	078e                	slli	a5,a5,0x3
-    800060d6:	973e                	add	a4,a4,a5
-    800060d8:	435c                	lw	a5,4(a4)
-    if(disk.info[id].status != 0)
-    800060da:	20078713          	addi	a4,a5,512
-    800060de:	0712                	slli	a4,a4,0x4
-    800060e0:	974a                	add	a4,a4,s2
-    800060e2:	03074703          	lbu	a4,48(a4)
-    800060e6:	ef21                	bnez	a4,8000613e <virtio_disk_intr+0xae>
-    disk.info[id].b->disk = 0;   // disk is done with buf
-    800060e8:	20078793          	addi	a5,a5,512
-    800060ec:	0792                	slli	a5,a5,0x4
-    800060ee:	97ca                	add	a5,a5,s2
-    800060f0:	7798                	ld	a4,40(a5)
-    800060f2:	00072223          	sw	zero,4(a4)
-    wakeup(disk.info[id].b);
-    800060f6:	7788                	ld	a0,40(a5)
-    800060f8:	ffffc097          	auipc	ra,0xffffc
-    800060fc:	268080e7          	jalr	616(ra) # 80002360 <wakeup>
-    disk.used_idx = (disk.used_idx + 1) % NUM;
-    80006100:	0204d783          	lhu	a5,32(s1)
-    80006104:	2785                	addiw	a5,a5,1
-    80006106:	8b9d                	andi	a5,a5,7
-    80006108:	02f49023          	sh	a5,32(s1)
-  while((disk.used_idx % NUM) != (disk.used->id % NUM)){
-    8000610c:	6898                	ld	a4,16(s1)
-    8000610e:	00275683          	lhu	a3,2(a4)
-    80006112:	8a9d                	andi	a3,a3,7
-    80006114:	fcf690e3          	bne	a3,a5,800060d4 <virtio_disk_intr+0x44>
-  }
-  *R(VIRTIO_MMIO_INTERRUPT_ACK) = *R(VIRTIO_MMIO_INTERRUPT_STATUS) & 0x3;
-    80006118:	10001737          	lui	a4,0x10001
-    8000611c:	533c                	lw	a5,96(a4)
-    8000611e:	8b8d                	andi	a5,a5,3
-    80006120:	d37c                	sw	a5,100(a4)
-
-  release(&disk.vdisk_lock);
-    80006122:	0001f517          	auipc	a0,0x1f
-    80006126:	f8650513          	addi	a0,a0,-122 # 800250a8 <disk+0x20a8>
-    8000612a:	ffffb097          	auipc	ra,0xffffb
-    8000612e:	b8a080e7          	jalr	-1142(ra) # 80000cb4 <release>
-}
-    80006132:	60e2                	ld	ra,24(sp)
-    80006134:	6442                	ld	s0,16(sp)
-    80006136:	64a2                	ld	s1,8(sp)
-    80006138:	6902                	ld	s2,0(sp)
-    8000613a:	6105                	addi	sp,sp,32
-    8000613c:	8082                	ret
-      panic("virtio_disk_intr status");
-    8000613e:	00002517          	auipc	a0,0x2
-    80006142:	6ba50513          	addi	a0,a0,1722 # 800087f8 <syscalls+0x3d0>
-    80006146:	ffffa097          	auipc	ra,0xffffa
-    8000614a:	400080e7          	jalr	1024(ra) # 80000546 <panic>
+    8000627c:	1141                	addi	sp,sp,-16
+    8000627e:	e406                	sd	ra,8(sp)
+    80006280:	e022                	sd	s0,0(sp)
+    80006282:	0800                	addi	s0,sp,16
+  struct cpu *c = mycpu();
+    80006284:	ffffb097          	auipc	ra,0xffffb
+    80006288:	c9e080e7          	jalr	-866(ra) # 80000f22 <mycpu>
+  asm volatile("csrr %0, sstatus" : "=r" (x) );
+    8000628c:	100027f3          	csrr	a5,sstatus
+  return (x & SSTATUS_SIE) != 0;
+    80006290:	8b89                	andi	a5,a5,2
+  if(intr_get())
+    80006292:	e78d                	bnez	a5,800062bc <pop_off+0x40>
+    panic("pop_off - interruptible");
+  if(c->noff < 1)
+    80006294:	5d3c                	lw	a5,120(a0)
+    80006296:	02f05b63          	blez	a5,800062cc <pop_off+0x50>
+    panic("pop_off");
+  c->noff -= 1;
+    8000629a:	37fd                	addiw	a5,a5,-1
+    8000629c:	0007871b          	sext.w	a4,a5
+    800062a0:	dd3c                	sw	a5,120(a0)
+  if(c->noff == 0 && c->intena)
+    800062a2:	eb09                	bnez	a4,800062b4 <pop_off+0x38>
+    800062a4:	5d7c                	lw	a5,124(a0)
+    800062a6:	c799                	beqz	a5,800062b4 <pop_off+0x38>
+  asm volatile("csrr %0, sstatus" : "=r" (x) );
+    800062a8:	100027f3          	csrr	a5,sstatus
+  w_sstatus(r_sstatus() | SSTATUS_SIE);
+    800062ac:	0027e793          	ori	a5,a5,2
+  asm volatile("csrw sstatus, %0" : : "r" (x));
+    800062b0:	10079073          	csrw	sstatus,a5
+    intr_on();
+}
+    800062b4:	60a2                	ld	ra,8(sp)
+    800062b6:	6402                	ld	s0,0(sp)
+    800062b8:	0141                	addi	sp,sp,16
+    800062ba:	8082                	ret
+    panic("pop_off - interruptible");
+    800062bc:	00002517          	auipc	a0,0x2
+    800062c0:	6e450513          	addi	a0,a0,1764 # 800089a0 <digits+0x28>
+    800062c4:	00000097          	auipc	ra,0x0
+    800062c8:	a2c080e7          	jalr	-1492(ra) # 80005cf0 <panic>
+    panic("pop_off");
+    800062cc:	00002517          	auipc	a0,0x2
+    800062d0:	6ec50513          	addi	a0,a0,1772 # 800089b8 <digits+0x40>
+    800062d4:	00000097          	auipc	ra,0x0
+    800062d8:	a1c080e7          	jalr	-1508(ra) # 80005cf0 <panic>
+
+00000000800062dc <release>:
+{
+    800062dc:	1101                	addi	sp,sp,-32
+    800062de:	ec06                	sd	ra,24(sp)
+    800062e0:	e822                	sd	s0,16(sp)
+    800062e2:	e426                	sd	s1,8(sp)
+    800062e4:	1000                	addi	s0,sp,32
+    800062e6:	84aa                	mv	s1,a0
+  if(!holding(lk))
+    800062e8:	00000097          	auipc	ra,0x0
+    800062ec:	ec6080e7          	jalr	-314(ra) # 800061ae <holding>
+    800062f0:	c115                	beqz	a0,80006314 <release+0x38>
+  lk->cpu = 0;
+    800062f2:	0004b823          	sd	zero,16(s1)
+  __sync_synchronize();
+    800062f6:	0ff0000f          	fence
+  __sync_lock_release(&lk->locked);
+    800062fa:	0f50000f          	fence	iorw,ow
+    800062fe:	0804a02f          	amoswap.w	zero,zero,(s1)
+  pop_off();
+    80006302:	00000097          	auipc	ra,0x0
+    80006306:	f7a080e7          	jalr	-134(ra) # 8000627c <pop_off>
+}
+    8000630a:	60e2                	ld	ra,24(sp)
+    8000630c:	6442                	ld	s0,16(sp)
+    8000630e:	64a2                	ld	s1,8(sp)
+    80006310:	6105                	addi	sp,sp,32
+    80006312:	8082                	ret
+    panic("release");
+    80006314:	00002517          	auipc	a0,0x2
+    80006318:	6ac50513          	addi	a0,a0,1708 # 800089c0 <digits+0x48>
+    8000631c:	00000097          	auipc	ra,0x0
+    80006320:	9d4080e7          	jalr	-1580(ra) # 80005cf0 <panic>
 	...
 
 0000000080007000 <_trampoline>:
diff -urN ./kernel/kernel.sym ../xv6-labs-2021/kernel/kernel.sym
--- ./kernel/kernel.sym	2021-12-05 17:54:41.000000000 +0800
+++ ../xv6-labs-2021/kernel/kernel.sym	2021-11-26 14:46:15.000000000 +0800
@@ -1,6 +1,6 @@
 0000000080000000 .text
 0000000080008000 .rodata
-0000000080008810 .data
+00000000800089c8 .data
 0000000080009000 .bss
 0000000000000000 .riscv.attributes
 0000000000000000 .comment
@@ -8,252 +8,260 @@
 0000000000000000 .debug_abbrev
 0000000000000000 .debug_loclists
 0000000000000000 .debug_aranges
-0000000000000000 .debug_rnglists
 0000000000000000 .debug_line
 0000000000000000 .debug_str
 0000000000000000 .debug_line_str
 0000000000000000 .debug_frame
+0000000000000000 .debug_rnglists
 0000000000000000 entry.o
 000000008000001a spin
-0000000000000000 start.c
-0000000000000000 console.c
-0000000000000000 printf.c
-00000000800004a2 printint
-0000000080008040 digits
-00000000800118d8 pr
-0000000000000000 uart.c
 0000000000000000 kalloc.c
-0000000000000000 spinlock.c
 0000000000000000 string.c
 0000000000000000 main.c
-000000008000900c started
+0000000080009000 started
 0000000000000000 vm.c
+000000008000045a recursive_vmprint
 0000000000000000 proc.c
-000000008000188c wakeup1
-0000000080008810 first.1
-0000000080001b7e freeproc
-0000000080001bd6 allocproc
-00000000800082a8 states.0
+00000000800089d0 first.1
+00000000800010f0 freeproc
+0000000080001148 allocproc
+0000000080008270 states.0
 0000000000000000 trap.c
 0000000000000000 syscall.c
-0000000080002986 argraw
-0000000080008428 syscalls
+0000000080001f28 argraw
+00000000800084c0 syscalls
+0000000080008580 syscall_name
 0000000000000000 sysproc.c
 0000000000000000 bio.c
 0000000000000000 fs.c
-000000008000303e bfree
-00000000800030ba balloc
-00000000800031e8 bmap
-00000000800032c4 iget
-0000000080003b88 namex
+00000000800026b2 bfree
+000000008000272e balloc
+000000008000285c bmap
+0000000080002938 iget
+0000000080003202 namex
 0000000000000000 log.c
-0000000080003dea write_head
-0000000080003e66 install_trans
+0000000080003464 write_head
+00000000800034e0 install_trans
 0000000000000000 sleeplock.c
 0000000000000000 file.c
 0000000000000000 pipe.c
 0000000000000000 exec.c
 0000000000000000 sysfile.c
-0000000080004ec0 argfd
-0000000080004f28 fdalloc
-0000000080004f6a create
+000000008000451a argfd
+0000000080004582 fdalloc
+00000000800045c4 create
 0000000000000000 plic.c
 0000000000000000 virtio_disk.c
-0000000080005c46 free_desc
-0000000080023000 disk
-000000008000112a mappages
-00000000800017dc copyinstr
-0000000080000170 consoleread
-0000000080000e4e safestrcpy
-00000000800051ee sys_close
-00000000800021a4 yield
-0000000080021908 log
-0000000080011930 kmem
-00000000800007a2 uartinit
-000000008000243a either_copyout
-000000008000001c timerinit
-0000000080011d68 proc
-00000000800045c8 fileread
-0000000080000590 printf
-0000000080002c00 sys_sbrk
+00000000800052a6 free_desc
+000000008001b000 disk
+0000000000000000 start.c
+0000000000000000 console.c
+0000000000000000 printf.c
+0000000080005c4c printint
+0000000080008978 digits
+00000000800261e8 pr
+0000000000000000 uart.c
+0000000000000000 spinlock.c
+000000008000063c mappages
+0000000080000d1c copyinstr
+000000008000591a consoleread
+00000000800002e8 safestrcpy
+0000000080004848 sys_close
+00000000800015ce yield
+0000000080019220 log
+0000000080009030 kmem
+0000000080005f4c uartinit
+00000000800019ae either_copyout
+00000000800057d2 timerinit
+0000000080009480 proc
+0000000080003c4c fileread
+0000000080005d3a printf
+00000000800021da sys_sbrk
 0000000080007000 trampoline
-0000000080009000 panicked
-0000000080005bf8 plic_claim
-0000000080011910 uart_tx_buf
-0000000080005baa plicinit
-0000000080005c1c plic_complete
-0000000080001fc4 sched
-0000000080000d58 memmove
-0000000080002afc syscall
-00000000800019a0 cpuid
-00000000800039a4 writei
-0000000080002bb6 sys_fork
-0000000080017780 bcache
-000000008000573e sys_mkdir
-00000000800012c2 uvmunmap
-0000000080003abe namecmp
-0000000080005bc0 plicinithart
-0000000080001e9e reparent
-0000000080002acc argstr
-0000000080001426 uvmdealloc
-000000008000443c filedup
-0000000080003db0 namei
-0000000080002d6a binit
-0000000080001690 uvmclear
-0000000080005122 sys_read
-0000000080003380 fsinit
-0000000080000dbc memcpy
-00000000800011b8 kvmmap
-000000008000083e uartstart
-0000000080000a12 kfree
-00000000800019b0 mycpu
-00000000800037b4 iput
-0000000080002724 devintr
-0000000080008814 nextpid
-00000000800043aa fileinit
+000000008000901c panicked
+0000000080005258 plic_claim
+0000000080026220 uart_tx_buf
+000000008000520a plicinit
+000000008000527c plic_complete
+00000000800014f8 sched
+00000000800001fa memmove
+000000008000209e syscall
+0000000080000f12 cpuid
+000000008000301a writei
+0000000080002190 sys_fork
+000000008000f098 bcache
+0000000080004d98 sys_mkdir
+0000000080000802 uvmunmap
+0000000080003138 namecmp
+0000000080005220 plicinithart
+000000008000180c reparent
+000000008000206e argstr
+0000000080000966 uvmdealloc
+0000000080003ac0 filedup
+000000008000342a namei
+00000000800023de binit
+0000000080000bd0 uvmclear
+000000008000477c sys_read
+00000000800029f4 fsinit
+0000000080000256 memcpy
+00000000800006dc kvmmap
+0000000080005fe8 uartstart
+000000008000001c kfree
+0000000080000f22 mycpu
+0000000080002e28 iput
+000000008000070c kvmmake
+0000000080001cc6 devintr
+00000000800089d4 nextpid
+0000000080003a2e fileinit
 0000000080007090 userret
-0000000080000b70 initlock
-00000000800016c2 copyout
-00000000800021e0 sleep
-0000000080005af0 kernelvec
-0000000080003884 stati
-0000000080002cf6 sys_kill
-00000000800048be pipeclose
-000000008000523c sys_fstat
-00000000800000ec consolewrite
-000000008000403e end_op
-0000000080000a88 freerange
-0000000080000fc0 kvminithart
-000000008000146e uvmalloc
-00000000800013b4 uvminit
-00000000800015be uvmcopy
-0000000080009018 initproc
-0000000080001b2c proc_freepagetable
-00000000800036bc iunlock
-0000000080001a90 proc_pagetable
-0000000080009830 stack0
-0000000080002c4a sys_sleep
-000000008000528a sys_link
-00000000800043d2 filealloc
-0000000080002360 wakeup
-0000000080005cc6 virtio_disk_init
-00000000800019cc myproc
-00000000800035bc idup
-0000000080009004 uart_tx_r
-0000000080000fe4 walk
-00000000800055a6 sys_open
-0000000080009008 uart_tx_w
-00000000800038ae readi
-00000000800002c4 consoleintr
-0000000080000282 consputc
-00000000800023ca kill
-0000000080001a4a allocpid
-0000000080003460 ialloc
-00000000800009c2 uartintr
-000000008000174e copyin
-0000000080002600 trapinit
-0000000080001584 uvmfree
-0000000080026000 end
-0000000080003708 itrunc
-000000008000468a filewrite
-0000000080002a88 argint
-0000000080004b18 exec
+0000000080006198 initlock
+0000000080000c02 copyout
+000000008000160a sleep
+0000000080005150 kernelvec
+0000000080002ef8 stati
+0000000080009068 wait_lock
+00000000800022d0 sys_kill
+0000000080003f1c pipeclose
+0000000080004896 sys_fstat
+00000000800058b6 consolewrite
+00000000800036c8 end_op
+0000000080000092 freerange
+0000000080000516 kvminithart
+00000000800009ae uvmalloc
+00000000800008f4 uvminit
+0000000080000afe uvmcopy
+0000000080009010 initproc
+000000008000109e proc_freepagetable
+0000000080002d30 iunlock
+0000000080001002 proc_pagetable
+000000008001e140 stack0
+0000000080002224 sys_sleep
+00000000800048e4 sys_link
+0000000080003a56 filealloc
+0000000080001796 wakeup
+0000000080005340 virtio_disk_init
+0000000080000f3e myproc
+0000000080002c30 idup
+0000000080009020 uart_tx_r
+000000008000053a walk
+0000000080004c00 sys_open
+0000000080009028 uart_tx_w
+0000000080002f22 readi
+0000000080005a6e consoleintr
+0000000080005a2c consputc
+000000008000193c kill
+0000000080000fbc allocpid
+0000000080002ad4 ialloc
+0000000080006148 uartintr
+0000000080000c8e copyin
+0000000080001ba2 trapinit
+0000000080000ac4 uvmfree
+0000000080026240 end
+0000000080002d7c itrunc
+0000000080003d0e filewrite
+000000008000202a argint
+0000000080002344 sys_trace
+0000000080004166 exec
 0000000080008000 etext
-0000000080005188 sys_write
-0000000080000cb4 release
-0000000080002a40 fetchstr
-000000008000225e wait
-0000000080002640 usertrapret
-0000000080001f04 scheduler
+00000000800047e2 sys_write
+00000000800062dc release
+0000000080001fe2 fetchstr
+000000008000166e wait
+0000000080001be2 usertrapret
+0000000080001458 scheduler
 0000000080007000 _trampoline
-0000000080003ad8 dirlookup
-0000000080003fc0 begin_op
-000000008000448e fileclose
-00000000800027c6 usertrap
-0000000080000dd4 strncmp
-0000000080017768 tickslock
-000000008000492e pipewrite
-0000000080000e10 strncpy
-0000000080021a50 ftable
-0000000080006090 virtio_disk_intr
-00000000800050d0 sys_dup
-0000000080000546 panic
-0000000080001a04 forkret
-0000000080000ad4 kinit
-0000000080000d1e memcmp
-0000000080002490 either_copyin
-0000000080001d90 fork
-00000000800026de clockintr
-0000000080011968 cpus
-0000000080004310 releasesleep
+0000000080003152 dirlookup
+000000008000364a begin_op
+0000000080003b12 fileclose
+0000000080001d68 usertrap
+000000008000026e strncmp
+000000008000f080 tickslock
+0000000080003f8c pipewrite
+00000000800002aa strncpy
+0000000080019368 ftable
+0000000080005708 virtio_disk_intr
+000000008000472a sys_dup
+0000000080005cf0 panic
+0000000080000f76 forkret
+00000000800000de kinit
+00000000800001c0 memcmp
+0000000080001a04 either_copyin
+0000000080001310 fork
+0000000080001c80 clockintr
+0000000080009080 cpus
+0000000080003994 releasesleep
 0000000080000000 _entry
-0000000080000b86 holding
-000000008001fe40 sb
-0000000080000c00 acquire
-0000000080003dce nameiparent
-0000000080008820 initcode
-0000000080002628 trapinithart
-000000008000352e iupdate
-0000000080000cfc memset
-0000000080000eaa main
-0000000080004194 log_write
-00000000800042ba acquiresleep
-00000000800053d4 sys_unlink
+00000000800061ae holding
+0000000080017758 sb
+0000000080006228 acquire
+0000000080003448 nameiparent
+00000000800089e0 initcode
+0000000080001bca trapinithart
+0000000080002ba2 iupdate
+000000008000019e memset
+0000000080000344 main
+0000000080003820 log_write
+000000008000393e acquiresleep
+0000000080004a2e sys_unlink
 0000000080007000 uservec
-00000000800011f0 kvminit
-0000000080003002 bunpin
-0000000080002aaa argaddr
-0000000080002d28 sys_uptime
-000000008000099e uartgetc
-0000000080000770 printfinit
-00000000800118f8 uart_tx_lock
-0000000080001386 uvmcreate
-0000000080001d18 growproc
-0000000080004354 holdingsleep
-0000000080001c96 userinit
-0000000080002df8 bread
-0000000080004a30 piperead
-0000000080009020 ticks
-0000000080000456 consoleinit
-000000008000108a walkaddr
-00000000800024e6 procdump
-00000000800008d0 uartputc
-0000000080002f28 brelse
-00000000800035fa ilock
-00000000800058ce sys_exec
-00000000800010cc kvmpa
-0000000080002596 swtch
-000000008000385c iunlockput
-0000000080000bb4 push_off
-0000000080000c54 pop_off
-0000000080002eea bwrite
-00000000800007f2 uartputc_sync
-000000008000209a exit
-0000000080001518 freewalk
-0000000080002bce sys_wait
-0000000080002b68 sys_exit
-0000000080003cee dirlink
-0000000080004280 initsleeplock
-0000000080000086 start
-0000000080009010 kernel_pagetable
-0000000080005e08 virtio_disk_rw
-0000000080000e80 strlen
-00000000800059de sys_pipe
-0000000080003400 iinit
-0000000080003f1c initlog
-0000000080011830 cons
-0000000080000b10 kalloc
-00000000800029ee fetchaddr
-00000000800219b0 devsw
-0000000080002b9c sys_getpid
-00000000800047e4 pipealloc
-0000000080005826 sys_chdir
-000000008001fe60 icache
-0000000080005b80 timervec
-00000000800028ba kerneltrap
-0000000080002fc6 bpin
-00000000800018d0 procinit
-0000000080009030 mscratch0
-000000008000579e sys_mknod
-0000000080004556 filestat
-0000000080011950 pid_lock
+00000000800007e2 kvminit
+0000000080002676 bunpin
+000000008000204c argaddr
+0000000080002302 sys_uptime
+0000000080006124 uartgetc
+0000000080001b0a collect_processes
+0000000080005f1a printfinit
+0000000080026208 uart_tx_lock
+00000000800005e0 vmprint
+00000000800008c6 uvmcreate
+0000000080001298 growproc
+00000000800039d8 holdingsleep
+0000000080001216 userinit
+000000008000246c bread
+000000008000407e piperead
+0000000080009018 ticks
+0000000080005c00 consoleinit
+00000000800005fa walkaddr
+0000000080001a5a procdump
+000000008000017a collect_free_memory
+000000008000606e uartputc
+000000008000259c brelse
+000000008000237c sys_sysinfo
+0000000080002c6e ilock
+0000000080004f28 sys_exec
+0000000080001b38 swtch
+0000000080002ed0 iunlockput
+00000000800061dc push_off
+000000008000627c pop_off
+000000008000255e bwrite
+0000000080005f9c uartputc_sync
+0000000080001866 exit
+0000000080000a58 freewalk
+00000000800021a8 sys_wait
+0000000080002142 sys_exit
+0000000080003368 dirlink
+0000000080003904 initsleeplock
+0000000080005842 start
+0000000080009008 kernel_pagetable
+000000008001e000 timer_scratch
+0000000080005482 virtio_disk_rw
+000000008000031a strlen
+0000000080005038 sys_pipe
+0000000080002a74 iinit
+00000000800035a4 initlog
+0000000080026140 cons
+000000008000011a kalloc
+0000000080001f90 fetchaddr
+00000000800192c8 devsw
+0000000080002176 sys_getpid
+0000000080003e42 pipealloc
+0000000080004e80 sys_chdir
+0000000080000dcc proc_mapstacks
+00000000800051e0 timervec
+0000000080001e5c kerneltrap
+000000008000263a bpin
+0000000080000e62 procinit
+0000000080017778 itable
+0000000080004df8 sys_mknod
+0000000080003bda filestat
+0000000080009050 pid_lock
diff -urN ./kernel/kernelvec.S ../xv6-labs-2021/kernel/kernelvec.S
--- ./kernel/kernelvec.S	2021-12-05 17:48:45.000000000 +0800
+++ ../xv6-labs-2021/kernel/kernelvec.S	2021-11-18 15:54:53.000000000 +0800
@@ -93,8 +93,8 @@
 timervec:
         # start.c has set up the memory that mscratch points to:
         # scratch[0,8,16] : register save area.
-        # scratch[32] : address of CLINT's MTIMECMP register.
-        # scratch[40] : desired interval between interrupts.
+        # scratch[24] : address of CLINT's MTIMECMP register.
+        # scratch[32] : desired interval between interrupts.
         
         csrrw a0, mscratch, a0
         sd a1, 0(a0)
@@ -103,8 +103,8 @@
 
         # schedule the next timer interrupt
         # by adding interval to mtimecmp.
-        ld a1, 32(a0) # CLINT_MTIMECMP(hart)
-        ld a2, 40(a0) # interval
+        ld a1, 24(a0) # CLINT_MTIMECMP(hart)
+        ld a2, 32(a0) # interval
         ld a3, 0(a1)
         add a3, a3, a2
         sd a3, 0(a1)
Binary files ./kernel/kernelvec.o and ../xv6-labs-2021/kernel/kernelvec.o differ
diff -urN ./kernel/log.c ../xv6-labs-2021/kernel/log.c
--- ./kernel/log.c	2021-12-05 17:48:45.000000000 +0800
+++ ../xv6-labs-2021/kernel/log.c	2021-11-18 15:54:53.000000000 +0800
@@ -66,7 +66,7 @@
 
 // Copy committed blocks from log to their home location
 static void
-install_trans(void)
+install_trans(int recovering)
 {
   int tail;
 
@@ -75,7 +75,8 @@
     struct buf *dbuf = bread(log.dev, log.lh.block[tail]); // read dst
     memmove(dbuf->data, lbuf->data, BSIZE);  // copy block to dst
     bwrite(dbuf);  // write dst to disk
-    bunpin(dbuf);
+    if(recovering == 0)
+      bunpin(dbuf);
     brelse(lbuf);
     brelse(dbuf);
   }
@@ -116,7 +117,7 @@
 recover_from_log(void)
 {
   read_head();
-  install_trans(); // if committed, copy from log to disk
+  install_trans(1); // if committed, copy from log to disk
   log.lh.n = 0;
   write_head(); // clear the log
 }
@@ -195,7 +196,7 @@
   if (log.lh.n > 0) {
     write_log();     // Write modified blocks from cache to log
     write_head();    // Write header to disk -- the real commit
-    install_trans(); // Now install writes to home locations
+    install_trans(0); // Now install writes to home locations
     log.lh.n = 0;
     write_head();    // Erase the transaction from the log
   }
@@ -215,14 +216,14 @@
 {
   int i;
 
+  acquire(&log.lock);
   if (log.lh.n >= LOGSIZE || log.lh.n >= log.size - 1)
     panic("too big a transaction");
   if (log.outstanding < 1)
     panic("log_write outside of trans");
 
-  acquire(&log.lock);
   for (i = 0; i < log.lh.n; i++) {
-    if (log.lh.block[i] == b->blockno)   // log absorbtion
+    if (log.lh.block[i] == b->blockno)   // log absorption
       break;
   }
   log.lh.block[i] = b->blockno;
Binary files ./kernel/log.o and ../xv6-labs-2021/kernel/log.o differ
diff -urN ./kernel/main.c ../xv6-labs-2021/kernel/main.c
--- ./kernel/main.c	2021-12-05 17:48:45.000000000 +0800
+++ ../xv6-labs-2021/kernel/main.c	2021-11-18 15:54:53.000000000 +0800
@@ -25,7 +25,7 @@
     plicinit();      // set up interrupt controller
     plicinithart();  // ask PLIC for device interrupts
     binit();         // buffer cache
-    iinit();         // inode cache
+    iinit();         // inode table
     fileinit();      // file table
     virtio_disk_init(); // emulated hard disk
     userinit();      // first user process
Binary files ./kernel/main.o and ../xv6-labs-2021/kernel/main.o differ
diff -urN ./kernel/memlayout.h ../xv6-labs-2021/kernel/memlayout.h
--- ./kernel/memlayout.h	2021-12-05 17:48:45.000000000 +0800
+++ ../xv6-labs-2021/kernel/memlayout.h	2021-11-18 15:54:53.000000000 +0800
@@ -25,12 +25,12 @@
 #define VIRTIO0 0x10001000
 #define VIRTIO0_IRQ 1
 
-// local interrupt controller, which contains the timer.
+// core local interruptor (CLINT), which contains the timer.
 #define CLINT 0x2000000L
 #define CLINT_MTIMECMP(hartid) (CLINT + 0x4000 + 8*(hartid))
 #define CLINT_MTIME (CLINT + 0xBFF8) // cycles since boot.
 
-// qemu puts programmable interrupt controller here.
+// qemu puts platform-level interrupt controller (PLIC) here.
 #define PLIC 0x0c000000L
 #define PLIC_PRIORITY (PLIC + 0x0)
 #define PLIC_PENDING (PLIC + 0x1000)
diff -urN ./kernel/pipe.c ../xv6-labs-2021/kernel/pipe.c
--- ./kernel/pipe.c	2021-12-05 17:48:45.000000000 +0800
+++ ../xv6-labs-2021/kernel/pipe.c	2021-11-18 15:54:53.000000000 +0800
@@ -76,26 +76,29 @@
 int
 pipewrite(struct pipe *pi, uint64 addr, int n)
 {
-  int i;
-  char ch;
+  int i = 0;
   struct proc *pr = myproc();
 
   acquire(&pi->lock);
-  for(i = 0; i < n; i++){
-    while(pi->nwrite == pi->nread + PIPESIZE){  //DOC: pipewrite-full
-      if(pi->readopen == 0 || pr->killed){
-        release(&pi->lock);
-        return -1;
-      }
+  while(i < n){
+    if(pi->readopen == 0 || pr->killed){
+      release(&pi->lock);
+      return -1;
+    }
+    if(pi->nwrite == pi->nread + PIPESIZE){ //DOC: pipewrite-full
       wakeup(&pi->nread);
       sleep(&pi->nwrite, &pi->lock);
+    } else {
+      char ch;
+      if(copyin(pr->pagetable, &ch, addr + i, 1) == -1)
+        break;
+      pi->data[pi->nwrite++ % PIPESIZE] = ch;
+      i++;
     }
-    if(copyin(pr->pagetable, &ch, addr + i, 1) == -1)
-      break;
-    pi->data[pi->nwrite++ % PIPESIZE] = ch;
   }
   wakeup(&pi->nread);
   release(&pi->lock);
+
   return i;
 }
 
Binary files ./kernel/pipe.o and ../xv6-labs-2021/kernel/pipe.o differ
Binary files ./kernel/plic.o and ../xv6-labs-2021/kernel/plic.o differ
Binary files ./kernel/printf.o and ../xv6-labs-2021/kernel/printf.o differ
diff -urN ./kernel/proc.c ../xv6-labs-2021/kernel/proc.c
--- ./kernel/proc.c	2021-12-05 17:48:45.000000000 +0800
+++ ../xv6-labs-2021/kernel/proc.c	2021-12-05 17:40:55.000000000 +0800
@@ -16,11 +16,32 @@
 struct spinlock pid_lock;
 
 extern void forkret(void);
-static void wakeup1(struct proc *chan);
 static void freeproc(struct proc *p);
 
 extern char trampoline[]; // trampoline.S
 
+// helps ensure that wakeups of wait()ing
+// parents are not lost. helps obey the
+// memory model when using p->parent.
+// must be acquired before any p->lock.
+struct spinlock wait_lock;
+
+// Allocate a page for each process's kernel stack.
+// Map it high in memory, followed by an invalid
+// guard page.
+void
+proc_mapstacks(pagetable_t kpgtbl) {
+  struct proc *p;
+  
+  for(p = proc; p < &proc[NPROC]; p++) {
+    char *pa = kalloc();
+    if(pa == 0)
+      panic("kalloc");
+    uint64 va = KSTACK((int) (p - proc));
+    kvmmap(kpgtbl, va, (uint64)pa, PGSIZE, PTE_R | PTE_W);
+  }
+}
+
 // initialize the proc table at boot time.
 void
 procinit(void)
@@ -28,20 +49,11 @@
   struct proc *p;
   
   initlock(&pid_lock, "nextpid");
+  initlock(&wait_lock, "wait_lock");
   for(p = proc; p < &proc[NPROC]; p++) {
       initlock(&p->lock, "proc");
-
-      // Allocate a page for the process's kernel stack.
-      // Map it high in memory, followed by an invalid
-      // guard page.
-      char *pa = kalloc();
-      if(pa == 0)
-        panic("kalloc");
-      uint64 va = KSTACK((int) (p - proc));
-      kvmmap(va, (uint64)pa, PGSIZE, PTE_R | PTE_W);
-      p->kstack = va;
+      p->kstack = KSTACK((int) (p - proc));
   }
-  kvminithart();
 }
 
 // Must be called with interrupts disabled,
@@ -106,9 +118,11 @@
 
 found:
   p->pid = allocpid();
+  p->state = USED;
 
   // Allocate a trapframe page.
   if((p->trapframe = (struct trapframe *)kalloc()) == 0){
+    freeproc(p);
     release(&p->lock);
     return 0;
   }
@@ -275,8 +289,6 @@
   }
   np->sz = p->sz;
 
-  np->parent = p;
-
   // copy saved user registers.
   *(np->trapframe) = *(p->trapframe);
 
@@ -293,35 +305,30 @@
 
   pid = np->pid;
 
-  np->state = RUNNABLE;
+  release(&np->lock);
+
+  acquire(&wait_lock);
+  np->parent = p;
+  release(&wait_lock);
 
+  acquire(&np->lock);
+  np->state = RUNNABLE;
   release(&np->lock);
 
   return pid;
 }
 
 // Pass p's abandoned children to init.
-// Caller must hold p->lock.
+// Caller must hold wait_lock.
 void
 reparent(struct proc *p)
 {
   struct proc *pp;
 
   for(pp = proc; pp < &proc[NPROC]; pp++){
-    // this code uses pp->parent without holding pp->lock.
-    // acquiring the lock first could cause a deadlock
-    // if pp or a child of pp were also in exit()
-    // and about to try to lock p.
     if(pp->parent == p){
-      // pp->parent can't change between the check and the acquire()
-      // because only the parent changes it, and we're the parent.
-      acquire(&pp->lock);
       pp->parent = initproc;
-      // we should wake up init here, but that would require
-      // initproc->lock, which would be a deadlock, since we hold
-      // the lock on one of init's children (pp). this is why
-      // exit() always wakes init (before acquiring any locks).
-      release(&pp->lock);
+      wakeup(initproc);
     }
   }
 }
@@ -351,41 +358,20 @@
   end_op();
   p->cwd = 0;
 
-  // we might re-parent a child to init. we can't be precise about
-  // waking up init, since we can't acquire its lock once we've
-  // acquired any other proc lock. so wake up init whether that's
-  // necessary or not. init may miss this wakeup, but that seems
-  // harmless.
-  acquire(&initproc->lock);
-  wakeup1(initproc);
-  release(&initproc->lock);
-
-  // grab a copy of p->parent, to ensure that we unlock the same
-  // parent we locked. in case our parent gives us away to init while
-  // we're waiting for the parent lock. we may then race with an
-  // exiting parent, but the result will be a harmless spurious wakeup
-  // to a dead or wrong process; proc structs are never re-allocated
-  // as anything else.
-  acquire(&p->lock);
-  struct proc *original_parent = p->parent;
-  release(&p->lock);
-  
-  // we need the parent's lock in order to wake it up from wait().
-  // the parent-then-child rule says we have to lock it first.
-  acquire(&original_parent->lock);
-
-  acquire(&p->lock);
+  acquire(&wait_lock);
 
   // Give any children to init.
   reparent(p);
 
   // Parent might be sleeping in wait().
-  wakeup1(original_parent);
+  wakeup(p->parent);
+  
+  acquire(&p->lock);
 
   p->xstate = status;
   p->state = ZOMBIE;
 
-  release(&original_parent->lock);
+  release(&wait_lock);
 
   // Jump into the scheduler, never to return.
   sched();
@@ -401,21 +387,16 @@
   int havekids, pid;
   struct proc *p = myproc();
 
-  // hold p->lock for the whole time to avoid lost
-  // wakeups from a child's exit().
-  acquire(&p->lock);
+  acquire(&wait_lock);
 
   for(;;){
     // Scan through table looking for exited children.
     havekids = 0;
     for(np = proc; np < &proc[NPROC]; np++){
-      // this code uses np->parent without holding np->lock.
-      // acquiring the lock first would cause a deadlock,
-      // since np might be an ancestor, and we already hold p->lock.
       if(np->parent == p){
-        // np->parent can't change between the check and the acquire()
-        // because only the parent changes it, and we're the parent.
+        // make sure the child isn't still in exit() or swtch().
         acquire(&np->lock);
+
         havekids = 1;
         if(np->state == ZOMBIE){
           // Found one.
@@ -423,12 +404,12 @@
           if(addr != 0 && copyout(p->pagetable, addr, (char *)&np->xstate,
                                   sizeof(np->xstate)) < 0) {
             release(&np->lock);
-            release(&p->lock);
+            release(&wait_lock);
             return -1;
           }
           freeproc(np);
           release(&np->lock);
-          release(&p->lock);
+          release(&wait_lock);
           return pid;
         }
         release(&np->lock);
@@ -437,12 +418,12 @@
 
     // No point waiting if we don't have any children.
     if(!havekids || p->killed){
-      release(&p->lock);
+      release(&wait_lock);
       return -1;
     }
     
     // Wait for a child to exit.
-    sleep(p, &p->lock);  //DOC: wait-sleep
+    sleep(p, &wait_lock);  //DOC: wait-sleep
   }
 }
 
@@ -463,8 +444,7 @@
   for(;;){
     // Avoid deadlock by ensuring that devices can interrupt.
     intr_on();
-    
-    int found = 0;
+
     for(p = proc; p < &proc[NPROC]; p++) {
       acquire(&p->lock);
       if(p->state == RUNNABLE) {
@@ -478,15 +458,9 @@
         // Process is done running for now.
         // It should have changed its p->state before coming back.
         c->proc = 0;
-
-        found = 1;
       }
       release(&p->lock);
     }
-    if(found == 0) {
-      intr_on();
-      asm volatile("wfi");
-    }
   }
 }
 
@@ -562,10 +536,9 @@
   // guaranteed that we won't miss any wakeup
   // (wakeup locks p->lock),
   // so it's okay to release lk.
-  if(lk != &p->lock){  //DOC: sleeplock0
-    acquire(&p->lock);  //DOC: sleeplock1
-    release(lk);
-  }
+
+  acquire(&p->lock);  //DOC: sleeplock1
+  release(lk);
 
   // Go to sleep.
   p->chan = chan;
@@ -577,10 +550,8 @@
   p->chan = 0;
 
   // Reacquire original lock.
-  if(lk != &p->lock){
-    release(&p->lock);
-    acquire(lk);
-  }
+  release(&p->lock);
+  acquire(lk);
 }
 
 // Wake up all processes sleeping on chan.
@@ -591,23 +562,13 @@
   struct proc *p;
 
   for(p = proc; p < &proc[NPROC]; p++) {
-    acquire(&p->lock);
-    if(p->state == SLEEPING && p->chan == chan) {
-      p->state = RUNNABLE;
+    if(p != myproc()){
+      acquire(&p->lock);
+      if(p->state == SLEEPING && p->chan == chan) {
+        p->state = RUNNABLE;
+      }
+      release(&p->lock);
     }
-    release(&p->lock);
-  }
-}
-
-// Wake up p if it is sleeping in wait(); used by exit().
-// Caller must hold p->lock.
-static void
-wakeup1(struct proc *p)
-{
-  if(!holding(&p->lock))
-    panic("wakeup1");
-  if(p->chan == p && p->state == SLEEPING) {
-    p->state = RUNNABLE;
   }
 }
 
diff -urN ./kernel/proc.h ../xv6-labs-2021/kernel/proc.h
--- ./kernel/proc.h	2021-12-05 17:48:45.000000000 +0800
+++ ../xv6-labs-2021/kernel/proc.h	2021-12-05 17:40:55.000000000 +0800
@@ -80,7 +80,7 @@
   /* 280 */ uint64 t6;
 };
 
-enum procstate { UNUSED, SLEEPING, RUNNABLE, RUNNING, ZOMBIE };
+enum procstate { UNUSED, USED, SLEEPING, RUNNABLE, RUNNING, ZOMBIE };
 
 // Per-process state
 struct proc {
@@ -88,12 +88,14 @@
 
   // p->lock must be held when using these:
   enum procstate state;        // Process state
-  struct proc *parent;         // Parent process
   void *chan;                  // If non-zero, sleeping on chan
   int killed;                  // If non-zero, have been killed
   int xstate;                  // Exit status to be returned to parent's wait
   int pid;                     // Process ID
 
+  // wait_lock must be held when using this:
+  struct proc *parent;         // Parent process
+
   // these are private to the process, so p->lock need not be held.
   uint64 kstack;               // Virtual address of kernel stack
   uint64 sz;                   // Size of process memory (bytes)
Binary files ./kernel/proc.o and ../xv6-labs-2021/kernel/proc.o differ
diff -urN ./kernel/riscv.h ../xv6-labs-2021/kernel/riscv.h
--- ./kernel/riscv.h	2021-12-05 17:48:45.000000000 +0800
+++ ../xv6-labs-2021/kernel/riscv.h	2021-11-18 15:54:53.000000000 +0800
@@ -111,7 +111,7 @@
   asm volatile("csrw mie, %0" : : "r" (x));
 }
 
-// machine exception program counter, holds the
+// supervisor exception program counter, holds the
 // instruction address to which a return from
 // exception will go.
 static inline void 
@@ -181,6 +181,18 @@
   asm volatile("csrw mtvec, %0" : : "r" (x));
 }
 
+static inline void
+w_pmpcfg0(uint64 x)
+{
+  asm volatile("csrw pmpcfg0, %0" : : "r" (x));
+}
+
+static inline void
+w_pmpaddr0(uint64 x)
+{
+  asm volatile("csrw pmpaddr0, %0" : : "r" (x));
+}
+
 // use riscv's sv39 page table scheme.
 #define SATP_SV39 (8L << 60)
 
Binary files ./kernel/sleeplock.o and ../xv6-labs-2021/kernel/sleeplock.o differ
Binary files ./kernel/spinlock.o and ../xv6-labs-2021/kernel/spinlock.o differ
diff -urN ./kernel/start.c ../xv6-labs-2021/kernel/start.c
--- ./kernel/start.c	2021-12-05 17:48:45.000000000 +0800
+++ ../xv6-labs-2021/kernel/start.c	2021-11-18 15:54:53.000000000 +0800
@@ -10,8 +10,8 @@
 // entry.S needs one stack per CPU.
 __attribute__ ((aligned (16))) char stack0[4096 * NCPU];
 
-// scratch area for timer interrupt, one per CPU.
-uint64 mscratch0[NCPU * 32];
+// a scratch area per CPU for machine-mode timer interrupts.
+uint64 timer_scratch[NCPU][5];
 
 // assembly code in kernelvec.S for machine-mode timer interrupt.
 extern void timervec();
@@ -38,6 +38,11 @@
   w_mideleg(0xffff);
   w_sie(r_sie() | SIE_SEIE | SIE_STIE | SIE_SSIE);
 
+  // configure Physical Memory Protection to give supervisor mode
+  // access to all of physical memory.
+  w_pmpaddr0(0x3fffffffffffffull);
+  w_pmpcfg0(0xf);
+
   // ask for clock interrupts.
   timerinit();
 
@@ -64,12 +69,12 @@
   *(uint64*)CLINT_MTIMECMP(id) = *(uint64*)CLINT_MTIME + interval;
 
   // prepare information in scratch[] for timervec.
-  // scratch[0..3] : space for timervec to save registers.
-  // scratch[4] : address of CLINT MTIMECMP register.
-  // scratch[5] : desired interval (in cycles) between timer interrupts.
-  uint64 *scratch = &mscratch0[32 * id];
-  scratch[4] = CLINT_MTIMECMP(id);
-  scratch[5] = interval;
+  // scratch[0..2] : space for timervec to save registers.
+  // scratch[3] : address of CLINT MTIMECMP register.
+  // scratch[4] : desired interval (in cycles) between timer interrupts.
+  uint64 *scratch = &timer_scratch[id][0];
+  scratch[3] = CLINT_MTIMECMP(id);
+  scratch[4] = interval;
   w_mscratch((uint64)scratch);
 
   // set the machine-mode trap handler.
Binary files ./kernel/start.o and ../xv6-labs-2021/kernel/start.o differ
diff -urN ./kernel/string.c ../xv6-labs-2021/kernel/string.c
--- ./kernel/string.c	2021-12-05 17:48:45.000000000 +0800
+++ ../xv6-labs-2021/kernel/string.c	2021-11-18 15:54:53.000000000 +0800
@@ -33,6 +33,9 @@
   const char *s;
   char *d;
 
+  if(n == 0)
+    return dst;
+  
   s = src;
   d = dst;
   if(s < d && s + n > d){
Binary files ./kernel/string.o and ../xv6-labs-2021/kernel/string.o differ
Binary files ./kernel/syscall.o and ../xv6-labs-2021/kernel/syscall.o differ
Binary files ./kernel/sysfile.o and ../xv6-labs-2021/kernel/sysfile.o differ
diff -urN ./kernel/sysproc.d ../xv6-labs-2021/kernel/sysproc.d
--- ./kernel/sysproc.d	2021-12-05 17:54:41.000000000 +0800
+++ ../xv6-labs-2021/kernel/sysproc.d	2021-11-26 14:46:15.000000000 +0800
@@ -1,3 +1,3 @@
 kernel/sysproc.o: kernel/sysproc.c kernel/types.h kernel/riscv.h \
  kernel/defs.h kernel/date.h kernel/param.h kernel/memlayout.h \
- kernel/spinlock.h kernel/proc.h
+ kernel/spinlock.h kernel/proc.h kernel/sysinfo.h
Binary files ./kernel/sysproc.o and ../xv6-labs-2021/kernel/sysproc.o differ
Binary files ./kernel/trap.o and ../xv6-labs-2021/kernel/trap.o differ
diff -urN ./kernel/uart.c ../xv6-labs-2021/kernel/uart.c
--- ./kernel/uart.c	2021-12-05 17:48:45.000000000 +0800
+++ ../xv6-labs-2021/kernel/uart.c	2021-11-18 15:54:53.000000000 +0800
@@ -22,8 +22,8 @@
 #define RHR 0                 // receive holding register (for input bytes)
 #define THR 0                 // transmit holding register (for output bytes)
 #define IER 1                 // interrupt enable register
-#define IER_TX_ENABLE (1<<0)
-#define IER_RX_ENABLE (1<<1)
+#define IER_RX_ENABLE (1<<0)
+#define IER_TX_ENABLE (1<<1)
 #define FCR 2                 // FIFO control register
 #define FCR_FIFO_ENABLE (1<<0)
 #define FCR_FIFO_CLEAR (3<<1) // clear the content of the two FIFOs
@@ -42,8 +42,8 @@
 struct spinlock uart_tx_lock;
 #define UART_TX_BUF_SIZE 32
 char uart_tx_buf[UART_TX_BUF_SIZE];
-int uart_tx_w; // write next to uart_tx_buf[uart_tx_w++]
-int uart_tx_r; // read next from uart_tx_buf[uar_tx_r++]
+uint64 uart_tx_w; // write next to uart_tx_buf[uart_tx_w % UART_TX_BUF_SIZE]
+uint64 uart_tx_r; // read next from uart_tx_buf[uart_tx_r % UART_TX_BUF_SIZE]
 
 extern volatile int panicked; // from printf.c
 
@@ -94,13 +94,13 @@
   }
 
   while(1){
-    if(((uart_tx_w + 1) % UART_TX_BUF_SIZE) == uart_tx_r){
+    if(uart_tx_w == uart_tx_r + UART_TX_BUF_SIZE){
       // buffer is full.
       // wait for uartstart() to open up space in the buffer.
       sleep(&uart_tx_r, &uart_tx_lock);
     } else {
-      uart_tx_buf[uart_tx_w] = c;
-      uart_tx_w = (uart_tx_w + 1) % UART_TX_BUF_SIZE;
+      uart_tx_buf[uart_tx_w % UART_TX_BUF_SIZE] = c;
+      uart_tx_w += 1;
       uartstart();
       release(&uart_tx_lock);
       return;
@@ -150,8 +150,8 @@
       return;
     }
     
-    int c = uart_tx_buf[uart_tx_r];
-    uart_tx_r = (uart_tx_r + 1) % UART_TX_BUF_SIZE;
+    int c = uart_tx_buf[uart_tx_r % UART_TX_BUF_SIZE];
+    uart_tx_r += 1;
     
     // maybe uartputc() is waiting for space in the buffer.
     wakeup(&uart_tx_r);
Binary files ./kernel/uart.o and ../xv6-labs-2021/kernel/uart.o differ
diff -urN ./kernel/virtio.h ../xv6-labs-2021/kernel/virtio.h
--- ./kernel/virtio.h	2021-12-05 17:48:45.000000000 +0800
+++ ../xv6-labs-2021/kernel/virtio.h	2021-11-18 15:54:53.000000000 +0800
@@ -47,7 +47,8 @@
 // must be a power of two.
 #define NUM 8
 
-struct VRingDesc {
+// a single descriptor, from the spec.
+struct virtq_desc {
   uint64 addr;
   uint32 len;
   uint16 flags;
@@ -56,17 +57,38 @@
 #define VRING_DESC_F_NEXT  1 // chained with another descriptor
 #define VRING_DESC_F_WRITE 2 // device writes (vs read)
 
-struct VRingUsedElem {
+// the (entire) avail ring, from the spec.
+struct virtq_avail {
+  uint16 flags; // always zero
+  uint16 idx;   // driver will write ring[idx] next
+  uint16 ring[NUM]; // descriptor numbers of chain heads
+  uint16 unused;
+};
+
+// one entry in the "used" ring, with which the
+// device tells the driver about completed requests.
+struct virtq_used_elem {
   uint32 id;   // index of start of completed descriptor chain
   uint32 len;
 };
 
-// for disk ops
+struct virtq_used {
+  uint16 flags; // always zero
+  uint16 idx;   // device increments when it adds a ring[] entry
+  struct virtq_used_elem ring[NUM];
+};
+
+// these are specific to virtio block devices, e.g. disks,
+// described in Section 5.2 of the spec.
+
 #define VIRTIO_BLK_T_IN  0 // read the disk
 #define VIRTIO_BLK_T_OUT 1 // write the disk
 
-struct UsedArea {
-  uint16 flags;
-  uint16 id;
-  struct VRingUsedElem elems[NUM];
+// the format of the first descriptor in a disk request.
+// to be followed by two more descriptors containing
+// the block, and a one-byte status.
+struct virtio_blk_req {
+  uint32 type; // VIRTIO_BLK_T_IN or ..._OUT
+  uint32 reserved;
+  uint64 sector;
 };
diff -urN ./kernel/virtio_disk.c ../xv6-labs-2021/kernel/virtio_disk.c
--- ./kernel/virtio_disk.c	2021-12-05 17:48:45.000000000 +0800
+++ ../xv6-labs-2021/kernel/virtio_disk.c	2021-11-18 15:54:53.000000000 +0800
@@ -21,14 +21,37 @@
 #define R(r) ((volatile uint32 *)(VIRTIO0 + (r)))
 
 static struct disk {
- // memory for virtio descriptors &c for queue 0.
- // this is a global instead of allocated because it must
- // be multiple contiguous pages, which kalloc()
- // doesn't support, and page aligned.
+  // the virtio driver and device mostly communicate through a set of
+  // structures in RAM. pages[] allocates that memory. pages[] is a
+  // global (instead of calls to kalloc()) because it must consist of
+  // two contiguous pages of page-aligned physical memory.
   char pages[2*PGSIZE];
-  struct VRingDesc *desc;
-  uint16 *avail;
-  struct UsedArea *used;
+
+  // pages[] is divided into three regions (descriptors, avail, and
+  // used), as explained in Section 2.6 of the virtio specification
+  // for the legacy interface.
+  // https://docs.oasis-open.org/virtio/virtio/v1.1/virtio-v1.1.pdf
+  
+  // the first region of pages[] is a set (not a ring) of DMA
+  // descriptors, with which the driver tells the device where to read
+  // and write individual disk operations. there are NUM descriptors.
+  // most commands consist of a "chain" (a linked list) of a couple of
+  // these descriptors.
+  // points into pages[].
+  struct virtq_desc *desc;
+
+  // next is a ring in which the driver writes descriptor numbers
+  // that the driver would like the device to process.  it only
+  // includes the head descriptor of each chain. the ring has
+  // NUM elements.
+  // points into pages[].
+  struct virtq_avail *avail;
+
+  // finally a ring in which the device writes descriptor numbers that
+  // the device has finished processing (just the head of each chain).
+  // there are NUM used ring entries.
+  // points into pages[].
+  struct virtq_used *used;
 
   // our own book-keeping.
   char free[NUM];  // is a descriptor free?
@@ -41,6 +64,10 @@
     struct buf *b;
     char status;
   } info[NUM];
+
+  // disk command headers.
+  // one-for-one with descriptors, for convenience.
+  struct virtio_blk_req ops[NUM];
   
   struct spinlock vdisk_lock;
   
@@ -98,14 +125,15 @@
   memset(disk.pages, 0, sizeof(disk.pages));
   *R(VIRTIO_MMIO_QUEUE_PFN) = ((uint64)disk.pages) >> PGSHIFT;
 
-  // desc = pages -- num * VRingDesc
+  // desc = pages -- num * virtq_desc
   // avail = pages + 0x40 -- 2 * uint16, then num * uint16
   // used = pages + 4096 -- 2 * uint16, then num * vRingUsedElem
 
-  disk.desc = (struct VRingDesc *) disk.pages;
-  disk.avail = (uint16*)(((char*)disk.desc) + NUM*sizeof(struct VRingDesc));
-  disk.used = (struct UsedArea *) (disk.pages + PGSIZE);
+  disk.desc = (struct virtq_desc *) disk.pages;
+  disk.avail = (struct virtq_avail *)(disk.pages + NUM*sizeof(struct virtq_desc));
+  disk.used = (struct virtq_used *) (disk.pages + PGSIZE);
 
+  // all NUM descriptors start out unused.
   for(int i = 0; i < NUM; i++)
     disk.free[i] = 1;
 
@@ -130,10 +158,13 @@
 free_desc(int i)
 {
   if(i >= NUM)
-    panic("virtio_disk_intr 1");
+    panic("free_desc 1");
   if(disk.free[i])
-    panic("virtio_disk_intr 2");
+    panic("free_desc 2");
   disk.desc[i].addr = 0;
+  disk.desc[i].len = 0;
+  disk.desc[i].flags = 0;
+  disk.desc[i].next = 0;
   disk.free[i] = 1;
   wakeup(&disk.free[0]);
 }
@@ -143,14 +174,18 @@
 free_chain(int i)
 {
   while(1){
+    int flag = disk.desc[i].flags;
+    int nxt = disk.desc[i].next;
     free_desc(i);
-    if(disk.desc[i].flags & VRING_DESC_F_NEXT)
-      i = disk.desc[i].next;
+    if(flag & VRING_DESC_F_NEXT)
+      i = nxt;
     else
       break;
   }
 }
 
+// allocate three descriptors (they need not be contiguous).
+// disk transfers always use three descriptors.
 static int
 alloc3_desc(int *idx)
 {
@@ -172,9 +207,9 @@
 
   acquire(&disk.vdisk_lock);
 
-  // the spec says that legacy block operations use three
-  // descriptors: one for type/reserved/sector, one for
-  // the data, one for a 1-byte status result.
+  // the spec's Section 5.2 says that legacy block operations use
+  // three descriptors: one for type/reserved/sector, one for the
+  // data, one for a 1-byte status result.
 
   // allocate the three descriptors.
   int idx[3];
@@ -184,27 +219,21 @@
     }
     sleep(&disk.free[0], &disk.vdisk_lock);
   }
-  
+
   // format the three descriptors.
   // qemu's virtio-blk.c reads them.
 
-  struct virtio_blk_outhdr {
-    uint32 type;
-    uint32 reserved;
-    uint64 sector;
-  } buf0;
+  struct virtio_blk_req *buf0 = &disk.ops[idx[0]];
 
   if(write)
-    buf0.type = VIRTIO_BLK_T_OUT; // write the disk
+    buf0->type = VIRTIO_BLK_T_OUT; // write the disk
   else
-    buf0.type = VIRTIO_BLK_T_IN; // read the disk
-  buf0.reserved = 0;
-  buf0.sector = sector;
-
-  // buf0 is on a kernel stack, which is not direct mapped,
-  // thus the call to kvmpa().
-  disk.desc[idx[0]].addr = (uint64) kvmpa((uint64) &buf0);
-  disk.desc[idx[0]].len = sizeof(buf0);
+    buf0->type = VIRTIO_BLK_T_IN; // read the disk
+  buf0->reserved = 0;
+  buf0->sector = sector;
+
+  disk.desc[idx[0]].addr = (uint64) buf0;
+  disk.desc[idx[0]].len = sizeof(struct virtio_blk_req);
   disk.desc[idx[0]].flags = VRING_DESC_F_NEXT;
   disk.desc[idx[0]].next = idx[1];
 
@@ -217,7 +246,7 @@
   disk.desc[idx[1]].flags |= VRING_DESC_F_NEXT;
   disk.desc[idx[1]].next = idx[2];
 
-  disk.info[idx[0]].status = 0;
+  disk.info[idx[0]].status = 0xff; // device writes 0 on success
   disk.desc[idx[2]].addr = (uint64) &disk.info[idx[0]].status;
   disk.desc[idx[2]].len = 1;
   disk.desc[idx[2]].flags = VRING_DESC_F_WRITE; // device writes the status
@@ -227,13 +256,15 @@
   b->disk = 1;
   disk.info[idx[0]].b = b;
 
-  // avail[0] is flags
-  // avail[1] tells the device how far to look in avail[2...].
-  // avail[2...] are desc[] indices the device should process.
-  // we only tell device the first index in our chain of descriptors.
-  disk.avail[2 + (disk.avail[1] % NUM)] = idx[0];
+  // tell the device the first index in our chain of descriptors.
+  disk.avail->ring[disk.avail->idx % NUM] = idx[0];
+
+  __sync_synchronize();
+
+  // tell the device another avail ring entry is available.
+  disk.avail->idx += 1; // not % NUM ...
+
   __sync_synchronize();
-  disk.avail[1] = disk.avail[1] + 1;
 
   *R(VIRTIO_MMIO_QUEUE_NOTIFY) = 0; // value is queue number
 
@@ -253,18 +284,32 @@
 {
   acquire(&disk.vdisk_lock);
 
-  while((disk.used_idx % NUM) != (disk.used->id % NUM)){
-    int id = disk.used->elems[disk.used_idx].id;
+  // the device won't raise another interrupt until we tell it
+  // we've seen this interrupt, which the following line does.
+  // this may race with the device writing new entries to
+  // the "used" ring, in which case we may process the new
+  // completion entries in this interrupt, and have nothing to do
+  // in the next interrupt, which is harmless.
+  *R(VIRTIO_MMIO_INTERRUPT_ACK) = *R(VIRTIO_MMIO_INTERRUPT_STATUS) & 0x3;
+
+  __sync_synchronize();
+
+  // the device increments disk.used->idx when it
+  // adds an entry to the used ring.
+
+  while(disk.used_idx != disk.used->idx){
+    __sync_synchronize();
+    int id = disk.used->ring[disk.used_idx % NUM].id;
 
     if(disk.info[id].status != 0)
       panic("virtio_disk_intr status");
-    
-    disk.info[id].b->disk = 0;   // disk is done with buf
-    wakeup(disk.info[id].b);
 
-    disk.used_idx = (disk.used_idx + 1) % NUM;
+    struct buf *b = disk.info[id].b;
+    b->disk = 0;   // disk is done with buf
+    wakeup(b);
+
+    disk.used_idx += 1;
   }
-  *R(VIRTIO_MMIO_INTERRUPT_ACK) = *R(VIRTIO_MMIO_INTERRUPT_STATUS) & 0x3;
 
   release(&disk.vdisk_lock);
 }
Binary files ./kernel/virtio_disk.o and ../xv6-labs-2021/kernel/virtio_disk.o differ
diff -urN ./kernel/vm.c ../xv6-labs-2021/kernel/vm.c
--- ./kernel/vm.c	2021-12-05 17:48:45.000000000 +0800
+++ ../xv6-labs-2021/kernel/vm.c	2021-12-05 17:40:55.000000000 +0800
@@ -15,36 +15,45 @@
 
 extern char trampoline[]; // trampoline.S
 
-/*
- * create a direct-map page table for the kernel.
- */
-void
-kvminit()
+// Make a direct-map page table for the kernel.
+pagetable_t
+kvmmake(void)
 {
-  kernel_pagetable = (pagetable_t) kalloc();
-  memset(kernel_pagetable, 0, PGSIZE);
+  pagetable_t kpgtbl;
+
+  kpgtbl = (pagetable_t) kalloc();
+  memset(kpgtbl, 0, PGSIZE);
 
   // uart registers
-  kvmmap(UART0, UART0, PGSIZE, PTE_R | PTE_W);
+  kvmmap(kpgtbl, UART0, UART0, PGSIZE, PTE_R | PTE_W);
 
   // virtio mmio disk interface
-  kvmmap(VIRTIO0, VIRTIO0, PGSIZE, PTE_R | PTE_W);
-
-  // CLINT
-  kvmmap(CLINT, CLINT, 0x10000, PTE_R | PTE_W);
+  kvmmap(kpgtbl, VIRTIO0, VIRTIO0, PGSIZE, PTE_R | PTE_W);
 
   // PLIC
-  kvmmap(PLIC, PLIC, 0x400000, PTE_R | PTE_W);
+  kvmmap(kpgtbl, PLIC, PLIC, 0x400000, PTE_R | PTE_W);
 
   // map kernel text executable and read-only.
-  kvmmap(KERNBASE, KERNBASE, (uint64)etext-KERNBASE, PTE_R | PTE_X);
+  kvmmap(kpgtbl, KERNBASE, KERNBASE, (uint64)etext-KERNBASE, PTE_R | PTE_X);
 
   // map kernel data and the physical RAM we'll make use of.
-  kvmmap((uint64)etext, (uint64)etext, PHYSTOP-(uint64)etext, PTE_R | PTE_W);
+  kvmmap(kpgtbl, (uint64)etext, (uint64)etext, PHYSTOP-(uint64)etext, PTE_R | PTE_W);
 
   // map the trampoline for trap entry/exit to
   // the highest virtual address in the kernel.
-  kvmmap(TRAMPOLINE, (uint64)trampoline, PGSIZE, PTE_R | PTE_X);
+  kvmmap(kpgtbl, TRAMPOLINE, (uint64)trampoline, PGSIZE, PTE_R | PTE_X);
+
+  // map kernel stacks
+  proc_mapstacks(kpgtbl);
+  
+  return kpgtbl;
+}
+
+// Initialize the one kernel_pagetable
+void
+kvminit(void)
+{
+  kernel_pagetable = kvmmake();
 }
 
 // Switch h/w page table register to the kernel's page table,
@@ -115,32 +124,12 @@
 // only used when booting.
 // does not flush TLB or enable paging.
 void
-kvmmap(uint64 va, uint64 pa, uint64 sz, int perm)
+kvmmap(pagetable_t kpgtbl, uint64 va, uint64 pa, uint64 sz, int perm)
 {
-  if(mappages(kernel_pagetable, va, sz, pa, perm) != 0)
+  if(mappages(kpgtbl, va, sz, pa, perm) != 0)
     panic("kvmmap");
 }
 
-// translate a kernel virtual address to
-// a physical address. only needed for
-// addresses on the stack.
-// assumes va is page aligned.
-uint64
-kvmpa(uint64 va)
-{
-  uint64 off = va % PGSIZE;
-  pte_t *pte;
-  uint64 pa;
-  
-  pte = walk(kernel_pagetable, va, 0);
-  if(pte == 0)
-    panic("kvmpa");
-  if((*pte & PTE_V) == 0)
-    panic("kvmpa");
-  pa = PTE2PA(*pte);
-  return pa+off;
-}
-
 // Create PTEs for virtual addresses starting at va that refer to
 // physical addresses starting at pa. va and size might not
 // be page-aligned. Returns 0 on success, -1 if walk() couldn't
@@ -151,13 +140,16 @@
   uint64 a, last;
   pte_t *pte;
 
+  if(size == 0)
+    panic("mappages: size");
+  
   a = PGROUNDDOWN(va);
   last = PGROUNDDOWN(va + size - 1);
   for(;;){
     if((pte = walk(pagetable, a, 1)) == 0)
       return -1;
     if(*pte & PTE_V)
-      panic("remap");
+      panic("mappages: remap");
     *pte = PA2PTE(pa) | perm | PTE_V;
     if(a == last)
       break;
Binary files ./kernel/vm.o and ../xv6-labs-2021/kernel/vm.o differ
Binary files ./mkfs/mkfs and ../xv6-labs-2021/mkfs/mkfs differ
diff -urN ./mkfs/mkfs.c ../xv6-labs-2021/mkfs/mkfs.c
--- ./mkfs/mkfs.c	2021-12-05 17:48:45.000000000 +0800
+++ ../xv6-labs-2021/mkfs/mkfs.c	2021-11-18 15:54:53.000000000 +0800
@@ -40,6 +40,7 @@
 void rsect(uint sec, void *buf);
 uint ialloc(ushort type);
 void iappend(uint inum, void *p, int n);
+void die(const char *);
 
 // convert to intel byte order
 ushort
@@ -85,10 +86,8 @@
   assert((BSIZE % sizeof(struct dirent)) == 0);
 
   fsfd = open(argv[1], O_RDWR|O_CREAT|O_TRUNC, 0666);
-  if(fsfd < 0){
-    perror(argv[1]);
-    exit(1);
-  }
+  if(fsfd < 0)
+    die(argv[1]);
 
   // 1 fs block = 1 disk sector
   nmeta = 2 + nlog + ninodeblocks + nbitmap;
@@ -138,10 +137,8 @@
     
     assert(index(shortname, '/') == 0);
 
-    if((fd = open(argv[i], 0)) < 0){
-      perror(argv[i]);
-      exit(1);
-    }
+    if((fd = open(argv[i], 0)) < 0)
+      die(argv[i]);
 
     // Skip leading _ in name when writing to file system.
     // The binaries are named _rm, _cat, etc. to keep the
@@ -178,14 +175,10 @@
 void
 wsect(uint sec, void *buf)
 {
-  if(lseek(fsfd, sec * BSIZE, 0) != sec * BSIZE){
-    perror("lseek");
-    exit(1);
-  }
-  if(write(fsfd, buf, BSIZE) != BSIZE){
-    perror("write");
-    exit(1);
-  }
+  if(lseek(fsfd, sec * BSIZE, 0) != sec * BSIZE)
+    die("lseek");
+  if(write(fsfd, buf, BSIZE) != BSIZE)
+    die("write");
 }
 
 void
@@ -218,14 +211,10 @@
 void
 rsect(uint sec, void *buf)
 {
-  if(lseek(fsfd, sec * BSIZE, 0) != sec * BSIZE){
-    perror("lseek");
-    exit(1);
-  }
-  if(read(fsfd, buf, BSIZE) != BSIZE){
-    perror("read");
-    exit(1);
-  }
+  if(lseek(fsfd, sec * BSIZE, 0) != sec * BSIZE)
+    die("lseek");
+  if(read(fsfd, buf, BSIZE) != BSIZE)
+    die("read");
 }
 
 uint
@@ -303,3 +292,10 @@
   din.size = xint(off);
   winode(inum, &din);
 }
+
+void
+die(const char *s)
+{
+  perror(s);
+  exit(1);
+}
diff -urN ./time.txt ../xv6-labs-2021/time.txt
--- ./time.txt	1970-01-01 08:00:00.000000000 +0800
+++ ../xv6-labs-2021/time.txt	2021-12-05 17:40:55.000000000 +0800
@@ -0,0 +1 @@
+8
Binary files ./user/_cat and ../xv6-labs-2021/user/_cat differ
Binary files ./user/_echo and ../xv6-labs-2021/user/_echo differ
Binary files ./user/_find and ../xv6-labs-2021/user/_find differ
Binary files ./user/_forktest and ../xv6-labs-2021/user/_forktest differ
Binary files ./user/_grep and ../xv6-labs-2021/user/_grep differ
Binary files ./user/_grind and ../xv6-labs-2021/user/_grind differ
Binary files ./user/_init and ../xv6-labs-2021/user/_init differ
Binary files ./user/_kill and ../xv6-labs-2021/user/_kill differ
Binary files ./user/_ln and ../xv6-labs-2021/user/_ln differ
Binary files ./user/_ls and ../xv6-labs-2021/user/_ls differ
Binary files ./user/_mkdir and ../xv6-labs-2021/user/_mkdir differ
Binary files ./user/_pingpong and ../xv6-labs-2021/user/_pingpong differ
Binary files ./user/_primes and ../xv6-labs-2021/user/_primes differ
Binary files ./user/_rm and ../xv6-labs-2021/user/_rm differ
Binary files ./user/_sh and ../xv6-labs-2021/user/_sh differ
Binary files ./user/_sleep and ../xv6-labs-2021/user/_sleep differ
Binary files ./user/_stressfs and ../xv6-labs-2021/user/_stressfs differ
Binary files ./user/_sysinfotest and ../xv6-labs-2021/user/_sysinfotest differ
Binary files ./user/_trace and ../xv6-labs-2021/user/_trace differ
Binary files ./user/_usertests and ../xv6-labs-2021/user/_usertests differ
Binary files ./user/_wc and ../xv6-labs-2021/user/_wc differ
Binary files ./user/_xargs and ../xv6-labs-2021/user/_xargs differ
Binary files ./user/_zombie and ../xv6-labs-2021/user/_zombie differ
diff -urN ./user/cat.asm ../xv6-labs-2021/user/cat.asm
--- ./user/cat.asm	2021-12-05 17:54:42.000000000 +0800
+++ ../xv6-labs-2021/user/cat.asm	2021-11-26 14:46:16.000000000 +0800
@@ -23,7 +23,7 @@
 
   while((n = read(fd, buf, sizeof(buf))) > 0) {
   10:	00001917          	auipc	s2,0x1
-  14:	96090913          	addi	s2,s2,-1696 # 970 <buf>
+  14:	97090913          	addi	s2,s2,-1680 # 980 <buf>
   18:	20000613          	li	a2,512
   1c:	85ca                	mv	a1,s2
   1e:	854e                	mv	a0,s3
@@ -40,10 +40,10 @@
   3c:	fc950ee3          	beq	a0,s1,18 <cat+0x18>
       fprintf(2, "cat: write error\n");
   40:	00001597          	auipc	a1,0x1
-  44:	86858593          	addi	a1,a1,-1944 # 8a8 <malloc+0xec>
+  44:	87858593          	addi	a1,a1,-1928 # 8b8 <malloc+0xec>
   48:	4509                	li	a0,2
   4a:	00000097          	auipc	ra,0x0
-  4e:	68c080e7          	jalr	1676(ra) # 6d6 <fprintf>
+  4e:	69c080e7          	jalr	1692(ra) # 6e6 <fprintf>
       exit(1);
   52:	4505                	li	a0,1
   54:	00000097          	auipc	ra,0x0
@@ -65,10 +65,10 @@
   6c:	8082                	ret
     fprintf(2, "cat: read error\n");
   6e:	00001597          	auipc	a1,0x1
-  72:	85258593          	addi	a1,a1,-1966 # 8c0 <malloc+0x104>
+  72:	86258593          	addi	a1,a1,-1950 # 8d0 <malloc+0x104>
   76:	4509                	li	a0,2
   78:	00000097          	auipc	ra,0x0
-  7c:	65e080e7          	jalr	1630(ra) # 6d6 <fprintf>
+  7c:	66e080e7          	jalr	1646(ra) # 6e6 <fprintf>
     exit(1);
   80:	4505                	li	a0,1
   82:	00000097          	auipc	ra,0x0
@@ -139,10 +139,10 @@
       fprintf(2, "cat: cannot open %s\n", argv[i]);
   fe:	00093603          	ld	a2,0(s2)
  102:	00000597          	auipc	a1,0x0
- 106:	7d658593          	addi	a1,a1,2006 # 8d8 <malloc+0x11c>
+ 106:	7e658593          	addi	a1,a1,2022 # 8e8 <malloc+0x11c>
  10a:	4509                	li	a0,2
  10c:	00000097          	auipc	ra,0x0
- 110:	5ca080e7          	jalr	1482(ra) # 6d6 <fprintf>
+ 110:	5da080e7          	jalr	1498(ra) # 6e6 <fprintf>
       exit(1);
  114:	4505                	li	a0,1
  116:	00000097          	auipc	ra,0x0
@@ -779,632 +779,652 @@
  ret
  428:	8082                	ret
 
-000000000000042a <putc>:
+000000000000042a <trace>:
+.global trace
+trace:
+ li a7, SYS_trace
+ 42a:	48d9                	li	a7,22
+ ecall
+ 42c:	00000073          	ecall
+ ret
+ 430:	8082                	ret
+
+0000000000000432 <sysinfo>:
+.global sysinfo
+sysinfo:
+ li a7, SYS_sysinfo
+ 432:	48dd                	li	a7,23
+ ecall
+ 434:	00000073          	ecall
+ ret
+ 438:	8082                	ret
+
+000000000000043a <putc>:
 
 static char digits[] = "0123456789ABCDEF";
 
 static void
 putc(int fd, char c)
 {
- 42a:	1101                	addi	sp,sp,-32
- 42c:	ec06                	sd	ra,24(sp)
- 42e:	e822                	sd	s0,16(sp)
- 430:	1000                	addi	s0,sp,32
- 432:	feb407a3          	sb	a1,-17(s0)
+ 43a:	1101                	addi	sp,sp,-32
+ 43c:	ec06                	sd	ra,24(sp)
+ 43e:	e822                	sd	s0,16(sp)
+ 440:	1000                	addi	s0,sp,32
+ 442:	feb407a3          	sb	a1,-17(s0)
   write(fd, &c, 1);
- 436:	4605                	li	a2,1
- 438:	fef40593          	addi	a1,s0,-17
- 43c:	00000097          	auipc	ra,0x0
- 440:	f6e080e7          	jalr	-146(ra) # 3aa <write>
-}
- 444:	60e2                	ld	ra,24(sp)
- 446:	6442                	ld	s0,16(sp)
- 448:	6105                	addi	sp,sp,32
- 44a:	8082                	ret
+ 446:	4605                	li	a2,1
+ 448:	fef40593          	addi	a1,s0,-17
+ 44c:	00000097          	auipc	ra,0x0
+ 450:	f5e080e7          	jalr	-162(ra) # 3aa <write>
+}
+ 454:	60e2                	ld	ra,24(sp)
+ 456:	6442                	ld	s0,16(sp)
+ 458:	6105                	addi	sp,sp,32
+ 45a:	8082                	ret
 
-000000000000044c <printint>:
+000000000000045c <printint>:
 
 static void
 printint(int fd, int xx, int base, int sgn)
 {
- 44c:	7139                	addi	sp,sp,-64
- 44e:	fc06                	sd	ra,56(sp)
- 450:	f822                	sd	s0,48(sp)
- 452:	f426                	sd	s1,40(sp)
- 454:	f04a                	sd	s2,32(sp)
- 456:	ec4e                	sd	s3,24(sp)
- 458:	0080                	addi	s0,sp,64
- 45a:	84aa                	mv	s1,a0
+ 45c:	7139                	addi	sp,sp,-64
+ 45e:	fc06                	sd	ra,56(sp)
+ 460:	f822                	sd	s0,48(sp)
+ 462:	f426                	sd	s1,40(sp)
+ 464:	f04a                	sd	s2,32(sp)
+ 466:	ec4e                	sd	s3,24(sp)
+ 468:	0080                	addi	s0,sp,64
+ 46a:	84aa                	mv	s1,a0
   char buf[16];
   int i, neg;
   uint x;
 
   neg = 0;
   if(sgn && xx < 0){
- 45c:	c299                	beqz	a3,462 <printint+0x16>
- 45e:	0805c963          	bltz	a1,4f0 <printint+0xa4>
+ 46c:	c299                	beqz	a3,472 <printint+0x16>
+ 46e:	0805c963          	bltz	a1,500 <printint+0xa4>
     neg = 1;
     x = -xx;
   } else {
     x = xx;
- 462:	2581                	sext.w	a1,a1
+ 472:	2581                	sext.w	a1,a1
   neg = 0;
- 464:	4881                	li	a7,0
- 466:	fc040693          	addi	a3,s0,-64
+ 474:	4881                	li	a7,0
+ 476:	fc040693          	addi	a3,s0,-64
   }
 
   i = 0;
- 46a:	4701                	li	a4,0
+ 47a:	4701                	li	a4,0
   do{
     buf[i++] = digits[x % base];
- 46c:	2601                	sext.w	a2,a2
- 46e:	00000517          	auipc	a0,0x0
- 472:	4e250513          	addi	a0,a0,1250 # 950 <digits>
- 476:	883a                	mv	a6,a4
- 478:	2705                	addiw	a4,a4,1
- 47a:	02c5f7bb          	remuw	a5,a1,a2
- 47e:	1782                	slli	a5,a5,0x20
- 480:	9381                	srli	a5,a5,0x20
- 482:	97aa                	add	a5,a5,a0
- 484:	0007c783          	lbu	a5,0(a5)
- 488:	00f68023          	sb	a5,0(a3)
+ 47c:	2601                	sext.w	a2,a2
+ 47e:	00000517          	auipc	a0,0x0
+ 482:	4e250513          	addi	a0,a0,1250 # 960 <digits>
+ 486:	883a                	mv	a6,a4
+ 488:	2705                	addiw	a4,a4,1
+ 48a:	02c5f7bb          	remuw	a5,a1,a2
+ 48e:	1782                	slli	a5,a5,0x20
+ 490:	9381                	srli	a5,a5,0x20
+ 492:	97aa                	add	a5,a5,a0
+ 494:	0007c783          	lbu	a5,0(a5)
+ 498:	00f68023          	sb	a5,0(a3)
   }while((x /= base) != 0);
- 48c:	0005879b          	sext.w	a5,a1
- 490:	02c5d5bb          	divuw	a1,a1,a2
- 494:	0685                	addi	a3,a3,1
- 496:	fec7f0e3          	bgeu	a5,a2,476 <printint+0x2a>
+ 49c:	0005879b          	sext.w	a5,a1
+ 4a0:	02c5d5bb          	divuw	a1,a1,a2
+ 4a4:	0685                	addi	a3,a3,1
+ 4a6:	fec7f0e3          	bgeu	a5,a2,486 <printint+0x2a>
   if(neg)
- 49a:	00088c63          	beqz	a7,4b2 <printint+0x66>
+ 4aa:	00088c63          	beqz	a7,4c2 <printint+0x66>
     buf[i++] = '-';
- 49e:	fd070793          	addi	a5,a4,-48
- 4a2:	00878733          	add	a4,a5,s0
- 4a6:	02d00793          	li	a5,45
- 4aa:	fef70823          	sb	a5,-16(a4)
- 4ae:	0028071b          	addiw	a4,a6,2
+ 4ae:	fd070793          	addi	a5,a4,-48
+ 4b2:	00878733          	add	a4,a5,s0
+ 4b6:	02d00793          	li	a5,45
+ 4ba:	fef70823          	sb	a5,-16(a4)
+ 4be:	0028071b          	addiw	a4,a6,2
 
   while(--i >= 0)
- 4b2:	02e05863          	blez	a4,4e2 <printint+0x96>
- 4b6:	fc040793          	addi	a5,s0,-64
- 4ba:	00e78933          	add	s2,a5,a4
- 4be:	fff78993          	addi	s3,a5,-1
- 4c2:	99ba                	add	s3,s3,a4
- 4c4:	377d                	addiw	a4,a4,-1
- 4c6:	1702                	slli	a4,a4,0x20
- 4c8:	9301                	srli	a4,a4,0x20
- 4ca:	40e989b3          	sub	s3,s3,a4
+ 4c2:	02e05863          	blez	a4,4f2 <printint+0x96>
+ 4c6:	fc040793          	addi	a5,s0,-64
+ 4ca:	00e78933          	add	s2,a5,a4
+ 4ce:	fff78993          	addi	s3,a5,-1
+ 4d2:	99ba                	add	s3,s3,a4
+ 4d4:	377d                	addiw	a4,a4,-1
+ 4d6:	1702                	slli	a4,a4,0x20
+ 4d8:	9301                	srli	a4,a4,0x20
+ 4da:	40e989b3          	sub	s3,s3,a4
     putc(fd, buf[i]);
- 4ce:	fff94583          	lbu	a1,-1(s2)
- 4d2:	8526                	mv	a0,s1
- 4d4:	00000097          	auipc	ra,0x0
- 4d8:	f56080e7          	jalr	-170(ra) # 42a <putc>
+ 4de:	fff94583          	lbu	a1,-1(s2)
+ 4e2:	8526                	mv	a0,s1
+ 4e4:	00000097          	auipc	ra,0x0
+ 4e8:	f56080e7          	jalr	-170(ra) # 43a <putc>
   while(--i >= 0)
- 4dc:	197d                	addi	s2,s2,-1
- 4de:	ff3918e3          	bne	s2,s3,4ce <printint+0x82>
+ 4ec:	197d                	addi	s2,s2,-1
+ 4ee:	ff3918e3          	bne	s2,s3,4de <printint+0x82>
 }
- 4e2:	70e2                	ld	ra,56(sp)
- 4e4:	7442                	ld	s0,48(sp)
- 4e6:	74a2                	ld	s1,40(sp)
- 4e8:	7902                	ld	s2,32(sp)
- 4ea:	69e2                	ld	s3,24(sp)
- 4ec:	6121                	addi	sp,sp,64
- 4ee:	8082                	ret
+ 4f2:	70e2                	ld	ra,56(sp)
+ 4f4:	7442                	ld	s0,48(sp)
+ 4f6:	74a2                	ld	s1,40(sp)
+ 4f8:	7902                	ld	s2,32(sp)
+ 4fa:	69e2                	ld	s3,24(sp)
+ 4fc:	6121                	addi	sp,sp,64
+ 4fe:	8082                	ret
     x = -xx;
- 4f0:	40b005bb          	negw	a1,a1
+ 500:	40b005bb          	negw	a1,a1
     neg = 1;
- 4f4:	4885                	li	a7,1
+ 504:	4885                	li	a7,1
     x = -xx;
- 4f6:	bf85                	j	466 <printint+0x1a>
+ 506:	bf85                	j	476 <printint+0x1a>
 
-00000000000004f8 <vprintf>:
+0000000000000508 <vprintf>:
 }
 
 // Print to the given fd. Only understands %d, %x, %p, %s.
 void
 vprintf(int fd, const char *fmt, va_list ap)
 {
- 4f8:	7119                	addi	sp,sp,-128
- 4fa:	fc86                	sd	ra,120(sp)
- 4fc:	f8a2                	sd	s0,112(sp)
- 4fe:	f4a6                	sd	s1,104(sp)
- 500:	f0ca                	sd	s2,96(sp)
- 502:	ecce                	sd	s3,88(sp)
- 504:	e8d2                	sd	s4,80(sp)
- 506:	e4d6                	sd	s5,72(sp)
- 508:	e0da                	sd	s6,64(sp)
- 50a:	fc5e                	sd	s7,56(sp)
- 50c:	f862                	sd	s8,48(sp)
- 50e:	f466                	sd	s9,40(sp)
- 510:	f06a                	sd	s10,32(sp)
- 512:	ec6e                	sd	s11,24(sp)
- 514:	0100                	addi	s0,sp,128
+ 508:	7119                	addi	sp,sp,-128
+ 50a:	fc86                	sd	ra,120(sp)
+ 50c:	f8a2                	sd	s0,112(sp)
+ 50e:	f4a6                	sd	s1,104(sp)
+ 510:	f0ca                	sd	s2,96(sp)
+ 512:	ecce                	sd	s3,88(sp)
+ 514:	e8d2                	sd	s4,80(sp)
+ 516:	e4d6                	sd	s5,72(sp)
+ 518:	e0da                	sd	s6,64(sp)
+ 51a:	fc5e                	sd	s7,56(sp)
+ 51c:	f862                	sd	s8,48(sp)
+ 51e:	f466                	sd	s9,40(sp)
+ 520:	f06a                	sd	s10,32(sp)
+ 522:	ec6e                	sd	s11,24(sp)
+ 524:	0100                	addi	s0,sp,128
   char *s;
   int c, i, state;
 
   state = 0;
   for(i = 0; fmt[i]; i++){
- 516:	0005c903          	lbu	s2,0(a1)
- 51a:	18090f63          	beqz	s2,6b8 <vprintf+0x1c0>
- 51e:	8aaa                	mv	s5,a0
- 520:	8b32                	mv	s6,a2
- 522:	00158493          	addi	s1,a1,1
+ 526:	0005c903          	lbu	s2,0(a1)
+ 52a:	18090f63          	beqz	s2,6c8 <vprintf+0x1c0>
+ 52e:	8aaa                	mv	s5,a0
+ 530:	8b32                	mv	s6,a2
+ 532:	00158493          	addi	s1,a1,1
   state = 0;
- 526:	4981                	li	s3,0
+ 536:	4981                	li	s3,0
       if(c == '%'){
         state = '%';
       } else {
         putc(fd, c);
       }
     } else if(state == '%'){
- 528:	02500a13          	li	s4,37
- 52c:	4c55                	li	s8,21
- 52e:	00000c97          	auipc	s9,0x0
- 532:	3cac8c93          	addi	s9,s9,970 # 8f8 <malloc+0x13c>
+ 538:	02500a13          	li	s4,37
+ 53c:	4c55                	li	s8,21
+ 53e:	00000c97          	auipc	s9,0x0
+ 542:	3cac8c93          	addi	s9,s9,970 # 908 <malloc+0x13c>
         printptr(fd, va_arg(ap, uint64));
       } else if(c == 's'){
         s = va_arg(ap, char*);
         if(s == 0)
           s = "(null)";
         while(*s != 0){
- 536:	02800d93          	li	s11,40
+ 546:	02800d93          	li	s11,40
   putc(fd, 'x');
- 53a:	4d41                	li	s10,16
+ 54a:	4d41                	li	s10,16
     putc(fd, digits[x >> (sizeof(uint64) * 8 - 4)]);
- 53c:	00000b97          	auipc	s7,0x0
- 540:	414b8b93          	addi	s7,s7,1044 # 950 <digits>
- 544:	a839                	j	562 <vprintf+0x6a>
+ 54c:	00000b97          	auipc	s7,0x0
+ 550:	414b8b93          	addi	s7,s7,1044 # 960 <digits>
+ 554:	a839                	j	572 <vprintf+0x6a>
         putc(fd, c);
- 546:	85ca                	mv	a1,s2
- 548:	8556                	mv	a0,s5
- 54a:	00000097          	auipc	ra,0x0
- 54e:	ee0080e7          	jalr	-288(ra) # 42a <putc>
- 552:	a019                	j	558 <vprintf+0x60>
+ 556:	85ca                	mv	a1,s2
+ 558:	8556                	mv	a0,s5
+ 55a:	00000097          	auipc	ra,0x0
+ 55e:	ee0080e7          	jalr	-288(ra) # 43a <putc>
+ 562:	a019                	j	568 <vprintf+0x60>
     } else if(state == '%'){
- 554:	01498d63          	beq	s3,s4,56e <vprintf+0x76>
+ 564:	01498d63          	beq	s3,s4,57e <vprintf+0x76>
   for(i = 0; fmt[i]; i++){
- 558:	0485                	addi	s1,s1,1
- 55a:	fff4c903          	lbu	s2,-1(s1)
- 55e:	14090d63          	beqz	s2,6b8 <vprintf+0x1c0>
+ 568:	0485                	addi	s1,s1,1
+ 56a:	fff4c903          	lbu	s2,-1(s1)
+ 56e:	14090d63          	beqz	s2,6c8 <vprintf+0x1c0>
     if(state == 0){
- 562:	fe0999e3          	bnez	s3,554 <vprintf+0x5c>
+ 572:	fe0999e3          	bnez	s3,564 <vprintf+0x5c>
       if(c == '%'){
- 566:	ff4910e3          	bne	s2,s4,546 <vprintf+0x4e>
+ 576:	ff4910e3          	bne	s2,s4,556 <vprintf+0x4e>
         state = '%';
- 56a:	89d2                	mv	s3,s4
- 56c:	b7f5                	j	558 <vprintf+0x60>
+ 57a:	89d2                	mv	s3,s4
+ 57c:	b7f5                	j	568 <vprintf+0x60>
       if(c == 'd'){
- 56e:	11490c63          	beq	s2,s4,686 <vprintf+0x18e>
- 572:	f9d9079b          	addiw	a5,s2,-99
- 576:	0ff7f793          	zext.b	a5,a5
- 57a:	10fc6e63          	bltu	s8,a5,696 <vprintf+0x19e>
- 57e:	f9d9079b          	addiw	a5,s2,-99
- 582:	0ff7f713          	zext.b	a4,a5
- 586:	10ec6863          	bltu	s8,a4,696 <vprintf+0x19e>
- 58a:	00271793          	slli	a5,a4,0x2
- 58e:	97e6                	add	a5,a5,s9
- 590:	439c                	lw	a5,0(a5)
- 592:	97e6                	add	a5,a5,s9
- 594:	8782                	jr	a5
+ 57e:	11490c63          	beq	s2,s4,696 <vprintf+0x18e>
+ 582:	f9d9079b          	addiw	a5,s2,-99
+ 586:	0ff7f793          	zext.b	a5,a5
+ 58a:	10fc6e63          	bltu	s8,a5,6a6 <vprintf+0x19e>
+ 58e:	f9d9079b          	addiw	a5,s2,-99
+ 592:	0ff7f713          	zext.b	a4,a5
+ 596:	10ec6863          	bltu	s8,a4,6a6 <vprintf+0x19e>
+ 59a:	00271793          	slli	a5,a4,0x2
+ 59e:	97e6                	add	a5,a5,s9
+ 5a0:	439c                	lw	a5,0(a5)
+ 5a2:	97e6                	add	a5,a5,s9
+ 5a4:	8782                	jr	a5
         printint(fd, va_arg(ap, int), 10, 1);
- 596:	008b0913          	addi	s2,s6,8
- 59a:	4685                	li	a3,1
- 59c:	4629                	li	a2,10
- 59e:	000b2583          	lw	a1,0(s6)
- 5a2:	8556                	mv	a0,s5
- 5a4:	00000097          	auipc	ra,0x0
- 5a8:	ea8080e7          	jalr	-344(ra) # 44c <printint>
- 5ac:	8b4a                	mv	s6,s2
+ 5a6:	008b0913          	addi	s2,s6,8
+ 5aa:	4685                	li	a3,1
+ 5ac:	4629                	li	a2,10
+ 5ae:	000b2583          	lw	a1,0(s6)
+ 5b2:	8556                	mv	a0,s5
+ 5b4:	00000097          	auipc	ra,0x0
+ 5b8:	ea8080e7          	jalr	-344(ra) # 45c <printint>
+ 5bc:	8b4a                	mv	s6,s2
       } else {
         // Unknown % sequence.  Print it to draw attention.
         putc(fd, '%');
         putc(fd, c);
       }
       state = 0;
- 5ae:	4981                	li	s3,0
- 5b0:	b765                	j	558 <vprintf+0x60>
+ 5be:	4981                	li	s3,0
+ 5c0:	b765                	j	568 <vprintf+0x60>
         printint(fd, va_arg(ap, uint64), 10, 0);
- 5b2:	008b0913          	addi	s2,s6,8
- 5b6:	4681                	li	a3,0
- 5b8:	4629                	li	a2,10
- 5ba:	000b2583          	lw	a1,0(s6)
- 5be:	8556                	mv	a0,s5
- 5c0:	00000097          	auipc	ra,0x0
- 5c4:	e8c080e7          	jalr	-372(ra) # 44c <printint>
- 5c8:	8b4a                	mv	s6,s2
+ 5c2:	008b0913          	addi	s2,s6,8
+ 5c6:	4681                	li	a3,0
+ 5c8:	4629                	li	a2,10
+ 5ca:	000b2583          	lw	a1,0(s6)
+ 5ce:	8556                	mv	a0,s5
+ 5d0:	00000097          	auipc	ra,0x0
+ 5d4:	e8c080e7          	jalr	-372(ra) # 45c <printint>
+ 5d8:	8b4a                	mv	s6,s2
       state = 0;
- 5ca:	4981                	li	s3,0
- 5cc:	b771                	j	558 <vprintf+0x60>
+ 5da:	4981                	li	s3,0
+ 5dc:	b771                	j	568 <vprintf+0x60>
         printint(fd, va_arg(ap, int), 16, 0);
- 5ce:	008b0913          	addi	s2,s6,8
- 5d2:	4681                	li	a3,0
- 5d4:	866a                	mv	a2,s10
- 5d6:	000b2583          	lw	a1,0(s6)
- 5da:	8556                	mv	a0,s5
- 5dc:	00000097          	auipc	ra,0x0
- 5e0:	e70080e7          	jalr	-400(ra) # 44c <printint>
- 5e4:	8b4a                	mv	s6,s2
+ 5de:	008b0913          	addi	s2,s6,8
+ 5e2:	4681                	li	a3,0
+ 5e4:	866a                	mv	a2,s10
+ 5e6:	000b2583          	lw	a1,0(s6)
+ 5ea:	8556                	mv	a0,s5
+ 5ec:	00000097          	auipc	ra,0x0
+ 5f0:	e70080e7          	jalr	-400(ra) # 45c <printint>
+ 5f4:	8b4a                	mv	s6,s2
       state = 0;
- 5e6:	4981                	li	s3,0
- 5e8:	bf85                	j	558 <vprintf+0x60>
+ 5f6:	4981                	li	s3,0
+ 5f8:	bf85                	j	568 <vprintf+0x60>
         printptr(fd, va_arg(ap, uint64));
- 5ea:	008b0793          	addi	a5,s6,8
- 5ee:	f8f43423          	sd	a5,-120(s0)
- 5f2:	000b3983          	ld	s3,0(s6)
+ 5fa:	008b0793          	addi	a5,s6,8
+ 5fe:	f8f43423          	sd	a5,-120(s0)
+ 602:	000b3983          	ld	s3,0(s6)
   putc(fd, '0');
- 5f6:	03000593          	li	a1,48
- 5fa:	8556                	mv	a0,s5
- 5fc:	00000097          	auipc	ra,0x0
- 600:	e2e080e7          	jalr	-466(ra) # 42a <putc>
+ 606:	03000593          	li	a1,48
+ 60a:	8556                	mv	a0,s5
+ 60c:	00000097          	auipc	ra,0x0
+ 610:	e2e080e7          	jalr	-466(ra) # 43a <putc>
   putc(fd, 'x');
- 604:	07800593          	li	a1,120
- 608:	8556                	mv	a0,s5
- 60a:	00000097          	auipc	ra,0x0
- 60e:	e20080e7          	jalr	-480(ra) # 42a <putc>
- 612:	896a                	mv	s2,s10
+ 614:	07800593          	li	a1,120
+ 618:	8556                	mv	a0,s5
+ 61a:	00000097          	auipc	ra,0x0
+ 61e:	e20080e7          	jalr	-480(ra) # 43a <putc>
+ 622:	896a                	mv	s2,s10
     putc(fd, digits[x >> (sizeof(uint64) * 8 - 4)]);
- 614:	03c9d793          	srli	a5,s3,0x3c
- 618:	97de                	add	a5,a5,s7
- 61a:	0007c583          	lbu	a1,0(a5)
- 61e:	8556                	mv	a0,s5
- 620:	00000097          	auipc	ra,0x0
- 624:	e0a080e7          	jalr	-502(ra) # 42a <putc>
+ 624:	03c9d793          	srli	a5,s3,0x3c
+ 628:	97de                	add	a5,a5,s7
+ 62a:	0007c583          	lbu	a1,0(a5)
+ 62e:	8556                	mv	a0,s5
+ 630:	00000097          	auipc	ra,0x0
+ 634:	e0a080e7          	jalr	-502(ra) # 43a <putc>
   for (i = 0; i < (sizeof(uint64) * 2); i++, x <<= 4)
- 628:	0992                	slli	s3,s3,0x4
- 62a:	397d                	addiw	s2,s2,-1
- 62c:	fe0914e3          	bnez	s2,614 <vprintf+0x11c>
+ 638:	0992                	slli	s3,s3,0x4
+ 63a:	397d                	addiw	s2,s2,-1
+ 63c:	fe0914e3          	bnez	s2,624 <vprintf+0x11c>
         printptr(fd, va_arg(ap, uint64));
- 630:	f8843b03          	ld	s6,-120(s0)
+ 640:	f8843b03          	ld	s6,-120(s0)
       state = 0;
- 634:	4981                	li	s3,0
- 636:	b70d                	j	558 <vprintf+0x60>
+ 644:	4981                	li	s3,0
+ 646:	b70d                	j	568 <vprintf+0x60>
         s = va_arg(ap, char*);
- 638:	008b0913          	addi	s2,s6,8
- 63c:	000b3983          	ld	s3,0(s6)
+ 648:	008b0913          	addi	s2,s6,8
+ 64c:	000b3983          	ld	s3,0(s6)
         if(s == 0)
- 640:	02098163          	beqz	s3,662 <vprintf+0x16a>
+ 650:	02098163          	beqz	s3,672 <vprintf+0x16a>
         while(*s != 0){
- 644:	0009c583          	lbu	a1,0(s3)
- 648:	c5ad                	beqz	a1,6b2 <vprintf+0x1ba>
+ 654:	0009c583          	lbu	a1,0(s3)
+ 658:	c5ad                	beqz	a1,6c2 <vprintf+0x1ba>
           putc(fd, *s);
- 64a:	8556                	mv	a0,s5
- 64c:	00000097          	auipc	ra,0x0
- 650:	dde080e7          	jalr	-546(ra) # 42a <putc>
+ 65a:	8556                	mv	a0,s5
+ 65c:	00000097          	auipc	ra,0x0
+ 660:	dde080e7          	jalr	-546(ra) # 43a <putc>
           s++;
- 654:	0985                	addi	s3,s3,1
+ 664:	0985                	addi	s3,s3,1
         while(*s != 0){
- 656:	0009c583          	lbu	a1,0(s3)
- 65a:	f9e5                	bnez	a1,64a <vprintf+0x152>
+ 666:	0009c583          	lbu	a1,0(s3)
+ 66a:	f9e5                	bnez	a1,65a <vprintf+0x152>
         s = va_arg(ap, char*);
- 65c:	8b4a                	mv	s6,s2
+ 66c:	8b4a                	mv	s6,s2
       state = 0;
- 65e:	4981                	li	s3,0
- 660:	bde5                	j	558 <vprintf+0x60>
+ 66e:	4981                	li	s3,0
+ 670:	bde5                	j	568 <vprintf+0x60>
           s = "(null)";
- 662:	00000997          	auipc	s3,0x0
- 666:	28e98993          	addi	s3,s3,654 # 8f0 <malloc+0x134>
+ 672:	00000997          	auipc	s3,0x0
+ 676:	28e98993          	addi	s3,s3,654 # 900 <malloc+0x134>
         while(*s != 0){
- 66a:	85ee                	mv	a1,s11
- 66c:	bff9                	j	64a <vprintf+0x152>
+ 67a:	85ee                	mv	a1,s11
+ 67c:	bff9                	j	65a <vprintf+0x152>
         putc(fd, va_arg(ap, uint));
- 66e:	008b0913          	addi	s2,s6,8
- 672:	000b4583          	lbu	a1,0(s6)
- 676:	8556                	mv	a0,s5
- 678:	00000097          	auipc	ra,0x0
- 67c:	db2080e7          	jalr	-590(ra) # 42a <putc>
- 680:	8b4a                	mv	s6,s2
-      state = 0;
- 682:	4981                	li	s3,0
- 684:	bdd1                	j	558 <vprintf+0x60>
-        putc(fd, c);
- 686:	85d2                	mv	a1,s4
- 688:	8556                	mv	a0,s5
- 68a:	00000097          	auipc	ra,0x0
- 68e:	da0080e7          	jalr	-608(ra) # 42a <putc>
+ 67e:	008b0913          	addi	s2,s6,8
+ 682:	000b4583          	lbu	a1,0(s6)
+ 686:	8556                	mv	a0,s5
+ 688:	00000097          	auipc	ra,0x0
+ 68c:	db2080e7          	jalr	-590(ra) # 43a <putc>
+ 690:	8b4a                	mv	s6,s2
       state = 0;
  692:	4981                	li	s3,0
- 694:	b5d1                	j	558 <vprintf+0x60>
-        putc(fd, '%');
+ 694:	bdd1                	j	568 <vprintf+0x60>
+        putc(fd, c);
  696:	85d2                	mv	a1,s4
  698:	8556                	mv	a0,s5
  69a:	00000097          	auipc	ra,0x0
- 69e:	d90080e7          	jalr	-624(ra) # 42a <putc>
+ 69e:	da0080e7          	jalr	-608(ra) # 43a <putc>
+      state = 0;
+ 6a2:	4981                	li	s3,0
+ 6a4:	b5d1                	j	568 <vprintf+0x60>
+        putc(fd, '%');
+ 6a6:	85d2                	mv	a1,s4
+ 6a8:	8556                	mv	a0,s5
+ 6aa:	00000097          	auipc	ra,0x0
+ 6ae:	d90080e7          	jalr	-624(ra) # 43a <putc>
         putc(fd, c);
- 6a2:	85ca                	mv	a1,s2
- 6a4:	8556                	mv	a0,s5
- 6a6:	00000097          	auipc	ra,0x0
- 6aa:	d84080e7          	jalr	-636(ra) # 42a <putc>
+ 6b2:	85ca                	mv	a1,s2
+ 6b4:	8556                	mv	a0,s5
+ 6b6:	00000097          	auipc	ra,0x0
+ 6ba:	d84080e7          	jalr	-636(ra) # 43a <putc>
       state = 0;
- 6ae:	4981                	li	s3,0
- 6b0:	b565                	j	558 <vprintf+0x60>
+ 6be:	4981                	li	s3,0
+ 6c0:	b565                	j	568 <vprintf+0x60>
         s = va_arg(ap, char*);
- 6b2:	8b4a                	mv	s6,s2
+ 6c2:	8b4a                	mv	s6,s2
       state = 0;
- 6b4:	4981                	li	s3,0
- 6b6:	b54d                	j	558 <vprintf+0x60>
+ 6c4:	4981                	li	s3,0
+ 6c6:	b54d                	j	568 <vprintf+0x60>
     }
   }
 }
- 6b8:	70e6                	ld	ra,120(sp)
- 6ba:	7446                	ld	s0,112(sp)
- 6bc:	74a6                	ld	s1,104(sp)
- 6be:	7906                	ld	s2,96(sp)
- 6c0:	69e6                	ld	s3,88(sp)
- 6c2:	6a46                	ld	s4,80(sp)
- 6c4:	6aa6                	ld	s5,72(sp)
- 6c6:	6b06                	ld	s6,64(sp)
- 6c8:	7be2                	ld	s7,56(sp)
- 6ca:	7c42                	ld	s8,48(sp)
- 6cc:	7ca2                	ld	s9,40(sp)
- 6ce:	7d02                	ld	s10,32(sp)
- 6d0:	6de2                	ld	s11,24(sp)
- 6d2:	6109                	addi	sp,sp,128
- 6d4:	8082                	ret
+ 6c8:	70e6                	ld	ra,120(sp)
+ 6ca:	7446                	ld	s0,112(sp)
+ 6cc:	74a6                	ld	s1,104(sp)
+ 6ce:	7906                	ld	s2,96(sp)
+ 6d0:	69e6                	ld	s3,88(sp)
+ 6d2:	6a46                	ld	s4,80(sp)
+ 6d4:	6aa6                	ld	s5,72(sp)
+ 6d6:	6b06                	ld	s6,64(sp)
+ 6d8:	7be2                	ld	s7,56(sp)
+ 6da:	7c42                	ld	s8,48(sp)
+ 6dc:	7ca2                	ld	s9,40(sp)
+ 6de:	7d02                	ld	s10,32(sp)
+ 6e0:	6de2                	ld	s11,24(sp)
+ 6e2:	6109                	addi	sp,sp,128
+ 6e4:	8082                	ret
 
-00000000000006d6 <fprintf>:
+00000000000006e6 <fprintf>:
 
 void
 fprintf(int fd, const char *fmt, ...)
 {
- 6d6:	715d                	addi	sp,sp,-80
- 6d8:	ec06                	sd	ra,24(sp)
- 6da:	e822                	sd	s0,16(sp)
- 6dc:	1000                	addi	s0,sp,32
- 6de:	e010                	sd	a2,0(s0)
- 6e0:	e414                	sd	a3,8(s0)
- 6e2:	e818                	sd	a4,16(s0)
- 6e4:	ec1c                	sd	a5,24(s0)
- 6e6:	03043023          	sd	a6,32(s0)
- 6ea:	03143423          	sd	a7,40(s0)
+ 6e6:	715d                	addi	sp,sp,-80
+ 6e8:	ec06                	sd	ra,24(sp)
+ 6ea:	e822                	sd	s0,16(sp)
+ 6ec:	1000                	addi	s0,sp,32
+ 6ee:	e010                	sd	a2,0(s0)
+ 6f0:	e414                	sd	a3,8(s0)
+ 6f2:	e818                	sd	a4,16(s0)
+ 6f4:	ec1c                	sd	a5,24(s0)
+ 6f6:	03043023          	sd	a6,32(s0)
+ 6fa:	03143423          	sd	a7,40(s0)
   va_list ap;
 
   va_start(ap, fmt);
- 6ee:	fe843423          	sd	s0,-24(s0)
+ 6fe:	fe843423          	sd	s0,-24(s0)
   vprintf(fd, fmt, ap);
- 6f2:	8622                	mv	a2,s0
- 6f4:	00000097          	auipc	ra,0x0
- 6f8:	e04080e7          	jalr	-508(ra) # 4f8 <vprintf>
-}
- 6fc:	60e2                	ld	ra,24(sp)
- 6fe:	6442                	ld	s0,16(sp)
- 700:	6161                	addi	sp,sp,80
- 702:	8082                	ret
+ 702:	8622                	mv	a2,s0
+ 704:	00000097          	auipc	ra,0x0
+ 708:	e04080e7          	jalr	-508(ra) # 508 <vprintf>
+}
+ 70c:	60e2                	ld	ra,24(sp)
+ 70e:	6442                	ld	s0,16(sp)
+ 710:	6161                	addi	sp,sp,80
+ 712:	8082                	ret
 
-0000000000000704 <printf>:
+0000000000000714 <printf>:
 
 void
 printf(const char *fmt, ...)
 {
- 704:	711d                	addi	sp,sp,-96
- 706:	ec06                	sd	ra,24(sp)
- 708:	e822                	sd	s0,16(sp)
- 70a:	1000                	addi	s0,sp,32
- 70c:	e40c                	sd	a1,8(s0)
- 70e:	e810                	sd	a2,16(s0)
- 710:	ec14                	sd	a3,24(s0)
- 712:	f018                	sd	a4,32(s0)
- 714:	f41c                	sd	a5,40(s0)
- 716:	03043823          	sd	a6,48(s0)
- 71a:	03143c23          	sd	a7,56(s0)
+ 714:	711d                	addi	sp,sp,-96
+ 716:	ec06                	sd	ra,24(sp)
+ 718:	e822                	sd	s0,16(sp)
+ 71a:	1000                	addi	s0,sp,32
+ 71c:	e40c                	sd	a1,8(s0)
+ 71e:	e810                	sd	a2,16(s0)
+ 720:	ec14                	sd	a3,24(s0)
+ 722:	f018                	sd	a4,32(s0)
+ 724:	f41c                	sd	a5,40(s0)
+ 726:	03043823          	sd	a6,48(s0)
+ 72a:	03143c23          	sd	a7,56(s0)
   va_list ap;
 
   va_start(ap, fmt);
- 71e:	00840613          	addi	a2,s0,8
- 722:	fec43423          	sd	a2,-24(s0)
+ 72e:	00840613          	addi	a2,s0,8
+ 732:	fec43423          	sd	a2,-24(s0)
   vprintf(1, fmt, ap);
- 726:	85aa                	mv	a1,a0
- 728:	4505                	li	a0,1
- 72a:	00000097          	auipc	ra,0x0
- 72e:	dce080e7          	jalr	-562(ra) # 4f8 <vprintf>
-}
- 732:	60e2                	ld	ra,24(sp)
- 734:	6442                	ld	s0,16(sp)
- 736:	6125                	addi	sp,sp,96
- 738:	8082                	ret
+ 736:	85aa                	mv	a1,a0
+ 738:	4505                	li	a0,1
+ 73a:	00000097          	auipc	ra,0x0
+ 73e:	dce080e7          	jalr	-562(ra) # 508 <vprintf>
+}
+ 742:	60e2                	ld	ra,24(sp)
+ 744:	6442                	ld	s0,16(sp)
+ 746:	6125                	addi	sp,sp,96
+ 748:	8082                	ret
 
-000000000000073a <free>:
+000000000000074a <free>:
 static Header base;
 static Header *freep;
 
 void
 free(void *ap)
 {
- 73a:	1141                	addi	sp,sp,-16
- 73c:	e422                	sd	s0,8(sp)
- 73e:	0800                	addi	s0,sp,16
+ 74a:	1141                	addi	sp,sp,-16
+ 74c:	e422                	sd	s0,8(sp)
+ 74e:	0800                	addi	s0,sp,16
   Header *bp, *p;
 
   bp = (Header*)ap - 1;
- 740:	ff050693          	addi	a3,a0,-16
+ 750:	ff050693          	addi	a3,a0,-16
   for(p = freep; !(bp > p && bp < p->s.ptr); p = p->s.ptr)
- 744:	00000797          	auipc	a5,0x0
- 748:	2247b783          	ld	a5,548(a5) # 968 <freep>
- 74c:	a02d                	j	776 <free+0x3c>
+ 754:	00000797          	auipc	a5,0x0
+ 758:	2247b783          	ld	a5,548(a5) # 978 <freep>
+ 75c:	a02d                	j	786 <free+0x3c>
     if(p >= p->s.ptr && (bp > p || bp < p->s.ptr))
       break;
   if(bp + bp->s.size == p->s.ptr){
     bp->s.size += p->s.ptr->s.size;
- 74e:	4618                	lw	a4,8(a2)
- 750:	9f2d                	addw	a4,a4,a1
- 752:	fee52c23          	sw	a4,-8(a0)
+ 75e:	4618                	lw	a4,8(a2)
+ 760:	9f2d                	addw	a4,a4,a1
+ 762:	fee52c23          	sw	a4,-8(a0)
     bp->s.ptr = p->s.ptr->s.ptr;
- 756:	6398                	ld	a4,0(a5)
- 758:	6310                	ld	a2,0(a4)
- 75a:	a83d                	j	798 <free+0x5e>
+ 766:	6398                	ld	a4,0(a5)
+ 768:	6310                	ld	a2,0(a4)
+ 76a:	a83d                	j	7a8 <free+0x5e>
   } else
     bp->s.ptr = p->s.ptr;
   if(p + p->s.size == bp){
     p->s.size += bp->s.size;
- 75c:	ff852703          	lw	a4,-8(a0)
- 760:	9f31                	addw	a4,a4,a2
- 762:	c798                	sw	a4,8(a5)
+ 76c:	ff852703          	lw	a4,-8(a0)
+ 770:	9f31                	addw	a4,a4,a2
+ 772:	c798                	sw	a4,8(a5)
     p->s.ptr = bp->s.ptr;
- 764:	ff053683          	ld	a3,-16(a0)
- 768:	a091                	j	7ac <free+0x72>
+ 774:	ff053683          	ld	a3,-16(a0)
+ 778:	a091                	j	7bc <free+0x72>
     if(p >= p->s.ptr && (bp > p || bp < p->s.ptr))
- 76a:	6398                	ld	a4,0(a5)
- 76c:	00e7e463          	bltu	a5,a4,774 <free+0x3a>
- 770:	00e6ea63          	bltu	a3,a4,784 <free+0x4a>
+ 77a:	6398                	ld	a4,0(a5)
+ 77c:	00e7e463          	bltu	a5,a4,784 <free+0x3a>
+ 780:	00e6ea63          	bltu	a3,a4,794 <free+0x4a>
 {
- 774:	87ba                	mv	a5,a4
+ 784:	87ba                	mv	a5,a4
   for(p = freep; !(bp > p && bp < p->s.ptr); p = p->s.ptr)
- 776:	fed7fae3          	bgeu	a5,a3,76a <free+0x30>
- 77a:	6398                	ld	a4,0(a5)
- 77c:	00e6e463          	bltu	a3,a4,784 <free+0x4a>
+ 786:	fed7fae3          	bgeu	a5,a3,77a <free+0x30>
+ 78a:	6398                	ld	a4,0(a5)
+ 78c:	00e6e463          	bltu	a3,a4,794 <free+0x4a>
     if(p >= p->s.ptr && (bp > p || bp < p->s.ptr))
- 780:	fee7eae3          	bltu	a5,a4,774 <free+0x3a>
+ 790:	fee7eae3          	bltu	a5,a4,784 <free+0x3a>
   if(bp + bp->s.size == p->s.ptr){
- 784:	ff852583          	lw	a1,-8(a0)
- 788:	6390                	ld	a2,0(a5)
- 78a:	02059813          	slli	a6,a1,0x20
- 78e:	01c85713          	srli	a4,a6,0x1c
- 792:	9736                	add	a4,a4,a3
- 794:	fae60de3          	beq	a2,a4,74e <free+0x14>
+ 794:	ff852583          	lw	a1,-8(a0)
+ 798:	6390                	ld	a2,0(a5)
+ 79a:	02059813          	slli	a6,a1,0x20
+ 79e:	01c85713          	srli	a4,a6,0x1c
+ 7a2:	9736                	add	a4,a4,a3
+ 7a4:	fae60de3          	beq	a2,a4,75e <free+0x14>
     bp->s.ptr = p->s.ptr->s.ptr;
- 798:	fec53823          	sd	a2,-16(a0)
+ 7a8:	fec53823          	sd	a2,-16(a0)
   if(p + p->s.size == bp){
- 79c:	4790                	lw	a2,8(a5)
- 79e:	02061593          	slli	a1,a2,0x20
- 7a2:	01c5d713          	srli	a4,a1,0x1c
- 7a6:	973e                	add	a4,a4,a5
- 7a8:	fae68ae3          	beq	a3,a4,75c <free+0x22>
+ 7ac:	4790                	lw	a2,8(a5)
+ 7ae:	02061593          	slli	a1,a2,0x20
+ 7b2:	01c5d713          	srli	a4,a1,0x1c
+ 7b6:	973e                	add	a4,a4,a5
+ 7b8:	fae68ae3          	beq	a3,a4,76c <free+0x22>
     p->s.ptr = bp->s.ptr;
- 7ac:	e394                	sd	a3,0(a5)
+ 7bc:	e394                	sd	a3,0(a5)
   } else
     p->s.ptr = bp;
   freep = p;
- 7ae:	00000717          	auipc	a4,0x0
- 7b2:	1af73d23          	sd	a5,442(a4) # 968 <freep>
+ 7be:	00000717          	auipc	a4,0x0
+ 7c2:	1af73d23          	sd	a5,442(a4) # 978 <freep>
 }
- 7b6:	6422                	ld	s0,8(sp)
- 7b8:	0141                	addi	sp,sp,16
- 7ba:	8082                	ret
+ 7c6:	6422                	ld	s0,8(sp)
+ 7c8:	0141                	addi	sp,sp,16
+ 7ca:	8082                	ret
 
-00000000000007bc <malloc>:
+00000000000007cc <malloc>:
   return freep;
 }
 
 void*
 malloc(uint nbytes)
 {
- 7bc:	7139                	addi	sp,sp,-64
- 7be:	fc06                	sd	ra,56(sp)
- 7c0:	f822                	sd	s0,48(sp)
- 7c2:	f426                	sd	s1,40(sp)
- 7c4:	f04a                	sd	s2,32(sp)
- 7c6:	ec4e                	sd	s3,24(sp)
- 7c8:	e852                	sd	s4,16(sp)
- 7ca:	e456                	sd	s5,8(sp)
- 7cc:	e05a                	sd	s6,0(sp)
- 7ce:	0080                	addi	s0,sp,64
+ 7cc:	7139                	addi	sp,sp,-64
+ 7ce:	fc06                	sd	ra,56(sp)
+ 7d0:	f822                	sd	s0,48(sp)
+ 7d2:	f426                	sd	s1,40(sp)
+ 7d4:	f04a                	sd	s2,32(sp)
+ 7d6:	ec4e                	sd	s3,24(sp)
+ 7d8:	e852                	sd	s4,16(sp)
+ 7da:	e456                	sd	s5,8(sp)
+ 7dc:	e05a                	sd	s6,0(sp)
+ 7de:	0080                	addi	s0,sp,64
   Header *p, *prevp;
   uint nunits;
 
   nunits = (nbytes + sizeof(Header) - 1)/sizeof(Header) + 1;
- 7d0:	02051493          	slli	s1,a0,0x20
- 7d4:	9081                	srli	s1,s1,0x20
- 7d6:	04bd                	addi	s1,s1,15
- 7d8:	8091                	srli	s1,s1,0x4
- 7da:	0014899b          	addiw	s3,s1,1
- 7de:	0485                	addi	s1,s1,1
+ 7e0:	02051493          	slli	s1,a0,0x20
+ 7e4:	9081                	srli	s1,s1,0x20
+ 7e6:	04bd                	addi	s1,s1,15
+ 7e8:	8091                	srli	s1,s1,0x4
+ 7ea:	0014899b          	addiw	s3,s1,1
+ 7ee:	0485                	addi	s1,s1,1
   if((prevp = freep) == 0){
- 7e0:	00000517          	auipc	a0,0x0
- 7e4:	18853503          	ld	a0,392(a0) # 968 <freep>
- 7e8:	c515                	beqz	a0,814 <malloc+0x58>
+ 7f0:	00000517          	auipc	a0,0x0
+ 7f4:	18853503          	ld	a0,392(a0) # 978 <freep>
+ 7f8:	c515                	beqz	a0,824 <malloc+0x58>
     base.s.ptr = freep = prevp = &base;
     base.s.size = 0;
   }
   for(p = prevp->s.ptr; ; prevp = p, p = p->s.ptr){
- 7ea:	611c                	ld	a5,0(a0)
+ 7fa:	611c                	ld	a5,0(a0)
     if(p->s.size >= nunits){
- 7ec:	4798                	lw	a4,8(a5)
- 7ee:	02977f63          	bgeu	a4,s1,82c <malloc+0x70>
- 7f2:	8a4e                	mv	s4,s3
- 7f4:	0009871b          	sext.w	a4,s3
- 7f8:	6685                	lui	a3,0x1
- 7fa:	00d77363          	bgeu	a4,a3,800 <malloc+0x44>
- 7fe:	6a05                	lui	s4,0x1
- 800:	000a0b1b          	sext.w	s6,s4
+ 7fc:	4798                	lw	a4,8(a5)
+ 7fe:	02977f63          	bgeu	a4,s1,83c <malloc+0x70>
+ 802:	8a4e                	mv	s4,s3
+ 804:	0009871b          	sext.w	a4,s3
+ 808:	6685                	lui	a3,0x1
+ 80a:	00d77363          	bgeu	a4,a3,810 <malloc+0x44>
+ 80e:	6a05                	lui	s4,0x1
+ 810:	000a0b1b          	sext.w	s6,s4
   p = sbrk(nu * sizeof(Header));
- 804:	004a1a1b          	slliw	s4,s4,0x4
+ 814:	004a1a1b          	slliw	s4,s4,0x4
         p->s.size = nunits;
       }
       freep = prevp;
       return (void*)(p + 1);
     }
     if(p == freep)
- 808:	00000917          	auipc	s2,0x0
- 80c:	16090913          	addi	s2,s2,352 # 968 <freep>
+ 818:	00000917          	auipc	s2,0x0
+ 81c:	16090913          	addi	s2,s2,352 # 978 <freep>
   if(p == (char*)-1)
- 810:	5afd                	li	s5,-1
- 812:	a895                	j	886 <malloc+0xca>
+ 820:	5afd                	li	s5,-1
+ 822:	a895                	j	896 <malloc+0xca>
     base.s.ptr = freep = prevp = &base;
- 814:	00000797          	auipc	a5,0x0
- 818:	35c78793          	addi	a5,a5,860 # b70 <base>
- 81c:	00000717          	auipc	a4,0x0
- 820:	14f73623          	sd	a5,332(a4) # 968 <freep>
- 824:	e39c                	sd	a5,0(a5)
+ 824:	00000797          	auipc	a5,0x0
+ 828:	35c78793          	addi	a5,a5,860 # b80 <base>
+ 82c:	00000717          	auipc	a4,0x0
+ 830:	14f73623          	sd	a5,332(a4) # 978 <freep>
+ 834:	e39c                	sd	a5,0(a5)
     base.s.size = 0;
- 826:	0007a423          	sw	zero,8(a5)
+ 836:	0007a423          	sw	zero,8(a5)
     if(p->s.size >= nunits){
- 82a:	b7e1                	j	7f2 <malloc+0x36>
+ 83a:	b7e1                	j	802 <malloc+0x36>
       if(p->s.size == nunits)
- 82c:	02e48c63          	beq	s1,a4,864 <malloc+0xa8>
+ 83c:	02e48c63          	beq	s1,a4,874 <malloc+0xa8>
         p->s.size -= nunits;
- 830:	4137073b          	subw	a4,a4,s3
- 834:	c798                	sw	a4,8(a5)
+ 840:	4137073b          	subw	a4,a4,s3
+ 844:	c798                	sw	a4,8(a5)
         p += p->s.size;
- 836:	02071693          	slli	a3,a4,0x20
- 83a:	01c6d713          	srli	a4,a3,0x1c
- 83e:	97ba                	add	a5,a5,a4
+ 846:	02071693          	slli	a3,a4,0x20
+ 84a:	01c6d713          	srli	a4,a3,0x1c
+ 84e:	97ba                	add	a5,a5,a4
         p->s.size = nunits;
- 840:	0137a423          	sw	s3,8(a5)
+ 850:	0137a423          	sw	s3,8(a5)
       freep = prevp;
- 844:	00000717          	auipc	a4,0x0
- 848:	12a73223          	sd	a0,292(a4) # 968 <freep>
+ 854:	00000717          	auipc	a4,0x0
+ 858:	12a73223          	sd	a0,292(a4) # 978 <freep>
       return (void*)(p + 1);
- 84c:	01078513          	addi	a0,a5,16
+ 85c:	01078513          	addi	a0,a5,16
       if((p = morecore(nunits)) == 0)
         return 0;
   }
 }
- 850:	70e2                	ld	ra,56(sp)
- 852:	7442                	ld	s0,48(sp)
- 854:	74a2                	ld	s1,40(sp)
- 856:	7902                	ld	s2,32(sp)
- 858:	69e2                	ld	s3,24(sp)
- 85a:	6a42                	ld	s4,16(sp)
- 85c:	6aa2                	ld	s5,8(sp)
- 85e:	6b02                	ld	s6,0(sp)
- 860:	6121                	addi	sp,sp,64
- 862:	8082                	ret
+ 860:	70e2                	ld	ra,56(sp)
+ 862:	7442                	ld	s0,48(sp)
+ 864:	74a2                	ld	s1,40(sp)
+ 866:	7902                	ld	s2,32(sp)
+ 868:	69e2                	ld	s3,24(sp)
+ 86a:	6a42                	ld	s4,16(sp)
+ 86c:	6aa2                	ld	s5,8(sp)
+ 86e:	6b02                	ld	s6,0(sp)
+ 870:	6121                	addi	sp,sp,64
+ 872:	8082                	ret
         prevp->s.ptr = p->s.ptr;
- 864:	6398                	ld	a4,0(a5)
- 866:	e118                	sd	a4,0(a0)
- 868:	bff1                	j	844 <malloc+0x88>
+ 874:	6398                	ld	a4,0(a5)
+ 876:	e118                	sd	a4,0(a0)
+ 878:	bff1                	j	854 <malloc+0x88>
   hp->s.size = nu;
- 86a:	01652423          	sw	s6,8(a0)
+ 87a:	01652423          	sw	s6,8(a0)
   free((void*)(hp + 1));
- 86e:	0541                	addi	a0,a0,16
- 870:	00000097          	auipc	ra,0x0
- 874:	eca080e7          	jalr	-310(ra) # 73a <free>
+ 87e:	0541                	addi	a0,a0,16
+ 880:	00000097          	auipc	ra,0x0
+ 884:	eca080e7          	jalr	-310(ra) # 74a <free>
   return freep;
- 878:	00093503          	ld	a0,0(s2)
+ 888:	00093503          	ld	a0,0(s2)
       if((p = morecore(nunits)) == 0)
- 87c:	d971                	beqz	a0,850 <malloc+0x94>
+ 88c:	d971                	beqz	a0,860 <malloc+0x94>
   for(p = prevp->s.ptr; ; prevp = p, p = p->s.ptr){
- 87e:	611c                	ld	a5,0(a0)
+ 88e:	611c                	ld	a5,0(a0)
     if(p->s.size >= nunits){
- 880:	4798                	lw	a4,8(a5)
- 882:	fa9775e3          	bgeu	a4,s1,82c <malloc+0x70>
+ 890:	4798                	lw	a4,8(a5)
+ 892:	fa9775e3          	bgeu	a4,s1,83c <malloc+0x70>
     if(p == freep)
- 886:	00093703          	ld	a4,0(s2)
- 88a:	853e                	mv	a0,a5
- 88c:	fef719e3          	bne	a4,a5,87e <malloc+0xc2>
+ 896:	00093703          	ld	a4,0(s2)
+ 89a:	853e                	mv	a0,a5
+ 89c:	fef719e3          	bne	a4,a5,88e <malloc+0xc2>
   p = sbrk(nu * sizeof(Header));
- 890:	8552                	mv	a0,s4
- 892:	00000097          	auipc	ra,0x0
- 896:	b80080e7          	jalr	-1152(ra) # 412 <sbrk>
+ 8a0:	8552                	mv	a0,s4
+ 8a2:	00000097          	auipc	ra,0x0
+ 8a6:	b70080e7          	jalr	-1168(ra) # 412 <sbrk>
   if(p == (char*)-1)
- 89a:	fd5518e3          	bne	a0,s5,86a <malloc+0xae>
+ 8aa:	fd5518e3          	bne	a0,s5,87a <malloc+0xae>
         return 0;
- 89e:	4501                	li	a0,0
- 8a0:	bf45                	j	850 <malloc+0x94>
+ 8ae:	4501                	li	a0,0
+ 8b0:	bf45                	j	860 <malloc+0x94>
Binary files ./user/cat.o and ../xv6-labs-2021/user/cat.o differ
diff -urN ./user/cat.sym ../xv6-labs-2021/user/cat.sym
--- ./user/cat.sym	2021-12-05 17:54:42.000000000 +0800
+++ ../xv6-labs-2021/user/cat.sym	2021-11-26 14:46:16.000000000 +0800
@@ -1,7 +1,7 @@
 0000000000000000 .text
-00000000000008a8 .rodata
-0000000000000968 .sbss
-0000000000000970 .bss
+00000000000008b8 .rodata
+0000000000000978 .sbss
+0000000000000980 .bss
 0000000000000000 .comment
 0000000000000000 .riscv.attributes
 0000000000000000 .debug_aranges
@@ -16,30 +16,32 @@
 0000000000000000 cat.c
 0000000000000000 ulib.c
 0000000000000000 printf.c
-000000000000042a putc
-000000000000044c printint
-0000000000000950 digits
+000000000000043a putc
+000000000000045c printint
+0000000000000960 digits
 0000000000000000 umalloc.c
-0000000000000968 freep
-0000000000000b70 base
+0000000000000978 freep
+0000000000000b80 base
 000000000000011e strcpy
-0000000000000704 printf
-0000000000001161 __global_pointer$
+0000000000000714 printf
+0000000000001171 __global_pointer$
 00000000000002d8 memmove
 00000000000003d2 mknod
+000000000000042a trace
 00000000000001d6 gets
-0000000000000961 __SDATA_BEGIN__
+0000000000000971 __SDATA_BEGIN__
 000000000000040a getpid
 000000000000036a memcpy
 0000000000000000 cat
-00000000000007bc malloc
+00000000000007cc malloc
 000000000000041a sleep
+0000000000000432 sysinfo
 000000000000039a pipe
 00000000000003aa write
 00000000000003e2 fstat
-00000000000006d6 fprintf
+00000000000006e6 fprintf
 00000000000003ba kill
-00000000000004f8 vprintf
+0000000000000508 vprintf
 00000000000003fa chdir
 00000000000003c2 exec
 0000000000000392 wait
@@ -47,19 +49,19 @@
 00000000000003da unlink
 0000000000000330 memcmp
 0000000000000382 fork
-0000000000000b80 __BSS_END__
+0000000000000b90 __BSS_END__
 0000000000000412 sbrk
 0000000000000422 uptime
-0000000000000961 __bss_start
+0000000000000971 __bss_start
 0000000000000190 memset
 000000000000008a main
 000000000000013a strcmp
 0000000000000402 dup
-0000000000000970 buf
-0000000000000961 __DATA_BEGIN__
+0000000000000980 buf
+0000000000000971 __DATA_BEGIN__
 000000000000024a stat
-0000000000000961 _edata
-0000000000000b80 _end
+0000000000000971 _edata
+0000000000000b90 _end
 00000000000003ea link
 000000000000038a exit
 0000000000000290 atoi
@@ -68,4 +70,4 @@
 00000000000001b2 strchr
 00000000000003f2 mkdir
 00000000000003b2 close
-000000000000073a free
+000000000000074a free
diff -urN ./user/echo.asm ../xv6-labs-2021/user/echo.asm
--- ./user/echo.asm	2021-12-05 17:54:42.000000000 +0800
+++ ../xv6-labs-2021/user/echo.asm	2021-11-26 14:46:16.000000000 +0800
@@ -34,7 +34,7 @@
     if(i + 1 < argc){
       write(1, " ", 1);
   2a:	00000a17          	auipc	s4,0x0
-  2e:	7dea0a13          	addi	s4,s4,2014 # 808 <malloc+0xe6>
+  2e:	7eea0a13          	addi	s4,s4,2030 # 818 <malloc+0xe6>
     write(1, argv[i], strlen(argv[i]));
   32:	0004b903          	ld	s2,0(s1)
   36:	854a                	mv	a0,s2
@@ -60,7 +60,7 @@
       write(1, "\n", 1);
   66:	4605                	li	a2,1
   68:	00000597          	auipc	a1,0x0
-  6c:	7a858593          	addi	a1,a1,1960 # 810 <malloc+0xee>
+  6c:	7b858593          	addi	a1,a1,1976 # 820 <malloc+0xee>
   70:	4505                	li	a0,1
   72:	00000097          	auipc	ra,0x0
   76:	29e080e7          	jalr	670(ra) # 310 <write>
@@ -702,632 +702,652 @@
  ret
  38e:	8082                	ret
 
-0000000000000390 <putc>:
+0000000000000390 <trace>:
+.global trace
+trace:
+ li a7, SYS_trace
+ 390:	48d9                	li	a7,22
+ ecall
+ 392:	00000073          	ecall
+ ret
+ 396:	8082                	ret
+
+0000000000000398 <sysinfo>:
+.global sysinfo
+sysinfo:
+ li a7, SYS_sysinfo
+ 398:	48dd                	li	a7,23
+ ecall
+ 39a:	00000073          	ecall
+ ret
+ 39e:	8082                	ret
+
+00000000000003a0 <putc>:
 
 static char digits[] = "0123456789ABCDEF";
 
 static void
 putc(int fd, char c)
 {
- 390:	1101                	addi	sp,sp,-32
- 392:	ec06                	sd	ra,24(sp)
- 394:	e822                	sd	s0,16(sp)
- 396:	1000                	addi	s0,sp,32
- 398:	feb407a3          	sb	a1,-17(s0)
+ 3a0:	1101                	addi	sp,sp,-32
+ 3a2:	ec06                	sd	ra,24(sp)
+ 3a4:	e822                	sd	s0,16(sp)
+ 3a6:	1000                	addi	s0,sp,32
+ 3a8:	feb407a3          	sb	a1,-17(s0)
   write(fd, &c, 1);
- 39c:	4605                	li	a2,1
- 39e:	fef40593          	addi	a1,s0,-17
- 3a2:	00000097          	auipc	ra,0x0
- 3a6:	f6e080e7          	jalr	-146(ra) # 310 <write>
+ 3ac:	4605                	li	a2,1
+ 3ae:	fef40593          	addi	a1,s0,-17
+ 3b2:	00000097          	auipc	ra,0x0
+ 3b6:	f5e080e7          	jalr	-162(ra) # 310 <write>
 }
- 3aa:	60e2                	ld	ra,24(sp)
- 3ac:	6442                	ld	s0,16(sp)
- 3ae:	6105                	addi	sp,sp,32
- 3b0:	8082                	ret
+ 3ba:	60e2                	ld	ra,24(sp)
+ 3bc:	6442                	ld	s0,16(sp)
+ 3be:	6105                	addi	sp,sp,32
+ 3c0:	8082                	ret
 
-00000000000003b2 <printint>:
+00000000000003c2 <printint>:
 
 static void
 printint(int fd, int xx, int base, int sgn)
 {
- 3b2:	7139                	addi	sp,sp,-64
- 3b4:	fc06                	sd	ra,56(sp)
- 3b6:	f822                	sd	s0,48(sp)
- 3b8:	f426                	sd	s1,40(sp)
- 3ba:	f04a                	sd	s2,32(sp)
- 3bc:	ec4e                	sd	s3,24(sp)
- 3be:	0080                	addi	s0,sp,64
- 3c0:	84aa                	mv	s1,a0
+ 3c2:	7139                	addi	sp,sp,-64
+ 3c4:	fc06                	sd	ra,56(sp)
+ 3c6:	f822                	sd	s0,48(sp)
+ 3c8:	f426                	sd	s1,40(sp)
+ 3ca:	f04a                	sd	s2,32(sp)
+ 3cc:	ec4e                	sd	s3,24(sp)
+ 3ce:	0080                	addi	s0,sp,64
+ 3d0:	84aa                	mv	s1,a0
   char buf[16];
   int i, neg;
   uint x;
 
   neg = 0;
   if(sgn && xx < 0){
- 3c2:	c299                	beqz	a3,3c8 <printint+0x16>
- 3c4:	0805c963          	bltz	a1,456 <printint+0xa4>
+ 3d2:	c299                	beqz	a3,3d8 <printint+0x16>
+ 3d4:	0805c963          	bltz	a1,466 <printint+0xa4>
     neg = 1;
     x = -xx;
   } else {
     x = xx;
- 3c8:	2581                	sext.w	a1,a1
+ 3d8:	2581                	sext.w	a1,a1
   neg = 0;
- 3ca:	4881                	li	a7,0
- 3cc:	fc040693          	addi	a3,s0,-64
+ 3da:	4881                	li	a7,0
+ 3dc:	fc040693          	addi	a3,s0,-64
   }
 
   i = 0;
- 3d0:	4701                	li	a4,0
+ 3e0:	4701                	li	a4,0
   do{
     buf[i++] = digits[x % base];
- 3d2:	2601                	sext.w	a2,a2
- 3d4:	00000517          	auipc	a0,0x0
- 3d8:	4a450513          	addi	a0,a0,1188 # 878 <digits>
- 3dc:	883a                	mv	a6,a4
- 3de:	2705                	addiw	a4,a4,1
- 3e0:	02c5f7bb          	remuw	a5,a1,a2
- 3e4:	1782                	slli	a5,a5,0x20
- 3e6:	9381                	srli	a5,a5,0x20
- 3e8:	97aa                	add	a5,a5,a0
- 3ea:	0007c783          	lbu	a5,0(a5)
- 3ee:	00f68023          	sb	a5,0(a3)
+ 3e2:	2601                	sext.w	a2,a2
+ 3e4:	00000517          	auipc	a0,0x0
+ 3e8:	4a450513          	addi	a0,a0,1188 # 888 <digits>
+ 3ec:	883a                	mv	a6,a4
+ 3ee:	2705                	addiw	a4,a4,1
+ 3f0:	02c5f7bb          	remuw	a5,a1,a2
+ 3f4:	1782                	slli	a5,a5,0x20
+ 3f6:	9381                	srli	a5,a5,0x20
+ 3f8:	97aa                	add	a5,a5,a0
+ 3fa:	0007c783          	lbu	a5,0(a5)
+ 3fe:	00f68023          	sb	a5,0(a3)
   }while((x /= base) != 0);
- 3f2:	0005879b          	sext.w	a5,a1
- 3f6:	02c5d5bb          	divuw	a1,a1,a2
- 3fa:	0685                	addi	a3,a3,1
- 3fc:	fec7f0e3          	bgeu	a5,a2,3dc <printint+0x2a>
+ 402:	0005879b          	sext.w	a5,a1
+ 406:	02c5d5bb          	divuw	a1,a1,a2
+ 40a:	0685                	addi	a3,a3,1
+ 40c:	fec7f0e3          	bgeu	a5,a2,3ec <printint+0x2a>
   if(neg)
- 400:	00088c63          	beqz	a7,418 <printint+0x66>
+ 410:	00088c63          	beqz	a7,428 <printint+0x66>
     buf[i++] = '-';
- 404:	fd070793          	addi	a5,a4,-48
- 408:	00878733          	add	a4,a5,s0
- 40c:	02d00793          	li	a5,45
- 410:	fef70823          	sb	a5,-16(a4)
- 414:	0028071b          	addiw	a4,a6,2
+ 414:	fd070793          	addi	a5,a4,-48
+ 418:	00878733          	add	a4,a5,s0
+ 41c:	02d00793          	li	a5,45
+ 420:	fef70823          	sb	a5,-16(a4)
+ 424:	0028071b          	addiw	a4,a6,2
 
   while(--i >= 0)
- 418:	02e05863          	blez	a4,448 <printint+0x96>
- 41c:	fc040793          	addi	a5,s0,-64
- 420:	00e78933          	add	s2,a5,a4
- 424:	fff78993          	addi	s3,a5,-1
- 428:	99ba                	add	s3,s3,a4
- 42a:	377d                	addiw	a4,a4,-1
- 42c:	1702                	slli	a4,a4,0x20
- 42e:	9301                	srli	a4,a4,0x20
- 430:	40e989b3          	sub	s3,s3,a4
+ 428:	02e05863          	blez	a4,458 <printint+0x96>
+ 42c:	fc040793          	addi	a5,s0,-64
+ 430:	00e78933          	add	s2,a5,a4
+ 434:	fff78993          	addi	s3,a5,-1
+ 438:	99ba                	add	s3,s3,a4
+ 43a:	377d                	addiw	a4,a4,-1
+ 43c:	1702                	slli	a4,a4,0x20
+ 43e:	9301                	srli	a4,a4,0x20
+ 440:	40e989b3          	sub	s3,s3,a4
     putc(fd, buf[i]);
- 434:	fff94583          	lbu	a1,-1(s2)
- 438:	8526                	mv	a0,s1
- 43a:	00000097          	auipc	ra,0x0
- 43e:	f56080e7          	jalr	-170(ra) # 390 <putc>
+ 444:	fff94583          	lbu	a1,-1(s2)
+ 448:	8526                	mv	a0,s1
+ 44a:	00000097          	auipc	ra,0x0
+ 44e:	f56080e7          	jalr	-170(ra) # 3a0 <putc>
   while(--i >= 0)
- 442:	197d                	addi	s2,s2,-1
- 444:	ff3918e3          	bne	s2,s3,434 <printint+0x82>
+ 452:	197d                	addi	s2,s2,-1
+ 454:	ff3918e3          	bne	s2,s3,444 <printint+0x82>
 }
- 448:	70e2                	ld	ra,56(sp)
- 44a:	7442                	ld	s0,48(sp)
- 44c:	74a2                	ld	s1,40(sp)
- 44e:	7902                	ld	s2,32(sp)
- 450:	69e2                	ld	s3,24(sp)
- 452:	6121                	addi	sp,sp,64
- 454:	8082                	ret
+ 458:	70e2                	ld	ra,56(sp)
+ 45a:	7442                	ld	s0,48(sp)
+ 45c:	74a2                	ld	s1,40(sp)
+ 45e:	7902                	ld	s2,32(sp)
+ 460:	69e2                	ld	s3,24(sp)
+ 462:	6121                	addi	sp,sp,64
+ 464:	8082                	ret
     x = -xx;
- 456:	40b005bb          	negw	a1,a1
+ 466:	40b005bb          	negw	a1,a1
     neg = 1;
- 45a:	4885                	li	a7,1
+ 46a:	4885                	li	a7,1
     x = -xx;
- 45c:	bf85                	j	3cc <printint+0x1a>
+ 46c:	bf85                	j	3dc <printint+0x1a>
 
-000000000000045e <vprintf>:
+000000000000046e <vprintf>:
 }
 
 // Print to the given fd. Only understands %d, %x, %p, %s.
 void
 vprintf(int fd, const char *fmt, va_list ap)
 {
- 45e:	7119                	addi	sp,sp,-128
- 460:	fc86                	sd	ra,120(sp)
- 462:	f8a2                	sd	s0,112(sp)
- 464:	f4a6                	sd	s1,104(sp)
- 466:	f0ca                	sd	s2,96(sp)
- 468:	ecce                	sd	s3,88(sp)
- 46a:	e8d2                	sd	s4,80(sp)
- 46c:	e4d6                	sd	s5,72(sp)
- 46e:	e0da                	sd	s6,64(sp)
- 470:	fc5e                	sd	s7,56(sp)
- 472:	f862                	sd	s8,48(sp)
- 474:	f466                	sd	s9,40(sp)
- 476:	f06a                	sd	s10,32(sp)
- 478:	ec6e                	sd	s11,24(sp)
- 47a:	0100                	addi	s0,sp,128
+ 46e:	7119                	addi	sp,sp,-128
+ 470:	fc86                	sd	ra,120(sp)
+ 472:	f8a2                	sd	s0,112(sp)
+ 474:	f4a6                	sd	s1,104(sp)
+ 476:	f0ca                	sd	s2,96(sp)
+ 478:	ecce                	sd	s3,88(sp)
+ 47a:	e8d2                	sd	s4,80(sp)
+ 47c:	e4d6                	sd	s5,72(sp)
+ 47e:	e0da                	sd	s6,64(sp)
+ 480:	fc5e                	sd	s7,56(sp)
+ 482:	f862                	sd	s8,48(sp)
+ 484:	f466                	sd	s9,40(sp)
+ 486:	f06a                	sd	s10,32(sp)
+ 488:	ec6e                	sd	s11,24(sp)
+ 48a:	0100                	addi	s0,sp,128
   char *s;
   int c, i, state;
 
   state = 0;
   for(i = 0; fmt[i]; i++){
- 47c:	0005c903          	lbu	s2,0(a1)
- 480:	18090f63          	beqz	s2,61e <vprintf+0x1c0>
- 484:	8aaa                	mv	s5,a0
- 486:	8b32                	mv	s6,a2
- 488:	00158493          	addi	s1,a1,1
+ 48c:	0005c903          	lbu	s2,0(a1)
+ 490:	18090f63          	beqz	s2,62e <vprintf+0x1c0>
+ 494:	8aaa                	mv	s5,a0
+ 496:	8b32                	mv	s6,a2
+ 498:	00158493          	addi	s1,a1,1
   state = 0;
- 48c:	4981                	li	s3,0
+ 49c:	4981                	li	s3,0
       if(c == '%'){
         state = '%';
       } else {
         putc(fd, c);
       }
     } else if(state == '%'){
- 48e:	02500a13          	li	s4,37
- 492:	4c55                	li	s8,21
- 494:	00000c97          	auipc	s9,0x0
- 498:	38cc8c93          	addi	s9,s9,908 # 820 <malloc+0xfe>
+ 49e:	02500a13          	li	s4,37
+ 4a2:	4c55                	li	s8,21
+ 4a4:	00000c97          	auipc	s9,0x0
+ 4a8:	38cc8c93          	addi	s9,s9,908 # 830 <malloc+0xfe>
         printptr(fd, va_arg(ap, uint64));
       } else if(c == 's'){
         s = va_arg(ap, char*);
         if(s == 0)
           s = "(null)";
         while(*s != 0){
- 49c:	02800d93          	li	s11,40
+ 4ac:	02800d93          	li	s11,40
   putc(fd, 'x');
- 4a0:	4d41                	li	s10,16
+ 4b0:	4d41                	li	s10,16
     putc(fd, digits[x >> (sizeof(uint64) * 8 - 4)]);
- 4a2:	00000b97          	auipc	s7,0x0
- 4a6:	3d6b8b93          	addi	s7,s7,982 # 878 <digits>
- 4aa:	a839                	j	4c8 <vprintf+0x6a>
+ 4b2:	00000b97          	auipc	s7,0x0
+ 4b6:	3d6b8b93          	addi	s7,s7,982 # 888 <digits>
+ 4ba:	a839                	j	4d8 <vprintf+0x6a>
         putc(fd, c);
- 4ac:	85ca                	mv	a1,s2
- 4ae:	8556                	mv	a0,s5
- 4b0:	00000097          	auipc	ra,0x0
- 4b4:	ee0080e7          	jalr	-288(ra) # 390 <putc>
- 4b8:	a019                	j	4be <vprintf+0x60>
+ 4bc:	85ca                	mv	a1,s2
+ 4be:	8556                	mv	a0,s5
+ 4c0:	00000097          	auipc	ra,0x0
+ 4c4:	ee0080e7          	jalr	-288(ra) # 3a0 <putc>
+ 4c8:	a019                	j	4ce <vprintf+0x60>
     } else if(state == '%'){
- 4ba:	01498d63          	beq	s3,s4,4d4 <vprintf+0x76>
+ 4ca:	01498d63          	beq	s3,s4,4e4 <vprintf+0x76>
   for(i = 0; fmt[i]; i++){
- 4be:	0485                	addi	s1,s1,1
- 4c0:	fff4c903          	lbu	s2,-1(s1)
- 4c4:	14090d63          	beqz	s2,61e <vprintf+0x1c0>
+ 4ce:	0485                	addi	s1,s1,1
+ 4d0:	fff4c903          	lbu	s2,-1(s1)
+ 4d4:	14090d63          	beqz	s2,62e <vprintf+0x1c0>
     if(state == 0){
- 4c8:	fe0999e3          	bnez	s3,4ba <vprintf+0x5c>
+ 4d8:	fe0999e3          	bnez	s3,4ca <vprintf+0x5c>
       if(c == '%'){
- 4cc:	ff4910e3          	bne	s2,s4,4ac <vprintf+0x4e>
+ 4dc:	ff4910e3          	bne	s2,s4,4bc <vprintf+0x4e>
         state = '%';
- 4d0:	89d2                	mv	s3,s4
- 4d2:	b7f5                	j	4be <vprintf+0x60>
+ 4e0:	89d2                	mv	s3,s4
+ 4e2:	b7f5                	j	4ce <vprintf+0x60>
       if(c == 'd'){
- 4d4:	11490c63          	beq	s2,s4,5ec <vprintf+0x18e>
- 4d8:	f9d9079b          	addiw	a5,s2,-99
- 4dc:	0ff7f793          	zext.b	a5,a5
- 4e0:	10fc6e63          	bltu	s8,a5,5fc <vprintf+0x19e>
- 4e4:	f9d9079b          	addiw	a5,s2,-99
- 4e8:	0ff7f713          	zext.b	a4,a5
- 4ec:	10ec6863          	bltu	s8,a4,5fc <vprintf+0x19e>
- 4f0:	00271793          	slli	a5,a4,0x2
- 4f4:	97e6                	add	a5,a5,s9
- 4f6:	439c                	lw	a5,0(a5)
- 4f8:	97e6                	add	a5,a5,s9
- 4fa:	8782                	jr	a5
+ 4e4:	11490c63          	beq	s2,s4,5fc <vprintf+0x18e>
+ 4e8:	f9d9079b          	addiw	a5,s2,-99
+ 4ec:	0ff7f793          	zext.b	a5,a5
+ 4f0:	10fc6e63          	bltu	s8,a5,60c <vprintf+0x19e>
+ 4f4:	f9d9079b          	addiw	a5,s2,-99
+ 4f8:	0ff7f713          	zext.b	a4,a5
+ 4fc:	10ec6863          	bltu	s8,a4,60c <vprintf+0x19e>
+ 500:	00271793          	slli	a5,a4,0x2
+ 504:	97e6                	add	a5,a5,s9
+ 506:	439c                	lw	a5,0(a5)
+ 508:	97e6                	add	a5,a5,s9
+ 50a:	8782                	jr	a5
         printint(fd, va_arg(ap, int), 10, 1);
- 4fc:	008b0913          	addi	s2,s6,8
- 500:	4685                	li	a3,1
- 502:	4629                	li	a2,10
- 504:	000b2583          	lw	a1,0(s6)
- 508:	8556                	mv	a0,s5
- 50a:	00000097          	auipc	ra,0x0
- 50e:	ea8080e7          	jalr	-344(ra) # 3b2 <printint>
- 512:	8b4a                	mv	s6,s2
+ 50c:	008b0913          	addi	s2,s6,8
+ 510:	4685                	li	a3,1
+ 512:	4629                	li	a2,10
+ 514:	000b2583          	lw	a1,0(s6)
+ 518:	8556                	mv	a0,s5
+ 51a:	00000097          	auipc	ra,0x0
+ 51e:	ea8080e7          	jalr	-344(ra) # 3c2 <printint>
+ 522:	8b4a                	mv	s6,s2
       } else {
         // Unknown % sequence.  Print it to draw attention.
         putc(fd, '%');
         putc(fd, c);
       }
       state = 0;
- 514:	4981                	li	s3,0
- 516:	b765                	j	4be <vprintf+0x60>
+ 524:	4981                	li	s3,0
+ 526:	b765                	j	4ce <vprintf+0x60>
         printint(fd, va_arg(ap, uint64), 10, 0);
- 518:	008b0913          	addi	s2,s6,8
- 51c:	4681                	li	a3,0
- 51e:	4629                	li	a2,10
- 520:	000b2583          	lw	a1,0(s6)
- 524:	8556                	mv	a0,s5
- 526:	00000097          	auipc	ra,0x0
- 52a:	e8c080e7          	jalr	-372(ra) # 3b2 <printint>
- 52e:	8b4a                	mv	s6,s2
+ 528:	008b0913          	addi	s2,s6,8
+ 52c:	4681                	li	a3,0
+ 52e:	4629                	li	a2,10
+ 530:	000b2583          	lw	a1,0(s6)
+ 534:	8556                	mv	a0,s5
+ 536:	00000097          	auipc	ra,0x0
+ 53a:	e8c080e7          	jalr	-372(ra) # 3c2 <printint>
+ 53e:	8b4a                	mv	s6,s2
       state = 0;
- 530:	4981                	li	s3,0
- 532:	b771                	j	4be <vprintf+0x60>
+ 540:	4981                	li	s3,0
+ 542:	b771                	j	4ce <vprintf+0x60>
         printint(fd, va_arg(ap, int), 16, 0);
- 534:	008b0913          	addi	s2,s6,8
- 538:	4681                	li	a3,0
- 53a:	866a                	mv	a2,s10
- 53c:	000b2583          	lw	a1,0(s6)
- 540:	8556                	mv	a0,s5
- 542:	00000097          	auipc	ra,0x0
- 546:	e70080e7          	jalr	-400(ra) # 3b2 <printint>
- 54a:	8b4a                	mv	s6,s2
+ 544:	008b0913          	addi	s2,s6,8
+ 548:	4681                	li	a3,0
+ 54a:	866a                	mv	a2,s10
+ 54c:	000b2583          	lw	a1,0(s6)
+ 550:	8556                	mv	a0,s5
+ 552:	00000097          	auipc	ra,0x0
+ 556:	e70080e7          	jalr	-400(ra) # 3c2 <printint>
+ 55a:	8b4a                	mv	s6,s2
       state = 0;
- 54c:	4981                	li	s3,0
- 54e:	bf85                	j	4be <vprintf+0x60>
+ 55c:	4981                	li	s3,0
+ 55e:	bf85                	j	4ce <vprintf+0x60>
         printptr(fd, va_arg(ap, uint64));
- 550:	008b0793          	addi	a5,s6,8
- 554:	f8f43423          	sd	a5,-120(s0)
- 558:	000b3983          	ld	s3,0(s6)
+ 560:	008b0793          	addi	a5,s6,8
+ 564:	f8f43423          	sd	a5,-120(s0)
+ 568:	000b3983          	ld	s3,0(s6)
   putc(fd, '0');
- 55c:	03000593          	li	a1,48
- 560:	8556                	mv	a0,s5
- 562:	00000097          	auipc	ra,0x0
- 566:	e2e080e7          	jalr	-466(ra) # 390 <putc>
+ 56c:	03000593          	li	a1,48
+ 570:	8556                	mv	a0,s5
+ 572:	00000097          	auipc	ra,0x0
+ 576:	e2e080e7          	jalr	-466(ra) # 3a0 <putc>
   putc(fd, 'x');
- 56a:	07800593          	li	a1,120
- 56e:	8556                	mv	a0,s5
- 570:	00000097          	auipc	ra,0x0
- 574:	e20080e7          	jalr	-480(ra) # 390 <putc>
- 578:	896a                	mv	s2,s10
+ 57a:	07800593          	li	a1,120
+ 57e:	8556                	mv	a0,s5
+ 580:	00000097          	auipc	ra,0x0
+ 584:	e20080e7          	jalr	-480(ra) # 3a0 <putc>
+ 588:	896a                	mv	s2,s10
     putc(fd, digits[x >> (sizeof(uint64) * 8 - 4)]);
- 57a:	03c9d793          	srli	a5,s3,0x3c
- 57e:	97de                	add	a5,a5,s7
- 580:	0007c583          	lbu	a1,0(a5)
- 584:	8556                	mv	a0,s5
- 586:	00000097          	auipc	ra,0x0
- 58a:	e0a080e7          	jalr	-502(ra) # 390 <putc>
+ 58a:	03c9d793          	srli	a5,s3,0x3c
+ 58e:	97de                	add	a5,a5,s7
+ 590:	0007c583          	lbu	a1,0(a5)
+ 594:	8556                	mv	a0,s5
+ 596:	00000097          	auipc	ra,0x0
+ 59a:	e0a080e7          	jalr	-502(ra) # 3a0 <putc>
   for (i = 0; i < (sizeof(uint64) * 2); i++, x <<= 4)
- 58e:	0992                	slli	s3,s3,0x4
- 590:	397d                	addiw	s2,s2,-1
- 592:	fe0914e3          	bnez	s2,57a <vprintf+0x11c>
+ 59e:	0992                	slli	s3,s3,0x4
+ 5a0:	397d                	addiw	s2,s2,-1
+ 5a2:	fe0914e3          	bnez	s2,58a <vprintf+0x11c>
         printptr(fd, va_arg(ap, uint64));
- 596:	f8843b03          	ld	s6,-120(s0)
+ 5a6:	f8843b03          	ld	s6,-120(s0)
       state = 0;
- 59a:	4981                	li	s3,0
- 59c:	b70d                	j	4be <vprintf+0x60>
+ 5aa:	4981                	li	s3,0
+ 5ac:	b70d                	j	4ce <vprintf+0x60>
         s = va_arg(ap, char*);
- 59e:	008b0913          	addi	s2,s6,8
- 5a2:	000b3983          	ld	s3,0(s6)
+ 5ae:	008b0913          	addi	s2,s6,8
+ 5b2:	000b3983          	ld	s3,0(s6)
         if(s == 0)
- 5a6:	02098163          	beqz	s3,5c8 <vprintf+0x16a>
+ 5b6:	02098163          	beqz	s3,5d8 <vprintf+0x16a>
         while(*s != 0){
- 5aa:	0009c583          	lbu	a1,0(s3)
- 5ae:	c5ad                	beqz	a1,618 <vprintf+0x1ba>
+ 5ba:	0009c583          	lbu	a1,0(s3)
+ 5be:	c5ad                	beqz	a1,628 <vprintf+0x1ba>
           putc(fd, *s);
- 5b0:	8556                	mv	a0,s5
- 5b2:	00000097          	auipc	ra,0x0
- 5b6:	dde080e7          	jalr	-546(ra) # 390 <putc>
+ 5c0:	8556                	mv	a0,s5
+ 5c2:	00000097          	auipc	ra,0x0
+ 5c6:	dde080e7          	jalr	-546(ra) # 3a0 <putc>
           s++;
- 5ba:	0985                	addi	s3,s3,1
+ 5ca:	0985                	addi	s3,s3,1
         while(*s != 0){
- 5bc:	0009c583          	lbu	a1,0(s3)
- 5c0:	f9e5                	bnez	a1,5b0 <vprintf+0x152>
+ 5cc:	0009c583          	lbu	a1,0(s3)
+ 5d0:	f9e5                	bnez	a1,5c0 <vprintf+0x152>
         s = va_arg(ap, char*);
- 5c2:	8b4a                	mv	s6,s2
+ 5d2:	8b4a                	mv	s6,s2
       state = 0;
- 5c4:	4981                	li	s3,0
- 5c6:	bde5                	j	4be <vprintf+0x60>
+ 5d4:	4981                	li	s3,0
+ 5d6:	bde5                	j	4ce <vprintf+0x60>
           s = "(null)";
- 5c8:	00000997          	auipc	s3,0x0
- 5cc:	25098993          	addi	s3,s3,592 # 818 <malloc+0xf6>
+ 5d8:	00000997          	auipc	s3,0x0
+ 5dc:	25098993          	addi	s3,s3,592 # 828 <malloc+0xf6>
         while(*s != 0){
- 5d0:	85ee                	mv	a1,s11
- 5d2:	bff9                	j	5b0 <vprintf+0x152>
+ 5e0:	85ee                	mv	a1,s11
+ 5e2:	bff9                	j	5c0 <vprintf+0x152>
         putc(fd, va_arg(ap, uint));
- 5d4:	008b0913          	addi	s2,s6,8
- 5d8:	000b4583          	lbu	a1,0(s6)
- 5dc:	8556                	mv	a0,s5
- 5de:	00000097          	auipc	ra,0x0
- 5e2:	db2080e7          	jalr	-590(ra) # 390 <putc>
- 5e6:	8b4a                	mv	s6,s2
-      state = 0;
- 5e8:	4981                	li	s3,0
- 5ea:	bdd1                	j	4be <vprintf+0x60>
-        putc(fd, c);
- 5ec:	85d2                	mv	a1,s4
- 5ee:	8556                	mv	a0,s5
- 5f0:	00000097          	auipc	ra,0x0
- 5f4:	da0080e7          	jalr	-608(ra) # 390 <putc>
+ 5e4:	008b0913          	addi	s2,s6,8
+ 5e8:	000b4583          	lbu	a1,0(s6)
+ 5ec:	8556                	mv	a0,s5
+ 5ee:	00000097          	auipc	ra,0x0
+ 5f2:	db2080e7          	jalr	-590(ra) # 3a0 <putc>
+ 5f6:	8b4a                	mv	s6,s2
       state = 0;
  5f8:	4981                	li	s3,0
- 5fa:	b5d1                	j	4be <vprintf+0x60>
-        putc(fd, '%');
+ 5fa:	bdd1                	j	4ce <vprintf+0x60>
+        putc(fd, c);
  5fc:	85d2                	mv	a1,s4
  5fe:	8556                	mv	a0,s5
  600:	00000097          	auipc	ra,0x0
- 604:	d90080e7          	jalr	-624(ra) # 390 <putc>
+ 604:	da0080e7          	jalr	-608(ra) # 3a0 <putc>
+      state = 0;
+ 608:	4981                	li	s3,0
+ 60a:	b5d1                	j	4ce <vprintf+0x60>
+        putc(fd, '%');
+ 60c:	85d2                	mv	a1,s4
+ 60e:	8556                	mv	a0,s5
+ 610:	00000097          	auipc	ra,0x0
+ 614:	d90080e7          	jalr	-624(ra) # 3a0 <putc>
         putc(fd, c);
- 608:	85ca                	mv	a1,s2
- 60a:	8556                	mv	a0,s5
- 60c:	00000097          	auipc	ra,0x0
- 610:	d84080e7          	jalr	-636(ra) # 390 <putc>
+ 618:	85ca                	mv	a1,s2
+ 61a:	8556                	mv	a0,s5
+ 61c:	00000097          	auipc	ra,0x0
+ 620:	d84080e7          	jalr	-636(ra) # 3a0 <putc>
       state = 0;
- 614:	4981                	li	s3,0
- 616:	b565                	j	4be <vprintf+0x60>
+ 624:	4981                	li	s3,0
+ 626:	b565                	j	4ce <vprintf+0x60>
         s = va_arg(ap, char*);
- 618:	8b4a                	mv	s6,s2
+ 628:	8b4a                	mv	s6,s2
       state = 0;
- 61a:	4981                	li	s3,0
- 61c:	b54d                	j	4be <vprintf+0x60>
+ 62a:	4981                	li	s3,0
+ 62c:	b54d                	j	4ce <vprintf+0x60>
     }
   }
 }
- 61e:	70e6                	ld	ra,120(sp)
- 620:	7446                	ld	s0,112(sp)
- 622:	74a6                	ld	s1,104(sp)
- 624:	7906                	ld	s2,96(sp)
- 626:	69e6                	ld	s3,88(sp)
- 628:	6a46                	ld	s4,80(sp)
- 62a:	6aa6                	ld	s5,72(sp)
- 62c:	6b06                	ld	s6,64(sp)
- 62e:	7be2                	ld	s7,56(sp)
- 630:	7c42                	ld	s8,48(sp)
- 632:	7ca2                	ld	s9,40(sp)
- 634:	7d02                	ld	s10,32(sp)
- 636:	6de2                	ld	s11,24(sp)
- 638:	6109                	addi	sp,sp,128
- 63a:	8082                	ret
+ 62e:	70e6                	ld	ra,120(sp)
+ 630:	7446                	ld	s0,112(sp)
+ 632:	74a6                	ld	s1,104(sp)
+ 634:	7906                	ld	s2,96(sp)
+ 636:	69e6                	ld	s3,88(sp)
+ 638:	6a46                	ld	s4,80(sp)
+ 63a:	6aa6                	ld	s5,72(sp)
+ 63c:	6b06                	ld	s6,64(sp)
+ 63e:	7be2                	ld	s7,56(sp)
+ 640:	7c42                	ld	s8,48(sp)
+ 642:	7ca2                	ld	s9,40(sp)
+ 644:	7d02                	ld	s10,32(sp)
+ 646:	6de2                	ld	s11,24(sp)
+ 648:	6109                	addi	sp,sp,128
+ 64a:	8082                	ret
 
-000000000000063c <fprintf>:
+000000000000064c <fprintf>:
 
 void
 fprintf(int fd, const char *fmt, ...)
 {
- 63c:	715d                	addi	sp,sp,-80
- 63e:	ec06                	sd	ra,24(sp)
- 640:	e822                	sd	s0,16(sp)
- 642:	1000                	addi	s0,sp,32
- 644:	e010                	sd	a2,0(s0)
- 646:	e414                	sd	a3,8(s0)
- 648:	e818                	sd	a4,16(s0)
- 64a:	ec1c                	sd	a5,24(s0)
- 64c:	03043023          	sd	a6,32(s0)
- 650:	03143423          	sd	a7,40(s0)
+ 64c:	715d                	addi	sp,sp,-80
+ 64e:	ec06                	sd	ra,24(sp)
+ 650:	e822                	sd	s0,16(sp)
+ 652:	1000                	addi	s0,sp,32
+ 654:	e010                	sd	a2,0(s0)
+ 656:	e414                	sd	a3,8(s0)
+ 658:	e818                	sd	a4,16(s0)
+ 65a:	ec1c                	sd	a5,24(s0)
+ 65c:	03043023          	sd	a6,32(s0)
+ 660:	03143423          	sd	a7,40(s0)
   va_list ap;
 
   va_start(ap, fmt);
- 654:	fe843423          	sd	s0,-24(s0)
+ 664:	fe843423          	sd	s0,-24(s0)
   vprintf(fd, fmt, ap);
- 658:	8622                	mv	a2,s0
- 65a:	00000097          	auipc	ra,0x0
- 65e:	e04080e7          	jalr	-508(ra) # 45e <vprintf>
+ 668:	8622                	mv	a2,s0
+ 66a:	00000097          	auipc	ra,0x0
+ 66e:	e04080e7          	jalr	-508(ra) # 46e <vprintf>
 }
- 662:	60e2                	ld	ra,24(sp)
- 664:	6442                	ld	s0,16(sp)
- 666:	6161                	addi	sp,sp,80
- 668:	8082                	ret
+ 672:	60e2                	ld	ra,24(sp)
+ 674:	6442                	ld	s0,16(sp)
+ 676:	6161                	addi	sp,sp,80
+ 678:	8082                	ret
 
-000000000000066a <printf>:
+000000000000067a <printf>:
 
 void
 printf(const char *fmt, ...)
 {
- 66a:	711d                	addi	sp,sp,-96
- 66c:	ec06                	sd	ra,24(sp)
- 66e:	e822                	sd	s0,16(sp)
- 670:	1000                	addi	s0,sp,32
- 672:	e40c                	sd	a1,8(s0)
- 674:	e810                	sd	a2,16(s0)
- 676:	ec14                	sd	a3,24(s0)
- 678:	f018                	sd	a4,32(s0)
- 67a:	f41c                	sd	a5,40(s0)
- 67c:	03043823          	sd	a6,48(s0)
- 680:	03143c23          	sd	a7,56(s0)
+ 67a:	711d                	addi	sp,sp,-96
+ 67c:	ec06                	sd	ra,24(sp)
+ 67e:	e822                	sd	s0,16(sp)
+ 680:	1000                	addi	s0,sp,32
+ 682:	e40c                	sd	a1,8(s0)
+ 684:	e810                	sd	a2,16(s0)
+ 686:	ec14                	sd	a3,24(s0)
+ 688:	f018                	sd	a4,32(s0)
+ 68a:	f41c                	sd	a5,40(s0)
+ 68c:	03043823          	sd	a6,48(s0)
+ 690:	03143c23          	sd	a7,56(s0)
   va_list ap;
 
   va_start(ap, fmt);
- 684:	00840613          	addi	a2,s0,8
- 688:	fec43423          	sd	a2,-24(s0)
+ 694:	00840613          	addi	a2,s0,8
+ 698:	fec43423          	sd	a2,-24(s0)
   vprintf(1, fmt, ap);
- 68c:	85aa                	mv	a1,a0
- 68e:	4505                	li	a0,1
- 690:	00000097          	auipc	ra,0x0
- 694:	dce080e7          	jalr	-562(ra) # 45e <vprintf>
+ 69c:	85aa                	mv	a1,a0
+ 69e:	4505                	li	a0,1
+ 6a0:	00000097          	auipc	ra,0x0
+ 6a4:	dce080e7          	jalr	-562(ra) # 46e <vprintf>
 }
- 698:	60e2                	ld	ra,24(sp)
- 69a:	6442                	ld	s0,16(sp)
- 69c:	6125                	addi	sp,sp,96
- 69e:	8082                	ret
+ 6a8:	60e2                	ld	ra,24(sp)
+ 6aa:	6442                	ld	s0,16(sp)
+ 6ac:	6125                	addi	sp,sp,96
+ 6ae:	8082                	ret
 
-00000000000006a0 <free>:
+00000000000006b0 <free>:
 static Header base;
 static Header *freep;
 
 void
 free(void *ap)
 {
- 6a0:	1141                	addi	sp,sp,-16
- 6a2:	e422                	sd	s0,8(sp)
- 6a4:	0800                	addi	s0,sp,16
+ 6b0:	1141                	addi	sp,sp,-16
+ 6b2:	e422                	sd	s0,8(sp)
+ 6b4:	0800                	addi	s0,sp,16
   Header *bp, *p;
 
   bp = (Header*)ap - 1;
- 6a6:	ff050693          	addi	a3,a0,-16
+ 6b6:	ff050693          	addi	a3,a0,-16
   for(p = freep; !(bp > p && bp < p->s.ptr); p = p->s.ptr)
- 6aa:	00000797          	auipc	a5,0x0
- 6ae:	1e67b783          	ld	a5,486(a5) # 890 <freep>
- 6b2:	a02d                	j	6dc <free+0x3c>
+ 6ba:	00000797          	auipc	a5,0x0
+ 6be:	1e67b783          	ld	a5,486(a5) # 8a0 <freep>
+ 6c2:	a02d                	j	6ec <free+0x3c>
     if(p >= p->s.ptr && (bp > p || bp < p->s.ptr))
       break;
   if(bp + bp->s.size == p->s.ptr){
     bp->s.size += p->s.ptr->s.size;
- 6b4:	4618                	lw	a4,8(a2)
- 6b6:	9f2d                	addw	a4,a4,a1
- 6b8:	fee52c23          	sw	a4,-8(a0)
+ 6c4:	4618                	lw	a4,8(a2)
+ 6c6:	9f2d                	addw	a4,a4,a1
+ 6c8:	fee52c23          	sw	a4,-8(a0)
     bp->s.ptr = p->s.ptr->s.ptr;
- 6bc:	6398                	ld	a4,0(a5)
- 6be:	6310                	ld	a2,0(a4)
- 6c0:	a83d                	j	6fe <free+0x5e>
+ 6cc:	6398                	ld	a4,0(a5)
+ 6ce:	6310                	ld	a2,0(a4)
+ 6d0:	a83d                	j	70e <free+0x5e>
   } else
     bp->s.ptr = p->s.ptr;
   if(p + p->s.size == bp){
     p->s.size += bp->s.size;
- 6c2:	ff852703          	lw	a4,-8(a0)
- 6c6:	9f31                	addw	a4,a4,a2
- 6c8:	c798                	sw	a4,8(a5)
+ 6d2:	ff852703          	lw	a4,-8(a0)
+ 6d6:	9f31                	addw	a4,a4,a2
+ 6d8:	c798                	sw	a4,8(a5)
     p->s.ptr = bp->s.ptr;
- 6ca:	ff053683          	ld	a3,-16(a0)
- 6ce:	a091                	j	712 <free+0x72>
+ 6da:	ff053683          	ld	a3,-16(a0)
+ 6de:	a091                	j	722 <free+0x72>
     if(p >= p->s.ptr && (bp > p || bp < p->s.ptr))
- 6d0:	6398                	ld	a4,0(a5)
- 6d2:	00e7e463          	bltu	a5,a4,6da <free+0x3a>
- 6d6:	00e6ea63          	bltu	a3,a4,6ea <free+0x4a>
+ 6e0:	6398                	ld	a4,0(a5)
+ 6e2:	00e7e463          	bltu	a5,a4,6ea <free+0x3a>
+ 6e6:	00e6ea63          	bltu	a3,a4,6fa <free+0x4a>
 {
- 6da:	87ba                	mv	a5,a4
+ 6ea:	87ba                	mv	a5,a4
   for(p = freep; !(bp > p && bp < p->s.ptr); p = p->s.ptr)
- 6dc:	fed7fae3          	bgeu	a5,a3,6d0 <free+0x30>
- 6e0:	6398                	ld	a4,0(a5)
- 6e2:	00e6e463          	bltu	a3,a4,6ea <free+0x4a>
+ 6ec:	fed7fae3          	bgeu	a5,a3,6e0 <free+0x30>
+ 6f0:	6398                	ld	a4,0(a5)
+ 6f2:	00e6e463          	bltu	a3,a4,6fa <free+0x4a>
     if(p >= p->s.ptr && (bp > p || bp < p->s.ptr))
- 6e6:	fee7eae3          	bltu	a5,a4,6da <free+0x3a>
+ 6f6:	fee7eae3          	bltu	a5,a4,6ea <free+0x3a>
   if(bp + bp->s.size == p->s.ptr){
- 6ea:	ff852583          	lw	a1,-8(a0)
- 6ee:	6390                	ld	a2,0(a5)
- 6f0:	02059813          	slli	a6,a1,0x20
- 6f4:	01c85713          	srli	a4,a6,0x1c
- 6f8:	9736                	add	a4,a4,a3
- 6fa:	fae60de3          	beq	a2,a4,6b4 <free+0x14>
+ 6fa:	ff852583          	lw	a1,-8(a0)
+ 6fe:	6390                	ld	a2,0(a5)
+ 700:	02059813          	slli	a6,a1,0x20
+ 704:	01c85713          	srli	a4,a6,0x1c
+ 708:	9736                	add	a4,a4,a3
+ 70a:	fae60de3          	beq	a2,a4,6c4 <free+0x14>
     bp->s.ptr = p->s.ptr->s.ptr;
- 6fe:	fec53823          	sd	a2,-16(a0)
+ 70e:	fec53823          	sd	a2,-16(a0)
   if(p + p->s.size == bp){
- 702:	4790                	lw	a2,8(a5)
- 704:	02061593          	slli	a1,a2,0x20
- 708:	01c5d713          	srli	a4,a1,0x1c
- 70c:	973e                	add	a4,a4,a5
- 70e:	fae68ae3          	beq	a3,a4,6c2 <free+0x22>
+ 712:	4790                	lw	a2,8(a5)
+ 714:	02061593          	slli	a1,a2,0x20
+ 718:	01c5d713          	srli	a4,a1,0x1c
+ 71c:	973e                	add	a4,a4,a5
+ 71e:	fae68ae3          	beq	a3,a4,6d2 <free+0x22>
     p->s.ptr = bp->s.ptr;
- 712:	e394                	sd	a3,0(a5)
+ 722:	e394                	sd	a3,0(a5)
   } else
     p->s.ptr = bp;
   freep = p;
- 714:	00000717          	auipc	a4,0x0
- 718:	16f73e23          	sd	a5,380(a4) # 890 <freep>
+ 724:	00000717          	auipc	a4,0x0
+ 728:	16f73e23          	sd	a5,380(a4) # 8a0 <freep>
 }
- 71c:	6422                	ld	s0,8(sp)
- 71e:	0141                	addi	sp,sp,16
- 720:	8082                	ret
+ 72c:	6422                	ld	s0,8(sp)
+ 72e:	0141                	addi	sp,sp,16
+ 730:	8082                	ret
 
-0000000000000722 <malloc>:
+0000000000000732 <malloc>:
   return freep;
 }
 
 void*
 malloc(uint nbytes)
 {
- 722:	7139                	addi	sp,sp,-64
- 724:	fc06                	sd	ra,56(sp)
- 726:	f822                	sd	s0,48(sp)
- 728:	f426                	sd	s1,40(sp)
- 72a:	f04a                	sd	s2,32(sp)
- 72c:	ec4e                	sd	s3,24(sp)
- 72e:	e852                	sd	s4,16(sp)
- 730:	e456                	sd	s5,8(sp)
- 732:	e05a                	sd	s6,0(sp)
- 734:	0080                	addi	s0,sp,64
+ 732:	7139                	addi	sp,sp,-64
+ 734:	fc06                	sd	ra,56(sp)
+ 736:	f822                	sd	s0,48(sp)
+ 738:	f426                	sd	s1,40(sp)
+ 73a:	f04a                	sd	s2,32(sp)
+ 73c:	ec4e                	sd	s3,24(sp)
+ 73e:	e852                	sd	s4,16(sp)
+ 740:	e456                	sd	s5,8(sp)
+ 742:	e05a                	sd	s6,0(sp)
+ 744:	0080                	addi	s0,sp,64
   Header *p, *prevp;
   uint nunits;
 
   nunits = (nbytes + sizeof(Header) - 1)/sizeof(Header) + 1;
- 736:	02051493          	slli	s1,a0,0x20
- 73a:	9081                	srli	s1,s1,0x20
- 73c:	04bd                	addi	s1,s1,15
- 73e:	8091                	srli	s1,s1,0x4
- 740:	0014899b          	addiw	s3,s1,1
- 744:	0485                	addi	s1,s1,1
+ 746:	02051493          	slli	s1,a0,0x20
+ 74a:	9081                	srli	s1,s1,0x20
+ 74c:	04bd                	addi	s1,s1,15
+ 74e:	8091                	srli	s1,s1,0x4
+ 750:	0014899b          	addiw	s3,s1,1
+ 754:	0485                	addi	s1,s1,1
   if((prevp = freep) == 0){
- 746:	00000517          	auipc	a0,0x0
- 74a:	14a53503          	ld	a0,330(a0) # 890 <freep>
- 74e:	c515                	beqz	a0,77a <malloc+0x58>
+ 756:	00000517          	auipc	a0,0x0
+ 75a:	14a53503          	ld	a0,330(a0) # 8a0 <freep>
+ 75e:	c515                	beqz	a0,78a <malloc+0x58>
     base.s.ptr = freep = prevp = &base;
     base.s.size = 0;
   }
   for(p = prevp->s.ptr; ; prevp = p, p = p->s.ptr){
- 750:	611c                	ld	a5,0(a0)
+ 760:	611c                	ld	a5,0(a0)
     if(p->s.size >= nunits){
- 752:	4798                	lw	a4,8(a5)
- 754:	02977f63          	bgeu	a4,s1,792 <malloc+0x70>
- 758:	8a4e                	mv	s4,s3
- 75a:	0009871b          	sext.w	a4,s3
- 75e:	6685                	lui	a3,0x1
- 760:	00d77363          	bgeu	a4,a3,766 <malloc+0x44>
- 764:	6a05                	lui	s4,0x1
- 766:	000a0b1b          	sext.w	s6,s4
+ 762:	4798                	lw	a4,8(a5)
+ 764:	02977f63          	bgeu	a4,s1,7a2 <malloc+0x70>
+ 768:	8a4e                	mv	s4,s3
+ 76a:	0009871b          	sext.w	a4,s3
+ 76e:	6685                	lui	a3,0x1
+ 770:	00d77363          	bgeu	a4,a3,776 <malloc+0x44>
+ 774:	6a05                	lui	s4,0x1
+ 776:	000a0b1b          	sext.w	s6,s4
   p = sbrk(nu * sizeof(Header));
- 76a:	004a1a1b          	slliw	s4,s4,0x4
+ 77a:	004a1a1b          	slliw	s4,s4,0x4
         p->s.size = nunits;
       }
       freep = prevp;
       return (void*)(p + 1);
     }
     if(p == freep)
- 76e:	00000917          	auipc	s2,0x0
- 772:	12290913          	addi	s2,s2,290 # 890 <freep>
+ 77e:	00000917          	auipc	s2,0x0
+ 782:	12290913          	addi	s2,s2,290 # 8a0 <freep>
   if(p == (char*)-1)
- 776:	5afd                	li	s5,-1
- 778:	a895                	j	7ec <malloc+0xca>
+ 786:	5afd                	li	s5,-1
+ 788:	a895                	j	7fc <malloc+0xca>
     base.s.ptr = freep = prevp = &base;
- 77a:	00000797          	auipc	a5,0x0
- 77e:	11e78793          	addi	a5,a5,286 # 898 <base>
- 782:	00000717          	auipc	a4,0x0
- 786:	10f73723          	sd	a5,270(a4) # 890 <freep>
- 78a:	e39c                	sd	a5,0(a5)
+ 78a:	00000797          	auipc	a5,0x0
+ 78e:	11e78793          	addi	a5,a5,286 # 8a8 <base>
+ 792:	00000717          	auipc	a4,0x0
+ 796:	10f73723          	sd	a5,270(a4) # 8a0 <freep>
+ 79a:	e39c                	sd	a5,0(a5)
     base.s.size = 0;
- 78c:	0007a423          	sw	zero,8(a5)
+ 79c:	0007a423          	sw	zero,8(a5)
     if(p->s.size >= nunits){
- 790:	b7e1                	j	758 <malloc+0x36>
+ 7a0:	b7e1                	j	768 <malloc+0x36>
       if(p->s.size == nunits)
- 792:	02e48c63          	beq	s1,a4,7ca <malloc+0xa8>
+ 7a2:	02e48c63          	beq	s1,a4,7da <malloc+0xa8>
         p->s.size -= nunits;
- 796:	4137073b          	subw	a4,a4,s3
- 79a:	c798                	sw	a4,8(a5)
+ 7a6:	4137073b          	subw	a4,a4,s3
+ 7aa:	c798                	sw	a4,8(a5)
         p += p->s.size;
- 79c:	02071693          	slli	a3,a4,0x20
- 7a0:	01c6d713          	srli	a4,a3,0x1c
- 7a4:	97ba                	add	a5,a5,a4
+ 7ac:	02071693          	slli	a3,a4,0x20
+ 7b0:	01c6d713          	srli	a4,a3,0x1c
+ 7b4:	97ba                	add	a5,a5,a4
         p->s.size = nunits;
- 7a6:	0137a423          	sw	s3,8(a5)
+ 7b6:	0137a423          	sw	s3,8(a5)
       freep = prevp;
- 7aa:	00000717          	auipc	a4,0x0
- 7ae:	0ea73323          	sd	a0,230(a4) # 890 <freep>
+ 7ba:	00000717          	auipc	a4,0x0
+ 7be:	0ea73323          	sd	a0,230(a4) # 8a0 <freep>
       return (void*)(p + 1);
- 7b2:	01078513          	addi	a0,a5,16
+ 7c2:	01078513          	addi	a0,a5,16
       if((p = morecore(nunits)) == 0)
         return 0;
   }
 }
- 7b6:	70e2                	ld	ra,56(sp)
- 7b8:	7442                	ld	s0,48(sp)
- 7ba:	74a2                	ld	s1,40(sp)
- 7bc:	7902                	ld	s2,32(sp)
- 7be:	69e2                	ld	s3,24(sp)
- 7c0:	6a42                	ld	s4,16(sp)
- 7c2:	6aa2                	ld	s5,8(sp)
- 7c4:	6b02                	ld	s6,0(sp)
- 7c6:	6121                	addi	sp,sp,64
- 7c8:	8082                	ret
+ 7c6:	70e2                	ld	ra,56(sp)
+ 7c8:	7442                	ld	s0,48(sp)
+ 7ca:	74a2                	ld	s1,40(sp)
+ 7cc:	7902                	ld	s2,32(sp)
+ 7ce:	69e2                	ld	s3,24(sp)
+ 7d0:	6a42                	ld	s4,16(sp)
+ 7d2:	6aa2                	ld	s5,8(sp)
+ 7d4:	6b02                	ld	s6,0(sp)
+ 7d6:	6121                	addi	sp,sp,64
+ 7d8:	8082                	ret
         prevp->s.ptr = p->s.ptr;
- 7ca:	6398                	ld	a4,0(a5)
- 7cc:	e118                	sd	a4,0(a0)
- 7ce:	bff1                	j	7aa <malloc+0x88>
+ 7da:	6398                	ld	a4,0(a5)
+ 7dc:	e118                	sd	a4,0(a0)
+ 7de:	bff1                	j	7ba <malloc+0x88>
   hp->s.size = nu;
- 7d0:	01652423          	sw	s6,8(a0)
+ 7e0:	01652423          	sw	s6,8(a0)
   free((void*)(hp + 1));
- 7d4:	0541                	addi	a0,a0,16
- 7d6:	00000097          	auipc	ra,0x0
- 7da:	eca080e7          	jalr	-310(ra) # 6a0 <free>
+ 7e4:	0541                	addi	a0,a0,16
+ 7e6:	00000097          	auipc	ra,0x0
+ 7ea:	eca080e7          	jalr	-310(ra) # 6b0 <free>
   return freep;
- 7de:	00093503          	ld	a0,0(s2)
+ 7ee:	00093503          	ld	a0,0(s2)
       if((p = morecore(nunits)) == 0)
- 7e2:	d971                	beqz	a0,7b6 <malloc+0x94>
+ 7f2:	d971                	beqz	a0,7c6 <malloc+0x94>
   for(p = prevp->s.ptr; ; prevp = p, p = p->s.ptr){
- 7e4:	611c                	ld	a5,0(a0)
+ 7f4:	611c                	ld	a5,0(a0)
     if(p->s.size >= nunits){
- 7e6:	4798                	lw	a4,8(a5)
- 7e8:	fa9775e3          	bgeu	a4,s1,792 <malloc+0x70>
+ 7f6:	4798                	lw	a4,8(a5)
+ 7f8:	fa9775e3          	bgeu	a4,s1,7a2 <malloc+0x70>
     if(p == freep)
- 7ec:	00093703          	ld	a4,0(s2)
- 7f0:	853e                	mv	a0,a5
- 7f2:	fef719e3          	bne	a4,a5,7e4 <malloc+0xc2>
+ 7fc:	00093703          	ld	a4,0(s2)
+ 800:	853e                	mv	a0,a5
+ 802:	fef719e3          	bne	a4,a5,7f4 <malloc+0xc2>
   p = sbrk(nu * sizeof(Header));
- 7f6:	8552                	mv	a0,s4
- 7f8:	00000097          	auipc	ra,0x0
- 7fc:	b80080e7          	jalr	-1152(ra) # 378 <sbrk>
+ 806:	8552                	mv	a0,s4
+ 808:	00000097          	auipc	ra,0x0
+ 80c:	b70080e7          	jalr	-1168(ra) # 378 <sbrk>
   if(p == (char*)-1)
- 800:	fd5518e3          	bne	a0,s5,7d0 <malloc+0xae>
+ 810:	fd5518e3          	bne	a0,s5,7e0 <malloc+0xae>
         return 0;
- 804:	4501                	li	a0,0
- 806:	bf45                	j	7b6 <malloc+0x94>
+ 814:	4501                	li	a0,0
+ 816:	bf45                	j	7c6 <malloc+0x94>
Binary files ./user/echo.o and ../xv6-labs-2021/user/echo.o differ
diff -urN ./user/echo.sym ../xv6-labs-2021/user/echo.sym
--- ./user/echo.sym	2021-12-05 17:54:42.000000000 +0800
+++ ../xv6-labs-2021/user/echo.sym	2021-11-26 14:46:16.000000000 +0800
@@ -1,7 +1,7 @@
 0000000000000000 .text
-0000000000000808 .rodata
-0000000000000890 .sbss
-0000000000000898 .bss
+0000000000000818 .rodata
+00000000000008a0 .sbss
+00000000000008a8 .bss
 0000000000000000 .comment
 0000000000000000 .riscv.attributes
 0000000000000000 .debug_aranges
@@ -16,29 +16,31 @@
 0000000000000000 echo.c
 0000000000000000 ulib.c
 0000000000000000 printf.c
-0000000000000390 putc
-00000000000003b2 printint
-0000000000000878 digits
+00000000000003a0 putc
+00000000000003c2 printint
+0000000000000888 digits
 0000000000000000 umalloc.c
-0000000000000890 freep
-0000000000000898 base
+00000000000008a0 freep
+00000000000008a8 base
 0000000000000084 strcpy
-000000000000066a printf
-0000000000001089 __global_pointer$
+000000000000067a printf
+0000000000001099 __global_pointer$
 000000000000023e memmove
 0000000000000338 mknod
+0000000000000390 trace
 000000000000013c gets
-0000000000000889 __SDATA_BEGIN__
+0000000000000899 __SDATA_BEGIN__
 0000000000000370 getpid
 00000000000002d0 memcpy
-0000000000000722 malloc
+0000000000000732 malloc
 0000000000000380 sleep
+0000000000000398 sysinfo
 0000000000000300 pipe
 0000000000000310 write
 0000000000000348 fstat
-000000000000063c fprintf
+000000000000064c fprintf
 0000000000000320 kill
-000000000000045e vprintf
+000000000000046e vprintf
 0000000000000360 chdir
 0000000000000328 exec
 00000000000002f8 wait
@@ -46,18 +48,18 @@
 0000000000000340 unlink
 0000000000000296 memcmp
 00000000000002e8 fork
-00000000000008a8 __BSS_END__
+00000000000008b8 __BSS_END__
 0000000000000378 sbrk
 0000000000000388 uptime
-0000000000000889 __bss_start
+0000000000000899 __bss_start
 00000000000000f6 memset
 0000000000000000 main
 00000000000000a0 strcmp
 0000000000000368 dup
-0000000000000889 __DATA_BEGIN__
+0000000000000899 __DATA_BEGIN__
 00000000000001b0 stat
-0000000000000889 _edata
-00000000000008a8 _end
+0000000000000899 _edata
+00000000000008b8 _end
 0000000000000350 link
 00000000000002f0 exit
 00000000000001f6 atoi
@@ -66,4 +68,4 @@
 0000000000000118 strchr
 0000000000000358 mkdir
 0000000000000318 close
-00000000000006a0 free
+00000000000006b0 free
diff -urN ./user/find.c ../xv6-labs-2021/user/find.c
--- ./user/find.c	1970-01-01 08:00:00.000000000 +0800
+++ ../xv6-labs-2021/user/find.c	2021-12-05 17:40:55.000000000 +0800
@@ -0,0 +1,73 @@
+#include "kernel/types.h"
+#include "kernel/stat.h"
+#include "user/user.h"
+#include "kernel/fs.h"
+char* fmtname(char *path) {
+  static char buf[DIRSIZ+1];
+  char *p;
+
+  // Find first character after last slash.
+  for(p=path+strlen(path); p >= path && *p != '/'; p--)
+    ;
+  p++;
+
+  // Return blank-padded name.
+  if(strlen(p) >= DIRSIZ)
+    return p;
+  memmove(buf, p, strlen(p));
+  memset(buf+strlen(p), '\0', DIRSIZ-strlen(p));
+  return buf;
+}
+void find(char *path, char *target) {
+    char buf[128], *p;
+    //char buf2[512];
+    int fd;
+    struct stat st;
+    struct dirent de;
+    if ((fd = open(path, 0)) < 0) {
+        fprintf(2, "can't go to %s\n", path);
+        return;
+    }
+    if (fstat(fd, &st) < 0) {
+        fprintf(2, "cant' stat %s\n", path);
+        close(fd);
+        return;
+    }
+    char *name = fmtname(path);
+    switch(st.type) {
+    case T_FILE:
+        if (strcmp(name, target) == 0) {
+            printf("%s\n", path);
+        }
+        break;
+    case T_DIR:
+        strcpy(buf, path);
+        p = buf+strlen(buf);
+        *p++ = '/';
+        while(read(fd, &de, sizeof(de)) == sizeof(de)){
+          if(de.inum == 0)
+            continue;
+          memmove(p, de.name, DIRSIZ);
+          p[DIRSIZ] = 0;
+          if(stat(buf, &st) < 0){
+            printf("ls: cannot stat %s\n", buf);
+            continue;
+          }
+          if (strcmp(de.name, ".") != 0 && strcmp(de.name, "..") != 0) {
+            //printf("%s\n", buf);
+            find(buf, target);
+          }
+        }
+        break;
+    }
+    close(fd);
+}
+
+int main (int argc, char* argv[]) {
+    if (argc <= 2) {
+        printf("\n");
+    } else {
+        find(argv[1], argv[2]);
+    }  
+    exit(0);
+}
diff -urN ./user/forktest.asm ../xv6-labs-2021/user/forktest.asm
--- ./user/forktest.asm	2021-12-05 17:54:42.000000000 +0800
+++ ../xv6-labs-2021/user/forktest.asm	2021-11-26 14:46:16.000000000 +0800
@@ -47,7 +47,7 @@
 
   print("fork test\n");
   3a:	00000517          	auipc	a0,0x0
-  3e:	3f650513          	addi	a0,a0,1014 # 430 <uptime+0xe>
+  3e:	40650513          	addi	a0,a0,1030 # 440 <sysinfo+0xe>
   42:	00000097          	auipc	ra,0x0
   46:	fbe080e7          	jalr	-66(ra) # 0 <print>
 
@@ -71,7 +71,7 @@
   if(n == N){
     print("fork claimed to work N times!\n");
   64:	00000517          	auipc	a0,0x0
-  68:	3dc50513          	addi	a0,a0,988 # 440 <uptime+0x1e>
+  68:	3ec50513          	addi	a0,a0,1004 # 450 <sysinfo+0x1e>
   6c:	00000097          	auipc	ra,0x0
   70:	f94080e7          	jalr	-108(ra) # 0 <print>
     exit(1);
@@ -113,7 +113,7 @@
 
   print("fork test OK\n");
   b4:	00000517          	auipc	a0,0x0
-  b8:	3dc50513          	addi	a0,a0,988 # 490 <uptime+0x6e>
+  b8:	3ec50513          	addi	a0,a0,1004 # 4a0 <sysinfo+0x6e>
   bc:	00000097          	auipc	ra,0x0
   c0:	f44080e7          	jalr	-188(ra) # 0 <print>
 }
@@ -125,7 +125,7 @@
   ce:	8082                	ret
       print("wait stopped early\n");
   d0:	00000517          	auipc	a0,0x0
-  d4:	39050513          	addi	a0,a0,912 # 460 <uptime+0x3e>
+  d4:	3a050513          	addi	a0,a0,928 # 470 <sysinfo+0x3e>
   d8:	00000097          	auipc	ra,0x0
   dc:	f28080e7          	jalr	-216(ra) # 0 <print>
       exit(1);
@@ -134,7 +134,7 @@
   e6:	2a8080e7          	jalr	680(ra) # 38a <exit>
     print("wait got too many\n");
   ea:	00000517          	auipc	a0,0x0
-  ee:	38e50513          	addi	a0,a0,910 # 478 <uptime+0x56>
+  ee:	39e50513          	addi	a0,a0,926 # 488 <sysinfo+0x56>
   f2:	00000097          	auipc	ra,0x0
   f6:	f0e080e7          	jalr	-242(ra) # 0 <print>
     exit(1);
@@ -789,3 +789,23 @@
  424:	00000073          	ecall
  ret
  428:	8082                	ret
+
+000000000000042a <trace>:
+.global trace
+trace:
+ li a7, SYS_trace
+ 42a:	48d9                	li	a7,22
+ ecall
+ 42c:	00000073          	ecall
+ ret
+ 430:	8082                	ret
+
+0000000000000432 <sysinfo>:
+.global sysinfo
+sysinfo:
+ li a7, SYS_sysinfo
+ 432:	48dd                	li	a7,23
+ ecall
+ 434:	00000073          	ecall
+ ret
+ 438:	8082                	ret
Binary files ./user/forktest.o and ../xv6-labs-2021/user/forktest.o differ
diff -urN ./user/grep.asm ../xv6-labs-2021/user/grep.asm
--- ./user/grep.asm	2021-12-05 17:54:42.000000000 +0800
+++ ../xv6-labs-2021/user/grep.asm	2021-11-26 14:46:16.000000000 +0800
@@ -178,7 +178,7 @@
   while((n = read(fd, buf+m, sizeof(buf)-m-1)) > 0){
  136:	3ff00b93          	li	s7,1023
  13a:	00001a97          	auipc	s5,0x1
- 13e:	9a6a8a93          	addi	s5,s5,-1626 # ae0 <buf>
+ 13e:	9b6a8a93          	addi	s5,s5,-1610 # af0 <buf>
  142:	a0a1                	j	18a <grep+0x70>
       p = q+1;
  144:	00148913          	addi	s2,s1,1
@@ -299,10 +299,10 @@
  24a:	2c4080e7          	jalr	708(ra) # 50a <exit>
     fprintf(2, "usage: grep pattern [file ...]\n");
  24e:	00000597          	auipc	a1,0x0
- 252:	7da58593          	addi	a1,a1,2010 # a28 <malloc+0xec>
+ 252:	7ea58593          	addi	a1,a1,2026 # a38 <malloc+0xec>
  256:	4509                	li	a0,2
  258:	00000097          	auipc	ra,0x0
- 25c:	5fe080e7          	jalr	1534(ra) # 856 <fprintf>
+ 25c:	60e080e7          	jalr	1550(ra) # 866 <fprintf>
     exit(1);
  260:	4505                	li	a0,1
  262:	00000097          	auipc	ra,0x0
@@ -319,9 +319,9 @@
       printf("grep: cannot open %s\n", argv[i]);
  280:	00093583          	ld	a1,0(s2)
  284:	00000517          	auipc	a0,0x0
- 288:	7c450513          	addi	a0,a0,1988 # a48 <malloc+0x10c>
+ 288:	7d450513          	addi	a0,a0,2004 # a58 <malloc+0x10c>
  28c:	00000097          	auipc	ra,0x0
- 290:	5f8080e7          	jalr	1528(ra) # 884 <printf>
+ 290:	608080e7          	jalr	1544(ra) # 894 <printf>
       exit(1);
  294:	4505                	li	a0,1
  296:	00000097          	auipc	ra,0x0
@@ -958,632 +958,652 @@
  ret
  5a8:	8082                	ret
 
-00000000000005aa <putc>:
+00000000000005aa <trace>:
+.global trace
+trace:
+ li a7, SYS_trace
+ 5aa:	48d9                	li	a7,22
+ ecall
+ 5ac:	00000073          	ecall
+ ret
+ 5b0:	8082                	ret
+
+00000000000005b2 <sysinfo>:
+.global sysinfo
+sysinfo:
+ li a7, SYS_sysinfo
+ 5b2:	48dd                	li	a7,23
+ ecall
+ 5b4:	00000073          	ecall
+ ret
+ 5b8:	8082                	ret
+
+00000000000005ba <putc>:
 
 static char digits[] = "0123456789ABCDEF";
 
 static void
 putc(int fd, char c)
 {
- 5aa:	1101                	addi	sp,sp,-32
- 5ac:	ec06                	sd	ra,24(sp)
- 5ae:	e822                	sd	s0,16(sp)
- 5b0:	1000                	addi	s0,sp,32
- 5b2:	feb407a3          	sb	a1,-17(s0)
+ 5ba:	1101                	addi	sp,sp,-32
+ 5bc:	ec06                	sd	ra,24(sp)
+ 5be:	e822                	sd	s0,16(sp)
+ 5c0:	1000                	addi	s0,sp,32
+ 5c2:	feb407a3          	sb	a1,-17(s0)
   write(fd, &c, 1);
- 5b6:	4605                	li	a2,1
- 5b8:	fef40593          	addi	a1,s0,-17
- 5bc:	00000097          	auipc	ra,0x0
- 5c0:	f6e080e7          	jalr	-146(ra) # 52a <write>
-}
- 5c4:	60e2                	ld	ra,24(sp)
- 5c6:	6442                	ld	s0,16(sp)
- 5c8:	6105                	addi	sp,sp,32
- 5ca:	8082                	ret
+ 5c6:	4605                	li	a2,1
+ 5c8:	fef40593          	addi	a1,s0,-17
+ 5cc:	00000097          	auipc	ra,0x0
+ 5d0:	f5e080e7          	jalr	-162(ra) # 52a <write>
+}
+ 5d4:	60e2                	ld	ra,24(sp)
+ 5d6:	6442                	ld	s0,16(sp)
+ 5d8:	6105                	addi	sp,sp,32
+ 5da:	8082                	ret
 
-00000000000005cc <printint>:
+00000000000005dc <printint>:
 
 static void
 printint(int fd, int xx, int base, int sgn)
 {
- 5cc:	7139                	addi	sp,sp,-64
- 5ce:	fc06                	sd	ra,56(sp)
- 5d0:	f822                	sd	s0,48(sp)
- 5d2:	f426                	sd	s1,40(sp)
- 5d4:	f04a                	sd	s2,32(sp)
- 5d6:	ec4e                	sd	s3,24(sp)
- 5d8:	0080                	addi	s0,sp,64
- 5da:	84aa                	mv	s1,a0
+ 5dc:	7139                	addi	sp,sp,-64
+ 5de:	fc06                	sd	ra,56(sp)
+ 5e0:	f822                	sd	s0,48(sp)
+ 5e2:	f426                	sd	s1,40(sp)
+ 5e4:	f04a                	sd	s2,32(sp)
+ 5e6:	ec4e                	sd	s3,24(sp)
+ 5e8:	0080                	addi	s0,sp,64
+ 5ea:	84aa                	mv	s1,a0
   char buf[16];
   int i, neg;
   uint x;
 
   neg = 0;
   if(sgn && xx < 0){
- 5dc:	c299                	beqz	a3,5e2 <printint+0x16>
- 5de:	0805c963          	bltz	a1,670 <printint+0xa4>
+ 5ec:	c299                	beqz	a3,5f2 <printint+0x16>
+ 5ee:	0805c963          	bltz	a1,680 <printint+0xa4>
     neg = 1;
     x = -xx;
   } else {
     x = xx;
- 5e2:	2581                	sext.w	a1,a1
+ 5f2:	2581                	sext.w	a1,a1
   neg = 0;
- 5e4:	4881                	li	a7,0
- 5e6:	fc040693          	addi	a3,s0,-64
+ 5f4:	4881                	li	a7,0
+ 5f6:	fc040693          	addi	a3,s0,-64
   }
 
   i = 0;
- 5ea:	4701                	li	a4,0
+ 5fa:	4701                	li	a4,0
   do{
     buf[i++] = digits[x % base];
- 5ec:	2601                	sext.w	a2,a2
- 5ee:	00000517          	auipc	a0,0x0
- 5f2:	4d250513          	addi	a0,a0,1234 # ac0 <digits>
- 5f6:	883a                	mv	a6,a4
- 5f8:	2705                	addiw	a4,a4,1
- 5fa:	02c5f7bb          	remuw	a5,a1,a2
- 5fe:	1782                	slli	a5,a5,0x20
- 600:	9381                	srli	a5,a5,0x20
- 602:	97aa                	add	a5,a5,a0
- 604:	0007c783          	lbu	a5,0(a5)
- 608:	00f68023          	sb	a5,0(a3)
+ 5fc:	2601                	sext.w	a2,a2
+ 5fe:	00000517          	auipc	a0,0x0
+ 602:	4d250513          	addi	a0,a0,1234 # ad0 <digits>
+ 606:	883a                	mv	a6,a4
+ 608:	2705                	addiw	a4,a4,1
+ 60a:	02c5f7bb          	remuw	a5,a1,a2
+ 60e:	1782                	slli	a5,a5,0x20
+ 610:	9381                	srli	a5,a5,0x20
+ 612:	97aa                	add	a5,a5,a0
+ 614:	0007c783          	lbu	a5,0(a5)
+ 618:	00f68023          	sb	a5,0(a3)
   }while((x /= base) != 0);
- 60c:	0005879b          	sext.w	a5,a1
- 610:	02c5d5bb          	divuw	a1,a1,a2
- 614:	0685                	addi	a3,a3,1
- 616:	fec7f0e3          	bgeu	a5,a2,5f6 <printint+0x2a>
+ 61c:	0005879b          	sext.w	a5,a1
+ 620:	02c5d5bb          	divuw	a1,a1,a2
+ 624:	0685                	addi	a3,a3,1
+ 626:	fec7f0e3          	bgeu	a5,a2,606 <printint+0x2a>
   if(neg)
- 61a:	00088c63          	beqz	a7,632 <printint+0x66>
+ 62a:	00088c63          	beqz	a7,642 <printint+0x66>
     buf[i++] = '-';
- 61e:	fd070793          	addi	a5,a4,-48
- 622:	00878733          	add	a4,a5,s0
- 626:	02d00793          	li	a5,45
- 62a:	fef70823          	sb	a5,-16(a4)
- 62e:	0028071b          	addiw	a4,a6,2
+ 62e:	fd070793          	addi	a5,a4,-48
+ 632:	00878733          	add	a4,a5,s0
+ 636:	02d00793          	li	a5,45
+ 63a:	fef70823          	sb	a5,-16(a4)
+ 63e:	0028071b          	addiw	a4,a6,2
 
   while(--i >= 0)
- 632:	02e05863          	blez	a4,662 <printint+0x96>
- 636:	fc040793          	addi	a5,s0,-64
- 63a:	00e78933          	add	s2,a5,a4
- 63e:	fff78993          	addi	s3,a5,-1
- 642:	99ba                	add	s3,s3,a4
- 644:	377d                	addiw	a4,a4,-1
- 646:	1702                	slli	a4,a4,0x20
- 648:	9301                	srli	a4,a4,0x20
- 64a:	40e989b3          	sub	s3,s3,a4
+ 642:	02e05863          	blez	a4,672 <printint+0x96>
+ 646:	fc040793          	addi	a5,s0,-64
+ 64a:	00e78933          	add	s2,a5,a4
+ 64e:	fff78993          	addi	s3,a5,-1
+ 652:	99ba                	add	s3,s3,a4
+ 654:	377d                	addiw	a4,a4,-1
+ 656:	1702                	slli	a4,a4,0x20
+ 658:	9301                	srli	a4,a4,0x20
+ 65a:	40e989b3          	sub	s3,s3,a4
     putc(fd, buf[i]);
- 64e:	fff94583          	lbu	a1,-1(s2)
- 652:	8526                	mv	a0,s1
- 654:	00000097          	auipc	ra,0x0
- 658:	f56080e7          	jalr	-170(ra) # 5aa <putc>
+ 65e:	fff94583          	lbu	a1,-1(s2)
+ 662:	8526                	mv	a0,s1
+ 664:	00000097          	auipc	ra,0x0
+ 668:	f56080e7          	jalr	-170(ra) # 5ba <putc>
   while(--i >= 0)
- 65c:	197d                	addi	s2,s2,-1
- 65e:	ff3918e3          	bne	s2,s3,64e <printint+0x82>
+ 66c:	197d                	addi	s2,s2,-1
+ 66e:	ff3918e3          	bne	s2,s3,65e <printint+0x82>
 }
- 662:	70e2                	ld	ra,56(sp)
- 664:	7442                	ld	s0,48(sp)
- 666:	74a2                	ld	s1,40(sp)
- 668:	7902                	ld	s2,32(sp)
- 66a:	69e2                	ld	s3,24(sp)
- 66c:	6121                	addi	sp,sp,64
- 66e:	8082                	ret
+ 672:	70e2                	ld	ra,56(sp)
+ 674:	7442                	ld	s0,48(sp)
+ 676:	74a2                	ld	s1,40(sp)
+ 678:	7902                	ld	s2,32(sp)
+ 67a:	69e2                	ld	s3,24(sp)
+ 67c:	6121                	addi	sp,sp,64
+ 67e:	8082                	ret
     x = -xx;
- 670:	40b005bb          	negw	a1,a1
+ 680:	40b005bb          	negw	a1,a1
     neg = 1;
- 674:	4885                	li	a7,1
+ 684:	4885                	li	a7,1
     x = -xx;
- 676:	bf85                	j	5e6 <printint+0x1a>
+ 686:	bf85                	j	5f6 <printint+0x1a>
 
-0000000000000678 <vprintf>:
+0000000000000688 <vprintf>:
 }
 
 // Print to the given fd. Only understands %d, %x, %p, %s.
 void
 vprintf(int fd, const char *fmt, va_list ap)
 {
- 678:	7119                	addi	sp,sp,-128
- 67a:	fc86                	sd	ra,120(sp)
- 67c:	f8a2                	sd	s0,112(sp)
- 67e:	f4a6                	sd	s1,104(sp)
- 680:	f0ca                	sd	s2,96(sp)
- 682:	ecce                	sd	s3,88(sp)
- 684:	e8d2                	sd	s4,80(sp)
- 686:	e4d6                	sd	s5,72(sp)
- 688:	e0da                	sd	s6,64(sp)
- 68a:	fc5e                	sd	s7,56(sp)
- 68c:	f862                	sd	s8,48(sp)
- 68e:	f466                	sd	s9,40(sp)
- 690:	f06a                	sd	s10,32(sp)
- 692:	ec6e                	sd	s11,24(sp)
- 694:	0100                	addi	s0,sp,128
+ 688:	7119                	addi	sp,sp,-128
+ 68a:	fc86                	sd	ra,120(sp)
+ 68c:	f8a2                	sd	s0,112(sp)
+ 68e:	f4a6                	sd	s1,104(sp)
+ 690:	f0ca                	sd	s2,96(sp)
+ 692:	ecce                	sd	s3,88(sp)
+ 694:	e8d2                	sd	s4,80(sp)
+ 696:	e4d6                	sd	s5,72(sp)
+ 698:	e0da                	sd	s6,64(sp)
+ 69a:	fc5e                	sd	s7,56(sp)
+ 69c:	f862                	sd	s8,48(sp)
+ 69e:	f466                	sd	s9,40(sp)
+ 6a0:	f06a                	sd	s10,32(sp)
+ 6a2:	ec6e                	sd	s11,24(sp)
+ 6a4:	0100                	addi	s0,sp,128
   char *s;
   int c, i, state;
 
   state = 0;
   for(i = 0; fmt[i]; i++){
- 696:	0005c903          	lbu	s2,0(a1)
- 69a:	18090f63          	beqz	s2,838 <vprintf+0x1c0>
- 69e:	8aaa                	mv	s5,a0
- 6a0:	8b32                	mv	s6,a2
- 6a2:	00158493          	addi	s1,a1,1
+ 6a6:	0005c903          	lbu	s2,0(a1)
+ 6aa:	18090f63          	beqz	s2,848 <vprintf+0x1c0>
+ 6ae:	8aaa                	mv	s5,a0
+ 6b0:	8b32                	mv	s6,a2
+ 6b2:	00158493          	addi	s1,a1,1
   state = 0;
- 6a6:	4981                	li	s3,0
+ 6b6:	4981                	li	s3,0
       if(c == '%'){
         state = '%';
       } else {
         putc(fd, c);
       }
     } else if(state == '%'){
- 6a8:	02500a13          	li	s4,37
- 6ac:	4c55                	li	s8,21
- 6ae:	00000c97          	auipc	s9,0x0
- 6b2:	3bac8c93          	addi	s9,s9,954 # a68 <malloc+0x12c>
+ 6b8:	02500a13          	li	s4,37
+ 6bc:	4c55                	li	s8,21
+ 6be:	00000c97          	auipc	s9,0x0
+ 6c2:	3bac8c93          	addi	s9,s9,954 # a78 <malloc+0x12c>
         printptr(fd, va_arg(ap, uint64));
       } else if(c == 's'){
         s = va_arg(ap, char*);
         if(s == 0)
           s = "(null)";
         while(*s != 0){
- 6b6:	02800d93          	li	s11,40
+ 6c6:	02800d93          	li	s11,40
   putc(fd, 'x');
- 6ba:	4d41                	li	s10,16
+ 6ca:	4d41                	li	s10,16
     putc(fd, digits[x >> (sizeof(uint64) * 8 - 4)]);
- 6bc:	00000b97          	auipc	s7,0x0
- 6c0:	404b8b93          	addi	s7,s7,1028 # ac0 <digits>
- 6c4:	a839                	j	6e2 <vprintf+0x6a>
+ 6cc:	00000b97          	auipc	s7,0x0
+ 6d0:	404b8b93          	addi	s7,s7,1028 # ad0 <digits>
+ 6d4:	a839                	j	6f2 <vprintf+0x6a>
         putc(fd, c);
- 6c6:	85ca                	mv	a1,s2
- 6c8:	8556                	mv	a0,s5
- 6ca:	00000097          	auipc	ra,0x0
- 6ce:	ee0080e7          	jalr	-288(ra) # 5aa <putc>
- 6d2:	a019                	j	6d8 <vprintf+0x60>
+ 6d6:	85ca                	mv	a1,s2
+ 6d8:	8556                	mv	a0,s5
+ 6da:	00000097          	auipc	ra,0x0
+ 6de:	ee0080e7          	jalr	-288(ra) # 5ba <putc>
+ 6e2:	a019                	j	6e8 <vprintf+0x60>
     } else if(state == '%'){
- 6d4:	01498d63          	beq	s3,s4,6ee <vprintf+0x76>
+ 6e4:	01498d63          	beq	s3,s4,6fe <vprintf+0x76>
   for(i = 0; fmt[i]; i++){
- 6d8:	0485                	addi	s1,s1,1
- 6da:	fff4c903          	lbu	s2,-1(s1)
- 6de:	14090d63          	beqz	s2,838 <vprintf+0x1c0>
+ 6e8:	0485                	addi	s1,s1,1
+ 6ea:	fff4c903          	lbu	s2,-1(s1)
+ 6ee:	14090d63          	beqz	s2,848 <vprintf+0x1c0>
     if(state == 0){
- 6e2:	fe0999e3          	bnez	s3,6d4 <vprintf+0x5c>
+ 6f2:	fe0999e3          	bnez	s3,6e4 <vprintf+0x5c>
       if(c == '%'){
- 6e6:	ff4910e3          	bne	s2,s4,6c6 <vprintf+0x4e>
+ 6f6:	ff4910e3          	bne	s2,s4,6d6 <vprintf+0x4e>
         state = '%';
- 6ea:	89d2                	mv	s3,s4
- 6ec:	b7f5                	j	6d8 <vprintf+0x60>
+ 6fa:	89d2                	mv	s3,s4
+ 6fc:	b7f5                	j	6e8 <vprintf+0x60>
       if(c == 'd'){
- 6ee:	11490c63          	beq	s2,s4,806 <vprintf+0x18e>
- 6f2:	f9d9079b          	addiw	a5,s2,-99
- 6f6:	0ff7f793          	zext.b	a5,a5
- 6fa:	10fc6e63          	bltu	s8,a5,816 <vprintf+0x19e>
- 6fe:	f9d9079b          	addiw	a5,s2,-99
- 702:	0ff7f713          	zext.b	a4,a5
- 706:	10ec6863          	bltu	s8,a4,816 <vprintf+0x19e>
- 70a:	00271793          	slli	a5,a4,0x2
- 70e:	97e6                	add	a5,a5,s9
- 710:	439c                	lw	a5,0(a5)
- 712:	97e6                	add	a5,a5,s9
- 714:	8782                	jr	a5
+ 6fe:	11490c63          	beq	s2,s4,816 <vprintf+0x18e>
+ 702:	f9d9079b          	addiw	a5,s2,-99
+ 706:	0ff7f793          	zext.b	a5,a5
+ 70a:	10fc6e63          	bltu	s8,a5,826 <vprintf+0x19e>
+ 70e:	f9d9079b          	addiw	a5,s2,-99
+ 712:	0ff7f713          	zext.b	a4,a5
+ 716:	10ec6863          	bltu	s8,a4,826 <vprintf+0x19e>
+ 71a:	00271793          	slli	a5,a4,0x2
+ 71e:	97e6                	add	a5,a5,s9
+ 720:	439c                	lw	a5,0(a5)
+ 722:	97e6                	add	a5,a5,s9
+ 724:	8782                	jr	a5
         printint(fd, va_arg(ap, int), 10, 1);
- 716:	008b0913          	addi	s2,s6,8
- 71a:	4685                	li	a3,1
- 71c:	4629                	li	a2,10
- 71e:	000b2583          	lw	a1,0(s6)
- 722:	8556                	mv	a0,s5
- 724:	00000097          	auipc	ra,0x0
- 728:	ea8080e7          	jalr	-344(ra) # 5cc <printint>
- 72c:	8b4a                	mv	s6,s2
+ 726:	008b0913          	addi	s2,s6,8
+ 72a:	4685                	li	a3,1
+ 72c:	4629                	li	a2,10
+ 72e:	000b2583          	lw	a1,0(s6)
+ 732:	8556                	mv	a0,s5
+ 734:	00000097          	auipc	ra,0x0
+ 738:	ea8080e7          	jalr	-344(ra) # 5dc <printint>
+ 73c:	8b4a                	mv	s6,s2
       } else {
         // Unknown % sequence.  Print it to draw attention.
         putc(fd, '%');
         putc(fd, c);
       }
       state = 0;
- 72e:	4981                	li	s3,0
- 730:	b765                	j	6d8 <vprintf+0x60>
+ 73e:	4981                	li	s3,0
+ 740:	b765                	j	6e8 <vprintf+0x60>
         printint(fd, va_arg(ap, uint64), 10, 0);
- 732:	008b0913          	addi	s2,s6,8
- 736:	4681                	li	a3,0
- 738:	4629                	li	a2,10
- 73a:	000b2583          	lw	a1,0(s6)
- 73e:	8556                	mv	a0,s5
- 740:	00000097          	auipc	ra,0x0
- 744:	e8c080e7          	jalr	-372(ra) # 5cc <printint>
- 748:	8b4a                	mv	s6,s2
+ 742:	008b0913          	addi	s2,s6,8
+ 746:	4681                	li	a3,0
+ 748:	4629                	li	a2,10
+ 74a:	000b2583          	lw	a1,0(s6)
+ 74e:	8556                	mv	a0,s5
+ 750:	00000097          	auipc	ra,0x0
+ 754:	e8c080e7          	jalr	-372(ra) # 5dc <printint>
+ 758:	8b4a                	mv	s6,s2
       state = 0;
- 74a:	4981                	li	s3,0
- 74c:	b771                	j	6d8 <vprintf+0x60>
+ 75a:	4981                	li	s3,0
+ 75c:	b771                	j	6e8 <vprintf+0x60>
         printint(fd, va_arg(ap, int), 16, 0);
- 74e:	008b0913          	addi	s2,s6,8
- 752:	4681                	li	a3,0
- 754:	866a                	mv	a2,s10
- 756:	000b2583          	lw	a1,0(s6)
- 75a:	8556                	mv	a0,s5
- 75c:	00000097          	auipc	ra,0x0
- 760:	e70080e7          	jalr	-400(ra) # 5cc <printint>
- 764:	8b4a                	mv	s6,s2
+ 75e:	008b0913          	addi	s2,s6,8
+ 762:	4681                	li	a3,0
+ 764:	866a                	mv	a2,s10
+ 766:	000b2583          	lw	a1,0(s6)
+ 76a:	8556                	mv	a0,s5
+ 76c:	00000097          	auipc	ra,0x0
+ 770:	e70080e7          	jalr	-400(ra) # 5dc <printint>
+ 774:	8b4a                	mv	s6,s2
       state = 0;
- 766:	4981                	li	s3,0
- 768:	bf85                	j	6d8 <vprintf+0x60>
+ 776:	4981                	li	s3,0
+ 778:	bf85                	j	6e8 <vprintf+0x60>
         printptr(fd, va_arg(ap, uint64));
- 76a:	008b0793          	addi	a5,s6,8
- 76e:	f8f43423          	sd	a5,-120(s0)
- 772:	000b3983          	ld	s3,0(s6)
+ 77a:	008b0793          	addi	a5,s6,8
+ 77e:	f8f43423          	sd	a5,-120(s0)
+ 782:	000b3983          	ld	s3,0(s6)
   putc(fd, '0');
- 776:	03000593          	li	a1,48
- 77a:	8556                	mv	a0,s5
- 77c:	00000097          	auipc	ra,0x0
- 780:	e2e080e7          	jalr	-466(ra) # 5aa <putc>
+ 786:	03000593          	li	a1,48
+ 78a:	8556                	mv	a0,s5
+ 78c:	00000097          	auipc	ra,0x0
+ 790:	e2e080e7          	jalr	-466(ra) # 5ba <putc>
   putc(fd, 'x');
- 784:	07800593          	li	a1,120
- 788:	8556                	mv	a0,s5
- 78a:	00000097          	auipc	ra,0x0
- 78e:	e20080e7          	jalr	-480(ra) # 5aa <putc>
- 792:	896a                	mv	s2,s10
+ 794:	07800593          	li	a1,120
+ 798:	8556                	mv	a0,s5
+ 79a:	00000097          	auipc	ra,0x0
+ 79e:	e20080e7          	jalr	-480(ra) # 5ba <putc>
+ 7a2:	896a                	mv	s2,s10
     putc(fd, digits[x >> (sizeof(uint64) * 8 - 4)]);
- 794:	03c9d793          	srli	a5,s3,0x3c
- 798:	97de                	add	a5,a5,s7
- 79a:	0007c583          	lbu	a1,0(a5)
- 79e:	8556                	mv	a0,s5
- 7a0:	00000097          	auipc	ra,0x0
- 7a4:	e0a080e7          	jalr	-502(ra) # 5aa <putc>
+ 7a4:	03c9d793          	srli	a5,s3,0x3c
+ 7a8:	97de                	add	a5,a5,s7
+ 7aa:	0007c583          	lbu	a1,0(a5)
+ 7ae:	8556                	mv	a0,s5
+ 7b0:	00000097          	auipc	ra,0x0
+ 7b4:	e0a080e7          	jalr	-502(ra) # 5ba <putc>
   for (i = 0; i < (sizeof(uint64) * 2); i++, x <<= 4)
- 7a8:	0992                	slli	s3,s3,0x4
- 7aa:	397d                	addiw	s2,s2,-1
- 7ac:	fe0914e3          	bnez	s2,794 <vprintf+0x11c>
+ 7b8:	0992                	slli	s3,s3,0x4
+ 7ba:	397d                	addiw	s2,s2,-1
+ 7bc:	fe0914e3          	bnez	s2,7a4 <vprintf+0x11c>
         printptr(fd, va_arg(ap, uint64));
- 7b0:	f8843b03          	ld	s6,-120(s0)
+ 7c0:	f8843b03          	ld	s6,-120(s0)
       state = 0;
- 7b4:	4981                	li	s3,0
- 7b6:	b70d                	j	6d8 <vprintf+0x60>
+ 7c4:	4981                	li	s3,0
+ 7c6:	b70d                	j	6e8 <vprintf+0x60>
         s = va_arg(ap, char*);
- 7b8:	008b0913          	addi	s2,s6,8
- 7bc:	000b3983          	ld	s3,0(s6)
+ 7c8:	008b0913          	addi	s2,s6,8
+ 7cc:	000b3983          	ld	s3,0(s6)
         if(s == 0)
- 7c0:	02098163          	beqz	s3,7e2 <vprintf+0x16a>
+ 7d0:	02098163          	beqz	s3,7f2 <vprintf+0x16a>
         while(*s != 0){
- 7c4:	0009c583          	lbu	a1,0(s3)
- 7c8:	c5ad                	beqz	a1,832 <vprintf+0x1ba>
+ 7d4:	0009c583          	lbu	a1,0(s3)
+ 7d8:	c5ad                	beqz	a1,842 <vprintf+0x1ba>
           putc(fd, *s);
- 7ca:	8556                	mv	a0,s5
- 7cc:	00000097          	auipc	ra,0x0
- 7d0:	dde080e7          	jalr	-546(ra) # 5aa <putc>
+ 7da:	8556                	mv	a0,s5
+ 7dc:	00000097          	auipc	ra,0x0
+ 7e0:	dde080e7          	jalr	-546(ra) # 5ba <putc>
           s++;
- 7d4:	0985                	addi	s3,s3,1
+ 7e4:	0985                	addi	s3,s3,1
         while(*s != 0){
- 7d6:	0009c583          	lbu	a1,0(s3)
- 7da:	f9e5                	bnez	a1,7ca <vprintf+0x152>
+ 7e6:	0009c583          	lbu	a1,0(s3)
+ 7ea:	f9e5                	bnez	a1,7da <vprintf+0x152>
         s = va_arg(ap, char*);
- 7dc:	8b4a                	mv	s6,s2
+ 7ec:	8b4a                	mv	s6,s2
       state = 0;
- 7de:	4981                	li	s3,0
- 7e0:	bde5                	j	6d8 <vprintf+0x60>
+ 7ee:	4981                	li	s3,0
+ 7f0:	bde5                	j	6e8 <vprintf+0x60>
           s = "(null)";
- 7e2:	00000997          	auipc	s3,0x0
- 7e6:	27e98993          	addi	s3,s3,638 # a60 <malloc+0x124>
+ 7f2:	00000997          	auipc	s3,0x0
+ 7f6:	27e98993          	addi	s3,s3,638 # a70 <malloc+0x124>
         while(*s != 0){
- 7ea:	85ee                	mv	a1,s11
- 7ec:	bff9                	j	7ca <vprintf+0x152>
+ 7fa:	85ee                	mv	a1,s11
+ 7fc:	bff9                	j	7da <vprintf+0x152>
         putc(fd, va_arg(ap, uint));
- 7ee:	008b0913          	addi	s2,s6,8
- 7f2:	000b4583          	lbu	a1,0(s6)
- 7f6:	8556                	mv	a0,s5
- 7f8:	00000097          	auipc	ra,0x0
- 7fc:	db2080e7          	jalr	-590(ra) # 5aa <putc>
- 800:	8b4a                	mv	s6,s2
-      state = 0;
- 802:	4981                	li	s3,0
- 804:	bdd1                	j	6d8 <vprintf+0x60>
-        putc(fd, c);
- 806:	85d2                	mv	a1,s4
- 808:	8556                	mv	a0,s5
- 80a:	00000097          	auipc	ra,0x0
- 80e:	da0080e7          	jalr	-608(ra) # 5aa <putc>
+ 7fe:	008b0913          	addi	s2,s6,8
+ 802:	000b4583          	lbu	a1,0(s6)
+ 806:	8556                	mv	a0,s5
+ 808:	00000097          	auipc	ra,0x0
+ 80c:	db2080e7          	jalr	-590(ra) # 5ba <putc>
+ 810:	8b4a                	mv	s6,s2
       state = 0;
  812:	4981                	li	s3,0
- 814:	b5d1                	j	6d8 <vprintf+0x60>
-        putc(fd, '%');
+ 814:	bdd1                	j	6e8 <vprintf+0x60>
+        putc(fd, c);
  816:	85d2                	mv	a1,s4
  818:	8556                	mv	a0,s5
  81a:	00000097          	auipc	ra,0x0
- 81e:	d90080e7          	jalr	-624(ra) # 5aa <putc>
+ 81e:	da0080e7          	jalr	-608(ra) # 5ba <putc>
+      state = 0;
+ 822:	4981                	li	s3,0
+ 824:	b5d1                	j	6e8 <vprintf+0x60>
+        putc(fd, '%');
+ 826:	85d2                	mv	a1,s4
+ 828:	8556                	mv	a0,s5
+ 82a:	00000097          	auipc	ra,0x0
+ 82e:	d90080e7          	jalr	-624(ra) # 5ba <putc>
         putc(fd, c);
- 822:	85ca                	mv	a1,s2
- 824:	8556                	mv	a0,s5
- 826:	00000097          	auipc	ra,0x0
- 82a:	d84080e7          	jalr	-636(ra) # 5aa <putc>
+ 832:	85ca                	mv	a1,s2
+ 834:	8556                	mv	a0,s5
+ 836:	00000097          	auipc	ra,0x0
+ 83a:	d84080e7          	jalr	-636(ra) # 5ba <putc>
       state = 0;
- 82e:	4981                	li	s3,0
- 830:	b565                	j	6d8 <vprintf+0x60>
+ 83e:	4981                	li	s3,0
+ 840:	b565                	j	6e8 <vprintf+0x60>
         s = va_arg(ap, char*);
- 832:	8b4a                	mv	s6,s2
+ 842:	8b4a                	mv	s6,s2
       state = 0;
- 834:	4981                	li	s3,0
- 836:	b54d                	j	6d8 <vprintf+0x60>
+ 844:	4981                	li	s3,0
+ 846:	b54d                	j	6e8 <vprintf+0x60>
     }
   }
 }
- 838:	70e6                	ld	ra,120(sp)
- 83a:	7446                	ld	s0,112(sp)
- 83c:	74a6                	ld	s1,104(sp)
- 83e:	7906                	ld	s2,96(sp)
- 840:	69e6                	ld	s3,88(sp)
- 842:	6a46                	ld	s4,80(sp)
- 844:	6aa6                	ld	s5,72(sp)
- 846:	6b06                	ld	s6,64(sp)
- 848:	7be2                	ld	s7,56(sp)
- 84a:	7c42                	ld	s8,48(sp)
- 84c:	7ca2                	ld	s9,40(sp)
- 84e:	7d02                	ld	s10,32(sp)
- 850:	6de2                	ld	s11,24(sp)
- 852:	6109                	addi	sp,sp,128
- 854:	8082                	ret
+ 848:	70e6                	ld	ra,120(sp)
+ 84a:	7446                	ld	s0,112(sp)
+ 84c:	74a6                	ld	s1,104(sp)
+ 84e:	7906                	ld	s2,96(sp)
+ 850:	69e6                	ld	s3,88(sp)
+ 852:	6a46                	ld	s4,80(sp)
+ 854:	6aa6                	ld	s5,72(sp)
+ 856:	6b06                	ld	s6,64(sp)
+ 858:	7be2                	ld	s7,56(sp)
+ 85a:	7c42                	ld	s8,48(sp)
+ 85c:	7ca2                	ld	s9,40(sp)
+ 85e:	7d02                	ld	s10,32(sp)
+ 860:	6de2                	ld	s11,24(sp)
+ 862:	6109                	addi	sp,sp,128
+ 864:	8082                	ret
 
-0000000000000856 <fprintf>:
+0000000000000866 <fprintf>:
 
 void
 fprintf(int fd, const char *fmt, ...)
 {
- 856:	715d                	addi	sp,sp,-80
- 858:	ec06                	sd	ra,24(sp)
- 85a:	e822                	sd	s0,16(sp)
- 85c:	1000                	addi	s0,sp,32
- 85e:	e010                	sd	a2,0(s0)
- 860:	e414                	sd	a3,8(s0)
- 862:	e818                	sd	a4,16(s0)
- 864:	ec1c                	sd	a5,24(s0)
- 866:	03043023          	sd	a6,32(s0)
- 86a:	03143423          	sd	a7,40(s0)
+ 866:	715d                	addi	sp,sp,-80
+ 868:	ec06                	sd	ra,24(sp)
+ 86a:	e822                	sd	s0,16(sp)
+ 86c:	1000                	addi	s0,sp,32
+ 86e:	e010                	sd	a2,0(s0)
+ 870:	e414                	sd	a3,8(s0)
+ 872:	e818                	sd	a4,16(s0)
+ 874:	ec1c                	sd	a5,24(s0)
+ 876:	03043023          	sd	a6,32(s0)
+ 87a:	03143423          	sd	a7,40(s0)
   va_list ap;
 
   va_start(ap, fmt);
- 86e:	fe843423          	sd	s0,-24(s0)
+ 87e:	fe843423          	sd	s0,-24(s0)
   vprintf(fd, fmt, ap);
- 872:	8622                	mv	a2,s0
- 874:	00000097          	auipc	ra,0x0
- 878:	e04080e7          	jalr	-508(ra) # 678 <vprintf>
-}
- 87c:	60e2                	ld	ra,24(sp)
- 87e:	6442                	ld	s0,16(sp)
- 880:	6161                	addi	sp,sp,80
- 882:	8082                	ret
+ 882:	8622                	mv	a2,s0
+ 884:	00000097          	auipc	ra,0x0
+ 888:	e04080e7          	jalr	-508(ra) # 688 <vprintf>
+}
+ 88c:	60e2                	ld	ra,24(sp)
+ 88e:	6442                	ld	s0,16(sp)
+ 890:	6161                	addi	sp,sp,80
+ 892:	8082                	ret
 
-0000000000000884 <printf>:
+0000000000000894 <printf>:
 
 void
 printf(const char *fmt, ...)
 {
- 884:	711d                	addi	sp,sp,-96
- 886:	ec06                	sd	ra,24(sp)
- 888:	e822                	sd	s0,16(sp)
- 88a:	1000                	addi	s0,sp,32
- 88c:	e40c                	sd	a1,8(s0)
- 88e:	e810                	sd	a2,16(s0)
- 890:	ec14                	sd	a3,24(s0)
- 892:	f018                	sd	a4,32(s0)
- 894:	f41c                	sd	a5,40(s0)
- 896:	03043823          	sd	a6,48(s0)
- 89a:	03143c23          	sd	a7,56(s0)
+ 894:	711d                	addi	sp,sp,-96
+ 896:	ec06                	sd	ra,24(sp)
+ 898:	e822                	sd	s0,16(sp)
+ 89a:	1000                	addi	s0,sp,32
+ 89c:	e40c                	sd	a1,8(s0)
+ 89e:	e810                	sd	a2,16(s0)
+ 8a0:	ec14                	sd	a3,24(s0)
+ 8a2:	f018                	sd	a4,32(s0)
+ 8a4:	f41c                	sd	a5,40(s0)
+ 8a6:	03043823          	sd	a6,48(s0)
+ 8aa:	03143c23          	sd	a7,56(s0)
   va_list ap;
 
   va_start(ap, fmt);
- 89e:	00840613          	addi	a2,s0,8
- 8a2:	fec43423          	sd	a2,-24(s0)
+ 8ae:	00840613          	addi	a2,s0,8
+ 8b2:	fec43423          	sd	a2,-24(s0)
   vprintf(1, fmt, ap);
- 8a6:	85aa                	mv	a1,a0
- 8a8:	4505                	li	a0,1
- 8aa:	00000097          	auipc	ra,0x0
- 8ae:	dce080e7          	jalr	-562(ra) # 678 <vprintf>
-}
- 8b2:	60e2                	ld	ra,24(sp)
- 8b4:	6442                	ld	s0,16(sp)
- 8b6:	6125                	addi	sp,sp,96
- 8b8:	8082                	ret
+ 8b6:	85aa                	mv	a1,a0
+ 8b8:	4505                	li	a0,1
+ 8ba:	00000097          	auipc	ra,0x0
+ 8be:	dce080e7          	jalr	-562(ra) # 688 <vprintf>
+}
+ 8c2:	60e2                	ld	ra,24(sp)
+ 8c4:	6442                	ld	s0,16(sp)
+ 8c6:	6125                	addi	sp,sp,96
+ 8c8:	8082                	ret
 
-00000000000008ba <free>:
+00000000000008ca <free>:
 static Header base;
 static Header *freep;
 
 void
 free(void *ap)
 {
- 8ba:	1141                	addi	sp,sp,-16
- 8bc:	e422                	sd	s0,8(sp)
- 8be:	0800                	addi	s0,sp,16
+ 8ca:	1141                	addi	sp,sp,-16
+ 8cc:	e422                	sd	s0,8(sp)
+ 8ce:	0800                	addi	s0,sp,16
   Header *bp, *p;
 
   bp = (Header*)ap - 1;
- 8c0:	ff050693          	addi	a3,a0,-16
+ 8d0:	ff050693          	addi	a3,a0,-16
   for(p = freep; !(bp > p && bp < p->s.ptr); p = p->s.ptr)
- 8c4:	00000797          	auipc	a5,0x0
- 8c8:	2147b783          	ld	a5,532(a5) # ad8 <freep>
- 8cc:	a02d                	j	8f6 <free+0x3c>
+ 8d4:	00000797          	auipc	a5,0x0
+ 8d8:	2147b783          	ld	a5,532(a5) # ae8 <freep>
+ 8dc:	a02d                	j	906 <free+0x3c>
     if(p >= p->s.ptr && (bp > p || bp < p->s.ptr))
       break;
   if(bp + bp->s.size == p->s.ptr){
     bp->s.size += p->s.ptr->s.size;
- 8ce:	4618                	lw	a4,8(a2)
- 8d0:	9f2d                	addw	a4,a4,a1
- 8d2:	fee52c23          	sw	a4,-8(a0)
+ 8de:	4618                	lw	a4,8(a2)
+ 8e0:	9f2d                	addw	a4,a4,a1
+ 8e2:	fee52c23          	sw	a4,-8(a0)
     bp->s.ptr = p->s.ptr->s.ptr;
- 8d6:	6398                	ld	a4,0(a5)
- 8d8:	6310                	ld	a2,0(a4)
- 8da:	a83d                	j	918 <free+0x5e>
+ 8e6:	6398                	ld	a4,0(a5)
+ 8e8:	6310                	ld	a2,0(a4)
+ 8ea:	a83d                	j	928 <free+0x5e>
   } else
     bp->s.ptr = p->s.ptr;
   if(p + p->s.size == bp){
     p->s.size += bp->s.size;
- 8dc:	ff852703          	lw	a4,-8(a0)
- 8e0:	9f31                	addw	a4,a4,a2
- 8e2:	c798                	sw	a4,8(a5)
+ 8ec:	ff852703          	lw	a4,-8(a0)
+ 8f0:	9f31                	addw	a4,a4,a2
+ 8f2:	c798                	sw	a4,8(a5)
     p->s.ptr = bp->s.ptr;
- 8e4:	ff053683          	ld	a3,-16(a0)
- 8e8:	a091                	j	92c <free+0x72>
+ 8f4:	ff053683          	ld	a3,-16(a0)
+ 8f8:	a091                	j	93c <free+0x72>
     if(p >= p->s.ptr && (bp > p || bp < p->s.ptr))
- 8ea:	6398                	ld	a4,0(a5)
- 8ec:	00e7e463          	bltu	a5,a4,8f4 <free+0x3a>
- 8f0:	00e6ea63          	bltu	a3,a4,904 <free+0x4a>
+ 8fa:	6398                	ld	a4,0(a5)
+ 8fc:	00e7e463          	bltu	a5,a4,904 <free+0x3a>
+ 900:	00e6ea63          	bltu	a3,a4,914 <free+0x4a>
 {
- 8f4:	87ba                	mv	a5,a4
+ 904:	87ba                	mv	a5,a4
   for(p = freep; !(bp > p && bp < p->s.ptr); p = p->s.ptr)
- 8f6:	fed7fae3          	bgeu	a5,a3,8ea <free+0x30>
- 8fa:	6398                	ld	a4,0(a5)
- 8fc:	00e6e463          	bltu	a3,a4,904 <free+0x4a>
+ 906:	fed7fae3          	bgeu	a5,a3,8fa <free+0x30>
+ 90a:	6398                	ld	a4,0(a5)
+ 90c:	00e6e463          	bltu	a3,a4,914 <free+0x4a>
     if(p >= p->s.ptr && (bp > p || bp < p->s.ptr))
- 900:	fee7eae3          	bltu	a5,a4,8f4 <free+0x3a>
+ 910:	fee7eae3          	bltu	a5,a4,904 <free+0x3a>
   if(bp + bp->s.size == p->s.ptr){
- 904:	ff852583          	lw	a1,-8(a0)
- 908:	6390                	ld	a2,0(a5)
- 90a:	02059813          	slli	a6,a1,0x20
- 90e:	01c85713          	srli	a4,a6,0x1c
- 912:	9736                	add	a4,a4,a3
- 914:	fae60de3          	beq	a2,a4,8ce <free+0x14>
+ 914:	ff852583          	lw	a1,-8(a0)
+ 918:	6390                	ld	a2,0(a5)
+ 91a:	02059813          	slli	a6,a1,0x20
+ 91e:	01c85713          	srli	a4,a6,0x1c
+ 922:	9736                	add	a4,a4,a3
+ 924:	fae60de3          	beq	a2,a4,8de <free+0x14>
     bp->s.ptr = p->s.ptr->s.ptr;
- 918:	fec53823          	sd	a2,-16(a0)
+ 928:	fec53823          	sd	a2,-16(a0)
   if(p + p->s.size == bp){
- 91c:	4790                	lw	a2,8(a5)
- 91e:	02061593          	slli	a1,a2,0x20
- 922:	01c5d713          	srli	a4,a1,0x1c
- 926:	973e                	add	a4,a4,a5
- 928:	fae68ae3          	beq	a3,a4,8dc <free+0x22>
+ 92c:	4790                	lw	a2,8(a5)
+ 92e:	02061593          	slli	a1,a2,0x20
+ 932:	01c5d713          	srli	a4,a1,0x1c
+ 936:	973e                	add	a4,a4,a5
+ 938:	fae68ae3          	beq	a3,a4,8ec <free+0x22>
     p->s.ptr = bp->s.ptr;
- 92c:	e394                	sd	a3,0(a5)
+ 93c:	e394                	sd	a3,0(a5)
   } else
     p->s.ptr = bp;
   freep = p;
- 92e:	00000717          	auipc	a4,0x0
- 932:	1af73523          	sd	a5,426(a4) # ad8 <freep>
+ 93e:	00000717          	auipc	a4,0x0
+ 942:	1af73523          	sd	a5,426(a4) # ae8 <freep>
 }
- 936:	6422                	ld	s0,8(sp)
- 938:	0141                	addi	sp,sp,16
- 93a:	8082                	ret
+ 946:	6422                	ld	s0,8(sp)
+ 948:	0141                	addi	sp,sp,16
+ 94a:	8082                	ret
 
-000000000000093c <malloc>:
+000000000000094c <malloc>:
   return freep;
 }
 
 void*
 malloc(uint nbytes)
 {
- 93c:	7139                	addi	sp,sp,-64
- 93e:	fc06                	sd	ra,56(sp)
- 940:	f822                	sd	s0,48(sp)
- 942:	f426                	sd	s1,40(sp)
- 944:	f04a                	sd	s2,32(sp)
- 946:	ec4e                	sd	s3,24(sp)
- 948:	e852                	sd	s4,16(sp)
- 94a:	e456                	sd	s5,8(sp)
- 94c:	e05a                	sd	s6,0(sp)
- 94e:	0080                	addi	s0,sp,64
+ 94c:	7139                	addi	sp,sp,-64
+ 94e:	fc06                	sd	ra,56(sp)
+ 950:	f822                	sd	s0,48(sp)
+ 952:	f426                	sd	s1,40(sp)
+ 954:	f04a                	sd	s2,32(sp)
+ 956:	ec4e                	sd	s3,24(sp)
+ 958:	e852                	sd	s4,16(sp)
+ 95a:	e456                	sd	s5,8(sp)
+ 95c:	e05a                	sd	s6,0(sp)
+ 95e:	0080                	addi	s0,sp,64
   Header *p, *prevp;
   uint nunits;
 
   nunits = (nbytes + sizeof(Header) - 1)/sizeof(Header) + 1;
- 950:	02051493          	slli	s1,a0,0x20
- 954:	9081                	srli	s1,s1,0x20
- 956:	04bd                	addi	s1,s1,15
- 958:	8091                	srli	s1,s1,0x4
- 95a:	0014899b          	addiw	s3,s1,1
- 95e:	0485                	addi	s1,s1,1
+ 960:	02051493          	slli	s1,a0,0x20
+ 964:	9081                	srli	s1,s1,0x20
+ 966:	04bd                	addi	s1,s1,15
+ 968:	8091                	srli	s1,s1,0x4
+ 96a:	0014899b          	addiw	s3,s1,1
+ 96e:	0485                	addi	s1,s1,1
   if((prevp = freep) == 0){
- 960:	00000517          	auipc	a0,0x0
- 964:	17853503          	ld	a0,376(a0) # ad8 <freep>
- 968:	c515                	beqz	a0,994 <malloc+0x58>
+ 970:	00000517          	auipc	a0,0x0
+ 974:	17853503          	ld	a0,376(a0) # ae8 <freep>
+ 978:	c515                	beqz	a0,9a4 <malloc+0x58>
     base.s.ptr = freep = prevp = &base;
     base.s.size = 0;
   }
   for(p = prevp->s.ptr; ; prevp = p, p = p->s.ptr){
- 96a:	611c                	ld	a5,0(a0)
+ 97a:	611c                	ld	a5,0(a0)
     if(p->s.size >= nunits){
- 96c:	4798                	lw	a4,8(a5)
- 96e:	02977f63          	bgeu	a4,s1,9ac <malloc+0x70>
- 972:	8a4e                	mv	s4,s3
- 974:	0009871b          	sext.w	a4,s3
- 978:	6685                	lui	a3,0x1
- 97a:	00d77363          	bgeu	a4,a3,980 <malloc+0x44>
- 97e:	6a05                	lui	s4,0x1
- 980:	000a0b1b          	sext.w	s6,s4
+ 97c:	4798                	lw	a4,8(a5)
+ 97e:	02977f63          	bgeu	a4,s1,9bc <malloc+0x70>
+ 982:	8a4e                	mv	s4,s3
+ 984:	0009871b          	sext.w	a4,s3
+ 988:	6685                	lui	a3,0x1
+ 98a:	00d77363          	bgeu	a4,a3,990 <malloc+0x44>
+ 98e:	6a05                	lui	s4,0x1
+ 990:	000a0b1b          	sext.w	s6,s4
   p = sbrk(nu * sizeof(Header));
- 984:	004a1a1b          	slliw	s4,s4,0x4
+ 994:	004a1a1b          	slliw	s4,s4,0x4
         p->s.size = nunits;
       }
       freep = prevp;
       return (void*)(p + 1);
     }
     if(p == freep)
- 988:	00000917          	auipc	s2,0x0
- 98c:	15090913          	addi	s2,s2,336 # ad8 <freep>
+ 998:	00000917          	auipc	s2,0x0
+ 99c:	15090913          	addi	s2,s2,336 # ae8 <freep>
   if(p == (char*)-1)
- 990:	5afd                	li	s5,-1
- 992:	a895                	j	a06 <malloc+0xca>
+ 9a0:	5afd                	li	s5,-1
+ 9a2:	a895                	j	a16 <malloc+0xca>
     base.s.ptr = freep = prevp = &base;
- 994:	00000797          	auipc	a5,0x0
- 998:	54c78793          	addi	a5,a5,1356 # ee0 <base>
- 99c:	00000717          	auipc	a4,0x0
- 9a0:	12f73e23          	sd	a5,316(a4) # ad8 <freep>
- 9a4:	e39c                	sd	a5,0(a5)
+ 9a4:	00000797          	auipc	a5,0x0
+ 9a8:	54c78793          	addi	a5,a5,1356 # ef0 <base>
+ 9ac:	00000717          	auipc	a4,0x0
+ 9b0:	12f73e23          	sd	a5,316(a4) # ae8 <freep>
+ 9b4:	e39c                	sd	a5,0(a5)
     base.s.size = 0;
- 9a6:	0007a423          	sw	zero,8(a5)
+ 9b6:	0007a423          	sw	zero,8(a5)
     if(p->s.size >= nunits){
- 9aa:	b7e1                	j	972 <malloc+0x36>
+ 9ba:	b7e1                	j	982 <malloc+0x36>
       if(p->s.size == nunits)
- 9ac:	02e48c63          	beq	s1,a4,9e4 <malloc+0xa8>
+ 9bc:	02e48c63          	beq	s1,a4,9f4 <malloc+0xa8>
         p->s.size -= nunits;
- 9b0:	4137073b          	subw	a4,a4,s3
- 9b4:	c798                	sw	a4,8(a5)
+ 9c0:	4137073b          	subw	a4,a4,s3
+ 9c4:	c798                	sw	a4,8(a5)
         p += p->s.size;
- 9b6:	02071693          	slli	a3,a4,0x20
- 9ba:	01c6d713          	srli	a4,a3,0x1c
- 9be:	97ba                	add	a5,a5,a4
+ 9c6:	02071693          	slli	a3,a4,0x20
+ 9ca:	01c6d713          	srli	a4,a3,0x1c
+ 9ce:	97ba                	add	a5,a5,a4
         p->s.size = nunits;
- 9c0:	0137a423          	sw	s3,8(a5)
+ 9d0:	0137a423          	sw	s3,8(a5)
       freep = prevp;
- 9c4:	00000717          	auipc	a4,0x0
- 9c8:	10a73a23          	sd	a0,276(a4) # ad8 <freep>
+ 9d4:	00000717          	auipc	a4,0x0
+ 9d8:	10a73a23          	sd	a0,276(a4) # ae8 <freep>
       return (void*)(p + 1);
- 9cc:	01078513          	addi	a0,a5,16
+ 9dc:	01078513          	addi	a0,a5,16
       if((p = morecore(nunits)) == 0)
         return 0;
   }
 }
- 9d0:	70e2                	ld	ra,56(sp)
- 9d2:	7442                	ld	s0,48(sp)
- 9d4:	74a2                	ld	s1,40(sp)
- 9d6:	7902                	ld	s2,32(sp)
- 9d8:	69e2                	ld	s3,24(sp)
- 9da:	6a42                	ld	s4,16(sp)
- 9dc:	6aa2                	ld	s5,8(sp)
- 9de:	6b02                	ld	s6,0(sp)
- 9e0:	6121                	addi	sp,sp,64
- 9e2:	8082                	ret
+ 9e0:	70e2                	ld	ra,56(sp)
+ 9e2:	7442                	ld	s0,48(sp)
+ 9e4:	74a2                	ld	s1,40(sp)
+ 9e6:	7902                	ld	s2,32(sp)
+ 9e8:	69e2                	ld	s3,24(sp)
+ 9ea:	6a42                	ld	s4,16(sp)
+ 9ec:	6aa2                	ld	s5,8(sp)
+ 9ee:	6b02                	ld	s6,0(sp)
+ 9f0:	6121                	addi	sp,sp,64
+ 9f2:	8082                	ret
         prevp->s.ptr = p->s.ptr;
- 9e4:	6398                	ld	a4,0(a5)
- 9e6:	e118                	sd	a4,0(a0)
- 9e8:	bff1                	j	9c4 <malloc+0x88>
+ 9f4:	6398                	ld	a4,0(a5)
+ 9f6:	e118                	sd	a4,0(a0)
+ 9f8:	bff1                	j	9d4 <malloc+0x88>
   hp->s.size = nu;
- 9ea:	01652423          	sw	s6,8(a0)
+ 9fa:	01652423          	sw	s6,8(a0)
   free((void*)(hp + 1));
- 9ee:	0541                	addi	a0,a0,16
- 9f0:	00000097          	auipc	ra,0x0
- 9f4:	eca080e7          	jalr	-310(ra) # 8ba <free>
+ 9fe:	0541                	addi	a0,a0,16
+ a00:	00000097          	auipc	ra,0x0
+ a04:	eca080e7          	jalr	-310(ra) # 8ca <free>
   return freep;
- 9f8:	00093503          	ld	a0,0(s2)
+ a08:	00093503          	ld	a0,0(s2)
       if((p = morecore(nunits)) == 0)
- 9fc:	d971                	beqz	a0,9d0 <malloc+0x94>
+ a0c:	d971                	beqz	a0,9e0 <malloc+0x94>
   for(p = prevp->s.ptr; ; prevp = p, p = p->s.ptr){
- 9fe:	611c                	ld	a5,0(a0)
+ a0e:	611c                	ld	a5,0(a0)
     if(p->s.size >= nunits){
- a00:	4798                	lw	a4,8(a5)
- a02:	fa9775e3          	bgeu	a4,s1,9ac <malloc+0x70>
+ a10:	4798                	lw	a4,8(a5)
+ a12:	fa9775e3          	bgeu	a4,s1,9bc <malloc+0x70>
     if(p == freep)
- a06:	00093703          	ld	a4,0(s2)
- a0a:	853e                	mv	a0,a5
- a0c:	fef719e3          	bne	a4,a5,9fe <malloc+0xc2>
+ a16:	00093703          	ld	a4,0(s2)
+ a1a:	853e                	mv	a0,a5
+ a1c:	fef719e3          	bne	a4,a5,a0e <malloc+0xc2>
   p = sbrk(nu * sizeof(Header));
- a10:	8552                	mv	a0,s4
- a12:	00000097          	auipc	ra,0x0
- a16:	b80080e7          	jalr	-1152(ra) # 592 <sbrk>
+ a20:	8552                	mv	a0,s4
+ a22:	00000097          	auipc	ra,0x0
+ a26:	b70080e7          	jalr	-1168(ra) # 592 <sbrk>
   if(p == (char*)-1)
- a1a:	fd5518e3          	bne	a0,s5,9ea <malloc+0xae>
+ a2a:	fd5518e3          	bne	a0,s5,9fa <malloc+0xae>
         return 0;
- a1e:	4501                	li	a0,0
- a20:	bf45                	j	9d0 <malloc+0x94>
+ a2e:	4501                	li	a0,0
+ a30:	bf45                	j	9e0 <malloc+0x94>
Binary files ./user/grep.o and ../xv6-labs-2021/user/grep.o differ
diff -urN ./user/grep.sym ../xv6-labs-2021/user/grep.sym
--- ./user/grep.sym	2021-12-05 17:54:42.000000000 +0800
+++ ../xv6-labs-2021/user/grep.sym	2021-11-26 14:46:16.000000000 +0800
@@ -1,7 +1,7 @@
 0000000000000000 .text
-0000000000000a28 .rodata
-0000000000000ad8 .sbss
-0000000000000ae0 .bss
+0000000000000a38 .rodata
+0000000000000ae8 .sbss
+0000000000000af0 .bss
 0000000000000000 .comment
 0000000000000000 .riscv.attributes
 0000000000000000 .debug_aranges
@@ -16,31 +16,33 @@
 0000000000000000 grep.c
 0000000000000000 ulib.c
 0000000000000000 printf.c
-00000000000005aa putc
-00000000000005cc printint
-0000000000000ac0 digits
+00000000000005ba putc
+00000000000005dc printint
+0000000000000ad0 digits
 0000000000000000 umalloc.c
-0000000000000ad8 freep
-0000000000000ee0 base
+0000000000000ae8 freep
+0000000000000ef0 base
 000000000000029e strcpy
-0000000000000884 printf
-00000000000012d1 __global_pointer$
+0000000000000894 printf
+00000000000012e1 __global_pointer$
 0000000000000458 memmove
 000000000000004e matchhere
 0000000000000552 mknod
+00000000000005aa trace
 0000000000000356 gets
-0000000000000ad1 __SDATA_BEGIN__
+0000000000000ae1 __SDATA_BEGIN__
 000000000000058a getpid
 00000000000004ea memcpy
 000000000000011a grep
-000000000000093c malloc
+000000000000094c malloc
 000000000000059a sleep
+00000000000005b2 sysinfo
 000000000000051a pipe
 000000000000052a write
 0000000000000562 fstat
-0000000000000856 fprintf
+0000000000000866 fprintf
 000000000000053a kill
-0000000000000678 vprintf
+0000000000000688 vprintf
 000000000000057a chdir
 0000000000000542 exec
 0000000000000512 wait
@@ -48,20 +50,20 @@
 000000000000055a unlink
 00000000000004b0 memcmp
 0000000000000502 fork
-0000000000000ef0 __BSS_END__
+0000000000000f00 __BSS_END__
 0000000000000592 sbrk
 00000000000005a2 uptime
-0000000000000ad1 __bss_start
+0000000000000ae1 __bss_start
 0000000000000310 memset
 00000000000001de main
 0000000000000000 matchstar
 00000000000002ba strcmp
 0000000000000582 dup
-0000000000000ae0 buf
-0000000000000ad1 __DATA_BEGIN__
+0000000000000af0 buf
+0000000000000ae1 __DATA_BEGIN__
 00000000000003ca stat
-0000000000000ad1 _edata
-0000000000000ef0 _end
+0000000000000ae1 _edata
+0000000000000f00 _end
 00000000000000cc match
 000000000000056a link
 000000000000050a exit
@@ -71,4 +73,4 @@
 0000000000000332 strchr
 0000000000000572 mkdir
 0000000000000532 close
-00000000000008ba free
+00000000000008ca free
diff -urN ./user/grind.asm ../xv6-labs-2021/user/grind.asm
--- ./user/grind.asm	2021-12-05 17:54:42.000000000 +0800
+++ ../xv6-labs-2021/user/grind.asm	2021-11-26 14:46:16.000000000 +0800
@@ -28,17 +28,17 @@
     hi = x / 127773;
     lo = x % 127773;
       16:	66fd                	lui	a3,0x1f
-      18:	31d68693          	addi	a3,a3,797 # 1f31d <__global_pointer$+0x1d48c>
+      18:	31d68693          	addi	a3,a3,797 # 1f31d <__global_pointer$+0x1d444>
       1c:	02d7e733          	rem	a4,a5,a3
     x = 16807 * lo - 2836 * hi;
       20:	6611                	lui	a2,0x4
-      22:	1a760613          	addi	a2,a2,423 # 41a7 <__global_pointer$+0x2316>
+      22:	1a760613          	addi	a2,a2,423 # 41a7 <__global_pointer$+0x22ce>
       26:	02c70733          	mul	a4,a4,a2
     hi = x / 127773;
       2a:	02d7c7b3          	div	a5,a5,a3
     x = 16807 * lo - 2836 * hi;
       2e:	76fd                	lui	a3,0xfffff
-      30:	4ec68693          	addi	a3,a3,1260 # fffffffffffff4ec <__global_pointer$+0xffffffffffffd65b>
+      30:	4ec68693          	addi	a3,a3,1260 # fffffffffffff4ec <__global_pointer$+0xffffffffffffd613>
       34:	02d787b3          	mul	a5,a5,a3
       38:	97ba                	add	a5,a5,a4
     if (x < 0)
@@ -74,7 +74,7 @@
       5e:	0800                	addi	s0,sp,16
     return (do_rand(&rand_next));
       60:	00001517          	auipc	a0,0x1
-      64:	63850513          	addi	a0,a0,1592 # 1698 <rand_next>
+      64:	68050513          	addi	a0,a0,1664 # 16e0 <rand_next>
       68:	00000097          	auipc	ra,0x0
       6c:	f98080e7          	jalr	-104(ra) # 0 <do_rand>
 }
@@ -88,2424 +88,2454 @@
 void
 go(int which_child)
 {
-      78:	7119                	addi	sp,sp,-128
-      7a:	fc86                	sd	ra,120(sp)
-      7c:	f8a2                	sd	s0,112(sp)
-      7e:	f4a6                	sd	s1,104(sp)
-      80:	f0ca                	sd	s2,96(sp)
-      82:	ecce                	sd	s3,88(sp)
-      84:	e8d2                	sd	s4,80(sp)
-      86:	e4d6                	sd	s5,72(sp)
-      88:	e0da                	sd	s6,64(sp)
-      8a:	fc5e                	sd	s7,56(sp)
-      8c:	0100                	addi	s0,sp,128
-      8e:	84aa                	mv	s1,a0
+      78:	7159                	addi	sp,sp,-112
+      7a:	f486                	sd	ra,104(sp)
+      7c:	f0a2                	sd	s0,96(sp)
+      7e:	eca6                	sd	s1,88(sp)
+      80:	e8ca                	sd	s2,80(sp)
+      82:	e4ce                	sd	s3,72(sp)
+      84:	e0d2                	sd	s4,64(sp)
+      86:	fc56                	sd	s5,56(sp)
+      88:	f85a                	sd	s6,48(sp)
+      8a:	1880                	addi	s0,sp,112
+      8c:	84aa                	mv	s1,a0
   int fd = -1;
   static char buf[999];
   char *break0 = sbrk(0);
-      90:	4501                	li	a0,0
-      92:	00001097          	auipc	ra,0x1
-      96:	dde080e7          	jalr	-546(ra) # e70 <sbrk>
-      9a:	8aaa                	mv	s5,a0
+      8e:	4501                	li	a0,0
+      90:	00001097          	auipc	ra,0x1
+      94:	df0080e7          	jalr	-528(ra) # e80 <sbrk>
+      98:	8aaa                	mv	s5,a0
   uint64 iters = 0;
 
   mkdir("grindir");
-      9c:	00001517          	auipc	a0,0x1
-      a0:	26450513          	addi	a0,a0,612 # 1300 <malloc+0xe6>
-      a4:	00001097          	auipc	ra,0x1
-      a8:	dac080e7          	jalr	-596(ra) # e50 <mkdir>
+      9a:	00001517          	auipc	a0,0x1
+      9e:	28650513          	addi	a0,a0,646 # 1320 <malloc+0xe6>
+      a2:	00001097          	auipc	ra,0x1
+      a6:	dbe080e7          	jalr	-578(ra) # e60 <mkdir>
   if(chdir("grindir") != 0){
-      ac:	00001517          	auipc	a0,0x1
-      b0:	25450513          	addi	a0,a0,596 # 1300 <malloc+0xe6>
-      b4:	00001097          	auipc	ra,0x1
-      b8:	da4080e7          	jalr	-604(ra) # e58 <chdir>
-      bc:	cd11                	beqz	a0,d8 <go+0x60>
-    printf("chdir grindir failed\n");
-      be:	00001517          	auipc	a0,0x1
-      c2:	24a50513          	addi	a0,a0,586 # 1308 <malloc+0xee>
-      c6:	00001097          	auipc	ra,0x1
-      ca:	09c080e7          	jalr	156(ra) # 1162 <printf>
+      aa:	00001517          	auipc	a0,0x1
+      ae:	27650513          	addi	a0,a0,630 # 1320 <malloc+0xe6>
+      b2:	00001097          	auipc	ra,0x1
+      b6:	db6080e7          	jalr	-586(ra) # e68 <chdir>
+      ba:	cd11                	beqz	a0,d6 <go+0x5e>
+    printf("grind: chdir grindir failed\n");
+      bc:	00001517          	auipc	a0,0x1
+      c0:	26c50513          	addi	a0,a0,620 # 1328 <malloc+0xee>
+      c4:	00001097          	auipc	ra,0x1
+      c8:	0be080e7          	jalr	190(ra) # 1182 <printf>
     exit(1);
-      ce:	4505                	li	a0,1
-      d0:	00001097          	auipc	ra,0x1
-      d4:	d18080e7          	jalr	-744(ra) # de8 <exit>
+      cc:	4505                	li	a0,1
+      ce:	00001097          	auipc	ra,0x1
+      d2:	d2a080e7          	jalr	-726(ra) # df8 <exit>
   }
   chdir("/");
-      d8:	00001517          	auipc	a0,0x1
-      dc:	24850513          	addi	a0,a0,584 # 1320 <malloc+0x106>
-      e0:	00001097          	auipc	ra,0x1
-      e4:	d78080e7          	jalr	-648(ra) # e58 <chdir>
+      d6:	00001517          	auipc	a0,0x1
+      da:	27250513          	addi	a0,a0,626 # 1348 <malloc+0x10e>
+      de:	00001097          	auipc	ra,0x1
+      e2:	d8a080e7          	jalr	-630(ra) # e68 <chdir>
   
   while(1){
     iters++;
     if((iters % 500) == 0)
-      e8:	00001997          	auipc	s3,0x1
-      ec:	24898993          	addi	s3,s3,584 # 1330 <malloc+0x116>
-      f0:	c489                	beqz	s1,fa <go+0x82>
-      f2:	00001997          	auipc	s3,0x1
-      f6:	23698993          	addi	s3,s3,566 # 1328 <malloc+0x10e>
+      e6:	00001997          	auipc	s3,0x1
+      ea:	27298993          	addi	s3,s3,626 # 1358 <malloc+0x11e>
+      ee:	c489                	beqz	s1,f8 <go+0x80>
+      f0:	00001997          	auipc	s3,0x1
+      f4:	26098993          	addi	s3,s3,608 # 1350 <malloc+0x116>
     iters++;
-      fa:	4485                	li	s1,1
+      f8:	4485                	li	s1,1
   int fd = -1;
-      fc:	5a7d                	li	s4,-1
-      fe:	00001917          	auipc	s2,0x1
-     102:	4c690913          	addi	s2,s2,1222 # 15c4 <malloc+0x3aa>
-      close(fd);
-      fd = open("/./grindir/./../b", O_CREATE|O_RDWR);
-    } else if(what == 7){
-      write(fd, buf, sizeof(buf));
-    } else if(what == 8){
-      read(fd, buf, sizeof(buf));
-     106:	00001b17          	auipc	s6,0x1
-     10a:	5a2b0b13          	addi	s6,s6,1442 # 16a8 <buf.0>
-     10e:	a825                	j	146 <go+0xce>
+      fa:	5a7d                	li	s4,-1
+      fc:	00001917          	auipc	s2,0x1
+     100:	50c90913          	addi	s2,s2,1292 # 1608 <malloc+0x3ce>
+     104:	a825                	j	13c <go+0xc4>
+      write(1, which_child?"B":"A", 1);
+    int what = rand() % 23;
+    if(what == 1){
       close(open("grindir/../a", O_CREATE|O_RDWR));
-     110:	20200593          	li	a1,514
-     114:	00001517          	auipc	a0,0x1
-     118:	22450513          	addi	a0,a0,548 # 1338 <malloc+0x11e>
-     11c:	00001097          	auipc	ra,0x1
-     120:	d0c080e7          	jalr	-756(ra) # e28 <open>
-     124:	00001097          	auipc	ra,0x1
-     128:	cec080e7          	jalr	-788(ra) # e10 <close>
+     106:	20200593          	li	a1,514
+     10a:	00001517          	auipc	a0,0x1
+     10e:	25650513          	addi	a0,a0,598 # 1360 <malloc+0x126>
+     112:	00001097          	auipc	ra,0x1
+     116:	d26080e7          	jalr	-730(ra) # e38 <open>
+     11a:	00001097          	auipc	ra,0x1
+     11e:	d06080e7          	jalr	-762(ra) # e20 <close>
     iters++;
-     12c:	0485                	addi	s1,s1,1
+     122:	0485                	addi	s1,s1,1
     if((iters % 500) == 0)
-     12e:	1f400793          	li	a5,500
-     132:	02f4f7b3          	remu	a5,s1,a5
-     136:	eb81                	bnez	a5,146 <go+0xce>
+     124:	1f400793          	li	a5,500
+     128:	02f4f7b3          	remu	a5,s1,a5
+     12c:	eb81                	bnez	a5,13c <go+0xc4>
       write(1, which_child?"B":"A", 1);
-     138:	4605                	li	a2,1
-     13a:	85ce                	mv	a1,s3
-     13c:	4505                	li	a0,1
-     13e:	00001097          	auipc	ra,0x1
-     142:	cca080e7          	jalr	-822(ra) # e08 <write>
+     12e:	4605                	li	a2,1
+     130:	85ce                	mv	a1,s3
+     132:	4505                	li	a0,1
+     134:	00001097          	auipc	ra,0x1
+     138:	ce4080e7          	jalr	-796(ra) # e18 <write>
     int what = rand() % 23;
-     146:	00000097          	auipc	ra,0x0
-     14a:	f12080e7          	jalr	-238(ra) # 58 <rand>
-     14e:	47dd                	li	a5,23
-     150:	02f5653b          	remw	a0,a0,a5
+     13c:	00000097          	auipc	ra,0x0
+     140:	f1c080e7          	jalr	-228(ra) # 58 <rand>
+     144:	47dd                	li	a5,23
+     146:	02f5653b          	remw	a0,a0,a5
     if(what == 1){
-     154:	4785                	li	a5,1
-     156:	faf50de3          	beq	a0,a5,110 <go+0x98>
+     14a:	4785                	li	a5,1
+     14c:	faf50de3          	beq	a0,a5,106 <go+0x8e>
     } else if(what == 2){
-     15a:	47d9                	li	a5,22
-     15c:	fca7e8e3          	bltu	a5,a0,12c <go+0xb4>
-     160:	050a                	slli	a0,a0,0x2
-     162:	954a                	add	a0,a0,s2
-     164:	411c                	lw	a5,0(a0)
-     166:	97ca                	add	a5,a5,s2
-     168:	8782                	jr	a5
+     150:	47d9                	li	a5,22
+     152:	fca7e8e3          	bltu	a5,a0,122 <go+0xaa>
+     156:	050a                	slli	a0,a0,0x2
+     158:	954a                	add	a0,a0,s2
+     15a:	411c                	lw	a5,0(a0)
+     15c:	97ca                	add	a5,a5,s2
+     15e:	8782                	jr	a5
       close(open("grindir/../grindir/../b", O_CREATE|O_RDWR));
-     16a:	20200593          	li	a1,514
-     16e:	00001517          	auipc	a0,0x1
-     172:	1da50513          	addi	a0,a0,474 # 1348 <malloc+0x12e>
-     176:	00001097          	auipc	ra,0x1
-     17a:	cb2080e7          	jalr	-846(ra) # e28 <open>
-     17e:	00001097          	auipc	ra,0x1
-     182:	c92080e7          	jalr	-878(ra) # e10 <close>
-     186:	b75d                	j	12c <go+0xb4>
+     160:	20200593          	li	a1,514
+     164:	00001517          	auipc	a0,0x1
+     168:	20c50513          	addi	a0,a0,524 # 1370 <malloc+0x136>
+     16c:	00001097          	auipc	ra,0x1
+     170:	ccc080e7          	jalr	-820(ra) # e38 <open>
+     174:	00001097          	auipc	ra,0x1
+     178:	cac080e7          	jalr	-852(ra) # e20 <close>
+     17c:	b75d                	j	122 <go+0xaa>
+    } else if(what == 3){
       unlink("grindir/../a");
-     188:	00001517          	auipc	a0,0x1
-     18c:	1b050513          	addi	a0,a0,432 # 1338 <malloc+0x11e>
-     190:	00001097          	auipc	ra,0x1
-     194:	ca8080e7          	jalr	-856(ra) # e38 <unlink>
-     198:	bf51                	j	12c <go+0xb4>
+     17e:	00001517          	auipc	a0,0x1
+     182:	1e250513          	addi	a0,a0,482 # 1360 <malloc+0x126>
+     186:	00001097          	auipc	ra,0x1
+     18a:	cc2080e7          	jalr	-830(ra) # e48 <unlink>
+     18e:	bf51                	j	122 <go+0xaa>
+    } else if(what == 4){
       if(chdir("grindir") != 0){
-     19a:	00001517          	auipc	a0,0x1
-     19e:	16650513          	addi	a0,a0,358 # 1300 <malloc+0xe6>
-     1a2:	00001097          	auipc	ra,0x1
-     1a6:	cb6080e7          	jalr	-842(ra) # e58 <chdir>
-     1aa:	e115                	bnez	a0,1ce <go+0x156>
+     190:	00001517          	auipc	a0,0x1
+     194:	19050513          	addi	a0,a0,400 # 1320 <malloc+0xe6>
+     198:	00001097          	auipc	ra,0x1
+     19c:	cd0080e7          	jalr	-816(ra) # e68 <chdir>
+     1a0:	e115                	bnez	a0,1c4 <go+0x14c>
+        printf("grind: chdir grindir failed\n");
+        exit(1);
+      }
       unlink("../b");
-     1ac:	00001517          	auipc	a0,0x1
-     1b0:	1b450513          	addi	a0,a0,436 # 1360 <malloc+0x146>
-     1b4:	00001097          	auipc	ra,0x1
-     1b8:	c84080e7          	jalr	-892(ra) # e38 <unlink>
+     1a2:	00001517          	auipc	a0,0x1
+     1a6:	1e650513          	addi	a0,a0,486 # 1388 <malloc+0x14e>
+     1aa:	00001097          	auipc	ra,0x1
+     1ae:	c9e080e7          	jalr	-866(ra) # e48 <unlink>
       chdir("/");
-     1bc:	00001517          	auipc	a0,0x1
-     1c0:	16450513          	addi	a0,a0,356 # 1320 <malloc+0x106>
-     1c4:	00001097          	auipc	ra,0x1
-     1c8:	c94080e7          	jalr	-876(ra) # e58 <chdir>
-     1cc:	b785                	j	12c <go+0xb4>
-        printf("chdir grindir failed\n");
-     1ce:	00001517          	auipc	a0,0x1
-     1d2:	13a50513          	addi	a0,a0,314 # 1308 <malloc+0xee>
-     1d6:	00001097          	auipc	ra,0x1
-     1da:	f8c080e7          	jalr	-116(ra) # 1162 <printf>
+     1b2:	00001517          	auipc	a0,0x1
+     1b6:	19650513          	addi	a0,a0,406 # 1348 <malloc+0x10e>
+     1ba:	00001097          	auipc	ra,0x1
+     1be:	cae080e7          	jalr	-850(ra) # e68 <chdir>
+     1c2:	b785                	j	122 <go+0xaa>
+        printf("grind: chdir grindir failed\n");
+     1c4:	00001517          	auipc	a0,0x1
+     1c8:	16450513          	addi	a0,a0,356 # 1328 <malloc+0xee>
+     1cc:	00001097          	auipc	ra,0x1
+     1d0:	fb6080e7          	jalr	-74(ra) # 1182 <printf>
         exit(1);
-     1de:	4505                	li	a0,1
-     1e0:	00001097          	auipc	ra,0x1
-     1e4:	c08080e7          	jalr	-1016(ra) # de8 <exit>
+     1d4:	4505                	li	a0,1
+     1d6:	00001097          	auipc	ra,0x1
+     1da:	c22080e7          	jalr	-990(ra) # df8 <exit>
+    } else if(what == 5){
       close(fd);
-     1e8:	8552                	mv	a0,s4
-     1ea:	00001097          	auipc	ra,0x1
-     1ee:	c26080e7          	jalr	-986(ra) # e10 <close>
+     1de:	8552                	mv	a0,s4
+     1e0:	00001097          	auipc	ra,0x1
+     1e4:	c40080e7          	jalr	-960(ra) # e20 <close>
       fd = open("/grindir/../a", O_CREATE|O_RDWR);
-     1f2:	20200593          	li	a1,514
-     1f6:	00001517          	auipc	a0,0x1
-     1fa:	17250513          	addi	a0,a0,370 # 1368 <malloc+0x14e>
-     1fe:	00001097          	auipc	ra,0x1
-     202:	c2a080e7          	jalr	-982(ra) # e28 <open>
-     206:	8a2a                	mv	s4,a0
-     208:	b715                	j	12c <go+0xb4>
+     1e8:	20200593          	li	a1,514
+     1ec:	00001517          	auipc	a0,0x1
+     1f0:	1a450513          	addi	a0,a0,420 # 1390 <malloc+0x156>
+     1f4:	00001097          	auipc	ra,0x1
+     1f8:	c44080e7          	jalr	-956(ra) # e38 <open>
+     1fc:	8a2a                	mv	s4,a0
+     1fe:	b715                	j	122 <go+0xaa>
+    } else if(what == 6){
       close(fd);
-     20a:	8552                	mv	a0,s4
-     20c:	00001097          	auipc	ra,0x1
-     210:	c04080e7          	jalr	-1020(ra) # e10 <close>
+     200:	8552                	mv	a0,s4
+     202:	00001097          	auipc	ra,0x1
+     206:	c1e080e7          	jalr	-994(ra) # e20 <close>
       fd = open("/./grindir/./../b", O_CREATE|O_RDWR);
-     214:	20200593          	li	a1,514
-     218:	00001517          	auipc	a0,0x1
-     21c:	16050513          	addi	a0,a0,352 # 1378 <malloc+0x15e>
-     220:	00001097          	auipc	ra,0x1
-     224:	c08080e7          	jalr	-1016(ra) # e28 <open>
-     228:	8a2a                	mv	s4,a0
-     22a:	b709                	j	12c <go+0xb4>
+     20a:	20200593          	li	a1,514
+     20e:	00001517          	auipc	a0,0x1
+     212:	19250513          	addi	a0,a0,402 # 13a0 <malloc+0x166>
+     216:	00001097          	auipc	ra,0x1
+     21a:	c22080e7          	jalr	-990(ra) # e38 <open>
+     21e:	8a2a                	mv	s4,a0
+     220:	b709                	j	122 <go+0xaa>
+    } else if(what == 7){
       write(fd, buf, sizeof(buf));
-     22c:	3e700613          	li	a2,999
-     230:	85da                	mv	a1,s6
-     232:	8552                	mv	a0,s4
-     234:	00001097          	auipc	ra,0x1
-     238:	bd4080e7          	jalr	-1068(ra) # e08 <write>
-     23c:	bdc5                	j	12c <go+0xb4>
+     222:	3e700613          	li	a2,999
+     226:	00001597          	auipc	a1,0x1
+     22a:	4ca58593          	addi	a1,a1,1226 # 16f0 <buf.0>
+     22e:	8552                	mv	a0,s4
+     230:	00001097          	auipc	ra,0x1
+     234:	be8080e7          	jalr	-1048(ra) # e18 <write>
+     238:	b5ed                	j	122 <go+0xaa>
+    } else if(what == 8){
       read(fd, buf, sizeof(buf));
-     23e:	3e700613          	li	a2,999
-     242:	85da                	mv	a1,s6
-     244:	8552                	mv	a0,s4
-     246:	00001097          	auipc	ra,0x1
-     24a:	bba080e7          	jalr	-1094(ra) # e00 <read>
-     24e:	bdf9                	j	12c <go+0xb4>
+     23a:	3e700613          	li	a2,999
+     23e:	00001597          	auipc	a1,0x1
+     242:	4b258593          	addi	a1,a1,1202 # 16f0 <buf.0>
+     246:	8552                	mv	a0,s4
+     248:	00001097          	auipc	ra,0x1
+     24c:	bc8080e7          	jalr	-1080(ra) # e10 <read>
+     250:	bdc9                	j	122 <go+0xaa>
     } else if(what == 9){
       mkdir("grindir/../a");
-     250:	00001517          	auipc	a0,0x1
-     254:	0e850513          	addi	a0,a0,232 # 1338 <malloc+0x11e>
-     258:	00001097          	auipc	ra,0x1
-     25c:	bf8080e7          	jalr	-1032(ra) # e50 <mkdir>
+     252:	00001517          	auipc	a0,0x1
+     256:	10e50513          	addi	a0,a0,270 # 1360 <malloc+0x126>
+     25a:	00001097          	auipc	ra,0x1
+     25e:	c06080e7          	jalr	-1018(ra) # e60 <mkdir>
       close(open("a/../a/./a", O_CREATE|O_RDWR));
-     260:	20200593          	li	a1,514
-     264:	00001517          	auipc	a0,0x1
-     268:	12c50513          	addi	a0,a0,300 # 1390 <malloc+0x176>
-     26c:	00001097          	auipc	ra,0x1
-     270:	bbc080e7          	jalr	-1092(ra) # e28 <open>
-     274:	00001097          	auipc	ra,0x1
-     278:	b9c080e7          	jalr	-1124(ra) # e10 <close>
+     262:	20200593          	li	a1,514
+     266:	00001517          	auipc	a0,0x1
+     26a:	15250513          	addi	a0,a0,338 # 13b8 <malloc+0x17e>
+     26e:	00001097          	auipc	ra,0x1
+     272:	bca080e7          	jalr	-1078(ra) # e38 <open>
+     276:	00001097          	auipc	ra,0x1
+     27a:	baa080e7          	jalr	-1110(ra) # e20 <close>
       unlink("a/a");
-     27c:	00001517          	auipc	a0,0x1
-     280:	12450513          	addi	a0,a0,292 # 13a0 <malloc+0x186>
-     284:	00001097          	auipc	ra,0x1
-     288:	bb4080e7          	jalr	-1100(ra) # e38 <unlink>
-     28c:	b545                	j	12c <go+0xb4>
+     27e:	00001517          	auipc	a0,0x1
+     282:	14a50513          	addi	a0,a0,330 # 13c8 <malloc+0x18e>
+     286:	00001097          	auipc	ra,0x1
+     28a:	bc2080e7          	jalr	-1086(ra) # e48 <unlink>
+     28e:	bd51                	j	122 <go+0xaa>
     } else if(what == 10){
       mkdir("/../b");
-     28e:	00001517          	auipc	a0,0x1
-     292:	11a50513          	addi	a0,a0,282 # 13a8 <malloc+0x18e>
-     296:	00001097          	auipc	ra,0x1
-     29a:	bba080e7          	jalr	-1094(ra) # e50 <mkdir>
+     290:	00001517          	auipc	a0,0x1
+     294:	14050513          	addi	a0,a0,320 # 13d0 <malloc+0x196>
+     298:	00001097          	auipc	ra,0x1
+     29c:	bc8080e7          	jalr	-1080(ra) # e60 <mkdir>
       close(open("grindir/../b/b", O_CREATE|O_RDWR));
-     29e:	20200593          	li	a1,514
-     2a2:	00001517          	auipc	a0,0x1
-     2a6:	10e50513          	addi	a0,a0,270 # 13b0 <malloc+0x196>
-     2aa:	00001097          	auipc	ra,0x1
-     2ae:	b7e080e7          	jalr	-1154(ra) # e28 <open>
-     2b2:	00001097          	auipc	ra,0x1
-     2b6:	b5e080e7          	jalr	-1186(ra) # e10 <close>
+     2a0:	20200593          	li	a1,514
+     2a4:	00001517          	auipc	a0,0x1
+     2a8:	13450513          	addi	a0,a0,308 # 13d8 <malloc+0x19e>
+     2ac:	00001097          	auipc	ra,0x1
+     2b0:	b8c080e7          	jalr	-1140(ra) # e38 <open>
+     2b4:	00001097          	auipc	ra,0x1
+     2b8:	b6c080e7          	jalr	-1172(ra) # e20 <close>
       unlink("b/b");
-     2ba:	00001517          	auipc	a0,0x1
-     2be:	10650513          	addi	a0,a0,262 # 13c0 <malloc+0x1a6>
-     2c2:	00001097          	auipc	ra,0x1
-     2c6:	b76080e7          	jalr	-1162(ra) # e38 <unlink>
-     2ca:	b58d                	j	12c <go+0xb4>
+     2bc:	00001517          	auipc	a0,0x1
+     2c0:	12c50513          	addi	a0,a0,300 # 13e8 <malloc+0x1ae>
+     2c4:	00001097          	auipc	ra,0x1
+     2c8:	b84080e7          	jalr	-1148(ra) # e48 <unlink>
+     2cc:	bd99                	j	122 <go+0xaa>
     } else if(what == 11){
       unlink("b");
-     2cc:	00001517          	auipc	a0,0x1
-     2d0:	0bc50513          	addi	a0,a0,188 # 1388 <malloc+0x16e>
-     2d4:	00001097          	auipc	ra,0x1
-     2d8:	b64080e7          	jalr	-1180(ra) # e38 <unlink>
+     2ce:	00001517          	auipc	a0,0x1
+     2d2:	0e250513          	addi	a0,a0,226 # 13b0 <malloc+0x176>
+     2d6:	00001097          	auipc	ra,0x1
+     2da:	b72080e7          	jalr	-1166(ra) # e48 <unlink>
       link("../grindir/./../a", "../b");
-     2dc:	00001597          	auipc	a1,0x1
-     2e0:	08458593          	addi	a1,a1,132 # 1360 <malloc+0x146>
-     2e4:	00001517          	auipc	a0,0x1
-     2e8:	0e450513          	addi	a0,a0,228 # 13c8 <malloc+0x1ae>
-     2ec:	00001097          	auipc	ra,0x1
-     2f0:	b5c080e7          	jalr	-1188(ra) # e48 <link>
-     2f4:	bd25                	j	12c <go+0xb4>
+     2de:	00001597          	auipc	a1,0x1
+     2e2:	0aa58593          	addi	a1,a1,170 # 1388 <malloc+0x14e>
+     2e6:	00001517          	auipc	a0,0x1
+     2ea:	10a50513          	addi	a0,a0,266 # 13f0 <malloc+0x1b6>
+     2ee:	00001097          	auipc	ra,0x1
+     2f2:	b6a080e7          	jalr	-1174(ra) # e58 <link>
+     2f6:	b535                	j	122 <go+0xaa>
     } else if(what == 12){
       unlink("../grindir/../a");
-     2f6:	00001517          	auipc	a0,0x1
-     2fa:	0ea50513          	addi	a0,a0,234 # 13e0 <malloc+0x1c6>
-     2fe:	00001097          	auipc	ra,0x1
-     302:	b3a080e7          	jalr	-1222(ra) # e38 <unlink>
+     2f8:	00001517          	auipc	a0,0x1
+     2fc:	11050513          	addi	a0,a0,272 # 1408 <malloc+0x1ce>
+     300:	00001097          	auipc	ra,0x1
+     304:	b48080e7          	jalr	-1208(ra) # e48 <unlink>
       link(".././b", "/grindir/../a");
-     306:	00001597          	auipc	a1,0x1
-     30a:	06258593          	addi	a1,a1,98 # 1368 <malloc+0x14e>
-     30e:	00001517          	auipc	a0,0x1
-     312:	0e250513          	addi	a0,a0,226 # 13f0 <malloc+0x1d6>
-     316:	00001097          	auipc	ra,0x1
-     31a:	b32080e7          	jalr	-1230(ra) # e48 <link>
-     31e:	b539                	j	12c <go+0xb4>
+     308:	00001597          	auipc	a1,0x1
+     30c:	08858593          	addi	a1,a1,136 # 1390 <malloc+0x156>
+     310:	00001517          	auipc	a0,0x1
+     314:	10850513          	addi	a0,a0,264 # 1418 <malloc+0x1de>
+     318:	00001097          	auipc	ra,0x1
+     31c:	b40080e7          	jalr	-1216(ra) # e58 <link>
+     320:	b509                	j	122 <go+0xaa>
     } else if(what == 13){
       int pid = fork();
-     320:	00001097          	auipc	ra,0x1
-     324:	ac0080e7          	jalr	-1344(ra) # de0 <fork>
+     322:	00001097          	auipc	ra,0x1
+     326:	ace080e7          	jalr	-1330(ra) # df0 <fork>
       if(pid == 0){
-     328:	c909                	beqz	a0,33a <go+0x2c2>
+     32a:	c909                	beqz	a0,33c <go+0x2c4>
         exit(0);
       } else if(pid < 0){
-     32a:	00054c63          	bltz	a0,342 <go+0x2ca>
+     32c:	00054c63          	bltz	a0,344 <go+0x2cc>
         printf("grind: fork failed\n");
         exit(1);
       }
       wait(0);
-     32e:	4501                	li	a0,0
-     330:	00001097          	auipc	ra,0x1
-     334:	ac0080e7          	jalr	-1344(ra) # df0 <wait>
-     338:	bbd5                	j	12c <go+0xb4>
+     330:	4501                	li	a0,0
+     332:	00001097          	auipc	ra,0x1
+     336:	ace080e7          	jalr	-1330(ra) # e00 <wait>
+     33a:	b3e5                	j	122 <go+0xaa>
         exit(0);
-     33a:	00001097          	auipc	ra,0x1
-     33e:	aae080e7          	jalr	-1362(ra) # de8 <exit>
+     33c:	00001097          	auipc	ra,0x1
+     340:	abc080e7          	jalr	-1348(ra) # df8 <exit>
         printf("grind: fork failed\n");
-     342:	00001517          	auipc	a0,0x1
-     346:	0b650513          	addi	a0,a0,182 # 13f8 <malloc+0x1de>
-     34a:	00001097          	auipc	ra,0x1
-     34e:	e18080e7          	jalr	-488(ra) # 1162 <printf>
-        exit(1);
-     352:	4505                	li	a0,1
-     354:	00001097          	auipc	ra,0x1
-     358:	a94080e7          	jalr	-1388(ra) # de8 <exit>
+     344:	00001517          	auipc	a0,0x1
+     348:	0dc50513          	addi	a0,a0,220 # 1420 <malloc+0x1e6>
+     34c:	00001097          	auipc	ra,0x1
+     350:	e36080e7          	jalr	-458(ra) # 1182 <printf>
+        exit(1);
+     354:	4505                	li	a0,1
+     356:	00001097          	auipc	ra,0x1
+     35a:	aa2080e7          	jalr	-1374(ra) # df8 <exit>
     } else if(what == 14){
       int pid = fork();
-     35c:	00001097          	auipc	ra,0x1
-     360:	a84080e7          	jalr	-1404(ra) # de0 <fork>
+     35e:	00001097          	auipc	ra,0x1
+     362:	a92080e7          	jalr	-1390(ra) # df0 <fork>
       if(pid == 0){
-     364:	c909                	beqz	a0,376 <go+0x2fe>
+     366:	c909                	beqz	a0,378 <go+0x300>
         fork();
         fork();
         exit(0);
       } else if(pid < 0){
-     366:	02054563          	bltz	a0,390 <go+0x318>
+     368:	02054563          	bltz	a0,392 <go+0x31a>
         printf("grind: fork failed\n");
         exit(1);
       }
       wait(0);
-     36a:	4501                	li	a0,0
-     36c:	00001097          	auipc	ra,0x1
-     370:	a84080e7          	jalr	-1404(ra) # df0 <wait>
-     374:	bb65                	j	12c <go+0xb4>
+     36c:	4501                	li	a0,0
+     36e:	00001097          	auipc	ra,0x1
+     372:	a92080e7          	jalr	-1390(ra) # e00 <wait>
+     376:	b375                	j	122 <go+0xaa>
         fork();
-     376:	00001097          	auipc	ra,0x1
-     37a:	a6a080e7          	jalr	-1430(ra) # de0 <fork>
+     378:	00001097          	auipc	ra,0x1
+     37c:	a78080e7          	jalr	-1416(ra) # df0 <fork>
         fork();
-     37e:	00001097          	auipc	ra,0x1
-     382:	a62080e7          	jalr	-1438(ra) # de0 <fork>
+     380:	00001097          	auipc	ra,0x1
+     384:	a70080e7          	jalr	-1424(ra) # df0 <fork>
         exit(0);
-     386:	4501                	li	a0,0
-     388:	00001097          	auipc	ra,0x1
-     38c:	a60080e7          	jalr	-1440(ra) # de8 <exit>
+     388:	4501                	li	a0,0
+     38a:	00001097          	auipc	ra,0x1
+     38e:	a6e080e7          	jalr	-1426(ra) # df8 <exit>
         printf("grind: fork failed\n");
-     390:	00001517          	auipc	a0,0x1
-     394:	06850513          	addi	a0,a0,104 # 13f8 <malloc+0x1de>
-     398:	00001097          	auipc	ra,0x1
-     39c:	dca080e7          	jalr	-566(ra) # 1162 <printf>
-        exit(1);
-     3a0:	4505                	li	a0,1
-     3a2:	00001097          	auipc	ra,0x1
-     3a6:	a46080e7          	jalr	-1466(ra) # de8 <exit>
+     392:	00001517          	auipc	a0,0x1
+     396:	08e50513          	addi	a0,a0,142 # 1420 <malloc+0x1e6>
+     39a:	00001097          	auipc	ra,0x1
+     39e:	de8080e7          	jalr	-536(ra) # 1182 <printf>
+        exit(1);
+     3a2:	4505                	li	a0,1
+     3a4:	00001097          	auipc	ra,0x1
+     3a8:	a54080e7          	jalr	-1452(ra) # df8 <exit>
     } else if(what == 15){
       sbrk(6011);
-     3aa:	6505                	lui	a0,0x1
-     3ac:	77b50513          	addi	a0,a0,1915 # 177b <buf.0+0xd3>
-     3b0:	00001097          	auipc	ra,0x1
-     3b4:	ac0080e7          	jalr	-1344(ra) # e70 <sbrk>
-     3b8:	bb95                	j	12c <go+0xb4>
+     3ac:	6505                	lui	a0,0x1
+     3ae:	77b50513          	addi	a0,a0,1915 # 177b <buf.0+0x8b>
+     3b2:	00001097          	auipc	ra,0x1
+     3b6:	ace080e7          	jalr	-1330(ra) # e80 <sbrk>
+     3ba:	b3a5                	j	122 <go+0xaa>
     } else if(what == 16){
       if(sbrk(0) > break0)
-     3ba:	4501                	li	a0,0
-     3bc:	00001097          	auipc	ra,0x1
-     3c0:	ab4080e7          	jalr	-1356(ra) # e70 <sbrk>
-     3c4:	d6aaf4e3          	bgeu	s5,a0,12c <go+0xb4>
+     3bc:	4501                	li	a0,0
+     3be:	00001097          	auipc	ra,0x1
+     3c2:	ac2080e7          	jalr	-1342(ra) # e80 <sbrk>
+     3c6:	d4aafee3          	bgeu	s5,a0,122 <go+0xaa>
         sbrk(-(sbrk(0) - break0));
-     3c8:	4501                	li	a0,0
-     3ca:	00001097          	auipc	ra,0x1
-     3ce:	aa6080e7          	jalr	-1370(ra) # e70 <sbrk>
-     3d2:	40aa853b          	subw	a0,s5,a0
-     3d6:	00001097          	auipc	ra,0x1
-     3da:	a9a080e7          	jalr	-1382(ra) # e70 <sbrk>
-     3de:	b3b9                	j	12c <go+0xb4>
+     3ca:	4501                	li	a0,0
+     3cc:	00001097          	auipc	ra,0x1
+     3d0:	ab4080e7          	jalr	-1356(ra) # e80 <sbrk>
+     3d4:	40aa853b          	subw	a0,s5,a0
+     3d8:	00001097          	auipc	ra,0x1
+     3dc:	aa8080e7          	jalr	-1368(ra) # e80 <sbrk>
+     3e0:	b389                	j	122 <go+0xaa>
     } else if(what == 17){
       int pid = fork();
-     3e0:	00001097          	auipc	ra,0x1
-     3e4:	a00080e7          	jalr	-1536(ra) # de0 <fork>
-     3e8:	8baa                	mv	s7,a0
+     3e2:	00001097          	auipc	ra,0x1
+     3e6:	a0e080e7          	jalr	-1522(ra) # df0 <fork>
+     3ea:	8b2a                	mv	s6,a0
       if(pid == 0){
-     3ea:	c51d                	beqz	a0,418 <go+0x3a0>
+     3ec:	c51d                	beqz	a0,41a <go+0x3a2>
         close(open("a", O_CREATE|O_RDWR));
         exit(0);
       } else if(pid < 0){
-     3ec:	04054963          	bltz	a0,43e <go+0x3c6>
+     3ee:	04054963          	bltz	a0,440 <go+0x3c8>
         printf("grind: fork failed\n");
         exit(1);
       }
       if(chdir("../grindir/..") != 0){
-     3f0:	00001517          	auipc	a0,0x1
-     3f4:	02050513          	addi	a0,a0,32 # 1410 <malloc+0x1f6>
-     3f8:	00001097          	auipc	ra,0x1
-     3fc:	a60080e7          	jalr	-1440(ra) # e58 <chdir>
-     400:	ed21                	bnez	a0,458 <go+0x3e0>
-        printf("chdir failed\n");
+     3f2:	00001517          	auipc	a0,0x1
+     3f6:	04650513          	addi	a0,a0,70 # 1438 <malloc+0x1fe>
+     3fa:	00001097          	auipc	ra,0x1
+     3fe:	a6e080e7          	jalr	-1426(ra) # e68 <chdir>
+     402:	ed21                	bnez	a0,45a <go+0x3e2>
+        printf("grind: chdir failed\n");
         exit(1);
       }
       kill(pid);
-     402:	855e                	mv	a0,s7
-     404:	00001097          	auipc	ra,0x1
-     408:	a14080e7          	jalr	-1516(ra) # e18 <kill>
+     404:	855a                	mv	a0,s6
+     406:	00001097          	auipc	ra,0x1
+     40a:	a22080e7          	jalr	-1502(ra) # e28 <kill>
       wait(0);
-     40c:	4501                	li	a0,0
-     40e:	00001097          	auipc	ra,0x1
-     412:	9e2080e7          	jalr	-1566(ra) # df0 <wait>
-     416:	bb19                	j	12c <go+0xb4>
+     40e:	4501                	li	a0,0
+     410:	00001097          	auipc	ra,0x1
+     414:	9f0080e7          	jalr	-1552(ra) # e00 <wait>
+     418:	b329                	j	122 <go+0xaa>
         close(open("a", O_CREATE|O_RDWR));
-     418:	20200593          	li	a1,514
-     41c:	00001517          	auipc	a0,0x1
-     420:	fbc50513          	addi	a0,a0,-68 # 13d8 <malloc+0x1be>
-     424:	00001097          	auipc	ra,0x1
-     428:	a04080e7          	jalr	-1532(ra) # e28 <open>
-     42c:	00001097          	auipc	ra,0x1
-     430:	9e4080e7          	jalr	-1564(ra) # e10 <close>
+     41a:	20200593          	li	a1,514
+     41e:	00001517          	auipc	a0,0x1
+     422:	fe250513          	addi	a0,a0,-30 # 1400 <malloc+0x1c6>
+     426:	00001097          	auipc	ra,0x1
+     42a:	a12080e7          	jalr	-1518(ra) # e38 <open>
+     42e:	00001097          	auipc	ra,0x1
+     432:	9f2080e7          	jalr	-1550(ra) # e20 <close>
         exit(0);
-     434:	4501                	li	a0,0
-     436:	00001097          	auipc	ra,0x1
-     43a:	9b2080e7          	jalr	-1614(ra) # de8 <exit>
+     436:	4501                	li	a0,0
+     438:	00001097          	auipc	ra,0x1
+     43c:	9c0080e7          	jalr	-1600(ra) # df8 <exit>
         printf("grind: fork failed\n");
-     43e:	00001517          	auipc	a0,0x1
-     442:	fba50513          	addi	a0,a0,-70 # 13f8 <malloc+0x1de>
-     446:	00001097          	auipc	ra,0x1
-     44a:	d1c080e7          	jalr	-740(ra) # 1162 <printf>
-        exit(1);
-     44e:	4505                	li	a0,1
-     450:	00001097          	auipc	ra,0x1
-     454:	998080e7          	jalr	-1640(ra) # de8 <exit>
-        printf("chdir failed\n");
-     458:	00001517          	auipc	a0,0x1
-     45c:	fc850513          	addi	a0,a0,-56 # 1420 <malloc+0x206>
-     460:	00001097          	auipc	ra,0x1
-     464:	d02080e7          	jalr	-766(ra) # 1162 <printf>
-        exit(1);
-     468:	4505                	li	a0,1
-     46a:	00001097          	auipc	ra,0x1
-     46e:	97e080e7          	jalr	-1666(ra) # de8 <exit>
+     440:	00001517          	auipc	a0,0x1
+     444:	fe050513          	addi	a0,a0,-32 # 1420 <malloc+0x1e6>
+     448:	00001097          	auipc	ra,0x1
+     44c:	d3a080e7          	jalr	-710(ra) # 1182 <printf>
+        exit(1);
+     450:	4505                	li	a0,1
+     452:	00001097          	auipc	ra,0x1
+     456:	9a6080e7          	jalr	-1626(ra) # df8 <exit>
+        printf("grind: chdir failed\n");
+     45a:	00001517          	auipc	a0,0x1
+     45e:	fee50513          	addi	a0,a0,-18 # 1448 <malloc+0x20e>
+     462:	00001097          	auipc	ra,0x1
+     466:	d20080e7          	jalr	-736(ra) # 1182 <printf>
+        exit(1);
+     46a:	4505                	li	a0,1
+     46c:	00001097          	auipc	ra,0x1
+     470:	98c080e7          	jalr	-1652(ra) # df8 <exit>
     } else if(what == 18){
       int pid = fork();
-     472:	00001097          	auipc	ra,0x1
-     476:	96e080e7          	jalr	-1682(ra) # de0 <fork>
+     474:	00001097          	auipc	ra,0x1
+     478:	97c080e7          	jalr	-1668(ra) # df0 <fork>
       if(pid == 0){
-     47a:	c909                	beqz	a0,48c <go+0x414>
+     47c:	c909                	beqz	a0,48e <go+0x416>
         kill(getpid());
         exit(0);
       } else if(pid < 0){
-     47c:	02054563          	bltz	a0,4a6 <go+0x42e>
+     47e:	02054563          	bltz	a0,4a8 <go+0x430>
         printf("grind: fork failed\n");
         exit(1);
       }
       wait(0);
-     480:	4501                	li	a0,0
-     482:	00001097          	auipc	ra,0x1
-     486:	96e080e7          	jalr	-1682(ra) # df0 <wait>
-     48a:	b14d                	j	12c <go+0xb4>
+     482:	4501                	li	a0,0
+     484:	00001097          	auipc	ra,0x1
+     488:	97c080e7          	jalr	-1668(ra) # e00 <wait>
+     48c:	b959                	j	122 <go+0xaa>
         kill(getpid());
-     48c:	00001097          	auipc	ra,0x1
-     490:	9dc080e7          	jalr	-1572(ra) # e68 <getpid>
-     494:	00001097          	auipc	ra,0x1
-     498:	984080e7          	jalr	-1660(ra) # e18 <kill>
+     48e:	00001097          	auipc	ra,0x1
+     492:	9ea080e7          	jalr	-1558(ra) # e78 <getpid>
+     496:	00001097          	auipc	ra,0x1
+     49a:	992080e7          	jalr	-1646(ra) # e28 <kill>
         exit(0);
-     49c:	4501                	li	a0,0
-     49e:	00001097          	auipc	ra,0x1
-     4a2:	94a080e7          	jalr	-1718(ra) # de8 <exit>
+     49e:	4501                	li	a0,0
+     4a0:	00001097          	auipc	ra,0x1
+     4a4:	958080e7          	jalr	-1704(ra) # df8 <exit>
         printf("grind: fork failed\n");
-     4a6:	00001517          	auipc	a0,0x1
-     4aa:	f5250513          	addi	a0,a0,-174 # 13f8 <malloc+0x1de>
-     4ae:	00001097          	auipc	ra,0x1
-     4b2:	cb4080e7          	jalr	-844(ra) # 1162 <printf>
-        exit(1);
-     4b6:	4505                	li	a0,1
-     4b8:	00001097          	auipc	ra,0x1
-     4bc:	930080e7          	jalr	-1744(ra) # de8 <exit>
+     4a8:	00001517          	auipc	a0,0x1
+     4ac:	f7850513          	addi	a0,a0,-136 # 1420 <malloc+0x1e6>
+     4b0:	00001097          	auipc	ra,0x1
+     4b4:	cd2080e7          	jalr	-814(ra) # 1182 <printf>
+        exit(1);
+     4b8:	4505                	li	a0,1
+     4ba:	00001097          	auipc	ra,0x1
+     4be:	93e080e7          	jalr	-1730(ra) # df8 <exit>
     } else if(what == 19){
       int fds[2];
       if(pipe(fds) < 0){
-     4c0:	f9840513          	addi	a0,s0,-104
-     4c4:	00001097          	auipc	ra,0x1
-     4c8:	934080e7          	jalr	-1740(ra) # df8 <pipe>
-     4cc:	02054b63          	bltz	a0,502 <go+0x48a>
+     4c2:	fa840513          	addi	a0,s0,-88
+     4c6:	00001097          	auipc	ra,0x1
+     4ca:	942080e7          	jalr	-1726(ra) # e08 <pipe>
+     4ce:	02054b63          	bltz	a0,504 <go+0x48c>
         printf("grind: pipe failed\n");
         exit(1);
       }
       int pid = fork();
-     4d0:	00001097          	auipc	ra,0x1
-     4d4:	910080e7          	jalr	-1776(ra) # de0 <fork>
+     4d2:	00001097          	auipc	ra,0x1
+     4d6:	91e080e7          	jalr	-1762(ra) # df0 <fork>
       if(pid == 0){
-     4d8:	c131                	beqz	a0,51c <go+0x4a4>
+     4da:	c131                	beqz	a0,51e <go+0x4a6>
           printf("grind: pipe write failed\n");
         char c;
         if(read(fds[0], &c, 1) != 1)
           printf("grind: pipe read failed\n");
         exit(0);
       } else if(pid < 0){
-     4da:	0a054a63          	bltz	a0,58e <go+0x516>
+     4dc:	0a054a63          	bltz	a0,590 <go+0x518>
         printf("grind: fork failed\n");
         exit(1);
       }
       close(fds[0]);
-     4de:	f9842503          	lw	a0,-104(s0)
-     4e2:	00001097          	auipc	ra,0x1
-     4e6:	92e080e7          	jalr	-1746(ra) # e10 <close>
+     4e0:	fa842503          	lw	a0,-88(s0)
+     4e4:	00001097          	auipc	ra,0x1
+     4e8:	93c080e7          	jalr	-1732(ra) # e20 <close>
       close(fds[1]);
-     4ea:	f9c42503          	lw	a0,-100(s0)
-     4ee:	00001097          	auipc	ra,0x1
-     4f2:	922080e7          	jalr	-1758(ra) # e10 <close>
+     4ec:	fac42503          	lw	a0,-84(s0)
+     4f0:	00001097          	auipc	ra,0x1
+     4f4:	930080e7          	jalr	-1744(ra) # e20 <close>
       wait(0);
-     4f6:	4501                	li	a0,0
-     4f8:	00001097          	auipc	ra,0x1
-     4fc:	8f8080e7          	jalr	-1800(ra) # df0 <wait>
-     500:	b135                	j	12c <go+0xb4>
+     4f8:	4501                	li	a0,0
+     4fa:	00001097          	auipc	ra,0x1
+     4fe:	906080e7          	jalr	-1786(ra) # e00 <wait>
+     502:	b105                	j	122 <go+0xaa>
         printf("grind: pipe failed\n");
-     502:	00001517          	auipc	a0,0x1
-     506:	f2e50513          	addi	a0,a0,-210 # 1430 <malloc+0x216>
-     50a:	00001097          	auipc	ra,0x1
-     50e:	c58080e7          	jalr	-936(ra) # 1162 <printf>
-        exit(1);
-     512:	4505                	li	a0,1
-     514:	00001097          	auipc	ra,0x1
-     518:	8d4080e7          	jalr	-1836(ra) # de8 <exit>
+     504:	00001517          	auipc	a0,0x1
+     508:	f5c50513          	addi	a0,a0,-164 # 1460 <malloc+0x226>
+     50c:	00001097          	auipc	ra,0x1
+     510:	c76080e7          	jalr	-906(ra) # 1182 <printf>
+        exit(1);
+     514:	4505                	li	a0,1
+     516:	00001097          	auipc	ra,0x1
+     51a:	8e2080e7          	jalr	-1822(ra) # df8 <exit>
         fork();
-     51c:	00001097          	auipc	ra,0x1
-     520:	8c4080e7          	jalr	-1852(ra) # de0 <fork>
+     51e:	00001097          	auipc	ra,0x1
+     522:	8d2080e7          	jalr	-1838(ra) # df0 <fork>
         fork();
-     524:	00001097          	auipc	ra,0x1
-     528:	8bc080e7          	jalr	-1860(ra) # de0 <fork>
+     526:	00001097          	auipc	ra,0x1
+     52a:	8ca080e7          	jalr	-1846(ra) # df0 <fork>
         if(write(fds[1], "x", 1) != 1)
-     52c:	4605                	li	a2,1
-     52e:	00001597          	auipc	a1,0x1
-     532:	f1a58593          	addi	a1,a1,-230 # 1448 <malloc+0x22e>
-     536:	f9c42503          	lw	a0,-100(s0)
-     53a:	00001097          	auipc	ra,0x1
-     53e:	8ce080e7          	jalr	-1842(ra) # e08 <write>
-     542:	4785                	li	a5,1
-     544:	02f51363          	bne	a0,a5,56a <go+0x4f2>
+     52e:	4605                	li	a2,1
+     530:	00001597          	auipc	a1,0x1
+     534:	f4858593          	addi	a1,a1,-184 # 1478 <malloc+0x23e>
+     538:	fac42503          	lw	a0,-84(s0)
+     53c:	00001097          	auipc	ra,0x1
+     540:	8dc080e7          	jalr	-1828(ra) # e18 <write>
+     544:	4785                	li	a5,1
+     546:	02f51363          	bne	a0,a5,56c <go+0x4f4>
         if(read(fds[0], &c, 1) != 1)
-     548:	4605                	li	a2,1
-     54a:	f9040593          	addi	a1,s0,-112
-     54e:	f9842503          	lw	a0,-104(s0)
-     552:	00001097          	auipc	ra,0x1
-     556:	8ae080e7          	jalr	-1874(ra) # e00 <read>
-     55a:	4785                	li	a5,1
-     55c:	02f51063          	bne	a0,a5,57c <go+0x504>
+     54a:	4605                	li	a2,1
+     54c:	fa040593          	addi	a1,s0,-96
+     550:	fa842503          	lw	a0,-88(s0)
+     554:	00001097          	auipc	ra,0x1
+     558:	8bc080e7          	jalr	-1860(ra) # e10 <read>
+     55c:	4785                	li	a5,1
+     55e:	02f51063          	bne	a0,a5,57e <go+0x506>
         exit(0);
-     560:	4501                	li	a0,0
-     562:	00001097          	auipc	ra,0x1
-     566:	886080e7          	jalr	-1914(ra) # de8 <exit>
+     562:	4501                	li	a0,0
+     564:	00001097          	auipc	ra,0x1
+     568:	894080e7          	jalr	-1900(ra) # df8 <exit>
           printf("grind: pipe write failed\n");
-     56a:	00001517          	auipc	a0,0x1
-     56e:	ee650513          	addi	a0,a0,-282 # 1450 <malloc+0x236>
-     572:	00001097          	auipc	ra,0x1
-     576:	bf0080e7          	jalr	-1040(ra) # 1162 <printf>
-     57a:	b7f9                	j	548 <go+0x4d0>
+     56c:	00001517          	auipc	a0,0x1
+     570:	f1450513          	addi	a0,a0,-236 # 1480 <malloc+0x246>
+     574:	00001097          	auipc	ra,0x1
+     578:	c0e080e7          	jalr	-1010(ra) # 1182 <printf>
+     57c:	b7f9                	j	54a <go+0x4d2>
           printf("grind: pipe read failed\n");
-     57c:	00001517          	auipc	a0,0x1
-     580:	ef450513          	addi	a0,a0,-268 # 1470 <malloc+0x256>
-     584:	00001097          	auipc	ra,0x1
-     588:	bde080e7          	jalr	-1058(ra) # 1162 <printf>
-     58c:	bfd1                	j	560 <go+0x4e8>
+     57e:	00001517          	auipc	a0,0x1
+     582:	f2250513          	addi	a0,a0,-222 # 14a0 <malloc+0x266>
+     586:	00001097          	auipc	ra,0x1
+     58a:	bfc080e7          	jalr	-1028(ra) # 1182 <printf>
+     58e:	bfd1                	j	562 <go+0x4ea>
         printf("grind: fork failed\n");
-     58e:	00001517          	auipc	a0,0x1
-     592:	e6a50513          	addi	a0,a0,-406 # 13f8 <malloc+0x1de>
-     596:	00001097          	auipc	ra,0x1
-     59a:	bcc080e7          	jalr	-1076(ra) # 1162 <printf>
-        exit(1);
-     59e:	4505                	li	a0,1
-     5a0:	00001097          	auipc	ra,0x1
-     5a4:	848080e7          	jalr	-1976(ra) # de8 <exit>
+     590:	00001517          	auipc	a0,0x1
+     594:	e9050513          	addi	a0,a0,-368 # 1420 <malloc+0x1e6>
+     598:	00001097          	auipc	ra,0x1
+     59c:	bea080e7          	jalr	-1046(ra) # 1182 <printf>
+        exit(1);
+     5a0:	4505                	li	a0,1
+     5a2:	00001097          	auipc	ra,0x1
+     5a6:	856080e7          	jalr	-1962(ra) # df8 <exit>
     } else if(what == 20){
       int pid = fork();
-     5a8:	00001097          	auipc	ra,0x1
-     5ac:	838080e7          	jalr	-1992(ra) # de0 <fork>
+     5aa:	00001097          	auipc	ra,0x1
+     5ae:	846080e7          	jalr	-1978(ra) # df0 <fork>
       if(pid == 0){
-     5b0:	c909                	beqz	a0,5c2 <go+0x54a>
+     5b2:	c909                	beqz	a0,5c4 <go+0x54c>
         chdir("a");
         unlink("../a");
         fd = open("x", O_CREATE|O_RDWR);
         unlink("x");
         exit(0);
       } else if(pid < 0){
-     5b2:	06054f63          	bltz	a0,630 <go+0x5b8>
-        printf("fork failed\n");
+     5b4:	06054f63          	bltz	a0,632 <go+0x5ba>
+        printf("grind: fork failed\n");
         exit(1);
       }
       wait(0);
-     5b6:	4501                	li	a0,0
-     5b8:	00001097          	auipc	ra,0x1
-     5bc:	838080e7          	jalr	-1992(ra) # df0 <wait>
-     5c0:	b6b5                	j	12c <go+0xb4>
+     5b8:	4501                	li	a0,0
+     5ba:	00001097          	auipc	ra,0x1
+     5be:	846080e7          	jalr	-1978(ra) # e00 <wait>
+     5c2:	b685                	j	122 <go+0xaa>
         unlink("a");
-     5c2:	00001517          	auipc	a0,0x1
-     5c6:	e1650513          	addi	a0,a0,-490 # 13d8 <malloc+0x1be>
-     5ca:	00001097          	auipc	ra,0x1
-     5ce:	86e080e7          	jalr	-1938(ra) # e38 <unlink>
+     5c4:	00001517          	auipc	a0,0x1
+     5c8:	e3c50513          	addi	a0,a0,-452 # 1400 <malloc+0x1c6>
+     5cc:	00001097          	auipc	ra,0x1
+     5d0:	87c080e7          	jalr	-1924(ra) # e48 <unlink>
         mkdir("a");
-     5d2:	00001517          	auipc	a0,0x1
-     5d6:	e0650513          	addi	a0,a0,-506 # 13d8 <malloc+0x1be>
-     5da:	00001097          	auipc	ra,0x1
-     5de:	876080e7          	jalr	-1930(ra) # e50 <mkdir>
+     5d4:	00001517          	auipc	a0,0x1
+     5d8:	e2c50513          	addi	a0,a0,-468 # 1400 <malloc+0x1c6>
+     5dc:	00001097          	auipc	ra,0x1
+     5e0:	884080e7          	jalr	-1916(ra) # e60 <mkdir>
         chdir("a");
-     5e2:	00001517          	auipc	a0,0x1
-     5e6:	df650513          	addi	a0,a0,-522 # 13d8 <malloc+0x1be>
-     5ea:	00001097          	auipc	ra,0x1
-     5ee:	86e080e7          	jalr	-1938(ra) # e58 <chdir>
+     5e4:	00001517          	auipc	a0,0x1
+     5e8:	e1c50513          	addi	a0,a0,-484 # 1400 <malloc+0x1c6>
+     5ec:	00001097          	auipc	ra,0x1
+     5f0:	87c080e7          	jalr	-1924(ra) # e68 <chdir>
         unlink("../a");
-     5f2:	00001517          	auipc	a0,0x1
-     5f6:	d4e50513          	addi	a0,a0,-690 # 1340 <malloc+0x126>
-     5fa:	00001097          	auipc	ra,0x1
-     5fe:	83e080e7          	jalr	-1986(ra) # e38 <unlink>
+     5f4:	00001517          	auipc	a0,0x1
+     5f8:	d7450513          	addi	a0,a0,-652 # 1368 <malloc+0x12e>
+     5fc:	00001097          	auipc	ra,0x1
+     600:	84c080e7          	jalr	-1972(ra) # e48 <unlink>
         fd = open("x", O_CREATE|O_RDWR);
-     602:	20200593          	li	a1,514
-     606:	00001517          	auipc	a0,0x1
-     60a:	e4250513          	addi	a0,a0,-446 # 1448 <malloc+0x22e>
-     60e:	00001097          	auipc	ra,0x1
-     612:	81a080e7          	jalr	-2022(ra) # e28 <open>
+     604:	20200593          	li	a1,514
+     608:	00001517          	auipc	a0,0x1
+     60c:	e7050513          	addi	a0,a0,-400 # 1478 <malloc+0x23e>
+     610:	00001097          	auipc	ra,0x1
+     614:	828080e7          	jalr	-2008(ra) # e38 <open>
         unlink("x");
-     616:	00001517          	auipc	a0,0x1
-     61a:	e3250513          	addi	a0,a0,-462 # 1448 <malloc+0x22e>
-     61e:	00001097          	auipc	ra,0x1
-     622:	81a080e7          	jalr	-2022(ra) # e38 <unlink>
+     618:	00001517          	auipc	a0,0x1
+     61c:	e6050513          	addi	a0,a0,-416 # 1478 <malloc+0x23e>
+     620:	00001097          	auipc	ra,0x1
+     624:	828080e7          	jalr	-2008(ra) # e48 <unlink>
         exit(0);
-     626:	4501                	li	a0,0
-     628:	00000097          	auipc	ra,0x0
-     62c:	7c0080e7          	jalr	1984(ra) # de8 <exit>
-        printf("fork failed\n");
-     630:	00001517          	auipc	a0,0x1
-     634:	e6050513          	addi	a0,a0,-416 # 1490 <malloc+0x276>
-     638:	00001097          	auipc	ra,0x1
-     63c:	b2a080e7          	jalr	-1238(ra) # 1162 <printf>
-        exit(1);
-     640:	4505                	li	a0,1
-     642:	00000097          	auipc	ra,0x0
-     646:	7a6080e7          	jalr	1958(ra) # de8 <exit>
+     628:	4501                	li	a0,0
+     62a:	00000097          	auipc	ra,0x0
+     62e:	7ce080e7          	jalr	1998(ra) # df8 <exit>
+        printf("grind: fork failed\n");
+     632:	00001517          	auipc	a0,0x1
+     636:	dee50513          	addi	a0,a0,-530 # 1420 <malloc+0x1e6>
+     63a:	00001097          	auipc	ra,0x1
+     63e:	b48080e7          	jalr	-1208(ra) # 1182 <printf>
+        exit(1);
+     642:	4505                	li	a0,1
+     644:	00000097          	auipc	ra,0x0
+     648:	7b4080e7          	jalr	1972(ra) # df8 <exit>
     } else if(what == 21){
       unlink("c");
-     64a:	00001517          	auipc	a0,0x1
-     64e:	e5650513          	addi	a0,a0,-426 # 14a0 <malloc+0x286>
-     652:	00000097          	auipc	ra,0x0
-     656:	7e6080e7          	jalr	2022(ra) # e38 <unlink>
+     64c:	00001517          	auipc	a0,0x1
+     650:	e7450513          	addi	a0,a0,-396 # 14c0 <malloc+0x286>
+     654:	00000097          	auipc	ra,0x0
+     658:	7f4080e7          	jalr	2036(ra) # e48 <unlink>
       // should always succeed. check that there are free i-nodes,
       // file descriptors, blocks.
       int fd1 = open("c", O_CREATE|O_RDWR);
-     65a:	20200593          	li	a1,514
-     65e:	00001517          	auipc	a0,0x1
-     662:	e4250513          	addi	a0,a0,-446 # 14a0 <malloc+0x286>
-     666:	00000097          	auipc	ra,0x0
-     66a:	7c2080e7          	jalr	1986(ra) # e28 <open>
-     66e:	8baa                	mv	s7,a0
+     65c:	20200593          	li	a1,514
+     660:	00001517          	auipc	a0,0x1
+     664:	e6050513          	addi	a0,a0,-416 # 14c0 <malloc+0x286>
+     668:	00000097          	auipc	ra,0x0
+     66c:	7d0080e7          	jalr	2000(ra) # e38 <open>
+     670:	8b2a                	mv	s6,a0
       if(fd1 < 0){
-     670:	04054f63          	bltz	a0,6ce <go+0x656>
-        printf("create c failed\n");
+     672:	04054f63          	bltz	a0,6d0 <go+0x658>
+        printf("grind: create c failed\n");
         exit(1);
       }
       if(write(fd1, "x", 1) != 1){
-     674:	4605                	li	a2,1
-     676:	00001597          	auipc	a1,0x1
-     67a:	dd258593          	addi	a1,a1,-558 # 1448 <malloc+0x22e>
-     67e:	00000097          	auipc	ra,0x0
-     682:	78a080e7          	jalr	1930(ra) # e08 <write>
-     686:	4785                	li	a5,1
-     688:	06f51063          	bne	a0,a5,6e8 <go+0x670>
-        printf("write c failed\n");
+     676:	4605                	li	a2,1
+     678:	00001597          	auipc	a1,0x1
+     67c:	e0058593          	addi	a1,a1,-512 # 1478 <malloc+0x23e>
+     680:	00000097          	auipc	ra,0x0
+     684:	798080e7          	jalr	1944(ra) # e18 <write>
+     688:	4785                	li	a5,1
+     68a:	06f51063          	bne	a0,a5,6ea <go+0x672>
+        printf("grind: write c failed\n");
         exit(1);
       }
       struct stat st;
       if(fstat(fd1, &st) != 0){
-     68c:	f9840593          	addi	a1,s0,-104
-     690:	855e                	mv	a0,s7
-     692:	00000097          	auipc	ra,0x0
-     696:	7ae080e7          	jalr	1966(ra) # e40 <fstat>
-     69a:	e525                	bnez	a0,702 <go+0x68a>
-        printf("fstat failed\n");
+     68e:	fa840593          	addi	a1,s0,-88
+     692:	855a                	mv	a0,s6
+     694:	00000097          	auipc	ra,0x0
+     698:	7bc080e7          	jalr	1980(ra) # e50 <fstat>
+     69c:	e525                	bnez	a0,704 <go+0x68c>
+        printf("grind: fstat failed\n");
         exit(1);
       }
       if(st.size != 1){
-     69c:	fa843583          	ld	a1,-88(s0)
-     6a0:	4785                	li	a5,1
-     6a2:	06f59d63          	bne	a1,a5,71c <go+0x6a4>
-        printf("fstat reports wrong size %d\n", (int)st.size);
+     69e:	fb843583          	ld	a1,-72(s0)
+     6a2:	4785                	li	a5,1
+     6a4:	06f59d63          	bne	a1,a5,71e <go+0x6a6>
+        printf("grind: fstat reports wrong size %d\n", (int)st.size);
         exit(1);
       }
       if(st.ino > 200){
-     6a6:	f9c42583          	lw	a1,-100(s0)
-     6aa:	0c800793          	li	a5,200
-     6ae:	08b7e563          	bltu	a5,a1,738 <go+0x6c0>
-        printf("fstat reports crazy i-number %d\n", st.ino);
+     6a8:	fac42583          	lw	a1,-84(s0)
+     6ac:	0c800793          	li	a5,200
+     6b0:	08b7e563          	bltu	a5,a1,73a <go+0x6c2>
+        printf("grind: fstat reports crazy i-number %d\n", st.ino);
         exit(1);
       }
       close(fd1);
-     6b2:	855e                	mv	a0,s7
-     6b4:	00000097          	auipc	ra,0x0
-     6b8:	75c080e7          	jalr	1884(ra) # e10 <close>
+     6b4:	855a                	mv	a0,s6
+     6b6:	00000097          	auipc	ra,0x0
+     6ba:	76a080e7          	jalr	1898(ra) # e20 <close>
       unlink("c");
-     6bc:	00001517          	auipc	a0,0x1
-     6c0:	de450513          	addi	a0,a0,-540 # 14a0 <malloc+0x286>
-     6c4:	00000097          	auipc	ra,0x0
-     6c8:	774080e7          	jalr	1908(ra) # e38 <unlink>
-     6cc:	b485                	j	12c <go+0xb4>
-        printf("create c failed\n");
-     6ce:	00001517          	auipc	a0,0x1
-     6d2:	dda50513          	addi	a0,a0,-550 # 14a8 <malloc+0x28e>
-     6d6:	00001097          	auipc	ra,0x1
-     6da:	a8c080e7          	jalr	-1396(ra) # 1162 <printf>
-        exit(1);
-     6de:	4505                	li	a0,1
-     6e0:	00000097          	auipc	ra,0x0
-     6e4:	708080e7          	jalr	1800(ra) # de8 <exit>
-        printf("write c failed\n");
-     6e8:	00001517          	auipc	a0,0x1
-     6ec:	dd850513          	addi	a0,a0,-552 # 14c0 <malloc+0x2a6>
-     6f0:	00001097          	auipc	ra,0x1
-     6f4:	a72080e7          	jalr	-1422(ra) # 1162 <printf>
-        exit(1);
-     6f8:	4505                	li	a0,1
-     6fa:	00000097          	auipc	ra,0x0
-     6fe:	6ee080e7          	jalr	1774(ra) # de8 <exit>
-        printf("fstat failed\n");
-     702:	00001517          	auipc	a0,0x1
-     706:	dce50513          	addi	a0,a0,-562 # 14d0 <malloc+0x2b6>
-     70a:	00001097          	auipc	ra,0x1
-     70e:	a58080e7          	jalr	-1448(ra) # 1162 <printf>
-        exit(1);
-     712:	4505                	li	a0,1
-     714:	00000097          	auipc	ra,0x0
-     718:	6d4080e7          	jalr	1748(ra) # de8 <exit>
-        printf("fstat reports wrong size %d\n", (int)st.size);
-     71c:	2581                	sext.w	a1,a1
-     71e:	00001517          	auipc	a0,0x1
-     722:	dc250513          	addi	a0,a0,-574 # 14e0 <malloc+0x2c6>
-     726:	00001097          	auipc	ra,0x1
-     72a:	a3c080e7          	jalr	-1476(ra) # 1162 <printf>
-        exit(1);
-     72e:	4505                	li	a0,1
-     730:	00000097          	auipc	ra,0x0
-     734:	6b8080e7          	jalr	1720(ra) # de8 <exit>
-        printf("fstat reports crazy i-number %d\n", st.ino);
-     738:	00001517          	auipc	a0,0x1
-     73c:	dc850513          	addi	a0,a0,-568 # 1500 <malloc+0x2e6>
-     740:	00001097          	auipc	ra,0x1
-     744:	a22080e7          	jalr	-1502(ra) # 1162 <printf>
-        exit(1);
-     748:	4505                	li	a0,1
-     74a:	00000097          	auipc	ra,0x0
-     74e:	69e080e7          	jalr	1694(ra) # de8 <exit>
+     6be:	00001517          	auipc	a0,0x1
+     6c2:	e0250513          	addi	a0,a0,-510 # 14c0 <malloc+0x286>
+     6c6:	00000097          	auipc	ra,0x0
+     6ca:	782080e7          	jalr	1922(ra) # e48 <unlink>
+     6ce:	bc91                	j	122 <go+0xaa>
+        printf("grind: create c failed\n");
+     6d0:	00001517          	auipc	a0,0x1
+     6d4:	df850513          	addi	a0,a0,-520 # 14c8 <malloc+0x28e>
+     6d8:	00001097          	auipc	ra,0x1
+     6dc:	aaa080e7          	jalr	-1366(ra) # 1182 <printf>
+        exit(1);
+     6e0:	4505                	li	a0,1
+     6e2:	00000097          	auipc	ra,0x0
+     6e6:	716080e7          	jalr	1814(ra) # df8 <exit>
+        printf("grind: write c failed\n");
+     6ea:	00001517          	auipc	a0,0x1
+     6ee:	df650513          	addi	a0,a0,-522 # 14e0 <malloc+0x2a6>
+     6f2:	00001097          	auipc	ra,0x1
+     6f6:	a90080e7          	jalr	-1392(ra) # 1182 <printf>
+        exit(1);
+     6fa:	4505                	li	a0,1
+     6fc:	00000097          	auipc	ra,0x0
+     700:	6fc080e7          	jalr	1788(ra) # df8 <exit>
+        printf("grind: fstat failed\n");
+     704:	00001517          	auipc	a0,0x1
+     708:	df450513          	addi	a0,a0,-524 # 14f8 <malloc+0x2be>
+     70c:	00001097          	auipc	ra,0x1
+     710:	a76080e7          	jalr	-1418(ra) # 1182 <printf>
+        exit(1);
+     714:	4505                	li	a0,1
+     716:	00000097          	auipc	ra,0x0
+     71a:	6e2080e7          	jalr	1762(ra) # df8 <exit>
+        printf("grind: fstat reports wrong size %d\n", (int)st.size);
+     71e:	2581                	sext.w	a1,a1
+     720:	00001517          	auipc	a0,0x1
+     724:	df050513          	addi	a0,a0,-528 # 1510 <malloc+0x2d6>
+     728:	00001097          	auipc	ra,0x1
+     72c:	a5a080e7          	jalr	-1446(ra) # 1182 <printf>
+        exit(1);
+     730:	4505                	li	a0,1
+     732:	00000097          	auipc	ra,0x0
+     736:	6c6080e7          	jalr	1734(ra) # df8 <exit>
+        printf("grind: fstat reports crazy i-number %d\n", st.ino);
+     73a:	00001517          	auipc	a0,0x1
+     73e:	dfe50513          	addi	a0,a0,-514 # 1538 <malloc+0x2fe>
+     742:	00001097          	auipc	ra,0x1
+     746:	a40080e7          	jalr	-1472(ra) # 1182 <printf>
+        exit(1);
+     74a:	4505                	li	a0,1
+     74c:	00000097          	auipc	ra,0x0
+     750:	6ac080e7          	jalr	1708(ra) # df8 <exit>
     } else if(what == 22){
       // echo hi | cat
       int aa[2], bb[2];
       if(pipe(aa) < 0){
-     752:	f8840513          	addi	a0,s0,-120
-     756:	00000097          	auipc	ra,0x0
-     75a:	6a2080e7          	jalr	1698(ra) # df8 <pipe>
-     75e:	0e054963          	bltz	a0,850 <go+0x7d8>
-        fprintf(2, "pipe failed\n");
+     754:	f9840513          	addi	a0,s0,-104
+     758:	00000097          	auipc	ra,0x0
+     75c:	6b0080e7          	jalr	1712(ra) # e08 <pipe>
+     760:	10054063          	bltz	a0,860 <go+0x7e8>
+        fprintf(2, "grind: pipe failed\n");
         exit(1);
       }
       if(pipe(bb) < 0){
-     762:	f9040513          	addi	a0,s0,-112
-     766:	00000097          	auipc	ra,0x0
-     76a:	692080e7          	jalr	1682(ra) # df8 <pipe>
-     76e:	0e054f63          	bltz	a0,86c <go+0x7f4>
-        fprintf(2, "pipe failed\n");
+     764:	fa040513          	addi	a0,s0,-96
+     768:	00000097          	auipc	ra,0x0
+     76c:	6a0080e7          	jalr	1696(ra) # e08 <pipe>
+     770:	10054663          	bltz	a0,87c <go+0x804>
+        fprintf(2, "grind: pipe failed\n");
         exit(1);
       }
       int pid1 = fork();
-     772:	00000097          	auipc	ra,0x0
-     776:	66e080e7          	jalr	1646(ra) # de0 <fork>
+     774:	00000097          	auipc	ra,0x0
+     778:	67c080e7          	jalr	1660(ra) # df0 <fork>
       if(pid1 == 0){
-     77a:	10050763          	beqz	a0,888 <go+0x810>
+     77c:	10050e63          	beqz	a0,898 <go+0x820>
         close(aa[1]);
         char *args[3] = { "echo", "hi", 0 };
         exec("grindir/../echo", args);
-        fprintf(2, "echo: not found\n");
+        fprintf(2, "grind: echo: not found\n");
         exit(2);
       } else if(pid1 < 0){
-     77e:	1a054f63          	bltz	a0,93c <go+0x8c4>
-        fprintf(2, "fork failed\n");
+     780:	1c054663          	bltz	a0,94c <go+0x8d4>
+        fprintf(2, "grind: fork failed\n");
         exit(3);
       }
       int pid2 = fork();
-     782:	00000097          	auipc	ra,0x0
-     786:	65e080e7          	jalr	1630(ra) # de0 <fork>
+     784:	00000097          	auipc	ra,0x0
+     788:	66c080e7          	jalr	1644(ra) # df0 <fork>
       if(pid2 == 0){
-     78a:	1c050763          	beqz	a0,958 <go+0x8e0>
+     78c:	1c050e63          	beqz	a0,968 <go+0x8f0>
         close(bb[1]);
         char *args[2] = { "cat", 0 };
         exec("/cat", args);
-        fprintf(2, "cat: not found\n");
+        fprintf(2, "grind: cat: not found\n");
         exit(6);
       } else if(pid2 < 0){
-     78e:	2a054363          	bltz	a0,a34 <go+0x9bc>
-        fprintf(2, "fork failed\n");
+     790:	2a054a63          	bltz	a0,a44 <go+0x9cc>
+        fprintf(2, "grind: fork failed\n");
         exit(7);
       }
       close(aa[0]);
-     792:	f8842503          	lw	a0,-120(s0)
-     796:	00000097          	auipc	ra,0x0
-     79a:	67a080e7          	jalr	1658(ra) # e10 <close>
+     794:	f9842503          	lw	a0,-104(s0)
+     798:	00000097          	auipc	ra,0x0
+     79c:	688080e7          	jalr	1672(ra) # e20 <close>
       close(aa[1]);
-     79e:	f8c42503          	lw	a0,-116(s0)
-     7a2:	00000097          	auipc	ra,0x0
-     7a6:	66e080e7          	jalr	1646(ra) # e10 <close>
+     7a0:	f9c42503          	lw	a0,-100(s0)
+     7a4:	00000097          	auipc	ra,0x0
+     7a8:	67c080e7          	jalr	1660(ra) # e20 <close>
       close(bb[1]);
-     7aa:	f9442503          	lw	a0,-108(s0)
-     7ae:	00000097          	auipc	ra,0x0
-     7b2:	662080e7          	jalr	1634(ra) # e10 <close>
-      char buf[3] = { 0, 0, 0 };
-     7b6:	f8041023          	sh	zero,-128(s0)
-     7ba:	f8040123          	sb	zero,-126(s0)
+     7ac:	fa442503          	lw	a0,-92(s0)
+     7b0:	00000097          	auipc	ra,0x0
+     7b4:	670080e7          	jalr	1648(ra) # e20 <close>
+      char buf[4] = { 0, 0, 0, 0 };
+     7b8:	f8042823          	sw	zero,-112(s0)
       read(bb[0], buf+0, 1);
-     7be:	4605                	li	a2,1
-     7c0:	f8040593          	addi	a1,s0,-128
-     7c4:	f9042503          	lw	a0,-112(s0)
-     7c8:	00000097          	auipc	ra,0x0
-     7cc:	638080e7          	jalr	1592(ra) # e00 <read>
+     7bc:	4605                	li	a2,1
+     7be:	f9040593          	addi	a1,s0,-112
+     7c2:	fa042503          	lw	a0,-96(s0)
+     7c6:	00000097          	auipc	ra,0x0
+     7ca:	64a080e7          	jalr	1610(ra) # e10 <read>
       read(bb[0], buf+1, 1);
-     7d0:	4605                	li	a2,1
-     7d2:	f8140593          	addi	a1,s0,-127
-     7d6:	f9042503          	lw	a0,-112(s0)
-     7da:	00000097          	auipc	ra,0x0
-     7de:	626080e7          	jalr	1574(ra) # e00 <read>
+     7ce:	4605                	li	a2,1
+     7d0:	f9140593          	addi	a1,s0,-111
+     7d4:	fa042503          	lw	a0,-96(s0)
+     7d8:	00000097          	auipc	ra,0x0
+     7dc:	638080e7          	jalr	1592(ra) # e10 <read>
+      read(bb[0], buf+2, 1);
+     7e0:	4605                	li	a2,1
+     7e2:	f9240593          	addi	a1,s0,-110
+     7e6:	fa042503          	lw	a0,-96(s0)
+     7ea:	00000097          	auipc	ra,0x0
+     7ee:	626080e7          	jalr	1574(ra) # e10 <read>
       close(bb[0]);
-     7e2:	f9042503          	lw	a0,-112(s0)
-     7e6:	00000097          	auipc	ra,0x0
-     7ea:	62a080e7          	jalr	1578(ra) # e10 <close>
+     7f2:	fa042503          	lw	a0,-96(s0)
+     7f6:	00000097          	auipc	ra,0x0
+     7fa:	62a080e7          	jalr	1578(ra) # e20 <close>
       int st1, st2;
       wait(&st1);
-     7ee:	f8440513          	addi	a0,s0,-124
-     7f2:	00000097          	auipc	ra,0x0
-     7f6:	5fe080e7          	jalr	1534(ra) # df0 <wait>
+     7fe:	f9440513          	addi	a0,s0,-108
+     802:	00000097          	auipc	ra,0x0
+     806:	5fe080e7          	jalr	1534(ra) # e00 <wait>
       wait(&st2);
-     7fa:	f9840513          	addi	a0,s0,-104
-     7fe:	00000097          	auipc	ra,0x0
-     802:	5f2080e7          	jalr	1522(ra) # df0 <wait>
-      if(st1 != 0 || st2 != 0 || strcmp(buf, "hi") != 0){
-     806:	f8442783          	lw	a5,-124(s0)
-     80a:	f9842703          	lw	a4,-104(s0)
-     80e:	8fd9                	or	a5,a5,a4
-     810:	ef89                	bnez	a5,82a <go+0x7b2>
-     812:	00001597          	auipc	a1,0x1
-     816:	d3e58593          	addi	a1,a1,-706 # 1550 <malloc+0x336>
-     81a:	f8040513          	addi	a0,s0,-128
-     81e:	00000097          	auipc	ra,0x0
-     822:	37a080e7          	jalr	890(ra) # b98 <strcmp>
-     826:	900503e3          	beqz	a0,12c <go+0xb4>
-        printf("exec pipeline failed %d %d \"%s\"\n", st1, st2, buf);
-     82a:	f8040693          	addi	a3,s0,-128
-     82e:	f9842603          	lw	a2,-104(s0)
-     832:	f8442583          	lw	a1,-124(s0)
-     836:	00001517          	auipc	a0,0x1
-     83a:	d6a50513          	addi	a0,a0,-662 # 15a0 <malloc+0x386>
-     83e:	00001097          	auipc	ra,0x1
-     842:	924080e7          	jalr	-1756(ra) # 1162 <printf>
-        exit(1);
-     846:	4505                	li	a0,1
-     848:	00000097          	auipc	ra,0x0
-     84c:	5a0080e7          	jalr	1440(ra) # de8 <exit>
-        fprintf(2, "pipe failed\n");
-     850:	00001597          	auipc	a1,0x1
-     854:	cd858593          	addi	a1,a1,-808 # 1528 <malloc+0x30e>
-     858:	4509                	li	a0,2
-     85a:	00001097          	auipc	ra,0x1
-     85e:	8da080e7          	jalr	-1830(ra) # 1134 <fprintf>
-        exit(1);
-     862:	4505                	li	a0,1
-     864:	00000097          	auipc	ra,0x0
-     868:	584080e7          	jalr	1412(ra) # de8 <exit>
-        fprintf(2, "pipe failed\n");
-     86c:	00001597          	auipc	a1,0x1
-     870:	cbc58593          	addi	a1,a1,-836 # 1528 <malloc+0x30e>
-     874:	4509                	li	a0,2
-     876:	00001097          	auipc	ra,0x1
-     87a:	8be080e7          	jalr	-1858(ra) # 1134 <fprintf>
-        exit(1);
-     87e:	4505                	li	a0,1
-     880:	00000097          	auipc	ra,0x0
-     884:	568080e7          	jalr	1384(ra) # de8 <exit>
+     80a:	fa840513          	addi	a0,s0,-88
+     80e:	00000097          	auipc	ra,0x0
+     812:	5f2080e7          	jalr	1522(ra) # e00 <wait>
+      if(st1 != 0 || st2 != 0 || strcmp(buf, "hi\n") != 0){
+     816:	f9442783          	lw	a5,-108(s0)
+     81a:	fa842703          	lw	a4,-88(s0)
+     81e:	8fd9                	or	a5,a5,a4
+     820:	ef89                	bnez	a5,83a <go+0x7c2>
+     822:	00001597          	auipc	a1,0x1
+     826:	db658593          	addi	a1,a1,-586 # 15d8 <malloc+0x39e>
+     82a:	f9040513          	addi	a0,s0,-112
+     82e:	00000097          	auipc	ra,0x0
+     832:	37a080e7          	jalr	890(ra) # ba8 <strcmp>
+     836:	8e0506e3          	beqz	a0,122 <go+0xaa>
+        printf("grind: exec pipeline failed %d %d \"%s\"\n", st1, st2, buf);
+     83a:	f9040693          	addi	a3,s0,-112
+     83e:	fa842603          	lw	a2,-88(s0)
+     842:	f9442583          	lw	a1,-108(s0)
+     846:	00001517          	auipc	a0,0x1
+     84a:	d9a50513          	addi	a0,a0,-614 # 15e0 <malloc+0x3a6>
+     84e:	00001097          	auipc	ra,0x1
+     852:	934080e7          	jalr	-1740(ra) # 1182 <printf>
+        exit(1);
+     856:	4505                	li	a0,1
+     858:	00000097          	auipc	ra,0x0
+     85c:	5a0080e7          	jalr	1440(ra) # df8 <exit>
+        fprintf(2, "grind: pipe failed\n");
+     860:	00001597          	auipc	a1,0x1
+     864:	c0058593          	addi	a1,a1,-1024 # 1460 <malloc+0x226>
+     868:	4509                	li	a0,2
+     86a:	00001097          	auipc	ra,0x1
+     86e:	8ea080e7          	jalr	-1814(ra) # 1154 <fprintf>
+        exit(1);
+     872:	4505                	li	a0,1
+     874:	00000097          	auipc	ra,0x0
+     878:	584080e7          	jalr	1412(ra) # df8 <exit>
+        fprintf(2, "grind: pipe failed\n");
+     87c:	00001597          	auipc	a1,0x1
+     880:	be458593          	addi	a1,a1,-1052 # 1460 <malloc+0x226>
+     884:	4509                	li	a0,2
+     886:	00001097          	auipc	ra,0x1
+     88a:	8ce080e7          	jalr	-1842(ra) # 1154 <fprintf>
+        exit(1);
+     88e:	4505                	li	a0,1
+     890:	00000097          	auipc	ra,0x0
+     894:	568080e7          	jalr	1384(ra) # df8 <exit>
         close(bb[0]);
-     888:	f9042503          	lw	a0,-112(s0)
-     88c:	00000097          	auipc	ra,0x0
-     890:	584080e7          	jalr	1412(ra) # e10 <close>
+     898:	fa042503          	lw	a0,-96(s0)
+     89c:	00000097          	auipc	ra,0x0
+     8a0:	584080e7          	jalr	1412(ra) # e20 <close>
         close(bb[1]);
-     894:	f9442503          	lw	a0,-108(s0)
-     898:	00000097          	auipc	ra,0x0
-     89c:	578080e7          	jalr	1400(ra) # e10 <close>
+     8a4:	fa442503          	lw	a0,-92(s0)
+     8a8:	00000097          	auipc	ra,0x0
+     8ac:	578080e7          	jalr	1400(ra) # e20 <close>
         close(aa[0]);
-     8a0:	f8842503          	lw	a0,-120(s0)
-     8a4:	00000097          	auipc	ra,0x0
-     8a8:	56c080e7          	jalr	1388(ra) # e10 <close>
+     8b0:	f9842503          	lw	a0,-104(s0)
+     8b4:	00000097          	auipc	ra,0x0
+     8b8:	56c080e7          	jalr	1388(ra) # e20 <close>
         close(1);
-     8ac:	4505                	li	a0,1
-     8ae:	00000097          	auipc	ra,0x0
-     8b2:	562080e7          	jalr	1378(ra) # e10 <close>
+     8bc:	4505                	li	a0,1
+     8be:	00000097          	auipc	ra,0x0
+     8c2:	562080e7          	jalr	1378(ra) # e20 <close>
         if(dup(aa[1]) != 1){
-     8b6:	f8c42503          	lw	a0,-116(s0)
-     8ba:	00000097          	auipc	ra,0x0
-     8be:	5a6080e7          	jalr	1446(ra) # e60 <dup>
-     8c2:	4785                	li	a5,1
-     8c4:	02f50063          	beq	a0,a5,8e4 <go+0x86c>
-          fprintf(2, "dup failed\n");
-     8c8:	00001597          	auipc	a1,0x1
-     8cc:	c7058593          	addi	a1,a1,-912 # 1538 <malloc+0x31e>
-     8d0:	4509                	li	a0,2
-     8d2:	00001097          	auipc	ra,0x1
-     8d6:	862080e7          	jalr	-1950(ra) # 1134 <fprintf>
+     8c6:	f9c42503          	lw	a0,-100(s0)
+     8ca:	00000097          	auipc	ra,0x0
+     8ce:	5a6080e7          	jalr	1446(ra) # e70 <dup>
+     8d2:	4785                	li	a5,1
+     8d4:	02f50063          	beq	a0,a5,8f4 <go+0x87c>
+          fprintf(2, "grind: dup failed\n");
+     8d8:	00001597          	auipc	a1,0x1
+     8dc:	c8858593          	addi	a1,a1,-888 # 1560 <malloc+0x326>
+     8e0:	4509                	li	a0,2
+     8e2:	00001097          	auipc	ra,0x1
+     8e6:	872080e7          	jalr	-1934(ra) # 1154 <fprintf>
           exit(1);
-     8da:	4505                	li	a0,1
-     8dc:	00000097          	auipc	ra,0x0
-     8e0:	50c080e7          	jalr	1292(ra) # de8 <exit>
+     8ea:	4505                	li	a0,1
+     8ec:	00000097          	auipc	ra,0x0
+     8f0:	50c080e7          	jalr	1292(ra) # df8 <exit>
         close(aa[1]);
-     8e4:	f8c42503          	lw	a0,-116(s0)
-     8e8:	00000097          	auipc	ra,0x0
-     8ec:	528080e7          	jalr	1320(ra) # e10 <close>
+     8f4:	f9c42503          	lw	a0,-100(s0)
+     8f8:	00000097          	auipc	ra,0x0
+     8fc:	528080e7          	jalr	1320(ra) # e20 <close>
         char *args[3] = { "echo", "hi", 0 };
-     8f0:	00001797          	auipc	a5,0x1
-     8f4:	c5878793          	addi	a5,a5,-936 # 1548 <malloc+0x32e>
-     8f8:	f8f43c23          	sd	a5,-104(s0)
-     8fc:	00001797          	auipc	a5,0x1
-     900:	c5478793          	addi	a5,a5,-940 # 1550 <malloc+0x336>
-     904:	faf43023          	sd	a5,-96(s0)
-     908:	fa043423          	sd	zero,-88(s0)
+     900:	00001797          	auipc	a5,0x1
+     904:	c7878793          	addi	a5,a5,-904 # 1578 <malloc+0x33e>
+     908:	faf43423          	sd	a5,-88(s0)
+     90c:	00001797          	auipc	a5,0x1
+     910:	c7478793          	addi	a5,a5,-908 # 1580 <malloc+0x346>
+     914:	faf43823          	sd	a5,-80(s0)
+     918:	fa043c23          	sd	zero,-72(s0)
         exec("grindir/../echo", args);
-     90c:	f9840593          	addi	a1,s0,-104
-     910:	00001517          	auipc	a0,0x1
-     914:	c4850513          	addi	a0,a0,-952 # 1558 <malloc+0x33e>
-     918:	00000097          	auipc	ra,0x0
-     91c:	508080e7          	jalr	1288(ra) # e20 <exec>
-        fprintf(2, "echo: not found\n");
-     920:	00001597          	auipc	a1,0x1
-     924:	c4858593          	addi	a1,a1,-952 # 1568 <malloc+0x34e>
-     928:	4509                	li	a0,2
-     92a:	00001097          	auipc	ra,0x1
-     92e:	80a080e7          	jalr	-2038(ra) # 1134 <fprintf>
+     91c:	fa840593          	addi	a1,s0,-88
+     920:	00001517          	auipc	a0,0x1
+     924:	c6850513          	addi	a0,a0,-920 # 1588 <malloc+0x34e>
+     928:	00000097          	auipc	ra,0x0
+     92c:	508080e7          	jalr	1288(ra) # e30 <exec>
+        fprintf(2, "grind: echo: not found\n");
+     930:	00001597          	auipc	a1,0x1
+     934:	c6858593          	addi	a1,a1,-920 # 1598 <malloc+0x35e>
+     938:	4509                	li	a0,2
+     93a:	00001097          	auipc	ra,0x1
+     93e:	81a080e7          	jalr	-2022(ra) # 1154 <fprintf>
         exit(2);
-     932:	4509                	li	a0,2
-     934:	00000097          	auipc	ra,0x0
-     938:	4b4080e7          	jalr	1204(ra) # de8 <exit>
-        fprintf(2, "fork failed\n");
-     93c:	00001597          	auipc	a1,0x1
-     940:	b5458593          	addi	a1,a1,-1196 # 1490 <malloc+0x276>
-     944:	4509                	li	a0,2
-     946:	00000097          	auipc	ra,0x0
-     94a:	7ee080e7          	jalr	2030(ra) # 1134 <fprintf>
+     942:	4509                	li	a0,2
+     944:	00000097          	auipc	ra,0x0
+     948:	4b4080e7          	jalr	1204(ra) # df8 <exit>
+        fprintf(2, "grind: fork failed\n");
+     94c:	00001597          	auipc	a1,0x1
+     950:	ad458593          	addi	a1,a1,-1324 # 1420 <malloc+0x1e6>
+     954:	4509                	li	a0,2
+     956:	00000097          	auipc	ra,0x0
+     95a:	7fe080e7          	jalr	2046(ra) # 1154 <fprintf>
         exit(3);
-     94e:	450d                	li	a0,3
-     950:	00000097          	auipc	ra,0x0
-     954:	498080e7          	jalr	1176(ra) # de8 <exit>
+     95e:	450d                	li	a0,3
+     960:	00000097          	auipc	ra,0x0
+     964:	498080e7          	jalr	1176(ra) # df8 <exit>
         close(aa[1]);
-     958:	f8c42503          	lw	a0,-116(s0)
-     95c:	00000097          	auipc	ra,0x0
-     960:	4b4080e7          	jalr	1204(ra) # e10 <close>
+     968:	f9c42503          	lw	a0,-100(s0)
+     96c:	00000097          	auipc	ra,0x0
+     970:	4b4080e7          	jalr	1204(ra) # e20 <close>
         close(bb[0]);
-     964:	f9042503          	lw	a0,-112(s0)
-     968:	00000097          	auipc	ra,0x0
-     96c:	4a8080e7          	jalr	1192(ra) # e10 <close>
+     974:	fa042503          	lw	a0,-96(s0)
+     978:	00000097          	auipc	ra,0x0
+     97c:	4a8080e7          	jalr	1192(ra) # e20 <close>
         close(0);
-     970:	4501                	li	a0,0
-     972:	00000097          	auipc	ra,0x0
-     976:	49e080e7          	jalr	1182(ra) # e10 <close>
+     980:	4501                	li	a0,0
+     982:	00000097          	auipc	ra,0x0
+     986:	49e080e7          	jalr	1182(ra) # e20 <close>
         if(dup(aa[0]) != 0){
-     97a:	f8842503          	lw	a0,-120(s0)
-     97e:	00000097          	auipc	ra,0x0
-     982:	4e2080e7          	jalr	1250(ra) # e60 <dup>
-     986:	cd19                	beqz	a0,9a4 <go+0x92c>
-          fprintf(2, "dup failed\n");
-     988:	00001597          	auipc	a1,0x1
-     98c:	bb058593          	addi	a1,a1,-1104 # 1538 <malloc+0x31e>
-     990:	4509                	li	a0,2
-     992:	00000097          	auipc	ra,0x0
-     996:	7a2080e7          	jalr	1954(ra) # 1134 <fprintf>
+     98a:	f9842503          	lw	a0,-104(s0)
+     98e:	00000097          	auipc	ra,0x0
+     992:	4e2080e7          	jalr	1250(ra) # e70 <dup>
+     996:	cd19                	beqz	a0,9b4 <go+0x93c>
+          fprintf(2, "grind: dup failed\n");
+     998:	00001597          	auipc	a1,0x1
+     99c:	bc858593          	addi	a1,a1,-1080 # 1560 <malloc+0x326>
+     9a0:	4509                	li	a0,2
+     9a2:	00000097          	auipc	ra,0x0
+     9a6:	7b2080e7          	jalr	1970(ra) # 1154 <fprintf>
           exit(4);
-     99a:	4511                	li	a0,4
-     99c:	00000097          	auipc	ra,0x0
-     9a0:	44c080e7          	jalr	1100(ra) # de8 <exit>
+     9aa:	4511                	li	a0,4
+     9ac:	00000097          	auipc	ra,0x0
+     9b0:	44c080e7          	jalr	1100(ra) # df8 <exit>
         close(aa[0]);
-     9a4:	f8842503          	lw	a0,-120(s0)
-     9a8:	00000097          	auipc	ra,0x0
-     9ac:	468080e7          	jalr	1128(ra) # e10 <close>
+     9b4:	f9842503          	lw	a0,-104(s0)
+     9b8:	00000097          	auipc	ra,0x0
+     9bc:	468080e7          	jalr	1128(ra) # e20 <close>
         close(1);
-     9b0:	4505                	li	a0,1
-     9b2:	00000097          	auipc	ra,0x0
-     9b6:	45e080e7          	jalr	1118(ra) # e10 <close>
+     9c0:	4505                	li	a0,1
+     9c2:	00000097          	auipc	ra,0x0
+     9c6:	45e080e7          	jalr	1118(ra) # e20 <close>
         if(dup(bb[1]) != 1){
-     9ba:	f9442503          	lw	a0,-108(s0)
-     9be:	00000097          	auipc	ra,0x0
-     9c2:	4a2080e7          	jalr	1186(ra) # e60 <dup>
-     9c6:	4785                	li	a5,1
-     9c8:	02f50063          	beq	a0,a5,9e8 <go+0x970>
-          fprintf(2, "dup failed\n");
-     9cc:	00001597          	auipc	a1,0x1
-     9d0:	b6c58593          	addi	a1,a1,-1172 # 1538 <malloc+0x31e>
-     9d4:	4509                	li	a0,2
-     9d6:	00000097          	auipc	ra,0x0
-     9da:	75e080e7          	jalr	1886(ra) # 1134 <fprintf>
+     9ca:	fa442503          	lw	a0,-92(s0)
+     9ce:	00000097          	auipc	ra,0x0
+     9d2:	4a2080e7          	jalr	1186(ra) # e70 <dup>
+     9d6:	4785                	li	a5,1
+     9d8:	02f50063          	beq	a0,a5,9f8 <go+0x980>
+          fprintf(2, "grind: dup failed\n");
+     9dc:	00001597          	auipc	a1,0x1
+     9e0:	b8458593          	addi	a1,a1,-1148 # 1560 <malloc+0x326>
+     9e4:	4509                	li	a0,2
+     9e6:	00000097          	auipc	ra,0x0
+     9ea:	76e080e7          	jalr	1902(ra) # 1154 <fprintf>
           exit(5);
-     9de:	4515                	li	a0,5
-     9e0:	00000097          	auipc	ra,0x0
-     9e4:	408080e7          	jalr	1032(ra) # de8 <exit>
+     9ee:	4515                	li	a0,5
+     9f0:	00000097          	auipc	ra,0x0
+     9f4:	408080e7          	jalr	1032(ra) # df8 <exit>
         close(bb[1]);
-     9e8:	f9442503          	lw	a0,-108(s0)
-     9ec:	00000097          	auipc	ra,0x0
-     9f0:	424080e7          	jalr	1060(ra) # e10 <close>
+     9f8:	fa442503          	lw	a0,-92(s0)
+     9fc:	00000097          	auipc	ra,0x0
+     a00:	424080e7          	jalr	1060(ra) # e20 <close>
         char *args[2] = { "cat", 0 };
-     9f4:	00001797          	auipc	a5,0x1
-     9f8:	b8c78793          	addi	a5,a5,-1140 # 1580 <malloc+0x366>
-     9fc:	f8f43c23          	sd	a5,-104(s0)
-     a00:	fa043023          	sd	zero,-96(s0)
+     a04:	00001797          	auipc	a5,0x1
+     a08:	bac78793          	addi	a5,a5,-1108 # 15b0 <malloc+0x376>
+     a0c:	faf43423          	sd	a5,-88(s0)
+     a10:	fa043823          	sd	zero,-80(s0)
         exec("/cat", args);
-     a04:	f9840593          	addi	a1,s0,-104
-     a08:	00001517          	auipc	a0,0x1
-     a0c:	b8050513          	addi	a0,a0,-1152 # 1588 <malloc+0x36e>
-     a10:	00000097          	auipc	ra,0x0
-     a14:	410080e7          	jalr	1040(ra) # e20 <exec>
-        fprintf(2, "cat: not found\n");
-     a18:	00001597          	auipc	a1,0x1
-     a1c:	b7858593          	addi	a1,a1,-1160 # 1590 <malloc+0x376>
-     a20:	4509                	li	a0,2
-     a22:	00000097          	auipc	ra,0x0
-     a26:	712080e7          	jalr	1810(ra) # 1134 <fprintf>
+     a14:	fa840593          	addi	a1,s0,-88
+     a18:	00001517          	auipc	a0,0x1
+     a1c:	ba050513          	addi	a0,a0,-1120 # 15b8 <malloc+0x37e>
+     a20:	00000097          	auipc	ra,0x0
+     a24:	410080e7          	jalr	1040(ra) # e30 <exec>
+        fprintf(2, "grind: cat: not found\n");
+     a28:	00001597          	auipc	a1,0x1
+     a2c:	b9858593          	addi	a1,a1,-1128 # 15c0 <malloc+0x386>
+     a30:	4509                	li	a0,2
+     a32:	00000097          	auipc	ra,0x0
+     a36:	722080e7          	jalr	1826(ra) # 1154 <fprintf>
         exit(6);
-     a2a:	4519                	li	a0,6
-     a2c:	00000097          	auipc	ra,0x0
-     a30:	3bc080e7          	jalr	956(ra) # de8 <exit>
-        fprintf(2, "fork failed\n");
-     a34:	00001597          	auipc	a1,0x1
-     a38:	a5c58593          	addi	a1,a1,-1444 # 1490 <malloc+0x276>
-     a3c:	4509                	li	a0,2
-     a3e:	00000097          	auipc	ra,0x0
-     a42:	6f6080e7          	jalr	1782(ra) # 1134 <fprintf>
+     a3a:	4519                	li	a0,6
+     a3c:	00000097          	auipc	ra,0x0
+     a40:	3bc080e7          	jalr	956(ra) # df8 <exit>
+        fprintf(2, "grind: fork failed\n");
+     a44:	00001597          	auipc	a1,0x1
+     a48:	9dc58593          	addi	a1,a1,-1572 # 1420 <malloc+0x1e6>
+     a4c:	4509                	li	a0,2
+     a4e:	00000097          	auipc	ra,0x0
+     a52:	706080e7          	jalr	1798(ra) # 1154 <fprintf>
         exit(7);
-     a46:	451d                	li	a0,7
-     a48:	00000097          	auipc	ra,0x0
-     a4c:	3a0080e7          	jalr	928(ra) # de8 <exit>
+     a56:	451d                	li	a0,7
+     a58:	00000097          	auipc	ra,0x0
+     a5c:	3a0080e7          	jalr	928(ra) # df8 <exit>
 
-0000000000000a50 <iter>:
+0000000000000a60 <iter>:
   }
 }
 
 void
 iter()
 {
-     a50:	7179                	addi	sp,sp,-48
-     a52:	f406                	sd	ra,40(sp)
-     a54:	f022                	sd	s0,32(sp)
-     a56:	ec26                	sd	s1,24(sp)
-     a58:	e84a                	sd	s2,16(sp)
-     a5a:	1800                	addi	s0,sp,48
+     a60:	7179                	addi	sp,sp,-48
+     a62:	f406                	sd	ra,40(sp)
+     a64:	f022                	sd	s0,32(sp)
+     a66:	ec26                	sd	s1,24(sp)
+     a68:	e84a                	sd	s2,16(sp)
+     a6a:	1800                	addi	s0,sp,48
   unlink("a");
-     a5c:	00001517          	auipc	a0,0x1
-     a60:	97c50513          	addi	a0,a0,-1668 # 13d8 <malloc+0x1be>
-     a64:	00000097          	auipc	ra,0x0
-     a68:	3d4080e7          	jalr	980(ra) # e38 <unlink>
-  unlink("b");
      a6c:	00001517          	auipc	a0,0x1
-     a70:	91c50513          	addi	a0,a0,-1764 # 1388 <malloc+0x16e>
+     a70:	99450513          	addi	a0,a0,-1644 # 1400 <malloc+0x1c6>
      a74:	00000097          	auipc	ra,0x0
-     a78:	3c4080e7          	jalr	964(ra) # e38 <unlink>
+     a78:	3d4080e7          	jalr	980(ra) # e48 <unlink>
+  unlink("b");
+     a7c:	00001517          	auipc	a0,0x1
+     a80:	93450513          	addi	a0,a0,-1740 # 13b0 <malloc+0x176>
+     a84:	00000097          	auipc	ra,0x0
+     a88:	3c4080e7          	jalr	964(ra) # e48 <unlink>
   
   int pid1 = fork();
-     a7c:	00000097          	auipc	ra,0x0
-     a80:	364080e7          	jalr	868(ra) # de0 <fork>
+     a8c:	00000097          	auipc	ra,0x0
+     a90:	364080e7          	jalr	868(ra) # df0 <fork>
   if(pid1 < 0){
-     a84:	00054e63          	bltz	a0,aa0 <iter+0x50>
-     a88:	84aa                	mv	s1,a0
+     a94:	00054e63          	bltz	a0,ab0 <iter+0x50>
+     a98:	84aa                	mv	s1,a0
     printf("grind: fork failed\n");
     exit(1);
   }
   if(pid1 == 0){
-     a8a:	e905                	bnez	a0,aba <iter+0x6a>
+     a9a:	e905                	bnez	a0,aca <iter+0x6a>
     rand_next = 31;
-     a8c:	47fd                	li	a5,31
-     a8e:	00001717          	auipc	a4,0x1
-     a92:	c0f73523          	sd	a5,-1014(a4) # 1698 <rand_next>
+     a9c:	47fd                	li	a5,31
+     a9e:	00001717          	auipc	a4,0x1
+     aa2:	c4f73123          	sd	a5,-958(a4) # 16e0 <rand_next>
     go(0);
-     a96:	4501                	li	a0,0
-     a98:	fffff097          	auipc	ra,0xfffff
-     a9c:	5e0080e7          	jalr	1504(ra) # 78 <go>
+     aa6:	4501                	li	a0,0
+     aa8:	fffff097          	auipc	ra,0xfffff
+     aac:	5d0080e7          	jalr	1488(ra) # 78 <go>
     printf("grind: fork failed\n");
-     aa0:	00001517          	auipc	a0,0x1
-     aa4:	95850513          	addi	a0,a0,-1704 # 13f8 <malloc+0x1de>
-     aa8:	00000097          	auipc	ra,0x0
-     aac:	6ba080e7          	jalr	1722(ra) # 1162 <printf>
+     ab0:	00001517          	auipc	a0,0x1
+     ab4:	97050513          	addi	a0,a0,-1680 # 1420 <malloc+0x1e6>
+     ab8:	00000097          	auipc	ra,0x0
+     abc:	6ca080e7          	jalr	1738(ra) # 1182 <printf>
     exit(1);
-     ab0:	4505                	li	a0,1
-     ab2:	00000097          	auipc	ra,0x0
-     ab6:	336080e7          	jalr	822(ra) # de8 <exit>
+     ac0:	4505                	li	a0,1
+     ac2:	00000097          	auipc	ra,0x0
+     ac6:	336080e7          	jalr	822(ra) # df8 <exit>
     exit(0);
   }
 
   int pid2 = fork();
-     aba:	00000097          	auipc	ra,0x0
-     abe:	326080e7          	jalr	806(ra) # de0 <fork>
-     ac2:	892a                	mv	s2,a0
+     aca:	00000097          	auipc	ra,0x0
+     ace:	326080e7          	jalr	806(ra) # df0 <fork>
+     ad2:	892a                	mv	s2,a0
   if(pid2 < 0){
-     ac4:	00054f63          	bltz	a0,ae2 <iter+0x92>
+     ad4:	00054f63          	bltz	a0,af2 <iter+0x92>
     printf("grind: fork failed\n");
     exit(1);
   }
   if(pid2 == 0){
-     ac8:	e915                	bnez	a0,afc <iter+0xac>
+     ad8:	e915                	bnez	a0,b0c <iter+0xac>
     rand_next = 7177;
-     aca:	6789                	lui	a5,0x2
-     acc:	c0978793          	addi	a5,a5,-1015 # 1c09 <__BSS_END__+0x169>
-     ad0:	00001717          	auipc	a4,0x1
-     ad4:	bcf73423          	sd	a5,-1080(a4) # 1698 <rand_next>
+     ada:	6789                	lui	a5,0x2
+     adc:	c0978793          	addi	a5,a5,-1015 # 1c09 <__BSS_END__+0x121>
+     ae0:	00001717          	auipc	a4,0x1
+     ae4:	c0f73023          	sd	a5,-1024(a4) # 16e0 <rand_next>
     go(1);
-     ad8:	4505                	li	a0,1
-     ada:	fffff097          	auipc	ra,0xfffff
-     ade:	59e080e7          	jalr	1438(ra) # 78 <go>
+     ae8:	4505                	li	a0,1
+     aea:	fffff097          	auipc	ra,0xfffff
+     aee:	58e080e7          	jalr	1422(ra) # 78 <go>
     printf("grind: fork failed\n");
-     ae2:	00001517          	auipc	a0,0x1
-     ae6:	91650513          	addi	a0,a0,-1770 # 13f8 <malloc+0x1de>
-     aea:	00000097          	auipc	ra,0x0
-     aee:	678080e7          	jalr	1656(ra) # 1162 <printf>
+     af2:	00001517          	auipc	a0,0x1
+     af6:	92e50513          	addi	a0,a0,-1746 # 1420 <malloc+0x1e6>
+     afa:	00000097          	auipc	ra,0x0
+     afe:	688080e7          	jalr	1672(ra) # 1182 <printf>
     exit(1);
-     af2:	4505                	li	a0,1
-     af4:	00000097          	auipc	ra,0x0
-     af8:	2f4080e7          	jalr	756(ra) # de8 <exit>
+     b02:	4505                	li	a0,1
+     b04:	00000097          	auipc	ra,0x0
+     b08:	2f4080e7          	jalr	756(ra) # df8 <exit>
     exit(0);
   }
 
   int st1 = -1;
-     afc:	57fd                	li	a5,-1
-     afe:	fcf42e23          	sw	a5,-36(s0)
+     b0c:	57fd                	li	a5,-1
+     b0e:	fcf42e23          	sw	a5,-36(s0)
   wait(&st1);
-     b02:	fdc40513          	addi	a0,s0,-36
-     b06:	00000097          	auipc	ra,0x0
-     b0a:	2ea080e7          	jalr	746(ra) # df0 <wait>
+     b12:	fdc40513          	addi	a0,s0,-36
+     b16:	00000097          	auipc	ra,0x0
+     b1a:	2ea080e7          	jalr	746(ra) # e00 <wait>
   if(st1 != 0){
-     b0e:	fdc42783          	lw	a5,-36(s0)
-     b12:	ef99                	bnez	a5,b30 <iter+0xe0>
+     b1e:	fdc42783          	lw	a5,-36(s0)
+     b22:	ef99                	bnez	a5,b40 <iter+0xe0>
     kill(pid1);
     kill(pid2);
   }
   int st2 = -1;
-     b14:	57fd                	li	a5,-1
-     b16:	fcf42c23          	sw	a5,-40(s0)
+     b24:	57fd                	li	a5,-1
+     b26:	fcf42c23          	sw	a5,-40(s0)
   wait(&st2);
-     b1a:	fd840513          	addi	a0,s0,-40
-     b1e:	00000097          	auipc	ra,0x0
-     b22:	2d2080e7          	jalr	722(ra) # df0 <wait>
+     b2a:	fd840513          	addi	a0,s0,-40
+     b2e:	00000097          	auipc	ra,0x0
+     b32:	2d2080e7          	jalr	722(ra) # e00 <wait>
 
   exit(0);
-     b26:	4501                	li	a0,0
-     b28:	00000097          	auipc	ra,0x0
-     b2c:	2c0080e7          	jalr	704(ra) # de8 <exit>
+     b36:	4501                	li	a0,0
+     b38:	00000097          	auipc	ra,0x0
+     b3c:	2c0080e7          	jalr	704(ra) # df8 <exit>
     kill(pid1);
-     b30:	8526                	mv	a0,s1
-     b32:	00000097          	auipc	ra,0x0
-     b36:	2e6080e7          	jalr	742(ra) # e18 <kill>
+     b40:	8526                	mv	a0,s1
+     b42:	00000097          	auipc	ra,0x0
+     b46:	2e6080e7          	jalr	742(ra) # e28 <kill>
     kill(pid2);
-     b3a:	854a                	mv	a0,s2
-     b3c:	00000097          	auipc	ra,0x0
-     b40:	2dc080e7          	jalr	732(ra) # e18 <kill>
-     b44:	bfc1                	j	b14 <iter+0xc4>
+     b4a:	854a                	mv	a0,s2
+     b4c:	00000097          	auipc	ra,0x0
+     b50:	2dc080e7          	jalr	732(ra) # e28 <kill>
+     b54:	bfc1                	j	b24 <iter+0xc4>
 
-0000000000000b46 <main>:
+0000000000000b56 <main>:
 }
 
 int
 main()
 {
-     b46:	1141                	addi	sp,sp,-16
-     b48:	e406                	sd	ra,8(sp)
-     b4a:	e022                	sd	s0,0(sp)
-     b4c:	0800                	addi	s0,sp,16
-     b4e:	a811                	j	b62 <main+0x1c>
+     b56:	1141                	addi	sp,sp,-16
+     b58:	e406                	sd	ra,8(sp)
+     b5a:	e022                	sd	s0,0(sp)
+     b5c:	0800                	addi	s0,sp,16
+     b5e:	a811                	j	b72 <main+0x1c>
   while(1){
     int pid = fork();
     if(pid == 0){
       iter();
-     b50:	00000097          	auipc	ra,0x0
-     b54:	f00080e7          	jalr	-256(ra) # a50 <iter>
+     b60:	00000097          	auipc	ra,0x0
+     b64:	f00080e7          	jalr	-256(ra) # a60 <iter>
       exit(0);
     }
     if(pid > 0){
       wait(0);
     }
     sleep(20);
-     b58:	4551                	li	a0,20
-     b5a:	00000097          	auipc	ra,0x0
-     b5e:	31e080e7          	jalr	798(ra) # e78 <sleep>
+     b68:	4551                	li	a0,20
+     b6a:	00000097          	auipc	ra,0x0
+     b6e:	31e080e7          	jalr	798(ra) # e88 <sleep>
     int pid = fork();
-     b62:	00000097          	auipc	ra,0x0
-     b66:	27e080e7          	jalr	638(ra) # de0 <fork>
+     b72:	00000097          	auipc	ra,0x0
+     b76:	27e080e7          	jalr	638(ra) # df0 <fork>
     if(pid == 0){
-     b6a:	d17d                	beqz	a0,b50 <main+0xa>
+     b7a:	d17d                	beqz	a0,b60 <main+0xa>
     if(pid > 0){
-     b6c:	fea056e3          	blez	a0,b58 <main+0x12>
+     b7c:	fea056e3          	blez	a0,b68 <main+0x12>
       wait(0);
-     b70:	4501                	li	a0,0
-     b72:	00000097          	auipc	ra,0x0
-     b76:	27e080e7          	jalr	638(ra) # df0 <wait>
-     b7a:	bff9                	j	b58 <main+0x12>
+     b80:	4501                	li	a0,0
+     b82:	00000097          	auipc	ra,0x0
+     b86:	27e080e7          	jalr	638(ra) # e00 <wait>
+     b8a:	bff9                	j	b68 <main+0x12>
 
-0000000000000b7c <strcpy>:
+0000000000000b8c <strcpy>:
 #include "kernel/fcntl.h"
 #include "user/user.h"
 
 char*
 strcpy(char *s, const char *t)
 {
-     b7c:	1141                	addi	sp,sp,-16
-     b7e:	e422                	sd	s0,8(sp)
-     b80:	0800                	addi	s0,sp,16
+     b8c:	1141                	addi	sp,sp,-16
+     b8e:	e422                	sd	s0,8(sp)
+     b90:	0800                	addi	s0,sp,16
   char *os;
 
   os = s;
   while((*s++ = *t++) != 0)
-     b82:	87aa                	mv	a5,a0
-     b84:	0585                	addi	a1,a1,1
-     b86:	0785                	addi	a5,a5,1
-     b88:	fff5c703          	lbu	a4,-1(a1)
-     b8c:	fee78fa3          	sb	a4,-1(a5)
-     b90:	fb75                	bnez	a4,b84 <strcpy+0x8>
+     b92:	87aa                	mv	a5,a0
+     b94:	0585                	addi	a1,a1,1
+     b96:	0785                	addi	a5,a5,1
+     b98:	fff5c703          	lbu	a4,-1(a1)
+     b9c:	fee78fa3          	sb	a4,-1(a5)
+     ba0:	fb75                	bnez	a4,b94 <strcpy+0x8>
     ;
   return os;
 }
-     b92:	6422                	ld	s0,8(sp)
-     b94:	0141                	addi	sp,sp,16
-     b96:	8082                	ret
+     ba2:	6422                	ld	s0,8(sp)
+     ba4:	0141                	addi	sp,sp,16
+     ba6:	8082                	ret
 
-0000000000000b98 <strcmp>:
+0000000000000ba8 <strcmp>:
 
 int
 strcmp(const char *p, const char *q)
 {
-     b98:	1141                	addi	sp,sp,-16
-     b9a:	e422                	sd	s0,8(sp)
-     b9c:	0800                	addi	s0,sp,16
+     ba8:	1141                	addi	sp,sp,-16
+     baa:	e422                	sd	s0,8(sp)
+     bac:	0800                	addi	s0,sp,16
   while(*p && *p == *q)
-     b9e:	00054783          	lbu	a5,0(a0)
-     ba2:	cb91                	beqz	a5,bb6 <strcmp+0x1e>
-     ba4:	0005c703          	lbu	a4,0(a1)
-     ba8:	00f71763          	bne	a4,a5,bb6 <strcmp+0x1e>
+     bae:	00054783          	lbu	a5,0(a0)
+     bb2:	cb91                	beqz	a5,bc6 <strcmp+0x1e>
+     bb4:	0005c703          	lbu	a4,0(a1)
+     bb8:	00f71763          	bne	a4,a5,bc6 <strcmp+0x1e>
     p++, q++;
-     bac:	0505                	addi	a0,a0,1
-     bae:	0585                	addi	a1,a1,1
+     bbc:	0505                	addi	a0,a0,1
+     bbe:	0585                	addi	a1,a1,1
   while(*p && *p == *q)
-     bb0:	00054783          	lbu	a5,0(a0)
-     bb4:	fbe5                	bnez	a5,ba4 <strcmp+0xc>
+     bc0:	00054783          	lbu	a5,0(a0)
+     bc4:	fbe5                	bnez	a5,bb4 <strcmp+0xc>
   return (uchar)*p - (uchar)*q;
-     bb6:	0005c503          	lbu	a0,0(a1)
+     bc6:	0005c503          	lbu	a0,0(a1)
 }
-     bba:	40a7853b          	subw	a0,a5,a0
-     bbe:	6422                	ld	s0,8(sp)
-     bc0:	0141                	addi	sp,sp,16
-     bc2:	8082                	ret
+     bca:	40a7853b          	subw	a0,a5,a0
+     bce:	6422                	ld	s0,8(sp)
+     bd0:	0141                	addi	sp,sp,16
+     bd2:	8082                	ret
 
-0000000000000bc4 <strlen>:
+0000000000000bd4 <strlen>:
 
 uint
 strlen(const char *s)
 {
-     bc4:	1141                	addi	sp,sp,-16
-     bc6:	e422                	sd	s0,8(sp)
-     bc8:	0800                	addi	s0,sp,16
+     bd4:	1141                	addi	sp,sp,-16
+     bd6:	e422                	sd	s0,8(sp)
+     bd8:	0800                	addi	s0,sp,16
   int n;
 
   for(n = 0; s[n]; n++)
-     bca:	00054783          	lbu	a5,0(a0)
-     bce:	cf91                	beqz	a5,bea <strlen+0x26>
-     bd0:	0505                	addi	a0,a0,1
-     bd2:	87aa                	mv	a5,a0
-     bd4:	4685                	li	a3,1
-     bd6:	9e89                	subw	a3,a3,a0
-     bd8:	00f6853b          	addw	a0,a3,a5
-     bdc:	0785                	addi	a5,a5,1
-     bde:	fff7c703          	lbu	a4,-1(a5)
-     be2:	fb7d                	bnez	a4,bd8 <strlen+0x14>
+     bda:	00054783          	lbu	a5,0(a0)
+     bde:	cf91                	beqz	a5,bfa <strlen+0x26>
+     be0:	0505                	addi	a0,a0,1
+     be2:	87aa                	mv	a5,a0
+     be4:	4685                	li	a3,1
+     be6:	9e89                	subw	a3,a3,a0
+     be8:	00f6853b          	addw	a0,a3,a5
+     bec:	0785                	addi	a5,a5,1
+     bee:	fff7c703          	lbu	a4,-1(a5)
+     bf2:	fb7d                	bnez	a4,be8 <strlen+0x14>
     ;
   return n;
 }
-     be4:	6422                	ld	s0,8(sp)
-     be6:	0141                	addi	sp,sp,16
-     be8:	8082                	ret
+     bf4:	6422                	ld	s0,8(sp)
+     bf6:	0141                	addi	sp,sp,16
+     bf8:	8082                	ret
   for(n = 0; s[n]; n++)
-     bea:	4501                	li	a0,0
-     bec:	bfe5                	j	be4 <strlen+0x20>
+     bfa:	4501                	li	a0,0
+     bfc:	bfe5                	j	bf4 <strlen+0x20>
 
-0000000000000bee <memset>:
+0000000000000bfe <memset>:
 
 void*
 memset(void *dst, int c, uint n)
 {
-     bee:	1141                	addi	sp,sp,-16
-     bf0:	e422                	sd	s0,8(sp)
-     bf2:	0800                	addi	s0,sp,16
+     bfe:	1141                	addi	sp,sp,-16
+     c00:	e422                	sd	s0,8(sp)
+     c02:	0800                	addi	s0,sp,16
   char *cdst = (char *) dst;
   int i;
   for(i = 0; i < n; i++){
-     bf4:	ca19                	beqz	a2,c0a <memset+0x1c>
-     bf6:	87aa                	mv	a5,a0
-     bf8:	1602                	slli	a2,a2,0x20
-     bfa:	9201                	srli	a2,a2,0x20
-     bfc:	00a60733          	add	a4,a2,a0
+     c04:	ca19                	beqz	a2,c1a <memset+0x1c>
+     c06:	87aa                	mv	a5,a0
+     c08:	1602                	slli	a2,a2,0x20
+     c0a:	9201                	srli	a2,a2,0x20
+     c0c:	00a60733          	add	a4,a2,a0
     cdst[i] = c;
-     c00:	00b78023          	sb	a1,0(a5)
+     c10:	00b78023          	sb	a1,0(a5)
   for(i = 0; i < n; i++){
-     c04:	0785                	addi	a5,a5,1
-     c06:	fee79de3          	bne	a5,a4,c00 <memset+0x12>
+     c14:	0785                	addi	a5,a5,1
+     c16:	fee79de3          	bne	a5,a4,c10 <memset+0x12>
   }
   return dst;
 }
-     c0a:	6422                	ld	s0,8(sp)
-     c0c:	0141                	addi	sp,sp,16
-     c0e:	8082                	ret
+     c1a:	6422                	ld	s0,8(sp)
+     c1c:	0141                	addi	sp,sp,16
+     c1e:	8082                	ret
 
-0000000000000c10 <strchr>:
+0000000000000c20 <strchr>:
 
 char*
 strchr(const char *s, char c)
 {
-     c10:	1141                	addi	sp,sp,-16
-     c12:	e422                	sd	s0,8(sp)
-     c14:	0800                	addi	s0,sp,16
+     c20:	1141                	addi	sp,sp,-16
+     c22:	e422                	sd	s0,8(sp)
+     c24:	0800                	addi	s0,sp,16
   for(; *s; s++)
-     c16:	00054783          	lbu	a5,0(a0)
-     c1a:	cb99                	beqz	a5,c30 <strchr+0x20>
+     c26:	00054783          	lbu	a5,0(a0)
+     c2a:	cb99                	beqz	a5,c40 <strchr+0x20>
     if(*s == c)
-     c1c:	00f58763          	beq	a1,a5,c2a <strchr+0x1a>
+     c2c:	00f58763          	beq	a1,a5,c3a <strchr+0x1a>
   for(; *s; s++)
-     c20:	0505                	addi	a0,a0,1
-     c22:	00054783          	lbu	a5,0(a0)
-     c26:	fbfd                	bnez	a5,c1c <strchr+0xc>
+     c30:	0505                	addi	a0,a0,1
+     c32:	00054783          	lbu	a5,0(a0)
+     c36:	fbfd                	bnez	a5,c2c <strchr+0xc>
       return (char*)s;
   return 0;
-     c28:	4501                	li	a0,0
+     c38:	4501                	li	a0,0
 }
-     c2a:	6422                	ld	s0,8(sp)
-     c2c:	0141                	addi	sp,sp,16
-     c2e:	8082                	ret
+     c3a:	6422                	ld	s0,8(sp)
+     c3c:	0141                	addi	sp,sp,16
+     c3e:	8082                	ret
   return 0;
-     c30:	4501                	li	a0,0
-     c32:	bfe5                	j	c2a <strchr+0x1a>
+     c40:	4501                	li	a0,0
+     c42:	bfe5                	j	c3a <strchr+0x1a>
 
-0000000000000c34 <gets>:
+0000000000000c44 <gets>:
 
 char*
 gets(char *buf, int max)
 {
-     c34:	711d                	addi	sp,sp,-96
-     c36:	ec86                	sd	ra,88(sp)
-     c38:	e8a2                	sd	s0,80(sp)
-     c3a:	e4a6                	sd	s1,72(sp)
-     c3c:	e0ca                	sd	s2,64(sp)
-     c3e:	fc4e                	sd	s3,56(sp)
-     c40:	f852                	sd	s4,48(sp)
-     c42:	f456                	sd	s5,40(sp)
-     c44:	f05a                	sd	s6,32(sp)
-     c46:	ec5e                	sd	s7,24(sp)
-     c48:	1080                	addi	s0,sp,96
-     c4a:	8baa                	mv	s7,a0
-     c4c:	8a2e                	mv	s4,a1
+     c44:	711d                	addi	sp,sp,-96
+     c46:	ec86                	sd	ra,88(sp)
+     c48:	e8a2                	sd	s0,80(sp)
+     c4a:	e4a6                	sd	s1,72(sp)
+     c4c:	e0ca                	sd	s2,64(sp)
+     c4e:	fc4e                	sd	s3,56(sp)
+     c50:	f852                	sd	s4,48(sp)
+     c52:	f456                	sd	s5,40(sp)
+     c54:	f05a                	sd	s6,32(sp)
+     c56:	ec5e                	sd	s7,24(sp)
+     c58:	1080                	addi	s0,sp,96
+     c5a:	8baa                	mv	s7,a0
+     c5c:	8a2e                	mv	s4,a1
   int i, cc;
   char c;
 
   for(i=0; i+1 < max; ){
-     c4e:	892a                	mv	s2,a0
-     c50:	4481                	li	s1,0
+     c5e:	892a                	mv	s2,a0
+     c60:	4481                	li	s1,0
     cc = read(0, &c, 1);
     if(cc < 1)
       break;
     buf[i++] = c;
     if(c == '\n' || c == '\r')
-     c52:	4aa9                	li	s5,10
-     c54:	4b35                	li	s6,13
+     c62:	4aa9                	li	s5,10
+     c64:	4b35                	li	s6,13
   for(i=0; i+1 < max; ){
-     c56:	89a6                	mv	s3,s1
-     c58:	2485                	addiw	s1,s1,1
-     c5a:	0344d863          	bge	s1,s4,c8a <gets+0x56>
+     c66:	89a6                	mv	s3,s1
+     c68:	2485                	addiw	s1,s1,1
+     c6a:	0344d863          	bge	s1,s4,c9a <gets+0x56>
     cc = read(0, &c, 1);
-     c5e:	4605                	li	a2,1
-     c60:	faf40593          	addi	a1,s0,-81
-     c64:	4501                	li	a0,0
-     c66:	00000097          	auipc	ra,0x0
-     c6a:	19a080e7          	jalr	410(ra) # e00 <read>
+     c6e:	4605                	li	a2,1
+     c70:	faf40593          	addi	a1,s0,-81
+     c74:	4501                	li	a0,0
+     c76:	00000097          	auipc	ra,0x0
+     c7a:	19a080e7          	jalr	410(ra) # e10 <read>
     if(cc < 1)
-     c6e:	00a05e63          	blez	a0,c8a <gets+0x56>
+     c7e:	00a05e63          	blez	a0,c9a <gets+0x56>
     buf[i++] = c;
-     c72:	faf44783          	lbu	a5,-81(s0)
-     c76:	00f90023          	sb	a5,0(s2)
+     c82:	faf44783          	lbu	a5,-81(s0)
+     c86:	00f90023          	sb	a5,0(s2)
     if(c == '\n' || c == '\r')
-     c7a:	01578763          	beq	a5,s5,c88 <gets+0x54>
-     c7e:	0905                	addi	s2,s2,1
-     c80:	fd679be3          	bne	a5,s6,c56 <gets+0x22>
+     c8a:	01578763          	beq	a5,s5,c98 <gets+0x54>
+     c8e:	0905                	addi	s2,s2,1
+     c90:	fd679be3          	bne	a5,s6,c66 <gets+0x22>
   for(i=0; i+1 < max; ){
-     c84:	89a6                	mv	s3,s1
-     c86:	a011                	j	c8a <gets+0x56>
-     c88:	89a6                	mv	s3,s1
+     c94:	89a6                	mv	s3,s1
+     c96:	a011                	j	c9a <gets+0x56>
+     c98:	89a6                	mv	s3,s1
       break;
   }
   buf[i] = '\0';
-     c8a:	99de                	add	s3,s3,s7
-     c8c:	00098023          	sb	zero,0(s3)
+     c9a:	99de                	add	s3,s3,s7
+     c9c:	00098023          	sb	zero,0(s3)
   return buf;
 }
-     c90:	855e                	mv	a0,s7
-     c92:	60e6                	ld	ra,88(sp)
-     c94:	6446                	ld	s0,80(sp)
-     c96:	64a6                	ld	s1,72(sp)
-     c98:	6906                	ld	s2,64(sp)
-     c9a:	79e2                	ld	s3,56(sp)
-     c9c:	7a42                	ld	s4,48(sp)
-     c9e:	7aa2                	ld	s5,40(sp)
-     ca0:	7b02                	ld	s6,32(sp)
-     ca2:	6be2                	ld	s7,24(sp)
-     ca4:	6125                	addi	sp,sp,96
-     ca6:	8082                	ret
+     ca0:	855e                	mv	a0,s7
+     ca2:	60e6                	ld	ra,88(sp)
+     ca4:	6446                	ld	s0,80(sp)
+     ca6:	64a6                	ld	s1,72(sp)
+     ca8:	6906                	ld	s2,64(sp)
+     caa:	79e2                	ld	s3,56(sp)
+     cac:	7a42                	ld	s4,48(sp)
+     cae:	7aa2                	ld	s5,40(sp)
+     cb0:	7b02                	ld	s6,32(sp)
+     cb2:	6be2                	ld	s7,24(sp)
+     cb4:	6125                	addi	sp,sp,96
+     cb6:	8082                	ret
 
-0000000000000ca8 <stat>:
+0000000000000cb8 <stat>:
 
 int
 stat(const char *n, struct stat *st)
 {
-     ca8:	1101                	addi	sp,sp,-32
-     caa:	ec06                	sd	ra,24(sp)
-     cac:	e822                	sd	s0,16(sp)
-     cae:	e426                	sd	s1,8(sp)
-     cb0:	e04a                	sd	s2,0(sp)
-     cb2:	1000                	addi	s0,sp,32
-     cb4:	892e                	mv	s2,a1
+     cb8:	1101                	addi	sp,sp,-32
+     cba:	ec06                	sd	ra,24(sp)
+     cbc:	e822                	sd	s0,16(sp)
+     cbe:	e426                	sd	s1,8(sp)
+     cc0:	e04a                	sd	s2,0(sp)
+     cc2:	1000                	addi	s0,sp,32
+     cc4:	892e                	mv	s2,a1
   int fd;
   int r;
 
   fd = open(n, O_RDONLY);
-     cb6:	4581                	li	a1,0
-     cb8:	00000097          	auipc	ra,0x0
-     cbc:	170080e7          	jalr	368(ra) # e28 <open>
+     cc6:	4581                	li	a1,0
+     cc8:	00000097          	auipc	ra,0x0
+     ccc:	170080e7          	jalr	368(ra) # e38 <open>
   if(fd < 0)
-     cc0:	02054563          	bltz	a0,cea <stat+0x42>
-     cc4:	84aa                	mv	s1,a0
+     cd0:	02054563          	bltz	a0,cfa <stat+0x42>
+     cd4:	84aa                	mv	s1,a0
     return -1;
   r = fstat(fd, st);
-     cc6:	85ca                	mv	a1,s2
-     cc8:	00000097          	auipc	ra,0x0
-     ccc:	178080e7          	jalr	376(ra) # e40 <fstat>
-     cd0:	892a                	mv	s2,a0
+     cd6:	85ca                	mv	a1,s2
+     cd8:	00000097          	auipc	ra,0x0
+     cdc:	178080e7          	jalr	376(ra) # e50 <fstat>
+     ce0:	892a                	mv	s2,a0
   close(fd);
-     cd2:	8526                	mv	a0,s1
-     cd4:	00000097          	auipc	ra,0x0
-     cd8:	13c080e7          	jalr	316(ra) # e10 <close>
+     ce2:	8526                	mv	a0,s1
+     ce4:	00000097          	auipc	ra,0x0
+     ce8:	13c080e7          	jalr	316(ra) # e20 <close>
   return r;
 }
-     cdc:	854a                	mv	a0,s2
-     cde:	60e2                	ld	ra,24(sp)
-     ce0:	6442                	ld	s0,16(sp)
-     ce2:	64a2                	ld	s1,8(sp)
-     ce4:	6902                	ld	s2,0(sp)
-     ce6:	6105                	addi	sp,sp,32
-     ce8:	8082                	ret
+     cec:	854a                	mv	a0,s2
+     cee:	60e2                	ld	ra,24(sp)
+     cf0:	6442                	ld	s0,16(sp)
+     cf2:	64a2                	ld	s1,8(sp)
+     cf4:	6902                	ld	s2,0(sp)
+     cf6:	6105                	addi	sp,sp,32
+     cf8:	8082                	ret
     return -1;
-     cea:	597d                	li	s2,-1
-     cec:	bfc5                	j	cdc <stat+0x34>
+     cfa:	597d                	li	s2,-1
+     cfc:	bfc5                	j	cec <stat+0x34>
 
-0000000000000cee <atoi>:
+0000000000000cfe <atoi>:
 
 int
 atoi(const char *s)
 {
-     cee:	1141                	addi	sp,sp,-16
-     cf0:	e422                	sd	s0,8(sp)
-     cf2:	0800                	addi	s0,sp,16
+     cfe:	1141                	addi	sp,sp,-16
+     d00:	e422                	sd	s0,8(sp)
+     d02:	0800                	addi	s0,sp,16
   int n;
 
   n = 0;
   while('0' <= *s && *s <= '9')
-     cf4:	00054683          	lbu	a3,0(a0)
-     cf8:	fd06879b          	addiw	a5,a3,-48
-     cfc:	0ff7f793          	zext.b	a5,a5
-     d00:	4625                	li	a2,9
-     d02:	02f66863          	bltu	a2,a5,d32 <atoi+0x44>
-     d06:	872a                	mv	a4,a0
+     d04:	00054683          	lbu	a3,0(a0)
+     d08:	fd06879b          	addiw	a5,a3,-48
+     d0c:	0ff7f793          	zext.b	a5,a5
+     d10:	4625                	li	a2,9
+     d12:	02f66863          	bltu	a2,a5,d42 <atoi+0x44>
+     d16:	872a                	mv	a4,a0
   n = 0;
-     d08:	4501                	li	a0,0
+     d18:	4501                	li	a0,0
     n = n*10 + *s++ - '0';
-     d0a:	0705                	addi	a4,a4,1
-     d0c:	0025179b          	slliw	a5,a0,0x2
-     d10:	9fa9                	addw	a5,a5,a0
-     d12:	0017979b          	slliw	a5,a5,0x1
-     d16:	9fb5                	addw	a5,a5,a3
-     d18:	fd07851b          	addiw	a0,a5,-48
+     d1a:	0705                	addi	a4,a4,1
+     d1c:	0025179b          	slliw	a5,a0,0x2
+     d20:	9fa9                	addw	a5,a5,a0
+     d22:	0017979b          	slliw	a5,a5,0x1
+     d26:	9fb5                	addw	a5,a5,a3
+     d28:	fd07851b          	addiw	a0,a5,-48
   while('0' <= *s && *s <= '9')
-     d1c:	00074683          	lbu	a3,0(a4)
-     d20:	fd06879b          	addiw	a5,a3,-48
-     d24:	0ff7f793          	zext.b	a5,a5
-     d28:	fef671e3          	bgeu	a2,a5,d0a <atoi+0x1c>
+     d2c:	00074683          	lbu	a3,0(a4)
+     d30:	fd06879b          	addiw	a5,a3,-48
+     d34:	0ff7f793          	zext.b	a5,a5
+     d38:	fef671e3          	bgeu	a2,a5,d1a <atoi+0x1c>
   return n;
 }
-     d2c:	6422                	ld	s0,8(sp)
-     d2e:	0141                	addi	sp,sp,16
-     d30:	8082                	ret
+     d3c:	6422                	ld	s0,8(sp)
+     d3e:	0141                	addi	sp,sp,16
+     d40:	8082                	ret
   n = 0;
-     d32:	4501                	li	a0,0
-     d34:	bfe5                	j	d2c <atoi+0x3e>
+     d42:	4501                	li	a0,0
+     d44:	bfe5                	j	d3c <atoi+0x3e>
 
-0000000000000d36 <memmove>:
+0000000000000d46 <memmove>:
 
 void*
 memmove(void *vdst, const void *vsrc, int n)
 {
-     d36:	1141                	addi	sp,sp,-16
-     d38:	e422                	sd	s0,8(sp)
-     d3a:	0800                	addi	s0,sp,16
+     d46:	1141                	addi	sp,sp,-16
+     d48:	e422                	sd	s0,8(sp)
+     d4a:	0800                	addi	s0,sp,16
   char *dst;
   const char *src;
 
   dst = vdst;
   src = vsrc;
   if (src > dst) {
-     d3c:	02b57463          	bgeu	a0,a1,d64 <memmove+0x2e>
+     d4c:	02b57463          	bgeu	a0,a1,d74 <memmove+0x2e>
     while(n-- > 0)
-     d40:	00c05f63          	blez	a2,d5e <memmove+0x28>
-     d44:	1602                	slli	a2,a2,0x20
-     d46:	9201                	srli	a2,a2,0x20
-     d48:	00c507b3          	add	a5,a0,a2
+     d50:	00c05f63          	blez	a2,d6e <memmove+0x28>
+     d54:	1602                	slli	a2,a2,0x20
+     d56:	9201                	srli	a2,a2,0x20
+     d58:	00c507b3          	add	a5,a0,a2
   dst = vdst;
-     d4c:	872a                	mv	a4,a0
+     d5c:	872a                	mv	a4,a0
       *dst++ = *src++;
-     d4e:	0585                	addi	a1,a1,1
-     d50:	0705                	addi	a4,a4,1
-     d52:	fff5c683          	lbu	a3,-1(a1)
-     d56:	fed70fa3          	sb	a3,-1(a4)
+     d5e:	0585                	addi	a1,a1,1
+     d60:	0705                	addi	a4,a4,1
+     d62:	fff5c683          	lbu	a3,-1(a1)
+     d66:	fed70fa3          	sb	a3,-1(a4)
     while(n-- > 0)
-     d5a:	fee79ae3          	bne	a5,a4,d4e <memmove+0x18>
+     d6a:	fee79ae3          	bne	a5,a4,d5e <memmove+0x18>
     src += n;
     while(n-- > 0)
       *--dst = *--src;
   }
   return vdst;
 }
-     d5e:	6422                	ld	s0,8(sp)
-     d60:	0141                	addi	sp,sp,16
-     d62:	8082                	ret
+     d6e:	6422                	ld	s0,8(sp)
+     d70:	0141                	addi	sp,sp,16
+     d72:	8082                	ret
     dst += n;
-     d64:	00c50733          	add	a4,a0,a2
+     d74:	00c50733          	add	a4,a0,a2
     src += n;
-     d68:	95b2                	add	a1,a1,a2
+     d78:	95b2                	add	a1,a1,a2
     while(n-- > 0)
-     d6a:	fec05ae3          	blez	a2,d5e <memmove+0x28>
-     d6e:	fff6079b          	addiw	a5,a2,-1
-     d72:	1782                	slli	a5,a5,0x20
-     d74:	9381                	srli	a5,a5,0x20
-     d76:	fff7c793          	not	a5,a5
-     d7a:	97ba                	add	a5,a5,a4
+     d7a:	fec05ae3          	blez	a2,d6e <memmove+0x28>
+     d7e:	fff6079b          	addiw	a5,a2,-1
+     d82:	1782                	slli	a5,a5,0x20
+     d84:	9381                	srli	a5,a5,0x20
+     d86:	fff7c793          	not	a5,a5
+     d8a:	97ba                	add	a5,a5,a4
       *--dst = *--src;
-     d7c:	15fd                	addi	a1,a1,-1
-     d7e:	177d                	addi	a4,a4,-1
-     d80:	0005c683          	lbu	a3,0(a1)
-     d84:	00d70023          	sb	a3,0(a4)
+     d8c:	15fd                	addi	a1,a1,-1
+     d8e:	177d                	addi	a4,a4,-1
+     d90:	0005c683          	lbu	a3,0(a1)
+     d94:	00d70023          	sb	a3,0(a4)
     while(n-- > 0)
-     d88:	fee79ae3          	bne	a5,a4,d7c <memmove+0x46>
-     d8c:	bfc9                	j	d5e <memmove+0x28>
+     d98:	fee79ae3          	bne	a5,a4,d8c <memmove+0x46>
+     d9c:	bfc9                	j	d6e <memmove+0x28>
 
-0000000000000d8e <memcmp>:
+0000000000000d9e <memcmp>:
 
 int
 memcmp(const void *s1, const void *s2, uint n)
 {
-     d8e:	1141                	addi	sp,sp,-16
-     d90:	e422                	sd	s0,8(sp)
-     d92:	0800                	addi	s0,sp,16
+     d9e:	1141                	addi	sp,sp,-16
+     da0:	e422                	sd	s0,8(sp)
+     da2:	0800                	addi	s0,sp,16
   const char *p1 = s1, *p2 = s2;
   while (n-- > 0) {
-     d94:	ca05                	beqz	a2,dc4 <memcmp+0x36>
-     d96:	fff6069b          	addiw	a3,a2,-1
-     d9a:	1682                	slli	a3,a3,0x20
-     d9c:	9281                	srli	a3,a3,0x20
-     d9e:	0685                	addi	a3,a3,1
-     da0:	96aa                	add	a3,a3,a0
+     da4:	ca05                	beqz	a2,dd4 <memcmp+0x36>
+     da6:	fff6069b          	addiw	a3,a2,-1
+     daa:	1682                	slli	a3,a3,0x20
+     dac:	9281                	srli	a3,a3,0x20
+     dae:	0685                	addi	a3,a3,1
+     db0:	96aa                	add	a3,a3,a0
     if (*p1 != *p2) {
-     da2:	00054783          	lbu	a5,0(a0)
-     da6:	0005c703          	lbu	a4,0(a1)
-     daa:	00e79863          	bne	a5,a4,dba <memcmp+0x2c>
+     db2:	00054783          	lbu	a5,0(a0)
+     db6:	0005c703          	lbu	a4,0(a1)
+     dba:	00e79863          	bne	a5,a4,dca <memcmp+0x2c>
       return *p1 - *p2;
     }
     p1++;
-     dae:	0505                	addi	a0,a0,1
+     dbe:	0505                	addi	a0,a0,1
     p2++;
-     db0:	0585                	addi	a1,a1,1
+     dc0:	0585                	addi	a1,a1,1
   while (n-- > 0) {
-     db2:	fed518e3          	bne	a0,a3,da2 <memcmp+0x14>
+     dc2:	fed518e3          	bne	a0,a3,db2 <memcmp+0x14>
   }
   return 0;
-     db6:	4501                	li	a0,0
-     db8:	a019                	j	dbe <memcmp+0x30>
+     dc6:	4501                	li	a0,0
+     dc8:	a019                	j	dce <memcmp+0x30>
       return *p1 - *p2;
-     dba:	40e7853b          	subw	a0,a5,a4
+     dca:	40e7853b          	subw	a0,a5,a4
 }
-     dbe:	6422                	ld	s0,8(sp)
-     dc0:	0141                	addi	sp,sp,16
-     dc2:	8082                	ret
+     dce:	6422                	ld	s0,8(sp)
+     dd0:	0141                	addi	sp,sp,16
+     dd2:	8082                	ret
   return 0;
-     dc4:	4501                	li	a0,0
-     dc6:	bfe5                	j	dbe <memcmp+0x30>
+     dd4:	4501                	li	a0,0
+     dd6:	bfe5                	j	dce <memcmp+0x30>
 
-0000000000000dc8 <memcpy>:
+0000000000000dd8 <memcpy>:
 
 void *
 memcpy(void *dst, const void *src, uint n)
 {
-     dc8:	1141                	addi	sp,sp,-16
-     dca:	e406                	sd	ra,8(sp)
-     dcc:	e022                	sd	s0,0(sp)
-     dce:	0800                	addi	s0,sp,16
+     dd8:	1141                	addi	sp,sp,-16
+     dda:	e406                	sd	ra,8(sp)
+     ddc:	e022                	sd	s0,0(sp)
+     dde:	0800                	addi	s0,sp,16
   return memmove(dst, src, n);
-     dd0:	00000097          	auipc	ra,0x0
-     dd4:	f66080e7          	jalr	-154(ra) # d36 <memmove>
+     de0:	00000097          	auipc	ra,0x0
+     de4:	f66080e7          	jalr	-154(ra) # d46 <memmove>
 }
-     dd8:	60a2                	ld	ra,8(sp)
-     dda:	6402                	ld	s0,0(sp)
-     ddc:	0141                	addi	sp,sp,16
-     dde:	8082                	ret
+     de8:	60a2                	ld	ra,8(sp)
+     dea:	6402                	ld	s0,0(sp)
+     dec:	0141                	addi	sp,sp,16
+     dee:	8082                	ret
 
-0000000000000de0 <fork>:
+0000000000000df0 <fork>:
 # generated by usys.pl - do not edit
 #include "kernel/syscall.h"
 .global fork
 fork:
  li a7, SYS_fork
-     de0:	4885                	li	a7,1
+     df0:	4885                	li	a7,1
  ecall
-     de2:	00000073          	ecall
+     df2:	00000073          	ecall
  ret
-     de6:	8082                	ret
+     df6:	8082                	ret
 
-0000000000000de8 <exit>:
+0000000000000df8 <exit>:
 .global exit
 exit:
  li a7, SYS_exit
-     de8:	4889                	li	a7,2
+     df8:	4889                	li	a7,2
  ecall
-     dea:	00000073          	ecall
+     dfa:	00000073          	ecall
  ret
-     dee:	8082                	ret
+     dfe:	8082                	ret
 
-0000000000000df0 <wait>:
+0000000000000e00 <wait>:
 .global wait
 wait:
  li a7, SYS_wait
-     df0:	488d                	li	a7,3
+     e00:	488d                	li	a7,3
  ecall
-     df2:	00000073          	ecall
+     e02:	00000073          	ecall
  ret
-     df6:	8082                	ret
+     e06:	8082                	ret
 
-0000000000000df8 <pipe>:
+0000000000000e08 <pipe>:
 .global pipe
 pipe:
  li a7, SYS_pipe
-     df8:	4891                	li	a7,4
+     e08:	4891                	li	a7,4
  ecall
-     dfa:	00000073          	ecall
+     e0a:	00000073          	ecall
  ret
-     dfe:	8082                	ret
+     e0e:	8082                	ret
 
-0000000000000e00 <read>:
+0000000000000e10 <read>:
 .global read
 read:
  li a7, SYS_read
-     e00:	4895                	li	a7,5
+     e10:	4895                	li	a7,5
  ecall
-     e02:	00000073          	ecall
+     e12:	00000073          	ecall
  ret
-     e06:	8082                	ret
+     e16:	8082                	ret
 
-0000000000000e08 <write>:
+0000000000000e18 <write>:
 .global write
 write:
  li a7, SYS_write
-     e08:	48c1                	li	a7,16
+     e18:	48c1                	li	a7,16
  ecall
-     e0a:	00000073          	ecall
+     e1a:	00000073          	ecall
  ret
-     e0e:	8082                	ret
+     e1e:	8082                	ret
 
-0000000000000e10 <close>:
+0000000000000e20 <close>:
 .global close
 close:
  li a7, SYS_close
-     e10:	48d5                	li	a7,21
+     e20:	48d5                	li	a7,21
  ecall
-     e12:	00000073          	ecall
+     e22:	00000073          	ecall
  ret
-     e16:	8082                	ret
+     e26:	8082                	ret
 
-0000000000000e18 <kill>:
+0000000000000e28 <kill>:
 .global kill
 kill:
  li a7, SYS_kill
-     e18:	4899                	li	a7,6
+     e28:	4899                	li	a7,6
  ecall
-     e1a:	00000073          	ecall
+     e2a:	00000073          	ecall
  ret
-     e1e:	8082                	ret
+     e2e:	8082                	ret
 
-0000000000000e20 <exec>:
+0000000000000e30 <exec>:
 .global exec
 exec:
  li a7, SYS_exec
-     e20:	489d                	li	a7,7
+     e30:	489d                	li	a7,7
  ecall
-     e22:	00000073          	ecall
+     e32:	00000073          	ecall
  ret
-     e26:	8082                	ret
+     e36:	8082                	ret
 
-0000000000000e28 <open>:
+0000000000000e38 <open>:
 .global open
 open:
  li a7, SYS_open
-     e28:	48bd                	li	a7,15
+     e38:	48bd                	li	a7,15
  ecall
-     e2a:	00000073          	ecall
+     e3a:	00000073          	ecall
  ret
-     e2e:	8082                	ret
+     e3e:	8082                	ret
 
-0000000000000e30 <mknod>:
+0000000000000e40 <mknod>:
 .global mknod
 mknod:
  li a7, SYS_mknod
-     e30:	48c5                	li	a7,17
+     e40:	48c5                	li	a7,17
  ecall
-     e32:	00000073          	ecall
+     e42:	00000073          	ecall
  ret
-     e36:	8082                	ret
+     e46:	8082                	ret
 
-0000000000000e38 <unlink>:
+0000000000000e48 <unlink>:
 .global unlink
 unlink:
  li a7, SYS_unlink
-     e38:	48c9                	li	a7,18
+     e48:	48c9                	li	a7,18
  ecall
-     e3a:	00000073          	ecall
+     e4a:	00000073          	ecall
  ret
-     e3e:	8082                	ret
+     e4e:	8082                	ret
 
-0000000000000e40 <fstat>:
+0000000000000e50 <fstat>:
 .global fstat
 fstat:
  li a7, SYS_fstat
-     e40:	48a1                	li	a7,8
+     e50:	48a1                	li	a7,8
  ecall
-     e42:	00000073          	ecall
+     e52:	00000073          	ecall
  ret
-     e46:	8082                	ret
+     e56:	8082                	ret
 
-0000000000000e48 <link>:
+0000000000000e58 <link>:
 .global link
 link:
  li a7, SYS_link
-     e48:	48cd                	li	a7,19
+     e58:	48cd                	li	a7,19
  ecall
-     e4a:	00000073          	ecall
+     e5a:	00000073          	ecall
  ret
-     e4e:	8082                	ret
+     e5e:	8082                	ret
 
-0000000000000e50 <mkdir>:
+0000000000000e60 <mkdir>:
 .global mkdir
 mkdir:
  li a7, SYS_mkdir
-     e50:	48d1                	li	a7,20
+     e60:	48d1                	li	a7,20
  ecall
-     e52:	00000073          	ecall
+     e62:	00000073          	ecall
  ret
-     e56:	8082                	ret
+     e66:	8082                	ret
 
-0000000000000e58 <chdir>:
+0000000000000e68 <chdir>:
 .global chdir
 chdir:
  li a7, SYS_chdir
-     e58:	48a5                	li	a7,9
+     e68:	48a5                	li	a7,9
  ecall
-     e5a:	00000073          	ecall
+     e6a:	00000073          	ecall
  ret
-     e5e:	8082                	ret
+     e6e:	8082                	ret
 
-0000000000000e60 <dup>:
+0000000000000e70 <dup>:
 .global dup
 dup:
  li a7, SYS_dup
-     e60:	48a9                	li	a7,10
+     e70:	48a9                	li	a7,10
  ecall
-     e62:	00000073          	ecall
+     e72:	00000073          	ecall
  ret
-     e66:	8082                	ret
+     e76:	8082                	ret
 
-0000000000000e68 <getpid>:
+0000000000000e78 <getpid>:
 .global getpid
 getpid:
  li a7, SYS_getpid
-     e68:	48ad                	li	a7,11
+     e78:	48ad                	li	a7,11
  ecall
-     e6a:	00000073          	ecall
+     e7a:	00000073          	ecall
  ret
-     e6e:	8082                	ret
+     e7e:	8082                	ret
 
-0000000000000e70 <sbrk>:
+0000000000000e80 <sbrk>:
 .global sbrk
 sbrk:
  li a7, SYS_sbrk
-     e70:	48b1                	li	a7,12
+     e80:	48b1                	li	a7,12
  ecall
-     e72:	00000073          	ecall
+     e82:	00000073          	ecall
  ret
-     e76:	8082                	ret
+     e86:	8082                	ret
 
-0000000000000e78 <sleep>:
+0000000000000e88 <sleep>:
 .global sleep
 sleep:
  li a7, SYS_sleep
-     e78:	48b5                	li	a7,13
+     e88:	48b5                	li	a7,13
  ecall
-     e7a:	00000073          	ecall
+     e8a:	00000073          	ecall
  ret
-     e7e:	8082                	ret
+     e8e:	8082                	ret
 
-0000000000000e80 <uptime>:
+0000000000000e90 <uptime>:
 .global uptime
 uptime:
  li a7, SYS_uptime
-     e80:	48b9                	li	a7,14
+     e90:	48b9                	li	a7,14
  ecall
-     e82:	00000073          	ecall
+     e92:	00000073          	ecall
  ret
-     e86:	8082                	ret
+     e96:	8082                	ret
+
+0000000000000e98 <trace>:
+.global trace
+trace:
+ li a7, SYS_trace
+     e98:	48d9                	li	a7,22
+ ecall
+     e9a:	00000073          	ecall
+ ret
+     e9e:	8082                	ret
 
-0000000000000e88 <putc>:
+0000000000000ea0 <sysinfo>:
+.global sysinfo
+sysinfo:
+ li a7, SYS_sysinfo
+     ea0:	48dd                	li	a7,23
+ ecall
+     ea2:	00000073          	ecall
+ ret
+     ea6:	8082                	ret
+
+0000000000000ea8 <putc>:
 
 static char digits[] = "0123456789ABCDEF";
 
 static void
 putc(int fd, char c)
 {
-     e88:	1101                	addi	sp,sp,-32
-     e8a:	ec06                	sd	ra,24(sp)
-     e8c:	e822                	sd	s0,16(sp)
-     e8e:	1000                	addi	s0,sp,32
-     e90:	feb407a3          	sb	a1,-17(s0)
+     ea8:	1101                	addi	sp,sp,-32
+     eaa:	ec06                	sd	ra,24(sp)
+     eac:	e822                	sd	s0,16(sp)
+     eae:	1000                	addi	s0,sp,32
+     eb0:	feb407a3          	sb	a1,-17(s0)
   write(fd, &c, 1);
-     e94:	4605                	li	a2,1
-     e96:	fef40593          	addi	a1,s0,-17
-     e9a:	00000097          	auipc	ra,0x0
-     e9e:	f6e080e7          	jalr	-146(ra) # e08 <write>
-}
-     ea2:	60e2                	ld	ra,24(sp)
-     ea4:	6442                	ld	s0,16(sp)
-     ea6:	6105                	addi	sp,sp,32
-     ea8:	8082                	ret
+     eb4:	4605                	li	a2,1
+     eb6:	fef40593          	addi	a1,s0,-17
+     eba:	00000097          	auipc	ra,0x0
+     ebe:	f5e080e7          	jalr	-162(ra) # e18 <write>
+}
+     ec2:	60e2                	ld	ra,24(sp)
+     ec4:	6442                	ld	s0,16(sp)
+     ec6:	6105                	addi	sp,sp,32
+     ec8:	8082                	ret
 
-0000000000000eaa <printint>:
+0000000000000eca <printint>:
 
 static void
 printint(int fd, int xx, int base, int sgn)
 {
-     eaa:	7139                	addi	sp,sp,-64
-     eac:	fc06                	sd	ra,56(sp)
-     eae:	f822                	sd	s0,48(sp)
-     eb0:	f426                	sd	s1,40(sp)
-     eb2:	f04a                	sd	s2,32(sp)
-     eb4:	ec4e                	sd	s3,24(sp)
-     eb6:	0080                	addi	s0,sp,64
-     eb8:	84aa                	mv	s1,a0
+     eca:	7139                	addi	sp,sp,-64
+     ecc:	fc06                	sd	ra,56(sp)
+     ece:	f822                	sd	s0,48(sp)
+     ed0:	f426                	sd	s1,40(sp)
+     ed2:	f04a                	sd	s2,32(sp)
+     ed4:	ec4e                	sd	s3,24(sp)
+     ed6:	0080                	addi	s0,sp,64
+     ed8:	84aa                	mv	s1,a0
   char buf[16];
   int i, neg;
   uint x;
 
   neg = 0;
   if(sgn && xx < 0){
-     eba:	c299                	beqz	a3,ec0 <printint+0x16>
-     ebc:	0805c963          	bltz	a1,f4e <printint+0xa4>
+     eda:	c299                	beqz	a3,ee0 <printint+0x16>
+     edc:	0805c963          	bltz	a1,f6e <printint+0xa4>
     neg = 1;
     x = -xx;
   } else {
     x = xx;
-     ec0:	2581                	sext.w	a1,a1
+     ee0:	2581                	sext.w	a1,a1
   neg = 0;
-     ec2:	4881                	li	a7,0
-     ec4:	fc040693          	addi	a3,s0,-64
+     ee2:	4881                	li	a7,0
+     ee4:	fc040693          	addi	a3,s0,-64
   }
 
   i = 0;
-     ec8:	4701                	li	a4,0
+     ee8:	4701                	li	a4,0
   do{
     buf[i++] = digits[x % base];
-     eca:	2601                	sext.w	a2,a2
-     ecc:	00000517          	auipc	a0,0x0
-     ed0:	7b450513          	addi	a0,a0,1972 # 1680 <digits>
-     ed4:	883a                	mv	a6,a4
-     ed6:	2705                	addiw	a4,a4,1
-     ed8:	02c5f7bb          	remuw	a5,a1,a2
-     edc:	1782                	slli	a5,a5,0x20
-     ede:	9381                	srli	a5,a5,0x20
-     ee0:	97aa                	add	a5,a5,a0
-     ee2:	0007c783          	lbu	a5,0(a5)
-     ee6:	00f68023          	sb	a5,0(a3)
+     eea:	2601                	sext.w	a2,a2
+     eec:	00000517          	auipc	a0,0x0
+     ef0:	7dc50513          	addi	a0,a0,2012 # 16c8 <digits>
+     ef4:	883a                	mv	a6,a4
+     ef6:	2705                	addiw	a4,a4,1
+     ef8:	02c5f7bb          	remuw	a5,a1,a2
+     efc:	1782                	slli	a5,a5,0x20
+     efe:	9381                	srli	a5,a5,0x20
+     f00:	97aa                	add	a5,a5,a0
+     f02:	0007c783          	lbu	a5,0(a5)
+     f06:	00f68023          	sb	a5,0(a3)
   }while((x /= base) != 0);
-     eea:	0005879b          	sext.w	a5,a1
-     eee:	02c5d5bb          	divuw	a1,a1,a2
-     ef2:	0685                	addi	a3,a3,1
-     ef4:	fec7f0e3          	bgeu	a5,a2,ed4 <printint+0x2a>
+     f0a:	0005879b          	sext.w	a5,a1
+     f0e:	02c5d5bb          	divuw	a1,a1,a2
+     f12:	0685                	addi	a3,a3,1
+     f14:	fec7f0e3          	bgeu	a5,a2,ef4 <printint+0x2a>
   if(neg)
-     ef8:	00088c63          	beqz	a7,f10 <printint+0x66>
+     f18:	00088c63          	beqz	a7,f30 <printint+0x66>
     buf[i++] = '-';
-     efc:	fd070793          	addi	a5,a4,-48
-     f00:	00878733          	add	a4,a5,s0
-     f04:	02d00793          	li	a5,45
-     f08:	fef70823          	sb	a5,-16(a4)
-     f0c:	0028071b          	addiw	a4,a6,2
+     f1c:	fd070793          	addi	a5,a4,-48
+     f20:	00878733          	add	a4,a5,s0
+     f24:	02d00793          	li	a5,45
+     f28:	fef70823          	sb	a5,-16(a4)
+     f2c:	0028071b          	addiw	a4,a6,2
 
   while(--i >= 0)
-     f10:	02e05863          	blez	a4,f40 <printint+0x96>
-     f14:	fc040793          	addi	a5,s0,-64
-     f18:	00e78933          	add	s2,a5,a4
-     f1c:	fff78993          	addi	s3,a5,-1
-     f20:	99ba                	add	s3,s3,a4
-     f22:	377d                	addiw	a4,a4,-1
-     f24:	1702                	slli	a4,a4,0x20
-     f26:	9301                	srli	a4,a4,0x20
-     f28:	40e989b3          	sub	s3,s3,a4
+     f30:	02e05863          	blez	a4,f60 <printint+0x96>
+     f34:	fc040793          	addi	a5,s0,-64
+     f38:	00e78933          	add	s2,a5,a4
+     f3c:	fff78993          	addi	s3,a5,-1
+     f40:	99ba                	add	s3,s3,a4
+     f42:	377d                	addiw	a4,a4,-1
+     f44:	1702                	slli	a4,a4,0x20
+     f46:	9301                	srli	a4,a4,0x20
+     f48:	40e989b3          	sub	s3,s3,a4
     putc(fd, buf[i]);
-     f2c:	fff94583          	lbu	a1,-1(s2)
-     f30:	8526                	mv	a0,s1
-     f32:	00000097          	auipc	ra,0x0
-     f36:	f56080e7          	jalr	-170(ra) # e88 <putc>
+     f4c:	fff94583          	lbu	a1,-1(s2)
+     f50:	8526                	mv	a0,s1
+     f52:	00000097          	auipc	ra,0x0
+     f56:	f56080e7          	jalr	-170(ra) # ea8 <putc>
   while(--i >= 0)
-     f3a:	197d                	addi	s2,s2,-1
-     f3c:	ff3918e3          	bne	s2,s3,f2c <printint+0x82>
+     f5a:	197d                	addi	s2,s2,-1
+     f5c:	ff3918e3          	bne	s2,s3,f4c <printint+0x82>
 }
-     f40:	70e2                	ld	ra,56(sp)
-     f42:	7442                	ld	s0,48(sp)
-     f44:	74a2                	ld	s1,40(sp)
-     f46:	7902                	ld	s2,32(sp)
-     f48:	69e2                	ld	s3,24(sp)
-     f4a:	6121                	addi	sp,sp,64
-     f4c:	8082                	ret
+     f60:	70e2                	ld	ra,56(sp)
+     f62:	7442                	ld	s0,48(sp)
+     f64:	74a2                	ld	s1,40(sp)
+     f66:	7902                	ld	s2,32(sp)
+     f68:	69e2                	ld	s3,24(sp)
+     f6a:	6121                	addi	sp,sp,64
+     f6c:	8082                	ret
     x = -xx;
-     f4e:	40b005bb          	negw	a1,a1
+     f6e:	40b005bb          	negw	a1,a1
     neg = 1;
-     f52:	4885                	li	a7,1
+     f72:	4885                	li	a7,1
     x = -xx;
-     f54:	bf85                	j	ec4 <printint+0x1a>
+     f74:	bf85                	j	ee4 <printint+0x1a>
 
-0000000000000f56 <vprintf>:
+0000000000000f76 <vprintf>:
 }
 
 // Print to the given fd. Only understands %d, %x, %p, %s.
 void
 vprintf(int fd, const char *fmt, va_list ap)
 {
-     f56:	7119                	addi	sp,sp,-128
-     f58:	fc86                	sd	ra,120(sp)
-     f5a:	f8a2                	sd	s0,112(sp)
-     f5c:	f4a6                	sd	s1,104(sp)
-     f5e:	f0ca                	sd	s2,96(sp)
-     f60:	ecce                	sd	s3,88(sp)
-     f62:	e8d2                	sd	s4,80(sp)
-     f64:	e4d6                	sd	s5,72(sp)
-     f66:	e0da                	sd	s6,64(sp)
-     f68:	fc5e                	sd	s7,56(sp)
-     f6a:	f862                	sd	s8,48(sp)
-     f6c:	f466                	sd	s9,40(sp)
-     f6e:	f06a                	sd	s10,32(sp)
-     f70:	ec6e                	sd	s11,24(sp)
-     f72:	0100                	addi	s0,sp,128
+     f76:	7119                	addi	sp,sp,-128
+     f78:	fc86                	sd	ra,120(sp)
+     f7a:	f8a2                	sd	s0,112(sp)
+     f7c:	f4a6                	sd	s1,104(sp)
+     f7e:	f0ca                	sd	s2,96(sp)
+     f80:	ecce                	sd	s3,88(sp)
+     f82:	e8d2                	sd	s4,80(sp)
+     f84:	e4d6                	sd	s5,72(sp)
+     f86:	e0da                	sd	s6,64(sp)
+     f88:	fc5e                	sd	s7,56(sp)
+     f8a:	f862                	sd	s8,48(sp)
+     f8c:	f466                	sd	s9,40(sp)
+     f8e:	f06a                	sd	s10,32(sp)
+     f90:	ec6e                	sd	s11,24(sp)
+     f92:	0100                	addi	s0,sp,128
   char *s;
   int c, i, state;
 
   state = 0;
   for(i = 0; fmt[i]; i++){
-     f74:	0005c903          	lbu	s2,0(a1)
-     f78:	18090f63          	beqz	s2,1116 <vprintf+0x1c0>
-     f7c:	8aaa                	mv	s5,a0
-     f7e:	8b32                	mv	s6,a2
-     f80:	00158493          	addi	s1,a1,1
+     f94:	0005c903          	lbu	s2,0(a1)
+     f98:	18090f63          	beqz	s2,1136 <vprintf+0x1c0>
+     f9c:	8aaa                	mv	s5,a0
+     f9e:	8b32                	mv	s6,a2
+     fa0:	00158493          	addi	s1,a1,1
   state = 0;
-     f84:	4981                	li	s3,0
+     fa4:	4981                	li	s3,0
       if(c == '%'){
         state = '%';
       } else {
         putc(fd, c);
       }
     } else if(state == '%'){
-     f86:	02500a13          	li	s4,37
-     f8a:	4c55                	li	s8,21
-     f8c:	00000c97          	auipc	s9,0x0
-     f90:	69cc8c93          	addi	s9,s9,1692 # 1628 <malloc+0x40e>
+     fa6:	02500a13          	li	s4,37
+     faa:	4c55                	li	s8,21
+     fac:	00000c97          	auipc	s9,0x0
+     fb0:	6c4c8c93          	addi	s9,s9,1732 # 1670 <malloc+0x436>
         printptr(fd, va_arg(ap, uint64));
       } else if(c == 's'){
         s = va_arg(ap, char*);
         if(s == 0)
           s = "(null)";
         while(*s != 0){
-     f94:	02800d93          	li	s11,40
+     fb4:	02800d93          	li	s11,40
   putc(fd, 'x');
-     f98:	4d41                	li	s10,16
+     fb8:	4d41                	li	s10,16
     putc(fd, digits[x >> (sizeof(uint64) * 8 - 4)]);
-     f9a:	00000b97          	auipc	s7,0x0
-     f9e:	6e6b8b93          	addi	s7,s7,1766 # 1680 <digits>
-     fa2:	a839                	j	fc0 <vprintf+0x6a>
+     fba:	00000b97          	auipc	s7,0x0
+     fbe:	70eb8b93          	addi	s7,s7,1806 # 16c8 <digits>
+     fc2:	a839                	j	fe0 <vprintf+0x6a>
         putc(fd, c);
-     fa4:	85ca                	mv	a1,s2
-     fa6:	8556                	mv	a0,s5
-     fa8:	00000097          	auipc	ra,0x0
-     fac:	ee0080e7          	jalr	-288(ra) # e88 <putc>
-     fb0:	a019                	j	fb6 <vprintf+0x60>
+     fc4:	85ca                	mv	a1,s2
+     fc6:	8556                	mv	a0,s5
+     fc8:	00000097          	auipc	ra,0x0
+     fcc:	ee0080e7          	jalr	-288(ra) # ea8 <putc>
+     fd0:	a019                	j	fd6 <vprintf+0x60>
     } else if(state == '%'){
-     fb2:	01498d63          	beq	s3,s4,fcc <vprintf+0x76>
+     fd2:	01498d63          	beq	s3,s4,fec <vprintf+0x76>
   for(i = 0; fmt[i]; i++){
-     fb6:	0485                	addi	s1,s1,1
-     fb8:	fff4c903          	lbu	s2,-1(s1)
-     fbc:	14090d63          	beqz	s2,1116 <vprintf+0x1c0>
+     fd6:	0485                	addi	s1,s1,1
+     fd8:	fff4c903          	lbu	s2,-1(s1)
+     fdc:	14090d63          	beqz	s2,1136 <vprintf+0x1c0>
     if(state == 0){
-     fc0:	fe0999e3          	bnez	s3,fb2 <vprintf+0x5c>
+     fe0:	fe0999e3          	bnez	s3,fd2 <vprintf+0x5c>
       if(c == '%'){
-     fc4:	ff4910e3          	bne	s2,s4,fa4 <vprintf+0x4e>
+     fe4:	ff4910e3          	bne	s2,s4,fc4 <vprintf+0x4e>
         state = '%';
-     fc8:	89d2                	mv	s3,s4
-     fca:	b7f5                	j	fb6 <vprintf+0x60>
+     fe8:	89d2                	mv	s3,s4
+     fea:	b7f5                	j	fd6 <vprintf+0x60>
       if(c == 'd'){
-     fcc:	11490c63          	beq	s2,s4,10e4 <vprintf+0x18e>
-     fd0:	f9d9079b          	addiw	a5,s2,-99
-     fd4:	0ff7f793          	zext.b	a5,a5
-     fd8:	10fc6e63          	bltu	s8,a5,10f4 <vprintf+0x19e>
-     fdc:	f9d9079b          	addiw	a5,s2,-99
-     fe0:	0ff7f713          	zext.b	a4,a5
-     fe4:	10ec6863          	bltu	s8,a4,10f4 <vprintf+0x19e>
-     fe8:	00271793          	slli	a5,a4,0x2
-     fec:	97e6                	add	a5,a5,s9
-     fee:	439c                	lw	a5,0(a5)
-     ff0:	97e6                	add	a5,a5,s9
-     ff2:	8782                	jr	a5
+     fec:	11490c63          	beq	s2,s4,1104 <vprintf+0x18e>
+     ff0:	f9d9079b          	addiw	a5,s2,-99
+     ff4:	0ff7f793          	zext.b	a5,a5
+     ff8:	10fc6e63          	bltu	s8,a5,1114 <vprintf+0x19e>
+     ffc:	f9d9079b          	addiw	a5,s2,-99
+    1000:	0ff7f713          	zext.b	a4,a5
+    1004:	10ec6863          	bltu	s8,a4,1114 <vprintf+0x19e>
+    1008:	00271793          	slli	a5,a4,0x2
+    100c:	97e6                	add	a5,a5,s9
+    100e:	439c                	lw	a5,0(a5)
+    1010:	97e6                	add	a5,a5,s9
+    1012:	8782                	jr	a5
         printint(fd, va_arg(ap, int), 10, 1);
-     ff4:	008b0913          	addi	s2,s6,8
-     ff8:	4685                	li	a3,1
-     ffa:	4629                	li	a2,10
-     ffc:	000b2583          	lw	a1,0(s6)
-    1000:	8556                	mv	a0,s5
-    1002:	00000097          	auipc	ra,0x0
-    1006:	ea8080e7          	jalr	-344(ra) # eaa <printint>
-    100a:	8b4a                	mv	s6,s2
+    1014:	008b0913          	addi	s2,s6,8
+    1018:	4685                	li	a3,1
+    101a:	4629                	li	a2,10
+    101c:	000b2583          	lw	a1,0(s6)
+    1020:	8556                	mv	a0,s5
+    1022:	00000097          	auipc	ra,0x0
+    1026:	ea8080e7          	jalr	-344(ra) # eca <printint>
+    102a:	8b4a                	mv	s6,s2
       } else {
         // Unknown % sequence.  Print it to draw attention.
         putc(fd, '%');
         putc(fd, c);
       }
       state = 0;
-    100c:	4981                	li	s3,0
-    100e:	b765                	j	fb6 <vprintf+0x60>
+    102c:	4981                	li	s3,0
+    102e:	b765                	j	fd6 <vprintf+0x60>
         printint(fd, va_arg(ap, uint64), 10, 0);
-    1010:	008b0913          	addi	s2,s6,8
-    1014:	4681                	li	a3,0
-    1016:	4629                	li	a2,10
-    1018:	000b2583          	lw	a1,0(s6)
-    101c:	8556                	mv	a0,s5
-    101e:	00000097          	auipc	ra,0x0
-    1022:	e8c080e7          	jalr	-372(ra) # eaa <printint>
-    1026:	8b4a                	mv	s6,s2
+    1030:	008b0913          	addi	s2,s6,8
+    1034:	4681                	li	a3,0
+    1036:	4629                	li	a2,10
+    1038:	000b2583          	lw	a1,0(s6)
+    103c:	8556                	mv	a0,s5
+    103e:	00000097          	auipc	ra,0x0
+    1042:	e8c080e7          	jalr	-372(ra) # eca <printint>
+    1046:	8b4a                	mv	s6,s2
       state = 0;
-    1028:	4981                	li	s3,0
-    102a:	b771                	j	fb6 <vprintf+0x60>
+    1048:	4981                	li	s3,0
+    104a:	b771                	j	fd6 <vprintf+0x60>
         printint(fd, va_arg(ap, int), 16, 0);
-    102c:	008b0913          	addi	s2,s6,8
-    1030:	4681                	li	a3,0
-    1032:	866a                	mv	a2,s10
-    1034:	000b2583          	lw	a1,0(s6)
-    1038:	8556                	mv	a0,s5
-    103a:	00000097          	auipc	ra,0x0
-    103e:	e70080e7          	jalr	-400(ra) # eaa <printint>
-    1042:	8b4a                	mv	s6,s2
+    104c:	008b0913          	addi	s2,s6,8
+    1050:	4681                	li	a3,0
+    1052:	866a                	mv	a2,s10
+    1054:	000b2583          	lw	a1,0(s6)
+    1058:	8556                	mv	a0,s5
+    105a:	00000097          	auipc	ra,0x0
+    105e:	e70080e7          	jalr	-400(ra) # eca <printint>
+    1062:	8b4a                	mv	s6,s2
       state = 0;
-    1044:	4981                	li	s3,0
-    1046:	bf85                	j	fb6 <vprintf+0x60>
+    1064:	4981                	li	s3,0
+    1066:	bf85                	j	fd6 <vprintf+0x60>
         printptr(fd, va_arg(ap, uint64));
-    1048:	008b0793          	addi	a5,s6,8
-    104c:	f8f43423          	sd	a5,-120(s0)
-    1050:	000b3983          	ld	s3,0(s6)
+    1068:	008b0793          	addi	a5,s6,8
+    106c:	f8f43423          	sd	a5,-120(s0)
+    1070:	000b3983          	ld	s3,0(s6)
   putc(fd, '0');
-    1054:	03000593          	li	a1,48
-    1058:	8556                	mv	a0,s5
-    105a:	00000097          	auipc	ra,0x0
-    105e:	e2e080e7          	jalr	-466(ra) # e88 <putc>
+    1074:	03000593          	li	a1,48
+    1078:	8556                	mv	a0,s5
+    107a:	00000097          	auipc	ra,0x0
+    107e:	e2e080e7          	jalr	-466(ra) # ea8 <putc>
   putc(fd, 'x');
-    1062:	07800593          	li	a1,120
-    1066:	8556                	mv	a0,s5
-    1068:	00000097          	auipc	ra,0x0
-    106c:	e20080e7          	jalr	-480(ra) # e88 <putc>
-    1070:	896a                	mv	s2,s10
+    1082:	07800593          	li	a1,120
+    1086:	8556                	mv	a0,s5
+    1088:	00000097          	auipc	ra,0x0
+    108c:	e20080e7          	jalr	-480(ra) # ea8 <putc>
+    1090:	896a                	mv	s2,s10
     putc(fd, digits[x >> (sizeof(uint64) * 8 - 4)]);
-    1072:	03c9d793          	srli	a5,s3,0x3c
-    1076:	97de                	add	a5,a5,s7
-    1078:	0007c583          	lbu	a1,0(a5)
-    107c:	8556                	mv	a0,s5
-    107e:	00000097          	auipc	ra,0x0
-    1082:	e0a080e7          	jalr	-502(ra) # e88 <putc>
+    1092:	03c9d793          	srli	a5,s3,0x3c
+    1096:	97de                	add	a5,a5,s7
+    1098:	0007c583          	lbu	a1,0(a5)
+    109c:	8556                	mv	a0,s5
+    109e:	00000097          	auipc	ra,0x0
+    10a2:	e0a080e7          	jalr	-502(ra) # ea8 <putc>
   for (i = 0; i < (sizeof(uint64) * 2); i++, x <<= 4)
-    1086:	0992                	slli	s3,s3,0x4
-    1088:	397d                	addiw	s2,s2,-1
-    108a:	fe0914e3          	bnez	s2,1072 <vprintf+0x11c>
+    10a6:	0992                	slli	s3,s3,0x4
+    10a8:	397d                	addiw	s2,s2,-1
+    10aa:	fe0914e3          	bnez	s2,1092 <vprintf+0x11c>
         printptr(fd, va_arg(ap, uint64));
-    108e:	f8843b03          	ld	s6,-120(s0)
+    10ae:	f8843b03          	ld	s6,-120(s0)
       state = 0;
-    1092:	4981                	li	s3,0
-    1094:	b70d                	j	fb6 <vprintf+0x60>
+    10b2:	4981                	li	s3,0
+    10b4:	b70d                	j	fd6 <vprintf+0x60>
         s = va_arg(ap, char*);
-    1096:	008b0913          	addi	s2,s6,8
-    109a:	000b3983          	ld	s3,0(s6)
+    10b6:	008b0913          	addi	s2,s6,8
+    10ba:	000b3983          	ld	s3,0(s6)
         if(s == 0)
-    109e:	02098163          	beqz	s3,10c0 <vprintf+0x16a>
+    10be:	02098163          	beqz	s3,10e0 <vprintf+0x16a>
         while(*s != 0){
-    10a2:	0009c583          	lbu	a1,0(s3)
-    10a6:	c5ad                	beqz	a1,1110 <vprintf+0x1ba>
+    10c2:	0009c583          	lbu	a1,0(s3)
+    10c6:	c5ad                	beqz	a1,1130 <vprintf+0x1ba>
           putc(fd, *s);
-    10a8:	8556                	mv	a0,s5
-    10aa:	00000097          	auipc	ra,0x0
-    10ae:	dde080e7          	jalr	-546(ra) # e88 <putc>
+    10c8:	8556                	mv	a0,s5
+    10ca:	00000097          	auipc	ra,0x0
+    10ce:	dde080e7          	jalr	-546(ra) # ea8 <putc>
           s++;
-    10b2:	0985                	addi	s3,s3,1
+    10d2:	0985                	addi	s3,s3,1
         while(*s != 0){
-    10b4:	0009c583          	lbu	a1,0(s3)
-    10b8:	f9e5                	bnez	a1,10a8 <vprintf+0x152>
+    10d4:	0009c583          	lbu	a1,0(s3)
+    10d8:	f9e5                	bnez	a1,10c8 <vprintf+0x152>
         s = va_arg(ap, char*);
-    10ba:	8b4a                	mv	s6,s2
+    10da:	8b4a                	mv	s6,s2
       state = 0;
-    10bc:	4981                	li	s3,0
-    10be:	bde5                	j	fb6 <vprintf+0x60>
+    10dc:	4981                	li	s3,0
+    10de:	bde5                	j	fd6 <vprintf+0x60>
           s = "(null)";
-    10c0:	00000997          	auipc	s3,0x0
-    10c4:	56098993          	addi	s3,s3,1376 # 1620 <malloc+0x406>
+    10e0:	00000997          	auipc	s3,0x0
+    10e4:	58898993          	addi	s3,s3,1416 # 1668 <malloc+0x42e>
         while(*s != 0){
-    10c8:	85ee                	mv	a1,s11
-    10ca:	bff9                	j	10a8 <vprintf+0x152>
+    10e8:	85ee                	mv	a1,s11
+    10ea:	bff9                	j	10c8 <vprintf+0x152>
         putc(fd, va_arg(ap, uint));
-    10cc:	008b0913          	addi	s2,s6,8
-    10d0:	000b4583          	lbu	a1,0(s6)
-    10d4:	8556                	mv	a0,s5
-    10d6:	00000097          	auipc	ra,0x0
-    10da:	db2080e7          	jalr	-590(ra) # e88 <putc>
-    10de:	8b4a                	mv	s6,s2
+    10ec:	008b0913          	addi	s2,s6,8
+    10f0:	000b4583          	lbu	a1,0(s6)
+    10f4:	8556                	mv	a0,s5
+    10f6:	00000097          	auipc	ra,0x0
+    10fa:	db2080e7          	jalr	-590(ra) # ea8 <putc>
+    10fe:	8b4a                	mv	s6,s2
       state = 0;
-    10e0:	4981                	li	s3,0
-    10e2:	bdd1                	j	fb6 <vprintf+0x60>
+    1100:	4981                	li	s3,0
+    1102:	bdd1                	j	fd6 <vprintf+0x60>
         putc(fd, c);
-    10e4:	85d2                	mv	a1,s4
-    10e6:	8556                	mv	a0,s5
-    10e8:	00000097          	auipc	ra,0x0
-    10ec:	da0080e7          	jalr	-608(ra) # e88 <putc>
+    1104:	85d2                	mv	a1,s4
+    1106:	8556                	mv	a0,s5
+    1108:	00000097          	auipc	ra,0x0
+    110c:	da0080e7          	jalr	-608(ra) # ea8 <putc>
       state = 0;
-    10f0:	4981                	li	s3,0
-    10f2:	b5d1                	j	fb6 <vprintf+0x60>
+    1110:	4981                	li	s3,0
+    1112:	b5d1                	j	fd6 <vprintf+0x60>
         putc(fd, '%');
-    10f4:	85d2                	mv	a1,s4
-    10f6:	8556                	mv	a0,s5
-    10f8:	00000097          	auipc	ra,0x0
-    10fc:	d90080e7          	jalr	-624(ra) # e88 <putc>
+    1114:	85d2                	mv	a1,s4
+    1116:	8556                	mv	a0,s5
+    1118:	00000097          	auipc	ra,0x0
+    111c:	d90080e7          	jalr	-624(ra) # ea8 <putc>
         putc(fd, c);
-    1100:	85ca                	mv	a1,s2
-    1102:	8556                	mv	a0,s5
-    1104:	00000097          	auipc	ra,0x0
-    1108:	d84080e7          	jalr	-636(ra) # e88 <putc>
+    1120:	85ca                	mv	a1,s2
+    1122:	8556                	mv	a0,s5
+    1124:	00000097          	auipc	ra,0x0
+    1128:	d84080e7          	jalr	-636(ra) # ea8 <putc>
       state = 0;
-    110c:	4981                	li	s3,0
-    110e:	b565                	j	fb6 <vprintf+0x60>
+    112c:	4981                	li	s3,0
+    112e:	b565                	j	fd6 <vprintf+0x60>
         s = va_arg(ap, char*);
-    1110:	8b4a                	mv	s6,s2
+    1130:	8b4a                	mv	s6,s2
       state = 0;
-    1112:	4981                	li	s3,0
-    1114:	b54d                	j	fb6 <vprintf+0x60>
+    1132:	4981                	li	s3,0
+    1134:	b54d                	j	fd6 <vprintf+0x60>
     }
   }
 }
-    1116:	70e6                	ld	ra,120(sp)
-    1118:	7446                	ld	s0,112(sp)
-    111a:	74a6                	ld	s1,104(sp)
-    111c:	7906                	ld	s2,96(sp)
-    111e:	69e6                	ld	s3,88(sp)
-    1120:	6a46                	ld	s4,80(sp)
-    1122:	6aa6                	ld	s5,72(sp)
-    1124:	6b06                	ld	s6,64(sp)
-    1126:	7be2                	ld	s7,56(sp)
-    1128:	7c42                	ld	s8,48(sp)
-    112a:	7ca2                	ld	s9,40(sp)
-    112c:	7d02                	ld	s10,32(sp)
-    112e:	6de2                	ld	s11,24(sp)
-    1130:	6109                	addi	sp,sp,128
-    1132:	8082                	ret
+    1136:	70e6                	ld	ra,120(sp)
+    1138:	7446                	ld	s0,112(sp)
+    113a:	74a6                	ld	s1,104(sp)
+    113c:	7906                	ld	s2,96(sp)
+    113e:	69e6                	ld	s3,88(sp)
+    1140:	6a46                	ld	s4,80(sp)
+    1142:	6aa6                	ld	s5,72(sp)
+    1144:	6b06                	ld	s6,64(sp)
+    1146:	7be2                	ld	s7,56(sp)
+    1148:	7c42                	ld	s8,48(sp)
+    114a:	7ca2                	ld	s9,40(sp)
+    114c:	7d02                	ld	s10,32(sp)
+    114e:	6de2                	ld	s11,24(sp)
+    1150:	6109                	addi	sp,sp,128
+    1152:	8082                	ret
 
-0000000000001134 <fprintf>:
+0000000000001154 <fprintf>:
 
 void
 fprintf(int fd, const char *fmt, ...)
 {
-    1134:	715d                	addi	sp,sp,-80
-    1136:	ec06                	sd	ra,24(sp)
-    1138:	e822                	sd	s0,16(sp)
-    113a:	1000                	addi	s0,sp,32
-    113c:	e010                	sd	a2,0(s0)
-    113e:	e414                	sd	a3,8(s0)
-    1140:	e818                	sd	a4,16(s0)
-    1142:	ec1c                	sd	a5,24(s0)
-    1144:	03043023          	sd	a6,32(s0)
-    1148:	03143423          	sd	a7,40(s0)
+    1154:	715d                	addi	sp,sp,-80
+    1156:	ec06                	sd	ra,24(sp)
+    1158:	e822                	sd	s0,16(sp)
+    115a:	1000                	addi	s0,sp,32
+    115c:	e010                	sd	a2,0(s0)
+    115e:	e414                	sd	a3,8(s0)
+    1160:	e818                	sd	a4,16(s0)
+    1162:	ec1c                	sd	a5,24(s0)
+    1164:	03043023          	sd	a6,32(s0)
+    1168:	03143423          	sd	a7,40(s0)
   va_list ap;
 
   va_start(ap, fmt);
-    114c:	fe843423          	sd	s0,-24(s0)
+    116c:	fe843423          	sd	s0,-24(s0)
   vprintf(fd, fmt, ap);
-    1150:	8622                	mv	a2,s0
-    1152:	00000097          	auipc	ra,0x0
-    1156:	e04080e7          	jalr	-508(ra) # f56 <vprintf>
-}
-    115a:	60e2                	ld	ra,24(sp)
-    115c:	6442                	ld	s0,16(sp)
-    115e:	6161                	addi	sp,sp,80
-    1160:	8082                	ret
+    1170:	8622                	mv	a2,s0
+    1172:	00000097          	auipc	ra,0x0
+    1176:	e04080e7          	jalr	-508(ra) # f76 <vprintf>
+}
+    117a:	60e2                	ld	ra,24(sp)
+    117c:	6442                	ld	s0,16(sp)
+    117e:	6161                	addi	sp,sp,80
+    1180:	8082                	ret
 
-0000000000001162 <printf>:
+0000000000001182 <printf>:
 
 void
 printf(const char *fmt, ...)
 {
-    1162:	711d                	addi	sp,sp,-96
-    1164:	ec06                	sd	ra,24(sp)
-    1166:	e822                	sd	s0,16(sp)
-    1168:	1000                	addi	s0,sp,32
-    116a:	e40c                	sd	a1,8(s0)
-    116c:	e810                	sd	a2,16(s0)
-    116e:	ec14                	sd	a3,24(s0)
-    1170:	f018                	sd	a4,32(s0)
-    1172:	f41c                	sd	a5,40(s0)
-    1174:	03043823          	sd	a6,48(s0)
-    1178:	03143c23          	sd	a7,56(s0)
+    1182:	711d                	addi	sp,sp,-96
+    1184:	ec06                	sd	ra,24(sp)
+    1186:	e822                	sd	s0,16(sp)
+    1188:	1000                	addi	s0,sp,32
+    118a:	e40c                	sd	a1,8(s0)
+    118c:	e810                	sd	a2,16(s0)
+    118e:	ec14                	sd	a3,24(s0)
+    1190:	f018                	sd	a4,32(s0)
+    1192:	f41c                	sd	a5,40(s0)
+    1194:	03043823          	sd	a6,48(s0)
+    1198:	03143c23          	sd	a7,56(s0)
   va_list ap;
 
   va_start(ap, fmt);
-    117c:	00840613          	addi	a2,s0,8
-    1180:	fec43423          	sd	a2,-24(s0)
+    119c:	00840613          	addi	a2,s0,8
+    11a0:	fec43423          	sd	a2,-24(s0)
   vprintf(1, fmt, ap);
-    1184:	85aa                	mv	a1,a0
-    1186:	4505                	li	a0,1
-    1188:	00000097          	auipc	ra,0x0
-    118c:	dce080e7          	jalr	-562(ra) # f56 <vprintf>
-}
-    1190:	60e2                	ld	ra,24(sp)
-    1192:	6442                	ld	s0,16(sp)
-    1194:	6125                	addi	sp,sp,96
-    1196:	8082                	ret
+    11a4:	85aa                	mv	a1,a0
+    11a6:	4505                	li	a0,1
+    11a8:	00000097          	auipc	ra,0x0
+    11ac:	dce080e7          	jalr	-562(ra) # f76 <vprintf>
+}
+    11b0:	60e2                	ld	ra,24(sp)
+    11b2:	6442                	ld	s0,16(sp)
+    11b4:	6125                	addi	sp,sp,96
+    11b6:	8082                	ret
 
-0000000000001198 <free>:
+00000000000011b8 <free>:
 static Header base;
 static Header *freep;
 
 void
 free(void *ap)
 {
-    1198:	1141                	addi	sp,sp,-16
-    119a:	e422                	sd	s0,8(sp)
-    119c:	0800                	addi	s0,sp,16
+    11b8:	1141                	addi	sp,sp,-16
+    11ba:	e422                	sd	s0,8(sp)
+    11bc:	0800                	addi	s0,sp,16
   Header *bp, *p;
 
   bp = (Header*)ap - 1;
-    119e:	ff050693          	addi	a3,a0,-16
+    11be:	ff050693          	addi	a3,a0,-16
   for(p = freep; !(bp > p && bp < p->s.ptr); p = p->s.ptr)
-    11a2:	00000797          	auipc	a5,0x0
-    11a6:	4fe7b783          	ld	a5,1278(a5) # 16a0 <freep>
-    11aa:	a02d                	j	11d4 <free+0x3c>
+    11c2:	00000797          	auipc	a5,0x0
+    11c6:	5267b783          	ld	a5,1318(a5) # 16e8 <freep>
+    11ca:	a02d                	j	11f4 <free+0x3c>
     if(p >= p->s.ptr && (bp > p || bp < p->s.ptr))
       break;
   if(bp + bp->s.size == p->s.ptr){
     bp->s.size += p->s.ptr->s.size;
-    11ac:	4618                	lw	a4,8(a2)
-    11ae:	9f2d                	addw	a4,a4,a1
-    11b0:	fee52c23          	sw	a4,-8(a0)
+    11cc:	4618                	lw	a4,8(a2)
+    11ce:	9f2d                	addw	a4,a4,a1
+    11d0:	fee52c23          	sw	a4,-8(a0)
     bp->s.ptr = p->s.ptr->s.ptr;
-    11b4:	6398                	ld	a4,0(a5)
-    11b6:	6310                	ld	a2,0(a4)
-    11b8:	a83d                	j	11f6 <free+0x5e>
+    11d4:	6398                	ld	a4,0(a5)
+    11d6:	6310                	ld	a2,0(a4)
+    11d8:	a83d                	j	1216 <free+0x5e>
   } else
     bp->s.ptr = p->s.ptr;
   if(p + p->s.size == bp){
     p->s.size += bp->s.size;
-    11ba:	ff852703          	lw	a4,-8(a0)
-    11be:	9f31                	addw	a4,a4,a2
-    11c0:	c798                	sw	a4,8(a5)
+    11da:	ff852703          	lw	a4,-8(a0)
+    11de:	9f31                	addw	a4,a4,a2
+    11e0:	c798                	sw	a4,8(a5)
     p->s.ptr = bp->s.ptr;
-    11c2:	ff053683          	ld	a3,-16(a0)
-    11c6:	a091                	j	120a <free+0x72>
+    11e2:	ff053683          	ld	a3,-16(a0)
+    11e6:	a091                	j	122a <free+0x72>
     if(p >= p->s.ptr && (bp > p || bp < p->s.ptr))
-    11c8:	6398                	ld	a4,0(a5)
-    11ca:	00e7e463          	bltu	a5,a4,11d2 <free+0x3a>
-    11ce:	00e6ea63          	bltu	a3,a4,11e2 <free+0x4a>
+    11e8:	6398                	ld	a4,0(a5)
+    11ea:	00e7e463          	bltu	a5,a4,11f2 <free+0x3a>
+    11ee:	00e6ea63          	bltu	a3,a4,1202 <free+0x4a>
 {
-    11d2:	87ba                	mv	a5,a4
+    11f2:	87ba                	mv	a5,a4
   for(p = freep; !(bp > p && bp < p->s.ptr); p = p->s.ptr)
-    11d4:	fed7fae3          	bgeu	a5,a3,11c8 <free+0x30>
-    11d8:	6398                	ld	a4,0(a5)
-    11da:	00e6e463          	bltu	a3,a4,11e2 <free+0x4a>
+    11f4:	fed7fae3          	bgeu	a5,a3,11e8 <free+0x30>
+    11f8:	6398                	ld	a4,0(a5)
+    11fa:	00e6e463          	bltu	a3,a4,1202 <free+0x4a>
     if(p >= p->s.ptr && (bp > p || bp < p->s.ptr))
-    11de:	fee7eae3          	bltu	a5,a4,11d2 <free+0x3a>
+    11fe:	fee7eae3          	bltu	a5,a4,11f2 <free+0x3a>
   if(bp + bp->s.size == p->s.ptr){
-    11e2:	ff852583          	lw	a1,-8(a0)
-    11e6:	6390                	ld	a2,0(a5)
-    11e8:	02059813          	slli	a6,a1,0x20
-    11ec:	01c85713          	srli	a4,a6,0x1c
-    11f0:	9736                	add	a4,a4,a3
-    11f2:	fae60de3          	beq	a2,a4,11ac <free+0x14>
+    1202:	ff852583          	lw	a1,-8(a0)
+    1206:	6390                	ld	a2,0(a5)
+    1208:	02059813          	slli	a6,a1,0x20
+    120c:	01c85713          	srli	a4,a6,0x1c
+    1210:	9736                	add	a4,a4,a3
+    1212:	fae60de3          	beq	a2,a4,11cc <free+0x14>
     bp->s.ptr = p->s.ptr->s.ptr;
-    11f6:	fec53823          	sd	a2,-16(a0)
+    1216:	fec53823          	sd	a2,-16(a0)
   if(p + p->s.size == bp){
-    11fa:	4790                	lw	a2,8(a5)
-    11fc:	02061593          	slli	a1,a2,0x20
-    1200:	01c5d713          	srli	a4,a1,0x1c
-    1204:	973e                	add	a4,a4,a5
-    1206:	fae68ae3          	beq	a3,a4,11ba <free+0x22>
+    121a:	4790                	lw	a2,8(a5)
+    121c:	02061593          	slli	a1,a2,0x20
+    1220:	01c5d713          	srli	a4,a1,0x1c
+    1224:	973e                	add	a4,a4,a5
+    1226:	fae68ae3          	beq	a3,a4,11da <free+0x22>
     p->s.ptr = bp->s.ptr;
-    120a:	e394                	sd	a3,0(a5)
+    122a:	e394                	sd	a3,0(a5)
   } else
     p->s.ptr = bp;
   freep = p;
-    120c:	00000717          	auipc	a4,0x0
-    1210:	48f73a23          	sd	a5,1172(a4) # 16a0 <freep>
+    122c:	00000717          	auipc	a4,0x0
+    1230:	4af73e23          	sd	a5,1212(a4) # 16e8 <freep>
 }
-    1214:	6422                	ld	s0,8(sp)
-    1216:	0141                	addi	sp,sp,16
-    1218:	8082                	ret
+    1234:	6422                	ld	s0,8(sp)
+    1236:	0141                	addi	sp,sp,16
+    1238:	8082                	ret
 
-000000000000121a <malloc>:
+000000000000123a <malloc>:
   return freep;
 }
 
 void*
 malloc(uint nbytes)
 {
-    121a:	7139                	addi	sp,sp,-64
-    121c:	fc06                	sd	ra,56(sp)
-    121e:	f822                	sd	s0,48(sp)
-    1220:	f426                	sd	s1,40(sp)
-    1222:	f04a                	sd	s2,32(sp)
-    1224:	ec4e                	sd	s3,24(sp)
-    1226:	e852                	sd	s4,16(sp)
-    1228:	e456                	sd	s5,8(sp)
-    122a:	e05a                	sd	s6,0(sp)
-    122c:	0080                	addi	s0,sp,64
+    123a:	7139                	addi	sp,sp,-64
+    123c:	fc06                	sd	ra,56(sp)
+    123e:	f822                	sd	s0,48(sp)
+    1240:	f426                	sd	s1,40(sp)
+    1242:	f04a                	sd	s2,32(sp)
+    1244:	ec4e                	sd	s3,24(sp)
+    1246:	e852                	sd	s4,16(sp)
+    1248:	e456                	sd	s5,8(sp)
+    124a:	e05a                	sd	s6,0(sp)
+    124c:	0080                	addi	s0,sp,64
   Header *p, *prevp;
   uint nunits;
 
   nunits = (nbytes + sizeof(Header) - 1)/sizeof(Header) + 1;
-    122e:	02051493          	slli	s1,a0,0x20
-    1232:	9081                	srli	s1,s1,0x20
-    1234:	04bd                	addi	s1,s1,15
-    1236:	8091                	srli	s1,s1,0x4
-    1238:	0014899b          	addiw	s3,s1,1
-    123c:	0485                	addi	s1,s1,1
+    124e:	02051493          	slli	s1,a0,0x20
+    1252:	9081                	srli	s1,s1,0x20
+    1254:	04bd                	addi	s1,s1,15
+    1256:	8091                	srli	s1,s1,0x4
+    1258:	0014899b          	addiw	s3,s1,1
+    125c:	0485                	addi	s1,s1,1
   if((prevp = freep) == 0){
-    123e:	00000517          	auipc	a0,0x0
-    1242:	46253503          	ld	a0,1122(a0) # 16a0 <freep>
-    1246:	c515                	beqz	a0,1272 <malloc+0x58>
+    125e:	00000517          	auipc	a0,0x0
+    1262:	48a53503          	ld	a0,1162(a0) # 16e8 <freep>
+    1266:	c515                	beqz	a0,1292 <malloc+0x58>
     base.s.ptr = freep = prevp = &base;
     base.s.size = 0;
   }
   for(p = prevp->s.ptr; ; prevp = p, p = p->s.ptr){
-    1248:	611c                	ld	a5,0(a0)
+    1268:	611c                	ld	a5,0(a0)
     if(p->s.size >= nunits){
-    124a:	4798                	lw	a4,8(a5)
-    124c:	02977f63          	bgeu	a4,s1,128a <malloc+0x70>
-    1250:	8a4e                	mv	s4,s3
-    1252:	0009871b          	sext.w	a4,s3
-    1256:	6685                	lui	a3,0x1
-    1258:	00d77363          	bgeu	a4,a3,125e <malloc+0x44>
-    125c:	6a05                	lui	s4,0x1
-    125e:	000a0b1b          	sext.w	s6,s4
+    126a:	4798                	lw	a4,8(a5)
+    126c:	02977f63          	bgeu	a4,s1,12aa <malloc+0x70>
+    1270:	8a4e                	mv	s4,s3
+    1272:	0009871b          	sext.w	a4,s3
+    1276:	6685                	lui	a3,0x1
+    1278:	00d77363          	bgeu	a4,a3,127e <malloc+0x44>
+    127c:	6a05                	lui	s4,0x1
+    127e:	000a0b1b          	sext.w	s6,s4
   p = sbrk(nu * sizeof(Header));
-    1262:	004a1a1b          	slliw	s4,s4,0x4
+    1282:	004a1a1b          	slliw	s4,s4,0x4
         p->s.size = nunits;
       }
       freep = prevp;
       return (void*)(p + 1);
     }
     if(p == freep)
-    1266:	00000917          	auipc	s2,0x0
-    126a:	43a90913          	addi	s2,s2,1082 # 16a0 <freep>
+    1286:	00000917          	auipc	s2,0x0
+    128a:	46290913          	addi	s2,s2,1122 # 16e8 <freep>
   if(p == (char*)-1)
-    126e:	5afd                	li	s5,-1
-    1270:	a895                	j	12e4 <malloc+0xca>
+    128e:	5afd                	li	s5,-1
+    1290:	a895                	j	1304 <malloc+0xca>
     base.s.ptr = freep = prevp = &base;
-    1272:	00001797          	auipc	a5,0x1
-    1276:	81e78793          	addi	a5,a5,-2018 # 1a90 <base>
-    127a:	00000717          	auipc	a4,0x0
-    127e:	42f73323          	sd	a5,1062(a4) # 16a0 <freep>
-    1282:	e39c                	sd	a5,0(a5)
+    1292:	00001797          	auipc	a5,0x1
+    1296:	84678793          	addi	a5,a5,-1978 # 1ad8 <base>
+    129a:	00000717          	auipc	a4,0x0
+    129e:	44f73723          	sd	a5,1102(a4) # 16e8 <freep>
+    12a2:	e39c                	sd	a5,0(a5)
     base.s.size = 0;
-    1284:	0007a423          	sw	zero,8(a5)
+    12a4:	0007a423          	sw	zero,8(a5)
     if(p->s.size >= nunits){
-    1288:	b7e1                	j	1250 <malloc+0x36>
+    12a8:	b7e1                	j	1270 <malloc+0x36>
       if(p->s.size == nunits)
-    128a:	02e48c63          	beq	s1,a4,12c2 <malloc+0xa8>
+    12aa:	02e48c63          	beq	s1,a4,12e2 <malloc+0xa8>
         p->s.size -= nunits;
-    128e:	4137073b          	subw	a4,a4,s3
-    1292:	c798                	sw	a4,8(a5)
+    12ae:	4137073b          	subw	a4,a4,s3
+    12b2:	c798                	sw	a4,8(a5)
         p += p->s.size;
-    1294:	02071693          	slli	a3,a4,0x20
-    1298:	01c6d713          	srli	a4,a3,0x1c
-    129c:	97ba                	add	a5,a5,a4
+    12b4:	02071693          	slli	a3,a4,0x20
+    12b8:	01c6d713          	srli	a4,a3,0x1c
+    12bc:	97ba                	add	a5,a5,a4
         p->s.size = nunits;
-    129e:	0137a423          	sw	s3,8(a5)
+    12be:	0137a423          	sw	s3,8(a5)
       freep = prevp;
-    12a2:	00000717          	auipc	a4,0x0
-    12a6:	3ea73f23          	sd	a0,1022(a4) # 16a0 <freep>
+    12c2:	00000717          	auipc	a4,0x0
+    12c6:	42a73323          	sd	a0,1062(a4) # 16e8 <freep>
       return (void*)(p + 1);
-    12aa:	01078513          	addi	a0,a5,16
+    12ca:	01078513          	addi	a0,a5,16
       if((p = morecore(nunits)) == 0)
         return 0;
   }
 }
-    12ae:	70e2                	ld	ra,56(sp)
-    12b0:	7442                	ld	s0,48(sp)
-    12b2:	74a2                	ld	s1,40(sp)
-    12b4:	7902                	ld	s2,32(sp)
-    12b6:	69e2                	ld	s3,24(sp)
-    12b8:	6a42                	ld	s4,16(sp)
-    12ba:	6aa2                	ld	s5,8(sp)
-    12bc:	6b02                	ld	s6,0(sp)
-    12be:	6121                	addi	sp,sp,64
-    12c0:	8082                	ret
+    12ce:	70e2                	ld	ra,56(sp)
+    12d0:	7442                	ld	s0,48(sp)
+    12d2:	74a2                	ld	s1,40(sp)
+    12d4:	7902                	ld	s2,32(sp)
+    12d6:	69e2                	ld	s3,24(sp)
+    12d8:	6a42                	ld	s4,16(sp)
+    12da:	6aa2                	ld	s5,8(sp)
+    12dc:	6b02                	ld	s6,0(sp)
+    12de:	6121                	addi	sp,sp,64
+    12e0:	8082                	ret
         prevp->s.ptr = p->s.ptr;
-    12c2:	6398                	ld	a4,0(a5)
-    12c4:	e118                	sd	a4,0(a0)
-    12c6:	bff1                	j	12a2 <malloc+0x88>
+    12e2:	6398                	ld	a4,0(a5)
+    12e4:	e118                	sd	a4,0(a0)
+    12e6:	bff1                	j	12c2 <malloc+0x88>
   hp->s.size = nu;
-    12c8:	01652423          	sw	s6,8(a0)
+    12e8:	01652423          	sw	s6,8(a0)
   free((void*)(hp + 1));
-    12cc:	0541                	addi	a0,a0,16
-    12ce:	00000097          	auipc	ra,0x0
-    12d2:	eca080e7          	jalr	-310(ra) # 1198 <free>
+    12ec:	0541                	addi	a0,a0,16
+    12ee:	00000097          	auipc	ra,0x0
+    12f2:	eca080e7          	jalr	-310(ra) # 11b8 <free>
   return freep;
-    12d6:	00093503          	ld	a0,0(s2)
+    12f6:	00093503          	ld	a0,0(s2)
       if((p = morecore(nunits)) == 0)
-    12da:	d971                	beqz	a0,12ae <malloc+0x94>
+    12fa:	d971                	beqz	a0,12ce <malloc+0x94>
   for(p = prevp->s.ptr; ; prevp = p, p = p->s.ptr){
-    12dc:	611c                	ld	a5,0(a0)
+    12fc:	611c                	ld	a5,0(a0)
     if(p->s.size >= nunits){
-    12de:	4798                	lw	a4,8(a5)
-    12e0:	fa9775e3          	bgeu	a4,s1,128a <malloc+0x70>
+    12fe:	4798                	lw	a4,8(a5)
+    1300:	fa9775e3          	bgeu	a4,s1,12aa <malloc+0x70>
     if(p == freep)
-    12e4:	00093703          	ld	a4,0(s2)
-    12e8:	853e                	mv	a0,a5
-    12ea:	fef719e3          	bne	a4,a5,12dc <malloc+0xc2>
+    1304:	00093703          	ld	a4,0(s2)
+    1308:	853e                	mv	a0,a5
+    130a:	fef719e3          	bne	a4,a5,12fc <malloc+0xc2>
   p = sbrk(nu * sizeof(Header));
-    12ee:	8552                	mv	a0,s4
-    12f0:	00000097          	auipc	ra,0x0
-    12f4:	b80080e7          	jalr	-1152(ra) # e70 <sbrk>
+    130e:	8552                	mv	a0,s4
+    1310:	00000097          	auipc	ra,0x0
+    1314:	b70080e7          	jalr	-1168(ra) # e80 <sbrk>
   if(p == (char*)-1)
-    12f8:	fd5518e3          	bne	a0,s5,12c8 <malloc+0xae>
+    1318:	fd5518e3          	bne	a0,s5,12e8 <malloc+0xae>
         return 0;
-    12fc:	4501                	li	a0,0
-    12fe:	bf45                	j	12ae <malloc+0x94>
+    131c:	4501                	li	a0,0
+    131e:	bf45                	j	12ce <malloc+0x94>
diff -urN ./user/grind.c ../xv6-labs-2021/user/grind.c
--- ./user/grind.c	2021-12-05 17:48:45.000000000 +0800
+++ ../xv6-labs-2021/user/grind.c	2021-11-18 15:54:53.000000000 +0800
@@ -57,7 +57,7 @@
 
   mkdir("grindir");
   if(chdir("grindir") != 0){
-    printf("chdir grindir failed\n");
+    printf("grind: chdir grindir failed\n");
     exit(1);
   }
   chdir("/");
@@ -75,7 +75,7 @@
       unlink("grindir/../a");
     } else if(what == 4){
       if(chdir("grindir") != 0){
-        printf("chdir grindir failed\n");
+        printf("grind: chdir grindir failed\n");
         exit(1);
       }
       unlink("../b");
@@ -139,7 +139,7 @@
         exit(1);
       }
       if(chdir("../grindir/..") != 0){
-        printf("chdir failed\n");
+        printf("grind: chdir failed\n");
         exit(1);
       }
       kill(pid);
@@ -188,7 +188,7 @@
         unlink("x");
         exit(0);
       } else if(pid < 0){
-        printf("fork failed\n");
+        printf("grind: fork failed\n");
         exit(1);
       }
       wait(0);
@@ -198,24 +198,24 @@
       // file descriptors, blocks.
       int fd1 = open("c", O_CREATE|O_RDWR);
       if(fd1 < 0){
-        printf("create c failed\n");
+        printf("grind: create c failed\n");
         exit(1);
       }
       if(write(fd1, "x", 1) != 1){
-        printf("write c failed\n");
+        printf("grind: write c failed\n");
         exit(1);
       }
       struct stat st;
       if(fstat(fd1, &st) != 0){
-        printf("fstat failed\n");
+        printf("grind: fstat failed\n");
         exit(1);
       }
       if(st.size != 1){
-        printf("fstat reports wrong size %d\n", (int)st.size);
+        printf("grind: fstat reports wrong size %d\n", (int)st.size);
         exit(1);
       }
       if(st.ino > 200){
-        printf("fstat reports crazy i-number %d\n", st.ino);
+        printf("grind: fstat reports crazy i-number %d\n", st.ino);
         exit(1);
       }
       close(fd1);
@@ -224,11 +224,11 @@
       // echo hi | cat
       int aa[2], bb[2];
       if(pipe(aa) < 0){
-        fprintf(2, "pipe failed\n");
+        fprintf(2, "grind: pipe failed\n");
         exit(1);
       }
       if(pipe(bb) < 0){
-        fprintf(2, "pipe failed\n");
+        fprintf(2, "grind: pipe failed\n");
         exit(1);
       }
       int pid1 = fork();
@@ -238,16 +238,16 @@
         close(aa[0]);
         close(1);
         if(dup(aa[1]) != 1){
-          fprintf(2, "dup failed\n");
+          fprintf(2, "grind: dup failed\n");
           exit(1);
         }
         close(aa[1]);
         char *args[3] = { "echo", "hi", 0 };
         exec("grindir/../echo", args);
-        fprintf(2, "echo: not found\n");
+        fprintf(2, "grind: echo: not found\n");
         exit(2);
       } else if(pid1 < 0){
-        fprintf(2, "fork failed\n");
+        fprintf(2, "grind: fork failed\n");
         exit(3);
       }
       int pid2 = fork();
@@ -256,36 +256,37 @@
         close(bb[0]);
         close(0);
         if(dup(aa[0]) != 0){
-          fprintf(2, "dup failed\n");
+          fprintf(2, "grind: dup failed\n");
           exit(4);
         }
         close(aa[0]);
         close(1);
         if(dup(bb[1]) != 1){
-          fprintf(2, "dup failed\n");
+          fprintf(2, "grind: dup failed\n");
           exit(5);
         }
         close(bb[1]);
         char *args[2] = { "cat", 0 };
         exec("/cat", args);
-        fprintf(2, "cat: not found\n");
+        fprintf(2, "grind: cat: not found\n");
         exit(6);
       } else if(pid2 < 0){
-        fprintf(2, "fork failed\n");
+        fprintf(2, "grind: fork failed\n");
         exit(7);
       }
       close(aa[0]);
       close(aa[1]);
       close(bb[1]);
-      char buf[3] = { 0, 0, 0 };
+      char buf[4] = { 0, 0, 0, 0 };
       read(bb[0], buf+0, 1);
       read(bb[0], buf+1, 1);
+      read(bb[0], buf+2, 1);
       close(bb[0]);
       int st1, st2;
       wait(&st1);
       wait(&st2);
-      if(st1 != 0 || st2 != 0 || strcmp(buf, "hi") != 0){
-        printf("exec pipeline failed %d %d \"%s\"\n", st1, st2, buf);
+      if(st1 != 0 || st2 != 0 || strcmp(buf, "hi\n") != 0){
+        printf("grind: exec pipeline failed %d %d \"%s\"\n", st1, st2, buf);
         exit(1);
       }
     }
Binary files ./user/grind.o and ../xv6-labs-2021/user/grind.o differ
diff -urN ./user/grind.sym ../xv6-labs-2021/user/grind.sym
--- ./user/grind.sym	2021-12-05 17:54:42.000000000 +0800
+++ ../xv6-labs-2021/user/grind.sym	2021-11-26 14:46:16.000000000 +0800
@@ -1,8 +1,8 @@
 0000000000000000 .text
-0000000000001300 .rodata
-0000000000001698 .sdata
-00000000000016a0 .sbss
-00000000000016a8 .bss
+0000000000001320 .rodata
+00000000000016e0 .sdata
+00000000000016e8 .sbss
+00000000000016f0 .bss
 0000000000000000 .comment
 0000000000000000 .riscv.attributes
 0000000000000000 .debug_aranges
@@ -15,62 +15,64 @@
 0000000000000000 .debug_loclists
 0000000000000000 .debug_rnglists
 0000000000000000 grind.c
-00000000000016a8 buf.0
+00000000000016f0 buf.0
 0000000000000000 ulib.c
 0000000000000000 printf.c
-0000000000000e88 putc
-0000000000000eaa printint
-0000000000001680 digits
+0000000000000ea8 putc
+0000000000000eca printint
+00000000000016c8 digits
 0000000000000000 umalloc.c
-00000000000016a0 freep
-0000000000001a90 base
-0000000000000b7c strcpy
-0000000000001162 printf
-0000000000001e91 __global_pointer$
+00000000000016e8 freep
+0000000000001ad8 base
+0000000000000b8c strcpy
+0000000000001182 printf
+0000000000001ed9 __global_pointer$
 0000000000000000 do_rand
-0000000000000d36 memmove
-0000000000000e30 mknod
-0000000000000c34 gets
-0000000000001698 __SDATA_BEGIN__
-0000000000000e68 getpid
-0000000000000dc8 memcpy
-000000000000121a malloc
-0000000000000e78 sleep
-0000000000000df8 pipe
+0000000000000d46 memmove
+0000000000000e40 mknod
+0000000000000e98 trace
+0000000000000c44 gets
+00000000000016e0 __SDATA_BEGIN__
+0000000000000e78 getpid
+0000000000000dd8 memcpy
+000000000000123a malloc
+0000000000000e88 sleep
+0000000000000ea0 sysinfo
+0000000000000e08 pipe
 0000000000000078 go
-0000000000000a50 iter
-0000000000000e08 write
-0000000000000e40 fstat
-0000000000001134 fprintf
-0000000000000e18 kill
-0000000000000f56 vprintf
-0000000000000e58 chdir
-0000000000000e20 exec
-0000000000000df0 wait
+0000000000000a60 iter
+0000000000000e18 write
+0000000000000e50 fstat
+0000000000001154 fprintf
+0000000000000e28 kill
+0000000000000f76 vprintf
+0000000000000e68 chdir
+0000000000000e30 exec
+0000000000000e00 wait
 0000000000000058 rand
-0000000000000e00 read
-0000000000000e38 unlink
-0000000000000d8e memcmp
-0000000000000de0 fork
-0000000000001698 rand_next
-0000000000001aa0 __BSS_END__
-0000000000000e70 sbrk
-0000000000000e80 uptime
-00000000000016a0 __bss_start
-0000000000000bee memset
-0000000000000b46 main
-0000000000000b98 strcmp
-0000000000000e60 dup
-0000000000001691 __DATA_BEGIN__
-0000000000000ca8 stat
-00000000000016a0 _edata
-0000000000001aa0 _end
-0000000000000e48 link
-0000000000000de8 exit
-0000000000000cee atoi
-0000000000000bc4 strlen
-0000000000000e28 open
-0000000000000c10 strchr
-0000000000000e50 mkdir
-0000000000000e10 close
-0000000000001198 free
+0000000000000e10 read
+0000000000000e48 unlink
+0000000000000d9e memcmp
+0000000000000df0 fork
+00000000000016e0 rand_next
+0000000000001ae8 __BSS_END__
+0000000000000e80 sbrk
+0000000000000e90 uptime
+00000000000016e8 __bss_start
+0000000000000bfe memset
+0000000000000b56 main
+0000000000000ba8 strcmp
+0000000000000e70 dup
+00000000000016d9 __DATA_BEGIN__
+0000000000000cb8 stat
+00000000000016e8 _edata
+0000000000001ae8 _end
+0000000000000e58 link
+0000000000000df8 exit
+0000000000000cfe atoi
+0000000000000bd4 strlen
+0000000000000e38 open
+0000000000000c20 strchr
+0000000000000e60 mkdir
+0000000000000e20 close
+00000000000011b8 free
diff -urN ./user/init.asm ../xv6-labs-2021/user/init.asm
--- ./user/init.asm	2021-12-05 17:54:42.000000000 +0800
+++ ../xv6-labs-2021/user/init.asm	2021-11-26 14:46:16.000000000 +0800
@@ -22,7 +22,7 @@
   if(open("console", O_RDWR) < 0){
    c:	4589                	li	a1,2
    e:	00001517          	auipc	a0,0x1
-  12:	87250513          	addi	a0,a0,-1934 # 880 <malloc+0xea>
+  12:	88250513          	addi	a0,a0,-1918 # 890 <malloc+0xea>
   16:	00000097          	auipc	ra,0x0
   1a:	38e080e7          	jalr	910(ra) # 3a4 <open>
   1e:	06054363          	bltz	a0,84 <main+0x84>
@@ -41,10 +41,10 @@
   for(;;){
     printf("init: starting sh\n");
   36:	00001917          	auipc	s2,0x1
-  3a:	85290913          	addi	s2,s2,-1966 # 888 <malloc+0xf2>
+  3a:	86290913          	addi	s2,s2,-1950 # 898 <malloc+0xf2>
   3e:	854a                	mv	a0,s2
   40:	00000097          	auipc	ra,0x0
-  44:	69e080e7          	jalr	1694(ra) # 6de <printf>
+  44:	6ae080e7          	jalr	1710(ra) # 6ee <printf>
     pid = fork();
   48:	00000097          	auipc	ra,0x0
   4c:	314080e7          	jalr	788(ra) # 35c <fork>
@@ -73,9 +73,9 @@
   66:	fe0559e3          	bgez	a0,58 <main+0x58>
         printf("init: wait returned an error\n");
   6a:	00001517          	auipc	a0,0x1
-  6e:	86e50513          	addi	a0,a0,-1938 # 8d8 <malloc+0x142>
+  6e:	87e50513          	addi	a0,a0,-1922 # 8e8 <malloc+0x142>
   72:	00000097          	auipc	ra,0x0
-  76:	66c080e7          	jalr	1644(ra) # 6de <printf>
+  76:	67c080e7          	jalr	1660(ra) # 6ee <printf>
         exit(1);
   7a:	4505                	li	a0,1
   7c:	00000097          	auipc	ra,0x0
@@ -83,38 +83,38 @@
     mknod("console", CONSOLE, 0);
   84:	4601                	li	a2,0
   86:	4585                	li	a1,1
-  88:	00000517          	auipc	a0,0x0
-  8c:	7f850513          	addi	a0,a0,2040 # 880 <malloc+0xea>
+  88:	00001517          	auipc	a0,0x1
+  8c:	80850513          	addi	a0,a0,-2040 # 890 <malloc+0xea>
   90:	00000097          	auipc	ra,0x0
   94:	31c080e7          	jalr	796(ra) # 3ac <mknod>
     open("console", O_RDWR);
   98:	4589                	li	a1,2
   9a:	00000517          	auipc	a0,0x0
-  9e:	7e650513          	addi	a0,a0,2022 # 880 <malloc+0xea>
+  9e:	7f650513          	addi	a0,a0,2038 # 890 <malloc+0xea>
   a2:	00000097          	auipc	ra,0x0
   a6:	302080e7          	jalr	770(ra) # 3a4 <open>
   aa:	bfa5                	j	22 <main+0x22>
       printf("init: fork failed\n");
-  ac:	00000517          	auipc	a0,0x0
-  b0:	7f450513          	addi	a0,a0,2036 # 8a0 <malloc+0x10a>
+  ac:	00001517          	auipc	a0,0x1
+  b0:	80450513          	addi	a0,a0,-2044 # 8b0 <malloc+0x10a>
   b4:	00000097          	auipc	ra,0x0
-  b8:	62a080e7          	jalr	1578(ra) # 6de <printf>
+  b8:	63a080e7          	jalr	1594(ra) # 6ee <printf>
       exit(1);
   bc:	4505                	li	a0,1
   be:	00000097          	auipc	ra,0x0
   c2:	2a6080e7          	jalr	678(ra) # 364 <exit>
       exec("sh", argv);
   c6:	00001597          	auipc	a1,0x1
-  ca:	8aa58593          	addi	a1,a1,-1878 # 970 <argv>
+  ca:	8ba58593          	addi	a1,a1,-1862 # 980 <argv>
   ce:	00000517          	auipc	a0,0x0
-  d2:	7ea50513          	addi	a0,a0,2026 # 8b8 <malloc+0x122>
+  d2:	7fa50513          	addi	a0,a0,2042 # 8c8 <malloc+0x122>
   d6:	00000097          	auipc	ra,0x0
   da:	2c6080e7          	jalr	710(ra) # 39c <exec>
       printf("init: exec sh failed\n");
   de:	00000517          	auipc	a0,0x0
-  e2:	7e250513          	addi	a0,a0,2018 # 8c0 <malloc+0x12a>
+  e2:	7f250513          	addi	a0,a0,2034 # 8d0 <malloc+0x12a>
   e6:	00000097          	auipc	ra,0x0
-  ea:	5f8080e7          	jalr	1528(ra) # 6de <printf>
+  ea:	608080e7          	jalr	1544(ra) # 6ee <printf>
       exit(1);
   ee:	4505                	li	a0,1
   f0:	00000097          	auipc	ra,0x0
@@ -751,632 +751,652 @@
  ret
  402:	8082                	ret
 
-0000000000000404 <putc>:
+0000000000000404 <trace>:
+.global trace
+trace:
+ li a7, SYS_trace
+ 404:	48d9                	li	a7,22
+ ecall
+ 406:	00000073          	ecall
+ ret
+ 40a:	8082                	ret
+
+000000000000040c <sysinfo>:
+.global sysinfo
+sysinfo:
+ li a7, SYS_sysinfo
+ 40c:	48dd                	li	a7,23
+ ecall
+ 40e:	00000073          	ecall
+ ret
+ 412:	8082                	ret
+
+0000000000000414 <putc>:
 
 static char digits[] = "0123456789ABCDEF";
 
 static void
 putc(int fd, char c)
 {
- 404:	1101                	addi	sp,sp,-32
- 406:	ec06                	sd	ra,24(sp)
- 408:	e822                	sd	s0,16(sp)
- 40a:	1000                	addi	s0,sp,32
- 40c:	feb407a3          	sb	a1,-17(s0)
+ 414:	1101                	addi	sp,sp,-32
+ 416:	ec06                	sd	ra,24(sp)
+ 418:	e822                	sd	s0,16(sp)
+ 41a:	1000                	addi	s0,sp,32
+ 41c:	feb407a3          	sb	a1,-17(s0)
   write(fd, &c, 1);
- 410:	4605                	li	a2,1
- 412:	fef40593          	addi	a1,s0,-17
- 416:	00000097          	auipc	ra,0x0
- 41a:	f6e080e7          	jalr	-146(ra) # 384 <write>
+ 420:	4605                	li	a2,1
+ 422:	fef40593          	addi	a1,s0,-17
+ 426:	00000097          	auipc	ra,0x0
+ 42a:	f5e080e7          	jalr	-162(ra) # 384 <write>
 }
- 41e:	60e2                	ld	ra,24(sp)
- 420:	6442                	ld	s0,16(sp)
- 422:	6105                	addi	sp,sp,32
- 424:	8082                	ret
+ 42e:	60e2                	ld	ra,24(sp)
+ 430:	6442                	ld	s0,16(sp)
+ 432:	6105                	addi	sp,sp,32
+ 434:	8082                	ret
 
-0000000000000426 <printint>:
+0000000000000436 <printint>:
 
 static void
 printint(int fd, int xx, int base, int sgn)
 {
- 426:	7139                	addi	sp,sp,-64
- 428:	fc06                	sd	ra,56(sp)
- 42a:	f822                	sd	s0,48(sp)
- 42c:	f426                	sd	s1,40(sp)
- 42e:	f04a                	sd	s2,32(sp)
- 430:	ec4e                	sd	s3,24(sp)
- 432:	0080                	addi	s0,sp,64
- 434:	84aa                	mv	s1,a0
+ 436:	7139                	addi	sp,sp,-64
+ 438:	fc06                	sd	ra,56(sp)
+ 43a:	f822                	sd	s0,48(sp)
+ 43c:	f426                	sd	s1,40(sp)
+ 43e:	f04a                	sd	s2,32(sp)
+ 440:	ec4e                	sd	s3,24(sp)
+ 442:	0080                	addi	s0,sp,64
+ 444:	84aa                	mv	s1,a0
   char buf[16];
   int i, neg;
   uint x;
 
   neg = 0;
   if(sgn && xx < 0){
- 436:	c299                	beqz	a3,43c <printint+0x16>
- 438:	0805c963          	bltz	a1,4ca <printint+0xa4>
+ 446:	c299                	beqz	a3,44c <printint+0x16>
+ 448:	0805c963          	bltz	a1,4da <printint+0xa4>
     neg = 1;
     x = -xx;
   } else {
     x = xx;
- 43c:	2581                	sext.w	a1,a1
+ 44c:	2581                	sext.w	a1,a1
   neg = 0;
- 43e:	4881                	li	a7,0
- 440:	fc040693          	addi	a3,s0,-64
+ 44e:	4881                	li	a7,0
+ 450:	fc040693          	addi	a3,s0,-64
   }
 
   i = 0;
- 444:	4701                	li	a4,0
+ 454:	4701                	li	a4,0
   do{
     buf[i++] = digits[x % base];
- 446:	2601                	sext.w	a2,a2
- 448:	00000517          	auipc	a0,0x0
- 44c:	51050513          	addi	a0,a0,1296 # 958 <digits>
- 450:	883a                	mv	a6,a4
- 452:	2705                	addiw	a4,a4,1
- 454:	02c5f7bb          	remuw	a5,a1,a2
- 458:	1782                	slli	a5,a5,0x20
- 45a:	9381                	srli	a5,a5,0x20
- 45c:	97aa                	add	a5,a5,a0
- 45e:	0007c783          	lbu	a5,0(a5)
- 462:	00f68023          	sb	a5,0(a3)
+ 456:	2601                	sext.w	a2,a2
+ 458:	00000517          	auipc	a0,0x0
+ 45c:	51050513          	addi	a0,a0,1296 # 968 <digits>
+ 460:	883a                	mv	a6,a4
+ 462:	2705                	addiw	a4,a4,1
+ 464:	02c5f7bb          	remuw	a5,a1,a2
+ 468:	1782                	slli	a5,a5,0x20
+ 46a:	9381                	srli	a5,a5,0x20
+ 46c:	97aa                	add	a5,a5,a0
+ 46e:	0007c783          	lbu	a5,0(a5)
+ 472:	00f68023          	sb	a5,0(a3)
   }while((x /= base) != 0);
- 466:	0005879b          	sext.w	a5,a1
- 46a:	02c5d5bb          	divuw	a1,a1,a2
- 46e:	0685                	addi	a3,a3,1
- 470:	fec7f0e3          	bgeu	a5,a2,450 <printint+0x2a>
+ 476:	0005879b          	sext.w	a5,a1
+ 47a:	02c5d5bb          	divuw	a1,a1,a2
+ 47e:	0685                	addi	a3,a3,1
+ 480:	fec7f0e3          	bgeu	a5,a2,460 <printint+0x2a>
   if(neg)
- 474:	00088c63          	beqz	a7,48c <printint+0x66>
+ 484:	00088c63          	beqz	a7,49c <printint+0x66>
     buf[i++] = '-';
- 478:	fd070793          	addi	a5,a4,-48
- 47c:	00878733          	add	a4,a5,s0
- 480:	02d00793          	li	a5,45
- 484:	fef70823          	sb	a5,-16(a4)
- 488:	0028071b          	addiw	a4,a6,2
+ 488:	fd070793          	addi	a5,a4,-48
+ 48c:	00878733          	add	a4,a5,s0
+ 490:	02d00793          	li	a5,45
+ 494:	fef70823          	sb	a5,-16(a4)
+ 498:	0028071b          	addiw	a4,a6,2
 
   while(--i >= 0)
- 48c:	02e05863          	blez	a4,4bc <printint+0x96>
- 490:	fc040793          	addi	a5,s0,-64
- 494:	00e78933          	add	s2,a5,a4
- 498:	fff78993          	addi	s3,a5,-1
- 49c:	99ba                	add	s3,s3,a4
- 49e:	377d                	addiw	a4,a4,-1
- 4a0:	1702                	slli	a4,a4,0x20
- 4a2:	9301                	srli	a4,a4,0x20
- 4a4:	40e989b3          	sub	s3,s3,a4
+ 49c:	02e05863          	blez	a4,4cc <printint+0x96>
+ 4a0:	fc040793          	addi	a5,s0,-64
+ 4a4:	00e78933          	add	s2,a5,a4
+ 4a8:	fff78993          	addi	s3,a5,-1
+ 4ac:	99ba                	add	s3,s3,a4
+ 4ae:	377d                	addiw	a4,a4,-1
+ 4b0:	1702                	slli	a4,a4,0x20
+ 4b2:	9301                	srli	a4,a4,0x20
+ 4b4:	40e989b3          	sub	s3,s3,a4
     putc(fd, buf[i]);
- 4a8:	fff94583          	lbu	a1,-1(s2)
- 4ac:	8526                	mv	a0,s1
- 4ae:	00000097          	auipc	ra,0x0
- 4b2:	f56080e7          	jalr	-170(ra) # 404 <putc>
+ 4b8:	fff94583          	lbu	a1,-1(s2)
+ 4bc:	8526                	mv	a0,s1
+ 4be:	00000097          	auipc	ra,0x0
+ 4c2:	f56080e7          	jalr	-170(ra) # 414 <putc>
   while(--i >= 0)
- 4b6:	197d                	addi	s2,s2,-1
- 4b8:	ff3918e3          	bne	s2,s3,4a8 <printint+0x82>
+ 4c6:	197d                	addi	s2,s2,-1
+ 4c8:	ff3918e3          	bne	s2,s3,4b8 <printint+0x82>
 }
- 4bc:	70e2                	ld	ra,56(sp)
- 4be:	7442                	ld	s0,48(sp)
- 4c0:	74a2                	ld	s1,40(sp)
- 4c2:	7902                	ld	s2,32(sp)
- 4c4:	69e2                	ld	s3,24(sp)
- 4c6:	6121                	addi	sp,sp,64
- 4c8:	8082                	ret
+ 4cc:	70e2                	ld	ra,56(sp)
+ 4ce:	7442                	ld	s0,48(sp)
+ 4d0:	74a2                	ld	s1,40(sp)
+ 4d2:	7902                	ld	s2,32(sp)
+ 4d4:	69e2                	ld	s3,24(sp)
+ 4d6:	6121                	addi	sp,sp,64
+ 4d8:	8082                	ret
     x = -xx;
- 4ca:	40b005bb          	negw	a1,a1
+ 4da:	40b005bb          	negw	a1,a1
     neg = 1;
- 4ce:	4885                	li	a7,1
+ 4de:	4885                	li	a7,1
     x = -xx;
- 4d0:	bf85                	j	440 <printint+0x1a>
+ 4e0:	bf85                	j	450 <printint+0x1a>
 
-00000000000004d2 <vprintf>:
+00000000000004e2 <vprintf>:
 }
 
 // Print to the given fd. Only understands %d, %x, %p, %s.
 void
 vprintf(int fd, const char *fmt, va_list ap)
 {
- 4d2:	7119                	addi	sp,sp,-128
- 4d4:	fc86                	sd	ra,120(sp)
- 4d6:	f8a2                	sd	s0,112(sp)
- 4d8:	f4a6                	sd	s1,104(sp)
- 4da:	f0ca                	sd	s2,96(sp)
- 4dc:	ecce                	sd	s3,88(sp)
- 4de:	e8d2                	sd	s4,80(sp)
- 4e0:	e4d6                	sd	s5,72(sp)
- 4e2:	e0da                	sd	s6,64(sp)
- 4e4:	fc5e                	sd	s7,56(sp)
- 4e6:	f862                	sd	s8,48(sp)
- 4e8:	f466                	sd	s9,40(sp)
- 4ea:	f06a                	sd	s10,32(sp)
- 4ec:	ec6e                	sd	s11,24(sp)
- 4ee:	0100                	addi	s0,sp,128
+ 4e2:	7119                	addi	sp,sp,-128
+ 4e4:	fc86                	sd	ra,120(sp)
+ 4e6:	f8a2                	sd	s0,112(sp)
+ 4e8:	f4a6                	sd	s1,104(sp)
+ 4ea:	f0ca                	sd	s2,96(sp)
+ 4ec:	ecce                	sd	s3,88(sp)
+ 4ee:	e8d2                	sd	s4,80(sp)
+ 4f0:	e4d6                	sd	s5,72(sp)
+ 4f2:	e0da                	sd	s6,64(sp)
+ 4f4:	fc5e                	sd	s7,56(sp)
+ 4f6:	f862                	sd	s8,48(sp)
+ 4f8:	f466                	sd	s9,40(sp)
+ 4fa:	f06a                	sd	s10,32(sp)
+ 4fc:	ec6e                	sd	s11,24(sp)
+ 4fe:	0100                	addi	s0,sp,128
   char *s;
   int c, i, state;
 
   state = 0;
   for(i = 0; fmt[i]; i++){
- 4f0:	0005c903          	lbu	s2,0(a1)
- 4f4:	18090f63          	beqz	s2,692 <vprintf+0x1c0>
- 4f8:	8aaa                	mv	s5,a0
- 4fa:	8b32                	mv	s6,a2
- 4fc:	00158493          	addi	s1,a1,1
+ 500:	0005c903          	lbu	s2,0(a1)
+ 504:	18090f63          	beqz	s2,6a2 <vprintf+0x1c0>
+ 508:	8aaa                	mv	s5,a0
+ 50a:	8b32                	mv	s6,a2
+ 50c:	00158493          	addi	s1,a1,1
   state = 0;
- 500:	4981                	li	s3,0
+ 510:	4981                	li	s3,0
       if(c == '%'){
         state = '%';
       } else {
         putc(fd, c);
       }
     } else if(state == '%'){
- 502:	02500a13          	li	s4,37
- 506:	4c55                	li	s8,21
- 508:	00000c97          	auipc	s9,0x0
- 50c:	3f8c8c93          	addi	s9,s9,1016 # 900 <malloc+0x16a>
+ 512:	02500a13          	li	s4,37
+ 516:	4c55                	li	s8,21
+ 518:	00000c97          	auipc	s9,0x0
+ 51c:	3f8c8c93          	addi	s9,s9,1016 # 910 <malloc+0x16a>
         printptr(fd, va_arg(ap, uint64));
       } else if(c == 's'){
         s = va_arg(ap, char*);
         if(s == 0)
           s = "(null)";
         while(*s != 0){
- 510:	02800d93          	li	s11,40
+ 520:	02800d93          	li	s11,40
   putc(fd, 'x');
- 514:	4d41                	li	s10,16
+ 524:	4d41                	li	s10,16
     putc(fd, digits[x >> (sizeof(uint64) * 8 - 4)]);
- 516:	00000b97          	auipc	s7,0x0
- 51a:	442b8b93          	addi	s7,s7,1090 # 958 <digits>
- 51e:	a839                	j	53c <vprintf+0x6a>
+ 526:	00000b97          	auipc	s7,0x0
+ 52a:	442b8b93          	addi	s7,s7,1090 # 968 <digits>
+ 52e:	a839                	j	54c <vprintf+0x6a>
         putc(fd, c);
- 520:	85ca                	mv	a1,s2
- 522:	8556                	mv	a0,s5
- 524:	00000097          	auipc	ra,0x0
- 528:	ee0080e7          	jalr	-288(ra) # 404 <putc>
- 52c:	a019                	j	532 <vprintf+0x60>
+ 530:	85ca                	mv	a1,s2
+ 532:	8556                	mv	a0,s5
+ 534:	00000097          	auipc	ra,0x0
+ 538:	ee0080e7          	jalr	-288(ra) # 414 <putc>
+ 53c:	a019                	j	542 <vprintf+0x60>
     } else if(state == '%'){
- 52e:	01498d63          	beq	s3,s4,548 <vprintf+0x76>
+ 53e:	01498d63          	beq	s3,s4,558 <vprintf+0x76>
   for(i = 0; fmt[i]; i++){
- 532:	0485                	addi	s1,s1,1
- 534:	fff4c903          	lbu	s2,-1(s1)
- 538:	14090d63          	beqz	s2,692 <vprintf+0x1c0>
+ 542:	0485                	addi	s1,s1,1
+ 544:	fff4c903          	lbu	s2,-1(s1)
+ 548:	14090d63          	beqz	s2,6a2 <vprintf+0x1c0>
     if(state == 0){
- 53c:	fe0999e3          	bnez	s3,52e <vprintf+0x5c>
+ 54c:	fe0999e3          	bnez	s3,53e <vprintf+0x5c>
       if(c == '%'){
- 540:	ff4910e3          	bne	s2,s4,520 <vprintf+0x4e>
+ 550:	ff4910e3          	bne	s2,s4,530 <vprintf+0x4e>
         state = '%';
- 544:	89d2                	mv	s3,s4
- 546:	b7f5                	j	532 <vprintf+0x60>
+ 554:	89d2                	mv	s3,s4
+ 556:	b7f5                	j	542 <vprintf+0x60>
       if(c == 'd'){
- 548:	11490c63          	beq	s2,s4,660 <vprintf+0x18e>
- 54c:	f9d9079b          	addiw	a5,s2,-99
- 550:	0ff7f793          	zext.b	a5,a5
- 554:	10fc6e63          	bltu	s8,a5,670 <vprintf+0x19e>
- 558:	f9d9079b          	addiw	a5,s2,-99
- 55c:	0ff7f713          	zext.b	a4,a5
- 560:	10ec6863          	bltu	s8,a4,670 <vprintf+0x19e>
- 564:	00271793          	slli	a5,a4,0x2
- 568:	97e6                	add	a5,a5,s9
- 56a:	439c                	lw	a5,0(a5)
- 56c:	97e6                	add	a5,a5,s9
- 56e:	8782                	jr	a5
+ 558:	11490c63          	beq	s2,s4,670 <vprintf+0x18e>
+ 55c:	f9d9079b          	addiw	a5,s2,-99
+ 560:	0ff7f793          	zext.b	a5,a5
+ 564:	10fc6e63          	bltu	s8,a5,680 <vprintf+0x19e>
+ 568:	f9d9079b          	addiw	a5,s2,-99
+ 56c:	0ff7f713          	zext.b	a4,a5
+ 570:	10ec6863          	bltu	s8,a4,680 <vprintf+0x19e>
+ 574:	00271793          	slli	a5,a4,0x2
+ 578:	97e6                	add	a5,a5,s9
+ 57a:	439c                	lw	a5,0(a5)
+ 57c:	97e6                	add	a5,a5,s9
+ 57e:	8782                	jr	a5
         printint(fd, va_arg(ap, int), 10, 1);
- 570:	008b0913          	addi	s2,s6,8
- 574:	4685                	li	a3,1
- 576:	4629                	li	a2,10
- 578:	000b2583          	lw	a1,0(s6)
- 57c:	8556                	mv	a0,s5
- 57e:	00000097          	auipc	ra,0x0
- 582:	ea8080e7          	jalr	-344(ra) # 426 <printint>
- 586:	8b4a                	mv	s6,s2
+ 580:	008b0913          	addi	s2,s6,8
+ 584:	4685                	li	a3,1
+ 586:	4629                	li	a2,10
+ 588:	000b2583          	lw	a1,0(s6)
+ 58c:	8556                	mv	a0,s5
+ 58e:	00000097          	auipc	ra,0x0
+ 592:	ea8080e7          	jalr	-344(ra) # 436 <printint>
+ 596:	8b4a                	mv	s6,s2
       } else {
         // Unknown % sequence.  Print it to draw attention.
         putc(fd, '%');
         putc(fd, c);
       }
       state = 0;
- 588:	4981                	li	s3,0
- 58a:	b765                	j	532 <vprintf+0x60>
+ 598:	4981                	li	s3,0
+ 59a:	b765                	j	542 <vprintf+0x60>
         printint(fd, va_arg(ap, uint64), 10, 0);
- 58c:	008b0913          	addi	s2,s6,8
- 590:	4681                	li	a3,0
- 592:	4629                	li	a2,10
- 594:	000b2583          	lw	a1,0(s6)
- 598:	8556                	mv	a0,s5
- 59a:	00000097          	auipc	ra,0x0
- 59e:	e8c080e7          	jalr	-372(ra) # 426 <printint>
- 5a2:	8b4a                	mv	s6,s2
+ 59c:	008b0913          	addi	s2,s6,8
+ 5a0:	4681                	li	a3,0
+ 5a2:	4629                	li	a2,10
+ 5a4:	000b2583          	lw	a1,0(s6)
+ 5a8:	8556                	mv	a0,s5
+ 5aa:	00000097          	auipc	ra,0x0
+ 5ae:	e8c080e7          	jalr	-372(ra) # 436 <printint>
+ 5b2:	8b4a                	mv	s6,s2
       state = 0;
- 5a4:	4981                	li	s3,0
- 5a6:	b771                	j	532 <vprintf+0x60>
+ 5b4:	4981                	li	s3,0
+ 5b6:	b771                	j	542 <vprintf+0x60>
         printint(fd, va_arg(ap, int), 16, 0);
- 5a8:	008b0913          	addi	s2,s6,8
- 5ac:	4681                	li	a3,0
- 5ae:	866a                	mv	a2,s10
- 5b0:	000b2583          	lw	a1,0(s6)
- 5b4:	8556                	mv	a0,s5
- 5b6:	00000097          	auipc	ra,0x0
- 5ba:	e70080e7          	jalr	-400(ra) # 426 <printint>
- 5be:	8b4a                	mv	s6,s2
+ 5b8:	008b0913          	addi	s2,s6,8
+ 5bc:	4681                	li	a3,0
+ 5be:	866a                	mv	a2,s10
+ 5c0:	000b2583          	lw	a1,0(s6)
+ 5c4:	8556                	mv	a0,s5
+ 5c6:	00000097          	auipc	ra,0x0
+ 5ca:	e70080e7          	jalr	-400(ra) # 436 <printint>
+ 5ce:	8b4a                	mv	s6,s2
       state = 0;
- 5c0:	4981                	li	s3,0
- 5c2:	bf85                	j	532 <vprintf+0x60>
+ 5d0:	4981                	li	s3,0
+ 5d2:	bf85                	j	542 <vprintf+0x60>
         printptr(fd, va_arg(ap, uint64));
- 5c4:	008b0793          	addi	a5,s6,8
- 5c8:	f8f43423          	sd	a5,-120(s0)
- 5cc:	000b3983          	ld	s3,0(s6)
+ 5d4:	008b0793          	addi	a5,s6,8
+ 5d8:	f8f43423          	sd	a5,-120(s0)
+ 5dc:	000b3983          	ld	s3,0(s6)
   putc(fd, '0');
- 5d0:	03000593          	li	a1,48
- 5d4:	8556                	mv	a0,s5
- 5d6:	00000097          	auipc	ra,0x0
- 5da:	e2e080e7          	jalr	-466(ra) # 404 <putc>
+ 5e0:	03000593          	li	a1,48
+ 5e4:	8556                	mv	a0,s5
+ 5e6:	00000097          	auipc	ra,0x0
+ 5ea:	e2e080e7          	jalr	-466(ra) # 414 <putc>
   putc(fd, 'x');
- 5de:	07800593          	li	a1,120
- 5e2:	8556                	mv	a0,s5
- 5e4:	00000097          	auipc	ra,0x0
- 5e8:	e20080e7          	jalr	-480(ra) # 404 <putc>
- 5ec:	896a                	mv	s2,s10
+ 5ee:	07800593          	li	a1,120
+ 5f2:	8556                	mv	a0,s5
+ 5f4:	00000097          	auipc	ra,0x0
+ 5f8:	e20080e7          	jalr	-480(ra) # 414 <putc>
+ 5fc:	896a                	mv	s2,s10
     putc(fd, digits[x >> (sizeof(uint64) * 8 - 4)]);
- 5ee:	03c9d793          	srli	a5,s3,0x3c
- 5f2:	97de                	add	a5,a5,s7
- 5f4:	0007c583          	lbu	a1,0(a5)
- 5f8:	8556                	mv	a0,s5
- 5fa:	00000097          	auipc	ra,0x0
- 5fe:	e0a080e7          	jalr	-502(ra) # 404 <putc>
+ 5fe:	03c9d793          	srli	a5,s3,0x3c
+ 602:	97de                	add	a5,a5,s7
+ 604:	0007c583          	lbu	a1,0(a5)
+ 608:	8556                	mv	a0,s5
+ 60a:	00000097          	auipc	ra,0x0
+ 60e:	e0a080e7          	jalr	-502(ra) # 414 <putc>
   for (i = 0; i < (sizeof(uint64) * 2); i++, x <<= 4)
- 602:	0992                	slli	s3,s3,0x4
- 604:	397d                	addiw	s2,s2,-1
- 606:	fe0914e3          	bnez	s2,5ee <vprintf+0x11c>
+ 612:	0992                	slli	s3,s3,0x4
+ 614:	397d                	addiw	s2,s2,-1
+ 616:	fe0914e3          	bnez	s2,5fe <vprintf+0x11c>
         printptr(fd, va_arg(ap, uint64));
- 60a:	f8843b03          	ld	s6,-120(s0)
+ 61a:	f8843b03          	ld	s6,-120(s0)
       state = 0;
- 60e:	4981                	li	s3,0
- 610:	b70d                	j	532 <vprintf+0x60>
+ 61e:	4981                	li	s3,0
+ 620:	b70d                	j	542 <vprintf+0x60>
         s = va_arg(ap, char*);
- 612:	008b0913          	addi	s2,s6,8
- 616:	000b3983          	ld	s3,0(s6)
+ 622:	008b0913          	addi	s2,s6,8
+ 626:	000b3983          	ld	s3,0(s6)
         if(s == 0)
- 61a:	02098163          	beqz	s3,63c <vprintf+0x16a>
+ 62a:	02098163          	beqz	s3,64c <vprintf+0x16a>
         while(*s != 0){
- 61e:	0009c583          	lbu	a1,0(s3)
- 622:	c5ad                	beqz	a1,68c <vprintf+0x1ba>
+ 62e:	0009c583          	lbu	a1,0(s3)
+ 632:	c5ad                	beqz	a1,69c <vprintf+0x1ba>
           putc(fd, *s);
- 624:	8556                	mv	a0,s5
- 626:	00000097          	auipc	ra,0x0
- 62a:	dde080e7          	jalr	-546(ra) # 404 <putc>
+ 634:	8556                	mv	a0,s5
+ 636:	00000097          	auipc	ra,0x0
+ 63a:	dde080e7          	jalr	-546(ra) # 414 <putc>
           s++;
- 62e:	0985                	addi	s3,s3,1
+ 63e:	0985                	addi	s3,s3,1
         while(*s != 0){
- 630:	0009c583          	lbu	a1,0(s3)
- 634:	f9e5                	bnez	a1,624 <vprintf+0x152>
+ 640:	0009c583          	lbu	a1,0(s3)
+ 644:	f9e5                	bnez	a1,634 <vprintf+0x152>
         s = va_arg(ap, char*);
- 636:	8b4a                	mv	s6,s2
+ 646:	8b4a                	mv	s6,s2
       state = 0;
- 638:	4981                	li	s3,0
- 63a:	bde5                	j	532 <vprintf+0x60>
+ 648:	4981                	li	s3,0
+ 64a:	bde5                	j	542 <vprintf+0x60>
           s = "(null)";
- 63c:	00000997          	auipc	s3,0x0
- 640:	2bc98993          	addi	s3,s3,700 # 8f8 <malloc+0x162>
+ 64c:	00000997          	auipc	s3,0x0
+ 650:	2bc98993          	addi	s3,s3,700 # 908 <malloc+0x162>
         while(*s != 0){
- 644:	85ee                	mv	a1,s11
- 646:	bff9                	j	624 <vprintf+0x152>
+ 654:	85ee                	mv	a1,s11
+ 656:	bff9                	j	634 <vprintf+0x152>
         putc(fd, va_arg(ap, uint));
- 648:	008b0913          	addi	s2,s6,8
- 64c:	000b4583          	lbu	a1,0(s6)
- 650:	8556                	mv	a0,s5
- 652:	00000097          	auipc	ra,0x0
- 656:	db2080e7          	jalr	-590(ra) # 404 <putc>
- 65a:	8b4a                	mv	s6,s2
-      state = 0;
- 65c:	4981                	li	s3,0
- 65e:	bdd1                	j	532 <vprintf+0x60>
-        putc(fd, c);
- 660:	85d2                	mv	a1,s4
- 662:	8556                	mv	a0,s5
- 664:	00000097          	auipc	ra,0x0
- 668:	da0080e7          	jalr	-608(ra) # 404 <putc>
+ 658:	008b0913          	addi	s2,s6,8
+ 65c:	000b4583          	lbu	a1,0(s6)
+ 660:	8556                	mv	a0,s5
+ 662:	00000097          	auipc	ra,0x0
+ 666:	db2080e7          	jalr	-590(ra) # 414 <putc>
+ 66a:	8b4a                	mv	s6,s2
       state = 0;
  66c:	4981                	li	s3,0
- 66e:	b5d1                	j	532 <vprintf+0x60>
-        putc(fd, '%');
+ 66e:	bdd1                	j	542 <vprintf+0x60>
+        putc(fd, c);
  670:	85d2                	mv	a1,s4
  672:	8556                	mv	a0,s5
  674:	00000097          	auipc	ra,0x0
- 678:	d90080e7          	jalr	-624(ra) # 404 <putc>
+ 678:	da0080e7          	jalr	-608(ra) # 414 <putc>
+      state = 0;
+ 67c:	4981                	li	s3,0
+ 67e:	b5d1                	j	542 <vprintf+0x60>
+        putc(fd, '%');
+ 680:	85d2                	mv	a1,s4
+ 682:	8556                	mv	a0,s5
+ 684:	00000097          	auipc	ra,0x0
+ 688:	d90080e7          	jalr	-624(ra) # 414 <putc>
         putc(fd, c);
- 67c:	85ca                	mv	a1,s2
- 67e:	8556                	mv	a0,s5
- 680:	00000097          	auipc	ra,0x0
- 684:	d84080e7          	jalr	-636(ra) # 404 <putc>
+ 68c:	85ca                	mv	a1,s2
+ 68e:	8556                	mv	a0,s5
+ 690:	00000097          	auipc	ra,0x0
+ 694:	d84080e7          	jalr	-636(ra) # 414 <putc>
       state = 0;
- 688:	4981                	li	s3,0
- 68a:	b565                	j	532 <vprintf+0x60>
+ 698:	4981                	li	s3,0
+ 69a:	b565                	j	542 <vprintf+0x60>
         s = va_arg(ap, char*);
- 68c:	8b4a                	mv	s6,s2
+ 69c:	8b4a                	mv	s6,s2
       state = 0;
- 68e:	4981                	li	s3,0
- 690:	b54d                	j	532 <vprintf+0x60>
+ 69e:	4981                	li	s3,0
+ 6a0:	b54d                	j	542 <vprintf+0x60>
     }
   }
 }
- 692:	70e6                	ld	ra,120(sp)
- 694:	7446                	ld	s0,112(sp)
- 696:	74a6                	ld	s1,104(sp)
- 698:	7906                	ld	s2,96(sp)
- 69a:	69e6                	ld	s3,88(sp)
- 69c:	6a46                	ld	s4,80(sp)
- 69e:	6aa6                	ld	s5,72(sp)
- 6a0:	6b06                	ld	s6,64(sp)
- 6a2:	7be2                	ld	s7,56(sp)
- 6a4:	7c42                	ld	s8,48(sp)
- 6a6:	7ca2                	ld	s9,40(sp)
- 6a8:	7d02                	ld	s10,32(sp)
- 6aa:	6de2                	ld	s11,24(sp)
- 6ac:	6109                	addi	sp,sp,128
- 6ae:	8082                	ret
+ 6a2:	70e6                	ld	ra,120(sp)
+ 6a4:	7446                	ld	s0,112(sp)
+ 6a6:	74a6                	ld	s1,104(sp)
+ 6a8:	7906                	ld	s2,96(sp)
+ 6aa:	69e6                	ld	s3,88(sp)
+ 6ac:	6a46                	ld	s4,80(sp)
+ 6ae:	6aa6                	ld	s5,72(sp)
+ 6b0:	6b06                	ld	s6,64(sp)
+ 6b2:	7be2                	ld	s7,56(sp)
+ 6b4:	7c42                	ld	s8,48(sp)
+ 6b6:	7ca2                	ld	s9,40(sp)
+ 6b8:	7d02                	ld	s10,32(sp)
+ 6ba:	6de2                	ld	s11,24(sp)
+ 6bc:	6109                	addi	sp,sp,128
+ 6be:	8082                	ret
 
-00000000000006b0 <fprintf>:
+00000000000006c0 <fprintf>:
 
 void
 fprintf(int fd, const char *fmt, ...)
 {
- 6b0:	715d                	addi	sp,sp,-80
- 6b2:	ec06                	sd	ra,24(sp)
- 6b4:	e822                	sd	s0,16(sp)
- 6b6:	1000                	addi	s0,sp,32
- 6b8:	e010                	sd	a2,0(s0)
- 6ba:	e414                	sd	a3,8(s0)
- 6bc:	e818                	sd	a4,16(s0)
- 6be:	ec1c                	sd	a5,24(s0)
- 6c0:	03043023          	sd	a6,32(s0)
- 6c4:	03143423          	sd	a7,40(s0)
+ 6c0:	715d                	addi	sp,sp,-80
+ 6c2:	ec06                	sd	ra,24(sp)
+ 6c4:	e822                	sd	s0,16(sp)
+ 6c6:	1000                	addi	s0,sp,32
+ 6c8:	e010                	sd	a2,0(s0)
+ 6ca:	e414                	sd	a3,8(s0)
+ 6cc:	e818                	sd	a4,16(s0)
+ 6ce:	ec1c                	sd	a5,24(s0)
+ 6d0:	03043023          	sd	a6,32(s0)
+ 6d4:	03143423          	sd	a7,40(s0)
   va_list ap;
 
   va_start(ap, fmt);
- 6c8:	fe843423          	sd	s0,-24(s0)
+ 6d8:	fe843423          	sd	s0,-24(s0)
   vprintf(fd, fmt, ap);
- 6cc:	8622                	mv	a2,s0
- 6ce:	00000097          	auipc	ra,0x0
- 6d2:	e04080e7          	jalr	-508(ra) # 4d2 <vprintf>
+ 6dc:	8622                	mv	a2,s0
+ 6de:	00000097          	auipc	ra,0x0
+ 6e2:	e04080e7          	jalr	-508(ra) # 4e2 <vprintf>
 }
- 6d6:	60e2                	ld	ra,24(sp)
- 6d8:	6442                	ld	s0,16(sp)
- 6da:	6161                	addi	sp,sp,80
- 6dc:	8082                	ret
+ 6e6:	60e2                	ld	ra,24(sp)
+ 6e8:	6442                	ld	s0,16(sp)
+ 6ea:	6161                	addi	sp,sp,80
+ 6ec:	8082                	ret
 
-00000000000006de <printf>:
+00000000000006ee <printf>:
 
 void
 printf(const char *fmt, ...)
 {
- 6de:	711d                	addi	sp,sp,-96
- 6e0:	ec06                	sd	ra,24(sp)
- 6e2:	e822                	sd	s0,16(sp)
- 6e4:	1000                	addi	s0,sp,32
- 6e6:	e40c                	sd	a1,8(s0)
- 6e8:	e810                	sd	a2,16(s0)
- 6ea:	ec14                	sd	a3,24(s0)
- 6ec:	f018                	sd	a4,32(s0)
- 6ee:	f41c                	sd	a5,40(s0)
- 6f0:	03043823          	sd	a6,48(s0)
- 6f4:	03143c23          	sd	a7,56(s0)
+ 6ee:	711d                	addi	sp,sp,-96
+ 6f0:	ec06                	sd	ra,24(sp)
+ 6f2:	e822                	sd	s0,16(sp)
+ 6f4:	1000                	addi	s0,sp,32
+ 6f6:	e40c                	sd	a1,8(s0)
+ 6f8:	e810                	sd	a2,16(s0)
+ 6fa:	ec14                	sd	a3,24(s0)
+ 6fc:	f018                	sd	a4,32(s0)
+ 6fe:	f41c                	sd	a5,40(s0)
+ 700:	03043823          	sd	a6,48(s0)
+ 704:	03143c23          	sd	a7,56(s0)
   va_list ap;
 
   va_start(ap, fmt);
- 6f8:	00840613          	addi	a2,s0,8
- 6fc:	fec43423          	sd	a2,-24(s0)
+ 708:	00840613          	addi	a2,s0,8
+ 70c:	fec43423          	sd	a2,-24(s0)
   vprintf(1, fmt, ap);
- 700:	85aa                	mv	a1,a0
- 702:	4505                	li	a0,1
- 704:	00000097          	auipc	ra,0x0
- 708:	dce080e7          	jalr	-562(ra) # 4d2 <vprintf>
+ 710:	85aa                	mv	a1,a0
+ 712:	4505                	li	a0,1
+ 714:	00000097          	auipc	ra,0x0
+ 718:	dce080e7          	jalr	-562(ra) # 4e2 <vprintf>
 }
- 70c:	60e2                	ld	ra,24(sp)
- 70e:	6442                	ld	s0,16(sp)
- 710:	6125                	addi	sp,sp,96
- 712:	8082                	ret
+ 71c:	60e2                	ld	ra,24(sp)
+ 71e:	6442                	ld	s0,16(sp)
+ 720:	6125                	addi	sp,sp,96
+ 722:	8082                	ret
 
-0000000000000714 <free>:
+0000000000000724 <free>:
 static Header base;
 static Header *freep;
 
 void
 free(void *ap)
 {
- 714:	1141                	addi	sp,sp,-16
- 716:	e422                	sd	s0,8(sp)
- 718:	0800                	addi	s0,sp,16
+ 724:	1141                	addi	sp,sp,-16
+ 726:	e422                	sd	s0,8(sp)
+ 728:	0800                	addi	s0,sp,16
   Header *bp, *p;
 
   bp = (Header*)ap - 1;
- 71a:	ff050693          	addi	a3,a0,-16
+ 72a:	ff050693          	addi	a3,a0,-16
   for(p = freep; !(bp > p && bp < p->s.ptr); p = p->s.ptr)
- 71e:	00000797          	auipc	a5,0x0
- 722:	2627b783          	ld	a5,610(a5) # 980 <freep>
- 726:	a02d                	j	750 <free+0x3c>
+ 72e:	00000797          	auipc	a5,0x0
+ 732:	2627b783          	ld	a5,610(a5) # 990 <freep>
+ 736:	a02d                	j	760 <free+0x3c>
     if(p >= p->s.ptr && (bp > p || bp < p->s.ptr))
       break;
   if(bp + bp->s.size == p->s.ptr){
     bp->s.size += p->s.ptr->s.size;
- 728:	4618                	lw	a4,8(a2)
- 72a:	9f2d                	addw	a4,a4,a1
- 72c:	fee52c23          	sw	a4,-8(a0)
+ 738:	4618                	lw	a4,8(a2)
+ 73a:	9f2d                	addw	a4,a4,a1
+ 73c:	fee52c23          	sw	a4,-8(a0)
     bp->s.ptr = p->s.ptr->s.ptr;
- 730:	6398                	ld	a4,0(a5)
- 732:	6310                	ld	a2,0(a4)
- 734:	a83d                	j	772 <free+0x5e>
+ 740:	6398                	ld	a4,0(a5)
+ 742:	6310                	ld	a2,0(a4)
+ 744:	a83d                	j	782 <free+0x5e>
   } else
     bp->s.ptr = p->s.ptr;
   if(p + p->s.size == bp){
     p->s.size += bp->s.size;
- 736:	ff852703          	lw	a4,-8(a0)
- 73a:	9f31                	addw	a4,a4,a2
- 73c:	c798                	sw	a4,8(a5)
+ 746:	ff852703          	lw	a4,-8(a0)
+ 74a:	9f31                	addw	a4,a4,a2
+ 74c:	c798                	sw	a4,8(a5)
     p->s.ptr = bp->s.ptr;
- 73e:	ff053683          	ld	a3,-16(a0)
- 742:	a091                	j	786 <free+0x72>
+ 74e:	ff053683          	ld	a3,-16(a0)
+ 752:	a091                	j	796 <free+0x72>
     if(p >= p->s.ptr && (bp > p || bp < p->s.ptr))
- 744:	6398                	ld	a4,0(a5)
- 746:	00e7e463          	bltu	a5,a4,74e <free+0x3a>
- 74a:	00e6ea63          	bltu	a3,a4,75e <free+0x4a>
+ 754:	6398                	ld	a4,0(a5)
+ 756:	00e7e463          	bltu	a5,a4,75e <free+0x3a>
+ 75a:	00e6ea63          	bltu	a3,a4,76e <free+0x4a>
 {
- 74e:	87ba                	mv	a5,a4
+ 75e:	87ba                	mv	a5,a4
   for(p = freep; !(bp > p && bp < p->s.ptr); p = p->s.ptr)
- 750:	fed7fae3          	bgeu	a5,a3,744 <free+0x30>
- 754:	6398                	ld	a4,0(a5)
- 756:	00e6e463          	bltu	a3,a4,75e <free+0x4a>
+ 760:	fed7fae3          	bgeu	a5,a3,754 <free+0x30>
+ 764:	6398                	ld	a4,0(a5)
+ 766:	00e6e463          	bltu	a3,a4,76e <free+0x4a>
     if(p >= p->s.ptr && (bp > p || bp < p->s.ptr))
- 75a:	fee7eae3          	bltu	a5,a4,74e <free+0x3a>
+ 76a:	fee7eae3          	bltu	a5,a4,75e <free+0x3a>
   if(bp + bp->s.size == p->s.ptr){
- 75e:	ff852583          	lw	a1,-8(a0)
- 762:	6390                	ld	a2,0(a5)
- 764:	02059813          	slli	a6,a1,0x20
- 768:	01c85713          	srli	a4,a6,0x1c
- 76c:	9736                	add	a4,a4,a3
- 76e:	fae60de3          	beq	a2,a4,728 <free+0x14>
+ 76e:	ff852583          	lw	a1,-8(a0)
+ 772:	6390                	ld	a2,0(a5)
+ 774:	02059813          	slli	a6,a1,0x20
+ 778:	01c85713          	srli	a4,a6,0x1c
+ 77c:	9736                	add	a4,a4,a3
+ 77e:	fae60de3          	beq	a2,a4,738 <free+0x14>
     bp->s.ptr = p->s.ptr->s.ptr;
- 772:	fec53823          	sd	a2,-16(a0)
+ 782:	fec53823          	sd	a2,-16(a0)
   if(p + p->s.size == bp){
- 776:	4790                	lw	a2,8(a5)
- 778:	02061593          	slli	a1,a2,0x20
- 77c:	01c5d713          	srli	a4,a1,0x1c
- 780:	973e                	add	a4,a4,a5
- 782:	fae68ae3          	beq	a3,a4,736 <free+0x22>
+ 786:	4790                	lw	a2,8(a5)
+ 788:	02061593          	slli	a1,a2,0x20
+ 78c:	01c5d713          	srli	a4,a1,0x1c
+ 790:	973e                	add	a4,a4,a5
+ 792:	fae68ae3          	beq	a3,a4,746 <free+0x22>
     p->s.ptr = bp->s.ptr;
- 786:	e394                	sd	a3,0(a5)
+ 796:	e394                	sd	a3,0(a5)
   } else
     p->s.ptr = bp;
   freep = p;
- 788:	00000717          	auipc	a4,0x0
- 78c:	1ef73c23          	sd	a5,504(a4) # 980 <freep>
+ 798:	00000717          	auipc	a4,0x0
+ 79c:	1ef73c23          	sd	a5,504(a4) # 990 <freep>
 }
- 790:	6422                	ld	s0,8(sp)
- 792:	0141                	addi	sp,sp,16
- 794:	8082                	ret
+ 7a0:	6422                	ld	s0,8(sp)
+ 7a2:	0141                	addi	sp,sp,16
+ 7a4:	8082                	ret
 
-0000000000000796 <malloc>:
+00000000000007a6 <malloc>:
   return freep;
 }
 
 void*
 malloc(uint nbytes)
 {
- 796:	7139                	addi	sp,sp,-64
- 798:	fc06                	sd	ra,56(sp)
- 79a:	f822                	sd	s0,48(sp)
- 79c:	f426                	sd	s1,40(sp)
- 79e:	f04a                	sd	s2,32(sp)
- 7a0:	ec4e                	sd	s3,24(sp)
- 7a2:	e852                	sd	s4,16(sp)
- 7a4:	e456                	sd	s5,8(sp)
- 7a6:	e05a                	sd	s6,0(sp)
- 7a8:	0080                	addi	s0,sp,64
+ 7a6:	7139                	addi	sp,sp,-64
+ 7a8:	fc06                	sd	ra,56(sp)
+ 7aa:	f822                	sd	s0,48(sp)
+ 7ac:	f426                	sd	s1,40(sp)
+ 7ae:	f04a                	sd	s2,32(sp)
+ 7b0:	ec4e                	sd	s3,24(sp)
+ 7b2:	e852                	sd	s4,16(sp)
+ 7b4:	e456                	sd	s5,8(sp)
+ 7b6:	e05a                	sd	s6,0(sp)
+ 7b8:	0080                	addi	s0,sp,64
   Header *p, *prevp;
   uint nunits;
 
   nunits = (nbytes + sizeof(Header) - 1)/sizeof(Header) + 1;
- 7aa:	02051493          	slli	s1,a0,0x20
- 7ae:	9081                	srli	s1,s1,0x20
- 7b0:	04bd                	addi	s1,s1,15
- 7b2:	8091                	srli	s1,s1,0x4
- 7b4:	0014899b          	addiw	s3,s1,1
- 7b8:	0485                	addi	s1,s1,1
+ 7ba:	02051493          	slli	s1,a0,0x20
+ 7be:	9081                	srli	s1,s1,0x20
+ 7c0:	04bd                	addi	s1,s1,15
+ 7c2:	8091                	srli	s1,s1,0x4
+ 7c4:	0014899b          	addiw	s3,s1,1
+ 7c8:	0485                	addi	s1,s1,1
   if((prevp = freep) == 0){
- 7ba:	00000517          	auipc	a0,0x0
- 7be:	1c653503          	ld	a0,454(a0) # 980 <freep>
- 7c2:	c515                	beqz	a0,7ee <malloc+0x58>
+ 7ca:	00000517          	auipc	a0,0x0
+ 7ce:	1c653503          	ld	a0,454(a0) # 990 <freep>
+ 7d2:	c515                	beqz	a0,7fe <malloc+0x58>
     base.s.ptr = freep = prevp = &base;
     base.s.size = 0;
   }
   for(p = prevp->s.ptr; ; prevp = p, p = p->s.ptr){
- 7c4:	611c                	ld	a5,0(a0)
+ 7d4:	611c                	ld	a5,0(a0)
     if(p->s.size >= nunits){
- 7c6:	4798                	lw	a4,8(a5)
- 7c8:	02977f63          	bgeu	a4,s1,806 <malloc+0x70>
- 7cc:	8a4e                	mv	s4,s3
- 7ce:	0009871b          	sext.w	a4,s3
- 7d2:	6685                	lui	a3,0x1
- 7d4:	00d77363          	bgeu	a4,a3,7da <malloc+0x44>
- 7d8:	6a05                	lui	s4,0x1
- 7da:	000a0b1b          	sext.w	s6,s4
+ 7d6:	4798                	lw	a4,8(a5)
+ 7d8:	02977f63          	bgeu	a4,s1,816 <malloc+0x70>
+ 7dc:	8a4e                	mv	s4,s3
+ 7de:	0009871b          	sext.w	a4,s3
+ 7e2:	6685                	lui	a3,0x1
+ 7e4:	00d77363          	bgeu	a4,a3,7ea <malloc+0x44>
+ 7e8:	6a05                	lui	s4,0x1
+ 7ea:	000a0b1b          	sext.w	s6,s4
   p = sbrk(nu * sizeof(Header));
- 7de:	004a1a1b          	slliw	s4,s4,0x4
+ 7ee:	004a1a1b          	slliw	s4,s4,0x4
         p->s.size = nunits;
       }
       freep = prevp;
       return (void*)(p + 1);
     }
     if(p == freep)
- 7e2:	00000917          	auipc	s2,0x0
- 7e6:	19e90913          	addi	s2,s2,414 # 980 <freep>
+ 7f2:	00000917          	auipc	s2,0x0
+ 7f6:	19e90913          	addi	s2,s2,414 # 990 <freep>
   if(p == (char*)-1)
- 7ea:	5afd                	li	s5,-1
- 7ec:	a895                	j	860 <malloc+0xca>
+ 7fa:	5afd                	li	s5,-1
+ 7fc:	a895                	j	870 <malloc+0xca>
     base.s.ptr = freep = prevp = &base;
- 7ee:	00000797          	auipc	a5,0x0
- 7f2:	19a78793          	addi	a5,a5,410 # 988 <base>
- 7f6:	00000717          	auipc	a4,0x0
- 7fa:	18f73523          	sd	a5,394(a4) # 980 <freep>
- 7fe:	e39c                	sd	a5,0(a5)
+ 7fe:	00000797          	auipc	a5,0x0
+ 802:	19a78793          	addi	a5,a5,410 # 998 <base>
+ 806:	00000717          	auipc	a4,0x0
+ 80a:	18f73523          	sd	a5,394(a4) # 990 <freep>
+ 80e:	e39c                	sd	a5,0(a5)
     base.s.size = 0;
- 800:	0007a423          	sw	zero,8(a5)
+ 810:	0007a423          	sw	zero,8(a5)
     if(p->s.size >= nunits){
- 804:	b7e1                	j	7cc <malloc+0x36>
+ 814:	b7e1                	j	7dc <malloc+0x36>
       if(p->s.size == nunits)
- 806:	02e48c63          	beq	s1,a4,83e <malloc+0xa8>
+ 816:	02e48c63          	beq	s1,a4,84e <malloc+0xa8>
         p->s.size -= nunits;
- 80a:	4137073b          	subw	a4,a4,s3
- 80e:	c798                	sw	a4,8(a5)
+ 81a:	4137073b          	subw	a4,a4,s3
+ 81e:	c798                	sw	a4,8(a5)
         p += p->s.size;
- 810:	02071693          	slli	a3,a4,0x20
- 814:	01c6d713          	srli	a4,a3,0x1c
- 818:	97ba                	add	a5,a5,a4
+ 820:	02071693          	slli	a3,a4,0x20
+ 824:	01c6d713          	srli	a4,a3,0x1c
+ 828:	97ba                	add	a5,a5,a4
         p->s.size = nunits;
- 81a:	0137a423          	sw	s3,8(a5)
+ 82a:	0137a423          	sw	s3,8(a5)
       freep = prevp;
- 81e:	00000717          	auipc	a4,0x0
- 822:	16a73123          	sd	a0,354(a4) # 980 <freep>
+ 82e:	00000717          	auipc	a4,0x0
+ 832:	16a73123          	sd	a0,354(a4) # 990 <freep>
       return (void*)(p + 1);
- 826:	01078513          	addi	a0,a5,16
+ 836:	01078513          	addi	a0,a5,16
       if((p = morecore(nunits)) == 0)
         return 0;
   }
 }
- 82a:	70e2                	ld	ra,56(sp)
- 82c:	7442                	ld	s0,48(sp)
- 82e:	74a2                	ld	s1,40(sp)
- 830:	7902                	ld	s2,32(sp)
- 832:	69e2                	ld	s3,24(sp)
- 834:	6a42                	ld	s4,16(sp)
- 836:	6aa2                	ld	s5,8(sp)
- 838:	6b02                	ld	s6,0(sp)
- 83a:	6121                	addi	sp,sp,64
- 83c:	8082                	ret
+ 83a:	70e2                	ld	ra,56(sp)
+ 83c:	7442                	ld	s0,48(sp)
+ 83e:	74a2                	ld	s1,40(sp)
+ 840:	7902                	ld	s2,32(sp)
+ 842:	69e2                	ld	s3,24(sp)
+ 844:	6a42                	ld	s4,16(sp)
+ 846:	6aa2                	ld	s5,8(sp)
+ 848:	6b02                	ld	s6,0(sp)
+ 84a:	6121                	addi	sp,sp,64
+ 84c:	8082                	ret
         prevp->s.ptr = p->s.ptr;
- 83e:	6398                	ld	a4,0(a5)
- 840:	e118                	sd	a4,0(a0)
- 842:	bff1                	j	81e <malloc+0x88>
+ 84e:	6398                	ld	a4,0(a5)
+ 850:	e118                	sd	a4,0(a0)
+ 852:	bff1                	j	82e <malloc+0x88>
   hp->s.size = nu;
- 844:	01652423          	sw	s6,8(a0)
+ 854:	01652423          	sw	s6,8(a0)
   free((void*)(hp + 1));
- 848:	0541                	addi	a0,a0,16
- 84a:	00000097          	auipc	ra,0x0
- 84e:	eca080e7          	jalr	-310(ra) # 714 <free>
+ 858:	0541                	addi	a0,a0,16
+ 85a:	00000097          	auipc	ra,0x0
+ 85e:	eca080e7          	jalr	-310(ra) # 724 <free>
   return freep;
- 852:	00093503          	ld	a0,0(s2)
+ 862:	00093503          	ld	a0,0(s2)
       if((p = morecore(nunits)) == 0)
- 856:	d971                	beqz	a0,82a <malloc+0x94>
+ 866:	d971                	beqz	a0,83a <malloc+0x94>
   for(p = prevp->s.ptr; ; prevp = p, p = p->s.ptr){
- 858:	611c                	ld	a5,0(a0)
+ 868:	611c                	ld	a5,0(a0)
     if(p->s.size >= nunits){
- 85a:	4798                	lw	a4,8(a5)
- 85c:	fa9775e3          	bgeu	a4,s1,806 <malloc+0x70>
+ 86a:	4798                	lw	a4,8(a5)
+ 86c:	fa9775e3          	bgeu	a4,s1,816 <malloc+0x70>
     if(p == freep)
- 860:	00093703          	ld	a4,0(s2)
- 864:	853e                	mv	a0,a5
- 866:	fef719e3          	bne	a4,a5,858 <malloc+0xc2>
+ 870:	00093703          	ld	a4,0(s2)
+ 874:	853e                	mv	a0,a5
+ 876:	fef719e3          	bne	a4,a5,868 <malloc+0xc2>
   p = sbrk(nu * sizeof(Header));
- 86a:	8552                	mv	a0,s4
- 86c:	00000097          	auipc	ra,0x0
- 870:	b80080e7          	jalr	-1152(ra) # 3ec <sbrk>
+ 87a:	8552                	mv	a0,s4
+ 87c:	00000097          	auipc	ra,0x0
+ 880:	b70080e7          	jalr	-1168(ra) # 3ec <sbrk>
   if(p == (char*)-1)
- 874:	fd5518e3          	bne	a0,s5,844 <malloc+0xae>
+ 884:	fd5518e3          	bne	a0,s5,854 <malloc+0xae>
         return 0;
- 878:	4501                	li	a0,0
- 87a:	bf45                	j	82a <malloc+0x94>
+ 888:	4501                	li	a0,0
+ 88a:	bf45                	j	83a <malloc+0x94>
Binary files ./user/init.o and ../xv6-labs-2021/user/init.o differ
diff -urN ./user/init.sym ../xv6-labs-2021/user/init.sym
--- ./user/init.sym	2021-12-05 17:54:42.000000000 +0800
+++ ../xv6-labs-2021/user/init.sym	2021-11-26 14:46:16.000000000 +0800
@@ -1,8 +1,8 @@
 0000000000000000 .text
-0000000000000880 .rodata
-0000000000000970 .data
-0000000000000980 .sbss
-0000000000000988 .bss
+0000000000000890 .rodata
+0000000000000980 .data
+0000000000000990 .sbss
+0000000000000998 .bss
 0000000000000000 .comment
 0000000000000000 .riscv.attributes
 0000000000000000 .debug_aranges
@@ -17,30 +17,32 @@
 0000000000000000 init.c
 0000000000000000 ulib.c
 0000000000000000 printf.c
-0000000000000404 putc
-0000000000000426 printint
-0000000000000958 digits
+0000000000000414 putc
+0000000000000436 printint
+0000000000000968 digits
 0000000000000000 umalloc.c
-0000000000000980 freep
-0000000000000988 base
+0000000000000990 freep
+0000000000000998 base
 00000000000000f8 strcpy
-00000000000006de printf
-0000000000001170 __global_pointer$
-0000000000000970 argv
+00000000000006ee printf
+0000000000001180 __global_pointer$
+0000000000000980 argv
 00000000000002b2 memmove
 00000000000003ac mknod
+0000000000000404 trace
 00000000000001b0 gets
-0000000000000980 __SDATA_BEGIN__
+0000000000000990 __SDATA_BEGIN__
 00000000000003e4 getpid
 0000000000000344 memcpy
-0000000000000796 malloc
+00000000000007a6 malloc
 00000000000003f4 sleep
+000000000000040c sysinfo
 0000000000000374 pipe
 0000000000000384 write
 00000000000003bc fstat
-00000000000006b0 fprintf
+00000000000006c0 fprintf
 0000000000000394 kill
-00000000000004d2 vprintf
+00000000000004e2 vprintf
 00000000000003d4 chdir
 000000000000039c exec
 000000000000036c wait
@@ -48,18 +50,18 @@
 00000000000003b4 unlink
 000000000000030a memcmp
 000000000000035c fork
-0000000000000998 __BSS_END__
+00000000000009a8 __BSS_END__
 00000000000003ec sbrk
 00000000000003fc uptime
-0000000000000980 __bss_start
+0000000000000990 __bss_start
 000000000000016a memset
 0000000000000000 main
 0000000000000114 strcmp
 00000000000003dc dup
-0000000000000970 __DATA_BEGIN__
+0000000000000980 __DATA_BEGIN__
 0000000000000224 stat
-0000000000000980 _edata
-0000000000000998 _end
+0000000000000990 _edata
+00000000000009a8 _end
 00000000000003c4 link
 0000000000000364 exit
 000000000000026a atoi
@@ -68,4 +70,4 @@
 000000000000018c strchr
 00000000000003cc mkdir
 000000000000038c close
-0000000000000714 free
+0000000000000724 free
Binary files ./user/initcode.o and ../xv6-labs-2021/user/initcode.o differ
Binary files ./user/initcode.out and ../xv6-labs-2021/user/initcode.out differ
diff -urN ./user/kill.asm ../xv6-labs-2021/user/kill.asm
--- ./user/kill.asm	2021-12-05 17:54:42.000000000 +0800
+++ ../xv6-labs-2021/user/kill.asm	2021-11-26 14:46:16.000000000 +0800
@@ -47,10 +47,10 @@
   44:	290080e7          	jalr	656(ra) # 2d0 <exit>
     fprintf(2, "usage: kill pid...\n");
   48:	00000597          	auipc	a1,0x0
-  4c:	7a058593          	addi	a1,a1,1952 # 7e8 <malloc+0xe6>
+  4c:	7b058593          	addi	a1,a1,1968 # 7f8 <malloc+0xe6>
   50:	4509                	li	a0,2
   52:	00000097          	auipc	ra,0x0
-  56:	5ca080e7          	jalr	1482(ra) # 61c <fprintf>
+  56:	5da080e7          	jalr	1498(ra) # 62c <fprintf>
     exit(1);
   5a:	4505                	li	a0,1
   5c:	00000097          	auipc	ra,0x0
@@ -687,632 +687,652 @@
  ret
  36e:	8082                	ret
 
-0000000000000370 <putc>:
+0000000000000370 <trace>:
+.global trace
+trace:
+ li a7, SYS_trace
+ 370:	48d9                	li	a7,22
+ ecall
+ 372:	00000073          	ecall
+ ret
+ 376:	8082                	ret
+
+0000000000000378 <sysinfo>:
+.global sysinfo
+sysinfo:
+ li a7, SYS_sysinfo
+ 378:	48dd                	li	a7,23
+ ecall
+ 37a:	00000073          	ecall
+ ret
+ 37e:	8082                	ret
+
+0000000000000380 <putc>:
 
 static char digits[] = "0123456789ABCDEF";
 
 static void
 putc(int fd, char c)
 {
- 370:	1101                	addi	sp,sp,-32
- 372:	ec06                	sd	ra,24(sp)
- 374:	e822                	sd	s0,16(sp)
- 376:	1000                	addi	s0,sp,32
- 378:	feb407a3          	sb	a1,-17(s0)
+ 380:	1101                	addi	sp,sp,-32
+ 382:	ec06                	sd	ra,24(sp)
+ 384:	e822                	sd	s0,16(sp)
+ 386:	1000                	addi	s0,sp,32
+ 388:	feb407a3          	sb	a1,-17(s0)
   write(fd, &c, 1);
- 37c:	4605                	li	a2,1
- 37e:	fef40593          	addi	a1,s0,-17
- 382:	00000097          	auipc	ra,0x0
- 386:	f6e080e7          	jalr	-146(ra) # 2f0 <write>
+ 38c:	4605                	li	a2,1
+ 38e:	fef40593          	addi	a1,s0,-17
+ 392:	00000097          	auipc	ra,0x0
+ 396:	f5e080e7          	jalr	-162(ra) # 2f0 <write>
 }
- 38a:	60e2                	ld	ra,24(sp)
- 38c:	6442                	ld	s0,16(sp)
- 38e:	6105                	addi	sp,sp,32
- 390:	8082                	ret
+ 39a:	60e2                	ld	ra,24(sp)
+ 39c:	6442                	ld	s0,16(sp)
+ 39e:	6105                	addi	sp,sp,32
+ 3a0:	8082                	ret
 
-0000000000000392 <printint>:
+00000000000003a2 <printint>:
 
 static void
 printint(int fd, int xx, int base, int sgn)
 {
- 392:	7139                	addi	sp,sp,-64
- 394:	fc06                	sd	ra,56(sp)
- 396:	f822                	sd	s0,48(sp)
- 398:	f426                	sd	s1,40(sp)
- 39a:	f04a                	sd	s2,32(sp)
- 39c:	ec4e                	sd	s3,24(sp)
- 39e:	0080                	addi	s0,sp,64
- 3a0:	84aa                	mv	s1,a0
+ 3a2:	7139                	addi	sp,sp,-64
+ 3a4:	fc06                	sd	ra,56(sp)
+ 3a6:	f822                	sd	s0,48(sp)
+ 3a8:	f426                	sd	s1,40(sp)
+ 3aa:	f04a                	sd	s2,32(sp)
+ 3ac:	ec4e                	sd	s3,24(sp)
+ 3ae:	0080                	addi	s0,sp,64
+ 3b0:	84aa                	mv	s1,a0
   char buf[16];
   int i, neg;
   uint x;
 
   neg = 0;
   if(sgn && xx < 0){
- 3a2:	c299                	beqz	a3,3a8 <printint+0x16>
- 3a4:	0805c963          	bltz	a1,436 <printint+0xa4>
+ 3b2:	c299                	beqz	a3,3b8 <printint+0x16>
+ 3b4:	0805c963          	bltz	a1,446 <printint+0xa4>
     neg = 1;
     x = -xx;
   } else {
     x = xx;
- 3a8:	2581                	sext.w	a1,a1
+ 3b8:	2581                	sext.w	a1,a1
   neg = 0;
- 3aa:	4881                	li	a7,0
- 3ac:	fc040693          	addi	a3,s0,-64
+ 3ba:	4881                	li	a7,0
+ 3bc:	fc040693          	addi	a3,s0,-64
   }
 
   i = 0;
- 3b0:	4701                	li	a4,0
+ 3c0:	4701                	li	a4,0
   do{
     buf[i++] = digits[x % base];
- 3b2:	2601                	sext.w	a2,a2
- 3b4:	00000517          	auipc	a0,0x0
- 3b8:	4ac50513          	addi	a0,a0,1196 # 860 <digits>
- 3bc:	883a                	mv	a6,a4
- 3be:	2705                	addiw	a4,a4,1
- 3c0:	02c5f7bb          	remuw	a5,a1,a2
- 3c4:	1782                	slli	a5,a5,0x20
- 3c6:	9381                	srli	a5,a5,0x20
- 3c8:	97aa                	add	a5,a5,a0
- 3ca:	0007c783          	lbu	a5,0(a5)
- 3ce:	00f68023          	sb	a5,0(a3)
+ 3c2:	2601                	sext.w	a2,a2
+ 3c4:	00000517          	auipc	a0,0x0
+ 3c8:	4ac50513          	addi	a0,a0,1196 # 870 <digits>
+ 3cc:	883a                	mv	a6,a4
+ 3ce:	2705                	addiw	a4,a4,1
+ 3d0:	02c5f7bb          	remuw	a5,a1,a2
+ 3d4:	1782                	slli	a5,a5,0x20
+ 3d6:	9381                	srli	a5,a5,0x20
+ 3d8:	97aa                	add	a5,a5,a0
+ 3da:	0007c783          	lbu	a5,0(a5)
+ 3de:	00f68023          	sb	a5,0(a3)
   }while((x /= base) != 0);
- 3d2:	0005879b          	sext.w	a5,a1
- 3d6:	02c5d5bb          	divuw	a1,a1,a2
- 3da:	0685                	addi	a3,a3,1
- 3dc:	fec7f0e3          	bgeu	a5,a2,3bc <printint+0x2a>
+ 3e2:	0005879b          	sext.w	a5,a1
+ 3e6:	02c5d5bb          	divuw	a1,a1,a2
+ 3ea:	0685                	addi	a3,a3,1
+ 3ec:	fec7f0e3          	bgeu	a5,a2,3cc <printint+0x2a>
   if(neg)
- 3e0:	00088c63          	beqz	a7,3f8 <printint+0x66>
+ 3f0:	00088c63          	beqz	a7,408 <printint+0x66>
     buf[i++] = '-';
- 3e4:	fd070793          	addi	a5,a4,-48
- 3e8:	00878733          	add	a4,a5,s0
- 3ec:	02d00793          	li	a5,45
- 3f0:	fef70823          	sb	a5,-16(a4)
- 3f4:	0028071b          	addiw	a4,a6,2
+ 3f4:	fd070793          	addi	a5,a4,-48
+ 3f8:	00878733          	add	a4,a5,s0
+ 3fc:	02d00793          	li	a5,45
+ 400:	fef70823          	sb	a5,-16(a4)
+ 404:	0028071b          	addiw	a4,a6,2
 
   while(--i >= 0)
- 3f8:	02e05863          	blez	a4,428 <printint+0x96>
- 3fc:	fc040793          	addi	a5,s0,-64
- 400:	00e78933          	add	s2,a5,a4
- 404:	fff78993          	addi	s3,a5,-1
- 408:	99ba                	add	s3,s3,a4
- 40a:	377d                	addiw	a4,a4,-1
- 40c:	1702                	slli	a4,a4,0x20
- 40e:	9301                	srli	a4,a4,0x20
- 410:	40e989b3          	sub	s3,s3,a4
+ 408:	02e05863          	blez	a4,438 <printint+0x96>
+ 40c:	fc040793          	addi	a5,s0,-64
+ 410:	00e78933          	add	s2,a5,a4
+ 414:	fff78993          	addi	s3,a5,-1
+ 418:	99ba                	add	s3,s3,a4
+ 41a:	377d                	addiw	a4,a4,-1
+ 41c:	1702                	slli	a4,a4,0x20
+ 41e:	9301                	srli	a4,a4,0x20
+ 420:	40e989b3          	sub	s3,s3,a4
     putc(fd, buf[i]);
- 414:	fff94583          	lbu	a1,-1(s2)
- 418:	8526                	mv	a0,s1
- 41a:	00000097          	auipc	ra,0x0
- 41e:	f56080e7          	jalr	-170(ra) # 370 <putc>
+ 424:	fff94583          	lbu	a1,-1(s2)
+ 428:	8526                	mv	a0,s1
+ 42a:	00000097          	auipc	ra,0x0
+ 42e:	f56080e7          	jalr	-170(ra) # 380 <putc>
   while(--i >= 0)
- 422:	197d                	addi	s2,s2,-1
- 424:	ff3918e3          	bne	s2,s3,414 <printint+0x82>
+ 432:	197d                	addi	s2,s2,-1
+ 434:	ff3918e3          	bne	s2,s3,424 <printint+0x82>
 }
- 428:	70e2                	ld	ra,56(sp)
- 42a:	7442                	ld	s0,48(sp)
- 42c:	74a2                	ld	s1,40(sp)
- 42e:	7902                	ld	s2,32(sp)
- 430:	69e2                	ld	s3,24(sp)
- 432:	6121                	addi	sp,sp,64
- 434:	8082                	ret
+ 438:	70e2                	ld	ra,56(sp)
+ 43a:	7442                	ld	s0,48(sp)
+ 43c:	74a2                	ld	s1,40(sp)
+ 43e:	7902                	ld	s2,32(sp)
+ 440:	69e2                	ld	s3,24(sp)
+ 442:	6121                	addi	sp,sp,64
+ 444:	8082                	ret
     x = -xx;
- 436:	40b005bb          	negw	a1,a1
+ 446:	40b005bb          	negw	a1,a1
     neg = 1;
- 43a:	4885                	li	a7,1
+ 44a:	4885                	li	a7,1
     x = -xx;
- 43c:	bf85                	j	3ac <printint+0x1a>
+ 44c:	bf85                	j	3bc <printint+0x1a>
 
-000000000000043e <vprintf>:
+000000000000044e <vprintf>:
 }
 
 // Print to the given fd. Only understands %d, %x, %p, %s.
 void
 vprintf(int fd, const char *fmt, va_list ap)
 {
- 43e:	7119                	addi	sp,sp,-128
- 440:	fc86                	sd	ra,120(sp)
- 442:	f8a2                	sd	s0,112(sp)
- 444:	f4a6                	sd	s1,104(sp)
- 446:	f0ca                	sd	s2,96(sp)
- 448:	ecce                	sd	s3,88(sp)
- 44a:	e8d2                	sd	s4,80(sp)
- 44c:	e4d6                	sd	s5,72(sp)
- 44e:	e0da                	sd	s6,64(sp)
- 450:	fc5e                	sd	s7,56(sp)
- 452:	f862                	sd	s8,48(sp)
- 454:	f466                	sd	s9,40(sp)
- 456:	f06a                	sd	s10,32(sp)
- 458:	ec6e                	sd	s11,24(sp)
- 45a:	0100                	addi	s0,sp,128
+ 44e:	7119                	addi	sp,sp,-128
+ 450:	fc86                	sd	ra,120(sp)
+ 452:	f8a2                	sd	s0,112(sp)
+ 454:	f4a6                	sd	s1,104(sp)
+ 456:	f0ca                	sd	s2,96(sp)
+ 458:	ecce                	sd	s3,88(sp)
+ 45a:	e8d2                	sd	s4,80(sp)
+ 45c:	e4d6                	sd	s5,72(sp)
+ 45e:	e0da                	sd	s6,64(sp)
+ 460:	fc5e                	sd	s7,56(sp)
+ 462:	f862                	sd	s8,48(sp)
+ 464:	f466                	sd	s9,40(sp)
+ 466:	f06a                	sd	s10,32(sp)
+ 468:	ec6e                	sd	s11,24(sp)
+ 46a:	0100                	addi	s0,sp,128
   char *s;
   int c, i, state;
 
   state = 0;
   for(i = 0; fmt[i]; i++){
- 45c:	0005c903          	lbu	s2,0(a1)
- 460:	18090f63          	beqz	s2,5fe <vprintf+0x1c0>
- 464:	8aaa                	mv	s5,a0
- 466:	8b32                	mv	s6,a2
- 468:	00158493          	addi	s1,a1,1
+ 46c:	0005c903          	lbu	s2,0(a1)
+ 470:	18090f63          	beqz	s2,60e <vprintf+0x1c0>
+ 474:	8aaa                	mv	s5,a0
+ 476:	8b32                	mv	s6,a2
+ 478:	00158493          	addi	s1,a1,1
   state = 0;
- 46c:	4981                	li	s3,0
+ 47c:	4981                	li	s3,0
       if(c == '%'){
         state = '%';
       } else {
         putc(fd, c);
       }
     } else if(state == '%'){
- 46e:	02500a13          	li	s4,37
- 472:	4c55                	li	s8,21
- 474:	00000c97          	auipc	s9,0x0
- 478:	394c8c93          	addi	s9,s9,916 # 808 <malloc+0x106>
+ 47e:	02500a13          	li	s4,37
+ 482:	4c55                	li	s8,21
+ 484:	00000c97          	auipc	s9,0x0
+ 488:	394c8c93          	addi	s9,s9,916 # 818 <malloc+0x106>
         printptr(fd, va_arg(ap, uint64));
       } else if(c == 's'){
         s = va_arg(ap, char*);
         if(s == 0)
           s = "(null)";
         while(*s != 0){
- 47c:	02800d93          	li	s11,40
+ 48c:	02800d93          	li	s11,40
   putc(fd, 'x');
- 480:	4d41                	li	s10,16
+ 490:	4d41                	li	s10,16
     putc(fd, digits[x >> (sizeof(uint64) * 8 - 4)]);
- 482:	00000b97          	auipc	s7,0x0
- 486:	3deb8b93          	addi	s7,s7,990 # 860 <digits>
- 48a:	a839                	j	4a8 <vprintf+0x6a>
+ 492:	00000b97          	auipc	s7,0x0
+ 496:	3deb8b93          	addi	s7,s7,990 # 870 <digits>
+ 49a:	a839                	j	4b8 <vprintf+0x6a>
         putc(fd, c);
- 48c:	85ca                	mv	a1,s2
- 48e:	8556                	mv	a0,s5
- 490:	00000097          	auipc	ra,0x0
- 494:	ee0080e7          	jalr	-288(ra) # 370 <putc>
- 498:	a019                	j	49e <vprintf+0x60>
+ 49c:	85ca                	mv	a1,s2
+ 49e:	8556                	mv	a0,s5
+ 4a0:	00000097          	auipc	ra,0x0
+ 4a4:	ee0080e7          	jalr	-288(ra) # 380 <putc>
+ 4a8:	a019                	j	4ae <vprintf+0x60>
     } else if(state == '%'){
- 49a:	01498d63          	beq	s3,s4,4b4 <vprintf+0x76>
+ 4aa:	01498d63          	beq	s3,s4,4c4 <vprintf+0x76>
   for(i = 0; fmt[i]; i++){
- 49e:	0485                	addi	s1,s1,1
- 4a0:	fff4c903          	lbu	s2,-1(s1)
- 4a4:	14090d63          	beqz	s2,5fe <vprintf+0x1c0>
+ 4ae:	0485                	addi	s1,s1,1
+ 4b0:	fff4c903          	lbu	s2,-1(s1)
+ 4b4:	14090d63          	beqz	s2,60e <vprintf+0x1c0>
     if(state == 0){
- 4a8:	fe0999e3          	bnez	s3,49a <vprintf+0x5c>
+ 4b8:	fe0999e3          	bnez	s3,4aa <vprintf+0x5c>
       if(c == '%'){
- 4ac:	ff4910e3          	bne	s2,s4,48c <vprintf+0x4e>
+ 4bc:	ff4910e3          	bne	s2,s4,49c <vprintf+0x4e>
         state = '%';
- 4b0:	89d2                	mv	s3,s4
- 4b2:	b7f5                	j	49e <vprintf+0x60>
+ 4c0:	89d2                	mv	s3,s4
+ 4c2:	b7f5                	j	4ae <vprintf+0x60>
       if(c == 'd'){
- 4b4:	11490c63          	beq	s2,s4,5cc <vprintf+0x18e>
- 4b8:	f9d9079b          	addiw	a5,s2,-99
- 4bc:	0ff7f793          	zext.b	a5,a5
- 4c0:	10fc6e63          	bltu	s8,a5,5dc <vprintf+0x19e>
- 4c4:	f9d9079b          	addiw	a5,s2,-99
- 4c8:	0ff7f713          	zext.b	a4,a5
- 4cc:	10ec6863          	bltu	s8,a4,5dc <vprintf+0x19e>
- 4d0:	00271793          	slli	a5,a4,0x2
- 4d4:	97e6                	add	a5,a5,s9
- 4d6:	439c                	lw	a5,0(a5)
- 4d8:	97e6                	add	a5,a5,s9
- 4da:	8782                	jr	a5
+ 4c4:	11490c63          	beq	s2,s4,5dc <vprintf+0x18e>
+ 4c8:	f9d9079b          	addiw	a5,s2,-99
+ 4cc:	0ff7f793          	zext.b	a5,a5
+ 4d0:	10fc6e63          	bltu	s8,a5,5ec <vprintf+0x19e>
+ 4d4:	f9d9079b          	addiw	a5,s2,-99
+ 4d8:	0ff7f713          	zext.b	a4,a5
+ 4dc:	10ec6863          	bltu	s8,a4,5ec <vprintf+0x19e>
+ 4e0:	00271793          	slli	a5,a4,0x2
+ 4e4:	97e6                	add	a5,a5,s9
+ 4e6:	439c                	lw	a5,0(a5)
+ 4e8:	97e6                	add	a5,a5,s9
+ 4ea:	8782                	jr	a5
         printint(fd, va_arg(ap, int), 10, 1);
- 4dc:	008b0913          	addi	s2,s6,8
- 4e0:	4685                	li	a3,1
- 4e2:	4629                	li	a2,10
- 4e4:	000b2583          	lw	a1,0(s6)
- 4e8:	8556                	mv	a0,s5
- 4ea:	00000097          	auipc	ra,0x0
- 4ee:	ea8080e7          	jalr	-344(ra) # 392 <printint>
- 4f2:	8b4a                	mv	s6,s2
+ 4ec:	008b0913          	addi	s2,s6,8
+ 4f0:	4685                	li	a3,1
+ 4f2:	4629                	li	a2,10
+ 4f4:	000b2583          	lw	a1,0(s6)
+ 4f8:	8556                	mv	a0,s5
+ 4fa:	00000097          	auipc	ra,0x0
+ 4fe:	ea8080e7          	jalr	-344(ra) # 3a2 <printint>
+ 502:	8b4a                	mv	s6,s2
       } else {
         // Unknown % sequence.  Print it to draw attention.
         putc(fd, '%');
         putc(fd, c);
       }
       state = 0;
- 4f4:	4981                	li	s3,0
- 4f6:	b765                	j	49e <vprintf+0x60>
+ 504:	4981                	li	s3,0
+ 506:	b765                	j	4ae <vprintf+0x60>
         printint(fd, va_arg(ap, uint64), 10, 0);
- 4f8:	008b0913          	addi	s2,s6,8
- 4fc:	4681                	li	a3,0
- 4fe:	4629                	li	a2,10
- 500:	000b2583          	lw	a1,0(s6)
- 504:	8556                	mv	a0,s5
- 506:	00000097          	auipc	ra,0x0
- 50a:	e8c080e7          	jalr	-372(ra) # 392 <printint>
- 50e:	8b4a                	mv	s6,s2
+ 508:	008b0913          	addi	s2,s6,8
+ 50c:	4681                	li	a3,0
+ 50e:	4629                	li	a2,10
+ 510:	000b2583          	lw	a1,0(s6)
+ 514:	8556                	mv	a0,s5
+ 516:	00000097          	auipc	ra,0x0
+ 51a:	e8c080e7          	jalr	-372(ra) # 3a2 <printint>
+ 51e:	8b4a                	mv	s6,s2
       state = 0;
- 510:	4981                	li	s3,0
- 512:	b771                	j	49e <vprintf+0x60>
+ 520:	4981                	li	s3,0
+ 522:	b771                	j	4ae <vprintf+0x60>
         printint(fd, va_arg(ap, int), 16, 0);
- 514:	008b0913          	addi	s2,s6,8
- 518:	4681                	li	a3,0
- 51a:	866a                	mv	a2,s10
- 51c:	000b2583          	lw	a1,0(s6)
- 520:	8556                	mv	a0,s5
- 522:	00000097          	auipc	ra,0x0
- 526:	e70080e7          	jalr	-400(ra) # 392 <printint>
- 52a:	8b4a                	mv	s6,s2
+ 524:	008b0913          	addi	s2,s6,8
+ 528:	4681                	li	a3,0
+ 52a:	866a                	mv	a2,s10
+ 52c:	000b2583          	lw	a1,0(s6)
+ 530:	8556                	mv	a0,s5
+ 532:	00000097          	auipc	ra,0x0
+ 536:	e70080e7          	jalr	-400(ra) # 3a2 <printint>
+ 53a:	8b4a                	mv	s6,s2
       state = 0;
- 52c:	4981                	li	s3,0
- 52e:	bf85                	j	49e <vprintf+0x60>
+ 53c:	4981                	li	s3,0
+ 53e:	bf85                	j	4ae <vprintf+0x60>
         printptr(fd, va_arg(ap, uint64));
- 530:	008b0793          	addi	a5,s6,8
- 534:	f8f43423          	sd	a5,-120(s0)
- 538:	000b3983          	ld	s3,0(s6)
+ 540:	008b0793          	addi	a5,s6,8
+ 544:	f8f43423          	sd	a5,-120(s0)
+ 548:	000b3983          	ld	s3,0(s6)
   putc(fd, '0');
- 53c:	03000593          	li	a1,48
- 540:	8556                	mv	a0,s5
- 542:	00000097          	auipc	ra,0x0
- 546:	e2e080e7          	jalr	-466(ra) # 370 <putc>
+ 54c:	03000593          	li	a1,48
+ 550:	8556                	mv	a0,s5
+ 552:	00000097          	auipc	ra,0x0
+ 556:	e2e080e7          	jalr	-466(ra) # 380 <putc>
   putc(fd, 'x');
- 54a:	07800593          	li	a1,120
- 54e:	8556                	mv	a0,s5
- 550:	00000097          	auipc	ra,0x0
- 554:	e20080e7          	jalr	-480(ra) # 370 <putc>
- 558:	896a                	mv	s2,s10
+ 55a:	07800593          	li	a1,120
+ 55e:	8556                	mv	a0,s5
+ 560:	00000097          	auipc	ra,0x0
+ 564:	e20080e7          	jalr	-480(ra) # 380 <putc>
+ 568:	896a                	mv	s2,s10
     putc(fd, digits[x >> (sizeof(uint64) * 8 - 4)]);
- 55a:	03c9d793          	srli	a5,s3,0x3c
- 55e:	97de                	add	a5,a5,s7
- 560:	0007c583          	lbu	a1,0(a5)
- 564:	8556                	mv	a0,s5
- 566:	00000097          	auipc	ra,0x0
- 56a:	e0a080e7          	jalr	-502(ra) # 370 <putc>
+ 56a:	03c9d793          	srli	a5,s3,0x3c
+ 56e:	97de                	add	a5,a5,s7
+ 570:	0007c583          	lbu	a1,0(a5)
+ 574:	8556                	mv	a0,s5
+ 576:	00000097          	auipc	ra,0x0
+ 57a:	e0a080e7          	jalr	-502(ra) # 380 <putc>
   for (i = 0; i < (sizeof(uint64) * 2); i++, x <<= 4)
- 56e:	0992                	slli	s3,s3,0x4
- 570:	397d                	addiw	s2,s2,-1
- 572:	fe0914e3          	bnez	s2,55a <vprintf+0x11c>
+ 57e:	0992                	slli	s3,s3,0x4
+ 580:	397d                	addiw	s2,s2,-1
+ 582:	fe0914e3          	bnez	s2,56a <vprintf+0x11c>
         printptr(fd, va_arg(ap, uint64));
- 576:	f8843b03          	ld	s6,-120(s0)
+ 586:	f8843b03          	ld	s6,-120(s0)
       state = 0;
- 57a:	4981                	li	s3,0
- 57c:	b70d                	j	49e <vprintf+0x60>
+ 58a:	4981                	li	s3,0
+ 58c:	b70d                	j	4ae <vprintf+0x60>
         s = va_arg(ap, char*);
- 57e:	008b0913          	addi	s2,s6,8
- 582:	000b3983          	ld	s3,0(s6)
+ 58e:	008b0913          	addi	s2,s6,8
+ 592:	000b3983          	ld	s3,0(s6)
         if(s == 0)
- 586:	02098163          	beqz	s3,5a8 <vprintf+0x16a>
+ 596:	02098163          	beqz	s3,5b8 <vprintf+0x16a>
         while(*s != 0){
- 58a:	0009c583          	lbu	a1,0(s3)
- 58e:	c5ad                	beqz	a1,5f8 <vprintf+0x1ba>
+ 59a:	0009c583          	lbu	a1,0(s3)
+ 59e:	c5ad                	beqz	a1,608 <vprintf+0x1ba>
           putc(fd, *s);
- 590:	8556                	mv	a0,s5
- 592:	00000097          	auipc	ra,0x0
- 596:	dde080e7          	jalr	-546(ra) # 370 <putc>
+ 5a0:	8556                	mv	a0,s5
+ 5a2:	00000097          	auipc	ra,0x0
+ 5a6:	dde080e7          	jalr	-546(ra) # 380 <putc>
           s++;
- 59a:	0985                	addi	s3,s3,1
+ 5aa:	0985                	addi	s3,s3,1
         while(*s != 0){
- 59c:	0009c583          	lbu	a1,0(s3)
- 5a0:	f9e5                	bnez	a1,590 <vprintf+0x152>
+ 5ac:	0009c583          	lbu	a1,0(s3)
+ 5b0:	f9e5                	bnez	a1,5a0 <vprintf+0x152>
         s = va_arg(ap, char*);
- 5a2:	8b4a                	mv	s6,s2
+ 5b2:	8b4a                	mv	s6,s2
       state = 0;
- 5a4:	4981                	li	s3,0
- 5a6:	bde5                	j	49e <vprintf+0x60>
+ 5b4:	4981                	li	s3,0
+ 5b6:	bde5                	j	4ae <vprintf+0x60>
           s = "(null)";
- 5a8:	00000997          	auipc	s3,0x0
- 5ac:	25898993          	addi	s3,s3,600 # 800 <malloc+0xfe>
+ 5b8:	00000997          	auipc	s3,0x0
+ 5bc:	25898993          	addi	s3,s3,600 # 810 <malloc+0xfe>
         while(*s != 0){
- 5b0:	85ee                	mv	a1,s11
- 5b2:	bff9                	j	590 <vprintf+0x152>
+ 5c0:	85ee                	mv	a1,s11
+ 5c2:	bff9                	j	5a0 <vprintf+0x152>
         putc(fd, va_arg(ap, uint));
- 5b4:	008b0913          	addi	s2,s6,8
- 5b8:	000b4583          	lbu	a1,0(s6)
- 5bc:	8556                	mv	a0,s5
- 5be:	00000097          	auipc	ra,0x0
- 5c2:	db2080e7          	jalr	-590(ra) # 370 <putc>
- 5c6:	8b4a                	mv	s6,s2
-      state = 0;
- 5c8:	4981                	li	s3,0
- 5ca:	bdd1                	j	49e <vprintf+0x60>
-        putc(fd, c);
- 5cc:	85d2                	mv	a1,s4
- 5ce:	8556                	mv	a0,s5
- 5d0:	00000097          	auipc	ra,0x0
- 5d4:	da0080e7          	jalr	-608(ra) # 370 <putc>
+ 5c4:	008b0913          	addi	s2,s6,8
+ 5c8:	000b4583          	lbu	a1,0(s6)
+ 5cc:	8556                	mv	a0,s5
+ 5ce:	00000097          	auipc	ra,0x0
+ 5d2:	db2080e7          	jalr	-590(ra) # 380 <putc>
+ 5d6:	8b4a                	mv	s6,s2
       state = 0;
  5d8:	4981                	li	s3,0
- 5da:	b5d1                	j	49e <vprintf+0x60>
-        putc(fd, '%');
+ 5da:	bdd1                	j	4ae <vprintf+0x60>
+        putc(fd, c);
  5dc:	85d2                	mv	a1,s4
  5de:	8556                	mv	a0,s5
  5e0:	00000097          	auipc	ra,0x0
- 5e4:	d90080e7          	jalr	-624(ra) # 370 <putc>
+ 5e4:	da0080e7          	jalr	-608(ra) # 380 <putc>
+      state = 0;
+ 5e8:	4981                	li	s3,0
+ 5ea:	b5d1                	j	4ae <vprintf+0x60>
+        putc(fd, '%');
+ 5ec:	85d2                	mv	a1,s4
+ 5ee:	8556                	mv	a0,s5
+ 5f0:	00000097          	auipc	ra,0x0
+ 5f4:	d90080e7          	jalr	-624(ra) # 380 <putc>
         putc(fd, c);
- 5e8:	85ca                	mv	a1,s2
- 5ea:	8556                	mv	a0,s5
- 5ec:	00000097          	auipc	ra,0x0
- 5f0:	d84080e7          	jalr	-636(ra) # 370 <putc>
+ 5f8:	85ca                	mv	a1,s2
+ 5fa:	8556                	mv	a0,s5
+ 5fc:	00000097          	auipc	ra,0x0
+ 600:	d84080e7          	jalr	-636(ra) # 380 <putc>
       state = 0;
- 5f4:	4981                	li	s3,0
- 5f6:	b565                	j	49e <vprintf+0x60>
+ 604:	4981                	li	s3,0
+ 606:	b565                	j	4ae <vprintf+0x60>
         s = va_arg(ap, char*);
- 5f8:	8b4a                	mv	s6,s2
+ 608:	8b4a                	mv	s6,s2
       state = 0;
- 5fa:	4981                	li	s3,0
- 5fc:	b54d                	j	49e <vprintf+0x60>
+ 60a:	4981                	li	s3,0
+ 60c:	b54d                	j	4ae <vprintf+0x60>
     }
   }
 }
- 5fe:	70e6                	ld	ra,120(sp)
- 600:	7446                	ld	s0,112(sp)
- 602:	74a6                	ld	s1,104(sp)
- 604:	7906                	ld	s2,96(sp)
- 606:	69e6                	ld	s3,88(sp)
- 608:	6a46                	ld	s4,80(sp)
- 60a:	6aa6                	ld	s5,72(sp)
- 60c:	6b06                	ld	s6,64(sp)
- 60e:	7be2                	ld	s7,56(sp)
- 610:	7c42                	ld	s8,48(sp)
- 612:	7ca2                	ld	s9,40(sp)
- 614:	7d02                	ld	s10,32(sp)
- 616:	6de2                	ld	s11,24(sp)
- 618:	6109                	addi	sp,sp,128
- 61a:	8082                	ret
+ 60e:	70e6                	ld	ra,120(sp)
+ 610:	7446                	ld	s0,112(sp)
+ 612:	74a6                	ld	s1,104(sp)
+ 614:	7906                	ld	s2,96(sp)
+ 616:	69e6                	ld	s3,88(sp)
+ 618:	6a46                	ld	s4,80(sp)
+ 61a:	6aa6                	ld	s5,72(sp)
+ 61c:	6b06                	ld	s6,64(sp)
+ 61e:	7be2                	ld	s7,56(sp)
+ 620:	7c42                	ld	s8,48(sp)
+ 622:	7ca2                	ld	s9,40(sp)
+ 624:	7d02                	ld	s10,32(sp)
+ 626:	6de2                	ld	s11,24(sp)
+ 628:	6109                	addi	sp,sp,128
+ 62a:	8082                	ret
 
-000000000000061c <fprintf>:
+000000000000062c <fprintf>:
 
 void
 fprintf(int fd, const char *fmt, ...)
 {
- 61c:	715d                	addi	sp,sp,-80
- 61e:	ec06                	sd	ra,24(sp)
- 620:	e822                	sd	s0,16(sp)
- 622:	1000                	addi	s0,sp,32
- 624:	e010                	sd	a2,0(s0)
- 626:	e414                	sd	a3,8(s0)
- 628:	e818                	sd	a4,16(s0)
- 62a:	ec1c                	sd	a5,24(s0)
- 62c:	03043023          	sd	a6,32(s0)
- 630:	03143423          	sd	a7,40(s0)
+ 62c:	715d                	addi	sp,sp,-80
+ 62e:	ec06                	sd	ra,24(sp)
+ 630:	e822                	sd	s0,16(sp)
+ 632:	1000                	addi	s0,sp,32
+ 634:	e010                	sd	a2,0(s0)
+ 636:	e414                	sd	a3,8(s0)
+ 638:	e818                	sd	a4,16(s0)
+ 63a:	ec1c                	sd	a5,24(s0)
+ 63c:	03043023          	sd	a6,32(s0)
+ 640:	03143423          	sd	a7,40(s0)
   va_list ap;
 
   va_start(ap, fmt);
- 634:	fe843423          	sd	s0,-24(s0)
+ 644:	fe843423          	sd	s0,-24(s0)
   vprintf(fd, fmt, ap);
- 638:	8622                	mv	a2,s0
- 63a:	00000097          	auipc	ra,0x0
- 63e:	e04080e7          	jalr	-508(ra) # 43e <vprintf>
+ 648:	8622                	mv	a2,s0
+ 64a:	00000097          	auipc	ra,0x0
+ 64e:	e04080e7          	jalr	-508(ra) # 44e <vprintf>
 }
- 642:	60e2                	ld	ra,24(sp)
- 644:	6442                	ld	s0,16(sp)
- 646:	6161                	addi	sp,sp,80
- 648:	8082                	ret
+ 652:	60e2                	ld	ra,24(sp)
+ 654:	6442                	ld	s0,16(sp)
+ 656:	6161                	addi	sp,sp,80
+ 658:	8082                	ret
 
-000000000000064a <printf>:
+000000000000065a <printf>:
 
 void
 printf(const char *fmt, ...)
 {
- 64a:	711d                	addi	sp,sp,-96
- 64c:	ec06                	sd	ra,24(sp)
- 64e:	e822                	sd	s0,16(sp)
- 650:	1000                	addi	s0,sp,32
- 652:	e40c                	sd	a1,8(s0)
- 654:	e810                	sd	a2,16(s0)
- 656:	ec14                	sd	a3,24(s0)
- 658:	f018                	sd	a4,32(s0)
- 65a:	f41c                	sd	a5,40(s0)
- 65c:	03043823          	sd	a6,48(s0)
- 660:	03143c23          	sd	a7,56(s0)
+ 65a:	711d                	addi	sp,sp,-96
+ 65c:	ec06                	sd	ra,24(sp)
+ 65e:	e822                	sd	s0,16(sp)
+ 660:	1000                	addi	s0,sp,32
+ 662:	e40c                	sd	a1,8(s0)
+ 664:	e810                	sd	a2,16(s0)
+ 666:	ec14                	sd	a3,24(s0)
+ 668:	f018                	sd	a4,32(s0)
+ 66a:	f41c                	sd	a5,40(s0)
+ 66c:	03043823          	sd	a6,48(s0)
+ 670:	03143c23          	sd	a7,56(s0)
   va_list ap;
 
   va_start(ap, fmt);
- 664:	00840613          	addi	a2,s0,8
- 668:	fec43423          	sd	a2,-24(s0)
+ 674:	00840613          	addi	a2,s0,8
+ 678:	fec43423          	sd	a2,-24(s0)
   vprintf(1, fmt, ap);
- 66c:	85aa                	mv	a1,a0
- 66e:	4505                	li	a0,1
- 670:	00000097          	auipc	ra,0x0
- 674:	dce080e7          	jalr	-562(ra) # 43e <vprintf>
+ 67c:	85aa                	mv	a1,a0
+ 67e:	4505                	li	a0,1
+ 680:	00000097          	auipc	ra,0x0
+ 684:	dce080e7          	jalr	-562(ra) # 44e <vprintf>
 }
- 678:	60e2                	ld	ra,24(sp)
- 67a:	6442                	ld	s0,16(sp)
- 67c:	6125                	addi	sp,sp,96
- 67e:	8082                	ret
+ 688:	60e2                	ld	ra,24(sp)
+ 68a:	6442                	ld	s0,16(sp)
+ 68c:	6125                	addi	sp,sp,96
+ 68e:	8082                	ret
 
-0000000000000680 <free>:
+0000000000000690 <free>:
 static Header base;
 static Header *freep;
 
 void
 free(void *ap)
 {
- 680:	1141                	addi	sp,sp,-16
- 682:	e422                	sd	s0,8(sp)
- 684:	0800                	addi	s0,sp,16
+ 690:	1141                	addi	sp,sp,-16
+ 692:	e422                	sd	s0,8(sp)
+ 694:	0800                	addi	s0,sp,16
   Header *bp, *p;
 
   bp = (Header*)ap - 1;
- 686:	ff050693          	addi	a3,a0,-16
+ 696:	ff050693          	addi	a3,a0,-16
   for(p = freep; !(bp > p && bp < p->s.ptr); p = p->s.ptr)
- 68a:	00000797          	auipc	a5,0x0
- 68e:	1ee7b783          	ld	a5,494(a5) # 878 <freep>
- 692:	a02d                	j	6bc <free+0x3c>
+ 69a:	00000797          	auipc	a5,0x0
+ 69e:	1ee7b783          	ld	a5,494(a5) # 888 <freep>
+ 6a2:	a02d                	j	6cc <free+0x3c>
     if(p >= p->s.ptr && (bp > p || bp < p->s.ptr))
       break;
   if(bp + bp->s.size == p->s.ptr){
     bp->s.size += p->s.ptr->s.size;
- 694:	4618                	lw	a4,8(a2)
- 696:	9f2d                	addw	a4,a4,a1
- 698:	fee52c23          	sw	a4,-8(a0)
+ 6a4:	4618                	lw	a4,8(a2)
+ 6a6:	9f2d                	addw	a4,a4,a1
+ 6a8:	fee52c23          	sw	a4,-8(a0)
     bp->s.ptr = p->s.ptr->s.ptr;
- 69c:	6398                	ld	a4,0(a5)
- 69e:	6310                	ld	a2,0(a4)
- 6a0:	a83d                	j	6de <free+0x5e>
+ 6ac:	6398                	ld	a4,0(a5)
+ 6ae:	6310                	ld	a2,0(a4)
+ 6b0:	a83d                	j	6ee <free+0x5e>
   } else
     bp->s.ptr = p->s.ptr;
   if(p + p->s.size == bp){
     p->s.size += bp->s.size;
- 6a2:	ff852703          	lw	a4,-8(a0)
- 6a6:	9f31                	addw	a4,a4,a2
- 6a8:	c798                	sw	a4,8(a5)
+ 6b2:	ff852703          	lw	a4,-8(a0)
+ 6b6:	9f31                	addw	a4,a4,a2
+ 6b8:	c798                	sw	a4,8(a5)
     p->s.ptr = bp->s.ptr;
- 6aa:	ff053683          	ld	a3,-16(a0)
- 6ae:	a091                	j	6f2 <free+0x72>
+ 6ba:	ff053683          	ld	a3,-16(a0)
+ 6be:	a091                	j	702 <free+0x72>
     if(p >= p->s.ptr && (bp > p || bp < p->s.ptr))
- 6b0:	6398                	ld	a4,0(a5)
- 6b2:	00e7e463          	bltu	a5,a4,6ba <free+0x3a>
- 6b6:	00e6ea63          	bltu	a3,a4,6ca <free+0x4a>
+ 6c0:	6398                	ld	a4,0(a5)
+ 6c2:	00e7e463          	bltu	a5,a4,6ca <free+0x3a>
+ 6c6:	00e6ea63          	bltu	a3,a4,6da <free+0x4a>
 {
- 6ba:	87ba                	mv	a5,a4
+ 6ca:	87ba                	mv	a5,a4
   for(p = freep; !(bp > p && bp < p->s.ptr); p = p->s.ptr)
- 6bc:	fed7fae3          	bgeu	a5,a3,6b0 <free+0x30>
- 6c0:	6398                	ld	a4,0(a5)
- 6c2:	00e6e463          	bltu	a3,a4,6ca <free+0x4a>
+ 6cc:	fed7fae3          	bgeu	a5,a3,6c0 <free+0x30>
+ 6d0:	6398                	ld	a4,0(a5)
+ 6d2:	00e6e463          	bltu	a3,a4,6da <free+0x4a>
     if(p >= p->s.ptr && (bp > p || bp < p->s.ptr))
- 6c6:	fee7eae3          	bltu	a5,a4,6ba <free+0x3a>
+ 6d6:	fee7eae3          	bltu	a5,a4,6ca <free+0x3a>
   if(bp + bp->s.size == p->s.ptr){
- 6ca:	ff852583          	lw	a1,-8(a0)
- 6ce:	6390                	ld	a2,0(a5)
- 6d0:	02059813          	slli	a6,a1,0x20
- 6d4:	01c85713          	srli	a4,a6,0x1c
- 6d8:	9736                	add	a4,a4,a3
- 6da:	fae60de3          	beq	a2,a4,694 <free+0x14>
+ 6da:	ff852583          	lw	a1,-8(a0)
+ 6de:	6390                	ld	a2,0(a5)
+ 6e0:	02059813          	slli	a6,a1,0x20
+ 6e4:	01c85713          	srli	a4,a6,0x1c
+ 6e8:	9736                	add	a4,a4,a3
+ 6ea:	fae60de3          	beq	a2,a4,6a4 <free+0x14>
     bp->s.ptr = p->s.ptr->s.ptr;
- 6de:	fec53823          	sd	a2,-16(a0)
+ 6ee:	fec53823          	sd	a2,-16(a0)
   if(p + p->s.size == bp){
- 6e2:	4790                	lw	a2,8(a5)
- 6e4:	02061593          	slli	a1,a2,0x20
- 6e8:	01c5d713          	srli	a4,a1,0x1c
- 6ec:	973e                	add	a4,a4,a5
- 6ee:	fae68ae3          	beq	a3,a4,6a2 <free+0x22>
+ 6f2:	4790                	lw	a2,8(a5)
+ 6f4:	02061593          	slli	a1,a2,0x20
+ 6f8:	01c5d713          	srli	a4,a1,0x1c
+ 6fc:	973e                	add	a4,a4,a5
+ 6fe:	fae68ae3          	beq	a3,a4,6b2 <free+0x22>
     p->s.ptr = bp->s.ptr;
- 6f2:	e394                	sd	a3,0(a5)
+ 702:	e394                	sd	a3,0(a5)
   } else
     p->s.ptr = bp;
   freep = p;
- 6f4:	00000717          	auipc	a4,0x0
- 6f8:	18f73223          	sd	a5,388(a4) # 878 <freep>
+ 704:	00000717          	auipc	a4,0x0
+ 708:	18f73223          	sd	a5,388(a4) # 888 <freep>
 }
- 6fc:	6422                	ld	s0,8(sp)
- 6fe:	0141                	addi	sp,sp,16
- 700:	8082                	ret
+ 70c:	6422                	ld	s0,8(sp)
+ 70e:	0141                	addi	sp,sp,16
+ 710:	8082                	ret
 
-0000000000000702 <malloc>:
+0000000000000712 <malloc>:
   return freep;
 }
 
 void*
 malloc(uint nbytes)
 {
- 702:	7139                	addi	sp,sp,-64
- 704:	fc06                	sd	ra,56(sp)
- 706:	f822                	sd	s0,48(sp)
- 708:	f426                	sd	s1,40(sp)
- 70a:	f04a                	sd	s2,32(sp)
- 70c:	ec4e                	sd	s3,24(sp)
- 70e:	e852                	sd	s4,16(sp)
- 710:	e456                	sd	s5,8(sp)
- 712:	e05a                	sd	s6,0(sp)
- 714:	0080                	addi	s0,sp,64
+ 712:	7139                	addi	sp,sp,-64
+ 714:	fc06                	sd	ra,56(sp)
+ 716:	f822                	sd	s0,48(sp)
+ 718:	f426                	sd	s1,40(sp)
+ 71a:	f04a                	sd	s2,32(sp)
+ 71c:	ec4e                	sd	s3,24(sp)
+ 71e:	e852                	sd	s4,16(sp)
+ 720:	e456                	sd	s5,8(sp)
+ 722:	e05a                	sd	s6,0(sp)
+ 724:	0080                	addi	s0,sp,64
   Header *p, *prevp;
   uint nunits;
 
   nunits = (nbytes + sizeof(Header) - 1)/sizeof(Header) + 1;
- 716:	02051493          	slli	s1,a0,0x20
- 71a:	9081                	srli	s1,s1,0x20
- 71c:	04bd                	addi	s1,s1,15
- 71e:	8091                	srli	s1,s1,0x4
- 720:	0014899b          	addiw	s3,s1,1
- 724:	0485                	addi	s1,s1,1
+ 726:	02051493          	slli	s1,a0,0x20
+ 72a:	9081                	srli	s1,s1,0x20
+ 72c:	04bd                	addi	s1,s1,15
+ 72e:	8091                	srli	s1,s1,0x4
+ 730:	0014899b          	addiw	s3,s1,1
+ 734:	0485                	addi	s1,s1,1
   if((prevp = freep) == 0){
- 726:	00000517          	auipc	a0,0x0
- 72a:	15253503          	ld	a0,338(a0) # 878 <freep>
- 72e:	c515                	beqz	a0,75a <malloc+0x58>
+ 736:	00000517          	auipc	a0,0x0
+ 73a:	15253503          	ld	a0,338(a0) # 888 <freep>
+ 73e:	c515                	beqz	a0,76a <malloc+0x58>
     base.s.ptr = freep = prevp = &base;
     base.s.size = 0;
   }
   for(p = prevp->s.ptr; ; prevp = p, p = p->s.ptr){
- 730:	611c                	ld	a5,0(a0)
+ 740:	611c                	ld	a5,0(a0)
     if(p->s.size >= nunits){
- 732:	4798                	lw	a4,8(a5)
- 734:	02977f63          	bgeu	a4,s1,772 <malloc+0x70>
- 738:	8a4e                	mv	s4,s3
- 73a:	0009871b          	sext.w	a4,s3
- 73e:	6685                	lui	a3,0x1
- 740:	00d77363          	bgeu	a4,a3,746 <malloc+0x44>
- 744:	6a05                	lui	s4,0x1
- 746:	000a0b1b          	sext.w	s6,s4
+ 742:	4798                	lw	a4,8(a5)
+ 744:	02977f63          	bgeu	a4,s1,782 <malloc+0x70>
+ 748:	8a4e                	mv	s4,s3
+ 74a:	0009871b          	sext.w	a4,s3
+ 74e:	6685                	lui	a3,0x1
+ 750:	00d77363          	bgeu	a4,a3,756 <malloc+0x44>
+ 754:	6a05                	lui	s4,0x1
+ 756:	000a0b1b          	sext.w	s6,s4
   p = sbrk(nu * sizeof(Header));
- 74a:	004a1a1b          	slliw	s4,s4,0x4
+ 75a:	004a1a1b          	slliw	s4,s4,0x4
         p->s.size = nunits;
       }
       freep = prevp;
       return (void*)(p + 1);
     }
     if(p == freep)
- 74e:	00000917          	auipc	s2,0x0
- 752:	12a90913          	addi	s2,s2,298 # 878 <freep>
+ 75e:	00000917          	auipc	s2,0x0
+ 762:	12a90913          	addi	s2,s2,298 # 888 <freep>
   if(p == (char*)-1)
- 756:	5afd                	li	s5,-1
- 758:	a895                	j	7cc <malloc+0xca>
+ 766:	5afd                	li	s5,-1
+ 768:	a895                	j	7dc <malloc+0xca>
     base.s.ptr = freep = prevp = &base;
- 75a:	00000797          	auipc	a5,0x0
- 75e:	12678793          	addi	a5,a5,294 # 880 <base>
- 762:	00000717          	auipc	a4,0x0
- 766:	10f73b23          	sd	a5,278(a4) # 878 <freep>
- 76a:	e39c                	sd	a5,0(a5)
+ 76a:	00000797          	auipc	a5,0x0
+ 76e:	12678793          	addi	a5,a5,294 # 890 <base>
+ 772:	00000717          	auipc	a4,0x0
+ 776:	10f73b23          	sd	a5,278(a4) # 888 <freep>
+ 77a:	e39c                	sd	a5,0(a5)
     base.s.size = 0;
- 76c:	0007a423          	sw	zero,8(a5)
+ 77c:	0007a423          	sw	zero,8(a5)
     if(p->s.size >= nunits){
- 770:	b7e1                	j	738 <malloc+0x36>
+ 780:	b7e1                	j	748 <malloc+0x36>
       if(p->s.size == nunits)
- 772:	02e48c63          	beq	s1,a4,7aa <malloc+0xa8>
+ 782:	02e48c63          	beq	s1,a4,7ba <malloc+0xa8>
         p->s.size -= nunits;
- 776:	4137073b          	subw	a4,a4,s3
- 77a:	c798                	sw	a4,8(a5)
+ 786:	4137073b          	subw	a4,a4,s3
+ 78a:	c798                	sw	a4,8(a5)
         p += p->s.size;
- 77c:	02071693          	slli	a3,a4,0x20
- 780:	01c6d713          	srli	a4,a3,0x1c
- 784:	97ba                	add	a5,a5,a4
+ 78c:	02071693          	slli	a3,a4,0x20
+ 790:	01c6d713          	srli	a4,a3,0x1c
+ 794:	97ba                	add	a5,a5,a4
         p->s.size = nunits;
- 786:	0137a423          	sw	s3,8(a5)
+ 796:	0137a423          	sw	s3,8(a5)
       freep = prevp;
- 78a:	00000717          	auipc	a4,0x0
- 78e:	0ea73723          	sd	a0,238(a4) # 878 <freep>
+ 79a:	00000717          	auipc	a4,0x0
+ 79e:	0ea73723          	sd	a0,238(a4) # 888 <freep>
       return (void*)(p + 1);
- 792:	01078513          	addi	a0,a5,16
+ 7a2:	01078513          	addi	a0,a5,16
       if((p = morecore(nunits)) == 0)
         return 0;
   }
 }
- 796:	70e2                	ld	ra,56(sp)
- 798:	7442                	ld	s0,48(sp)
- 79a:	74a2                	ld	s1,40(sp)
- 79c:	7902                	ld	s2,32(sp)
- 79e:	69e2                	ld	s3,24(sp)
- 7a0:	6a42                	ld	s4,16(sp)
- 7a2:	6aa2                	ld	s5,8(sp)
- 7a4:	6b02                	ld	s6,0(sp)
- 7a6:	6121                	addi	sp,sp,64
- 7a8:	8082                	ret
+ 7a6:	70e2                	ld	ra,56(sp)
+ 7a8:	7442                	ld	s0,48(sp)
+ 7aa:	74a2                	ld	s1,40(sp)
+ 7ac:	7902                	ld	s2,32(sp)
+ 7ae:	69e2                	ld	s3,24(sp)
+ 7b0:	6a42                	ld	s4,16(sp)
+ 7b2:	6aa2                	ld	s5,8(sp)
+ 7b4:	6b02                	ld	s6,0(sp)
+ 7b6:	6121                	addi	sp,sp,64
+ 7b8:	8082                	ret
         prevp->s.ptr = p->s.ptr;
- 7aa:	6398                	ld	a4,0(a5)
- 7ac:	e118                	sd	a4,0(a0)
- 7ae:	bff1                	j	78a <malloc+0x88>
+ 7ba:	6398                	ld	a4,0(a5)
+ 7bc:	e118                	sd	a4,0(a0)
+ 7be:	bff1                	j	79a <malloc+0x88>
   hp->s.size = nu;
- 7b0:	01652423          	sw	s6,8(a0)
+ 7c0:	01652423          	sw	s6,8(a0)
   free((void*)(hp + 1));
- 7b4:	0541                	addi	a0,a0,16
- 7b6:	00000097          	auipc	ra,0x0
- 7ba:	eca080e7          	jalr	-310(ra) # 680 <free>
+ 7c4:	0541                	addi	a0,a0,16
+ 7c6:	00000097          	auipc	ra,0x0
+ 7ca:	eca080e7          	jalr	-310(ra) # 690 <free>
   return freep;
- 7be:	00093503          	ld	a0,0(s2)
+ 7ce:	00093503          	ld	a0,0(s2)
       if((p = morecore(nunits)) == 0)
- 7c2:	d971                	beqz	a0,796 <malloc+0x94>
+ 7d2:	d971                	beqz	a0,7a6 <malloc+0x94>
   for(p = prevp->s.ptr; ; prevp = p, p = p->s.ptr){
- 7c4:	611c                	ld	a5,0(a0)
+ 7d4:	611c                	ld	a5,0(a0)
     if(p->s.size >= nunits){
- 7c6:	4798                	lw	a4,8(a5)
- 7c8:	fa9775e3          	bgeu	a4,s1,772 <malloc+0x70>
+ 7d6:	4798                	lw	a4,8(a5)
+ 7d8:	fa9775e3          	bgeu	a4,s1,782 <malloc+0x70>
     if(p == freep)
- 7cc:	00093703          	ld	a4,0(s2)
- 7d0:	853e                	mv	a0,a5
- 7d2:	fef719e3          	bne	a4,a5,7c4 <malloc+0xc2>
+ 7dc:	00093703          	ld	a4,0(s2)
+ 7e0:	853e                	mv	a0,a5
+ 7e2:	fef719e3          	bne	a4,a5,7d4 <malloc+0xc2>
   p = sbrk(nu * sizeof(Header));
- 7d6:	8552                	mv	a0,s4
- 7d8:	00000097          	auipc	ra,0x0
- 7dc:	b80080e7          	jalr	-1152(ra) # 358 <sbrk>
+ 7e6:	8552                	mv	a0,s4
+ 7e8:	00000097          	auipc	ra,0x0
+ 7ec:	b70080e7          	jalr	-1168(ra) # 358 <sbrk>
   if(p == (char*)-1)
- 7e0:	fd5518e3          	bne	a0,s5,7b0 <malloc+0xae>
+ 7f0:	fd5518e3          	bne	a0,s5,7c0 <malloc+0xae>
         return 0;
- 7e4:	4501                	li	a0,0
- 7e6:	bf45                	j	796 <malloc+0x94>
+ 7f4:	4501                	li	a0,0
+ 7f6:	bf45                	j	7a6 <malloc+0x94>
Binary files ./user/kill.o and ../xv6-labs-2021/user/kill.o differ
diff -urN ./user/kill.sym ../xv6-labs-2021/user/kill.sym
--- ./user/kill.sym	2021-12-05 17:54:42.000000000 +0800
+++ ../xv6-labs-2021/user/kill.sym	2021-11-26 14:46:16.000000000 +0800
@@ -1,7 +1,7 @@
 0000000000000000 .text
-00000000000007e8 .rodata
-0000000000000878 .sbss
-0000000000000880 .bss
+00000000000007f8 .rodata
+0000000000000888 .sbss
+0000000000000890 .bss
 0000000000000000 .comment
 0000000000000000 .riscv.attributes
 0000000000000000 .debug_aranges
@@ -16,29 +16,31 @@
 0000000000000000 kill.c
 0000000000000000 ulib.c
 0000000000000000 printf.c
-0000000000000370 putc
-0000000000000392 printint
-0000000000000860 digits
+0000000000000380 putc
+00000000000003a2 printint
+0000000000000870 digits
 0000000000000000 umalloc.c
-0000000000000878 freep
-0000000000000880 base
+0000000000000888 freep
+0000000000000890 base
 0000000000000064 strcpy
-000000000000064a printf
-0000000000001071 __global_pointer$
+000000000000065a printf
+0000000000001081 __global_pointer$
 000000000000021e memmove
 0000000000000318 mknod
+0000000000000370 trace
 000000000000011c gets
-0000000000000871 __SDATA_BEGIN__
+0000000000000881 __SDATA_BEGIN__
 0000000000000350 getpid
 00000000000002b0 memcpy
-0000000000000702 malloc
+0000000000000712 malloc
 0000000000000360 sleep
+0000000000000378 sysinfo
 00000000000002e0 pipe
 00000000000002f0 write
 0000000000000328 fstat
-000000000000061c fprintf
+000000000000062c fprintf
 0000000000000300 kill
-000000000000043e vprintf
+000000000000044e vprintf
 0000000000000340 chdir
 0000000000000308 exec
 00000000000002d8 wait
@@ -46,18 +48,18 @@
 0000000000000320 unlink
 0000000000000276 memcmp
 00000000000002c8 fork
-0000000000000890 __BSS_END__
+00000000000008a0 __BSS_END__
 0000000000000358 sbrk
 0000000000000368 uptime
-0000000000000871 __bss_start
+0000000000000881 __bss_start
 00000000000000d6 memset
 0000000000000000 main
 0000000000000080 strcmp
 0000000000000348 dup
-0000000000000871 __DATA_BEGIN__
+0000000000000881 __DATA_BEGIN__
 0000000000000190 stat
-0000000000000871 _edata
-0000000000000890 _end
+0000000000000881 _edata
+00000000000008a0 _end
 0000000000000330 link
 00000000000002d0 exit
 00000000000001d6 atoi
@@ -66,4 +68,4 @@
 00000000000000f8 strchr
 0000000000000338 mkdir
 00000000000002f8 close
-0000000000000680 free
+0000000000000690 free
diff -urN ./user/ln.asm ../xv6-labs-2021/user/ln.asm
--- ./user/ln.asm	2021-12-05 17:54:42.000000000 +0800
+++ ../xv6-labs-2021/user/ln.asm	2021-11-26 14:46:16.000000000 +0800
@@ -21,10 +21,10 @@
    c:	02f50063          	beq	a0,a5,2c <main+0x2c>
     fprintf(2, "Usage: ln old new\n");
   10:	00000597          	auipc	a1,0x0
-  14:	7d858593          	addi	a1,a1,2008 # 7e8 <malloc+0xea>
+  14:	7e858593          	addi	a1,a1,2024 # 7f8 <malloc+0xea>
   18:	4509                	li	a0,2
   1a:	00000097          	auipc	ra,0x0
-  1e:	5fe080e7          	jalr	1534(ra) # 618 <fprintf>
+  1e:	60e080e7          	jalr	1550(ra) # 628 <fprintf>
     exit(1);
   22:	4505                	li	a0,1
   24:	00000097          	auipc	ra,0x0
@@ -46,10 +46,10 @@
   48:	6894                	ld	a3,16(s1)
   4a:	6490                	ld	a2,8(s1)
   4c:	00000597          	auipc	a1,0x0
-  50:	7b458593          	addi	a1,a1,1972 # 800 <malloc+0x102>
+  50:	7c458593          	addi	a1,a1,1988 # 810 <malloc+0x102>
   54:	4509                	li	a0,2
   56:	00000097          	auipc	ra,0x0
-  5a:	5c2080e7          	jalr	1474(ra) # 618 <fprintf>
+  5a:	5d2080e7          	jalr	1490(ra) # 628 <fprintf>
   5e:	b7c5                	j	3e <main+0x3e>
 
 0000000000000060 <strcpy>:
@@ -683,632 +683,652 @@
  ret
  36a:	8082                	ret
 
-000000000000036c <putc>:
+000000000000036c <trace>:
+.global trace
+trace:
+ li a7, SYS_trace
+ 36c:	48d9                	li	a7,22
+ ecall
+ 36e:	00000073          	ecall
+ ret
+ 372:	8082                	ret
+
+0000000000000374 <sysinfo>:
+.global sysinfo
+sysinfo:
+ li a7, SYS_sysinfo
+ 374:	48dd                	li	a7,23
+ ecall
+ 376:	00000073          	ecall
+ ret
+ 37a:	8082                	ret
+
+000000000000037c <putc>:
 
 static char digits[] = "0123456789ABCDEF";
 
 static void
 putc(int fd, char c)
 {
- 36c:	1101                	addi	sp,sp,-32
- 36e:	ec06                	sd	ra,24(sp)
- 370:	e822                	sd	s0,16(sp)
- 372:	1000                	addi	s0,sp,32
- 374:	feb407a3          	sb	a1,-17(s0)
+ 37c:	1101                	addi	sp,sp,-32
+ 37e:	ec06                	sd	ra,24(sp)
+ 380:	e822                	sd	s0,16(sp)
+ 382:	1000                	addi	s0,sp,32
+ 384:	feb407a3          	sb	a1,-17(s0)
   write(fd, &c, 1);
- 378:	4605                	li	a2,1
- 37a:	fef40593          	addi	a1,s0,-17
- 37e:	00000097          	auipc	ra,0x0
- 382:	f6e080e7          	jalr	-146(ra) # 2ec <write>
+ 388:	4605                	li	a2,1
+ 38a:	fef40593          	addi	a1,s0,-17
+ 38e:	00000097          	auipc	ra,0x0
+ 392:	f5e080e7          	jalr	-162(ra) # 2ec <write>
 }
- 386:	60e2                	ld	ra,24(sp)
- 388:	6442                	ld	s0,16(sp)
- 38a:	6105                	addi	sp,sp,32
- 38c:	8082                	ret
+ 396:	60e2                	ld	ra,24(sp)
+ 398:	6442                	ld	s0,16(sp)
+ 39a:	6105                	addi	sp,sp,32
+ 39c:	8082                	ret
 
-000000000000038e <printint>:
+000000000000039e <printint>:
 
 static void
 printint(int fd, int xx, int base, int sgn)
 {
- 38e:	7139                	addi	sp,sp,-64
- 390:	fc06                	sd	ra,56(sp)
- 392:	f822                	sd	s0,48(sp)
- 394:	f426                	sd	s1,40(sp)
- 396:	f04a                	sd	s2,32(sp)
- 398:	ec4e                	sd	s3,24(sp)
- 39a:	0080                	addi	s0,sp,64
- 39c:	84aa                	mv	s1,a0
+ 39e:	7139                	addi	sp,sp,-64
+ 3a0:	fc06                	sd	ra,56(sp)
+ 3a2:	f822                	sd	s0,48(sp)
+ 3a4:	f426                	sd	s1,40(sp)
+ 3a6:	f04a                	sd	s2,32(sp)
+ 3a8:	ec4e                	sd	s3,24(sp)
+ 3aa:	0080                	addi	s0,sp,64
+ 3ac:	84aa                	mv	s1,a0
   char buf[16];
   int i, neg;
   uint x;
 
   neg = 0;
   if(sgn && xx < 0){
- 39e:	c299                	beqz	a3,3a4 <printint+0x16>
- 3a0:	0805c963          	bltz	a1,432 <printint+0xa4>
+ 3ae:	c299                	beqz	a3,3b4 <printint+0x16>
+ 3b0:	0805c963          	bltz	a1,442 <printint+0xa4>
     neg = 1;
     x = -xx;
   } else {
     x = xx;
- 3a4:	2581                	sext.w	a1,a1
+ 3b4:	2581                	sext.w	a1,a1
   neg = 0;
- 3a6:	4881                	li	a7,0
- 3a8:	fc040693          	addi	a3,s0,-64
+ 3b6:	4881                	li	a7,0
+ 3b8:	fc040693          	addi	a3,s0,-64
   }
 
   i = 0;
- 3ac:	4701                	li	a4,0
+ 3bc:	4701                	li	a4,0
   do{
     buf[i++] = digits[x % base];
- 3ae:	2601                	sext.w	a2,a2
- 3b0:	00000517          	auipc	a0,0x0
- 3b4:	4c850513          	addi	a0,a0,1224 # 878 <digits>
- 3b8:	883a                	mv	a6,a4
- 3ba:	2705                	addiw	a4,a4,1
- 3bc:	02c5f7bb          	remuw	a5,a1,a2
- 3c0:	1782                	slli	a5,a5,0x20
- 3c2:	9381                	srli	a5,a5,0x20
- 3c4:	97aa                	add	a5,a5,a0
- 3c6:	0007c783          	lbu	a5,0(a5)
- 3ca:	00f68023          	sb	a5,0(a3)
+ 3be:	2601                	sext.w	a2,a2
+ 3c0:	00000517          	auipc	a0,0x0
+ 3c4:	4c850513          	addi	a0,a0,1224 # 888 <digits>
+ 3c8:	883a                	mv	a6,a4
+ 3ca:	2705                	addiw	a4,a4,1
+ 3cc:	02c5f7bb          	remuw	a5,a1,a2
+ 3d0:	1782                	slli	a5,a5,0x20
+ 3d2:	9381                	srli	a5,a5,0x20
+ 3d4:	97aa                	add	a5,a5,a0
+ 3d6:	0007c783          	lbu	a5,0(a5)
+ 3da:	00f68023          	sb	a5,0(a3)
   }while((x /= base) != 0);
- 3ce:	0005879b          	sext.w	a5,a1
- 3d2:	02c5d5bb          	divuw	a1,a1,a2
- 3d6:	0685                	addi	a3,a3,1
- 3d8:	fec7f0e3          	bgeu	a5,a2,3b8 <printint+0x2a>
+ 3de:	0005879b          	sext.w	a5,a1
+ 3e2:	02c5d5bb          	divuw	a1,a1,a2
+ 3e6:	0685                	addi	a3,a3,1
+ 3e8:	fec7f0e3          	bgeu	a5,a2,3c8 <printint+0x2a>
   if(neg)
- 3dc:	00088c63          	beqz	a7,3f4 <printint+0x66>
+ 3ec:	00088c63          	beqz	a7,404 <printint+0x66>
     buf[i++] = '-';
- 3e0:	fd070793          	addi	a5,a4,-48
- 3e4:	00878733          	add	a4,a5,s0
- 3e8:	02d00793          	li	a5,45
- 3ec:	fef70823          	sb	a5,-16(a4)
- 3f0:	0028071b          	addiw	a4,a6,2
+ 3f0:	fd070793          	addi	a5,a4,-48
+ 3f4:	00878733          	add	a4,a5,s0
+ 3f8:	02d00793          	li	a5,45
+ 3fc:	fef70823          	sb	a5,-16(a4)
+ 400:	0028071b          	addiw	a4,a6,2
 
   while(--i >= 0)
- 3f4:	02e05863          	blez	a4,424 <printint+0x96>
- 3f8:	fc040793          	addi	a5,s0,-64
- 3fc:	00e78933          	add	s2,a5,a4
- 400:	fff78993          	addi	s3,a5,-1
- 404:	99ba                	add	s3,s3,a4
- 406:	377d                	addiw	a4,a4,-1
- 408:	1702                	slli	a4,a4,0x20
- 40a:	9301                	srli	a4,a4,0x20
- 40c:	40e989b3          	sub	s3,s3,a4
+ 404:	02e05863          	blez	a4,434 <printint+0x96>
+ 408:	fc040793          	addi	a5,s0,-64
+ 40c:	00e78933          	add	s2,a5,a4
+ 410:	fff78993          	addi	s3,a5,-1
+ 414:	99ba                	add	s3,s3,a4
+ 416:	377d                	addiw	a4,a4,-1
+ 418:	1702                	slli	a4,a4,0x20
+ 41a:	9301                	srli	a4,a4,0x20
+ 41c:	40e989b3          	sub	s3,s3,a4
     putc(fd, buf[i]);
- 410:	fff94583          	lbu	a1,-1(s2)
- 414:	8526                	mv	a0,s1
- 416:	00000097          	auipc	ra,0x0
- 41a:	f56080e7          	jalr	-170(ra) # 36c <putc>
+ 420:	fff94583          	lbu	a1,-1(s2)
+ 424:	8526                	mv	a0,s1
+ 426:	00000097          	auipc	ra,0x0
+ 42a:	f56080e7          	jalr	-170(ra) # 37c <putc>
   while(--i >= 0)
- 41e:	197d                	addi	s2,s2,-1
- 420:	ff3918e3          	bne	s2,s3,410 <printint+0x82>
+ 42e:	197d                	addi	s2,s2,-1
+ 430:	ff3918e3          	bne	s2,s3,420 <printint+0x82>
 }
- 424:	70e2                	ld	ra,56(sp)
- 426:	7442                	ld	s0,48(sp)
- 428:	74a2                	ld	s1,40(sp)
- 42a:	7902                	ld	s2,32(sp)
- 42c:	69e2                	ld	s3,24(sp)
- 42e:	6121                	addi	sp,sp,64
- 430:	8082                	ret
+ 434:	70e2                	ld	ra,56(sp)
+ 436:	7442                	ld	s0,48(sp)
+ 438:	74a2                	ld	s1,40(sp)
+ 43a:	7902                	ld	s2,32(sp)
+ 43c:	69e2                	ld	s3,24(sp)
+ 43e:	6121                	addi	sp,sp,64
+ 440:	8082                	ret
     x = -xx;
- 432:	40b005bb          	negw	a1,a1
+ 442:	40b005bb          	negw	a1,a1
     neg = 1;
- 436:	4885                	li	a7,1
+ 446:	4885                	li	a7,1
     x = -xx;
- 438:	bf85                	j	3a8 <printint+0x1a>
+ 448:	bf85                	j	3b8 <printint+0x1a>
 
-000000000000043a <vprintf>:
+000000000000044a <vprintf>:
 }
 
 // Print to the given fd. Only understands %d, %x, %p, %s.
 void
 vprintf(int fd, const char *fmt, va_list ap)
 {
- 43a:	7119                	addi	sp,sp,-128
- 43c:	fc86                	sd	ra,120(sp)
- 43e:	f8a2                	sd	s0,112(sp)
- 440:	f4a6                	sd	s1,104(sp)
- 442:	f0ca                	sd	s2,96(sp)
- 444:	ecce                	sd	s3,88(sp)
- 446:	e8d2                	sd	s4,80(sp)
- 448:	e4d6                	sd	s5,72(sp)
- 44a:	e0da                	sd	s6,64(sp)
- 44c:	fc5e                	sd	s7,56(sp)
- 44e:	f862                	sd	s8,48(sp)
- 450:	f466                	sd	s9,40(sp)
- 452:	f06a                	sd	s10,32(sp)
- 454:	ec6e                	sd	s11,24(sp)
- 456:	0100                	addi	s0,sp,128
+ 44a:	7119                	addi	sp,sp,-128
+ 44c:	fc86                	sd	ra,120(sp)
+ 44e:	f8a2                	sd	s0,112(sp)
+ 450:	f4a6                	sd	s1,104(sp)
+ 452:	f0ca                	sd	s2,96(sp)
+ 454:	ecce                	sd	s3,88(sp)
+ 456:	e8d2                	sd	s4,80(sp)
+ 458:	e4d6                	sd	s5,72(sp)
+ 45a:	e0da                	sd	s6,64(sp)
+ 45c:	fc5e                	sd	s7,56(sp)
+ 45e:	f862                	sd	s8,48(sp)
+ 460:	f466                	sd	s9,40(sp)
+ 462:	f06a                	sd	s10,32(sp)
+ 464:	ec6e                	sd	s11,24(sp)
+ 466:	0100                	addi	s0,sp,128
   char *s;
   int c, i, state;
 
   state = 0;
   for(i = 0; fmt[i]; i++){
- 458:	0005c903          	lbu	s2,0(a1)
- 45c:	18090f63          	beqz	s2,5fa <vprintf+0x1c0>
- 460:	8aaa                	mv	s5,a0
- 462:	8b32                	mv	s6,a2
- 464:	00158493          	addi	s1,a1,1
+ 468:	0005c903          	lbu	s2,0(a1)
+ 46c:	18090f63          	beqz	s2,60a <vprintf+0x1c0>
+ 470:	8aaa                	mv	s5,a0
+ 472:	8b32                	mv	s6,a2
+ 474:	00158493          	addi	s1,a1,1
   state = 0;
- 468:	4981                	li	s3,0
+ 478:	4981                	li	s3,0
       if(c == '%'){
         state = '%';
       } else {
         putc(fd, c);
       }
     } else if(state == '%'){
- 46a:	02500a13          	li	s4,37
- 46e:	4c55                	li	s8,21
- 470:	00000c97          	auipc	s9,0x0
- 474:	3b0c8c93          	addi	s9,s9,944 # 820 <malloc+0x122>
+ 47a:	02500a13          	li	s4,37
+ 47e:	4c55                	li	s8,21
+ 480:	00000c97          	auipc	s9,0x0
+ 484:	3b0c8c93          	addi	s9,s9,944 # 830 <malloc+0x122>
         printptr(fd, va_arg(ap, uint64));
       } else if(c == 's'){
         s = va_arg(ap, char*);
         if(s == 0)
           s = "(null)";
         while(*s != 0){
- 478:	02800d93          	li	s11,40
+ 488:	02800d93          	li	s11,40
   putc(fd, 'x');
- 47c:	4d41                	li	s10,16
+ 48c:	4d41                	li	s10,16
     putc(fd, digits[x >> (sizeof(uint64) * 8 - 4)]);
- 47e:	00000b97          	auipc	s7,0x0
- 482:	3fab8b93          	addi	s7,s7,1018 # 878 <digits>
- 486:	a839                	j	4a4 <vprintf+0x6a>
+ 48e:	00000b97          	auipc	s7,0x0
+ 492:	3fab8b93          	addi	s7,s7,1018 # 888 <digits>
+ 496:	a839                	j	4b4 <vprintf+0x6a>
         putc(fd, c);
- 488:	85ca                	mv	a1,s2
- 48a:	8556                	mv	a0,s5
- 48c:	00000097          	auipc	ra,0x0
- 490:	ee0080e7          	jalr	-288(ra) # 36c <putc>
- 494:	a019                	j	49a <vprintf+0x60>
+ 498:	85ca                	mv	a1,s2
+ 49a:	8556                	mv	a0,s5
+ 49c:	00000097          	auipc	ra,0x0
+ 4a0:	ee0080e7          	jalr	-288(ra) # 37c <putc>
+ 4a4:	a019                	j	4aa <vprintf+0x60>
     } else if(state == '%'){
- 496:	01498d63          	beq	s3,s4,4b0 <vprintf+0x76>
+ 4a6:	01498d63          	beq	s3,s4,4c0 <vprintf+0x76>
   for(i = 0; fmt[i]; i++){
- 49a:	0485                	addi	s1,s1,1
- 49c:	fff4c903          	lbu	s2,-1(s1)
- 4a0:	14090d63          	beqz	s2,5fa <vprintf+0x1c0>
+ 4aa:	0485                	addi	s1,s1,1
+ 4ac:	fff4c903          	lbu	s2,-1(s1)
+ 4b0:	14090d63          	beqz	s2,60a <vprintf+0x1c0>
     if(state == 0){
- 4a4:	fe0999e3          	bnez	s3,496 <vprintf+0x5c>
+ 4b4:	fe0999e3          	bnez	s3,4a6 <vprintf+0x5c>
       if(c == '%'){
- 4a8:	ff4910e3          	bne	s2,s4,488 <vprintf+0x4e>
+ 4b8:	ff4910e3          	bne	s2,s4,498 <vprintf+0x4e>
         state = '%';
- 4ac:	89d2                	mv	s3,s4
- 4ae:	b7f5                	j	49a <vprintf+0x60>
+ 4bc:	89d2                	mv	s3,s4
+ 4be:	b7f5                	j	4aa <vprintf+0x60>
       if(c == 'd'){
- 4b0:	11490c63          	beq	s2,s4,5c8 <vprintf+0x18e>
- 4b4:	f9d9079b          	addiw	a5,s2,-99
- 4b8:	0ff7f793          	zext.b	a5,a5
- 4bc:	10fc6e63          	bltu	s8,a5,5d8 <vprintf+0x19e>
- 4c0:	f9d9079b          	addiw	a5,s2,-99
- 4c4:	0ff7f713          	zext.b	a4,a5
- 4c8:	10ec6863          	bltu	s8,a4,5d8 <vprintf+0x19e>
- 4cc:	00271793          	slli	a5,a4,0x2
- 4d0:	97e6                	add	a5,a5,s9
- 4d2:	439c                	lw	a5,0(a5)
- 4d4:	97e6                	add	a5,a5,s9
- 4d6:	8782                	jr	a5
+ 4c0:	11490c63          	beq	s2,s4,5d8 <vprintf+0x18e>
+ 4c4:	f9d9079b          	addiw	a5,s2,-99
+ 4c8:	0ff7f793          	zext.b	a5,a5
+ 4cc:	10fc6e63          	bltu	s8,a5,5e8 <vprintf+0x19e>
+ 4d0:	f9d9079b          	addiw	a5,s2,-99
+ 4d4:	0ff7f713          	zext.b	a4,a5
+ 4d8:	10ec6863          	bltu	s8,a4,5e8 <vprintf+0x19e>
+ 4dc:	00271793          	slli	a5,a4,0x2
+ 4e0:	97e6                	add	a5,a5,s9
+ 4e2:	439c                	lw	a5,0(a5)
+ 4e4:	97e6                	add	a5,a5,s9
+ 4e6:	8782                	jr	a5
         printint(fd, va_arg(ap, int), 10, 1);
- 4d8:	008b0913          	addi	s2,s6,8
- 4dc:	4685                	li	a3,1
- 4de:	4629                	li	a2,10
- 4e0:	000b2583          	lw	a1,0(s6)
- 4e4:	8556                	mv	a0,s5
- 4e6:	00000097          	auipc	ra,0x0
- 4ea:	ea8080e7          	jalr	-344(ra) # 38e <printint>
- 4ee:	8b4a                	mv	s6,s2
+ 4e8:	008b0913          	addi	s2,s6,8
+ 4ec:	4685                	li	a3,1
+ 4ee:	4629                	li	a2,10
+ 4f0:	000b2583          	lw	a1,0(s6)
+ 4f4:	8556                	mv	a0,s5
+ 4f6:	00000097          	auipc	ra,0x0
+ 4fa:	ea8080e7          	jalr	-344(ra) # 39e <printint>
+ 4fe:	8b4a                	mv	s6,s2
       } else {
         // Unknown % sequence.  Print it to draw attention.
         putc(fd, '%');
         putc(fd, c);
       }
       state = 0;
- 4f0:	4981                	li	s3,0
- 4f2:	b765                	j	49a <vprintf+0x60>
+ 500:	4981                	li	s3,0
+ 502:	b765                	j	4aa <vprintf+0x60>
         printint(fd, va_arg(ap, uint64), 10, 0);
- 4f4:	008b0913          	addi	s2,s6,8
- 4f8:	4681                	li	a3,0
- 4fa:	4629                	li	a2,10
- 4fc:	000b2583          	lw	a1,0(s6)
- 500:	8556                	mv	a0,s5
- 502:	00000097          	auipc	ra,0x0
- 506:	e8c080e7          	jalr	-372(ra) # 38e <printint>
- 50a:	8b4a                	mv	s6,s2
+ 504:	008b0913          	addi	s2,s6,8
+ 508:	4681                	li	a3,0
+ 50a:	4629                	li	a2,10
+ 50c:	000b2583          	lw	a1,0(s6)
+ 510:	8556                	mv	a0,s5
+ 512:	00000097          	auipc	ra,0x0
+ 516:	e8c080e7          	jalr	-372(ra) # 39e <printint>
+ 51a:	8b4a                	mv	s6,s2
       state = 0;
- 50c:	4981                	li	s3,0
- 50e:	b771                	j	49a <vprintf+0x60>
+ 51c:	4981                	li	s3,0
+ 51e:	b771                	j	4aa <vprintf+0x60>
         printint(fd, va_arg(ap, int), 16, 0);
- 510:	008b0913          	addi	s2,s6,8
- 514:	4681                	li	a3,0
- 516:	866a                	mv	a2,s10
- 518:	000b2583          	lw	a1,0(s6)
- 51c:	8556                	mv	a0,s5
- 51e:	00000097          	auipc	ra,0x0
- 522:	e70080e7          	jalr	-400(ra) # 38e <printint>
- 526:	8b4a                	mv	s6,s2
+ 520:	008b0913          	addi	s2,s6,8
+ 524:	4681                	li	a3,0
+ 526:	866a                	mv	a2,s10
+ 528:	000b2583          	lw	a1,0(s6)
+ 52c:	8556                	mv	a0,s5
+ 52e:	00000097          	auipc	ra,0x0
+ 532:	e70080e7          	jalr	-400(ra) # 39e <printint>
+ 536:	8b4a                	mv	s6,s2
       state = 0;
- 528:	4981                	li	s3,0
- 52a:	bf85                	j	49a <vprintf+0x60>
+ 538:	4981                	li	s3,0
+ 53a:	bf85                	j	4aa <vprintf+0x60>
         printptr(fd, va_arg(ap, uint64));
- 52c:	008b0793          	addi	a5,s6,8
- 530:	f8f43423          	sd	a5,-120(s0)
- 534:	000b3983          	ld	s3,0(s6)
+ 53c:	008b0793          	addi	a5,s6,8
+ 540:	f8f43423          	sd	a5,-120(s0)
+ 544:	000b3983          	ld	s3,0(s6)
   putc(fd, '0');
- 538:	03000593          	li	a1,48
- 53c:	8556                	mv	a0,s5
- 53e:	00000097          	auipc	ra,0x0
- 542:	e2e080e7          	jalr	-466(ra) # 36c <putc>
+ 548:	03000593          	li	a1,48
+ 54c:	8556                	mv	a0,s5
+ 54e:	00000097          	auipc	ra,0x0
+ 552:	e2e080e7          	jalr	-466(ra) # 37c <putc>
   putc(fd, 'x');
- 546:	07800593          	li	a1,120
- 54a:	8556                	mv	a0,s5
- 54c:	00000097          	auipc	ra,0x0
- 550:	e20080e7          	jalr	-480(ra) # 36c <putc>
- 554:	896a                	mv	s2,s10
+ 556:	07800593          	li	a1,120
+ 55a:	8556                	mv	a0,s5
+ 55c:	00000097          	auipc	ra,0x0
+ 560:	e20080e7          	jalr	-480(ra) # 37c <putc>
+ 564:	896a                	mv	s2,s10
     putc(fd, digits[x >> (sizeof(uint64) * 8 - 4)]);
- 556:	03c9d793          	srli	a5,s3,0x3c
- 55a:	97de                	add	a5,a5,s7
- 55c:	0007c583          	lbu	a1,0(a5)
- 560:	8556                	mv	a0,s5
- 562:	00000097          	auipc	ra,0x0
- 566:	e0a080e7          	jalr	-502(ra) # 36c <putc>
+ 566:	03c9d793          	srli	a5,s3,0x3c
+ 56a:	97de                	add	a5,a5,s7
+ 56c:	0007c583          	lbu	a1,0(a5)
+ 570:	8556                	mv	a0,s5
+ 572:	00000097          	auipc	ra,0x0
+ 576:	e0a080e7          	jalr	-502(ra) # 37c <putc>
   for (i = 0; i < (sizeof(uint64) * 2); i++, x <<= 4)
- 56a:	0992                	slli	s3,s3,0x4
- 56c:	397d                	addiw	s2,s2,-1
- 56e:	fe0914e3          	bnez	s2,556 <vprintf+0x11c>
+ 57a:	0992                	slli	s3,s3,0x4
+ 57c:	397d                	addiw	s2,s2,-1
+ 57e:	fe0914e3          	bnez	s2,566 <vprintf+0x11c>
         printptr(fd, va_arg(ap, uint64));
- 572:	f8843b03          	ld	s6,-120(s0)
+ 582:	f8843b03          	ld	s6,-120(s0)
       state = 0;
- 576:	4981                	li	s3,0
- 578:	b70d                	j	49a <vprintf+0x60>
+ 586:	4981                	li	s3,0
+ 588:	b70d                	j	4aa <vprintf+0x60>
         s = va_arg(ap, char*);
- 57a:	008b0913          	addi	s2,s6,8
- 57e:	000b3983          	ld	s3,0(s6)
+ 58a:	008b0913          	addi	s2,s6,8
+ 58e:	000b3983          	ld	s3,0(s6)
         if(s == 0)
- 582:	02098163          	beqz	s3,5a4 <vprintf+0x16a>
+ 592:	02098163          	beqz	s3,5b4 <vprintf+0x16a>
         while(*s != 0){
- 586:	0009c583          	lbu	a1,0(s3)
- 58a:	c5ad                	beqz	a1,5f4 <vprintf+0x1ba>
+ 596:	0009c583          	lbu	a1,0(s3)
+ 59a:	c5ad                	beqz	a1,604 <vprintf+0x1ba>
           putc(fd, *s);
- 58c:	8556                	mv	a0,s5
- 58e:	00000097          	auipc	ra,0x0
- 592:	dde080e7          	jalr	-546(ra) # 36c <putc>
+ 59c:	8556                	mv	a0,s5
+ 59e:	00000097          	auipc	ra,0x0
+ 5a2:	dde080e7          	jalr	-546(ra) # 37c <putc>
           s++;
- 596:	0985                	addi	s3,s3,1
+ 5a6:	0985                	addi	s3,s3,1
         while(*s != 0){
- 598:	0009c583          	lbu	a1,0(s3)
- 59c:	f9e5                	bnez	a1,58c <vprintf+0x152>
+ 5a8:	0009c583          	lbu	a1,0(s3)
+ 5ac:	f9e5                	bnez	a1,59c <vprintf+0x152>
         s = va_arg(ap, char*);
- 59e:	8b4a                	mv	s6,s2
+ 5ae:	8b4a                	mv	s6,s2
       state = 0;
- 5a0:	4981                	li	s3,0
- 5a2:	bde5                	j	49a <vprintf+0x60>
+ 5b0:	4981                	li	s3,0
+ 5b2:	bde5                	j	4aa <vprintf+0x60>
           s = "(null)";
- 5a4:	00000997          	auipc	s3,0x0
- 5a8:	27498993          	addi	s3,s3,628 # 818 <malloc+0x11a>
+ 5b4:	00000997          	auipc	s3,0x0
+ 5b8:	27498993          	addi	s3,s3,628 # 828 <malloc+0x11a>
         while(*s != 0){
- 5ac:	85ee                	mv	a1,s11
- 5ae:	bff9                	j	58c <vprintf+0x152>
+ 5bc:	85ee                	mv	a1,s11
+ 5be:	bff9                	j	59c <vprintf+0x152>
         putc(fd, va_arg(ap, uint));
- 5b0:	008b0913          	addi	s2,s6,8
- 5b4:	000b4583          	lbu	a1,0(s6)
- 5b8:	8556                	mv	a0,s5
- 5ba:	00000097          	auipc	ra,0x0
- 5be:	db2080e7          	jalr	-590(ra) # 36c <putc>
- 5c2:	8b4a                	mv	s6,s2
-      state = 0;
- 5c4:	4981                	li	s3,0
- 5c6:	bdd1                	j	49a <vprintf+0x60>
-        putc(fd, c);
- 5c8:	85d2                	mv	a1,s4
- 5ca:	8556                	mv	a0,s5
- 5cc:	00000097          	auipc	ra,0x0
- 5d0:	da0080e7          	jalr	-608(ra) # 36c <putc>
+ 5c0:	008b0913          	addi	s2,s6,8
+ 5c4:	000b4583          	lbu	a1,0(s6)
+ 5c8:	8556                	mv	a0,s5
+ 5ca:	00000097          	auipc	ra,0x0
+ 5ce:	db2080e7          	jalr	-590(ra) # 37c <putc>
+ 5d2:	8b4a                	mv	s6,s2
       state = 0;
  5d4:	4981                	li	s3,0
- 5d6:	b5d1                	j	49a <vprintf+0x60>
-        putc(fd, '%');
+ 5d6:	bdd1                	j	4aa <vprintf+0x60>
+        putc(fd, c);
  5d8:	85d2                	mv	a1,s4
  5da:	8556                	mv	a0,s5
  5dc:	00000097          	auipc	ra,0x0
- 5e0:	d90080e7          	jalr	-624(ra) # 36c <putc>
+ 5e0:	da0080e7          	jalr	-608(ra) # 37c <putc>
+      state = 0;
+ 5e4:	4981                	li	s3,0
+ 5e6:	b5d1                	j	4aa <vprintf+0x60>
+        putc(fd, '%');
+ 5e8:	85d2                	mv	a1,s4
+ 5ea:	8556                	mv	a0,s5
+ 5ec:	00000097          	auipc	ra,0x0
+ 5f0:	d90080e7          	jalr	-624(ra) # 37c <putc>
         putc(fd, c);
- 5e4:	85ca                	mv	a1,s2
- 5e6:	8556                	mv	a0,s5
- 5e8:	00000097          	auipc	ra,0x0
- 5ec:	d84080e7          	jalr	-636(ra) # 36c <putc>
+ 5f4:	85ca                	mv	a1,s2
+ 5f6:	8556                	mv	a0,s5
+ 5f8:	00000097          	auipc	ra,0x0
+ 5fc:	d84080e7          	jalr	-636(ra) # 37c <putc>
       state = 0;
- 5f0:	4981                	li	s3,0
- 5f2:	b565                	j	49a <vprintf+0x60>
+ 600:	4981                	li	s3,0
+ 602:	b565                	j	4aa <vprintf+0x60>
         s = va_arg(ap, char*);
- 5f4:	8b4a                	mv	s6,s2
+ 604:	8b4a                	mv	s6,s2
       state = 0;
- 5f6:	4981                	li	s3,0
- 5f8:	b54d                	j	49a <vprintf+0x60>
+ 606:	4981                	li	s3,0
+ 608:	b54d                	j	4aa <vprintf+0x60>
     }
   }
 }
- 5fa:	70e6                	ld	ra,120(sp)
- 5fc:	7446                	ld	s0,112(sp)
- 5fe:	74a6                	ld	s1,104(sp)
- 600:	7906                	ld	s2,96(sp)
- 602:	69e6                	ld	s3,88(sp)
- 604:	6a46                	ld	s4,80(sp)
- 606:	6aa6                	ld	s5,72(sp)
- 608:	6b06                	ld	s6,64(sp)
- 60a:	7be2                	ld	s7,56(sp)
- 60c:	7c42                	ld	s8,48(sp)
- 60e:	7ca2                	ld	s9,40(sp)
- 610:	7d02                	ld	s10,32(sp)
- 612:	6de2                	ld	s11,24(sp)
- 614:	6109                	addi	sp,sp,128
- 616:	8082                	ret
+ 60a:	70e6                	ld	ra,120(sp)
+ 60c:	7446                	ld	s0,112(sp)
+ 60e:	74a6                	ld	s1,104(sp)
+ 610:	7906                	ld	s2,96(sp)
+ 612:	69e6                	ld	s3,88(sp)
+ 614:	6a46                	ld	s4,80(sp)
+ 616:	6aa6                	ld	s5,72(sp)
+ 618:	6b06                	ld	s6,64(sp)
+ 61a:	7be2                	ld	s7,56(sp)
+ 61c:	7c42                	ld	s8,48(sp)
+ 61e:	7ca2                	ld	s9,40(sp)
+ 620:	7d02                	ld	s10,32(sp)
+ 622:	6de2                	ld	s11,24(sp)
+ 624:	6109                	addi	sp,sp,128
+ 626:	8082                	ret
 
-0000000000000618 <fprintf>:
+0000000000000628 <fprintf>:
 
 void
 fprintf(int fd, const char *fmt, ...)
 {
- 618:	715d                	addi	sp,sp,-80
- 61a:	ec06                	sd	ra,24(sp)
- 61c:	e822                	sd	s0,16(sp)
- 61e:	1000                	addi	s0,sp,32
- 620:	e010                	sd	a2,0(s0)
- 622:	e414                	sd	a3,8(s0)
- 624:	e818                	sd	a4,16(s0)
- 626:	ec1c                	sd	a5,24(s0)
- 628:	03043023          	sd	a6,32(s0)
- 62c:	03143423          	sd	a7,40(s0)
+ 628:	715d                	addi	sp,sp,-80
+ 62a:	ec06                	sd	ra,24(sp)
+ 62c:	e822                	sd	s0,16(sp)
+ 62e:	1000                	addi	s0,sp,32
+ 630:	e010                	sd	a2,0(s0)
+ 632:	e414                	sd	a3,8(s0)
+ 634:	e818                	sd	a4,16(s0)
+ 636:	ec1c                	sd	a5,24(s0)
+ 638:	03043023          	sd	a6,32(s0)
+ 63c:	03143423          	sd	a7,40(s0)
   va_list ap;
 
   va_start(ap, fmt);
- 630:	fe843423          	sd	s0,-24(s0)
+ 640:	fe843423          	sd	s0,-24(s0)
   vprintf(fd, fmt, ap);
- 634:	8622                	mv	a2,s0
- 636:	00000097          	auipc	ra,0x0
- 63a:	e04080e7          	jalr	-508(ra) # 43a <vprintf>
+ 644:	8622                	mv	a2,s0
+ 646:	00000097          	auipc	ra,0x0
+ 64a:	e04080e7          	jalr	-508(ra) # 44a <vprintf>
 }
- 63e:	60e2                	ld	ra,24(sp)
- 640:	6442                	ld	s0,16(sp)
- 642:	6161                	addi	sp,sp,80
- 644:	8082                	ret
+ 64e:	60e2                	ld	ra,24(sp)
+ 650:	6442                	ld	s0,16(sp)
+ 652:	6161                	addi	sp,sp,80
+ 654:	8082                	ret
 
-0000000000000646 <printf>:
+0000000000000656 <printf>:
 
 void
 printf(const char *fmt, ...)
 {
- 646:	711d                	addi	sp,sp,-96
- 648:	ec06                	sd	ra,24(sp)
- 64a:	e822                	sd	s0,16(sp)
- 64c:	1000                	addi	s0,sp,32
- 64e:	e40c                	sd	a1,8(s0)
- 650:	e810                	sd	a2,16(s0)
- 652:	ec14                	sd	a3,24(s0)
- 654:	f018                	sd	a4,32(s0)
- 656:	f41c                	sd	a5,40(s0)
- 658:	03043823          	sd	a6,48(s0)
- 65c:	03143c23          	sd	a7,56(s0)
+ 656:	711d                	addi	sp,sp,-96
+ 658:	ec06                	sd	ra,24(sp)
+ 65a:	e822                	sd	s0,16(sp)
+ 65c:	1000                	addi	s0,sp,32
+ 65e:	e40c                	sd	a1,8(s0)
+ 660:	e810                	sd	a2,16(s0)
+ 662:	ec14                	sd	a3,24(s0)
+ 664:	f018                	sd	a4,32(s0)
+ 666:	f41c                	sd	a5,40(s0)
+ 668:	03043823          	sd	a6,48(s0)
+ 66c:	03143c23          	sd	a7,56(s0)
   va_list ap;
 
   va_start(ap, fmt);
- 660:	00840613          	addi	a2,s0,8
- 664:	fec43423          	sd	a2,-24(s0)
+ 670:	00840613          	addi	a2,s0,8
+ 674:	fec43423          	sd	a2,-24(s0)
   vprintf(1, fmt, ap);
- 668:	85aa                	mv	a1,a0
- 66a:	4505                	li	a0,1
- 66c:	00000097          	auipc	ra,0x0
- 670:	dce080e7          	jalr	-562(ra) # 43a <vprintf>
+ 678:	85aa                	mv	a1,a0
+ 67a:	4505                	li	a0,1
+ 67c:	00000097          	auipc	ra,0x0
+ 680:	dce080e7          	jalr	-562(ra) # 44a <vprintf>
 }
- 674:	60e2                	ld	ra,24(sp)
- 676:	6442                	ld	s0,16(sp)
- 678:	6125                	addi	sp,sp,96
- 67a:	8082                	ret
+ 684:	60e2                	ld	ra,24(sp)
+ 686:	6442                	ld	s0,16(sp)
+ 688:	6125                	addi	sp,sp,96
+ 68a:	8082                	ret
 
-000000000000067c <free>:
+000000000000068c <free>:
 static Header base;
 static Header *freep;
 
 void
 free(void *ap)
 {
- 67c:	1141                	addi	sp,sp,-16
- 67e:	e422                	sd	s0,8(sp)
- 680:	0800                	addi	s0,sp,16
+ 68c:	1141                	addi	sp,sp,-16
+ 68e:	e422                	sd	s0,8(sp)
+ 690:	0800                	addi	s0,sp,16
   Header *bp, *p;
 
   bp = (Header*)ap - 1;
- 682:	ff050693          	addi	a3,a0,-16
+ 692:	ff050693          	addi	a3,a0,-16
   for(p = freep; !(bp > p && bp < p->s.ptr); p = p->s.ptr)
- 686:	00000797          	auipc	a5,0x0
- 68a:	20a7b783          	ld	a5,522(a5) # 890 <freep>
- 68e:	a02d                	j	6b8 <free+0x3c>
+ 696:	00000797          	auipc	a5,0x0
+ 69a:	20a7b783          	ld	a5,522(a5) # 8a0 <freep>
+ 69e:	a02d                	j	6c8 <free+0x3c>
     if(p >= p->s.ptr && (bp > p || bp < p->s.ptr))
       break;
   if(bp + bp->s.size == p->s.ptr){
     bp->s.size += p->s.ptr->s.size;
- 690:	4618                	lw	a4,8(a2)
- 692:	9f2d                	addw	a4,a4,a1
- 694:	fee52c23          	sw	a4,-8(a0)
+ 6a0:	4618                	lw	a4,8(a2)
+ 6a2:	9f2d                	addw	a4,a4,a1
+ 6a4:	fee52c23          	sw	a4,-8(a0)
     bp->s.ptr = p->s.ptr->s.ptr;
- 698:	6398                	ld	a4,0(a5)
- 69a:	6310                	ld	a2,0(a4)
- 69c:	a83d                	j	6da <free+0x5e>
+ 6a8:	6398                	ld	a4,0(a5)
+ 6aa:	6310                	ld	a2,0(a4)
+ 6ac:	a83d                	j	6ea <free+0x5e>
   } else
     bp->s.ptr = p->s.ptr;
   if(p + p->s.size == bp){
     p->s.size += bp->s.size;
- 69e:	ff852703          	lw	a4,-8(a0)
- 6a2:	9f31                	addw	a4,a4,a2
- 6a4:	c798                	sw	a4,8(a5)
+ 6ae:	ff852703          	lw	a4,-8(a0)
+ 6b2:	9f31                	addw	a4,a4,a2
+ 6b4:	c798                	sw	a4,8(a5)
     p->s.ptr = bp->s.ptr;
- 6a6:	ff053683          	ld	a3,-16(a0)
- 6aa:	a091                	j	6ee <free+0x72>
+ 6b6:	ff053683          	ld	a3,-16(a0)
+ 6ba:	a091                	j	6fe <free+0x72>
     if(p >= p->s.ptr && (bp > p || bp < p->s.ptr))
- 6ac:	6398                	ld	a4,0(a5)
- 6ae:	00e7e463          	bltu	a5,a4,6b6 <free+0x3a>
- 6b2:	00e6ea63          	bltu	a3,a4,6c6 <free+0x4a>
+ 6bc:	6398                	ld	a4,0(a5)
+ 6be:	00e7e463          	bltu	a5,a4,6c6 <free+0x3a>
+ 6c2:	00e6ea63          	bltu	a3,a4,6d6 <free+0x4a>
 {
- 6b6:	87ba                	mv	a5,a4
+ 6c6:	87ba                	mv	a5,a4
   for(p = freep; !(bp > p && bp < p->s.ptr); p = p->s.ptr)
- 6b8:	fed7fae3          	bgeu	a5,a3,6ac <free+0x30>
- 6bc:	6398                	ld	a4,0(a5)
- 6be:	00e6e463          	bltu	a3,a4,6c6 <free+0x4a>
+ 6c8:	fed7fae3          	bgeu	a5,a3,6bc <free+0x30>
+ 6cc:	6398                	ld	a4,0(a5)
+ 6ce:	00e6e463          	bltu	a3,a4,6d6 <free+0x4a>
     if(p >= p->s.ptr && (bp > p || bp < p->s.ptr))
- 6c2:	fee7eae3          	bltu	a5,a4,6b6 <free+0x3a>
+ 6d2:	fee7eae3          	bltu	a5,a4,6c6 <free+0x3a>
   if(bp + bp->s.size == p->s.ptr){
- 6c6:	ff852583          	lw	a1,-8(a0)
- 6ca:	6390                	ld	a2,0(a5)
- 6cc:	02059813          	slli	a6,a1,0x20
- 6d0:	01c85713          	srli	a4,a6,0x1c
- 6d4:	9736                	add	a4,a4,a3
- 6d6:	fae60de3          	beq	a2,a4,690 <free+0x14>
+ 6d6:	ff852583          	lw	a1,-8(a0)
+ 6da:	6390                	ld	a2,0(a5)
+ 6dc:	02059813          	slli	a6,a1,0x20
+ 6e0:	01c85713          	srli	a4,a6,0x1c
+ 6e4:	9736                	add	a4,a4,a3
+ 6e6:	fae60de3          	beq	a2,a4,6a0 <free+0x14>
     bp->s.ptr = p->s.ptr->s.ptr;
- 6da:	fec53823          	sd	a2,-16(a0)
+ 6ea:	fec53823          	sd	a2,-16(a0)
   if(p + p->s.size == bp){
- 6de:	4790                	lw	a2,8(a5)
- 6e0:	02061593          	slli	a1,a2,0x20
- 6e4:	01c5d713          	srli	a4,a1,0x1c
- 6e8:	973e                	add	a4,a4,a5
- 6ea:	fae68ae3          	beq	a3,a4,69e <free+0x22>
+ 6ee:	4790                	lw	a2,8(a5)
+ 6f0:	02061593          	slli	a1,a2,0x20
+ 6f4:	01c5d713          	srli	a4,a1,0x1c
+ 6f8:	973e                	add	a4,a4,a5
+ 6fa:	fae68ae3          	beq	a3,a4,6ae <free+0x22>
     p->s.ptr = bp->s.ptr;
- 6ee:	e394                	sd	a3,0(a5)
+ 6fe:	e394                	sd	a3,0(a5)
   } else
     p->s.ptr = bp;
   freep = p;
- 6f0:	00000717          	auipc	a4,0x0
- 6f4:	1af73023          	sd	a5,416(a4) # 890 <freep>
+ 700:	00000717          	auipc	a4,0x0
+ 704:	1af73023          	sd	a5,416(a4) # 8a0 <freep>
 }
- 6f8:	6422                	ld	s0,8(sp)
- 6fa:	0141                	addi	sp,sp,16
- 6fc:	8082                	ret
+ 708:	6422                	ld	s0,8(sp)
+ 70a:	0141                	addi	sp,sp,16
+ 70c:	8082                	ret
 
-00000000000006fe <malloc>:
+000000000000070e <malloc>:
   return freep;
 }
 
 void*
 malloc(uint nbytes)
 {
- 6fe:	7139                	addi	sp,sp,-64
- 700:	fc06                	sd	ra,56(sp)
- 702:	f822                	sd	s0,48(sp)
- 704:	f426                	sd	s1,40(sp)
- 706:	f04a                	sd	s2,32(sp)
- 708:	ec4e                	sd	s3,24(sp)
- 70a:	e852                	sd	s4,16(sp)
- 70c:	e456                	sd	s5,8(sp)
- 70e:	e05a                	sd	s6,0(sp)
- 710:	0080                	addi	s0,sp,64
+ 70e:	7139                	addi	sp,sp,-64
+ 710:	fc06                	sd	ra,56(sp)
+ 712:	f822                	sd	s0,48(sp)
+ 714:	f426                	sd	s1,40(sp)
+ 716:	f04a                	sd	s2,32(sp)
+ 718:	ec4e                	sd	s3,24(sp)
+ 71a:	e852                	sd	s4,16(sp)
+ 71c:	e456                	sd	s5,8(sp)
+ 71e:	e05a                	sd	s6,0(sp)
+ 720:	0080                	addi	s0,sp,64
   Header *p, *prevp;
   uint nunits;
 
   nunits = (nbytes + sizeof(Header) - 1)/sizeof(Header) + 1;
- 712:	02051493          	slli	s1,a0,0x20
- 716:	9081                	srli	s1,s1,0x20
- 718:	04bd                	addi	s1,s1,15
- 71a:	8091                	srli	s1,s1,0x4
- 71c:	0014899b          	addiw	s3,s1,1
- 720:	0485                	addi	s1,s1,1
+ 722:	02051493          	slli	s1,a0,0x20
+ 726:	9081                	srli	s1,s1,0x20
+ 728:	04bd                	addi	s1,s1,15
+ 72a:	8091                	srli	s1,s1,0x4
+ 72c:	0014899b          	addiw	s3,s1,1
+ 730:	0485                	addi	s1,s1,1
   if((prevp = freep) == 0){
- 722:	00000517          	auipc	a0,0x0
- 726:	16e53503          	ld	a0,366(a0) # 890 <freep>
- 72a:	c515                	beqz	a0,756 <malloc+0x58>
+ 732:	00000517          	auipc	a0,0x0
+ 736:	16e53503          	ld	a0,366(a0) # 8a0 <freep>
+ 73a:	c515                	beqz	a0,766 <malloc+0x58>
     base.s.ptr = freep = prevp = &base;
     base.s.size = 0;
   }
   for(p = prevp->s.ptr; ; prevp = p, p = p->s.ptr){
- 72c:	611c                	ld	a5,0(a0)
+ 73c:	611c                	ld	a5,0(a0)
     if(p->s.size >= nunits){
- 72e:	4798                	lw	a4,8(a5)
- 730:	02977f63          	bgeu	a4,s1,76e <malloc+0x70>
- 734:	8a4e                	mv	s4,s3
- 736:	0009871b          	sext.w	a4,s3
- 73a:	6685                	lui	a3,0x1
- 73c:	00d77363          	bgeu	a4,a3,742 <malloc+0x44>
- 740:	6a05                	lui	s4,0x1
- 742:	000a0b1b          	sext.w	s6,s4
+ 73e:	4798                	lw	a4,8(a5)
+ 740:	02977f63          	bgeu	a4,s1,77e <malloc+0x70>
+ 744:	8a4e                	mv	s4,s3
+ 746:	0009871b          	sext.w	a4,s3
+ 74a:	6685                	lui	a3,0x1
+ 74c:	00d77363          	bgeu	a4,a3,752 <malloc+0x44>
+ 750:	6a05                	lui	s4,0x1
+ 752:	000a0b1b          	sext.w	s6,s4
   p = sbrk(nu * sizeof(Header));
- 746:	004a1a1b          	slliw	s4,s4,0x4
+ 756:	004a1a1b          	slliw	s4,s4,0x4
         p->s.size = nunits;
       }
       freep = prevp;
       return (void*)(p + 1);
     }
     if(p == freep)
- 74a:	00000917          	auipc	s2,0x0
- 74e:	14690913          	addi	s2,s2,326 # 890 <freep>
+ 75a:	00000917          	auipc	s2,0x0
+ 75e:	14690913          	addi	s2,s2,326 # 8a0 <freep>
   if(p == (char*)-1)
- 752:	5afd                	li	s5,-1
- 754:	a895                	j	7c8 <malloc+0xca>
+ 762:	5afd                	li	s5,-1
+ 764:	a895                	j	7d8 <malloc+0xca>
     base.s.ptr = freep = prevp = &base;
- 756:	00000797          	auipc	a5,0x0
- 75a:	14278793          	addi	a5,a5,322 # 898 <base>
- 75e:	00000717          	auipc	a4,0x0
- 762:	12f73923          	sd	a5,306(a4) # 890 <freep>
- 766:	e39c                	sd	a5,0(a5)
+ 766:	00000797          	auipc	a5,0x0
+ 76a:	14278793          	addi	a5,a5,322 # 8a8 <base>
+ 76e:	00000717          	auipc	a4,0x0
+ 772:	12f73923          	sd	a5,306(a4) # 8a0 <freep>
+ 776:	e39c                	sd	a5,0(a5)
     base.s.size = 0;
- 768:	0007a423          	sw	zero,8(a5)
+ 778:	0007a423          	sw	zero,8(a5)
     if(p->s.size >= nunits){
- 76c:	b7e1                	j	734 <malloc+0x36>
+ 77c:	b7e1                	j	744 <malloc+0x36>
       if(p->s.size == nunits)
- 76e:	02e48c63          	beq	s1,a4,7a6 <malloc+0xa8>
+ 77e:	02e48c63          	beq	s1,a4,7b6 <malloc+0xa8>
         p->s.size -= nunits;
- 772:	4137073b          	subw	a4,a4,s3
- 776:	c798                	sw	a4,8(a5)
+ 782:	4137073b          	subw	a4,a4,s3
+ 786:	c798                	sw	a4,8(a5)
         p += p->s.size;
- 778:	02071693          	slli	a3,a4,0x20
- 77c:	01c6d713          	srli	a4,a3,0x1c
- 780:	97ba                	add	a5,a5,a4
+ 788:	02071693          	slli	a3,a4,0x20
+ 78c:	01c6d713          	srli	a4,a3,0x1c
+ 790:	97ba                	add	a5,a5,a4
         p->s.size = nunits;
- 782:	0137a423          	sw	s3,8(a5)
+ 792:	0137a423          	sw	s3,8(a5)
       freep = prevp;
- 786:	00000717          	auipc	a4,0x0
- 78a:	10a73523          	sd	a0,266(a4) # 890 <freep>
+ 796:	00000717          	auipc	a4,0x0
+ 79a:	10a73523          	sd	a0,266(a4) # 8a0 <freep>
       return (void*)(p + 1);
- 78e:	01078513          	addi	a0,a5,16
+ 79e:	01078513          	addi	a0,a5,16
       if((p = morecore(nunits)) == 0)
         return 0;
   }
 }
- 792:	70e2                	ld	ra,56(sp)
- 794:	7442                	ld	s0,48(sp)
- 796:	74a2                	ld	s1,40(sp)
- 798:	7902                	ld	s2,32(sp)
- 79a:	69e2                	ld	s3,24(sp)
- 79c:	6a42                	ld	s4,16(sp)
- 79e:	6aa2                	ld	s5,8(sp)
- 7a0:	6b02                	ld	s6,0(sp)
- 7a2:	6121                	addi	sp,sp,64
- 7a4:	8082                	ret
+ 7a2:	70e2                	ld	ra,56(sp)
+ 7a4:	7442                	ld	s0,48(sp)
+ 7a6:	74a2                	ld	s1,40(sp)
+ 7a8:	7902                	ld	s2,32(sp)
+ 7aa:	69e2                	ld	s3,24(sp)
+ 7ac:	6a42                	ld	s4,16(sp)
+ 7ae:	6aa2                	ld	s5,8(sp)
+ 7b0:	6b02                	ld	s6,0(sp)
+ 7b2:	6121                	addi	sp,sp,64
+ 7b4:	8082                	ret
         prevp->s.ptr = p->s.ptr;
- 7a6:	6398                	ld	a4,0(a5)
- 7a8:	e118                	sd	a4,0(a0)
- 7aa:	bff1                	j	786 <malloc+0x88>
+ 7b6:	6398                	ld	a4,0(a5)
+ 7b8:	e118                	sd	a4,0(a0)
+ 7ba:	bff1                	j	796 <malloc+0x88>
   hp->s.size = nu;
- 7ac:	01652423          	sw	s6,8(a0)
+ 7bc:	01652423          	sw	s6,8(a0)
   free((void*)(hp + 1));
- 7b0:	0541                	addi	a0,a0,16
- 7b2:	00000097          	auipc	ra,0x0
- 7b6:	eca080e7          	jalr	-310(ra) # 67c <free>
+ 7c0:	0541                	addi	a0,a0,16
+ 7c2:	00000097          	auipc	ra,0x0
+ 7c6:	eca080e7          	jalr	-310(ra) # 68c <free>
   return freep;
- 7ba:	00093503          	ld	a0,0(s2)
+ 7ca:	00093503          	ld	a0,0(s2)
       if((p = morecore(nunits)) == 0)
- 7be:	d971                	beqz	a0,792 <malloc+0x94>
+ 7ce:	d971                	beqz	a0,7a2 <malloc+0x94>
   for(p = prevp->s.ptr; ; prevp = p, p = p->s.ptr){
- 7c0:	611c                	ld	a5,0(a0)
+ 7d0:	611c                	ld	a5,0(a0)
     if(p->s.size >= nunits){
- 7c2:	4798                	lw	a4,8(a5)
- 7c4:	fa9775e3          	bgeu	a4,s1,76e <malloc+0x70>
+ 7d2:	4798                	lw	a4,8(a5)
+ 7d4:	fa9775e3          	bgeu	a4,s1,77e <malloc+0x70>
     if(p == freep)
- 7c8:	00093703          	ld	a4,0(s2)
- 7cc:	853e                	mv	a0,a5
- 7ce:	fef719e3          	bne	a4,a5,7c0 <malloc+0xc2>
+ 7d8:	00093703          	ld	a4,0(s2)
+ 7dc:	853e                	mv	a0,a5
+ 7de:	fef719e3          	bne	a4,a5,7d0 <malloc+0xc2>
   p = sbrk(nu * sizeof(Header));
- 7d2:	8552                	mv	a0,s4
- 7d4:	00000097          	auipc	ra,0x0
- 7d8:	b80080e7          	jalr	-1152(ra) # 354 <sbrk>
+ 7e2:	8552                	mv	a0,s4
+ 7e4:	00000097          	auipc	ra,0x0
+ 7e8:	b70080e7          	jalr	-1168(ra) # 354 <sbrk>
   if(p == (char*)-1)
- 7dc:	fd5518e3          	bne	a0,s5,7ac <malloc+0xae>
+ 7ec:	fd5518e3          	bne	a0,s5,7bc <malloc+0xae>
         return 0;
- 7e0:	4501                	li	a0,0
- 7e2:	bf45                	j	792 <malloc+0x94>
+ 7f0:	4501                	li	a0,0
+ 7f2:	bf45                	j	7a2 <malloc+0x94>
Binary files ./user/ln.o and ../xv6-labs-2021/user/ln.o differ
diff -urN ./user/ln.sym ../xv6-labs-2021/user/ln.sym
--- ./user/ln.sym	2021-12-05 17:54:42.000000000 +0800
+++ ../xv6-labs-2021/user/ln.sym	2021-11-26 14:46:16.000000000 +0800
@@ -1,7 +1,7 @@
 0000000000000000 .text
-00000000000007e8 .rodata
-0000000000000890 .sbss
-0000000000000898 .bss
+00000000000007f8 .rodata
+00000000000008a0 .sbss
+00000000000008a8 .bss
 0000000000000000 .comment
 0000000000000000 .riscv.attributes
 0000000000000000 .debug_aranges
@@ -16,29 +16,31 @@
 0000000000000000 ln.c
 0000000000000000 ulib.c
 0000000000000000 printf.c
-000000000000036c putc
-000000000000038e printint
-0000000000000878 digits
+000000000000037c putc
+000000000000039e printint
+0000000000000888 digits
 0000000000000000 umalloc.c
-0000000000000890 freep
-0000000000000898 base
+00000000000008a0 freep
+00000000000008a8 base
 0000000000000060 strcpy
-0000000000000646 printf
-0000000000001089 __global_pointer$
+0000000000000656 printf
+0000000000001099 __global_pointer$
 000000000000021a memmove
 0000000000000314 mknod
+000000000000036c trace
 0000000000000118 gets
-0000000000000889 __SDATA_BEGIN__
+0000000000000899 __SDATA_BEGIN__
 000000000000034c getpid
 00000000000002ac memcpy
-00000000000006fe malloc
+000000000000070e malloc
 000000000000035c sleep
+0000000000000374 sysinfo
 00000000000002dc pipe
 00000000000002ec write
 0000000000000324 fstat
-0000000000000618 fprintf
+0000000000000628 fprintf
 00000000000002fc kill
-000000000000043a vprintf
+000000000000044a vprintf
 000000000000033c chdir
 0000000000000304 exec
 00000000000002d4 wait
@@ -46,18 +48,18 @@
 000000000000031c unlink
 0000000000000272 memcmp
 00000000000002c4 fork
-00000000000008a8 __BSS_END__
+00000000000008b8 __BSS_END__
 0000000000000354 sbrk
 0000000000000364 uptime
-0000000000000889 __bss_start
+0000000000000899 __bss_start
 00000000000000d2 memset
 0000000000000000 main
 000000000000007c strcmp
 0000000000000344 dup
-0000000000000889 __DATA_BEGIN__
+0000000000000899 __DATA_BEGIN__
 000000000000018c stat
-0000000000000889 _edata
-00000000000008a8 _end
+0000000000000899 _edata
+00000000000008b8 _end
 000000000000032c link
 00000000000002cc exit
 00000000000001d2 atoi
@@ -66,4 +68,4 @@
 00000000000000f4 strchr
 0000000000000334 mkdir
 00000000000002f4 close
-000000000000067c free
+000000000000068c free
diff -urN ./user/ls.asm ../xv6-labs-2021/user/ls.asm
--- ./user/ls.asm	2021-12-05 17:54:42.000000000 +0800
+++ ../xv6-labs-2021/user/ls.asm	2021-11-26 14:46:16.000000000 +0800
@@ -65,7 +65,7 @@
   5e:	00000097          	auipc	ra,0x0
   62:	2bc080e7          	jalr	700(ra) # 31a <strlen>
   66:	00001997          	auipc	s3,0x1
-  6a:	ae298993          	addi	s3,s3,-1310 # b48 <buf.0>
+  6a:	af298993          	addi	s3,s3,-1294 # b58 <buf.0>
   6e:	0005061b          	sext.w	a2,a0
   72:	85a6                	mv	a1,s1
   74:	854e                	mv	a0,s3
@@ -148,9 +148,9 @@
  11c:	d9c42683          	lw	a3,-612(s0)
  120:	da041603          	lh	a2,-608(s0)
  124:	00001517          	auipc	a0,0x1
- 128:	96450513          	addi	a0,a0,-1692 # a88 <malloc+0x118>
+ 128:	97450513          	addi	a0,a0,-1676 # a98 <malloc+0x118>
  12c:	00000097          	auipc	ra,0x0
- 130:	78c080e7          	jalr	1932(ra) # 8b8 <printf>
+ 130:	79c080e7          	jalr	1948(ra) # 8c8 <printf>
       }
       printf("%s %d %d %d\n", fmtname(buf), st.type, st.ino, st.size);
     }
@@ -173,19 +173,19 @@
     fprintf(2, "ls: cannot open %s\n", path);
  160:	864a                	mv	a2,s2
  162:	00001597          	auipc	a1,0x1
- 166:	8f658593          	addi	a1,a1,-1802 # a58 <malloc+0xe8>
+ 166:	90658593          	addi	a1,a1,-1786 # a68 <malloc+0xe8>
  16a:	4509                	li	a0,2
  16c:	00000097          	auipc	ra,0x0
- 170:	71e080e7          	jalr	1822(ra) # 88a <fprintf>
+ 170:	72e080e7          	jalr	1838(ra) # 89a <fprintf>
     return;
  174:	b7e9                	j	13e <ls+0x8a>
     fprintf(2, "ls: cannot stat %s\n", path);
  176:	864a                	mv	a2,s2
  178:	00001597          	auipc	a1,0x1
- 17c:	8f858593          	addi	a1,a1,-1800 # a70 <malloc+0x100>
+ 17c:	90858593          	addi	a1,a1,-1784 # a80 <malloc+0x100>
  180:	4509                	li	a0,2
  182:	00000097          	auipc	ra,0x0
- 186:	708080e7          	jalr	1800(ra) # 88a <fprintf>
+ 186:	718080e7          	jalr	1816(ra) # 89a <fprintf>
     close(fd);
  18a:	8526                	mv	a0,s1
  18c:	00000097          	auipc	ra,0x0
@@ -201,9 +201,9 @@
  1a6:	00a7fb63          	bgeu	a5,a0,1bc <ls+0x108>
       printf("ls: path too long\n");
  1aa:	00001517          	auipc	a0,0x1
- 1ae:	8ee50513          	addi	a0,a0,-1810 # a98 <malloc+0x128>
+ 1ae:	8fe50513          	addi	a0,a0,-1794 # aa8 <malloc+0x128>
  1b2:	00000097          	auipc	ra,0x0
- 1b6:	706080e7          	jalr	1798(ra) # 8b8 <printf>
+ 1b6:	716080e7          	jalr	1814(ra) # 8c8 <printf>
       break;
  1ba:	bfad                	j	134 <ls+0x80>
     strcpy(buf, path);
@@ -225,17 +225,17 @@
  1ea:	00f90023          	sb	a5,0(s2)
       printf("%s %d %d %d\n", fmtname(buf), st.type, st.ino, st.size);
  1ee:	00001a17          	auipc	s4,0x1
- 1f2:	8c2a0a13          	addi	s4,s4,-1854 # ab0 <malloc+0x140>
+ 1f2:	8d2a0a13          	addi	s4,s4,-1838 # ac0 <malloc+0x140>
         printf("ls: cannot stat %s\n", buf);
  1f6:	00001a97          	auipc	s5,0x1
- 1fa:	87aa8a93          	addi	s5,s5,-1926 # a70 <malloc+0x100>
+ 1fa:	88aa8a93          	addi	s5,s5,-1910 # a80 <malloc+0x100>
     while(read(fd, &de, sizeof(de)) == sizeof(de)){
  1fe:	a801                	j	20e <ls+0x15a>
         printf("ls: cannot stat %s\n", buf);
  200:	dc040593          	addi	a1,s0,-576
  204:	8556                	mv	a0,s5
  206:	00000097          	auipc	ra,0x0
- 20a:	6b2080e7          	jalr	1714(ra) # 8b8 <printf>
+ 20a:	6c2080e7          	jalr	1730(ra) # 8c8 <printf>
     while(read(fd, &de, sizeof(de)) == sizeof(de)){
  20e:	4641                	li	a2,16
  210:	db040593          	addi	a1,s0,-592
@@ -271,7 +271,7 @@
  268:	da041603          	lh	a2,-608(s0)
  26c:	8552                	mv	a0,s4
  26e:	00000097          	auipc	ra,0x0
- 272:	64a080e7          	jalr	1610(ra) # 8b8 <printf>
+ 272:	65a080e7          	jalr	1626(ra) # 8c8 <printf>
  276:	bf61                	j	20e <ls+0x15a>
 
 0000000000000278 <main>:
@@ -313,7 +313,7 @@
  2b4:	28e080e7          	jalr	654(ra) # 53e <exit>
     ls(".");
  2b8:	00001517          	auipc	a0,0x1
- 2bc:	80850513          	addi	a0,a0,-2040 # ac0 <malloc+0x150>
+ 2bc:	81850513          	addi	a0,a0,-2024 # ad0 <malloc+0x150>
  2c0:	00000097          	auipc	ra,0x0
  2c4:	df4080e7          	jalr	-524(ra) # b4 <ls>
     exit(0);
@@ -952,632 +952,652 @@
  ret
  5dc:	8082                	ret
 
-00000000000005de <putc>:
+00000000000005de <trace>:
+.global trace
+trace:
+ li a7, SYS_trace
+ 5de:	48d9                	li	a7,22
+ ecall
+ 5e0:	00000073          	ecall
+ ret
+ 5e4:	8082                	ret
+
+00000000000005e6 <sysinfo>:
+.global sysinfo
+sysinfo:
+ li a7, SYS_sysinfo
+ 5e6:	48dd                	li	a7,23
+ ecall
+ 5e8:	00000073          	ecall
+ ret
+ 5ec:	8082                	ret
+
+00000000000005ee <putc>:
 
 static char digits[] = "0123456789ABCDEF";
 
 static void
 putc(int fd, char c)
 {
- 5de:	1101                	addi	sp,sp,-32
- 5e0:	ec06                	sd	ra,24(sp)
- 5e2:	e822                	sd	s0,16(sp)
- 5e4:	1000                	addi	s0,sp,32
- 5e6:	feb407a3          	sb	a1,-17(s0)
+ 5ee:	1101                	addi	sp,sp,-32
+ 5f0:	ec06                	sd	ra,24(sp)
+ 5f2:	e822                	sd	s0,16(sp)
+ 5f4:	1000                	addi	s0,sp,32
+ 5f6:	feb407a3          	sb	a1,-17(s0)
   write(fd, &c, 1);
- 5ea:	4605                	li	a2,1
- 5ec:	fef40593          	addi	a1,s0,-17
- 5f0:	00000097          	auipc	ra,0x0
- 5f4:	f6e080e7          	jalr	-146(ra) # 55e <write>
-}
- 5f8:	60e2                	ld	ra,24(sp)
- 5fa:	6442                	ld	s0,16(sp)
- 5fc:	6105                	addi	sp,sp,32
- 5fe:	8082                	ret
+ 5fa:	4605                	li	a2,1
+ 5fc:	fef40593          	addi	a1,s0,-17
+ 600:	00000097          	auipc	ra,0x0
+ 604:	f5e080e7          	jalr	-162(ra) # 55e <write>
+}
+ 608:	60e2                	ld	ra,24(sp)
+ 60a:	6442                	ld	s0,16(sp)
+ 60c:	6105                	addi	sp,sp,32
+ 60e:	8082                	ret
 
-0000000000000600 <printint>:
+0000000000000610 <printint>:
 
 static void
 printint(int fd, int xx, int base, int sgn)
 {
- 600:	7139                	addi	sp,sp,-64
- 602:	fc06                	sd	ra,56(sp)
- 604:	f822                	sd	s0,48(sp)
- 606:	f426                	sd	s1,40(sp)
- 608:	f04a                	sd	s2,32(sp)
- 60a:	ec4e                	sd	s3,24(sp)
- 60c:	0080                	addi	s0,sp,64
- 60e:	84aa                	mv	s1,a0
+ 610:	7139                	addi	sp,sp,-64
+ 612:	fc06                	sd	ra,56(sp)
+ 614:	f822                	sd	s0,48(sp)
+ 616:	f426                	sd	s1,40(sp)
+ 618:	f04a                	sd	s2,32(sp)
+ 61a:	ec4e                	sd	s3,24(sp)
+ 61c:	0080                	addi	s0,sp,64
+ 61e:	84aa                	mv	s1,a0
   char buf[16];
   int i, neg;
   uint x;
 
   neg = 0;
   if(sgn && xx < 0){
- 610:	c299                	beqz	a3,616 <printint+0x16>
- 612:	0805c963          	bltz	a1,6a4 <printint+0xa4>
+ 620:	c299                	beqz	a3,626 <printint+0x16>
+ 622:	0805c963          	bltz	a1,6b4 <printint+0xa4>
     neg = 1;
     x = -xx;
   } else {
     x = xx;
- 616:	2581                	sext.w	a1,a1
+ 626:	2581                	sext.w	a1,a1
   neg = 0;
- 618:	4881                	li	a7,0
- 61a:	fc040693          	addi	a3,s0,-64
+ 628:	4881                	li	a7,0
+ 62a:	fc040693          	addi	a3,s0,-64
   }
 
   i = 0;
- 61e:	4701                	li	a4,0
+ 62e:	4701                	li	a4,0
   do{
     buf[i++] = digits[x % base];
- 620:	2601                	sext.w	a2,a2
- 622:	00000517          	auipc	a0,0x0
- 626:	50650513          	addi	a0,a0,1286 # b28 <digits>
- 62a:	883a                	mv	a6,a4
- 62c:	2705                	addiw	a4,a4,1
- 62e:	02c5f7bb          	remuw	a5,a1,a2
- 632:	1782                	slli	a5,a5,0x20
- 634:	9381                	srli	a5,a5,0x20
- 636:	97aa                	add	a5,a5,a0
- 638:	0007c783          	lbu	a5,0(a5)
- 63c:	00f68023          	sb	a5,0(a3)
+ 630:	2601                	sext.w	a2,a2
+ 632:	00000517          	auipc	a0,0x0
+ 636:	50650513          	addi	a0,a0,1286 # b38 <digits>
+ 63a:	883a                	mv	a6,a4
+ 63c:	2705                	addiw	a4,a4,1
+ 63e:	02c5f7bb          	remuw	a5,a1,a2
+ 642:	1782                	slli	a5,a5,0x20
+ 644:	9381                	srli	a5,a5,0x20
+ 646:	97aa                	add	a5,a5,a0
+ 648:	0007c783          	lbu	a5,0(a5)
+ 64c:	00f68023          	sb	a5,0(a3)
   }while((x /= base) != 0);
- 640:	0005879b          	sext.w	a5,a1
- 644:	02c5d5bb          	divuw	a1,a1,a2
- 648:	0685                	addi	a3,a3,1
- 64a:	fec7f0e3          	bgeu	a5,a2,62a <printint+0x2a>
+ 650:	0005879b          	sext.w	a5,a1
+ 654:	02c5d5bb          	divuw	a1,a1,a2
+ 658:	0685                	addi	a3,a3,1
+ 65a:	fec7f0e3          	bgeu	a5,a2,63a <printint+0x2a>
   if(neg)
- 64e:	00088c63          	beqz	a7,666 <printint+0x66>
+ 65e:	00088c63          	beqz	a7,676 <printint+0x66>
     buf[i++] = '-';
- 652:	fd070793          	addi	a5,a4,-48
- 656:	00878733          	add	a4,a5,s0
- 65a:	02d00793          	li	a5,45
- 65e:	fef70823          	sb	a5,-16(a4)
- 662:	0028071b          	addiw	a4,a6,2
+ 662:	fd070793          	addi	a5,a4,-48
+ 666:	00878733          	add	a4,a5,s0
+ 66a:	02d00793          	li	a5,45
+ 66e:	fef70823          	sb	a5,-16(a4)
+ 672:	0028071b          	addiw	a4,a6,2
 
   while(--i >= 0)
- 666:	02e05863          	blez	a4,696 <printint+0x96>
- 66a:	fc040793          	addi	a5,s0,-64
- 66e:	00e78933          	add	s2,a5,a4
- 672:	fff78993          	addi	s3,a5,-1
- 676:	99ba                	add	s3,s3,a4
- 678:	377d                	addiw	a4,a4,-1
- 67a:	1702                	slli	a4,a4,0x20
- 67c:	9301                	srli	a4,a4,0x20
- 67e:	40e989b3          	sub	s3,s3,a4
+ 676:	02e05863          	blez	a4,6a6 <printint+0x96>
+ 67a:	fc040793          	addi	a5,s0,-64
+ 67e:	00e78933          	add	s2,a5,a4
+ 682:	fff78993          	addi	s3,a5,-1
+ 686:	99ba                	add	s3,s3,a4
+ 688:	377d                	addiw	a4,a4,-1
+ 68a:	1702                	slli	a4,a4,0x20
+ 68c:	9301                	srli	a4,a4,0x20
+ 68e:	40e989b3          	sub	s3,s3,a4
     putc(fd, buf[i]);
- 682:	fff94583          	lbu	a1,-1(s2)
- 686:	8526                	mv	a0,s1
- 688:	00000097          	auipc	ra,0x0
- 68c:	f56080e7          	jalr	-170(ra) # 5de <putc>
+ 692:	fff94583          	lbu	a1,-1(s2)
+ 696:	8526                	mv	a0,s1
+ 698:	00000097          	auipc	ra,0x0
+ 69c:	f56080e7          	jalr	-170(ra) # 5ee <putc>
   while(--i >= 0)
- 690:	197d                	addi	s2,s2,-1
- 692:	ff3918e3          	bne	s2,s3,682 <printint+0x82>
+ 6a0:	197d                	addi	s2,s2,-1
+ 6a2:	ff3918e3          	bne	s2,s3,692 <printint+0x82>
 }
- 696:	70e2                	ld	ra,56(sp)
- 698:	7442                	ld	s0,48(sp)
- 69a:	74a2                	ld	s1,40(sp)
- 69c:	7902                	ld	s2,32(sp)
- 69e:	69e2                	ld	s3,24(sp)
- 6a0:	6121                	addi	sp,sp,64
- 6a2:	8082                	ret
+ 6a6:	70e2                	ld	ra,56(sp)
+ 6a8:	7442                	ld	s0,48(sp)
+ 6aa:	74a2                	ld	s1,40(sp)
+ 6ac:	7902                	ld	s2,32(sp)
+ 6ae:	69e2                	ld	s3,24(sp)
+ 6b0:	6121                	addi	sp,sp,64
+ 6b2:	8082                	ret
     x = -xx;
- 6a4:	40b005bb          	negw	a1,a1
+ 6b4:	40b005bb          	negw	a1,a1
     neg = 1;
- 6a8:	4885                	li	a7,1
+ 6b8:	4885                	li	a7,1
     x = -xx;
- 6aa:	bf85                	j	61a <printint+0x1a>
+ 6ba:	bf85                	j	62a <printint+0x1a>
 
-00000000000006ac <vprintf>:
+00000000000006bc <vprintf>:
 }
 
 // Print to the given fd. Only understands %d, %x, %p, %s.
 void
 vprintf(int fd, const char *fmt, va_list ap)
 {
- 6ac:	7119                	addi	sp,sp,-128
- 6ae:	fc86                	sd	ra,120(sp)
- 6b0:	f8a2                	sd	s0,112(sp)
- 6b2:	f4a6                	sd	s1,104(sp)
- 6b4:	f0ca                	sd	s2,96(sp)
- 6b6:	ecce                	sd	s3,88(sp)
- 6b8:	e8d2                	sd	s4,80(sp)
- 6ba:	e4d6                	sd	s5,72(sp)
- 6bc:	e0da                	sd	s6,64(sp)
- 6be:	fc5e                	sd	s7,56(sp)
- 6c0:	f862                	sd	s8,48(sp)
- 6c2:	f466                	sd	s9,40(sp)
- 6c4:	f06a                	sd	s10,32(sp)
- 6c6:	ec6e                	sd	s11,24(sp)
- 6c8:	0100                	addi	s0,sp,128
+ 6bc:	7119                	addi	sp,sp,-128
+ 6be:	fc86                	sd	ra,120(sp)
+ 6c0:	f8a2                	sd	s0,112(sp)
+ 6c2:	f4a6                	sd	s1,104(sp)
+ 6c4:	f0ca                	sd	s2,96(sp)
+ 6c6:	ecce                	sd	s3,88(sp)
+ 6c8:	e8d2                	sd	s4,80(sp)
+ 6ca:	e4d6                	sd	s5,72(sp)
+ 6cc:	e0da                	sd	s6,64(sp)
+ 6ce:	fc5e                	sd	s7,56(sp)
+ 6d0:	f862                	sd	s8,48(sp)
+ 6d2:	f466                	sd	s9,40(sp)
+ 6d4:	f06a                	sd	s10,32(sp)
+ 6d6:	ec6e                	sd	s11,24(sp)
+ 6d8:	0100                	addi	s0,sp,128
   char *s;
   int c, i, state;
 
   state = 0;
   for(i = 0; fmt[i]; i++){
- 6ca:	0005c903          	lbu	s2,0(a1)
- 6ce:	18090f63          	beqz	s2,86c <vprintf+0x1c0>
- 6d2:	8aaa                	mv	s5,a0
- 6d4:	8b32                	mv	s6,a2
- 6d6:	00158493          	addi	s1,a1,1
+ 6da:	0005c903          	lbu	s2,0(a1)
+ 6de:	18090f63          	beqz	s2,87c <vprintf+0x1c0>
+ 6e2:	8aaa                	mv	s5,a0
+ 6e4:	8b32                	mv	s6,a2
+ 6e6:	00158493          	addi	s1,a1,1
   state = 0;
- 6da:	4981                	li	s3,0
+ 6ea:	4981                	li	s3,0
       if(c == '%'){
         state = '%';
       } else {
         putc(fd, c);
       }
     } else if(state == '%'){
- 6dc:	02500a13          	li	s4,37
- 6e0:	4c55                	li	s8,21
- 6e2:	00000c97          	auipc	s9,0x0
- 6e6:	3eec8c93          	addi	s9,s9,1006 # ad0 <malloc+0x160>
+ 6ec:	02500a13          	li	s4,37
+ 6f0:	4c55                	li	s8,21
+ 6f2:	00000c97          	auipc	s9,0x0
+ 6f6:	3eec8c93          	addi	s9,s9,1006 # ae0 <malloc+0x160>
         printptr(fd, va_arg(ap, uint64));
       } else if(c == 's'){
         s = va_arg(ap, char*);
         if(s == 0)
           s = "(null)";
         while(*s != 0){
- 6ea:	02800d93          	li	s11,40
+ 6fa:	02800d93          	li	s11,40
   putc(fd, 'x');
- 6ee:	4d41                	li	s10,16
+ 6fe:	4d41                	li	s10,16
     putc(fd, digits[x >> (sizeof(uint64) * 8 - 4)]);
- 6f0:	00000b97          	auipc	s7,0x0
- 6f4:	438b8b93          	addi	s7,s7,1080 # b28 <digits>
- 6f8:	a839                	j	716 <vprintf+0x6a>
+ 700:	00000b97          	auipc	s7,0x0
+ 704:	438b8b93          	addi	s7,s7,1080 # b38 <digits>
+ 708:	a839                	j	726 <vprintf+0x6a>
         putc(fd, c);
- 6fa:	85ca                	mv	a1,s2
- 6fc:	8556                	mv	a0,s5
- 6fe:	00000097          	auipc	ra,0x0
- 702:	ee0080e7          	jalr	-288(ra) # 5de <putc>
- 706:	a019                	j	70c <vprintf+0x60>
+ 70a:	85ca                	mv	a1,s2
+ 70c:	8556                	mv	a0,s5
+ 70e:	00000097          	auipc	ra,0x0
+ 712:	ee0080e7          	jalr	-288(ra) # 5ee <putc>
+ 716:	a019                	j	71c <vprintf+0x60>
     } else if(state == '%'){
- 708:	01498d63          	beq	s3,s4,722 <vprintf+0x76>
+ 718:	01498d63          	beq	s3,s4,732 <vprintf+0x76>
   for(i = 0; fmt[i]; i++){
- 70c:	0485                	addi	s1,s1,1
- 70e:	fff4c903          	lbu	s2,-1(s1)
- 712:	14090d63          	beqz	s2,86c <vprintf+0x1c0>
+ 71c:	0485                	addi	s1,s1,1
+ 71e:	fff4c903          	lbu	s2,-1(s1)
+ 722:	14090d63          	beqz	s2,87c <vprintf+0x1c0>
     if(state == 0){
- 716:	fe0999e3          	bnez	s3,708 <vprintf+0x5c>
+ 726:	fe0999e3          	bnez	s3,718 <vprintf+0x5c>
       if(c == '%'){
- 71a:	ff4910e3          	bne	s2,s4,6fa <vprintf+0x4e>
+ 72a:	ff4910e3          	bne	s2,s4,70a <vprintf+0x4e>
         state = '%';
- 71e:	89d2                	mv	s3,s4
- 720:	b7f5                	j	70c <vprintf+0x60>
+ 72e:	89d2                	mv	s3,s4
+ 730:	b7f5                	j	71c <vprintf+0x60>
       if(c == 'd'){
- 722:	11490c63          	beq	s2,s4,83a <vprintf+0x18e>
- 726:	f9d9079b          	addiw	a5,s2,-99
- 72a:	0ff7f793          	zext.b	a5,a5
- 72e:	10fc6e63          	bltu	s8,a5,84a <vprintf+0x19e>
- 732:	f9d9079b          	addiw	a5,s2,-99
- 736:	0ff7f713          	zext.b	a4,a5
- 73a:	10ec6863          	bltu	s8,a4,84a <vprintf+0x19e>
- 73e:	00271793          	slli	a5,a4,0x2
- 742:	97e6                	add	a5,a5,s9
- 744:	439c                	lw	a5,0(a5)
- 746:	97e6                	add	a5,a5,s9
- 748:	8782                	jr	a5
+ 732:	11490c63          	beq	s2,s4,84a <vprintf+0x18e>
+ 736:	f9d9079b          	addiw	a5,s2,-99
+ 73a:	0ff7f793          	zext.b	a5,a5
+ 73e:	10fc6e63          	bltu	s8,a5,85a <vprintf+0x19e>
+ 742:	f9d9079b          	addiw	a5,s2,-99
+ 746:	0ff7f713          	zext.b	a4,a5
+ 74a:	10ec6863          	bltu	s8,a4,85a <vprintf+0x19e>
+ 74e:	00271793          	slli	a5,a4,0x2
+ 752:	97e6                	add	a5,a5,s9
+ 754:	439c                	lw	a5,0(a5)
+ 756:	97e6                	add	a5,a5,s9
+ 758:	8782                	jr	a5
         printint(fd, va_arg(ap, int), 10, 1);
- 74a:	008b0913          	addi	s2,s6,8
- 74e:	4685                	li	a3,1
- 750:	4629                	li	a2,10
- 752:	000b2583          	lw	a1,0(s6)
- 756:	8556                	mv	a0,s5
- 758:	00000097          	auipc	ra,0x0
- 75c:	ea8080e7          	jalr	-344(ra) # 600 <printint>
- 760:	8b4a                	mv	s6,s2
+ 75a:	008b0913          	addi	s2,s6,8
+ 75e:	4685                	li	a3,1
+ 760:	4629                	li	a2,10
+ 762:	000b2583          	lw	a1,0(s6)
+ 766:	8556                	mv	a0,s5
+ 768:	00000097          	auipc	ra,0x0
+ 76c:	ea8080e7          	jalr	-344(ra) # 610 <printint>
+ 770:	8b4a                	mv	s6,s2
       } else {
         // Unknown % sequence.  Print it to draw attention.
         putc(fd, '%');
         putc(fd, c);
       }
       state = 0;
- 762:	4981                	li	s3,0
- 764:	b765                	j	70c <vprintf+0x60>
+ 772:	4981                	li	s3,0
+ 774:	b765                	j	71c <vprintf+0x60>
         printint(fd, va_arg(ap, uint64), 10, 0);
- 766:	008b0913          	addi	s2,s6,8
- 76a:	4681                	li	a3,0
- 76c:	4629                	li	a2,10
- 76e:	000b2583          	lw	a1,0(s6)
- 772:	8556                	mv	a0,s5
- 774:	00000097          	auipc	ra,0x0
- 778:	e8c080e7          	jalr	-372(ra) # 600 <printint>
- 77c:	8b4a                	mv	s6,s2
+ 776:	008b0913          	addi	s2,s6,8
+ 77a:	4681                	li	a3,0
+ 77c:	4629                	li	a2,10
+ 77e:	000b2583          	lw	a1,0(s6)
+ 782:	8556                	mv	a0,s5
+ 784:	00000097          	auipc	ra,0x0
+ 788:	e8c080e7          	jalr	-372(ra) # 610 <printint>
+ 78c:	8b4a                	mv	s6,s2
       state = 0;
- 77e:	4981                	li	s3,0
- 780:	b771                	j	70c <vprintf+0x60>
+ 78e:	4981                	li	s3,0
+ 790:	b771                	j	71c <vprintf+0x60>
         printint(fd, va_arg(ap, int), 16, 0);
- 782:	008b0913          	addi	s2,s6,8
- 786:	4681                	li	a3,0
- 788:	866a                	mv	a2,s10
- 78a:	000b2583          	lw	a1,0(s6)
- 78e:	8556                	mv	a0,s5
- 790:	00000097          	auipc	ra,0x0
- 794:	e70080e7          	jalr	-400(ra) # 600 <printint>
- 798:	8b4a                	mv	s6,s2
+ 792:	008b0913          	addi	s2,s6,8
+ 796:	4681                	li	a3,0
+ 798:	866a                	mv	a2,s10
+ 79a:	000b2583          	lw	a1,0(s6)
+ 79e:	8556                	mv	a0,s5
+ 7a0:	00000097          	auipc	ra,0x0
+ 7a4:	e70080e7          	jalr	-400(ra) # 610 <printint>
+ 7a8:	8b4a                	mv	s6,s2
       state = 0;
- 79a:	4981                	li	s3,0
- 79c:	bf85                	j	70c <vprintf+0x60>
+ 7aa:	4981                	li	s3,0
+ 7ac:	bf85                	j	71c <vprintf+0x60>
         printptr(fd, va_arg(ap, uint64));
- 79e:	008b0793          	addi	a5,s6,8
- 7a2:	f8f43423          	sd	a5,-120(s0)
- 7a6:	000b3983          	ld	s3,0(s6)
+ 7ae:	008b0793          	addi	a5,s6,8
+ 7b2:	f8f43423          	sd	a5,-120(s0)
+ 7b6:	000b3983          	ld	s3,0(s6)
   putc(fd, '0');
- 7aa:	03000593          	li	a1,48
- 7ae:	8556                	mv	a0,s5
- 7b0:	00000097          	auipc	ra,0x0
- 7b4:	e2e080e7          	jalr	-466(ra) # 5de <putc>
+ 7ba:	03000593          	li	a1,48
+ 7be:	8556                	mv	a0,s5
+ 7c0:	00000097          	auipc	ra,0x0
+ 7c4:	e2e080e7          	jalr	-466(ra) # 5ee <putc>
   putc(fd, 'x');
- 7b8:	07800593          	li	a1,120
- 7bc:	8556                	mv	a0,s5
- 7be:	00000097          	auipc	ra,0x0
- 7c2:	e20080e7          	jalr	-480(ra) # 5de <putc>
- 7c6:	896a                	mv	s2,s10
+ 7c8:	07800593          	li	a1,120
+ 7cc:	8556                	mv	a0,s5
+ 7ce:	00000097          	auipc	ra,0x0
+ 7d2:	e20080e7          	jalr	-480(ra) # 5ee <putc>
+ 7d6:	896a                	mv	s2,s10
     putc(fd, digits[x >> (sizeof(uint64) * 8 - 4)]);
- 7c8:	03c9d793          	srli	a5,s3,0x3c
- 7cc:	97de                	add	a5,a5,s7
- 7ce:	0007c583          	lbu	a1,0(a5)
- 7d2:	8556                	mv	a0,s5
- 7d4:	00000097          	auipc	ra,0x0
- 7d8:	e0a080e7          	jalr	-502(ra) # 5de <putc>
+ 7d8:	03c9d793          	srli	a5,s3,0x3c
+ 7dc:	97de                	add	a5,a5,s7
+ 7de:	0007c583          	lbu	a1,0(a5)
+ 7e2:	8556                	mv	a0,s5
+ 7e4:	00000097          	auipc	ra,0x0
+ 7e8:	e0a080e7          	jalr	-502(ra) # 5ee <putc>
   for (i = 0; i < (sizeof(uint64) * 2); i++, x <<= 4)
- 7dc:	0992                	slli	s3,s3,0x4
- 7de:	397d                	addiw	s2,s2,-1
- 7e0:	fe0914e3          	bnez	s2,7c8 <vprintf+0x11c>
+ 7ec:	0992                	slli	s3,s3,0x4
+ 7ee:	397d                	addiw	s2,s2,-1
+ 7f0:	fe0914e3          	bnez	s2,7d8 <vprintf+0x11c>
         printptr(fd, va_arg(ap, uint64));
- 7e4:	f8843b03          	ld	s6,-120(s0)
+ 7f4:	f8843b03          	ld	s6,-120(s0)
       state = 0;
- 7e8:	4981                	li	s3,0
- 7ea:	b70d                	j	70c <vprintf+0x60>
+ 7f8:	4981                	li	s3,0
+ 7fa:	b70d                	j	71c <vprintf+0x60>
         s = va_arg(ap, char*);
- 7ec:	008b0913          	addi	s2,s6,8
- 7f0:	000b3983          	ld	s3,0(s6)
+ 7fc:	008b0913          	addi	s2,s6,8
+ 800:	000b3983          	ld	s3,0(s6)
         if(s == 0)
- 7f4:	02098163          	beqz	s3,816 <vprintf+0x16a>
+ 804:	02098163          	beqz	s3,826 <vprintf+0x16a>
         while(*s != 0){
- 7f8:	0009c583          	lbu	a1,0(s3)
- 7fc:	c5ad                	beqz	a1,866 <vprintf+0x1ba>
+ 808:	0009c583          	lbu	a1,0(s3)
+ 80c:	c5ad                	beqz	a1,876 <vprintf+0x1ba>
           putc(fd, *s);
- 7fe:	8556                	mv	a0,s5
- 800:	00000097          	auipc	ra,0x0
- 804:	dde080e7          	jalr	-546(ra) # 5de <putc>
+ 80e:	8556                	mv	a0,s5
+ 810:	00000097          	auipc	ra,0x0
+ 814:	dde080e7          	jalr	-546(ra) # 5ee <putc>
           s++;
- 808:	0985                	addi	s3,s3,1
+ 818:	0985                	addi	s3,s3,1
         while(*s != 0){
- 80a:	0009c583          	lbu	a1,0(s3)
- 80e:	f9e5                	bnez	a1,7fe <vprintf+0x152>
+ 81a:	0009c583          	lbu	a1,0(s3)
+ 81e:	f9e5                	bnez	a1,80e <vprintf+0x152>
         s = va_arg(ap, char*);
- 810:	8b4a                	mv	s6,s2
+ 820:	8b4a                	mv	s6,s2
       state = 0;
- 812:	4981                	li	s3,0
- 814:	bde5                	j	70c <vprintf+0x60>
+ 822:	4981                	li	s3,0
+ 824:	bde5                	j	71c <vprintf+0x60>
           s = "(null)";
- 816:	00000997          	auipc	s3,0x0
- 81a:	2b298993          	addi	s3,s3,690 # ac8 <malloc+0x158>
+ 826:	00000997          	auipc	s3,0x0
+ 82a:	2b298993          	addi	s3,s3,690 # ad8 <malloc+0x158>
         while(*s != 0){
- 81e:	85ee                	mv	a1,s11
- 820:	bff9                	j	7fe <vprintf+0x152>
+ 82e:	85ee                	mv	a1,s11
+ 830:	bff9                	j	80e <vprintf+0x152>
         putc(fd, va_arg(ap, uint));
- 822:	008b0913          	addi	s2,s6,8
- 826:	000b4583          	lbu	a1,0(s6)
- 82a:	8556                	mv	a0,s5
- 82c:	00000097          	auipc	ra,0x0
- 830:	db2080e7          	jalr	-590(ra) # 5de <putc>
- 834:	8b4a                	mv	s6,s2
-      state = 0;
- 836:	4981                	li	s3,0
- 838:	bdd1                	j	70c <vprintf+0x60>
-        putc(fd, c);
- 83a:	85d2                	mv	a1,s4
- 83c:	8556                	mv	a0,s5
- 83e:	00000097          	auipc	ra,0x0
- 842:	da0080e7          	jalr	-608(ra) # 5de <putc>
+ 832:	008b0913          	addi	s2,s6,8
+ 836:	000b4583          	lbu	a1,0(s6)
+ 83a:	8556                	mv	a0,s5
+ 83c:	00000097          	auipc	ra,0x0
+ 840:	db2080e7          	jalr	-590(ra) # 5ee <putc>
+ 844:	8b4a                	mv	s6,s2
       state = 0;
  846:	4981                	li	s3,0
- 848:	b5d1                	j	70c <vprintf+0x60>
-        putc(fd, '%');
+ 848:	bdd1                	j	71c <vprintf+0x60>
+        putc(fd, c);
  84a:	85d2                	mv	a1,s4
  84c:	8556                	mv	a0,s5
  84e:	00000097          	auipc	ra,0x0
- 852:	d90080e7          	jalr	-624(ra) # 5de <putc>
+ 852:	da0080e7          	jalr	-608(ra) # 5ee <putc>
+      state = 0;
+ 856:	4981                	li	s3,0
+ 858:	b5d1                	j	71c <vprintf+0x60>
+        putc(fd, '%');
+ 85a:	85d2                	mv	a1,s4
+ 85c:	8556                	mv	a0,s5
+ 85e:	00000097          	auipc	ra,0x0
+ 862:	d90080e7          	jalr	-624(ra) # 5ee <putc>
         putc(fd, c);
- 856:	85ca                	mv	a1,s2
- 858:	8556                	mv	a0,s5
- 85a:	00000097          	auipc	ra,0x0
- 85e:	d84080e7          	jalr	-636(ra) # 5de <putc>
+ 866:	85ca                	mv	a1,s2
+ 868:	8556                	mv	a0,s5
+ 86a:	00000097          	auipc	ra,0x0
+ 86e:	d84080e7          	jalr	-636(ra) # 5ee <putc>
       state = 0;
- 862:	4981                	li	s3,0
- 864:	b565                	j	70c <vprintf+0x60>
+ 872:	4981                	li	s3,0
+ 874:	b565                	j	71c <vprintf+0x60>
         s = va_arg(ap, char*);
- 866:	8b4a                	mv	s6,s2
+ 876:	8b4a                	mv	s6,s2
       state = 0;
- 868:	4981                	li	s3,0
- 86a:	b54d                	j	70c <vprintf+0x60>
+ 878:	4981                	li	s3,0
+ 87a:	b54d                	j	71c <vprintf+0x60>
     }
   }
 }
- 86c:	70e6                	ld	ra,120(sp)
- 86e:	7446                	ld	s0,112(sp)
- 870:	74a6                	ld	s1,104(sp)
- 872:	7906                	ld	s2,96(sp)
- 874:	69e6                	ld	s3,88(sp)
- 876:	6a46                	ld	s4,80(sp)
- 878:	6aa6                	ld	s5,72(sp)
- 87a:	6b06                	ld	s6,64(sp)
- 87c:	7be2                	ld	s7,56(sp)
- 87e:	7c42                	ld	s8,48(sp)
- 880:	7ca2                	ld	s9,40(sp)
- 882:	7d02                	ld	s10,32(sp)
- 884:	6de2                	ld	s11,24(sp)
- 886:	6109                	addi	sp,sp,128
- 888:	8082                	ret
+ 87c:	70e6                	ld	ra,120(sp)
+ 87e:	7446                	ld	s0,112(sp)
+ 880:	74a6                	ld	s1,104(sp)
+ 882:	7906                	ld	s2,96(sp)
+ 884:	69e6                	ld	s3,88(sp)
+ 886:	6a46                	ld	s4,80(sp)
+ 888:	6aa6                	ld	s5,72(sp)
+ 88a:	6b06                	ld	s6,64(sp)
+ 88c:	7be2                	ld	s7,56(sp)
+ 88e:	7c42                	ld	s8,48(sp)
+ 890:	7ca2                	ld	s9,40(sp)
+ 892:	7d02                	ld	s10,32(sp)
+ 894:	6de2                	ld	s11,24(sp)
+ 896:	6109                	addi	sp,sp,128
+ 898:	8082                	ret
 
-000000000000088a <fprintf>:
+000000000000089a <fprintf>:
 
 void
 fprintf(int fd, const char *fmt, ...)
 {
- 88a:	715d                	addi	sp,sp,-80
- 88c:	ec06                	sd	ra,24(sp)
- 88e:	e822                	sd	s0,16(sp)
- 890:	1000                	addi	s0,sp,32
- 892:	e010                	sd	a2,0(s0)
- 894:	e414                	sd	a3,8(s0)
- 896:	e818                	sd	a4,16(s0)
- 898:	ec1c                	sd	a5,24(s0)
- 89a:	03043023          	sd	a6,32(s0)
- 89e:	03143423          	sd	a7,40(s0)
+ 89a:	715d                	addi	sp,sp,-80
+ 89c:	ec06                	sd	ra,24(sp)
+ 89e:	e822                	sd	s0,16(sp)
+ 8a0:	1000                	addi	s0,sp,32
+ 8a2:	e010                	sd	a2,0(s0)
+ 8a4:	e414                	sd	a3,8(s0)
+ 8a6:	e818                	sd	a4,16(s0)
+ 8a8:	ec1c                	sd	a5,24(s0)
+ 8aa:	03043023          	sd	a6,32(s0)
+ 8ae:	03143423          	sd	a7,40(s0)
   va_list ap;
 
   va_start(ap, fmt);
- 8a2:	fe843423          	sd	s0,-24(s0)
+ 8b2:	fe843423          	sd	s0,-24(s0)
   vprintf(fd, fmt, ap);
- 8a6:	8622                	mv	a2,s0
- 8a8:	00000097          	auipc	ra,0x0
- 8ac:	e04080e7          	jalr	-508(ra) # 6ac <vprintf>
-}
- 8b0:	60e2                	ld	ra,24(sp)
- 8b2:	6442                	ld	s0,16(sp)
- 8b4:	6161                	addi	sp,sp,80
- 8b6:	8082                	ret
+ 8b6:	8622                	mv	a2,s0
+ 8b8:	00000097          	auipc	ra,0x0
+ 8bc:	e04080e7          	jalr	-508(ra) # 6bc <vprintf>
+}
+ 8c0:	60e2                	ld	ra,24(sp)
+ 8c2:	6442                	ld	s0,16(sp)
+ 8c4:	6161                	addi	sp,sp,80
+ 8c6:	8082                	ret
 
-00000000000008b8 <printf>:
+00000000000008c8 <printf>:
 
 void
 printf(const char *fmt, ...)
 {
- 8b8:	711d                	addi	sp,sp,-96
- 8ba:	ec06                	sd	ra,24(sp)
- 8bc:	e822                	sd	s0,16(sp)
- 8be:	1000                	addi	s0,sp,32
- 8c0:	e40c                	sd	a1,8(s0)
- 8c2:	e810                	sd	a2,16(s0)
- 8c4:	ec14                	sd	a3,24(s0)
- 8c6:	f018                	sd	a4,32(s0)
- 8c8:	f41c                	sd	a5,40(s0)
- 8ca:	03043823          	sd	a6,48(s0)
- 8ce:	03143c23          	sd	a7,56(s0)
+ 8c8:	711d                	addi	sp,sp,-96
+ 8ca:	ec06                	sd	ra,24(sp)
+ 8cc:	e822                	sd	s0,16(sp)
+ 8ce:	1000                	addi	s0,sp,32
+ 8d0:	e40c                	sd	a1,8(s0)
+ 8d2:	e810                	sd	a2,16(s0)
+ 8d4:	ec14                	sd	a3,24(s0)
+ 8d6:	f018                	sd	a4,32(s0)
+ 8d8:	f41c                	sd	a5,40(s0)
+ 8da:	03043823          	sd	a6,48(s0)
+ 8de:	03143c23          	sd	a7,56(s0)
   va_list ap;
 
   va_start(ap, fmt);
- 8d2:	00840613          	addi	a2,s0,8
- 8d6:	fec43423          	sd	a2,-24(s0)
+ 8e2:	00840613          	addi	a2,s0,8
+ 8e6:	fec43423          	sd	a2,-24(s0)
   vprintf(1, fmt, ap);
- 8da:	85aa                	mv	a1,a0
- 8dc:	4505                	li	a0,1
- 8de:	00000097          	auipc	ra,0x0
- 8e2:	dce080e7          	jalr	-562(ra) # 6ac <vprintf>
-}
- 8e6:	60e2                	ld	ra,24(sp)
- 8e8:	6442                	ld	s0,16(sp)
- 8ea:	6125                	addi	sp,sp,96
- 8ec:	8082                	ret
+ 8ea:	85aa                	mv	a1,a0
+ 8ec:	4505                	li	a0,1
+ 8ee:	00000097          	auipc	ra,0x0
+ 8f2:	dce080e7          	jalr	-562(ra) # 6bc <vprintf>
+}
+ 8f6:	60e2                	ld	ra,24(sp)
+ 8f8:	6442                	ld	s0,16(sp)
+ 8fa:	6125                	addi	sp,sp,96
+ 8fc:	8082                	ret
 
-00000000000008ee <free>:
+00000000000008fe <free>:
 static Header base;
 static Header *freep;
 
 void
 free(void *ap)
 {
- 8ee:	1141                	addi	sp,sp,-16
- 8f0:	e422                	sd	s0,8(sp)
- 8f2:	0800                	addi	s0,sp,16
+ 8fe:	1141                	addi	sp,sp,-16
+ 900:	e422                	sd	s0,8(sp)
+ 902:	0800                	addi	s0,sp,16
   Header *bp, *p;
 
   bp = (Header*)ap - 1;
- 8f4:	ff050693          	addi	a3,a0,-16
+ 904:	ff050693          	addi	a3,a0,-16
   for(p = freep; !(bp > p && bp < p->s.ptr); p = p->s.ptr)
- 8f8:	00000797          	auipc	a5,0x0
- 8fc:	2487b783          	ld	a5,584(a5) # b40 <freep>
- 900:	a02d                	j	92a <free+0x3c>
+ 908:	00000797          	auipc	a5,0x0
+ 90c:	2487b783          	ld	a5,584(a5) # b50 <freep>
+ 910:	a02d                	j	93a <free+0x3c>
     if(p >= p->s.ptr && (bp > p || bp < p->s.ptr))
       break;
   if(bp + bp->s.size == p->s.ptr){
     bp->s.size += p->s.ptr->s.size;
- 902:	4618                	lw	a4,8(a2)
- 904:	9f2d                	addw	a4,a4,a1
- 906:	fee52c23          	sw	a4,-8(a0)
+ 912:	4618                	lw	a4,8(a2)
+ 914:	9f2d                	addw	a4,a4,a1
+ 916:	fee52c23          	sw	a4,-8(a0)
     bp->s.ptr = p->s.ptr->s.ptr;
- 90a:	6398                	ld	a4,0(a5)
- 90c:	6310                	ld	a2,0(a4)
- 90e:	a83d                	j	94c <free+0x5e>
+ 91a:	6398                	ld	a4,0(a5)
+ 91c:	6310                	ld	a2,0(a4)
+ 91e:	a83d                	j	95c <free+0x5e>
   } else
     bp->s.ptr = p->s.ptr;
   if(p + p->s.size == bp){
     p->s.size += bp->s.size;
- 910:	ff852703          	lw	a4,-8(a0)
- 914:	9f31                	addw	a4,a4,a2
- 916:	c798                	sw	a4,8(a5)
+ 920:	ff852703          	lw	a4,-8(a0)
+ 924:	9f31                	addw	a4,a4,a2
+ 926:	c798                	sw	a4,8(a5)
     p->s.ptr = bp->s.ptr;
- 918:	ff053683          	ld	a3,-16(a0)
- 91c:	a091                	j	960 <free+0x72>
+ 928:	ff053683          	ld	a3,-16(a0)
+ 92c:	a091                	j	970 <free+0x72>
     if(p >= p->s.ptr && (bp > p || bp < p->s.ptr))
- 91e:	6398                	ld	a4,0(a5)
- 920:	00e7e463          	bltu	a5,a4,928 <free+0x3a>
- 924:	00e6ea63          	bltu	a3,a4,938 <free+0x4a>
+ 92e:	6398                	ld	a4,0(a5)
+ 930:	00e7e463          	bltu	a5,a4,938 <free+0x3a>
+ 934:	00e6ea63          	bltu	a3,a4,948 <free+0x4a>
 {
- 928:	87ba                	mv	a5,a4
+ 938:	87ba                	mv	a5,a4
   for(p = freep; !(bp > p && bp < p->s.ptr); p = p->s.ptr)
- 92a:	fed7fae3          	bgeu	a5,a3,91e <free+0x30>
- 92e:	6398                	ld	a4,0(a5)
- 930:	00e6e463          	bltu	a3,a4,938 <free+0x4a>
+ 93a:	fed7fae3          	bgeu	a5,a3,92e <free+0x30>
+ 93e:	6398                	ld	a4,0(a5)
+ 940:	00e6e463          	bltu	a3,a4,948 <free+0x4a>
     if(p >= p->s.ptr && (bp > p || bp < p->s.ptr))
- 934:	fee7eae3          	bltu	a5,a4,928 <free+0x3a>
+ 944:	fee7eae3          	bltu	a5,a4,938 <free+0x3a>
   if(bp + bp->s.size == p->s.ptr){
- 938:	ff852583          	lw	a1,-8(a0)
- 93c:	6390                	ld	a2,0(a5)
- 93e:	02059813          	slli	a6,a1,0x20
- 942:	01c85713          	srli	a4,a6,0x1c
- 946:	9736                	add	a4,a4,a3
- 948:	fae60de3          	beq	a2,a4,902 <free+0x14>
+ 948:	ff852583          	lw	a1,-8(a0)
+ 94c:	6390                	ld	a2,0(a5)
+ 94e:	02059813          	slli	a6,a1,0x20
+ 952:	01c85713          	srli	a4,a6,0x1c
+ 956:	9736                	add	a4,a4,a3
+ 958:	fae60de3          	beq	a2,a4,912 <free+0x14>
     bp->s.ptr = p->s.ptr->s.ptr;
- 94c:	fec53823          	sd	a2,-16(a0)
+ 95c:	fec53823          	sd	a2,-16(a0)
   if(p + p->s.size == bp){
- 950:	4790                	lw	a2,8(a5)
- 952:	02061593          	slli	a1,a2,0x20
- 956:	01c5d713          	srli	a4,a1,0x1c
- 95a:	973e                	add	a4,a4,a5
- 95c:	fae68ae3          	beq	a3,a4,910 <free+0x22>
+ 960:	4790                	lw	a2,8(a5)
+ 962:	02061593          	slli	a1,a2,0x20
+ 966:	01c5d713          	srli	a4,a1,0x1c
+ 96a:	973e                	add	a4,a4,a5
+ 96c:	fae68ae3          	beq	a3,a4,920 <free+0x22>
     p->s.ptr = bp->s.ptr;
- 960:	e394                	sd	a3,0(a5)
+ 970:	e394                	sd	a3,0(a5)
   } else
     p->s.ptr = bp;
   freep = p;
- 962:	00000717          	auipc	a4,0x0
- 966:	1cf73f23          	sd	a5,478(a4) # b40 <freep>
+ 972:	00000717          	auipc	a4,0x0
+ 976:	1cf73f23          	sd	a5,478(a4) # b50 <freep>
 }
- 96a:	6422                	ld	s0,8(sp)
- 96c:	0141                	addi	sp,sp,16
- 96e:	8082                	ret
+ 97a:	6422                	ld	s0,8(sp)
+ 97c:	0141                	addi	sp,sp,16
+ 97e:	8082                	ret
 
-0000000000000970 <malloc>:
+0000000000000980 <malloc>:
   return freep;
 }
 
 void*
 malloc(uint nbytes)
 {
- 970:	7139                	addi	sp,sp,-64
- 972:	fc06                	sd	ra,56(sp)
- 974:	f822                	sd	s0,48(sp)
- 976:	f426                	sd	s1,40(sp)
- 978:	f04a                	sd	s2,32(sp)
- 97a:	ec4e                	sd	s3,24(sp)
- 97c:	e852                	sd	s4,16(sp)
- 97e:	e456                	sd	s5,8(sp)
- 980:	e05a                	sd	s6,0(sp)
- 982:	0080                	addi	s0,sp,64
+ 980:	7139                	addi	sp,sp,-64
+ 982:	fc06                	sd	ra,56(sp)
+ 984:	f822                	sd	s0,48(sp)
+ 986:	f426                	sd	s1,40(sp)
+ 988:	f04a                	sd	s2,32(sp)
+ 98a:	ec4e                	sd	s3,24(sp)
+ 98c:	e852                	sd	s4,16(sp)
+ 98e:	e456                	sd	s5,8(sp)
+ 990:	e05a                	sd	s6,0(sp)
+ 992:	0080                	addi	s0,sp,64
   Header *p, *prevp;
   uint nunits;
 
   nunits = (nbytes + sizeof(Header) - 1)/sizeof(Header) + 1;
- 984:	02051493          	slli	s1,a0,0x20
- 988:	9081                	srli	s1,s1,0x20
- 98a:	04bd                	addi	s1,s1,15
- 98c:	8091                	srli	s1,s1,0x4
- 98e:	0014899b          	addiw	s3,s1,1
- 992:	0485                	addi	s1,s1,1
+ 994:	02051493          	slli	s1,a0,0x20
+ 998:	9081                	srli	s1,s1,0x20
+ 99a:	04bd                	addi	s1,s1,15
+ 99c:	8091                	srli	s1,s1,0x4
+ 99e:	0014899b          	addiw	s3,s1,1
+ 9a2:	0485                	addi	s1,s1,1
   if((prevp = freep) == 0){
- 994:	00000517          	auipc	a0,0x0
- 998:	1ac53503          	ld	a0,428(a0) # b40 <freep>
- 99c:	c515                	beqz	a0,9c8 <malloc+0x58>
+ 9a4:	00000517          	auipc	a0,0x0
+ 9a8:	1ac53503          	ld	a0,428(a0) # b50 <freep>
+ 9ac:	c515                	beqz	a0,9d8 <malloc+0x58>
     base.s.ptr = freep = prevp = &base;
     base.s.size = 0;
   }
   for(p = prevp->s.ptr; ; prevp = p, p = p->s.ptr){
- 99e:	611c                	ld	a5,0(a0)
+ 9ae:	611c                	ld	a5,0(a0)
     if(p->s.size >= nunits){
- 9a0:	4798                	lw	a4,8(a5)
- 9a2:	02977f63          	bgeu	a4,s1,9e0 <malloc+0x70>
- 9a6:	8a4e                	mv	s4,s3
- 9a8:	0009871b          	sext.w	a4,s3
- 9ac:	6685                	lui	a3,0x1
- 9ae:	00d77363          	bgeu	a4,a3,9b4 <malloc+0x44>
- 9b2:	6a05                	lui	s4,0x1
- 9b4:	000a0b1b          	sext.w	s6,s4
+ 9b0:	4798                	lw	a4,8(a5)
+ 9b2:	02977f63          	bgeu	a4,s1,9f0 <malloc+0x70>
+ 9b6:	8a4e                	mv	s4,s3
+ 9b8:	0009871b          	sext.w	a4,s3
+ 9bc:	6685                	lui	a3,0x1
+ 9be:	00d77363          	bgeu	a4,a3,9c4 <malloc+0x44>
+ 9c2:	6a05                	lui	s4,0x1
+ 9c4:	000a0b1b          	sext.w	s6,s4
   p = sbrk(nu * sizeof(Header));
- 9b8:	004a1a1b          	slliw	s4,s4,0x4
+ 9c8:	004a1a1b          	slliw	s4,s4,0x4
         p->s.size = nunits;
       }
       freep = prevp;
       return (void*)(p + 1);
     }
     if(p == freep)
- 9bc:	00000917          	auipc	s2,0x0
- 9c0:	18490913          	addi	s2,s2,388 # b40 <freep>
+ 9cc:	00000917          	auipc	s2,0x0
+ 9d0:	18490913          	addi	s2,s2,388 # b50 <freep>
   if(p == (char*)-1)
- 9c4:	5afd                	li	s5,-1
- 9c6:	a895                	j	a3a <malloc+0xca>
+ 9d4:	5afd                	li	s5,-1
+ 9d6:	a895                	j	a4a <malloc+0xca>
     base.s.ptr = freep = prevp = &base;
- 9c8:	00000797          	auipc	a5,0x0
- 9cc:	19078793          	addi	a5,a5,400 # b58 <base>
- 9d0:	00000717          	auipc	a4,0x0
- 9d4:	16f73823          	sd	a5,368(a4) # b40 <freep>
- 9d8:	e39c                	sd	a5,0(a5)
+ 9d8:	00000797          	auipc	a5,0x0
+ 9dc:	19078793          	addi	a5,a5,400 # b68 <base>
+ 9e0:	00000717          	auipc	a4,0x0
+ 9e4:	16f73823          	sd	a5,368(a4) # b50 <freep>
+ 9e8:	e39c                	sd	a5,0(a5)
     base.s.size = 0;
- 9da:	0007a423          	sw	zero,8(a5)
+ 9ea:	0007a423          	sw	zero,8(a5)
     if(p->s.size >= nunits){
- 9de:	b7e1                	j	9a6 <malloc+0x36>
+ 9ee:	b7e1                	j	9b6 <malloc+0x36>
       if(p->s.size == nunits)
- 9e0:	02e48c63          	beq	s1,a4,a18 <malloc+0xa8>
+ 9f0:	02e48c63          	beq	s1,a4,a28 <malloc+0xa8>
         p->s.size -= nunits;
- 9e4:	4137073b          	subw	a4,a4,s3
- 9e8:	c798                	sw	a4,8(a5)
+ 9f4:	4137073b          	subw	a4,a4,s3
+ 9f8:	c798                	sw	a4,8(a5)
         p += p->s.size;
- 9ea:	02071693          	slli	a3,a4,0x20
- 9ee:	01c6d713          	srli	a4,a3,0x1c
- 9f2:	97ba                	add	a5,a5,a4
+ 9fa:	02071693          	slli	a3,a4,0x20
+ 9fe:	01c6d713          	srli	a4,a3,0x1c
+ a02:	97ba                	add	a5,a5,a4
         p->s.size = nunits;
- 9f4:	0137a423          	sw	s3,8(a5)
+ a04:	0137a423          	sw	s3,8(a5)
       freep = prevp;
- 9f8:	00000717          	auipc	a4,0x0
- 9fc:	14a73423          	sd	a0,328(a4) # b40 <freep>
+ a08:	00000717          	auipc	a4,0x0
+ a0c:	14a73423          	sd	a0,328(a4) # b50 <freep>
       return (void*)(p + 1);
- a00:	01078513          	addi	a0,a5,16
+ a10:	01078513          	addi	a0,a5,16
       if((p = morecore(nunits)) == 0)
         return 0;
   }
 }
- a04:	70e2                	ld	ra,56(sp)
- a06:	7442                	ld	s0,48(sp)
- a08:	74a2                	ld	s1,40(sp)
- a0a:	7902                	ld	s2,32(sp)
- a0c:	69e2                	ld	s3,24(sp)
- a0e:	6a42                	ld	s4,16(sp)
- a10:	6aa2                	ld	s5,8(sp)
- a12:	6b02                	ld	s6,0(sp)
- a14:	6121                	addi	sp,sp,64
- a16:	8082                	ret
+ a14:	70e2                	ld	ra,56(sp)
+ a16:	7442                	ld	s0,48(sp)
+ a18:	74a2                	ld	s1,40(sp)
+ a1a:	7902                	ld	s2,32(sp)
+ a1c:	69e2                	ld	s3,24(sp)
+ a1e:	6a42                	ld	s4,16(sp)
+ a20:	6aa2                	ld	s5,8(sp)
+ a22:	6b02                	ld	s6,0(sp)
+ a24:	6121                	addi	sp,sp,64
+ a26:	8082                	ret
         prevp->s.ptr = p->s.ptr;
- a18:	6398                	ld	a4,0(a5)
- a1a:	e118                	sd	a4,0(a0)
- a1c:	bff1                	j	9f8 <malloc+0x88>
+ a28:	6398                	ld	a4,0(a5)
+ a2a:	e118                	sd	a4,0(a0)
+ a2c:	bff1                	j	a08 <malloc+0x88>
   hp->s.size = nu;
- a1e:	01652423          	sw	s6,8(a0)
+ a2e:	01652423          	sw	s6,8(a0)
   free((void*)(hp + 1));
- a22:	0541                	addi	a0,a0,16
- a24:	00000097          	auipc	ra,0x0
- a28:	eca080e7          	jalr	-310(ra) # 8ee <free>
+ a32:	0541                	addi	a0,a0,16
+ a34:	00000097          	auipc	ra,0x0
+ a38:	eca080e7          	jalr	-310(ra) # 8fe <free>
   return freep;
- a2c:	00093503          	ld	a0,0(s2)
+ a3c:	00093503          	ld	a0,0(s2)
       if((p = morecore(nunits)) == 0)
- a30:	d971                	beqz	a0,a04 <malloc+0x94>
+ a40:	d971                	beqz	a0,a14 <malloc+0x94>
   for(p = prevp->s.ptr; ; prevp = p, p = p->s.ptr){
- a32:	611c                	ld	a5,0(a0)
+ a42:	611c                	ld	a5,0(a0)
     if(p->s.size >= nunits){
- a34:	4798                	lw	a4,8(a5)
- a36:	fa9775e3          	bgeu	a4,s1,9e0 <malloc+0x70>
+ a44:	4798                	lw	a4,8(a5)
+ a46:	fa9775e3          	bgeu	a4,s1,9f0 <malloc+0x70>
     if(p == freep)
- a3a:	00093703          	ld	a4,0(s2)
- a3e:	853e                	mv	a0,a5
- a40:	fef719e3          	bne	a4,a5,a32 <malloc+0xc2>
+ a4a:	00093703          	ld	a4,0(s2)
+ a4e:	853e                	mv	a0,a5
+ a50:	fef719e3          	bne	a4,a5,a42 <malloc+0xc2>
   p = sbrk(nu * sizeof(Header));
- a44:	8552                	mv	a0,s4
- a46:	00000097          	auipc	ra,0x0
- a4a:	b80080e7          	jalr	-1152(ra) # 5c6 <sbrk>
+ a54:	8552                	mv	a0,s4
+ a56:	00000097          	auipc	ra,0x0
+ a5a:	b70080e7          	jalr	-1168(ra) # 5c6 <sbrk>
   if(p == (char*)-1)
- a4e:	fd5518e3          	bne	a0,s5,a1e <malloc+0xae>
+ a5e:	fd5518e3          	bne	a0,s5,a2e <malloc+0xae>
         return 0;
- a52:	4501                	li	a0,0
- a54:	bf45                	j	a04 <malloc+0x94>
+ a62:	4501                	li	a0,0
+ a64:	bf45                	j	a14 <malloc+0x94>
Binary files ./user/ls.o and ../xv6-labs-2021/user/ls.o differ
diff -urN ./user/ls.sym ../xv6-labs-2021/user/ls.sym
--- ./user/ls.sym	2021-12-05 17:54:42.000000000 +0800
+++ ../xv6-labs-2021/user/ls.sym	2021-11-26 14:46:16.000000000 +0800
@@ -1,7 +1,7 @@
 0000000000000000 .text
-0000000000000a58 .rodata
-0000000000000b40 .sbss
-0000000000000b48 .bss
+0000000000000a68 .rodata
+0000000000000b50 .sbss
+0000000000000b58 .bss
 0000000000000000 .comment
 0000000000000000 .riscv.attributes
 0000000000000000 .debug_aranges
@@ -14,33 +14,35 @@
 0000000000000000 .debug_loclists
 0000000000000000 .debug_rnglists
 0000000000000000 ls.c
-0000000000000b48 buf.0
+0000000000000b58 buf.0
 0000000000000000 ulib.c
 0000000000000000 printf.c
-00000000000005de putc
-0000000000000600 printint
-0000000000000b28 digits
+00000000000005ee putc
+0000000000000610 printint
+0000000000000b38 digits
 0000000000000000 umalloc.c
-0000000000000b40 freep
-0000000000000b58 base
+0000000000000b50 freep
+0000000000000b68 base
 00000000000002d2 strcpy
 0000000000000000 fmtname
-00000000000008b8 printf
-0000000000001339 __global_pointer$
+00000000000008c8 printf
+0000000000001349 __global_pointer$
 000000000000048c memmove
 0000000000000586 mknod
+00000000000005de trace
 000000000000038a gets
-0000000000000b39 __SDATA_BEGIN__
+0000000000000b49 __SDATA_BEGIN__
 00000000000005be getpid
 000000000000051e memcpy
-0000000000000970 malloc
+0000000000000980 malloc
 00000000000005ce sleep
+00000000000005e6 sysinfo
 000000000000054e pipe
 000000000000055e write
 0000000000000596 fstat
-000000000000088a fprintf
+000000000000089a fprintf
 000000000000056e kill
-00000000000006ac vprintf
+00000000000006bc vprintf
 00000000000005ae chdir
 0000000000000576 exec
 0000000000000546 wait
@@ -48,18 +50,18 @@
 000000000000058e unlink
 00000000000004e4 memcmp
 0000000000000536 fork
-0000000000000b68 __BSS_END__
+0000000000000b78 __BSS_END__
 00000000000005c6 sbrk
 00000000000005d6 uptime
-0000000000000b39 __bss_start
+0000000000000b49 __bss_start
 0000000000000344 memset
 0000000000000278 main
 00000000000002ee strcmp
 00000000000005b6 dup
-0000000000000b39 __DATA_BEGIN__
+0000000000000b49 __DATA_BEGIN__
 00000000000003fe stat
-0000000000000b39 _edata
-0000000000000b68 _end
+0000000000000b49 _edata
+0000000000000b78 _end
 000000000000059e link
 00000000000000b4 ls
 000000000000053e exit
@@ -69,4 +71,4 @@
 0000000000000366 strchr
 00000000000005a6 mkdir
 0000000000000566 close
-00000000000008ee free
+00000000000008fe free
diff -urN ./user/mkdir.asm ../xv6-labs-2021/user/mkdir.asm
--- ./user/mkdir.asm	2021-12-05 17:54:42.000000000 +0800
+++ ../xv6-labs-2021/user/mkdir.asm	2021-11-26 14:46:16.000000000 +0800
@@ -45,10 +45,10 @@
   3c:	a80d                	j	6e <main+0x6e>
     fprintf(2, "Usage: mkdir files...\n");
   3e:	00000597          	auipc	a1,0x0
-  42:	7c258593          	addi	a1,a1,1986 # 800 <malloc+0xea>
+  42:	7d258593          	addi	a1,a1,2002 # 810 <malloc+0xea>
   46:	4509                	li	a0,2
   48:	00000097          	auipc	ra,0x0
-  4c:	5e8080e7          	jalr	1512(ra) # 630 <fprintf>
+  4c:	5f8080e7          	jalr	1528(ra) # 640 <fprintf>
     exit(1);
   50:	4505                	li	a0,1
   52:	00000097          	auipc	ra,0x0
@@ -56,10 +56,10 @@
       fprintf(2, "mkdir: %s failed to create\n", argv[i]);
   5a:	6090                	ld	a2,0(s1)
   5c:	00000597          	auipc	a1,0x0
-  60:	7bc58593          	addi	a1,a1,1980 # 818 <malloc+0x102>
+  60:	7cc58593          	addi	a1,a1,1996 # 828 <malloc+0x102>
   64:	4509                	li	a0,2
   66:	00000097          	auipc	ra,0x0
-  6a:	5ca080e7          	jalr	1482(ra) # 630 <fprintf>
+  6a:	5da080e7          	jalr	1498(ra) # 640 <fprintf>
       break;
     }
   }
@@ -700,632 +700,652 @@
  ret
  382:	8082                	ret
 
-0000000000000384 <putc>:
+0000000000000384 <trace>:
+.global trace
+trace:
+ li a7, SYS_trace
+ 384:	48d9                	li	a7,22
+ ecall
+ 386:	00000073          	ecall
+ ret
+ 38a:	8082                	ret
+
+000000000000038c <sysinfo>:
+.global sysinfo
+sysinfo:
+ li a7, SYS_sysinfo
+ 38c:	48dd                	li	a7,23
+ ecall
+ 38e:	00000073          	ecall
+ ret
+ 392:	8082                	ret
+
+0000000000000394 <putc>:
 
 static char digits[] = "0123456789ABCDEF";
 
 static void
 putc(int fd, char c)
 {
- 384:	1101                	addi	sp,sp,-32
- 386:	ec06                	sd	ra,24(sp)
- 388:	e822                	sd	s0,16(sp)
- 38a:	1000                	addi	s0,sp,32
- 38c:	feb407a3          	sb	a1,-17(s0)
+ 394:	1101                	addi	sp,sp,-32
+ 396:	ec06                	sd	ra,24(sp)
+ 398:	e822                	sd	s0,16(sp)
+ 39a:	1000                	addi	s0,sp,32
+ 39c:	feb407a3          	sb	a1,-17(s0)
   write(fd, &c, 1);
- 390:	4605                	li	a2,1
- 392:	fef40593          	addi	a1,s0,-17
- 396:	00000097          	auipc	ra,0x0
- 39a:	f6e080e7          	jalr	-146(ra) # 304 <write>
+ 3a0:	4605                	li	a2,1
+ 3a2:	fef40593          	addi	a1,s0,-17
+ 3a6:	00000097          	auipc	ra,0x0
+ 3aa:	f5e080e7          	jalr	-162(ra) # 304 <write>
 }
- 39e:	60e2                	ld	ra,24(sp)
- 3a0:	6442                	ld	s0,16(sp)
- 3a2:	6105                	addi	sp,sp,32
- 3a4:	8082                	ret
+ 3ae:	60e2                	ld	ra,24(sp)
+ 3b0:	6442                	ld	s0,16(sp)
+ 3b2:	6105                	addi	sp,sp,32
+ 3b4:	8082                	ret
 
-00000000000003a6 <printint>:
+00000000000003b6 <printint>:
 
 static void
 printint(int fd, int xx, int base, int sgn)
 {
- 3a6:	7139                	addi	sp,sp,-64
- 3a8:	fc06                	sd	ra,56(sp)
- 3aa:	f822                	sd	s0,48(sp)
- 3ac:	f426                	sd	s1,40(sp)
- 3ae:	f04a                	sd	s2,32(sp)
- 3b0:	ec4e                	sd	s3,24(sp)
- 3b2:	0080                	addi	s0,sp,64
- 3b4:	84aa                	mv	s1,a0
+ 3b6:	7139                	addi	sp,sp,-64
+ 3b8:	fc06                	sd	ra,56(sp)
+ 3ba:	f822                	sd	s0,48(sp)
+ 3bc:	f426                	sd	s1,40(sp)
+ 3be:	f04a                	sd	s2,32(sp)
+ 3c0:	ec4e                	sd	s3,24(sp)
+ 3c2:	0080                	addi	s0,sp,64
+ 3c4:	84aa                	mv	s1,a0
   char buf[16];
   int i, neg;
   uint x;
 
   neg = 0;
   if(sgn && xx < 0){
- 3b6:	c299                	beqz	a3,3bc <printint+0x16>
- 3b8:	0805c963          	bltz	a1,44a <printint+0xa4>
+ 3c6:	c299                	beqz	a3,3cc <printint+0x16>
+ 3c8:	0805c963          	bltz	a1,45a <printint+0xa4>
     neg = 1;
     x = -xx;
   } else {
     x = xx;
- 3bc:	2581                	sext.w	a1,a1
+ 3cc:	2581                	sext.w	a1,a1
   neg = 0;
- 3be:	4881                	li	a7,0
- 3c0:	fc040693          	addi	a3,s0,-64
+ 3ce:	4881                	li	a7,0
+ 3d0:	fc040693          	addi	a3,s0,-64
   }
 
   i = 0;
- 3c4:	4701                	li	a4,0
+ 3d4:	4701                	li	a4,0
   do{
     buf[i++] = digits[x % base];
- 3c6:	2601                	sext.w	a2,a2
- 3c8:	00000517          	auipc	a0,0x0
- 3cc:	4d050513          	addi	a0,a0,1232 # 898 <digits>
- 3d0:	883a                	mv	a6,a4
- 3d2:	2705                	addiw	a4,a4,1
- 3d4:	02c5f7bb          	remuw	a5,a1,a2
- 3d8:	1782                	slli	a5,a5,0x20
- 3da:	9381                	srli	a5,a5,0x20
- 3dc:	97aa                	add	a5,a5,a0
- 3de:	0007c783          	lbu	a5,0(a5)
- 3e2:	00f68023          	sb	a5,0(a3)
+ 3d6:	2601                	sext.w	a2,a2
+ 3d8:	00000517          	auipc	a0,0x0
+ 3dc:	4d050513          	addi	a0,a0,1232 # 8a8 <digits>
+ 3e0:	883a                	mv	a6,a4
+ 3e2:	2705                	addiw	a4,a4,1
+ 3e4:	02c5f7bb          	remuw	a5,a1,a2
+ 3e8:	1782                	slli	a5,a5,0x20
+ 3ea:	9381                	srli	a5,a5,0x20
+ 3ec:	97aa                	add	a5,a5,a0
+ 3ee:	0007c783          	lbu	a5,0(a5)
+ 3f2:	00f68023          	sb	a5,0(a3)
   }while((x /= base) != 0);
- 3e6:	0005879b          	sext.w	a5,a1
- 3ea:	02c5d5bb          	divuw	a1,a1,a2
- 3ee:	0685                	addi	a3,a3,1
- 3f0:	fec7f0e3          	bgeu	a5,a2,3d0 <printint+0x2a>
+ 3f6:	0005879b          	sext.w	a5,a1
+ 3fa:	02c5d5bb          	divuw	a1,a1,a2
+ 3fe:	0685                	addi	a3,a3,1
+ 400:	fec7f0e3          	bgeu	a5,a2,3e0 <printint+0x2a>
   if(neg)
- 3f4:	00088c63          	beqz	a7,40c <printint+0x66>
+ 404:	00088c63          	beqz	a7,41c <printint+0x66>
     buf[i++] = '-';
- 3f8:	fd070793          	addi	a5,a4,-48
- 3fc:	00878733          	add	a4,a5,s0
- 400:	02d00793          	li	a5,45
- 404:	fef70823          	sb	a5,-16(a4)
- 408:	0028071b          	addiw	a4,a6,2
+ 408:	fd070793          	addi	a5,a4,-48
+ 40c:	00878733          	add	a4,a5,s0
+ 410:	02d00793          	li	a5,45
+ 414:	fef70823          	sb	a5,-16(a4)
+ 418:	0028071b          	addiw	a4,a6,2
 
   while(--i >= 0)
- 40c:	02e05863          	blez	a4,43c <printint+0x96>
- 410:	fc040793          	addi	a5,s0,-64
- 414:	00e78933          	add	s2,a5,a4
- 418:	fff78993          	addi	s3,a5,-1
- 41c:	99ba                	add	s3,s3,a4
- 41e:	377d                	addiw	a4,a4,-1
- 420:	1702                	slli	a4,a4,0x20
- 422:	9301                	srli	a4,a4,0x20
- 424:	40e989b3          	sub	s3,s3,a4
+ 41c:	02e05863          	blez	a4,44c <printint+0x96>
+ 420:	fc040793          	addi	a5,s0,-64
+ 424:	00e78933          	add	s2,a5,a4
+ 428:	fff78993          	addi	s3,a5,-1
+ 42c:	99ba                	add	s3,s3,a4
+ 42e:	377d                	addiw	a4,a4,-1
+ 430:	1702                	slli	a4,a4,0x20
+ 432:	9301                	srli	a4,a4,0x20
+ 434:	40e989b3          	sub	s3,s3,a4
     putc(fd, buf[i]);
- 428:	fff94583          	lbu	a1,-1(s2)
- 42c:	8526                	mv	a0,s1
- 42e:	00000097          	auipc	ra,0x0
- 432:	f56080e7          	jalr	-170(ra) # 384 <putc>
+ 438:	fff94583          	lbu	a1,-1(s2)
+ 43c:	8526                	mv	a0,s1
+ 43e:	00000097          	auipc	ra,0x0
+ 442:	f56080e7          	jalr	-170(ra) # 394 <putc>
   while(--i >= 0)
- 436:	197d                	addi	s2,s2,-1
- 438:	ff3918e3          	bne	s2,s3,428 <printint+0x82>
+ 446:	197d                	addi	s2,s2,-1
+ 448:	ff3918e3          	bne	s2,s3,438 <printint+0x82>
 }
- 43c:	70e2                	ld	ra,56(sp)
- 43e:	7442                	ld	s0,48(sp)
- 440:	74a2                	ld	s1,40(sp)
- 442:	7902                	ld	s2,32(sp)
- 444:	69e2                	ld	s3,24(sp)
- 446:	6121                	addi	sp,sp,64
- 448:	8082                	ret
+ 44c:	70e2                	ld	ra,56(sp)
+ 44e:	7442                	ld	s0,48(sp)
+ 450:	74a2                	ld	s1,40(sp)
+ 452:	7902                	ld	s2,32(sp)
+ 454:	69e2                	ld	s3,24(sp)
+ 456:	6121                	addi	sp,sp,64
+ 458:	8082                	ret
     x = -xx;
- 44a:	40b005bb          	negw	a1,a1
+ 45a:	40b005bb          	negw	a1,a1
     neg = 1;
- 44e:	4885                	li	a7,1
+ 45e:	4885                	li	a7,1
     x = -xx;
- 450:	bf85                	j	3c0 <printint+0x1a>
+ 460:	bf85                	j	3d0 <printint+0x1a>
 
-0000000000000452 <vprintf>:
+0000000000000462 <vprintf>:
 }
 
 // Print to the given fd. Only understands %d, %x, %p, %s.
 void
 vprintf(int fd, const char *fmt, va_list ap)
 {
- 452:	7119                	addi	sp,sp,-128
- 454:	fc86                	sd	ra,120(sp)
- 456:	f8a2                	sd	s0,112(sp)
- 458:	f4a6                	sd	s1,104(sp)
- 45a:	f0ca                	sd	s2,96(sp)
- 45c:	ecce                	sd	s3,88(sp)
- 45e:	e8d2                	sd	s4,80(sp)
- 460:	e4d6                	sd	s5,72(sp)
- 462:	e0da                	sd	s6,64(sp)
- 464:	fc5e                	sd	s7,56(sp)
- 466:	f862                	sd	s8,48(sp)
- 468:	f466                	sd	s9,40(sp)
- 46a:	f06a                	sd	s10,32(sp)
- 46c:	ec6e                	sd	s11,24(sp)
- 46e:	0100                	addi	s0,sp,128
+ 462:	7119                	addi	sp,sp,-128
+ 464:	fc86                	sd	ra,120(sp)
+ 466:	f8a2                	sd	s0,112(sp)
+ 468:	f4a6                	sd	s1,104(sp)
+ 46a:	f0ca                	sd	s2,96(sp)
+ 46c:	ecce                	sd	s3,88(sp)
+ 46e:	e8d2                	sd	s4,80(sp)
+ 470:	e4d6                	sd	s5,72(sp)
+ 472:	e0da                	sd	s6,64(sp)
+ 474:	fc5e                	sd	s7,56(sp)
+ 476:	f862                	sd	s8,48(sp)
+ 478:	f466                	sd	s9,40(sp)
+ 47a:	f06a                	sd	s10,32(sp)
+ 47c:	ec6e                	sd	s11,24(sp)
+ 47e:	0100                	addi	s0,sp,128
   char *s;
   int c, i, state;
 
   state = 0;
   for(i = 0; fmt[i]; i++){
- 470:	0005c903          	lbu	s2,0(a1)
- 474:	18090f63          	beqz	s2,612 <vprintf+0x1c0>
- 478:	8aaa                	mv	s5,a0
- 47a:	8b32                	mv	s6,a2
- 47c:	00158493          	addi	s1,a1,1
+ 480:	0005c903          	lbu	s2,0(a1)
+ 484:	18090f63          	beqz	s2,622 <vprintf+0x1c0>
+ 488:	8aaa                	mv	s5,a0
+ 48a:	8b32                	mv	s6,a2
+ 48c:	00158493          	addi	s1,a1,1
   state = 0;
- 480:	4981                	li	s3,0
+ 490:	4981                	li	s3,0
       if(c == '%'){
         state = '%';
       } else {
         putc(fd, c);
       }
     } else if(state == '%'){
- 482:	02500a13          	li	s4,37
- 486:	4c55                	li	s8,21
- 488:	00000c97          	auipc	s9,0x0
- 48c:	3b8c8c93          	addi	s9,s9,952 # 840 <malloc+0x12a>
+ 492:	02500a13          	li	s4,37
+ 496:	4c55                	li	s8,21
+ 498:	00000c97          	auipc	s9,0x0
+ 49c:	3b8c8c93          	addi	s9,s9,952 # 850 <malloc+0x12a>
         printptr(fd, va_arg(ap, uint64));
       } else if(c == 's'){
         s = va_arg(ap, char*);
         if(s == 0)
           s = "(null)";
         while(*s != 0){
- 490:	02800d93          	li	s11,40
+ 4a0:	02800d93          	li	s11,40
   putc(fd, 'x');
- 494:	4d41                	li	s10,16
+ 4a4:	4d41                	li	s10,16
     putc(fd, digits[x >> (sizeof(uint64) * 8 - 4)]);
- 496:	00000b97          	auipc	s7,0x0
- 49a:	402b8b93          	addi	s7,s7,1026 # 898 <digits>
- 49e:	a839                	j	4bc <vprintf+0x6a>
+ 4a6:	00000b97          	auipc	s7,0x0
+ 4aa:	402b8b93          	addi	s7,s7,1026 # 8a8 <digits>
+ 4ae:	a839                	j	4cc <vprintf+0x6a>
         putc(fd, c);
- 4a0:	85ca                	mv	a1,s2
- 4a2:	8556                	mv	a0,s5
- 4a4:	00000097          	auipc	ra,0x0
- 4a8:	ee0080e7          	jalr	-288(ra) # 384 <putc>
- 4ac:	a019                	j	4b2 <vprintf+0x60>
+ 4b0:	85ca                	mv	a1,s2
+ 4b2:	8556                	mv	a0,s5
+ 4b4:	00000097          	auipc	ra,0x0
+ 4b8:	ee0080e7          	jalr	-288(ra) # 394 <putc>
+ 4bc:	a019                	j	4c2 <vprintf+0x60>
     } else if(state == '%'){
- 4ae:	01498d63          	beq	s3,s4,4c8 <vprintf+0x76>
+ 4be:	01498d63          	beq	s3,s4,4d8 <vprintf+0x76>
   for(i = 0; fmt[i]; i++){
- 4b2:	0485                	addi	s1,s1,1
- 4b4:	fff4c903          	lbu	s2,-1(s1)
- 4b8:	14090d63          	beqz	s2,612 <vprintf+0x1c0>
+ 4c2:	0485                	addi	s1,s1,1
+ 4c4:	fff4c903          	lbu	s2,-1(s1)
+ 4c8:	14090d63          	beqz	s2,622 <vprintf+0x1c0>
     if(state == 0){
- 4bc:	fe0999e3          	bnez	s3,4ae <vprintf+0x5c>
+ 4cc:	fe0999e3          	bnez	s3,4be <vprintf+0x5c>
       if(c == '%'){
- 4c0:	ff4910e3          	bne	s2,s4,4a0 <vprintf+0x4e>
+ 4d0:	ff4910e3          	bne	s2,s4,4b0 <vprintf+0x4e>
         state = '%';
- 4c4:	89d2                	mv	s3,s4
- 4c6:	b7f5                	j	4b2 <vprintf+0x60>
+ 4d4:	89d2                	mv	s3,s4
+ 4d6:	b7f5                	j	4c2 <vprintf+0x60>
       if(c == 'd'){
- 4c8:	11490c63          	beq	s2,s4,5e0 <vprintf+0x18e>
- 4cc:	f9d9079b          	addiw	a5,s2,-99
- 4d0:	0ff7f793          	zext.b	a5,a5
- 4d4:	10fc6e63          	bltu	s8,a5,5f0 <vprintf+0x19e>
- 4d8:	f9d9079b          	addiw	a5,s2,-99
- 4dc:	0ff7f713          	zext.b	a4,a5
- 4e0:	10ec6863          	bltu	s8,a4,5f0 <vprintf+0x19e>
- 4e4:	00271793          	slli	a5,a4,0x2
- 4e8:	97e6                	add	a5,a5,s9
- 4ea:	439c                	lw	a5,0(a5)
- 4ec:	97e6                	add	a5,a5,s9
- 4ee:	8782                	jr	a5
+ 4d8:	11490c63          	beq	s2,s4,5f0 <vprintf+0x18e>
+ 4dc:	f9d9079b          	addiw	a5,s2,-99
+ 4e0:	0ff7f793          	zext.b	a5,a5
+ 4e4:	10fc6e63          	bltu	s8,a5,600 <vprintf+0x19e>
+ 4e8:	f9d9079b          	addiw	a5,s2,-99
+ 4ec:	0ff7f713          	zext.b	a4,a5
+ 4f0:	10ec6863          	bltu	s8,a4,600 <vprintf+0x19e>
+ 4f4:	00271793          	slli	a5,a4,0x2
+ 4f8:	97e6                	add	a5,a5,s9
+ 4fa:	439c                	lw	a5,0(a5)
+ 4fc:	97e6                	add	a5,a5,s9
+ 4fe:	8782                	jr	a5
         printint(fd, va_arg(ap, int), 10, 1);
- 4f0:	008b0913          	addi	s2,s6,8
- 4f4:	4685                	li	a3,1
- 4f6:	4629                	li	a2,10
- 4f8:	000b2583          	lw	a1,0(s6)
- 4fc:	8556                	mv	a0,s5
- 4fe:	00000097          	auipc	ra,0x0
- 502:	ea8080e7          	jalr	-344(ra) # 3a6 <printint>
- 506:	8b4a                	mv	s6,s2
+ 500:	008b0913          	addi	s2,s6,8
+ 504:	4685                	li	a3,1
+ 506:	4629                	li	a2,10
+ 508:	000b2583          	lw	a1,0(s6)
+ 50c:	8556                	mv	a0,s5
+ 50e:	00000097          	auipc	ra,0x0
+ 512:	ea8080e7          	jalr	-344(ra) # 3b6 <printint>
+ 516:	8b4a                	mv	s6,s2
       } else {
         // Unknown % sequence.  Print it to draw attention.
         putc(fd, '%');
         putc(fd, c);
       }
       state = 0;
- 508:	4981                	li	s3,0
- 50a:	b765                	j	4b2 <vprintf+0x60>
+ 518:	4981                	li	s3,0
+ 51a:	b765                	j	4c2 <vprintf+0x60>
         printint(fd, va_arg(ap, uint64), 10, 0);
- 50c:	008b0913          	addi	s2,s6,8
- 510:	4681                	li	a3,0
- 512:	4629                	li	a2,10
- 514:	000b2583          	lw	a1,0(s6)
- 518:	8556                	mv	a0,s5
- 51a:	00000097          	auipc	ra,0x0
- 51e:	e8c080e7          	jalr	-372(ra) # 3a6 <printint>
- 522:	8b4a                	mv	s6,s2
+ 51c:	008b0913          	addi	s2,s6,8
+ 520:	4681                	li	a3,0
+ 522:	4629                	li	a2,10
+ 524:	000b2583          	lw	a1,0(s6)
+ 528:	8556                	mv	a0,s5
+ 52a:	00000097          	auipc	ra,0x0
+ 52e:	e8c080e7          	jalr	-372(ra) # 3b6 <printint>
+ 532:	8b4a                	mv	s6,s2
       state = 0;
- 524:	4981                	li	s3,0
- 526:	b771                	j	4b2 <vprintf+0x60>
+ 534:	4981                	li	s3,0
+ 536:	b771                	j	4c2 <vprintf+0x60>
         printint(fd, va_arg(ap, int), 16, 0);
- 528:	008b0913          	addi	s2,s6,8
- 52c:	4681                	li	a3,0
- 52e:	866a                	mv	a2,s10
- 530:	000b2583          	lw	a1,0(s6)
- 534:	8556                	mv	a0,s5
- 536:	00000097          	auipc	ra,0x0
- 53a:	e70080e7          	jalr	-400(ra) # 3a6 <printint>
- 53e:	8b4a                	mv	s6,s2
+ 538:	008b0913          	addi	s2,s6,8
+ 53c:	4681                	li	a3,0
+ 53e:	866a                	mv	a2,s10
+ 540:	000b2583          	lw	a1,0(s6)
+ 544:	8556                	mv	a0,s5
+ 546:	00000097          	auipc	ra,0x0
+ 54a:	e70080e7          	jalr	-400(ra) # 3b6 <printint>
+ 54e:	8b4a                	mv	s6,s2
       state = 0;
- 540:	4981                	li	s3,0
- 542:	bf85                	j	4b2 <vprintf+0x60>
+ 550:	4981                	li	s3,0
+ 552:	bf85                	j	4c2 <vprintf+0x60>
         printptr(fd, va_arg(ap, uint64));
- 544:	008b0793          	addi	a5,s6,8
- 548:	f8f43423          	sd	a5,-120(s0)
- 54c:	000b3983          	ld	s3,0(s6)
+ 554:	008b0793          	addi	a5,s6,8
+ 558:	f8f43423          	sd	a5,-120(s0)
+ 55c:	000b3983          	ld	s3,0(s6)
   putc(fd, '0');
- 550:	03000593          	li	a1,48
- 554:	8556                	mv	a0,s5
- 556:	00000097          	auipc	ra,0x0
- 55a:	e2e080e7          	jalr	-466(ra) # 384 <putc>
+ 560:	03000593          	li	a1,48
+ 564:	8556                	mv	a0,s5
+ 566:	00000097          	auipc	ra,0x0
+ 56a:	e2e080e7          	jalr	-466(ra) # 394 <putc>
   putc(fd, 'x');
- 55e:	07800593          	li	a1,120
- 562:	8556                	mv	a0,s5
- 564:	00000097          	auipc	ra,0x0
- 568:	e20080e7          	jalr	-480(ra) # 384 <putc>
- 56c:	896a                	mv	s2,s10
+ 56e:	07800593          	li	a1,120
+ 572:	8556                	mv	a0,s5
+ 574:	00000097          	auipc	ra,0x0
+ 578:	e20080e7          	jalr	-480(ra) # 394 <putc>
+ 57c:	896a                	mv	s2,s10
     putc(fd, digits[x >> (sizeof(uint64) * 8 - 4)]);
- 56e:	03c9d793          	srli	a5,s3,0x3c
- 572:	97de                	add	a5,a5,s7
- 574:	0007c583          	lbu	a1,0(a5)
- 578:	8556                	mv	a0,s5
- 57a:	00000097          	auipc	ra,0x0
- 57e:	e0a080e7          	jalr	-502(ra) # 384 <putc>
+ 57e:	03c9d793          	srli	a5,s3,0x3c
+ 582:	97de                	add	a5,a5,s7
+ 584:	0007c583          	lbu	a1,0(a5)
+ 588:	8556                	mv	a0,s5
+ 58a:	00000097          	auipc	ra,0x0
+ 58e:	e0a080e7          	jalr	-502(ra) # 394 <putc>
   for (i = 0; i < (sizeof(uint64) * 2); i++, x <<= 4)
- 582:	0992                	slli	s3,s3,0x4
- 584:	397d                	addiw	s2,s2,-1
- 586:	fe0914e3          	bnez	s2,56e <vprintf+0x11c>
+ 592:	0992                	slli	s3,s3,0x4
+ 594:	397d                	addiw	s2,s2,-1
+ 596:	fe0914e3          	bnez	s2,57e <vprintf+0x11c>
         printptr(fd, va_arg(ap, uint64));
- 58a:	f8843b03          	ld	s6,-120(s0)
+ 59a:	f8843b03          	ld	s6,-120(s0)
       state = 0;
- 58e:	4981                	li	s3,0
- 590:	b70d                	j	4b2 <vprintf+0x60>
+ 59e:	4981                	li	s3,0
+ 5a0:	b70d                	j	4c2 <vprintf+0x60>
         s = va_arg(ap, char*);
- 592:	008b0913          	addi	s2,s6,8
- 596:	000b3983          	ld	s3,0(s6)
+ 5a2:	008b0913          	addi	s2,s6,8
+ 5a6:	000b3983          	ld	s3,0(s6)
         if(s == 0)
- 59a:	02098163          	beqz	s3,5bc <vprintf+0x16a>
+ 5aa:	02098163          	beqz	s3,5cc <vprintf+0x16a>
         while(*s != 0){
- 59e:	0009c583          	lbu	a1,0(s3)
- 5a2:	c5ad                	beqz	a1,60c <vprintf+0x1ba>
+ 5ae:	0009c583          	lbu	a1,0(s3)
+ 5b2:	c5ad                	beqz	a1,61c <vprintf+0x1ba>
           putc(fd, *s);
- 5a4:	8556                	mv	a0,s5
- 5a6:	00000097          	auipc	ra,0x0
- 5aa:	dde080e7          	jalr	-546(ra) # 384 <putc>
+ 5b4:	8556                	mv	a0,s5
+ 5b6:	00000097          	auipc	ra,0x0
+ 5ba:	dde080e7          	jalr	-546(ra) # 394 <putc>
           s++;
- 5ae:	0985                	addi	s3,s3,1
+ 5be:	0985                	addi	s3,s3,1
         while(*s != 0){
- 5b0:	0009c583          	lbu	a1,0(s3)
- 5b4:	f9e5                	bnez	a1,5a4 <vprintf+0x152>
+ 5c0:	0009c583          	lbu	a1,0(s3)
+ 5c4:	f9e5                	bnez	a1,5b4 <vprintf+0x152>
         s = va_arg(ap, char*);
- 5b6:	8b4a                	mv	s6,s2
+ 5c6:	8b4a                	mv	s6,s2
       state = 0;
- 5b8:	4981                	li	s3,0
- 5ba:	bde5                	j	4b2 <vprintf+0x60>
+ 5c8:	4981                	li	s3,0
+ 5ca:	bde5                	j	4c2 <vprintf+0x60>
           s = "(null)";
- 5bc:	00000997          	auipc	s3,0x0
- 5c0:	27c98993          	addi	s3,s3,636 # 838 <malloc+0x122>
+ 5cc:	00000997          	auipc	s3,0x0
+ 5d0:	27c98993          	addi	s3,s3,636 # 848 <malloc+0x122>
         while(*s != 0){
- 5c4:	85ee                	mv	a1,s11
- 5c6:	bff9                	j	5a4 <vprintf+0x152>
+ 5d4:	85ee                	mv	a1,s11
+ 5d6:	bff9                	j	5b4 <vprintf+0x152>
         putc(fd, va_arg(ap, uint));
- 5c8:	008b0913          	addi	s2,s6,8
- 5cc:	000b4583          	lbu	a1,0(s6)
- 5d0:	8556                	mv	a0,s5
- 5d2:	00000097          	auipc	ra,0x0
- 5d6:	db2080e7          	jalr	-590(ra) # 384 <putc>
- 5da:	8b4a                	mv	s6,s2
-      state = 0;
- 5dc:	4981                	li	s3,0
- 5de:	bdd1                	j	4b2 <vprintf+0x60>
-        putc(fd, c);
- 5e0:	85d2                	mv	a1,s4
- 5e2:	8556                	mv	a0,s5
- 5e4:	00000097          	auipc	ra,0x0
- 5e8:	da0080e7          	jalr	-608(ra) # 384 <putc>
+ 5d8:	008b0913          	addi	s2,s6,8
+ 5dc:	000b4583          	lbu	a1,0(s6)
+ 5e0:	8556                	mv	a0,s5
+ 5e2:	00000097          	auipc	ra,0x0
+ 5e6:	db2080e7          	jalr	-590(ra) # 394 <putc>
+ 5ea:	8b4a                	mv	s6,s2
       state = 0;
  5ec:	4981                	li	s3,0
- 5ee:	b5d1                	j	4b2 <vprintf+0x60>
-        putc(fd, '%');
+ 5ee:	bdd1                	j	4c2 <vprintf+0x60>
+        putc(fd, c);
  5f0:	85d2                	mv	a1,s4
  5f2:	8556                	mv	a0,s5
  5f4:	00000097          	auipc	ra,0x0
- 5f8:	d90080e7          	jalr	-624(ra) # 384 <putc>
+ 5f8:	da0080e7          	jalr	-608(ra) # 394 <putc>
+      state = 0;
+ 5fc:	4981                	li	s3,0
+ 5fe:	b5d1                	j	4c2 <vprintf+0x60>
+        putc(fd, '%');
+ 600:	85d2                	mv	a1,s4
+ 602:	8556                	mv	a0,s5
+ 604:	00000097          	auipc	ra,0x0
+ 608:	d90080e7          	jalr	-624(ra) # 394 <putc>
         putc(fd, c);
- 5fc:	85ca                	mv	a1,s2
- 5fe:	8556                	mv	a0,s5
- 600:	00000097          	auipc	ra,0x0
- 604:	d84080e7          	jalr	-636(ra) # 384 <putc>
+ 60c:	85ca                	mv	a1,s2
+ 60e:	8556                	mv	a0,s5
+ 610:	00000097          	auipc	ra,0x0
+ 614:	d84080e7          	jalr	-636(ra) # 394 <putc>
       state = 0;
- 608:	4981                	li	s3,0
- 60a:	b565                	j	4b2 <vprintf+0x60>
+ 618:	4981                	li	s3,0
+ 61a:	b565                	j	4c2 <vprintf+0x60>
         s = va_arg(ap, char*);
- 60c:	8b4a                	mv	s6,s2
+ 61c:	8b4a                	mv	s6,s2
       state = 0;
- 60e:	4981                	li	s3,0
- 610:	b54d                	j	4b2 <vprintf+0x60>
+ 61e:	4981                	li	s3,0
+ 620:	b54d                	j	4c2 <vprintf+0x60>
     }
   }
 }
- 612:	70e6                	ld	ra,120(sp)
- 614:	7446                	ld	s0,112(sp)
- 616:	74a6                	ld	s1,104(sp)
- 618:	7906                	ld	s2,96(sp)
- 61a:	69e6                	ld	s3,88(sp)
- 61c:	6a46                	ld	s4,80(sp)
- 61e:	6aa6                	ld	s5,72(sp)
- 620:	6b06                	ld	s6,64(sp)
- 622:	7be2                	ld	s7,56(sp)
- 624:	7c42                	ld	s8,48(sp)
- 626:	7ca2                	ld	s9,40(sp)
- 628:	7d02                	ld	s10,32(sp)
- 62a:	6de2                	ld	s11,24(sp)
- 62c:	6109                	addi	sp,sp,128
- 62e:	8082                	ret
+ 622:	70e6                	ld	ra,120(sp)
+ 624:	7446                	ld	s0,112(sp)
+ 626:	74a6                	ld	s1,104(sp)
+ 628:	7906                	ld	s2,96(sp)
+ 62a:	69e6                	ld	s3,88(sp)
+ 62c:	6a46                	ld	s4,80(sp)
+ 62e:	6aa6                	ld	s5,72(sp)
+ 630:	6b06                	ld	s6,64(sp)
+ 632:	7be2                	ld	s7,56(sp)
+ 634:	7c42                	ld	s8,48(sp)
+ 636:	7ca2                	ld	s9,40(sp)
+ 638:	7d02                	ld	s10,32(sp)
+ 63a:	6de2                	ld	s11,24(sp)
+ 63c:	6109                	addi	sp,sp,128
+ 63e:	8082                	ret
 
-0000000000000630 <fprintf>:
+0000000000000640 <fprintf>:
 
 void
 fprintf(int fd, const char *fmt, ...)
 {
- 630:	715d                	addi	sp,sp,-80
- 632:	ec06                	sd	ra,24(sp)
- 634:	e822                	sd	s0,16(sp)
- 636:	1000                	addi	s0,sp,32
- 638:	e010                	sd	a2,0(s0)
- 63a:	e414                	sd	a3,8(s0)
- 63c:	e818                	sd	a4,16(s0)
- 63e:	ec1c                	sd	a5,24(s0)
- 640:	03043023          	sd	a6,32(s0)
- 644:	03143423          	sd	a7,40(s0)
+ 640:	715d                	addi	sp,sp,-80
+ 642:	ec06                	sd	ra,24(sp)
+ 644:	e822                	sd	s0,16(sp)
+ 646:	1000                	addi	s0,sp,32
+ 648:	e010                	sd	a2,0(s0)
+ 64a:	e414                	sd	a3,8(s0)
+ 64c:	e818                	sd	a4,16(s0)
+ 64e:	ec1c                	sd	a5,24(s0)
+ 650:	03043023          	sd	a6,32(s0)
+ 654:	03143423          	sd	a7,40(s0)
   va_list ap;
 
   va_start(ap, fmt);
- 648:	fe843423          	sd	s0,-24(s0)
+ 658:	fe843423          	sd	s0,-24(s0)
   vprintf(fd, fmt, ap);
- 64c:	8622                	mv	a2,s0
- 64e:	00000097          	auipc	ra,0x0
- 652:	e04080e7          	jalr	-508(ra) # 452 <vprintf>
+ 65c:	8622                	mv	a2,s0
+ 65e:	00000097          	auipc	ra,0x0
+ 662:	e04080e7          	jalr	-508(ra) # 462 <vprintf>
 }
- 656:	60e2                	ld	ra,24(sp)
- 658:	6442                	ld	s0,16(sp)
- 65a:	6161                	addi	sp,sp,80
- 65c:	8082                	ret
+ 666:	60e2                	ld	ra,24(sp)
+ 668:	6442                	ld	s0,16(sp)
+ 66a:	6161                	addi	sp,sp,80
+ 66c:	8082                	ret
 
-000000000000065e <printf>:
+000000000000066e <printf>:
 
 void
 printf(const char *fmt, ...)
 {
- 65e:	711d                	addi	sp,sp,-96
- 660:	ec06                	sd	ra,24(sp)
- 662:	e822                	sd	s0,16(sp)
- 664:	1000                	addi	s0,sp,32
- 666:	e40c                	sd	a1,8(s0)
- 668:	e810                	sd	a2,16(s0)
- 66a:	ec14                	sd	a3,24(s0)
- 66c:	f018                	sd	a4,32(s0)
- 66e:	f41c                	sd	a5,40(s0)
- 670:	03043823          	sd	a6,48(s0)
- 674:	03143c23          	sd	a7,56(s0)
+ 66e:	711d                	addi	sp,sp,-96
+ 670:	ec06                	sd	ra,24(sp)
+ 672:	e822                	sd	s0,16(sp)
+ 674:	1000                	addi	s0,sp,32
+ 676:	e40c                	sd	a1,8(s0)
+ 678:	e810                	sd	a2,16(s0)
+ 67a:	ec14                	sd	a3,24(s0)
+ 67c:	f018                	sd	a4,32(s0)
+ 67e:	f41c                	sd	a5,40(s0)
+ 680:	03043823          	sd	a6,48(s0)
+ 684:	03143c23          	sd	a7,56(s0)
   va_list ap;
 
   va_start(ap, fmt);
- 678:	00840613          	addi	a2,s0,8
- 67c:	fec43423          	sd	a2,-24(s0)
+ 688:	00840613          	addi	a2,s0,8
+ 68c:	fec43423          	sd	a2,-24(s0)
   vprintf(1, fmt, ap);
- 680:	85aa                	mv	a1,a0
- 682:	4505                	li	a0,1
- 684:	00000097          	auipc	ra,0x0
- 688:	dce080e7          	jalr	-562(ra) # 452 <vprintf>
+ 690:	85aa                	mv	a1,a0
+ 692:	4505                	li	a0,1
+ 694:	00000097          	auipc	ra,0x0
+ 698:	dce080e7          	jalr	-562(ra) # 462 <vprintf>
 }
- 68c:	60e2                	ld	ra,24(sp)
- 68e:	6442                	ld	s0,16(sp)
- 690:	6125                	addi	sp,sp,96
- 692:	8082                	ret
+ 69c:	60e2                	ld	ra,24(sp)
+ 69e:	6442                	ld	s0,16(sp)
+ 6a0:	6125                	addi	sp,sp,96
+ 6a2:	8082                	ret
 
-0000000000000694 <free>:
+00000000000006a4 <free>:
 static Header base;
 static Header *freep;
 
 void
 free(void *ap)
 {
- 694:	1141                	addi	sp,sp,-16
- 696:	e422                	sd	s0,8(sp)
- 698:	0800                	addi	s0,sp,16
+ 6a4:	1141                	addi	sp,sp,-16
+ 6a6:	e422                	sd	s0,8(sp)
+ 6a8:	0800                	addi	s0,sp,16
   Header *bp, *p;
 
   bp = (Header*)ap - 1;
- 69a:	ff050693          	addi	a3,a0,-16
+ 6aa:	ff050693          	addi	a3,a0,-16
   for(p = freep; !(bp > p && bp < p->s.ptr); p = p->s.ptr)
- 69e:	00000797          	auipc	a5,0x0
- 6a2:	2127b783          	ld	a5,530(a5) # 8b0 <freep>
- 6a6:	a02d                	j	6d0 <free+0x3c>
+ 6ae:	00000797          	auipc	a5,0x0
+ 6b2:	2127b783          	ld	a5,530(a5) # 8c0 <freep>
+ 6b6:	a02d                	j	6e0 <free+0x3c>
     if(p >= p->s.ptr && (bp > p || bp < p->s.ptr))
       break;
   if(bp + bp->s.size == p->s.ptr){
     bp->s.size += p->s.ptr->s.size;
- 6a8:	4618                	lw	a4,8(a2)
- 6aa:	9f2d                	addw	a4,a4,a1
- 6ac:	fee52c23          	sw	a4,-8(a0)
+ 6b8:	4618                	lw	a4,8(a2)
+ 6ba:	9f2d                	addw	a4,a4,a1
+ 6bc:	fee52c23          	sw	a4,-8(a0)
     bp->s.ptr = p->s.ptr->s.ptr;
- 6b0:	6398                	ld	a4,0(a5)
- 6b2:	6310                	ld	a2,0(a4)
- 6b4:	a83d                	j	6f2 <free+0x5e>
+ 6c0:	6398                	ld	a4,0(a5)
+ 6c2:	6310                	ld	a2,0(a4)
+ 6c4:	a83d                	j	702 <free+0x5e>
   } else
     bp->s.ptr = p->s.ptr;
   if(p + p->s.size == bp){
     p->s.size += bp->s.size;
- 6b6:	ff852703          	lw	a4,-8(a0)
- 6ba:	9f31                	addw	a4,a4,a2
- 6bc:	c798                	sw	a4,8(a5)
+ 6c6:	ff852703          	lw	a4,-8(a0)
+ 6ca:	9f31                	addw	a4,a4,a2
+ 6cc:	c798                	sw	a4,8(a5)
     p->s.ptr = bp->s.ptr;
- 6be:	ff053683          	ld	a3,-16(a0)
- 6c2:	a091                	j	706 <free+0x72>
+ 6ce:	ff053683          	ld	a3,-16(a0)
+ 6d2:	a091                	j	716 <free+0x72>
     if(p >= p->s.ptr && (bp > p || bp < p->s.ptr))
- 6c4:	6398                	ld	a4,0(a5)
- 6c6:	00e7e463          	bltu	a5,a4,6ce <free+0x3a>
- 6ca:	00e6ea63          	bltu	a3,a4,6de <free+0x4a>
+ 6d4:	6398                	ld	a4,0(a5)
+ 6d6:	00e7e463          	bltu	a5,a4,6de <free+0x3a>
+ 6da:	00e6ea63          	bltu	a3,a4,6ee <free+0x4a>
 {
- 6ce:	87ba                	mv	a5,a4
+ 6de:	87ba                	mv	a5,a4
   for(p = freep; !(bp > p && bp < p->s.ptr); p = p->s.ptr)
- 6d0:	fed7fae3          	bgeu	a5,a3,6c4 <free+0x30>
- 6d4:	6398                	ld	a4,0(a5)
- 6d6:	00e6e463          	bltu	a3,a4,6de <free+0x4a>
+ 6e0:	fed7fae3          	bgeu	a5,a3,6d4 <free+0x30>
+ 6e4:	6398                	ld	a4,0(a5)
+ 6e6:	00e6e463          	bltu	a3,a4,6ee <free+0x4a>
     if(p >= p->s.ptr && (bp > p || bp < p->s.ptr))
- 6da:	fee7eae3          	bltu	a5,a4,6ce <free+0x3a>
+ 6ea:	fee7eae3          	bltu	a5,a4,6de <free+0x3a>
   if(bp + bp->s.size == p->s.ptr){
- 6de:	ff852583          	lw	a1,-8(a0)
- 6e2:	6390                	ld	a2,0(a5)
- 6e4:	02059813          	slli	a6,a1,0x20
- 6e8:	01c85713          	srli	a4,a6,0x1c
- 6ec:	9736                	add	a4,a4,a3
- 6ee:	fae60de3          	beq	a2,a4,6a8 <free+0x14>
+ 6ee:	ff852583          	lw	a1,-8(a0)
+ 6f2:	6390                	ld	a2,0(a5)
+ 6f4:	02059813          	slli	a6,a1,0x20
+ 6f8:	01c85713          	srli	a4,a6,0x1c
+ 6fc:	9736                	add	a4,a4,a3
+ 6fe:	fae60de3          	beq	a2,a4,6b8 <free+0x14>
     bp->s.ptr = p->s.ptr->s.ptr;
- 6f2:	fec53823          	sd	a2,-16(a0)
+ 702:	fec53823          	sd	a2,-16(a0)
   if(p + p->s.size == bp){
- 6f6:	4790                	lw	a2,8(a5)
- 6f8:	02061593          	slli	a1,a2,0x20
- 6fc:	01c5d713          	srli	a4,a1,0x1c
- 700:	973e                	add	a4,a4,a5
- 702:	fae68ae3          	beq	a3,a4,6b6 <free+0x22>
+ 706:	4790                	lw	a2,8(a5)
+ 708:	02061593          	slli	a1,a2,0x20
+ 70c:	01c5d713          	srli	a4,a1,0x1c
+ 710:	973e                	add	a4,a4,a5
+ 712:	fae68ae3          	beq	a3,a4,6c6 <free+0x22>
     p->s.ptr = bp->s.ptr;
- 706:	e394                	sd	a3,0(a5)
+ 716:	e394                	sd	a3,0(a5)
   } else
     p->s.ptr = bp;
   freep = p;
- 708:	00000717          	auipc	a4,0x0
- 70c:	1af73423          	sd	a5,424(a4) # 8b0 <freep>
+ 718:	00000717          	auipc	a4,0x0
+ 71c:	1af73423          	sd	a5,424(a4) # 8c0 <freep>
 }
- 710:	6422                	ld	s0,8(sp)
- 712:	0141                	addi	sp,sp,16
- 714:	8082                	ret
+ 720:	6422                	ld	s0,8(sp)
+ 722:	0141                	addi	sp,sp,16
+ 724:	8082                	ret
 
-0000000000000716 <malloc>:
+0000000000000726 <malloc>:
   return freep;
 }
 
 void*
 malloc(uint nbytes)
 {
- 716:	7139                	addi	sp,sp,-64
- 718:	fc06                	sd	ra,56(sp)
- 71a:	f822                	sd	s0,48(sp)
- 71c:	f426                	sd	s1,40(sp)
- 71e:	f04a                	sd	s2,32(sp)
- 720:	ec4e                	sd	s3,24(sp)
- 722:	e852                	sd	s4,16(sp)
- 724:	e456                	sd	s5,8(sp)
- 726:	e05a                	sd	s6,0(sp)
- 728:	0080                	addi	s0,sp,64
+ 726:	7139                	addi	sp,sp,-64
+ 728:	fc06                	sd	ra,56(sp)
+ 72a:	f822                	sd	s0,48(sp)
+ 72c:	f426                	sd	s1,40(sp)
+ 72e:	f04a                	sd	s2,32(sp)
+ 730:	ec4e                	sd	s3,24(sp)
+ 732:	e852                	sd	s4,16(sp)
+ 734:	e456                	sd	s5,8(sp)
+ 736:	e05a                	sd	s6,0(sp)
+ 738:	0080                	addi	s0,sp,64
   Header *p, *prevp;
   uint nunits;
 
   nunits = (nbytes + sizeof(Header) - 1)/sizeof(Header) + 1;
- 72a:	02051493          	slli	s1,a0,0x20
- 72e:	9081                	srli	s1,s1,0x20
- 730:	04bd                	addi	s1,s1,15
- 732:	8091                	srli	s1,s1,0x4
- 734:	0014899b          	addiw	s3,s1,1
- 738:	0485                	addi	s1,s1,1
+ 73a:	02051493          	slli	s1,a0,0x20
+ 73e:	9081                	srli	s1,s1,0x20
+ 740:	04bd                	addi	s1,s1,15
+ 742:	8091                	srli	s1,s1,0x4
+ 744:	0014899b          	addiw	s3,s1,1
+ 748:	0485                	addi	s1,s1,1
   if((prevp = freep) == 0){
- 73a:	00000517          	auipc	a0,0x0
- 73e:	17653503          	ld	a0,374(a0) # 8b0 <freep>
- 742:	c515                	beqz	a0,76e <malloc+0x58>
+ 74a:	00000517          	auipc	a0,0x0
+ 74e:	17653503          	ld	a0,374(a0) # 8c0 <freep>
+ 752:	c515                	beqz	a0,77e <malloc+0x58>
     base.s.ptr = freep = prevp = &base;
     base.s.size = 0;
   }
   for(p = prevp->s.ptr; ; prevp = p, p = p->s.ptr){
- 744:	611c                	ld	a5,0(a0)
+ 754:	611c                	ld	a5,0(a0)
     if(p->s.size >= nunits){
- 746:	4798                	lw	a4,8(a5)
- 748:	02977f63          	bgeu	a4,s1,786 <malloc+0x70>
- 74c:	8a4e                	mv	s4,s3
- 74e:	0009871b          	sext.w	a4,s3
- 752:	6685                	lui	a3,0x1
- 754:	00d77363          	bgeu	a4,a3,75a <malloc+0x44>
- 758:	6a05                	lui	s4,0x1
- 75a:	000a0b1b          	sext.w	s6,s4
+ 756:	4798                	lw	a4,8(a5)
+ 758:	02977f63          	bgeu	a4,s1,796 <malloc+0x70>
+ 75c:	8a4e                	mv	s4,s3
+ 75e:	0009871b          	sext.w	a4,s3
+ 762:	6685                	lui	a3,0x1
+ 764:	00d77363          	bgeu	a4,a3,76a <malloc+0x44>
+ 768:	6a05                	lui	s4,0x1
+ 76a:	000a0b1b          	sext.w	s6,s4
   p = sbrk(nu * sizeof(Header));
- 75e:	004a1a1b          	slliw	s4,s4,0x4
+ 76e:	004a1a1b          	slliw	s4,s4,0x4
         p->s.size = nunits;
       }
       freep = prevp;
       return (void*)(p + 1);
     }
     if(p == freep)
- 762:	00000917          	auipc	s2,0x0
- 766:	14e90913          	addi	s2,s2,334 # 8b0 <freep>
+ 772:	00000917          	auipc	s2,0x0
+ 776:	14e90913          	addi	s2,s2,334 # 8c0 <freep>
   if(p == (char*)-1)
- 76a:	5afd                	li	s5,-1
- 76c:	a895                	j	7e0 <malloc+0xca>
+ 77a:	5afd                	li	s5,-1
+ 77c:	a895                	j	7f0 <malloc+0xca>
     base.s.ptr = freep = prevp = &base;
- 76e:	00000797          	auipc	a5,0x0
- 772:	14a78793          	addi	a5,a5,330 # 8b8 <base>
- 776:	00000717          	auipc	a4,0x0
- 77a:	12f73d23          	sd	a5,314(a4) # 8b0 <freep>
- 77e:	e39c                	sd	a5,0(a5)
+ 77e:	00000797          	auipc	a5,0x0
+ 782:	14a78793          	addi	a5,a5,330 # 8c8 <base>
+ 786:	00000717          	auipc	a4,0x0
+ 78a:	12f73d23          	sd	a5,314(a4) # 8c0 <freep>
+ 78e:	e39c                	sd	a5,0(a5)
     base.s.size = 0;
- 780:	0007a423          	sw	zero,8(a5)
+ 790:	0007a423          	sw	zero,8(a5)
     if(p->s.size >= nunits){
- 784:	b7e1                	j	74c <malloc+0x36>
+ 794:	b7e1                	j	75c <malloc+0x36>
       if(p->s.size == nunits)
- 786:	02e48c63          	beq	s1,a4,7be <malloc+0xa8>
+ 796:	02e48c63          	beq	s1,a4,7ce <malloc+0xa8>
         p->s.size -= nunits;
- 78a:	4137073b          	subw	a4,a4,s3
- 78e:	c798                	sw	a4,8(a5)
+ 79a:	4137073b          	subw	a4,a4,s3
+ 79e:	c798                	sw	a4,8(a5)
         p += p->s.size;
- 790:	02071693          	slli	a3,a4,0x20
- 794:	01c6d713          	srli	a4,a3,0x1c
- 798:	97ba                	add	a5,a5,a4
+ 7a0:	02071693          	slli	a3,a4,0x20
+ 7a4:	01c6d713          	srli	a4,a3,0x1c
+ 7a8:	97ba                	add	a5,a5,a4
         p->s.size = nunits;
- 79a:	0137a423          	sw	s3,8(a5)
+ 7aa:	0137a423          	sw	s3,8(a5)
       freep = prevp;
- 79e:	00000717          	auipc	a4,0x0
- 7a2:	10a73923          	sd	a0,274(a4) # 8b0 <freep>
+ 7ae:	00000717          	auipc	a4,0x0
+ 7b2:	10a73923          	sd	a0,274(a4) # 8c0 <freep>
       return (void*)(p + 1);
- 7a6:	01078513          	addi	a0,a5,16
+ 7b6:	01078513          	addi	a0,a5,16
       if((p = morecore(nunits)) == 0)
         return 0;
   }
 }
- 7aa:	70e2                	ld	ra,56(sp)
- 7ac:	7442                	ld	s0,48(sp)
- 7ae:	74a2                	ld	s1,40(sp)
- 7b0:	7902                	ld	s2,32(sp)
- 7b2:	69e2                	ld	s3,24(sp)
- 7b4:	6a42                	ld	s4,16(sp)
- 7b6:	6aa2                	ld	s5,8(sp)
- 7b8:	6b02                	ld	s6,0(sp)
- 7ba:	6121                	addi	sp,sp,64
- 7bc:	8082                	ret
+ 7ba:	70e2                	ld	ra,56(sp)
+ 7bc:	7442                	ld	s0,48(sp)
+ 7be:	74a2                	ld	s1,40(sp)
+ 7c0:	7902                	ld	s2,32(sp)
+ 7c2:	69e2                	ld	s3,24(sp)
+ 7c4:	6a42                	ld	s4,16(sp)
+ 7c6:	6aa2                	ld	s5,8(sp)
+ 7c8:	6b02                	ld	s6,0(sp)
+ 7ca:	6121                	addi	sp,sp,64
+ 7cc:	8082                	ret
         prevp->s.ptr = p->s.ptr;
- 7be:	6398                	ld	a4,0(a5)
- 7c0:	e118                	sd	a4,0(a0)
- 7c2:	bff1                	j	79e <malloc+0x88>
+ 7ce:	6398                	ld	a4,0(a5)
+ 7d0:	e118                	sd	a4,0(a0)
+ 7d2:	bff1                	j	7ae <malloc+0x88>
   hp->s.size = nu;
- 7c4:	01652423          	sw	s6,8(a0)
+ 7d4:	01652423          	sw	s6,8(a0)
   free((void*)(hp + 1));
- 7c8:	0541                	addi	a0,a0,16
- 7ca:	00000097          	auipc	ra,0x0
- 7ce:	eca080e7          	jalr	-310(ra) # 694 <free>
+ 7d8:	0541                	addi	a0,a0,16
+ 7da:	00000097          	auipc	ra,0x0
+ 7de:	eca080e7          	jalr	-310(ra) # 6a4 <free>
   return freep;
- 7d2:	00093503          	ld	a0,0(s2)
+ 7e2:	00093503          	ld	a0,0(s2)
       if((p = morecore(nunits)) == 0)
- 7d6:	d971                	beqz	a0,7aa <malloc+0x94>
+ 7e6:	d971                	beqz	a0,7ba <malloc+0x94>
   for(p = prevp->s.ptr; ; prevp = p, p = p->s.ptr){
- 7d8:	611c                	ld	a5,0(a0)
+ 7e8:	611c                	ld	a5,0(a0)
     if(p->s.size >= nunits){
- 7da:	4798                	lw	a4,8(a5)
- 7dc:	fa9775e3          	bgeu	a4,s1,786 <malloc+0x70>
+ 7ea:	4798                	lw	a4,8(a5)
+ 7ec:	fa9775e3          	bgeu	a4,s1,796 <malloc+0x70>
     if(p == freep)
- 7e0:	00093703          	ld	a4,0(s2)
- 7e4:	853e                	mv	a0,a5
- 7e6:	fef719e3          	bne	a4,a5,7d8 <malloc+0xc2>
+ 7f0:	00093703          	ld	a4,0(s2)
+ 7f4:	853e                	mv	a0,a5
+ 7f6:	fef719e3          	bne	a4,a5,7e8 <malloc+0xc2>
   p = sbrk(nu * sizeof(Header));
- 7ea:	8552                	mv	a0,s4
- 7ec:	00000097          	auipc	ra,0x0
- 7f0:	b80080e7          	jalr	-1152(ra) # 36c <sbrk>
+ 7fa:	8552                	mv	a0,s4
+ 7fc:	00000097          	auipc	ra,0x0
+ 800:	b70080e7          	jalr	-1168(ra) # 36c <sbrk>
   if(p == (char*)-1)
- 7f4:	fd5518e3          	bne	a0,s5,7c4 <malloc+0xae>
+ 804:	fd5518e3          	bne	a0,s5,7d4 <malloc+0xae>
         return 0;
- 7f8:	4501                	li	a0,0
- 7fa:	bf45                	j	7aa <malloc+0x94>
+ 808:	4501                	li	a0,0
+ 80a:	bf45                	j	7ba <malloc+0x94>
Binary files ./user/mkdir.o and ../xv6-labs-2021/user/mkdir.o differ
diff -urN ./user/mkdir.sym ../xv6-labs-2021/user/mkdir.sym
--- ./user/mkdir.sym	2021-12-05 17:54:42.000000000 +0800
+++ ../xv6-labs-2021/user/mkdir.sym	2021-11-26 14:46:16.000000000 +0800
@@ -1,7 +1,7 @@
 0000000000000000 .text
-0000000000000800 .rodata
-00000000000008b0 .sbss
-00000000000008b8 .bss
+0000000000000810 .rodata
+00000000000008c0 .sbss
+00000000000008c8 .bss
 0000000000000000 .comment
 0000000000000000 .riscv.attributes
 0000000000000000 .debug_aranges
@@ -16,29 +16,31 @@
 0000000000000000 mkdir.c
 0000000000000000 ulib.c
 0000000000000000 printf.c
-0000000000000384 putc
-00000000000003a6 printint
-0000000000000898 digits
+0000000000000394 putc
+00000000000003b6 printint
+00000000000008a8 digits
 0000000000000000 umalloc.c
-00000000000008b0 freep
-00000000000008b8 base
+00000000000008c0 freep
+00000000000008c8 base
 0000000000000078 strcpy
-000000000000065e printf
-00000000000010a9 __global_pointer$
+000000000000066e printf
+00000000000010b9 __global_pointer$
 0000000000000232 memmove
 000000000000032c mknod
+0000000000000384 trace
 0000000000000130 gets
-00000000000008a9 __SDATA_BEGIN__
+00000000000008b9 __SDATA_BEGIN__
 0000000000000364 getpid
 00000000000002c4 memcpy
-0000000000000716 malloc
+0000000000000726 malloc
 0000000000000374 sleep
+000000000000038c sysinfo
 00000000000002f4 pipe
 0000000000000304 write
 000000000000033c fstat
-0000000000000630 fprintf
+0000000000000640 fprintf
 0000000000000314 kill
-0000000000000452 vprintf
+0000000000000462 vprintf
 0000000000000354 chdir
 000000000000031c exec
 00000000000002ec wait
@@ -46,18 +48,18 @@
 0000000000000334 unlink
 000000000000028a memcmp
 00000000000002dc fork
-00000000000008c8 __BSS_END__
+00000000000008d8 __BSS_END__
 000000000000036c sbrk
 000000000000037c uptime
-00000000000008a9 __bss_start
+00000000000008b9 __bss_start
 00000000000000ea memset
 0000000000000000 main
 0000000000000094 strcmp
 000000000000035c dup
-00000000000008a9 __DATA_BEGIN__
+00000000000008b9 __DATA_BEGIN__
 00000000000001a4 stat
-00000000000008a9 _edata
-00000000000008c8 _end
+00000000000008b9 _edata
+00000000000008d8 _end
 0000000000000344 link
 00000000000002e4 exit
 00000000000001ea atoi
@@ -66,4 +68,4 @@
 000000000000010c strchr
 000000000000034c mkdir
 000000000000030c close
-0000000000000694 free
+00000000000006a4 free
diff -urN ./user/pingpong.c ../xv6-labs-2021/user/pingpong.c
--- ./user/pingpong.c	1970-01-01 08:00:00.000000000 +0800
+++ ../xv6-labs-2021/user/pingpong.c	2021-12-05 17:40:55.000000000 +0800
@@ -0,0 +1,24 @@
+#include "kernel/types.h"
+#include "kernel/stat.h"
+#include "user/user.h"
+
+int main(int argc, char* argv[]) {
+    int fd[2];
+    char buf[64];
+    pipe(fd);
+    int pid = fork();
+    if (pid == 0) {
+        read(fd[0], buf, sizeof(buf));
+        fprintf(1, "%d: received ping\n", getpid());
+        write(fd[1], "h", 1);
+        exit(0);
+    } else {
+        int status;
+        write(fd[1], "h", 1);
+        read(fd[0], buf, sizeof(buf));
+        fprintf(1, "%d: received pong\n", getpid());
+        wait(&status);
+    }
+    exit(0);
+    return 0;
+}
diff -urN ./user/primes.c ../xv6-labs-2021/user/primes.c
--- ./user/primes.c	1970-01-01 08:00:00.000000000 +0800
+++ ../xv6-labs-2021/user/primes.c	2021-12-05 17:40:55.000000000 +0800
@@ -0,0 +1,57 @@
+#include "kernel/types.h"
+#include "kernel/stat.h"
+#include "user/user.h"
+
+int main(int argc, char* argv[]) {
+    int i = 2;
+    int fd[2];
+    int buffer[36];
+    int buffer_index = 0;
+    int status;
+    pipe(fd);
+    int pid = fork();
+    if (pid == 0) {
+start:
+        int val;
+        int first = 0;
+        buffer_index = 0;
+        close(fd[1]);
+        while(read(fd[0], &val, sizeof(val)) != 0) {
+           if ((val % i) != 0 || val == i) {
+               if (first == 0) {
+                   printf("prime %d\n", val);
+                   first = 1;
+               } else {
+                   buffer[buffer_index++] = val;
+               }
+           }
+        }
+        i++;
+        if (buffer_index == 0) exit(0);
+        close(fd[0]);
+        pipe(fd);
+        int newpid = fork();
+        if (newpid == 0) {
+            goto start;
+        } else {
+            close(fd[0]);
+            write(fd[1], buffer, buffer_index * sizeof(int));
+            write(fd[1], 0, 0);
+        }
+        close(fd[1]);
+        wait(&status);
+        exit(0);
+    } else {
+        close(fd[0]);
+        i = 2;
+        while (i <= 35) {
+            write(fd[1], &i, sizeof(i));
+            i++;
+        }
+        write(fd[1], 0, 0);
+        close(fd[1]);
+        wait(&status);
+    }
+    exit(0);
+    return 0;
+}
Binary files ./user/printf.o and ../xv6-labs-2021/user/printf.o differ
diff -urN ./user/rm.asm ../xv6-labs-2021/user/rm.asm
--- ./user/rm.asm	2021-12-05 17:54:42.000000000 +0800
+++ ../xv6-labs-2021/user/rm.asm	2021-11-26 14:46:16.000000000 +0800
@@ -45,10 +45,10 @@
   3c:	a80d                	j	6e <main+0x6e>
     fprintf(2, "Usage: rm files...\n");
   3e:	00000597          	auipc	a1,0x0
-  42:	7c258593          	addi	a1,a1,1986 # 800 <malloc+0xea>
+  42:	7d258593          	addi	a1,a1,2002 # 810 <malloc+0xea>
   46:	4509                	li	a0,2
   48:	00000097          	auipc	ra,0x0
-  4c:	5e8080e7          	jalr	1512(ra) # 630 <fprintf>
+  4c:	5f8080e7          	jalr	1528(ra) # 640 <fprintf>
     exit(1);
   50:	4505                	li	a0,1
   52:	00000097          	auipc	ra,0x0
@@ -56,10 +56,10 @@
       fprintf(2, "rm: %s failed to delete\n", argv[i]);
   5a:	6090                	ld	a2,0(s1)
   5c:	00000597          	auipc	a1,0x0
-  60:	7bc58593          	addi	a1,a1,1980 # 818 <malloc+0x102>
+  60:	7cc58593          	addi	a1,a1,1996 # 828 <malloc+0x102>
   64:	4509                	li	a0,2
   66:	00000097          	auipc	ra,0x0
-  6a:	5ca080e7          	jalr	1482(ra) # 630 <fprintf>
+  6a:	5da080e7          	jalr	1498(ra) # 640 <fprintf>
       break;
     }
   }
@@ -700,632 +700,652 @@
  ret
  382:	8082                	ret
 
-0000000000000384 <putc>:
+0000000000000384 <trace>:
+.global trace
+trace:
+ li a7, SYS_trace
+ 384:	48d9                	li	a7,22
+ ecall
+ 386:	00000073          	ecall
+ ret
+ 38a:	8082                	ret
+
+000000000000038c <sysinfo>:
+.global sysinfo
+sysinfo:
+ li a7, SYS_sysinfo
+ 38c:	48dd                	li	a7,23
+ ecall
+ 38e:	00000073          	ecall
+ ret
+ 392:	8082                	ret
+
+0000000000000394 <putc>:
 
 static char digits[] = "0123456789ABCDEF";
 
 static void
 putc(int fd, char c)
 {
- 384:	1101                	addi	sp,sp,-32
- 386:	ec06                	sd	ra,24(sp)
- 388:	e822                	sd	s0,16(sp)
- 38a:	1000                	addi	s0,sp,32
- 38c:	feb407a3          	sb	a1,-17(s0)
+ 394:	1101                	addi	sp,sp,-32
+ 396:	ec06                	sd	ra,24(sp)
+ 398:	e822                	sd	s0,16(sp)
+ 39a:	1000                	addi	s0,sp,32
+ 39c:	feb407a3          	sb	a1,-17(s0)
   write(fd, &c, 1);
- 390:	4605                	li	a2,1
- 392:	fef40593          	addi	a1,s0,-17
- 396:	00000097          	auipc	ra,0x0
- 39a:	f6e080e7          	jalr	-146(ra) # 304 <write>
+ 3a0:	4605                	li	a2,1
+ 3a2:	fef40593          	addi	a1,s0,-17
+ 3a6:	00000097          	auipc	ra,0x0
+ 3aa:	f5e080e7          	jalr	-162(ra) # 304 <write>
 }
- 39e:	60e2                	ld	ra,24(sp)
- 3a0:	6442                	ld	s0,16(sp)
- 3a2:	6105                	addi	sp,sp,32
- 3a4:	8082                	ret
+ 3ae:	60e2                	ld	ra,24(sp)
+ 3b0:	6442                	ld	s0,16(sp)
+ 3b2:	6105                	addi	sp,sp,32
+ 3b4:	8082                	ret
 
-00000000000003a6 <printint>:
+00000000000003b6 <printint>:
 
 static void
 printint(int fd, int xx, int base, int sgn)
 {
- 3a6:	7139                	addi	sp,sp,-64
- 3a8:	fc06                	sd	ra,56(sp)
- 3aa:	f822                	sd	s0,48(sp)
- 3ac:	f426                	sd	s1,40(sp)
- 3ae:	f04a                	sd	s2,32(sp)
- 3b0:	ec4e                	sd	s3,24(sp)
- 3b2:	0080                	addi	s0,sp,64
- 3b4:	84aa                	mv	s1,a0
+ 3b6:	7139                	addi	sp,sp,-64
+ 3b8:	fc06                	sd	ra,56(sp)
+ 3ba:	f822                	sd	s0,48(sp)
+ 3bc:	f426                	sd	s1,40(sp)
+ 3be:	f04a                	sd	s2,32(sp)
+ 3c0:	ec4e                	sd	s3,24(sp)
+ 3c2:	0080                	addi	s0,sp,64
+ 3c4:	84aa                	mv	s1,a0
   char buf[16];
   int i, neg;
   uint x;
 
   neg = 0;
   if(sgn && xx < 0){
- 3b6:	c299                	beqz	a3,3bc <printint+0x16>
- 3b8:	0805c963          	bltz	a1,44a <printint+0xa4>
+ 3c6:	c299                	beqz	a3,3cc <printint+0x16>
+ 3c8:	0805c963          	bltz	a1,45a <printint+0xa4>
     neg = 1;
     x = -xx;
   } else {
     x = xx;
- 3bc:	2581                	sext.w	a1,a1
+ 3cc:	2581                	sext.w	a1,a1
   neg = 0;
- 3be:	4881                	li	a7,0
- 3c0:	fc040693          	addi	a3,s0,-64
+ 3ce:	4881                	li	a7,0
+ 3d0:	fc040693          	addi	a3,s0,-64
   }
 
   i = 0;
- 3c4:	4701                	li	a4,0
+ 3d4:	4701                	li	a4,0
   do{
     buf[i++] = digits[x % base];
- 3c6:	2601                	sext.w	a2,a2
- 3c8:	00000517          	auipc	a0,0x0
- 3cc:	4d050513          	addi	a0,a0,1232 # 898 <digits>
- 3d0:	883a                	mv	a6,a4
- 3d2:	2705                	addiw	a4,a4,1
- 3d4:	02c5f7bb          	remuw	a5,a1,a2
- 3d8:	1782                	slli	a5,a5,0x20
- 3da:	9381                	srli	a5,a5,0x20
- 3dc:	97aa                	add	a5,a5,a0
- 3de:	0007c783          	lbu	a5,0(a5)
- 3e2:	00f68023          	sb	a5,0(a3)
+ 3d6:	2601                	sext.w	a2,a2
+ 3d8:	00000517          	auipc	a0,0x0
+ 3dc:	4d050513          	addi	a0,a0,1232 # 8a8 <digits>
+ 3e0:	883a                	mv	a6,a4
+ 3e2:	2705                	addiw	a4,a4,1
+ 3e4:	02c5f7bb          	remuw	a5,a1,a2
+ 3e8:	1782                	slli	a5,a5,0x20
+ 3ea:	9381                	srli	a5,a5,0x20
+ 3ec:	97aa                	add	a5,a5,a0
+ 3ee:	0007c783          	lbu	a5,0(a5)
+ 3f2:	00f68023          	sb	a5,0(a3)
   }while((x /= base) != 0);
- 3e6:	0005879b          	sext.w	a5,a1
- 3ea:	02c5d5bb          	divuw	a1,a1,a2
- 3ee:	0685                	addi	a3,a3,1
- 3f0:	fec7f0e3          	bgeu	a5,a2,3d0 <printint+0x2a>
+ 3f6:	0005879b          	sext.w	a5,a1
+ 3fa:	02c5d5bb          	divuw	a1,a1,a2
+ 3fe:	0685                	addi	a3,a3,1
+ 400:	fec7f0e3          	bgeu	a5,a2,3e0 <printint+0x2a>
   if(neg)
- 3f4:	00088c63          	beqz	a7,40c <printint+0x66>
+ 404:	00088c63          	beqz	a7,41c <printint+0x66>
     buf[i++] = '-';
- 3f8:	fd070793          	addi	a5,a4,-48
- 3fc:	00878733          	add	a4,a5,s0
- 400:	02d00793          	li	a5,45
- 404:	fef70823          	sb	a5,-16(a4)
- 408:	0028071b          	addiw	a4,a6,2
+ 408:	fd070793          	addi	a5,a4,-48
+ 40c:	00878733          	add	a4,a5,s0
+ 410:	02d00793          	li	a5,45
+ 414:	fef70823          	sb	a5,-16(a4)
+ 418:	0028071b          	addiw	a4,a6,2
 
   while(--i >= 0)
- 40c:	02e05863          	blez	a4,43c <printint+0x96>
- 410:	fc040793          	addi	a5,s0,-64
- 414:	00e78933          	add	s2,a5,a4
- 418:	fff78993          	addi	s3,a5,-1
- 41c:	99ba                	add	s3,s3,a4
- 41e:	377d                	addiw	a4,a4,-1
- 420:	1702                	slli	a4,a4,0x20
- 422:	9301                	srli	a4,a4,0x20
- 424:	40e989b3          	sub	s3,s3,a4
+ 41c:	02e05863          	blez	a4,44c <printint+0x96>
+ 420:	fc040793          	addi	a5,s0,-64
+ 424:	00e78933          	add	s2,a5,a4
+ 428:	fff78993          	addi	s3,a5,-1
+ 42c:	99ba                	add	s3,s3,a4
+ 42e:	377d                	addiw	a4,a4,-1
+ 430:	1702                	slli	a4,a4,0x20
+ 432:	9301                	srli	a4,a4,0x20
+ 434:	40e989b3          	sub	s3,s3,a4
     putc(fd, buf[i]);
- 428:	fff94583          	lbu	a1,-1(s2)
- 42c:	8526                	mv	a0,s1
- 42e:	00000097          	auipc	ra,0x0
- 432:	f56080e7          	jalr	-170(ra) # 384 <putc>
+ 438:	fff94583          	lbu	a1,-1(s2)
+ 43c:	8526                	mv	a0,s1
+ 43e:	00000097          	auipc	ra,0x0
+ 442:	f56080e7          	jalr	-170(ra) # 394 <putc>
   while(--i >= 0)
- 436:	197d                	addi	s2,s2,-1
- 438:	ff3918e3          	bne	s2,s3,428 <printint+0x82>
+ 446:	197d                	addi	s2,s2,-1
+ 448:	ff3918e3          	bne	s2,s3,438 <printint+0x82>
 }
- 43c:	70e2                	ld	ra,56(sp)
- 43e:	7442                	ld	s0,48(sp)
- 440:	74a2                	ld	s1,40(sp)
- 442:	7902                	ld	s2,32(sp)
- 444:	69e2                	ld	s3,24(sp)
- 446:	6121                	addi	sp,sp,64
- 448:	8082                	ret
+ 44c:	70e2                	ld	ra,56(sp)
+ 44e:	7442                	ld	s0,48(sp)
+ 450:	74a2                	ld	s1,40(sp)
+ 452:	7902                	ld	s2,32(sp)
+ 454:	69e2                	ld	s3,24(sp)
+ 456:	6121                	addi	sp,sp,64
+ 458:	8082                	ret
     x = -xx;
- 44a:	40b005bb          	negw	a1,a1
+ 45a:	40b005bb          	negw	a1,a1
     neg = 1;
- 44e:	4885                	li	a7,1
+ 45e:	4885                	li	a7,1
     x = -xx;
- 450:	bf85                	j	3c0 <printint+0x1a>
+ 460:	bf85                	j	3d0 <printint+0x1a>
 
-0000000000000452 <vprintf>:
+0000000000000462 <vprintf>:
 }
 
 // Print to the given fd. Only understands %d, %x, %p, %s.
 void
 vprintf(int fd, const char *fmt, va_list ap)
 {
- 452:	7119                	addi	sp,sp,-128
- 454:	fc86                	sd	ra,120(sp)
- 456:	f8a2                	sd	s0,112(sp)
- 458:	f4a6                	sd	s1,104(sp)
- 45a:	f0ca                	sd	s2,96(sp)
- 45c:	ecce                	sd	s3,88(sp)
- 45e:	e8d2                	sd	s4,80(sp)
- 460:	e4d6                	sd	s5,72(sp)
- 462:	e0da                	sd	s6,64(sp)
- 464:	fc5e                	sd	s7,56(sp)
- 466:	f862                	sd	s8,48(sp)
- 468:	f466                	sd	s9,40(sp)
- 46a:	f06a                	sd	s10,32(sp)
- 46c:	ec6e                	sd	s11,24(sp)
- 46e:	0100                	addi	s0,sp,128
+ 462:	7119                	addi	sp,sp,-128
+ 464:	fc86                	sd	ra,120(sp)
+ 466:	f8a2                	sd	s0,112(sp)
+ 468:	f4a6                	sd	s1,104(sp)
+ 46a:	f0ca                	sd	s2,96(sp)
+ 46c:	ecce                	sd	s3,88(sp)
+ 46e:	e8d2                	sd	s4,80(sp)
+ 470:	e4d6                	sd	s5,72(sp)
+ 472:	e0da                	sd	s6,64(sp)
+ 474:	fc5e                	sd	s7,56(sp)
+ 476:	f862                	sd	s8,48(sp)
+ 478:	f466                	sd	s9,40(sp)
+ 47a:	f06a                	sd	s10,32(sp)
+ 47c:	ec6e                	sd	s11,24(sp)
+ 47e:	0100                	addi	s0,sp,128
   char *s;
   int c, i, state;
 
   state = 0;
   for(i = 0; fmt[i]; i++){
- 470:	0005c903          	lbu	s2,0(a1)
- 474:	18090f63          	beqz	s2,612 <vprintf+0x1c0>
- 478:	8aaa                	mv	s5,a0
- 47a:	8b32                	mv	s6,a2
- 47c:	00158493          	addi	s1,a1,1
+ 480:	0005c903          	lbu	s2,0(a1)
+ 484:	18090f63          	beqz	s2,622 <vprintf+0x1c0>
+ 488:	8aaa                	mv	s5,a0
+ 48a:	8b32                	mv	s6,a2
+ 48c:	00158493          	addi	s1,a1,1
   state = 0;
- 480:	4981                	li	s3,0
+ 490:	4981                	li	s3,0
       if(c == '%'){
         state = '%';
       } else {
         putc(fd, c);
       }
     } else if(state == '%'){
- 482:	02500a13          	li	s4,37
- 486:	4c55                	li	s8,21
- 488:	00000c97          	auipc	s9,0x0
- 48c:	3b8c8c93          	addi	s9,s9,952 # 840 <malloc+0x12a>
+ 492:	02500a13          	li	s4,37
+ 496:	4c55                	li	s8,21
+ 498:	00000c97          	auipc	s9,0x0
+ 49c:	3b8c8c93          	addi	s9,s9,952 # 850 <malloc+0x12a>
         printptr(fd, va_arg(ap, uint64));
       } else if(c == 's'){
         s = va_arg(ap, char*);
         if(s == 0)
           s = "(null)";
         while(*s != 0){
- 490:	02800d93          	li	s11,40
+ 4a0:	02800d93          	li	s11,40
   putc(fd, 'x');
- 494:	4d41                	li	s10,16
+ 4a4:	4d41                	li	s10,16
     putc(fd, digits[x >> (sizeof(uint64) * 8 - 4)]);
- 496:	00000b97          	auipc	s7,0x0
- 49a:	402b8b93          	addi	s7,s7,1026 # 898 <digits>
- 49e:	a839                	j	4bc <vprintf+0x6a>
+ 4a6:	00000b97          	auipc	s7,0x0
+ 4aa:	402b8b93          	addi	s7,s7,1026 # 8a8 <digits>
+ 4ae:	a839                	j	4cc <vprintf+0x6a>
         putc(fd, c);
- 4a0:	85ca                	mv	a1,s2
- 4a2:	8556                	mv	a0,s5
- 4a4:	00000097          	auipc	ra,0x0
- 4a8:	ee0080e7          	jalr	-288(ra) # 384 <putc>
- 4ac:	a019                	j	4b2 <vprintf+0x60>
+ 4b0:	85ca                	mv	a1,s2
+ 4b2:	8556                	mv	a0,s5
+ 4b4:	00000097          	auipc	ra,0x0
+ 4b8:	ee0080e7          	jalr	-288(ra) # 394 <putc>
+ 4bc:	a019                	j	4c2 <vprintf+0x60>
     } else if(state == '%'){
- 4ae:	01498d63          	beq	s3,s4,4c8 <vprintf+0x76>
+ 4be:	01498d63          	beq	s3,s4,4d8 <vprintf+0x76>
   for(i = 0; fmt[i]; i++){
- 4b2:	0485                	addi	s1,s1,1
- 4b4:	fff4c903          	lbu	s2,-1(s1)
- 4b8:	14090d63          	beqz	s2,612 <vprintf+0x1c0>
+ 4c2:	0485                	addi	s1,s1,1
+ 4c4:	fff4c903          	lbu	s2,-1(s1)
+ 4c8:	14090d63          	beqz	s2,622 <vprintf+0x1c0>
     if(state == 0){
- 4bc:	fe0999e3          	bnez	s3,4ae <vprintf+0x5c>
+ 4cc:	fe0999e3          	bnez	s3,4be <vprintf+0x5c>
       if(c == '%'){
- 4c0:	ff4910e3          	bne	s2,s4,4a0 <vprintf+0x4e>
+ 4d0:	ff4910e3          	bne	s2,s4,4b0 <vprintf+0x4e>
         state = '%';
- 4c4:	89d2                	mv	s3,s4
- 4c6:	b7f5                	j	4b2 <vprintf+0x60>
+ 4d4:	89d2                	mv	s3,s4
+ 4d6:	b7f5                	j	4c2 <vprintf+0x60>
       if(c == 'd'){
- 4c8:	11490c63          	beq	s2,s4,5e0 <vprintf+0x18e>
- 4cc:	f9d9079b          	addiw	a5,s2,-99
- 4d0:	0ff7f793          	zext.b	a5,a5
- 4d4:	10fc6e63          	bltu	s8,a5,5f0 <vprintf+0x19e>
- 4d8:	f9d9079b          	addiw	a5,s2,-99
- 4dc:	0ff7f713          	zext.b	a4,a5
- 4e0:	10ec6863          	bltu	s8,a4,5f0 <vprintf+0x19e>
- 4e4:	00271793          	slli	a5,a4,0x2
- 4e8:	97e6                	add	a5,a5,s9
- 4ea:	439c                	lw	a5,0(a5)
- 4ec:	97e6                	add	a5,a5,s9
- 4ee:	8782                	jr	a5
+ 4d8:	11490c63          	beq	s2,s4,5f0 <vprintf+0x18e>
+ 4dc:	f9d9079b          	addiw	a5,s2,-99
+ 4e0:	0ff7f793          	zext.b	a5,a5
+ 4e4:	10fc6e63          	bltu	s8,a5,600 <vprintf+0x19e>
+ 4e8:	f9d9079b          	addiw	a5,s2,-99
+ 4ec:	0ff7f713          	zext.b	a4,a5
+ 4f0:	10ec6863          	bltu	s8,a4,600 <vprintf+0x19e>
+ 4f4:	00271793          	slli	a5,a4,0x2
+ 4f8:	97e6                	add	a5,a5,s9
+ 4fa:	439c                	lw	a5,0(a5)
+ 4fc:	97e6                	add	a5,a5,s9
+ 4fe:	8782                	jr	a5
         printint(fd, va_arg(ap, int), 10, 1);
- 4f0:	008b0913          	addi	s2,s6,8
- 4f4:	4685                	li	a3,1
- 4f6:	4629                	li	a2,10
- 4f8:	000b2583          	lw	a1,0(s6)
- 4fc:	8556                	mv	a0,s5
- 4fe:	00000097          	auipc	ra,0x0
- 502:	ea8080e7          	jalr	-344(ra) # 3a6 <printint>
- 506:	8b4a                	mv	s6,s2
+ 500:	008b0913          	addi	s2,s6,8
+ 504:	4685                	li	a3,1
+ 506:	4629                	li	a2,10
+ 508:	000b2583          	lw	a1,0(s6)
+ 50c:	8556                	mv	a0,s5
+ 50e:	00000097          	auipc	ra,0x0
+ 512:	ea8080e7          	jalr	-344(ra) # 3b6 <printint>
+ 516:	8b4a                	mv	s6,s2
       } else {
         // Unknown % sequence.  Print it to draw attention.
         putc(fd, '%');
         putc(fd, c);
       }
       state = 0;
- 508:	4981                	li	s3,0
- 50a:	b765                	j	4b2 <vprintf+0x60>
+ 518:	4981                	li	s3,0
+ 51a:	b765                	j	4c2 <vprintf+0x60>
         printint(fd, va_arg(ap, uint64), 10, 0);
- 50c:	008b0913          	addi	s2,s6,8
- 510:	4681                	li	a3,0
- 512:	4629                	li	a2,10
- 514:	000b2583          	lw	a1,0(s6)
- 518:	8556                	mv	a0,s5
- 51a:	00000097          	auipc	ra,0x0
- 51e:	e8c080e7          	jalr	-372(ra) # 3a6 <printint>
- 522:	8b4a                	mv	s6,s2
+ 51c:	008b0913          	addi	s2,s6,8
+ 520:	4681                	li	a3,0
+ 522:	4629                	li	a2,10
+ 524:	000b2583          	lw	a1,0(s6)
+ 528:	8556                	mv	a0,s5
+ 52a:	00000097          	auipc	ra,0x0
+ 52e:	e8c080e7          	jalr	-372(ra) # 3b6 <printint>
+ 532:	8b4a                	mv	s6,s2
       state = 0;
- 524:	4981                	li	s3,0
- 526:	b771                	j	4b2 <vprintf+0x60>
+ 534:	4981                	li	s3,0
+ 536:	b771                	j	4c2 <vprintf+0x60>
         printint(fd, va_arg(ap, int), 16, 0);
- 528:	008b0913          	addi	s2,s6,8
- 52c:	4681                	li	a3,0
- 52e:	866a                	mv	a2,s10
- 530:	000b2583          	lw	a1,0(s6)
- 534:	8556                	mv	a0,s5
- 536:	00000097          	auipc	ra,0x0
- 53a:	e70080e7          	jalr	-400(ra) # 3a6 <printint>
- 53e:	8b4a                	mv	s6,s2
+ 538:	008b0913          	addi	s2,s6,8
+ 53c:	4681                	li	a3,0
+ 53e:	866a                	mv	a2,s10
+ 540:	000b2583          	lw	a1,0(s6)
+ 544:	8556                	mv	a0,s5
+ 546:	00000097          	auipc	ra,0x0
+ 54a:	e70080e7          	jalr	-400(ra) # 3b6 <printint>
+ 54e:	8b4a                	mv	s6,s2
       state = 0;
- 540:	4981                	li	s3,0
- 542:	bf85                	j	4b2 <vprintf+0x60>
+ 550:	4981                	li	s3,0
+ 552:	bf85                	j	4c2 <vprintf+0x60>
         printptr(fd, va_arg(ap, uint64));
- 544:	008b0793          	addi	a5,s6,8
- 548:	f8f43423          	sd	a5,-120(s0)
- 54c:	000b3983          	ld	s3,0(s6)
+ 554:	008b0793          	addi	a5,s6,8
+ 558:	f8f43423          	sd	a5,-120(s0)
+ 55c:	000b3983          	ld	s3,0(s6)
   putc(fd, '0');
- 550:	03000593          	li	a1,48
- 554:	8556                	mv	a0,s5
- 556:	00000097          	auipc	ra,0x0
- 55a:	e2e080e7          	jalr	-466(ra) # 384 <putc>
+ 560:	03000593          	li	a1,48
+ 564:	8556                	mv	a0,s5
+ 566:	00000097          	auipc	ra,0x0
+ 56a:	e2e080e7          	jalr	-466(ra) # 394 <putc>
   putc(fd, 'x');
- 55e:	07800593          	li	a1,120
- 562:	8556                	mv	a0,s5
- 564:	00000097          	auipc	ra,0x0
- 568:	e20080e7          	jalr	-480(ra) # 384 <putc>
- 56c:	896a                	mv	s2,s10
+ 56e:	07800593          	li	a1,120
+ 572:	8556                	mv	a0,s5
+ 574:	00000097          	auipc	ra,0x0
+ 578:	e20080e7          	jalr	-480(ra) # 394 <putc>
+ 57c:	896a                	mv	s2,s10
     putc(fd, digits[x >> (sizeof(uint64) * 8 - 4)]);
- 56e:	03c9d793          	srli	a5,s3,0x3c
- 572:	97de                	add	a5,a5,s7
- 574:	0007c583          	lbu	a1,0(a5)
- 578:	8556                	mv	a0,s5
- 57a:	00000097          	auipc	ra,0x0
- 57e:	e0a080e7          	jalr	-502(ra) # 384 <putc>
+ 57e:	03c9d793          	srli	a5,s3,0x3c
+ 582:	97de                	add	a5,a5,s7
+ 584:	0007c583          	lbu	a1,0(a5)
+ 588:	8556                	mv	a0,s5
+ 58a:	00000097          	auipc	ra,0x0
+ 58e:	e0a080e7          	jalr	-502(ra) # 394 <putc>
   for (i = 0; i < (sizeof(uint64) * 2); i++, x <<= 4)
- 582:	0992                	slli	s3,s3,0x4
- 584:	397d                	addiw	s2,s2,-1
- 586:	fe0914e3          	bnez	s2,56e <vprintf+0x11c>
+ 592:	0992                	slli	s3,s3,0x4
+ 594:	397d                	addiw	s2,s2,-1
+ 596:	fe0914e3          	bnez	s2,57e <vprintf+0x11c>
         printptr(fd, va_arg(ap, uint64));
- 58a:	f8843b03          	ld	s6,-120(s0)
+ 59a:	f8843b03          	ld	s6,-120(s0)
       state = 0;
- 58e:	4981                	li	s3,0
- 590:	b70d                	j	4b2 <vprintf+0x60>
+ 59e:	4981                	li	s3,0
+ 5a0:	b70d                	j	4c2 <vprintf+0x60>
         s = va_arg(ap, char*);
- 592:	008b0913          	addi	s2,s6,8
- 596:	000b3983          	ld	s3,0(s6)
+ 5a2:	008b0913          	addi	s2,s6,8
+ 5a6:	000b3983          	ld	s3,0(s6)
         if(s == 0)
- 59a:	02098163          	beqz	s3,5bc <vprintf+0x16a>
+ 5aa:	02098163          	beqz	s3,5cc <vprintf+0x16a>
         while(*s != 0){
- 59e:	0009c583          	lbu	a1,0(s3)
- 5a2:	c5ad                	beqz	a1,60c <vprintf+0x1ba>
+ 5ae:	0009c583          	lbu	a1,0(s3)
+ 5b2:	c5ad                	beqz	a1,61c <vprintf+0x1ba>
           putc(fd, *s);
- 5a4:	8556                	mv	a0,s5
- 5a6:	00000097          	auipc	ra,0x0
- 5aa:	dde080e7          	jalr	-546(ra) # 384 <putc>
+ 5b4:	8556                	mv	a0,s5
+ 5b6:	00000097          	auipc	ra,0x0
+ 5ba:	dde080e7          	jalr	-546(ra) # 394 <putc>
           s++;
- 5ae:	0985                	addi	s3,s3,1
+ 5be:	0985                	addi	s3,s3,1
         while(*s != 0){
- 5b0:	0009c583          	lbu	a1,0(s3)
- 5b4:	f9e5                	bnez	a1,5a4 <vprintf+0x152>
+ 5c0:	0009c583          	lbu	a1,0(s3)
+ 5c4:	f9e5                	bnez	a1,5b4 <vprintf+0x152>
         s = va_arg(ap, char*);
- 5b6:	8b4a                	mv	s6,s2
+ 5c6:	8b4a                	mv	s6,s2
       state = 0;
- 5b8:	4981                	li	s3,0
- 5ba:	bde5                	j	4b2 <vprintf+0x60>
+ 5c8:	4981                	li	s3,0
+ 5ca:	bde5                	j	4c2 <vprintf+0x60>
           s = "(null)";
- 5bc:	00000997          	auipc	s3,0x0
- 5c0:	27c98993          	addi	s3,s3,636 # 838 <malloc+0x122>
+ 5cc:	00000997          	auipc	s3,0x0
+ 5d0:	27c98993          	addi	s3,s3,636 # 848 <malloc+0x122>
         while(*s != 0){
- 5c4:	85ee                	mv	a1,s11
- 5c6:	bff9                	j	5a4 <vprintf+0x152>
+ 5d4:	85ee                	mv	a1,s11
+ 5d6:	bff9                	j	5b4 <vprintf+0x152>
         putc(fd, va_arg(ap, uint));
- 5c8:	008b0913          	addi	s2,s6,8
- 5cc:	000b4583          	lbu	a1,0(s6)
- 5d0:	8556                	mv	a0,s5
- 5d2:	00000097          	auipc	ra,0x0
- 5d6:	db2080e7          	jalr	-590(ra) # 384 <putc>
- 5da:	8b4a                	mv	s6,s2
-      state = 0;
- 5dc:	4981                	li	s3,0
- 5de:	bdd1                	j	4b2 <vprintf+0x60>
-        putc(fd, c);
- 5e0:	85d2                	mv	a1,s4
- 5e2:	8556                	mv	a0,s5
- 5e4:	00000097          	auipc	ra,0x0
- 5e8:	da0080e7          	jalr	-608(ra) # 384 <putc>
+ 5d8:	008b0913          	addi	s2,s6,8
+ 5dc:	000b4583          	lbu	a1,0(s6)
+ 5e0:	8556                	mv	a0,s5
+ 5e2:	00000097          	auipc	ra,0x0
+ 5e6:	db2080e7          	jalr	-590(ra) # 394 <putc>
+ 5ea:	8b4a                	mv	s6,s2
       state = 0;
  5ec:	4981                	li	s3,0
- 5ee:	b5d1                	j	4b2 <vprintf+0x60>
-        putc(fd, '%');
+ 5ee:	bdd1                	j	4c2 <vprintf+0x60>
+        putc(fd, c);
  5f0:	85d2                	mv	a1,s4
  5f2:	8556                	mv	a0,s5
  5f4:	00000097          	auipc	ra,0x0
- 5f8:	d90080e7          	jalr	-624(ra) # 384 <putc>
+ 5f8:	da0080e7          	jalr	-608(ra) # 394 <putc>
+      state = 0;
+ 5fc:	4981                	li	s3,0
+ 5fe:	b5d1                	j	4c2 <vprintf+0x60>
+        putc(fd, '%');
+ 600:	85d2                	mv	a1,s4
+ 602:	8556                	mv	a0,s5
+ 604:	00000097          	auipc	ra,0x0
+ 608:	d90080e7          	jalr	-624(ra) # 394 <putc>
         putc(fd, c);
- 5fc:	85ca                	mv	a1,s2
- 5fe:	8556                	mv	a0,s5
- 600:	00000097          	auipc	ra,0x0
- 604:	d84080e7          	jalr	-636(ra) # 384 <putc>
+ 60c:	85ca                	mv	a1,s2
+ 60e:	8556                	mv	a0,s5
+ 610:	00000097          	auipc	ra,0x0
+ 614:	d84080e7          	jalr	-636(ra) # 394 <putc>
       state = 0;
- 608:	4981                	li	s3,0
- 60a:	b565                	j	4b2 <vprintf+0x60>
+ 618:	4981                	li	s3,0
+ 61a:	b565                	j	4c2 <vprintf+0x60>
         s = va_arg(ap, char*);
- 60c:	8b4a                	mv	s6,s2
+ 61c:	8b4a                	mv	s6,s2
       state = 0;
- 60e:	4981                	li	s3,0
- 610:	b54d                	j	4b2 <vprintf+0x60>
+ 61e:	4981                	li	s3,0
+ 620:	b54d                	j	4c2 <vprintf+0x60>
     }
   }
 }
- 612:	70e6                	ld	ra,120(sp)
- 614:	7446                	ld	s0,112(sp)
- 616:	74a6                	ld	s1,104(sp)
- 618:	7906                	ld	s2,96(sp)
- 61a:	69e6                	ld	s3,88(sp)
- 61c:	6a46                	ld	s4,80(sp)
- 61e:	6aa6                	ld	s5,72(sp)
- 620:	6b06                	ld	s6,64(sp)
- 622:	7be2                	ld	s7,56(sp)
- 624:	7c42                	ld	s8,48(sp)
- 626:	7ca2                	ld	s9,40(sp)
- 628:	7d02                	ld	s10,32(sp)
- 62a:	6de2                	ld	s11,24(sp)
- 62c:	6109                	addi	sp,sp,128
- 62e:	8082                	ret
+ 622:	70e6                	ld	ra,120(sp)
+ 624:	7446                	ld	s0,112(sp)
+ 626:	74a6                	ld	s1,104(sp)
+ 628:	7906                	ld	s2,96(sp)
+ 62a:	69e6                	ld	s3,88(sp)
+ 62c:	6a46                	ld	s4,80(sp)
+ 62e:	6aa6                	ld	s5,72(sp)
+ 630:	6b06                	ld	s6,64(sp)
+ 632:	7be2                	ld	s7,56(sp)
+ 634:	7c42                	ld	s8,48(sp)
+ 636:	7ca2                	ld	s9,40(sp)
+ 638:	7d02                	ld	s10,32(sp)
+ 63a:	6de2                	ld	s11,24(sp)
+ 63c:	6109                	addi	sp,sp,128
+ 63e:	8082                	ret
 
-0000000000000630 <fprintf>:
+0000000000000640 <fprintf>:
 
 void
 fprintf(int fd, const char *fmt, ...)
 {
- 630:	715d                	addi	sp,sp,-80
- 632:	ec06                	sd	ra,24(sp)
- 634:	e822                	sd	s0,16(sp)
- 636:	1000                	addi	s0,sp,32
- 638:	e010                	sd	a2,0(s0)
- 63a:	e414                	sd	a3,8(s0)
- 63c:	e818                	sd	a4,16(s0)
- 63e:	ec1c                	sd	a5,24(s0)
- 640:	03043023          	sd	a6,32(s0)
- 644:	03143423          	sd	a7,40(s0)
+ 640:	715d                	addi	sp,sp,-80
+ 642:	ec06                	sd	ra,24(sp)
+ 644:	e822                	sd	s0,16(sp)
+ 646:	1000                	addi	s0,sp,32
+ 648:	e010                	sd	a2,0(s0)
+ 64a:	e414                	sd	a3,8(s0)
+ 64c:	e818                	sd	a4,16(s0)
+ 64e:	ec1c                	sd	a5,24(s0)
+ 650:	03043023          	sd	a6,32(s0)
+ 654:	03143423          	sd	a7,40(s0)
   va_list ap;
 
   va_start(ap, fmt);
- 648:	fe843423          	sd	s0,-24(s0)
+ 658:	fe843423          	sd	s0,-24(s0)
   vprintf(fd, fmt, ap);
- 64c:	8622                	mv	a2,s0
- 64e:	00000097          	auipc	ra,0x0
- 652:	e04080e7          	jalr	-508(ra) # 452 <vprintf>
+ 65c:	8622                	mv	a2,s0
+ 65e:	00000097          	auipc	ra,0x0
+ 662:	e04080e7          	jalr	-508(ra) # 462 <vprintf>
 }
- 656:	60e2                	ld	ra,24(sp)
- 658:	6442                	ld	s0,16(sp)
- 65a:	6161                	addi	sp,sp,80
- 65c:	8082                	ret
+ 666:	60e2                	ld	ra,24(sp)
+ 668:	6442                	ld	s0,16(sp)
+ 66a:	6161                	addi	sp,sp,80
+ 66c:	8082                	ret
 
-000000000000065e <printf>:
+000000000000066e <printf>:
 
 void
 printf(const char *fmt, ...)
 {
- 65e:	711d                	addi	sp,sp,-96
- 660:	ec06                	sd	ra,24(sp)
- 662:	e822                	sd	s0,16(sp)
- 664:	1000                	addi	s0,sp,32
- 666:	e40c                	sd	a1,8(s0)
- 668:	e810                	sd	a2,16(s0)
- 66a:	ec14                	sd	a3,24(s0)
- 66c:	f018                	sd	a4,32(s0)
- 66e:	f41c                	sd	a5,40(s0)
- 670:	03043823          	sd	a6,48(s0)
- 674:	03143c23          	sd	a7,56(s0)
+ 66e:	711d                	addi	sp,sp,-96
+ 670:	ec06                	sd	ra,24(sp)
+ 672:	e822                	sd	s0,16(sp)
+ 674:	1000                	addi	s0,sp,32
+ 676:	e40c                	sd	a1,8(s0)
+ 678:	e810                	sd	a2,16(s0)
+ 67a:	ec14                	sd	a3,24(s0)
+ 67c:	f018                	sd	a4,32(s0)
+ 67e:	f41c                	sd	a5,40(s0)
+ 680:	03043823          	sd	a6,48(s0)
+ 684:	03143c23          	sd	a7,56(s0)
   va_list ap;
 
   va_start(ap, fmt);
- 678:	00840613          	addi	a2,s0,8
- 67c:	fec43423          	sd	a2,-24(s0)
+ 688:	00840613          	addi	a2,s0,8
+ 68c:	fec43423          	sd	a2,-24(s0)
   vprintf(1, fmt, ap);
- 680:	85aa                	mv	a1,a0
- 682:	4505                	li	a0,1
- 684:	00000097          	auipc	ra,0x0
- 688:	dce080e7          	jalr	-562(ra) # 452 <vprintf>
+ 690:	85aa                	mv	a1,a0
+ 692:	4505                	li	a0,1
+ 694:	00000097          	auipc	ra,0x0
+ 698:	dce080e7          	jalr	-562(ra) # 462 <vprintf>
 }
- 68c:	60e2                	ld	ra,24(sp)
- 68e:	6442                	ld	s0,16(sp)
- 690:	6125                	addi	sp,sp,96
- 692:	8082                	ret
+ 69c:	60e2                	ld	ra,24(sp)
+ 69e:	6442                	ld	s0,16(sp)
+ 6a0:	6125                	addi	sp,sp,96
+ 6a2:	8082                	ret
 
-0000000000000694 <free>:
+00000000000006a4 <free>:
 static Header base;
 static Header *freep;
 
 void
 free(void *ap)
 {
- 694:	1141                	addi	sp,sp,-16
- 696:	e422                	sd	s0,8(sp)
- 698:	0800                	addi	s0,sp,16
+ 6a4:	1141                	addi	sp,sp,-16
+ 6a6:	e422                	sd	s0,8(sp)
+ 6a8:	0800                	addi	s0,sp,16
   Header *bp, *p;
 
   bp = (Header*)ap - 1;
- 69a:	ff050693          	addi	a3,a0,-16
+ 6aa:	ff050693          	addi	a3,a0,-16
   for(p = freep; !(bp > p && bp < p->s.ptr); p = p->s.ptr)
- 69e:	00000797          	auipc	a5,0x0
- 6a2:	2127b783          	ld	a5,530(a5) # 8b0 <freep>
- 6a6:	a02d                	j	6d0 <free+0x3c>
+ 6ae:	00000797          	auipc	a5,0x0
+ 6b2:	2127b783          	ld	a5,530(a5) # 8c0 <freep>
+ 6b6:	a02d                	j	6e0 <free+0x3c>
     if(p >= p->s.ptr && (bp > p || bp < p->s.ptr))
       break;
   if(bp + bp->s.size == p->s.ptr){
     bp->s.size += p->s.ptr->s.size;
- 6a8:	4618                	lw	a4,8(a2)
- 6aa:	9f2d                	addw	a4,a4,a1
- 6ac:	fee52c23          	sw	a4,-8(a0)
+ 6b8:	4618                	lw	a4,8(a2)
+ 6ba:	9f2d                	addw	a4,a4,a1
+ 6bc:	fee52c23          	sw	a4,-8(a0)
     bp->s.ptr = p->s.ptr->s.ptr;
- 6b0:	6398                	ld	a4,0(a5)
- 6b2:	6310                	ld	a2,0(a4)
- 6b4:	a83d                	j	6f2 <free+0x5e>
+ 6c0:	6398                	ld	a4,0(a5)
+ 6c2:	6310                	ld	a2,0(a4)
+ 6c4:	a83d                	j	702 <free+0x5e>
   } else
     bp->s.ptr = p->s.ptr;
   if(p + p->s.size == bp){
     p->s.size += bp->s.size;
- 6b6:	ff852703          	lw	a4,-8(a0)
- 6ba:	9f31                	addw	a4,a4,a2
- 6bc:	c798                	sw	a4,8(a5)
+ 6c6:	ff852703          	lw	a4,-8(a0)
+ 6ca:	9f31                	addw	a4,a4,a2
+ 6cc:	c798                	sw	a4,8(a5)
     p->s.ptr = bp->s.ptr;
- 6be:	ff053683          	ld	a3,-16(a0)
- 6c2:	a091                	j	706 <free+0x72>
+ 6ce:	ff053683          	ld	a3,-16(a0)
+ 6d2:	a091                	j	716 <free+0x72>
     if(p >= p->s.ptr && (bp > p || bp < p->s.ptr))
- 6c4:	6398                	ld	a4,0(a5)
- 6c6:	00e7e463          	bltu	a5,a4,6ce <free+0x3a>
- 6ca:	00e6ea63          	bltu	a3,a4,6de <free+0x4a>
+ 6d4:	6398                	ld	a4,0(a5)
+ 6d6:	00e7e463          	bltu	a5,a4,6de <free+0x3a>
+ 6da:	00e6ea63          	bltu	a3,a4,6ee <free+0x4a>
 {
- 6ce:	87ba                	mv	a5,a4
+ 6de:	87ba                	mv	a5,a4
   for(p = freep; !(bp > p && bp < p->s.ptr); p = p->s.ptr)
- 6d0:	fed7fae3          	bgeu	a5,a3,6c4 <free+0x30>
- 6d4:	6398                	ld	a4,0(a5)
- 6d6:	00e6e463          	bltu	a3,a4,6de <free+0x4a>
+ 6e0:	fed7fae3          	bgeu	a5,a3,6d4 <free+0x30>
+ 6e4:	6398                	ld	a4,0(a5)
+ 6e6:	00e6e463          	bltu	a3,a4,6ee <free+0x4a>
     if(p >= p->s.ptr && (bp > p || bp < p->s.ptr))
- 6da:	fee7eae3          	bltu	a5,a4,6ce <free+0x3a>
+ 6ea:	fee7eae3          	bltu	a5,a4,6de <free+0x3a>
   if(bp + bp->s.size == p->s.ptr){
- 6de:	ff852583          	lw	a1,-8(a0)
- 6e2:	6390                	ld	a2,0(a5)
- 6e4:	02059813          	slli	a6,a1,0x20
- 6e8:	01c85713          	srli	a4,a6,0x1c
- 6ec:	9736                	add	a4,a4,a3
- 6ee:	fae60de3          	beq	a2,a4,6a8 <free+0x14>
+ 6ee:	ff852583          	lw	a1,-8(a0)
+ 6f2:	6390                	ld	a2,0(a5)
+ 6f4:	02059813          	slli	a6,a1,0x20
+ 6f8:	01c85713          	srli	a4,a6,0x1c
+ 6fc:	9736                	add	a4,a4,a3
+ 6fe:	fae60de3          	beq	a2,a4,6b8 <free+0x14>
     bp->s.ptr = p->s.ptr->s.ptr;
- 6f2:	fec53823          	sd	a2,-16(a0)
+ 702:	fec53823          	sd	a2,-16(a0)
   if(p + p->s.size == bp){
- 6f6:	4790                	lw	a2,8(a5)
- 6f8:	02061593          	slli	a1,a2,0x20
- 6fc:	01c5d713          	srli	a4,a1,0x1c
- 700:	973e                	add	a4,a4,a5
- 702:	fae68ae3          	beq	a3,a4,6b6 <free+0x22>
+ 706:	4790                	lw	a2,8(a5)
+ 708:	02061593          	slli	a1,a2,0x20
+ 70c:	01c5d713          	srli	a4,a1,0x1c
+ 710:	973e                	add	a4,a4,a5
+ 712:	fae68ae3          	beq	a3,a4,6c6 <free+0x22>
     p->s.ptr = bp->s.ptr;
- 706:	e394                	sd	a3,0(a5)
+ 716:	e394                	sd	a3,0(a5)
   } else
     p->s.ptr = bp;
   freep = p;
- 708:	00000717          	auipc	a4,0x0
- 70c:	1af73423          	sd	a5,424(a4) # 8b0 <freep>
+ 718:	00000717          	auipc	a4,0x0
+ 71c:	1af73423          	sd	a5,424(a4) # 8c0 <freep>
 }
- 710:	6422                	ld	s0,8(sp)
- 712:	0141                	addi	sp,sp,16
- 714:	8082                	ret
+ 720:	6422                	ld	s0,8(sp)
+ 722:	0141                	addi	sp,sp,16
+ 724:	8082                	ret
 
-0000000000000716 <malloc>:
+0000000000000726 <malloc>:
   return freep;
 }
 
 void*
 malloc(uint nbytes)
 {
- 716:	7139                	addi	sp,sp,-64
- 718:	fc06                	sd	ra,56(sp)
- 71a:	f822                	sd	s0,48(sp)
- 71c:	f426                	sd	s1,40(sp)
- 71e:	f04a                	sd	s2,32(sp)
- 720:	ec4e                	sd	s3,24(sp)
- 722:	e852                	sd	s4,16(sp)
- 724:	e456                	sd	s5,8(sp)
- 726:	e05a                	sd	s6,0(sp)
- 728:	0080                	addi	s0,sp,64
+ 726:	7139                	addi	sp,sp,-64
+ 728:	fc06                	sd	ra,56(sp)
+ 72a:	f822                	sd	s0,48(sp)
+ 72c:	f426                	sd	s1,40(sp)
+ 72e:	f04a                	sd	s2,32(sp)
+ 730:	ec4e                	sd	s3,24(sp)
+ 732:	e852                	sd	s4,16(sp)
+ 734:	e456                	sd	s5,8(sp)
+ 736:	e05a                	sd	s6,0(sp)
+ 738:	0080                	addi	s0,sp,64
   Header *p, *prevp;
   uint nunits;
 
   nunits = (nbytes + sizeof(Header) - 1)/sizeof(Header) + 1;
- 72a:	02051493          	slli	s1,a0,0x20
- 72e:	9081                	srli	s1,s1,0x20
- 730:	04bd                	addi	s1,s1,15
- 732:	8091                	srli	s1,s1,0x4
- 734:	0014899b          	addiw	s3,s1,1
- 738:	0485                	addi	s1,s1,1
+ 73a:	02051493          	slli	s1,a0,0x20
+ 73e:	9081                	srli	s1,s1,0x20
+ 740:	04bd                	addi	s1,s1,15
+ 742:	8091                	srli	s1,s1,0x4
+ 744:	0014899b          	addiw	s3,s1,1
+ 748:	0485                	addi	s1,s1,1
   if((prevp = freep) == 0){
- 73a:	00000517          	auipc	a0,0x0
- 73e:	17653503          	ld	a0,374(a0) # 8b0 <freep>
- 742:	c515                	beqz	a0,76e <malloc+0x58>
+ 74a:	00000517          	auipc	a0,0x0
+ 74e:	17653503          	ld	a0,374(a0) # 8c0 <freep>
+ 752:	c515                	beqz	a0,77e <malloc+0x58>
     base.s.ptr = freep = prevp = &base;
     base.s.size = 0;
   }
   for(p = prevp->s.ptr; ; prevp = p, p = p->s.ptr){
- 744:	611c                	ld	a5,0(a0)
+ 754:	611c                	ld	a5,0(a0)
     if(p->s.size >= nunits){
- 746:	4798                	lw	a4,8(a5)
- 748:	02977f63          	bgeu	a4,s1,786 <malloc+0x70>
- 74c:	8a4e                	mv	s4,s3
- 74e:	0009871b          	sext.w	a4,s3
- 752:	6685                	lui	a3,0x1
- 754:	00d77363          	bgeu	a4,a3,75a <malloc+0x44>
- 758:	6a05                	lui	s4,0x1
- 75a:	000a0b1b          	sext.w	s6,s4
+ 756:	4798                	lw	a4,8(a5)
+ 758:	02977f63          	bgeu	a4,s1,796 <malloc+0x70>
+ 75c:	8a4e                	mv	s4,s3
+ 75e:	0009871b          	sext.w	a4,s3
+ 762:	6685                	lui	a3,0x1
+ 764:	00d77363          	bgeu	a4,a3,76a <malloc+0x44>
+ 768:	6a05                	lui	s4,0x1
+ 76a:	000a0b1b          	sext.w	s6,s4
   p = sbrk(nu * sizeof(Header));
- 75e:	004a1a1b          	slliw	s4,s4,0x4
+ 76e:	004a1a1b          	slliw	s4,s4,0x4
         p->s.size = nunits;
       }
       freep = prevp;
       return (void*)(p + 1);
     }
     if(p == freep)
- 762:	00000917          	auipc	s2,0x0
- 766:	14e90913          	addi	s2,s2,334 # 8b0 <freep>
+ 772:	00000917          	auipc	s2,0x0
+ 776:	14e90913          	addi	s2,s2,334 # 8c0 <freep>
   if(p == (char*)-1)
- 76a:	5afd                	li	s5,-1
- 76c:	a895                	j	7e0 <malloc+0xca>
+ 77a:	5afd                	li	s5,-1
+ 77c:	a895                	j	7f0 <malloc+0xca>
     base.s.ptr = freep = prevp = &base;
- 76e:	00000797          	auipc	a5,0x0
- 772:	14a78793          	addi	a5,a5,330 # 8b8 <base>
- 776:	00000717          	auipc	a4,0x0
- 77a:	12f73d23          	sd	a5,314(a4) # 8b0 <freep>
- 77e:	e39c                	sd	a5,0(a5)
+ 77e:	00000797          	auipc	a5,0x0
+ 782:	14a78793          	addi	a5,a5,330 # 8c8 <base>
+ 786:	00000717          	auipc	a4,0x0
+ 78a:	12f73d23          	sd	a5,314(a4) # 8c0 <freep>
+ 78e:	e39c                	sd	a5,0(a5)
     base.s.size = 0;
- 780:	0007a423          	sw	zero,8(a5)
+ 790:	0007a423          	sw	zero,8(a5)
     if(p->s.size >= nunits){
- 784:	b7e1                	j	74c <malloc+0x36>
+ 794:	b7e1                	j	75c <malloc+0x36>
       if(p->s.size == nunits)
- 786:	02e48c63          	beq	s1,a4,7be <malloc+0xa8>
+ 796:	02e48c63          	beq	s1,a4,7ce <malloc+0xa8>
         p->s.size -= nunits;
- 78a:	4137073b          	subw	a4,a4,s3
- 78e:	c798                	sw	a4,8(a5)
+ 79a:	4137073b          	subw	a4,a4,s3
+ 79e:	c798                	sw	a4,8(a5)
         p += p->s.size;
- 790:	02071693          	slli	a3,a4,0x20
- 794:	01c6d713          	srli	a4,a3,0x1c
- 798:	97ba                	add	a5,a5,a4
+ 7a0:	02071693          	slli	a3,a4,0x20
+ 7a4:	01c6d713          	srli	a4,a3,0x1c
+ 7a8:	97ba                	add	a5,a5,a4
         p->s.size = nunits;
- 79a:	0137a423          	sw	s3,8(a5)
+ 7aa:	0137a423          	sw	s3,8(a5)
       freep = prevp;
- 79e:	00000717          	auipc	a4,0x0
- 7a2:	10a73923          	sd	a0,274(a4) # 8b0 <freep>
+ 7ae:	00000717          	auipc	a4,0x0
+ 7b2:	10a73923          	sd	a0,274(a4) # 8c0 <freep>
       return (void*)(p + 1);
- 7a6:	01078513          	addi	a0,a5,16
+ 7b6:	01078513          	addi	a0,a5,16
       if((p = morecore(nunits)) == 0)
         return 0;
   }
 }
- 7aa:	70e2                	ld	ra,56(sp)
- 7ac:	7442                	ld	s0,48(sp)
- 7ae:	74a2                	ld	s1,40(sp)
- 7b0:	7902                	ld	s2,32(sp)
- 7b2:	69e2                	ld	s3,24(sp)
- 7b4:	6a42                	ld	s4,16(sp)
- 7b6:	6aa2                	ld	s5,8(sp)
- 7b8:	6b02                	ld	s6,0(sp)
- 7ba:	6121                	addi	sp,sp,64
- 7bc:	8082                	ret
+ 7ba:	70e2                	ld	ra,56(sp)
+ 7bc:	7442                	ld	s0,48(sp)
+ 7be:	74a2                	ld	s1,40(sp)
+ 7c0:	7902                	ld	s2,32(sp)
+ 7c2:	69e2                	ld	s3,24(sp)
+ 7c4:	6a42                	ld	s4,16(sp)
+ 7c6:	6aa2                	ld	s5,8(sp)
+ 7c8:	6b02                	ld	s6,0(sp)
+ 7ca:	6121                	addi	sp,sp,64
+ 7cc:	8082                	ret
         prevp->s.ptr = p->s.ptr;
- 7be:	6398                	ld	a4,0(a5)
- 7c0:	e118                	sd	a4,0(a0)
- 7c2:	bff1                	j	79e <malloc+0x88>
+ 7ce:	6398                	ld	a4,0(a5)
+ 7d0:	e118                	sd	a4,0(a0)
+ 7d2:	bff1                	j	7ae <malloc+0x88>
   hp->s.size = nu;
- 7c4:	01652423          	sw	s6,8(a0)
+ 7d4:	01652423          	sw	s6,8(a0)
   free((void*)(hp + 1));
- 7c8:	0541                	addi	a0,a0,16
- 7ca:	00000097          	auipc	ra,0x0
- 7ce:	eca080e7          	jalr	-310(ra) # 694 <free>
+ 7d8:	0541                	addi	a0,a0,16
+ 7da:	00000097          	auipc	ra,0x0
+ 7de:	eca080e7          	jalr	-310(ra) # 6a4 <free>
   return freep;
- 7d2:	00093503          	ld	a0,0(s2)
+ 7e2:	00093503          	ld	a0,0(s2)
       if((p = morecore(nunits)) == 0)
- 7d6:	d971                	beqz	a0,7aa <malloc+0x94>
+ 7e6:	d971                	beqz	a0,7ba <malloc+0x94>
   for(p = prevp->s.ptr; ; prevp = p, p = p->s.ptr){
- 7d8:	611c                	ld	a5,0(a0)
+ 7e8:	611c                	ld	a5,0(a0)
     if(p->s.size >= nunits){
- 7da:	4798                	lw	a4,8(a5)
- 7dc:	fa9775e3          	bgeu	a4,s1,786 <malloc+0x70>
+ 7ea:	4798                	lw	a4,8(a5)
+ 7ec:	fa9775e3          	bgeu	a4,s1,796 <malloc+0x70>
     if(p == freep)
- 7e0:	00093703          	ld	a4,0(s2)
- 7e4:	853e                	mv	a0,a5
- 7e6:	fef719e3          	bne	a4,a5,7d8 <malloc+0xc2>
+ 7f0:	00093703          	ld	a4,0(s2)
+ 7f4:	853e                	mv	a0,a5
+ 7f6:	fef719e3          	bne	a4,a5,7e8 <malloc+0xc2>
   p = sbrk(nu * sizeof(Header));
- 7ea:	8552                	mv	a0,s4
- 7ec:	00000097          	auipc	ra,0x0
- 7f0:	b80080e7          	jalr	-1152(ra) # 36c <sbrk>
+ 7fa:	8552                	mv	a0,s4
+ 7fc:	00000097          	auipc	ra,0x0
+ 800:	b70080e7          	jalr	-1168(ra) # 36c <sbrk>
   if(p == (char*)-1)
- 7f4:	fd5518e3          	bne	a0,s5,7c4 <malloc+0xae>
+ 804:	fd5518e3          	bne	a0,s5,7d4 <malloc+0xae>
         return 0;
- 7f8:	4501                	li	a0,0
- 7fa:	bf45                	j	7aa <malloc+0x94>
+ 808:	4501                	li	a0,0
+ 80a:	bf45                	j	7ba <malloc+0x94>
Binary files ./user/rm.o and ../xv6-labs-2021/user/rm.o differ
diff -urN ./user/rm.sym ../xv6-labs-2021/user/rm.sym
--- ./user/rm.sym	2021-12-05 17:54:42.000000000 +0800
+++ ../xv6-labs-2021/user/rm.sym	2021-11-26 14:46:16.000000000 +0800
@@ -1,7 +1,7 @@
 0000000000000000 .text
-0000000000000800 .rodata
-00000000000008b0 .sbss
-00000000000008b8 .bss
+0000000000000810 .rodata
+00000000000008c0 .sbss
+00000000000008c8 .bss
 0000000000000000 .comment
 0000000000000000 .riscv.attributes
 0000000000000000 .debug_aranges
@@ -16,29 +16,31 @@
 0000000000000000 rm.c
 0000000000000000 ulib.c
 0000000000000000 printf.c
-0000000000000384 putc
-00000000000003a6 printint
-0000000000000898 digits
+0000000000000394 putc
+00000000000003b6 printint
+00000000000008a8 digits
 0000000000000000 umalloc.c
-00000000000008b0 freep
-00000000000008b8 base
+00000000000008c0 freep
+00000000000008c8 base
 0000000000000078 strcpy
-000000000000065e printf
-00000000000010a9 __global_pointer$
+000000000000066e printf
+00000000000010b9 __global_pointer$
 0000000000000232 memmove
 000000000000032c mknod
+0000000000000384 trace
 0000000000000130 gets
-00000000000008a9 __SDATA_BEGIN__
+00000000000008b9 __SDATA_BEGIN__
 0000000000000364 getpid
 00000000000002c4 memcpy
-0000000000000716 malloc
+0000000000000726 malloc
 0000000000000374 sleep
+000000000000038c sysinfo
 00000000000002f4 pipe
 0000000000000304 write
 000000000000033c fstat
-0000000000000630 fprintf
+0000000000000640 fprintf
 0000000000000314 kill
-0000000000000452 vprintf
+0000000000000462 vprintf
 0000000000000354 chdir
 000000000000031c exec
 00000000000002ec wait
@@ -46,18 +48,18 @@
 0000000000000334 unlink
 000000000000028a memcmp
 00000000000002dc fork
-00000000000008c8 __BSS_END__
+00000000000008d8 __BSS_END__
 000000000000036c sbrk
 000000000000037c uptime
-00000000000008a9 __bss_start
+00000000000008b9 __bss_start
 00000000000000ea memset
 0000000000000000 main
 0000000000000094 strcmp
 000000000000035c dup
-00000000000008a9 __DATA_BEGIN__
+00000000000008b9 __DATA_BEGIN__
 00000000000001a4 stat
-00000000000008a9 _edata
-00000000000008c8 _end
+00000000000008b9 _edata
+00000000000008d8 _end
 0000000000000344 link
 00000000000002e4 exit
 00000000000001ea atoi
@@ -66,4 +68,4 @@
 000000000000010c strchr
 000000000000034c mkdir
 000000000000030c close
-0000000000000694 free
+00000000000006a4 free
diff -urN ./user/sh.asm ../xv6-labs-2021/user/sh.asm
--- ./user/sh.asm	2021-12-05 17:54:42.000000000 +0800
+++ ../xv6-labs-2021/user/sh.asm	2021-11-26 14:46:16.000000000 +0800
@@ -21,10 +21,10 @@
        e:	892e                	mv	s2,a1
   fprintf(2, "$ ");
       10:	00001597          	auipc	a1,0x1
-      14:	2d058593          	addi	a1,a1,720 # 12e0 <malloc+0xe6>
+      14:	2e058593          	addi	a1,a1,736 # 12f0 <malloc+0xe6>
       18:	4509                	li	a0,2
       1a:	00001097          	auipc	ra,0x1
-      1e:	0fa080e7          	jalr	250(ra) # 1114 <fprintf>
+      1e:	10a080e7          	jalr	266(ra) # 1124 <fprintf>
   memset(buf, 0, nbuf);
       22:	864a                	mv	a2,s2
       24:	4581                	li	a1,0
@@ -64,10 +64,10 @@
       5c:	862a                	mv	a2,a0
   fprintf(2, "%s\n", s);
       5e:	00001597          	auipc	a1,0x1
-      62:	28a58593          	addi	a1,a1,650 # 12e8 <malloc+0xee>
+      62:	29a58593          	addi	a1,a1,666 # 12f8 <malloc+0xee>
       66:	4509                	li	a0,2
       68:	00001097          	auipc	ra,0x1
-      6c:	0ac080e7          	jalr	172(ra) # 1114 <fprintf>
+      6c:	0bc080e7          	jalr	188(ra) # 1124 <fprintf>
   exit(1);
       70:	4505                	li	a0,1
       72:	00001097          	auipc	ra,0x1
@@ -100,7 +100,7 @@
       96:	8082                	ret
     panic("fork");
       98:	00001517          	auipc	a0,0x1
-      9c:	25850513          	addi	a0,a0,600 # 12f0 <malloc+0xf6>
+      9c:	26850513          	addi	a0,a0,616 # 1300 <malloc+0xf6>
       a0:	00000097          	auipc	ra,0x0
       a4:	fb4080e7          	jalr	-76(ra) # 54 <panic>
 
@@ -121,7 +121,7 @@
       be:	00056783          	lwu	a5,0(a0)
       c2:	078a                	slli	a5,a5,0x2
       c4:	00001717          	auipc	a4,0x1
-      c8:	32c70713          	addi	a4,a4,812 # 13f0 <malloc+0x1f6>
+      c8:	33c70713          	addi	a4,a4,828 # 1400 <malloc+0x1f6>
       cc:	97ba                	add	a5,a5,a4
       ce:	439c                	lw	a5,0(a5)
       d0:	97ba                	add	a5,a5,a4
@@ -132,7 +132,7 @@
       da:	cf2080e7          	jalr	-782(ra) # dc8 <exit>
     panic("runcmd");
       de:	00001517          	auipc	a0,0x1
-      e2:	21a50513          	addi	a0,a0,538 # 12f8 <malloc+0xfe>
+      e2:	22a50513          	addi	a0,a0,554 # 1308 <malloc+0xfe>
       e6:	00000097          	auipc	ra,0x0
       ea:	f6e080e7          	jalr	-146(ra) # 54 <panic>
     if(ecmd->argv[0] == 0)
@@ -145,10 +145,10 @@
     fprintf(2, "exec %s failed\n", ecmd->argv[0]);
       fe:	6490                	ld	a2,8(s1)
      100:	00001597          	auipc	a1,0x1
-     104:	20058593          	addi	a1,a1,512 # 1300 <malloc+0x106>
+     104:	21058593          	addi	a1,a1,528 # 1310 <malloc+0x106>
      108:	4509                	li	a0,2
      10a:	00001097          	auipc	ra,0x1
-     10e:	00a080e7          	jalr	10(ra) # 1114 <fprintf>
+     10e:	01a080e7          	jalr	26(ra) # 1124 <fprintf>
   exit(0);
      112:	4501                	li	a0,0
      114:	00001097          	auipc	ra,0x1
@@ -174,10 +174,10 @@
       fprintf(2, "open %s failed\n", rcmd->file);
      14a:	6890                	ld	a2,16(s1)
      14c:	00001597          	auipc	a1,0x1
-     150:	1c458593          	addi	a1,a1,452 # 1310 <malloc+0x116>
+     150:	1d458593          	addi	a1,a1,468 # 1320 <malloc+0x116>
      154:	4509                	li	a0,2
      156:	00001097          	auipc	ra,0x1
-     15a:	fbe080e7          	jalr	-66(ra) # 1114 <fprintf>
+     15a:	fce080e7          	jalr	-50(ra) # 1124 <fprintf>
       exit(1);
      15e:	4505                	li	a0,1
      160:	00001097          	auipc	ra,0x1
@@ -231,7 +231,7 @@
      1e0:	bf0d                	j	112 <runcmd+0x6a>
       panic("pipe");
      1e2:	00001517          	auipc	a0,0x1
-     1e6:	13e50513          	addi	a0,a0,318 # 1320 <malloc+0x126>
+     1e6:	14e50513          	addi	a0,a0,334 # 1330 <malloc+0x126>
      1ea:	00000097          	auipc	ra,0x0
      1ee:	e6a080e7          	jalr	-406(ra) # 54 <panic>
       close(1);
@@ -299,7 +299,7 @@
   cmd = malloc(sizeof(*cmd));
      280:	0a800513          	li	a0,168
      284:	00001097          	auipc	ra,0x1
-     288:	f76080e7          	jalr	-138(ra) # 11fa <malloc>
+     288:	f86080e7          	jalr	-122(ra) # 120a <malloc>
      28c:	84aa                	mv	s1,a0
   memset(cmd, 0, sizeof(*cmd));
      28e:	0a800613          	li	a2,168
@@ -343,7 +343,7 @@
   cmd = malloc(sizeof(*cmd));
      2ca:	02800513          	li	a0,40
      2ce:	00001097          	auipc	ra,0x1
-     2d2:	f2c080e7          	jalr	-212(ra) # 11fa <malloc>
+     2d2:	f3c080e7          	jalr	-196(ra) # 120a <malloc>
      2d6:	84aa                	mv	s1,a0
   memset(cmd, 0, sizeof(*cmd));
      2d8:	02800613          	li	a2,40
@@ -396,7 +396,7 @@
   cmd = malloc(sizeof(*cmd));
      326:	4561                	li	a0,24
      328:	00001097          	auipc	ra,0x1
-     32c:	ed2080e7          	jalr	-302(ra) # 11fa <malloc>
+     32c:	ee2080e7          	jalr	-286(ra) # 120a <malloc>
      330:	84aa                	mv	s1,a0
   memset(cmd, 0, sizeof(*cmd));
      332:	4661                	li	a2,24
@@ -440,7 +440,7 @@
   cmd = malloc(sizeof(*cmd));
      36c:	4561                	li	a0,24
      36e:	00001097          	auipc	ra,0x1
-     372:	e8c080e7          	jalr	-372(ra) # 11fa <malloc>
+     372:	e9c080e7          	jalr	-356(ra) # 120a <malloc>
      376:	84aa                	mv	s1,a0
   memset(cmd, 0, sizeof(*cmd));
      378:	4661                	li	a2,24
@@ -482,7 +482,7 @@
   cmd = malloc(sizeof(*cmd));
      3ae:	4541                	li	a0,16
      3b0:	00001097          	auipc	ra,0x1
-     3b4:	e4a080e7          	jalr	-438(ra) # 11fa <malloc>
+     3b4:	e5a080e7          	jalr	-422(ra) # 120a <malloc>
      3b8:	84aa                	mv	s1,a0
   memset(cmd, 0, sizeof(*cmd));
      3ba:	4641                	li	a2,16
@@ -532,7 +532,7 @@
      3f8:	6104                	ld	s1,0(a0)
   while(s < es && strchr(whitespace, *s))
      3fa:	00001997          	auipc	s3,0x1
-     3fe:	0a698993          	addi	s3,s3,166 # 14a0 <whitespace>
+     3fe:	0b698993          	addi	s3,s3,182 # 14b0 <whitespace>
      402:	00b4fe63          	bgeu	s1,a1,41e <gettoken+0x42>
      406:	0004c583          	lbu	a1,0(s1)
      40a:	854e                	mv	a0,s3
@@ -583,7 +583,7 @@
 
   while(s < es && strchr(whitespace, *s))
      460:	00001997          	auipc	s3,0x1
-     464:	04098993          	addi	s3,s3,64 # 14a0 <whitespace>
+     464:	05098993          	addi	s3,s3,80 # 14b0 <whitespace>
      468:	0124fe63          	bgeu	s1,s2,484 <gettoken+0xa8>
      46c:	0004c583          	lbu	a1,0(s1)
      470:	854e                	mv	a0,s3
@@ -635,9 +635,9 @@
      4c8:	f8e787e3          	beq	a5,a4,456 <gettoken+0x7a>
     while(s < es && !strchr(whitespace, *s) && !strchr(symbols, *s))
      4cc:	00001997          	auipc	s3,0x1
-     4d0:	fd498993          	addi	s3,s3,-44 # 14a0 <whitespace>
+     4d0:	fe498993          	addi	s3,s3,-28 # 14b0 <whitespace>
      4d4:	00001a97          	auipc	s5,0x1
-     4d8:	fc4a8a93          	addi	s5,s5,-60 # 1498 <symbols>
+     4d8:	fd4a8a93          	addi	s5,s5,-44 # 14a8 <symbols>
      4dc:	0324f663          	bgeu	s1,s2,508 <gettoken+0x12c>
      4e0:	0004c583          	lbu	a1,0(s1)
      4e4:	854e                	mv	a0,s3
@@ -688,7 +688,7 @@
      536:	6104                	ld	s1,0(a0)
   while(s < es && strchr(whitespace, *s))
      538:	00001997          	auipc	s3,0x1
-     53c:	f6898993          	addi	s3,s3,-152 # 14a0 <whitespace>
+     53c:	f7898993          	addi	s3,s3,-136 # 14b0 <whitespace>
      540:	00b4fe63          	bgeu	s1,a1,55c <peek+0x3e>
      544:	0004c583          	lbu	a1,0(s1)
      548:	854e                	mv	a0,s3
@@ -752,7 +752,7 @@
 
   while(peek(ps, es, "<>")){
      5aa:	00001b97          	auipc	s7,0x1
-     5ae:	d9eb8b93          	addi	s7,s7,-610 # 1348 <malloc+0x14e>
+     5ae:	daeb8b93          	addi	s7,s7,-594 # 1358 <malloc+0x14e>
     tok = gettoken(ps, es, 0, 0);
     if(gettoken(ps, es, &q, &eq) != 'a')
      5b2:	06100c13          	li	s8,97
@@ -763,7 +763,7 @@
      5ba:	a02d                	j	5e4 <parseredirs+0x5a>
       panic("missing file for redirection");
      5bc:	00001517          	auipc	a0,0x1
-     5c0:	d6c50513          	addi	a0,a0,-660 # 1328 <malloc+0x12e>
+     5c0:	d7c50513          	addi	a0,a0,-644 # 1338 <malloc+0x12e>
      5c4:	00000097          	auipc	ra,0x0
      5c8:	a90080e7          	jalr	-1392(ra) # 54 <panic>
     case '<':
@@ -881,7 +881,7 @@
 
   if(peek(ps, es, "("))
      6a4:	00001617          	auipc	a2,0x1
-     6a8:	cac60613          	addi	a2,a2,-852 # 1350 <malloc+0x156>
+     6a8:	cbc60613          	addi	a2,a2,-836 # 1360 <malloc+0x156>
      6ac:	00000097          	auipc	ra,0x0
      6b0:	e72080e7          	jalr	-398(ra) # 51e <peek>
      6b4:	e905                	bnez	a0,6e4 <parseexec+0x5e>
@@ -904,7 +904,7 @@
   while(!peek(ps, es, "|)&;")){
      6d0:	008c0913          	addi	s2,s8,8
      6d4:	00001b17          	auipc	s6,0x1
-     6d8:	c9cb0b13          	addi	s6,s6,-868 # 1370 <malloc+0x176>
+     6d8:	cacb0b13          	addi	s6,s6,-852 # 1380 <malloc+0x176>
     if((tok=gettoken(ps, es, &q, &eq)) == 0)
       break;
     if(tok != 'a')
@@ -945,7 +945,7 @@
      70c:	8082                	ret
       panic("syntax");
      70e:	00001517          	auipc	a0,0x1
-     712:	c4a50513          	addi	a0,a0,-950 # 1358 <malloc+0x15e>
+     712:	c5a50513          	addi	a0,a0,-934 # 1368 <malloc+0x15e>
      716:	00000097          	auipc	ra,0x0
      71a:	93e080e7          	jalr	-1730(ra) # 54 <panic>
     ret = parseredirs(ret, ps, es);
@@ -985,7 +985,7 @@
      76c:	fb7999e3          	bne	s3,s7,71e <parseexec+0x98>
       panic("too many args");
      770:	00001517          	auipc	a0,0x1
-     774:	bf050513          	addi	a0,a0,-1040 # 1360 <malloc+0x166>
+     774:	c0050513          	addi	a0,a0,-1024 # 1370 <malloc+0x166>
      778:	00000097          	auipc	ra,0x0
      77c:	8dc080e7          	jalr	-1828(ra) # 54 <panic>
   cmd->argv[argc] = 0;
@@ -1014,7 +1014,7 @@
      7a8:	84aa                	mv	s1,a0
   if(peek(ps, es, "|")){
      7aa:	00001617          	auipc	a2,0x1
-     7ae:	bce60613          	addi	a2,a2,-1074 # 1378 <malloc+0x17e>
+     7ae:	bde60613          	addi	a2,a2,-1058 # 1388 <malloc+0x17e>
      7b2:	85ce                	mv	a1,s3
      7b4:	854a                	mv	a0,s2
      7b6:	00000097          	auipc	ra,0x0
@@ -1067,7 +1067,7 @@
      818:	84aa                	mv	s1,a0
   while(peek(ps, es, "&")){
      81a:	00001a17          	auipc	s4,0x1
-     81e:	b66a0a13          	addi	s4,s4,-1178 # 1380 <malloc+0x186>
+     81e:	b76a0a13          	addi	s4,s4,-1162 # 1390 <malloc+0x186>
      822:	a839                	j	840 <parseline+0x44>
     gettoken(ps, es, 0, 0);
      824:	4681                	li	a3,0
@@ -1090,7 +1090,7 @@
      84e:	f979                	bnez	a0,824 <parseline+0x28>
   if(peek(ps, es, ";")){
      850:	00001617          	auipc	a2,0x1
-     854:	b3860613          	addi	a2,a2,-1224 # 1388 <malloc+0x18e>
+     854:	b4860613          	addi	a2,a2,-1208 # 1398 <malloc+0x18e>
      858:	85ce                	mv	a1,s3
      85a:	854a                	mv	a0,s2
      85c:	00000097          	auipc	ra,0x0
@@ -1139,7 +1139,7 @@
      8b4:	892e                	mv	s2,a1
   if(!peek(ps, es, "("))
      8b6:	00001617          	auipc	a2,0x1
-     8ba:	a9a60613          	addi	a2,a2,-1382 # 1350 <malloc+0x156>
+     8ba:	aaa60613          	addi	a2,a2,-1366 # 1360 <malloc+0x156>
      8be:	00000097          	auipc	ra,0x0
      8c2:	c60080e7          	jalr	-928(ra) # 51e <peek>
      8c6:	c12d                	beqz	a0,928 <parseblock+0x84>
@@ -1158,7 +1158,7 @@
      8e4:	89aa                	mv	s3,a0
   if(!peek(ps, es, ")"))
      8e6:	00001617          	auipc	a2,0x1
-     8ea:	aba60613          	addi	a2,a2,-1350 # 13a0 <malloc+0x1a6>
+     8ea:	aca60613          	addi	a2,a2,-1334 # 13b0 <malloc+0x1a6>
      8ee:	85ca                	mv	a1,s2
      8f0:	8526                	mv	a0,s1
      8f2:	00000097          	auipc	ra,0x0
@@ -1187,12 +1187,12 @@
      926:	8082                	ret
     panic("parseblock");
      928:	00001517          	auipc	a0,0x1
-     92c:	a6850513          	addi	a0,a0,-1432 # 1390 <malloc+0x196>
+     92c:	a7850513          	addi	a0,a0,-1416 # 13a0 <malloc+0x196>
      930:	fffff097          	auipc	ra,0xfffff
      934:	724080e7          	jalr	1828(ra) # 54 <panic>
     panic("syntax - missing )");
      938:	00001517          	auipc	a0,0x1
-     93c:	a7050513          	addi	a0,a0,-1424 # 13a8 <malloc+0x1ae>
+     93c:	a8050513          	addi	a0,a0,-1408 # 13b8 <malloc+0x1ae>
      940:	fffff097          	auipc	ra,0xfffff
      944:	714080e7          	jalr	1812(ra) # 54 <panic>
 
@@ -1224,7 +1224,7 @@
      95e:	00056783          	lwu	a5,0(a0)
      962:	078a                	slli	a5,a5,0x2
      964:	00001717          	auipc	a4,0x1
-     968:	aa470713          	addi	a4,a4,-1372 # 1408 <malloc+0x20e>
+     968:	ab470713          	addi	a4,a4,-1356 # 1418 <malloc+0x20e>
      96c:	97ba                	add	a5,a5,a4
      96e:	439c                	lw	a5,0(a5)
      970:	97ba                	add	a5,a5,a4
@@ -1317,7 +1317,7 @@
      a0e:	892a                	mv	s2,a0
   peek(&s, es, "");
      a10:	00001617          	auipc	a2,0x1
-     a14:	9b060613          	addi	a2,a2,-1616 # 13c0 <malloc+0x1c6>
+     a14:	9c060613          	addi	a2,a2,-1600 # 13d0 <malloc+0x1c6>
      a18:	85a6                	mv	a1,s1
      a1a:	fd840513          	addi	a0,s0,-40
      a1e:	00000097          	auipc	ra,0x0
@@ -1339,13 +1339,13 @@
      a44:	8082                	ret
     fprintf(2, "leftovers: %s\n", s);
      a46:	00001597          	auipc	a1,0x1
-     a4a:	98258593          	addi	a1,a1,-1662 # 13c8 <malloc+0x1ce>
+     a4a:	99258593          	addi	a1,a1,-1646 # 13d8 <malloc+0x1ce>
      a4e:	4509                	li	a0,2
      a50:	00000097          	auipc	ra,0x0
-     a54:	6c4080e7          	jalr	1732(ra) # 1114 <fprintf>
+     a54:	6d4080e7          	jalr	1748(ra) # 1124 <fprintf>
     panic("syntax");
      a58:	00001517          	auipc	a0,0x1
-     a5c:	90050513          	addi	a0,a0,-1792 # 1358 <malloc+0x15e>
+     a5c:	91050513          	addi	a0,a0,-1776 # 1368 <malloc+0x15e>
      a60:	fffff097          	auipc	ra,0xfffff
      a64:	5f4080e7          	jalr	1524(ra) # 54 <panic>
 
@@ -1362,7 +1362,7 @@
      a78:	0080                	addi	s0,sp,64
   while((fd = open("console", O_RDWR)) >= 0){
      a7a:	00001497          	auipc	s1,0x1
-     a7e:	95e48493          	addi	s1,s1,-1698 # 13d8 <malloc+0x1de>
+     a7e:	96e48493          	addi	s1,s1,-1682 # 13e8 <malloc+0x1de>
      a82:	4589                	li	a1,2
      a84:	8526                	mv	a0,s1
      a86:	00000097          	auipc	ra,0x0
@@ -1376,16 +1376,16 @@
      a9c:	358080e7          	jalr	856(ra) # df0 <close>
   while(getcmd(buf, sizeof(buf)) >= 0){
      aa0:	00001497          	auipc	s1,0x1
-     aa4:	a1048493          	addi	s1,s1,-1520 # 14b0 <buf.0>
+     aa4:	a2048493          	addi	s1,s1,-1504 # 14c0 <buf.0>
     if(buf[0] == 'c' && buf[1] == 'd' && buf[2] == ' '){
      aa8:	06300913          	li	s2,99
      aac:	02000993          	li	s3,32
       if(chdir(buf+3) < 0)
      ab0:	00001a17          	auipc	s4,0x1
-     ab4:	a03a0a13          	addi	s4,s4,-1533 # 14b3 <buf.0+0x3>
+     ab4:	a13a0a13          	addi	s4,s4,-1517 # 14c3 <buf.0+0x3>
         fprintf(2, "cannot cd %s\n", buf+3);
      ab8:	00001a97          	auipc	s5,0x1
-     abc:	928a8a93          	addi	s5,s5,-1752 # 13e0 <malloc+0x1e6>
+     abc:	938a8a93          	addi	s5,s5,-1736 # 13f0 <malloc+0x1e6>
      ac0:	a819                	j	ad6 <main+0x6e>
     if(fork1() == 0)
      ac2:	fffff097          	auipc	ra,0xfffff
@@ -1428,11 +1428,11 @@
      b2c:	85d6                	mv	a1,s5
      b2e:	4509                	li	a0,2
      b30:	00000097          	auipc	ra,0x0
-     b34:	5e4080e7          	jalr	1508(ra) # 1114 <fprintf>
+     b34:	5f4080e7          	jalr	1524(ra) # 1124 <fprintf>
      b38:	bf79                	j	ad6 <main+0x6e>
       runcmd(parsecmd(buf));
      b3a:	00001517          	auipc	a0,0x1
-     b3e:	97650513          	addi	a0,a0,-1674 # 14b0 <buf.0>
+     b3e:	98650513          	addi	a0,a0,-1658 # 14c0 <buf.0>
      b42:	00000097          	auipc	ra,0x0
      b46:	e9e080e7          	jalr	-354(ra) # 9e0 <parsecmd>
      b4a:	fffff097          	auipc	ra,0xfffff
@@ -2073,632 +2073,652 @@
  ret
      e66:	8082                	ret
 
-0000000000000e68 <putc>:
+0000000000000e68 <trace>:
+.global trace
+trace:
+ li a7, SYS_trace
+     e68:	48d9                	li	a7,22
+ ecall
+     e6a:	00000073          	ecall
+ ret
+     e6e:	8082                	ret
+
+0000000000000e70 <sysinfo>:
+.global sysinfo
+sysinfo:
+ li a7, SYS_sysinfo
+     e70:	48dd                	li	a7,23
+ ecall
+     e72:	00000073          	ecall
+ ret
+     e76:	8082                	ret
+
+0000000000000e78 <putc>:
 
 static char digits[] = "0123456789ABCDEF";
 
 static void
 putc(int fd, char c)
 {
-     e68:	1101                	addi	sp,sp,-32
-     e6a:	ec06                	sd	ra,24(sp)
-     e6c:	e822                	sd	s0,16(sp)
-     e6e:	1000                	addi	s0,sp,32
-     e70:	feb407a3          	sb	a1,-17(s0)
+     e78:	1101                	addi	sp,sp,-32
+     e7a:	ec06                	sd	ra,24(sp)
+     e7c:	e822                	sd	s0,16(sp)
+     e7e:	1000                	addi	s0,sp,32
+     e80:	feb407a3          	sb	a1,-17(s0)
   write(fd, &c, 1);
-     e74:	4605                	li	a2,1
-     e76:	fef40593          	addi	a1,s0,-17
-     e7a:	00000097          	auipc	ra,0x0
-     e7e:	f6e080e7          	jalr	-146(ra) # de8 <write>
-}
-     e82:	60e2                	ld	ra,24(sp)
-     e84:	6442                	ld	s0,16(sp)
-     e86:	6105                	addi	sp,sp,32
-     e88:	8082                	ret
+     e84:	4605                	li	a2,1
+     e86:	fef40593          	addi	a1,s0,-17
+     e8a:	00000097          	auipc	ra,0x0
+     e8e:	f5e080e7          	jalr	-162(ra) # de8 <write>
+}
+     e92:	60e2                	ld	ra,24(sp)
+     e94:	6442                	ld	s0,16(sp)
+     e96:	6105                	addi	sp,sp,32
+     e98:	8082                	ret
 
-0000000000000e8a <printint>:
+0000000000000e9a <printint>:
 
 static void
 printint(int fd, int xx, int base, int sgn)
 {
-     e8a:	7139                	addi	sp,sp,-64
-     e8c:	fc06                	sd	ra,56(sp)
-     e8e:	f822                	sd	s0,48(sp)
-     e90:	f426                	sd	s1,40(sp)
-     e92:	f04a                	sd	s2,32(sp)
-     e94:	ec4e                	sd	s3,24(sp)
-     e96:	0080                	addi	s0,sp,64
-     e98:	84aa                	mv	s1,a0
+     e9a:	7139                	addi	sp,sp,-64
+     e9c:	fc06                	sd	ra,56(sp)
+     e9e:	f822                	sd	s0,48(sp)
+     ea0:	f426                	sd	s1,40(sp)
+     ea2:	f04a                	sd	s2,32(sp)
+     ea4:	ec4e                	sd	s3,24(sp)
+     ea6:	0080                	addi	s0,sp,64
+     ea8:	84aa                	mv	s1,a0
   char buf[16];
   int i, neg;
   uint x;
 
   neg = 0;
   if(sgn && xx < 0){
-     e9a:	c299                	beqz	a3,ea0 <printint+0x16>
-     e9c:	0805c963          	bltz	a1,f2e <printint+0xa4>
+     eaa:	c299                	beqz	a3,eb0 <printint+0x16>
+     eac:	0805c963          	bltz	a1,f3e <printint+0xa4>
     neg = 1;
     x = -xx;
   } else {
     x = xx;
-     ea0:	2581                	sext.w	a1,a1
+     eb0:	2581                	sext.w	a1,a1
   neg = 0;
-     ea2:	4881                	li	a7,0
-     ea4:	fc040693          	addi	a3,s0,-64
+     eb2:	4881                	li	a7,0
+     eb4:	fc040693          	addi	a3,s0,-64
   }
 
   i = 0;
-     ea8:	4701                	li	a4,0
+     eb8:	4701                	li	a4,0
   do{
     buf[i++] = digits[x % base];
-     eaa:	2601                	sext.w	a2,a2
-     eac:	00000517          	auipc	a0,0x0
-     eb0:	5d450513          	addi	a0,a0,1492 # 1480 <digits>
-     eb4:	883a                	mv	a6,a4
-     eb6:	2705                	addiw	a4,a4,1
-     eb8:	02c5f7bb          	remuw	a5,a1,a2
-     ebc:	1782                	slli	a5,a5,0x20
-     ebe:	9381                	srli	a5,a5,0x20
-     ec0:	97aa                	add	a5,a5,a0
-     ec2:	0007c783          	lbu	a5,0(a5)
-     ec6:	00f68023          	sb	a5,0(a3)
+     eba:	2601                	sext.w	a2,a2
+     ebc:	00000517          	auipc	a0,0x0
+     ec0:	5d450513          	addi	a0,a0,1492 # 1490 <digits>
+     ec4:	883a                	mv	a6,a4
+     ec6:	2705                	addiw	a4,a4,1
+     ec8:	02c5f7bb          	remuw	a5,a1,a2
+     ecc:	1782                	slli	a5,a5,0x20
+     ece:	9381                	srli	a5,a5,0x20
+     ed0:	97aa                	add	a5,a5,a0
+     ed2:	0007c783          	lbu	a5,0(a5)
+     ed6:	00f68023          	sb	a5,0(a3)
   }while((x /= base) != 0);
-     eca:	0005879b          	sext.w	a5,a1
-     ece:	02c5d5bb          	divuw	a1,a1,a2
-     ed2:	0685                	addi	a3,a3,1
-     ed4:	fec7f0e3          	bgeu	a5,a2,eb4 <printint+0x2a>
+     eda:	0005879b          	sext.w	a5,a1
+     ede:	02c5d5bb          	divuw	a1,a1,a2
+     ee2:	0685                	addi	a3,a3,1
+     ee4:	fec7f0e3          	bgeu	a5,a2,ec4 <printint+0x2a>
   if(neg)
-     ed8:	00088c63          	beqz	a7,ef0 <printint+0x66>
+     ee8:	00088c63          	beqz	a7,f00 <printint+0x66>
     buf[i++] = '-';
-     edc:	fd070793          	addi	a5,a4,-48
-     ee0:	00878733          	add	a4,a5,s0
-     ee4:	02d00793          	li	a5,45
-     ee8:	fef70823          	sb	a5,-16(a4)
-     eec:	0028071b          	addiw	a4,a6,2
+     eec:	fd070793          	addi	a5,a4,-48
+     ef0:	00878733          	add	a4,a5,s0
+     ef4:	02d00793          	li	a5,45
+     ef8:	fef70823          	sb	a5,-16(a4)
+     efc:	0028071b          	addiw	a4,a6,2
 
   while(--i >= 0)
-     ef0:	02e05863          	blez	a4,f20 <printint+0x96>
-     ef4:	fc040793          	addi	a5,s0,-64
-     ef8:	00e78933          	add	s2,a5,a4
-     efc:	fff78993          	addi	s3,a5,-1
-     f00:	99ba                	add	s3,s3,a4
-     f02:	377d                	addiw	a4,a4,-1
-     f04:	1702                	slli	a4,a4,0x20
-     f06:	9301                	srli	a4,a4,0x20
-     f08:	40e989b3          	sub	s3,s3,a4
+     f00:	02e05863          	blez	a4,f30 <printint+0x96>
+     f04:	fc040793          	addi	a5,s0,-64
+     f08:	00e78933          	add	s2,a5,a4
+     f0c:	fff78993          	addi	s3,a5,-1
+     f10:	99ba                	add	s3,s3,a4
+     f12:	377d                	addiw	a4,a4,-1
+     f14:	1702                	slli	a4,a4,0x20
+     f16:	9301                	srli	a4,a4,0x20
+     f18:	40e989b3          	sub	s3,s3,a4
     putc(fd, buf[i]);
-     f0c:	fff94583          	lbu	a1,-1(s2)
-     f10:	8526                	mv	a0,s1
-     f12:	00000097          	auipc	ra,0x0
-     f16:	f56080e7          	jalr	-170(ra) # e68 <putc>
+     f1c:	fff94583          	lbu	a1,-1(s2)
+     f20:	8526                	mv	a0,s1
+     f22:	00000097          	auipc	ra,0x0
+     f26:	f56080e7          	jalr	-170(ra) # e78 <putc>
   while(--i >= 0)
-     f1a:	197d                	addi	s2,s2,-1
-     f1c:	ff3918e3          	bne	s2,s3,f0c <printint+0x82>
+     f2a:	197d                	addi	s2,s2,-1
+     f2c:	ff3918e3          	bne	s2,s3,f1c <printint+0x82>
 }
-     f20:	70e2                	ld	ra,56(sp)
-     f22:	7442                	ld	s0,48(sp)
-     f24:	74a2                	ld	s1,40(sp)
-     f26:	7902                	ld	s2,32(sp)
-     f28:	69e2                	ld	s3,24(sp)
-     f2a:	6121                	addi	sp,sp,64
-     f2c:	8082                	ret
+     f30:	70e2                	ld	ra,56(sp)
+     f32:	7442                	ld	s0,48(sp)
+     f34:	74a2                	ld	s1,40(sp)
+     f36:	7902                	ld	s2,32(sp)
+     f38:	69e2                	ld	s3,24(sp)
+     f3a:	6121                	addi	sp,sp,64
+     f3c:	8082                	ret
     x = -xx;
-     f2e:	40b005bb          	negw	a1,a1
+     f3e:	40b005bb          	negw	a1,a1
     neg = 1;
-     f32:	4885                	li	a7,1
+     f42:	4885                	li	a7,1
     x = -xx;
-     f34:	bf85                	j	ea4 <printint+0x1a>
+     f44:	bf85                	j	eb4 <printint+0x1a>
 
-0000000000000f36 <vprintf>:
+0000000000000f46 <vprintf>:
 }
 
 // Print to the given fd. Only understands %d, %x, %p, %s.
 void
 vprintf(int fd, const char *fmt, va_list ap)
 {
-     f36:	7119                	addi	sp,sp,-128
-     f38:	fc86                	sd	ra,120(sp)
-     f3a:	f8a2                	sd	s0,112(sp)
-     f3c:	f4a6                	sd	s1,104(sp)
-     f3e:	f0ca                	sd	s2,96(sp)
-     f40:	ecce                	sd	s3,88(sp)
-     f42:	e8d2                	sd	s4,80(sp)
-     f44:	e4d6                	sd	s5,72(sp)
-     f46:	e0da                	sd	s6,64(sp)
-     f48:	fc5e                	sd	s7,56(sp)
-     f4a:	f862                	sd	s8,48(sp)
-     f4c:	f466                	sd	s9,40(sp)
-     f4e:	f06a                	sd	s10,32(sp)
-     f50:	ec6e                	sd	s11,24(sp)
-     f52:	0100                	addi	s0,sp,128
+     f46:	7119                	addi	sp,sp,-128
+     f48:	fc86                	sd	ra,120(sp)
+     f4a:	f8a2                	sd	s0,112(sp)
+     f4c:	f4a6                	sd	s1,104(sp)
+     f4e:	f0ca                	sd	s2,96(sp)
+     f50:	ecce                	sd	s3,88(sp)
+     f52:	e8d2                	sd	s4,80(sp)
+     f54:	e4d6                	sd	s5,72(sp)
+     f56:	e0da                	sd	s6,64(sp)
+     f58:	fc5e                	sd	s7,56(sp)
+     f5a:	f862                	sd	s8,48(sp)
+     f5c:	f466                	sd	s9,40(sp)
+     f5e:	f06a                	sd	s10,32(sp)
+     f60:	ec6e                	sd	s11,24(sp)
+     f62:	0100                	addi	s0,sp,128
   char *s;
   int c, i, state;
 
   state = 0;
   for(i = 0; fmt[i]; i++){
-     f54:	0005c903          	lbu	s2,0(a1)
-     f58:	18090f63          	beqz	s2,10f6 <vprintf+0x1c0>
-     f5c:	8aaa                	mv	s5,a0
-     f5e:	8b32                	mv	s6,a2
-     f60:	00158493          	addi	s1,a1,1
+     f64:	0005c903          	lbu	s2,0(a1)
+     f68:	18090f63          	beqz	s2,1106 <vprintf+0x1c0>
+     f6c:	8aaa                	mv	s5,a0
+     f6e:	8b32                	mv	s6,a2
+     f70:	00158493          	addi	s1,a1,1
   state = 0;
-     f64:	4981                	li	s3,0
+     f74:	4981                	li	s3,0
       if(c == '%'){
         state = '%';
       } else {
         putc(fd, c);
       }
     } else if(state == '%'){
-     f66:	02500a13          	li	s4,37
-     f6a:	4c55                	li	s8,21
-     f6c:	00000c97          	auipc	s9,0x0
-     f70:	4bcc8c93          	addi	s9,s9,1212 # 1428 <malloc+0x22e>
+     f76:	02500a13          	li	s4,37
+     f7a:	4c55                	li	s8,21
+     f7c:	00000c97          	auipc	s9,0x0
+     f80:	4bcc8c93          	addi	s9,s9,1212 # 1438 <malloc+0x22e>
         printptr(fd, va_arg(ap, uint64));
       } else if(c == 's'){
         s = va_arg(ap, char*);
         if(s == 0)
           s = "(null)";
         while(*s != 0){
-     f74:	02800d93          	li	s11,40
+     f84:	02800d93          	li	s11,40
   putc(fd, 'x');
-     f78:	4d41                	li	s10,16
+     f88:	4d41                	li	s10,16
     putc(fd, digits[x >> (sizeof(uint64) * 8 - 4)]);
-     f7a:	00000b97          	auipc	s7,0x0
-     f7e:	506b8b93          	addi	s7,s7,1286 # 1480 <digits>
-     f82:	a839                	j	fa0 <vprintf+0x6a>
+     f8a:	00000b97          	auipc	s7,0x0
+     f8e:	506b8b93          	addi	s7,s7,1286 # 1490 <digits>
+     f92:	a839                	j	fb0 <vprintf+0x6a>
         putc(fd, c);
-     f84:	85ca                	mv	a1,s2
-     f86:	8556                	mv	a0,s5
-     f88:	00000097          	auipc	ra,0x0
-     f8c:	ee0080e7          	jalr	-288(ra) # e68 <putc>
-     f90:	a019                	j	f96 <vprintf+0x60>
+     f94:	85ca                	mv	a1,s2
+     f96:	8556                	mv	a0,s5
+     f98:	00000097          	auipc	ra,0x0
+     f9c:	ee0080e7          	jalr	-288(ra) # e78 <putc>
+     fa0:	a019                	j	fa6 <vprintf+0x60>
     } else if(state == '%'){
-     f92:	01498d63          	beq	s3,s4,fac <vprintf+0x76>
+     fa2:	01498d63          	beq	s3,s4,fbc <vprintf+0x76>
   for(i = 0; fmt[i]; i++){
-     f96:	0485                	addi	s1,s1,1
-     f98:	fff4c903          	lbu	s2,-1(s1)
-     f9c:	14090d63          	beqz	s2,10f6 <vprintf+0x1c0>
+     fa6:	0485                	addi	s1,s1,1
+     fa8:	fff4c903          	lbu	s2,-1(s1)
+     fac:	14090d63          	beqz	s2,1106 <vprintf+0x1c0>
     if(state == 0){
-     fa0:	fe0999e3          	bnez	s3,f92 <vprintf+0x5c>
+     fb0:	fe0999e3          	bnez	s3,fa2 <vprintf+0x5c>
       if(c == '%'){
-     fa4:	ff4910e3          	bne	s2,s4,f84 <vprintf+0x4e>
+     fb4:	ff4910e3          	bne	s2,s4,f94 <vprintf+0x4e>
         state = '%';
-     fa8:	89d2                	mv	s3,s4
-     faa:	b7f5                	j	f96 <vprintf+0x60>
+     fb8:	89d2                	mv	s3,s4
+     fba:	b7f5                	j	fa6 <vprintf+0x60>
       if(c == 'd'){
-     fac:	11490c63          	beq	s2,s4,10c4 <vprintf+0x18e>
-     fb0:	f9d9079b          	addiw	a5,s2,-99
-     fb4:	0ff7f793          	zext.b	a5,a5
-     fb8:	10fc6e63          	bltu	s8,a5,10d4 <vprintf+0x19e>
-     fbc:	f9d9079b          	addiw	a5,s2,-99
-     fc0:	0ff7f713          	zext.b	a4,a5
-     fc4:	10ec6863          	bltu	s8,a4,10d4 <vprintf+0x19e>
-     fc8:	00271793          	slli	a5,a4,0x2
-     fcc:	97e6                	add	a5,a5,s9
-     fce:	439c                	lw	a5,0(a5)
-     fd0:	97e6                	add	a5,a5,s9
-     fd2:	8782                	jr	a5
+     fbc:	11490c63          	beq	s2,s4,10d4 <vprintf+0x18e>
+     fc0:	f9d9079b          	addiw	a5,s2,-99
+     fc4:	0ff7f793          	zext.b	a5,a5
+     fc8:	10fc6e63          	bltu	s8,a5,10e4 <vprintf+0x19e>
+     fcc:	f9d9079b          	addiw	a5,s2,-99
+     fd0:	0ff7f713          	zext.b	a4,a5
+     fd4:	10ec6863          	bltu	s8,a4,10e4 <vprintf+0x19e>
+     fd8:	00271793          	slli	a5,a4,0x2
+     fdc:	97e6                	add	a5,a5,s9
+     fde:	439c                	lw	a5,0(a5)
+     fe0:	97e6                	add	a5,a5,s9
+     fe2:	8782                	jr	a5
         printint(fd, va_arg(ap, int), 10, 1);
-     fd4:	008b0913          	addi	s2,s6,8
-     fd8:	4685                	li	a3,1
-     fda:	4629                	li	a2,10
-     fdc:	000b2583          	lw	a1,0(s6)
-     fe0:	8556                	mv	a0,s5
-     fe2:	00000097          	auipc	ra,0x0
-     fe6:	ea8080e7          	jalr	-344(ra) # e8a <printint>
-     fea:	8b4a                	mv	s6,s2
+     fe4:	008b0913          	addi	s2,s6,8
+     fe8:	4685                	li	a3,1
+     fea:	4629                	li	a2,10
+     fec:	000b2583          	lw	a1,0(s6)
+     ff0:	8556                	mv	a0,s5
+     ff2:	00000097          	auipc	ra,0x0
+     ff6:	ea8080e7          	jalr	-344(ra) # e9a <printint>
+     ffa:	8b4a                	mv	s6,s2
       } else {
         // Unknown % sequence.  Print it to draw attention.
         putc(fd, '%');
         putc(fd, c);
       }
       state = 0;
-     fec:	4981                	li	s3,0
-     fee:	b765                	j	f96 <vprintf+0x60>
+     ffc:	4981                	li	s3,0
+     ffe:	b765                	j	fa6 <vprintf+0x60>
         printint(fd, va_arg(ap, uint64), 10, 0);
-     ff0:	008b0913          	addi	s2,s6,8
-     ff4:	4681                	li	a3,0
-     ff6:	4629                	li	a2,10
-     ff8:	000b2583          	lw	a1,0(s6)
-     ffc:	8556                	mv	a0,s5
-     ffe:	00000097          	auipc	ra,0x0
-    1002:	e8c080e7          	jalr	-372(ra) # e8a <printint>
-    1006:	8b4a                	mv	s6,s2
+    1000:	008b0913          	addi	s2,s6,8
+    1004:	4681                	li	a3,0
+    1006:	4629                	li	a2,10
+    1008:	000b2583          	lw	a1,0(s6)
+    100c:	8556                	mv	a0,s5
+    100e:	00000097          	auipc	ra,0x0
+    1012:	e8c080e7          	jalr	-372(ra) # e9a <printint>
+    1016:	8b4a                	mv	s6,s2
       state = 0;
-    1008:	4981                	li	s3,0
-    100a:	b771                	j	f96 <vprintf+0x60>
+    1018:	4981                	li	s3,0
+    101a:	b771                	j	fa6 <vprintf+0x60>
         printint(fd, va_arg(ap, int), 16, 0);
-    100c:	008b0913          	addi	s2,s6,8
-    1010:	4681                	li	a3,0
-    1012:	866a                	mv	a2,s10
-    1014:	000b2583          	lw	a1,0(s6)
-    1018:	8556                	mv	a0,s5
-    101a:	00000097          	auipc	ra,0x0
-    101e:	e70080e7          	jalr	-400(ra) # e8a <printint>
-    1022:	8b4a                	mv	s6,s2
+    101c:	008b0913          	addi	s2,s6,8
+    1020:	4681                	li	a3,0
+    1022:	866a                	mv	a2,s10
+    1024:	000b2583          	lw	a1,0(s6)
+    1028:	8556                	mv	a0,s5
+    102a:	00000097          	auipc	ra,0x0
+    102e:	e70080e7          	jalr	-400(ra) # e9a <printint>
+    1032:	8b4a                	mv	s6,s2
       state = 0;
-    1024:	4981                	li	s3,0
-    1026:	bf85                	j	f96 <vprintf+0x60>
+    1034:	4981                	li	s3,0
+    1036:	bf85                	j	fa6 <vprintf+0x60>
         printptr(fd, va_arg(ap, uint64));
-    1028:	008b0793          	addi	a5,s6,8
-    102c:	f8f43423          	sd	a5,-120(s0)
-    1030:	000b3983          	ld	s3,0(s6)
+    1038:	008b0793          	addi	a5,s6,8
+    103c:	f8f43423          	sd	a5,-120(s0)
+    1040:	000b3983          	ld	s3,0(s6)
   putc(fd, '0');
-    1034:	03000593          	li	a1,48
-    1038:	8556                	mv	a0,s5
-    103a:	00000097          	auipc	ra,0x0
-    103e:	e2e080e7          	jalr	-466(ra) # e68 <putc>
+    1044:	03000593          	li	a1,48
+    1048:	8556                	mv	a0,s5
+    104a:	00000097          	auipc	ra,0x0
+    104e:	e2e080e7          	jalr	-466(ra) # e78 <putc>
   putc(fd, 'x');
-    1042:	07800593          	li	a1,120
-    1046:	8556                	mv	a0,s5
-    1048:	00000097          	auipc	ra,0x0
-    104c:	e20080e7          	jalr	-480(ra) # e68 <putc>
-    1050:	896a                	mv	s2,s10
+    1052:	07800593          	li	a1,120
+    1056:	8556                	mv	a0,s5
+    1058:	00000097          	auipc	ra,0x0
+    105c:	e20080e7          	jalr	-480(ra) # e78 <putc>
+    1060:	896a                	mv	s2,s10
     putc(fd, digits[x >> (sizeof(uint64) * 8 - 4)]);
-    1052:	03c9d793          	srli	a5,s3,0x3c
-    1056:	97de                	add	a5,a5,s7
-    1058:	0007c583          	lbu	a1,0(a5)
-    105c:	8556                	mv	a0,s5
-    105e:	00000097          	auipc	ra,0x0
-    1062:	e0a080e7          	jalr	-502(ra) # e68 <putc>
+    1062:	03c9d793          	srli	a5,s3,0x3c
+    1066:	97de                	add	a5,a5,s7
+    1068:	0007c583          	lbu	a1,0(a5)
+    106c:	8556                	mv	a0,s5
+    106e:	00000097          	auipc	ra,0x0
+    1072:	e0a080e7          	jalr	-502(ra) # e78 <putc>
   for (i = 0; i < (sizeof(uint64) * 2); i++, x <<= 4)
-    1066:	0992                	slli	s3,s3,0x4
-    1068:	397d                	addiw	s2,s2,-1
-    106a:	fe0914e3          	bnez	s2,1052 <vprintf+0x11c>
+    1076:	0992                	slli	s3,s3,0x4
+    1078:	397d                	addiw	s2,s2,-1
+    107a:	fe0914e3          	bnez	s2,1062 <vprintf+0x11c>
         printptr(fd, va_arg(ap, uint64));
-    106e:	f8843b03          	ld	s6,-120(s0)
+    107e:	f8843b03          	ld	s6,-120(s0)
       state = 0;
-    1072:	4981                	li	s3,0
-    1074:	b70d                	j	f96 <vprintf+0x60>
+    1082:	4981                	li	s3,0
+    1084:	b70d                	j	fa6 <vprintf+0x60>
         s = va_arg(ap, char*);
-    1076:	008b0913          	addi	s2,s6,8
-    107a:	000b3983          	ld	s3,0(s6)
+    1086:	008b0913          	addi	s2,s6,8
+    108a:	000b3983          	ld	s3,0(s6)
         if(s == 0)
-    107e:	02098163          	beqz	s3,10a0 <vprintf+0x16a>
+    108e:	02098163          	beqz	s3,10b0 <vprintf+0x16a>
         while(*s != 0){
-    1082:	0009c583          	lbu	a1,0(s3)
-    1086:	c5ad                	beqz	a1,10f0 <vprintf+0x1ba>
+    1092:	0009c583          	lbu	a1,0(s3)
+    1096:	c5ad                	beqz	a1,1100 <vprintf+0x1ba>
           putc(fd, *s);
-    1088:	8556                	mv	a0,s5
-    108a:	00000097          	auipc	ra,0x0
-    108e:	dde080e7          	jalr	-546(ra) # e68 <putc>
+    1098:	8556                	mv	a0,s5
+    109a:	00000097          	auipc	ra,0x0
+    109e:	dde080e7          	jalr	-546(ra) # e78 <putc>
           s++;
-    1092:	0985                	addi	s3,s3,1
+    10a2:	0985                	addi	s3,s3,1
         while(*s != 0){
-    1094:	0009c583          	lbu	a1,0(s3)
-    1098:	f9e5                	bnez	a1,1088 <vprintf+0x152>
+    10a4:	0009c583          	lbu	a1,0(s3)
+    10a8:	f9e5                	bnez	a1,1098 <vprintf+0x152>
         s = va_arg(ap, char*);
-    109a:	8b4a                	mv	s6,s2
+    10aa:	8b4a                	mv	s6,s2
       state = 0;
-    109c:	4981                	li	s3,0
-    109e:	bde5                	j	f96 <vprintf+0x60>
+    10ac:	4981                	li	s3,0
+    10ae:	bde5                	j	fa6 <vprintf+0x60>
           s = "(null)";
-    10a0:	00000997          	auipc	s3,0x0
-    10a4:	38098993          	addi	s3,s3,896 # 1420 <malloc+0x226>
+    10b0:	00000997          	auipc	s3,0x0
+    10b4:	38098993          	addi	s3,s3,896 # 1430 <malloc+0x226>
         while(*s != 0){
-    10a8:	85ee                	mv	a1,s11
-    10aa:	bff9                	j	1088 <vprintf+0x152>
+    10b8:	85ee                	mv	a1,s11
+    10ba:	bff9                	j	1098 <vprintf+0x152>
         putc(fd, va_arg(ap, uint));
-    10ac:	008b0913          	addi	s2,s6,8
-    10b0:	000b4583          	lbu	a1,0(s6)
-    10b4:	8556                	mv	a0,s5
-    10b6:	00000097          	auipc	ra,0x0
-    10ba:	db2080e7          	jalr	-590(ra) # e68 <putc>
-    10be:	8b4a                	mv	s6,s2
-      state = 0;
-    10c0:	4981                	li	s3,0
-    10c2:	bdd1                	j	f96 <vprintf+0x60>
-        putc(fd, c);
-    10c4:	85d2                	mv	a1,s4
-    10c6:	8556                	mv	a0,s5
-    10c8:	00000097          	auipc	ra,0x0
-    10cc:	da0080e7          	jalr	-608(ra) # e68 <putc>
+    10bc:	008b0913          	addi	s2,s6,8
+    10c0:	000b4583          	lbu	a1,0(s6)
+    10c4:	8556                	mv	a0,s5
+    10c6:	00000097          	auipc	ra,0x0
+    10ca:	db2080e7          	jalr	-590(ra) # e78 <putc>
+    10ce:	8b4a                	mv	s6,s2
       state = 0;
     10d0:	4981                	li	s3,0
-    10d2:	b5d1                	j	f96 <vprintf+0x60>
-        putc(fd, '%');
+    10d2:	bdd1                	j	fa6 <vprintf+0x60>
+        putc(fd, c);
     10d4:	85d2                	mv	a1,s4
     10d6:	8556                	mv	a0,s5
     10d8:	00000097          	auipc	ra,0x0
-    10dc:	d90080e7          	jalr	-624(ra) # e68 <putc>
+    10dc:	da0080e7          	jalr	-608(ra) # e78 <putc>
+      state = 0;
+    10e0:	4981                	li	s3,0
+    10e2:	b5d1                	j	fa6 <vprintf+0x60>
+        putc(fd, '%');
+    10e4:	85d2                	mv	a1,s4
+    10e6:	8556                	mv	a0,s5
+    10e8:	00000097          	auipc	ra,0x0
+    10ec:	d90080e7          	jalr	-624(ra) # e78 <putc>
         putc(fd, c);
-    10e0:	85ca                	mv	a1,s2
-    10e2:	8556                	mv	a0,s5
-    10e4:	00000097          	auipc	ra,0x0
-    10e8:	d84080e7          	jalr	-636(ra) # e68 <putc>
+    10f0:	85ca                	mv	a1,s2
+    10f2:	8556                	mv	a0,s5
+    10f4:	00000097          	auipc	ra,0x0
+    10f8:	d84080e7          	jalr	-636(ra) # e78 <putc>
       state = 0;
-    10ec:	4981                	li	s3,0
-    10ee:	b565                	j	f96 <vprintf+0x60>
+    10fc:	4981                	li	s3,0
+    10fe:	b565                	j	fa6 <vprintf+0x60>
         s = va_arg(ap, char*);
-    10f0:	8b4a                	mv	s6,s2
+    1100:	8b4a                	mv	s6,s2
       state = 0;
-    10f2:	4981                	li	s3,0
-    10f4:	b54d                	j	f96 <vprintf+0x60>
+    1102:	4981                	li	s3,0
+    1104:	b54d                	j	fa6 <vprintf+0x60>
     }
   }
 }
-    10f6:	70e6                	ld	ra,120(sp)
-    10f8:	7446                	ld	s0,112(sp)
-    10fa:	74a6                	ld	s1,104(sp)
-    10fc:	7906                	ld	s2,96(sp)
-    10fe:	69e6                	ld	s3,88(sp)
-    1100:	6a46                	ld	s4,80(sp)
-    1102:	6aa6                	ld	s5,72(sp)
-    1104:	6b06                	ld	s6,64(sp)
-    1106:	7be2                	ld	s7,56(sp)
-    1108:	7c42                	ld	s8,48(sp)
-    110a:	7ca2                	ld	s9,40(sp)
-    110c:	7d02                	ld	s10,32(sp)
-    110e:	6de2                	ld	s11,24(sp)
-    1110:	6109                	addi	sp,sp,128
-    1112:	8082                	ret
+    1106:	70e6                	ld	ra,120(sp)
+    1108:	7446                	ld	s0,112(sp)
+    110a:	74a6                	ld	s1,104(sp)
+    110c:	7906                	ld	s2,96(sp)
+    110e:	69e6                	ld	s3,88(sp)
+    1110:	6a46                	ld	s4,80(sp)
+    1112:	6aa6                	ld	s5,72(sp)
+    1114:	6b06                	ld	s6,64(sp)
+    1116:	7be2                	ld	s7,56(sp)
+    1118:	7c42                	ld	s8,48(sp)
+    111a:	7ca2                	ld	s9,40(sp)
+    111c:	7d02                	ld	s10,32(sp)
+    111e:	6de2                	ld	s11,24(sp)
+    1120:	6109                	addi	sp,sp,128
+    1122:	8082                	ret
 
-0000000000001114 <fprintf>:
+0000000000001124 <fprintf>:
 
 void
 fprintf(int fd, const char *fmt, ...)
 {
-    1114:	715d                	addi	sp,sp,-80
-    1116:	ec06                	sd	ra,24(sp)
-    1118:	e822                	sd	s0,16(sp)
-    111a:	1000                	addi	s0,sp,32
-    111c:	e010                	sd	a2,0(s0)
-    111e:	e414                	sd	a3,8(s0)
-    1120:	e818                	sd	a4,16(s0)
-    1122:	ec1c                	sd	a5,24(s0)
-    1124:	03043023          	sd	a6,32(s0)
-    1128:	03143423          	sd	a7,40(s0)
+    1124:	715d                	addi	sp,sp,-80
+    1126:	ec06                	sd	ra,24(sp)
+    1128:	e822                	sd	s0,16(sp)
+    112a:	1000                	addi	s0,sp,32
+    112c:	e010                	sd	a2,0(s0)
+    112e:	e414                	sd	a3,8(s0)
+    1130:	e818                	sd	a4,16(s0)
+    1132:	ec1c                	sd	a5,24(s0)
+    1134:	03043023          	sd	a6,32(s0)
+    1138:	03143423          	sd	a7,40(s0)
   va_list ap;
 
   va_start(ap, fmt);
-    112c:	fe843423          	sd	s0,-24(s0)
+    113c:	fe843423          	sd	s0,-24(s0)
   vprintf(fd, fmt, ap);
-    1130:	8622                	mv	a2,s0
-    1132:	00000097          	auipc	ra,0x0
-    1136:	e04080e7          	jalr	-508(ra) # f36 <vprintf>
-}
-    113a:	60e2                	ld	ra,24(sp)
-    113c:	6442                	ld	s0,16(sp)
-    113e:	6161                	addi	sp,sp,80
-    1140:	8082                	ret
+    1140:	8622                	mv	a2,s0
+    1142:	00000097          	auipc	ra,0x0
+    1146:	e04080e7          	jalr	-508(ra) # f46 <vprintf>
+}
+    114a:	60e2                	ld	ra,24(sp)
+    114c:	6442                	ld	s0,16(sp)
+    114e:	6161                	addi	sp,sp,80
+    1150:	8082                	ret
 
-0000000000001142 <printf>:
+0000000000001152 <printf>:
 
 void
 printf(const char *fmt, ...)
 {
-    1142:	711d                	addi	sp,sp,-96
-    1144:	ec06                	sd	ra,24(sp)
-    1146:	e822                	sd	s0,16(sp)
-    1148:	1000                	addi	s0,sp,32
-    114a:	e40c                	sd	a1,8(s0)
-    114c:	e810                	sd	a2,16(s0)
-    114e:	ec14                	sd	a3,24(s0)
-    1150:	f018                	sd	a4,32(s0)
-    1152:	f41c                	sd	a5,40(s0)
-    1154:	03043823          	sd	a6,48(s0)
-    1158:	03143c23          	sd	a7,56(s0)
+    1152:	711d                	addi	sp,sp,-96
+    1154:	ec06                	sd	ra,24(sp)
+    1156:	e822                	sd	s0,16(sp)
+    1158:	1000                	addi	s0,sp,32
+    115a:	e40c                	sd	a1,8(s0)
+    115c:	e810                	sd	a2,16(s0)
+    115e:	ec14                	sd	a3,24(s0)
+    1160:	f018                	sd	a4,32(s0)
+    1162:	f41c                	sd	a5,40(s0)
+    1164:	03043823          	sd	a6,48(s0)
+    1168:	03143c23          	sd	a7,56(s0)
   va_list ap;
 
   va_start(ap, fmt);
-    115c:	00840613          	addi	a2,s0,8
-    1160:	fec43423          	sd	a2,-24(s0)
+    116c:	00840613          	addi	a2,s0,8
+    1170:	fec43423          	sd	a2,-24(s0)
   vprintf(1, fmt, ap);
-    1164:	85aa                	mv	a1,a0
-    1166:	4505                	li	a0,1
-    1168:	00000097          	auipc	ra,0x0
-    116c:	dce080e7          	jalr	-562(ra) # f36 <vprintf>
-}
-    1170:	60e2                	ld	ra,24(sp)
-    1172:	6442                	ld	s0,16(sp)
-    1174:	6125                	addi	sp,sp,96
-    1176:	8082                	ret
+    1174:	85aa                	mv	a1,a0
+    1176:	4505                	li	a0,1
+    1178:	00000097          	auipc	ra,0x0
+    117c:	dce080e7          	jalr	-562(ra) # f46 <vprintf>
+}
+    1180:	60e2                	ld	ra,24(sp)
+    1182:	6442                	ld	s0,16(sp)
+    1184:	6125                	addi	sp,sp,96
+    1186:	8082                	ret
 
-0000000000001178 <free>:
+0000000000001188 <free>:
 static Header base;
 static Header *freep;
 
 void
 free(void *ap)
 {
-    1178:	1141                	addi	sp,sp,-16
-    117a:	e422                	sd	s0,8(sp)
-    117c:	0800                	addi	s0,sp,16
+    1188:	1141                	addi	sp,sp,-16
+    118a:	e422                	sd	s0,8(sp)
+    118c:	0800                	addi	s0,sp,16
   Header *bp, *p;
 
   bp = (Header*)ap - 1;
-    117e:	ff050693          	addi	a3,a0,-16
+    118e:	ff050693          	addi	a3,a0,-16
   for(p = freep; !(bp > p && bp < p->s.ptr); p = p->s.ptr)
-    1182:	00000797          	auipc	a5,0x0
-    1186:	3267b783          	ld	a5,806(a5) # 14a8 <freep>
-    118a:	a02d                	j	11b4 <free+0x3c>
+    1192:	00000797          	auipc	a5,0x0
+    1196:	3267b783          	ld	a5,806(a5) # 14b8 <freep>
+    119a:	a02d                	j	11c4 <free+0x3c>
     if(p >= p->s.ptr && (bp > p || bp < p->s.ptr))
       break;
   if(bp + bp->s.size == p->s.ptr){
     bp->s.size += p->s.ptr->s.size;
-    118c:	4618                	lw	a4,8(a2)
-    118e:	9f2d                	addw	a4,a4,a1
-    1190:	fee52c23          	sw	a4,-8(a0)
+    119c:	4618                	lw	a4,8(a2)
+    119e:	9f2d                	addw	a4,a4,a1
+    11a0:	fee52c23          	sw	a4,-8(a0)
     bp->s.ptr = p->s.ptr->s.ptr;
-    1194:	6398                	ld	a4,0(a5)
-    1196:	6310                	ld	a2,0(a4)
-    1198:	a83d                	j	11d6 <free+0x5e>
+    11a4:	6398                	ld	a4,0(a5)
+    11a6:	6310                	ld	a2,0(a4)
+    11a8:	a83d                	j	11e6 <free+0x5e>
   } else
     bp->s.ptr = p->s.ptr;
   if(p + p->s.size == bp){
     p->s.size += bp->s.size;
-    119a:	ff852703          	lw	a4,-8(a0)
-    119e:	9f31                	addw	a4,a4,a2
-    11a0:	c798                	sw	a4,8(a5)
+    11aa:	ff852703          	lw	a4,-8(a0)
+    11ae:	9f31                	addw	a4,a4,a2
+    11b0:	c798                	sw	a4,8(a5)
     p->s.ptr = bp->s.ptr;
-    11a2:	ff053683          	ld	a3,-16(a0)
-    11a6:	a091                	j	11ea <free+0x72>
+    11b2:	ff053683          	ld	a3,-16(a0)
+    11b6:	a091                	j	11fa <free+0x72>
     if(p >= p->s.ptr && (bp > p || bp < p->s.ptr))
-    11a8:	6398                	ld	a4,0(a5)
-    11aa:	00e7e463          	bltu	a5,a4,11b2 <free+0x3a>
-    11ae:	00e6ea63          	bltu	a3,a4,11c2 <free+0x4a>
+    11b8:	6398                	ld	a4,0(a5)
+    11ba:	00e7e463          	bltu	a5,a4,11c2 <free+0x3a>
+    11be:	00e6ea63          	bltu	a3,a4,11d2 <free+0x4a>
 {
-    11b2:	87ba                	mv	a5,a4
+    11c2:	87ba                	mv	a5,a4
   for(p = freep; !(bp > p && bp < p->s.ptr); p = p->s.ptr)
-    11b4:	fed7fae3          	bgeu	a5,a3,11a8 <free+0x30>
-    11b8:	6398                	ld	a4,0(a5)
-    11ba:	00e6e463          	bltu	a3,a4,11c2 <free+0x4a>
+    11c4:	fed7fae3          	bgeu	a5,a3,11b8 <free+0x30>
+    11c8:	6398                	ld	a4,0(a5)
+    11ca:	00e6e463          	bltu	a3,a4,11d2 <free+0x4a>
     if(p >= p->s.ptr && (bp > p || bp < p->s.ptr))
-    11be:	fee7eae3          	bltu	a5,a4,11b2 <free+0x3a>
+    11ce:	fee7eae3          	bltu	a5,a4,11c2 <free+0x3a>
   if(bp + bp->s.size == p->s.ptr){
-    11c2:	ff852583          	lw	a1,-8(a0)
-    11c6:	6390                	ld	a2,0(a5)
-    11c8:	02059813          	slli	a6,a1,0x20
-    11cc:	01c85713          	srli	a4,a6,0x1c
-    11d0:	9736                	add	a4,a4,a3
-    11d2:	fae60de3          	beq	a2,a4,118c <free+0x14>
+    11d2:	ff852583          	lw	a1,-8(a0)
+    11d6:	6390                	ld	a2,0(a5)
+    11d8:	02059813          	slli	a6,a1,0x20
+    11dc:	01c85713          	srli	a4,a6,0x1c
+    11e0:	9736                	add	a4,a4,a3
+    11e2:	fae60de3          	beq	a2,a4,119c <free+0x14>
     bp->s.ptr = p->s.ptr->s.ptr;
-    11d6:	fec53823          	sd	a2,-16(a0)
+    11e6:	fec53823          	sd	a2,-16(a0)
   if(p + p->s.size == bp){
-    11da:	4790                	lw	a2,8(a5)
-    11dc:	02061593          	slli	a1,a2,0x20
-    11e0:	01c5d713          	srli	a4,a1,0x1c
-    11e4:	973e                	add	a4,a4,a5
-    11e6:	fae68ae3          	beq	a3,a4,119a <free+0x22>
+    11ea:	4790                	lw	a2,8(a5)
+    11ec:	02061593          	slli	a1,a2,0x20
+    11f0:	01c5d713          	srli	a4,a1,0x1c
+    11f4:	973e                	add	a4,a4,a5
+    11f6:	fae68ae3          	beq	a3,a4,11aa <free+0x22>
     p->s.ptr = bp->s.ptr;
-    11ea:	e394                	sd	a3,0(a5)
+    11fa:	e394                	sd	a3,0(a5)
   } else
     p->s.ptr = bp;
   freep = p;
-    11ec:	00000717          	auipc	a4,0x0
-    11f0:	2af73e23          	sd	a5,700(a4) # 14a8 <freep>
+    11fc:	00000717          	auipc	a4,0x0
+    1200:	2af73e23          	sd	a5,700(a4) # 14b8 <freep>
 }
-    11f4:	6422                	ld	s0,8(sp)
-    11f6:	0141                	addi	sp,sp,16
-    11f8:	8082                	ret
+    1204:	6422                	ld	s0,8(sp)
+    1206:	0141                	addi	sp,sp,16
+    1208:	8082                	ret
 
-00000000000011fa <malloc>:
+000000000000120a <malloc>:
   return freep;
 }
 
 void*
 malloc(uint nbytes)
 {
-    11fa:	7139                	addi	sp,sp,-64
-    11fc:	fc06                	sd	ra,56(sp)
-    11fe:	f822                	sd	s0,48(sp)
-    1200:	f426                	sd	s1,40(sp)
-    1202:	f04a                	sd	s2,32(sp)
-    1204:	ec4e                	sd	s3,24(sp)
-    1206:	e852                	sd	s4,16(sp)
-    1208:	e456                	sd	s5,8(sp)
-    120a:	e05a                	sd	s6,0(sp)
-    120c:	0080                	addi	s0,sp,64
+    120a:	7139                	addi	sp,sp,-64
+    120c:	fc06                	sd	ra,56(sp)
+    120e:	f822                	sd	s0,48(sp)
+    1210:	f426                	sd	s1,40(sp)
+    1212:	f04a                	sd	s2,32(sp)
+    1214:	ec4e                	sd	s3,24(sp)
+    1216:	e852                	sd	s4,16(sp)
+    1218:	e456                	sd	s5,8(sp)
+    121a:	e05a                	sd	s6,0(sp)
+    121c:	0080                	addi	s0,sp,64
   Header *p, *prevp;
   uint nunits;
 
   nunits = (nbytes + sizeof(Header) - 1)/sizeof(Header) + 1;
-    120e:	02051493          	slli	s1,a0,0x20
-    1212:	9081                	srli	s1,s1,0x20
-    1214:	04bd                	addi	s1,s1,15
-    1216:	8091                	srli	s1,s1,0x4
-    1218:	0014899b          	addiw	s3,s1,1
-    121c:	0485                	addi	s1,s1,1
+    121e:	02051493          	slli	s1,a0,0x20
+    1222:	9081                	srli	s1,s1,0x20
+    1224:	04bd                	addi	s1,s1,15
+    1226:	8091                	srli	s1,s1,0x4
+    1228:	0014899b          	addiw	s3,s1,1
+    122c:	0485                	addi	s1,s1,1
   if((prevp = freep) == 0){
-    121e:	00000517          	auipc	a0,0x0
-    1222:	28a53503          	ld	a0,650(a0) # 14a8 <freep>
-    1226:	c515                	beqz	a0,1252 <malloc+0x58>
+    122e:	00000517          	auipc	a0,0x0
+    1232:	28a53503          	ld	a0,650(a0) # 14b8 <freep>
+    1236:	c515                	beqz	a0,1262 <malloc+0x58>
     base.s.ptr = freep = prevp = &base;
     base.s.size = 0;
   }
   for(p = prevp->s.ptr; ; prevp = p, p = p->s.ptr){
-    1228:	611c                	ld	a5,0(a0)
+    1238:	611c                	ld	a5,0(a0)
     if(p->s.size >= nunits){
-    122a:	4798                	lw	a4,8(a5)
-    122c:	02977f63          	bgeu	a4,s1,126a <malloc+0x70>
-    1230:	8a4e                	mv	s4,s3
-    1232:	0009871b          	sext.w	a4,s3
-    1236:	6685                	lui	a3,0x1
-    1238:	00d77363          	bgeu	a4,a3,123e <malloc+0x44>
-    123c:	6a05                	lui	s4,0x1
-    123e:	000a0b1b          	sext.w	s6,s4
+    123a:	4798                	lw	a4,8(a5)
+    123c:	02977f63          	bgeu	a4,s1,127a <malloc+0x70>
+    1240:	8a4e                	mv	s4,s3
+    1242:	0009871b          	sext.w	a4,s3
+    1246:	6685                	lui	a3,0x1
+    1248:	00d77363          	bgeu	a4,a3,124e <malloc+0x44>
+    124c:	6a05                	lui	s4,0x1
+    124e:	000a0b1b          	sext.w	s6,s4
   p = sbrk(nu * sizeof(Header));
-    1242:	004a1a1b          	slliw	s4,s4,0x4
+    1252:	004a1a1b          	slliw	s4,s4,0x4
         p->s.size = nunits;
       }
       freep = prevp;
       return (void*)(p + 1);
     }
     if(p == freep)
-    1246:	00000917          	auipc	s2,0x0
-    124a:	26290913          	addi	s2,s2,610 # 14a8 <freep>
+    1256:	00000917          	auipc	s2,0x0
+    125a:	26290913          	addi	s2,s2,610 # 14b8 <freep>
   if(p == (char*)-1)
-    124e:	5afd                	li	s5,-1
-    1250:	a895                	j	12c4 <malloc+0xca>
+    125e:	5afd                	li	s5,-1
+    1260:	a895                	j	12d4 <malloc+0xca>
     base.s.ptr = freep = prevp = &base;
-    1252:	00000797          	auipc	a5,0x0
-    1256:	2c678793          	addi	a5,a5,710 # 1518 <base>
-    125a:	00000717          	auipc	a4,0x0
-    125e:	24f73723          	sd	a5,590(a4) # 14a8 <freep>
-    1262:	e39c                	sd	a5,0(a5)
+    1262:	00000797          	auipc	a5,0x0
+    1266:	2c678793          	addi	a5,a5,710 # 1528 <base>
+    126a:	00000717          	auipc	a4,0x0
+    126e:	24f73723          	sd	a5,590(a4) # 14b8 <freep>
+    1272:	e39c                	sd	a5,0(a5)
     base.s.size = 0;
-    1264:	0007a423          	sw	zero,8(a5)
+    1274:	0007a423          	sw	zero,8(a5)
     if(p->s.size >= nunits){
-    1268:	b7e1                	j	1230 <malloc+0x36>
+    1278:	b7e1                	j	1240 <malloc+0x36>
       if(p->s.size == nunits)
-    126a:	02e48c63          	beq	s1,a4,12a2 <malloc+0xa8>
+    127a:	02e48c63          	beq	s1,a4,12b2 <malloc+0xa8>
         p->s.size -= nunits;
-    126e:	4137073b          	subw	a4,a4,s3
-    1272:	c798                	sw	a4,8(a5)
+    127e:	4137073b          	subw	a4,a4,s3
+    1282:	c798                	sw	a4,8(a5)
         p += p->s.size;
-    1274:	02071693          	slli	a3,a4,0x20
-    1278:	01c6d713          	srli	a4,a3,0x1c
-    127c:	97ba                	add	a5,a5,a4
+    1284:	02071693          	slli	a3,a4,0x20
+    1288:	01c6d713          	srli	a4,a3,0x1c
+    128c:	97ba                	add	a5,a5,a4
         p->s.size = nunits;
-    127e:	0137a423          	sw	s3,8(a5)
+    128e:	0137a423          	sw	s3,8(a5)
       freep = prevp;
-    1282:	00000717          	auipc	a4,0x0
-    1286:	22a73323          	sd	a0,550(a4) # 14a8 <freep>
+    1292:	00000717          	auipc	a4,0x0
+    1296:	22a73323          	sd	a0,550(a4) # 14b8 <freep>
       return (void*)(p + 1);
-    128a:	01078513          	addi	a0,a5,16
+    129a:	01078513          	addi	a0,a5,16
       if((p = morecore(nunits)) == 0)
         return 0;
   }
 }
-    128e:	70e2                	ld	ra,56(sp)
-    1290:	7442                	ld	s0,48(sp)
-    1292:	74a2                	ld	s1,40(sp)
-    1294:	7902                	ld	s2,32(sp)
-    1296:	69e2                	ld	s3,24(sp)
-    1298:	6a42                	ld	s4,16(sp)
-    129a:	6aa2                	ld	s5,8(sp)
-    129c:	6b02                	ld	s6,0(sp)
-    129e:	6121                	addi	sp,sp,64
-    12a0:	8082                	ret
+    129e:	70e2                	ld	ra,56(sp)
+    12a0:	7442                	ld	s0,48(sp)
+    12a2:	74a2                	ld	s1,40(sp)
+    12a4:	7902                	ld	s2,32(sp)
+    12a6:	69e2                	ld	s3,24(sp)
+    12a8:	6a42                	ld	s4,16(sp)
+    12aa:	6aa2                	ld	s5,8(sp)
+    12ac:	6b02                	ld	s6,0(sp)
+    12ae:	6121                	addi	sp,sp,64
+    12b0:	8082                	ret
         prevp->s.ptr = p->s.ptr;
-    12a2:	6398                	ld	a4,0(a5)
-    12a4:	e118                	sd	a4,0(a0)
-    12a6:	bff1                	j	1282 <malloc+0x88>
+    12b2:	6398                	ld	a4,0(a5)
+    12b4:	e118                	sd	a4,0(a0)
+    12b6:	bff1                	j	1292 <malloc+0x88>
   hp->s.size = nu;
-    12a8:	01652423          	sw	s6,8(a0)
+    12b8:	01652423          	sw	s6,8(a0)
   free((void*)(hp + 1));
-    12ac:	0541                	addi	a0,a0,16
-    12ae:	00000097          	auipc	ra,0x0
-    12b2:	eca080e7          	jalr	-310(ra) # 1178 <free>
+    12bc:	0541                	addi	a0,a0,16
+    12be:	00000097          	auipc	ra,0x0
+    12c2:	eca080e7          	jalr	-310(ra) # 1188 <free>
   return freep;
-    12b6:	00093503          	ld	a0,0(s2)
+    12c6:	00093503          	ld	a0,0(s2)
       if((p = morecore(nunits)) == 0)
-    12ba:	d971                	beqz	a0,128e <malloc+0x94>
+    12ca:	d971                	beqz	a0,129e <malloc+0x94>
   for(p = prevp->s.ptr; ; prevp = p, p = p->s.ptr){
-    12bc:	611c                	ld	a5,0(a0)
+    12cc:	611c                	ld	a5,0(a0)
     if(p->s.size >= nunits){
-    12be:	4798                	lw	a4,8(a5)
-    12c0:	fa9775e3          	bgeu	a4,s1,126a <malloc+0x70>
+    12ce:	4798                	lw	a4,8(a5)
+    12d0:	fa9775e3          	bgeu	a4,s1,127a <malloc+0x70>
     if(p == freep)
-    12c4:	00093703          	ld	a4,0(s2)
-    12c8:	853e                	mv	a0,a5
-    12ca:	fef719e3          	bne	a4,a5,12bc <malloc+0xc2>
+    12d4:	00093703          	ld	a4,0(s2)
+    12d8:	853e                	mv	a0,a5
+    12da:	fef719e3          	bne	a4,a5,12cc <malloc+0xc2>
   p = sbrk(nu * sizeof(Header));
-    12ce:	8552                	mv	a0,s4
-    12d0:	00000097          	auipc	ra,0x0
-    12d4:	b80080e7          	jalr	-1152(ra) # e50 <sbrk>
+    12de:	8552                	mv	a0,s4
+    12e0:	00000097          	auipc	ra,0x0
+    12e4:	b70080e7          	jalr	-1168(ra) # e50 <sbrk>
   if(p == (char*)-1)
-    12d8:	fd5518e3          	bne	a0,s5,12a8 <malloc+0xae>
+    12e8:	fd5518e3          	bne	a0,s5,12b8 <malloc+0xae>
         return 0;
-    12dc:	4501                	li	a0,0
-    12de:	bf45                	j	128e <malloc+0x94>
+    12ec:	4501                	li	a0,0
+    12ee:	bf45                	j	129e <malloc+0x94>
Binary files ./user/sh.o and ../xv6-labs-2021/user/sh.o differ
diff -urN ./user/sh.sym ../xv6-labs-2021/user/sh.sym
--- ./user/sh.sym	2021-12-05 17:54:42.000000000 +0800
+++ ../xv6-labs-2021/user/sh.sym	2021-11-26 14:46:16.000000000 +0800
@@ -1,8 +1,8 @@
 0000000000000000 .text
-00000000000012e0 .rodata
-0000000000001498 .sdata
-00000000000014a8 .sbss
-00000000000014b0 .bss
+00000000000012f0 .rodata
+00000000000014a8 .sdata
+00000000000014b8 .sbss
+00000000000014c0 .bss
 0000000000000000 .comment
 0000000000000000 .riscv.attributes
 0000000000000000 .debug_aranges
@@ -15,23 +15,24 @@
 0000000000000000 .debug_loclists
 0000000000000000 .debug_rnglists
 0000000000000000 sh.c
-00000000000014b0 buf.0
+00000000000014c0 buf.0
 0000000000000000 ulib.c
 0000000000000000 printf.c
-0000000000000e68 putc
-0000000000000e8a printint
-0000000000001480 digits
+0000000000000e78 putc
+0000000000000e9a printint
+0000000000001490 digits
 0000000000000000 umalloc.c
-00000000000014a8 freep
-0000000000001518 base
+00000000000014b8 freep
+0000000000001528 base
 0000000000000b5c strcpy
-0000000000001142 printf
-0000000000001c91 __global_pointer$
+0000000000001152 printf
+0000000000001ca1 __global_pointer$
 0000000000000d16 memmove
 0000000000000e10 mknod
 0000000000000276 execcmd
+0000000000000e68 trace
 0000000000000c14 gets
-0000000000001498 __SDATA_BEGIN__
+00000000000014a8 __SDATA_BEGIN__
 0000000000000e48 getpid
 000000000000078e parsepipe
 00000000000009e0 parsecmd
@@ -40,45 +41,46 @@
 000000000000051e peek
 000000000000058a parseredirs
 00000000000003dc gettoken
-00000000000011fa malloc
+000000000000120a malloc
 0000000000000e58 sleep
-00000000000014a0 whitespace
+0000000000000e70 sysinfo
+00000000000014b0 whitespace
 000000000000007a fork1
 0000000000000948 nulterminate
 0000000000000dd8 pipe
 0000000000000000 getcmd
 0000000000000de8 write
 0000000000000e20 fstat
-0000000000001114 fprintf
+0000000000001124 fprintf
 0000000000000df8 kill
-0000000000000f36 vprintf
+0000000000000f46 vprintf
 0000000000000e38 chdir
 00000000000007fc parseline
 00000000000000a8 runcmd
 00000000000008a4 parseblock
 0000000000000e00 exec
 0000000000000dd0 wait
-0000000000001498 symbols
+00000000000014a8 symbols
 0000000000000de0 read
 0000000000000686 parseexec
 0000000000000e18 unlink
 0000000000000054 panic
 0000000000000d6e memcmp
 0000000000000dc0 fork
-0000000000001528 __BSS_END__
+0000000000001538 __BSS_END__
 0000000000000e50 sbrk
 0000000000000e60 uptime
-00000000000014a6 __bss_start
+00000000000014b6 __bss_start
 0000000000000bce memset
 0000000000000a68 main
 0000000000000b78 strcmp
 0000000000000e40 dup
 0000000000000314 pipecmd
 00000000000002ac redircmd
-0000000000001491 __DATA_BEGIN__
+00000000000014a1 __DATA_BEGIN__
 0000000000000c88 stat
-00000000000014a6 _edata
-0000000000001528 _end
+00000000000014b6 _edata
+0000000000001538 _end
 0000000000000e28 link
 0000000000000dc8 exit
 0000000000000cce atoi
@@ -88,4 +90,4 @@
 0000000000000e30 mkdir
 0000000000000df0 close
 000000000000035a listcmd
-0000000000001178 free
+0000000000001188 free
diff -urN ./user/sleep.c ../xv6-labs-2021/user/sleep.c
--- ./user/sleep.c	1970-01-01 08:00:00.000000000 +0800
+++ ../xv6-labs-2021/user/sleep.c	2021-12-05 17:40:55.000000000 +0800
@@ -0,0 +1,12 @@
+#include "kernel/types.h"
+#include "kernel/stat.h"
+#include "user/user.h"
+int main(int argc, char *argv[]) {
+    if(argc <= 1){
+        fprintf(2, "usage: sleep time\n");
+        exit(1);
+    }
+    sleep(atoi(argv[1]));
+    exit(0);
+}
+
diff -urN ./user/stressfs.asm ../xv6-labs-2021/user/stressfs.asm
--- ./user/stressfs.asm	2021-12-05 17:54:42.000000000 +0800
+++ ../xv6-labs-2021/user/stressfs.asm	2021-11-26 14:46:16.000000000 +0800
@@ -20,7 +20,7 @@
   int fd, i;
   char path[] = "stressfs0";
   16:	00001797          	auipc	a5,0x1
-  1a:	8aa78793          	addi	a5,a5,-1878 # 8c0 <malloc+0x116>
+  1a:	8ba78793          	addi	a5,a5,-1862 # 8d0 <malloc+0x116>
   1e:	6398                	ld	a4,0(a5)
   20:	fce43823          	sd	a4,-48(s0)
   24:	0087d783          	lhu	a5,8(a5)
@@ -29,9 +29,9 @@
 
   printf("stressfs starting\n");
   2c:	00001517          	auipc	a0,0x1
-  30:	86450513          	addi	a0,a0,-1948 # 890 <malloc+0xe6>
+  30:	87450513          	addi	a0,a0,-1932 # 8a0 <malloc+0xe6>
   34:	00000097          	auipc	ra,0x0
-  38:	6be080e7          	jalr	1726(ra) # 6f2 <printf>
+  38:	6ce080e7          	jalr	1742(ra) # 702 <printf>
   memset(data, 'a', sizeof(data));
   3c:	20000613          	li	a2,512
   40:	06100593          	li	a1,97
@@ -54,9 +54,9 @@
   printf("write %d\n", i);
   66:	85a6                	mv	a1,s1
   68:	00001517          	auipc	a0,0x1
-  6c:	84050513          	addi	a0,a0,-1984 # 8a8 <malloc+0xfe>
+  6c:	85050513          	addi	a0,a0,-1968 # 8b8 <malloc+0xfe>
   70:	00000097          	auipc	ra,0x0
-  74:	682080e7          	jalr	1666(ra) # 6f2 <printf>
+  74:	692080e7          	jalr	1682(ra) # 702 <printf>
 
   path[8] += i;
   78:	fd844783          	lbu	a5,-40(s0)
@@ -87,9 +87,9 @@
 
   printf("read\n");
   b6:	00001517          	auipc	a0,0x1
-  ba:	80250513          	addi	a0,a0,-2046 # 8b8 <malloc+0x10e>
+  ba:	81250513          	addi	a0,a0,-2030 # 8c8 <malloc+0x10e>
   be:	00000097          	auipc	ra,0x0
-  c2:	634080e7          	jalr	1588(ra) # 6f2 <printf>
+  c2:	644080e7          	jalr	1604(ra) # 702 <printf>
 
   fd = open(path, O_RDONLY);
   c6:	4581                	li	a1,0
@@ -754,632 +754,652 @@
  ret
  416:	8082                	ret
 
-0000000000000418 <putc>:
+0000000000000418 <trace>:
+.global trace
+trace:
+ li a7, SYS_trace
+ 418:	48d9                	li	a7,22
+ ecall
+ 41a:	00000073          	ecall
+ ret
+ 41e:	8082                	ret
+
+0000000000000420 <sysinfo>:
+.global sysinfo
+sysinfo:
+ li a7, SYS_sysinfo
+ 420:	48dd                	li	a7,23
+ ecall
+ 422:	00000073          	ecall
+ ret
+ 426:	8082                	ret
+
+0000000000000428 <putc>:
 
 static char digits[] = "0123456789ABCDEF";
 
 static void
 putc(int fd, char c)
 {
- 418:	1101                	addi	sp,sp,-32
- 41a:	ec06                	sd	ra,24(sp)
- 41c:	e822                	sd	s0,16(sp)
- 41e:	1000                	addi	s0,sp,32
- 420:	feb407a3          	sb	a1,-17(s0)
+ 428:	1101                	addi	sp,sp,-32
+ 42a:	ec06                	sd	ra,24(sp)
+ 42c:	e822                	sd	s0,16(sp)
+ 42e:	1000                	addi	s0,sp,32
+ 430:	feb407a3          	sb	a1,-17(s0)
   write(fd, &c, 1);
- 424:	4605                	li	a2,1
- 426:	fef40593          	addi	a1,s0,-17
- 42a:	00000097          	auipc	ra,0x0
- 42e:	f6e080e7          	jalr	-146(ra) # 398 <write>
+ 434:	4605                	li	a2,1
+ 436:	fef40593          	addi	a1,s0,-17
+ 43a:	00000097          	auipc	ra,0x0
+ 43e:	f5e080e7          	jalr	-162(ra) # 398 <write>
 }
- 432:	60e2                	ld	ra,24(sp)
- 434:	6442                	ld	s0,16(sp)
- 436:	6105                	addi	sp,sp,32
- 438:	8082                	ret
+ 442:	60e2                	ld	ra,24(sp)
+ 444:	6442                	ld	s0,16(sp)
+ 446:	6105                	addi	sp,sp,32
+ 448:	8082                	ret
 
-000000000000043a <printint>:
+000000000000044a <printint>:
 
 static void
 printint(int fd, int xx, int base, int sgn)
 {
- 43a:	7139                	addi	sp,sp,-64
- 43c:	fc06                	sd	ra,56(sp)
- 43e:	f822                	sd	s0,48(sp)
- 440:	f426                	sd	s1,40(sp)
- 442:	f04a                	sd	s2,32(sp)
- 444:	ec4e                	sd	s3,24(sp)
- 446:	0080                	addi	s0,sp,64
- 448:	84aa                	mv	s1,a0
+ 44a:	7139                	addi	sp,sp,-64
+ 44c:	fc06                	sd	ra,56(sp)
+ 44e:	f822                	sd	s0,48(sp)
+ 450:	f426                	sd	s1,40(sp)
+ 452:	f04a                	sd	s2,32(sp)
+ 454:	ec4e                	sd	s3,24(sp)
+ 456:	0080                	addi	s0,sp,64
+ 458:	84aa                	mv	s1,a0
   char buf[16];
   int i, neg;
   uint x;
 
   neg = 0;
   if(sgn && xx < 0){
- 44a:	c299                	beqz	a3,450 <printint+0x16>
- 44c:	0805c963          	bltz	a1,4de <printint+0xa4>
+ 45a:	c299                	beqz	a3,460 <printint+0x16>
+ 45c:	0805c963          	bltz	a1,4ee <printint+0xa4>
     neg = 1;
     x = -xx;
   } else {
     x = xx;
- 450:	2581                	sext.w	a1,a1
+ 460:	2581                	sext.w	a1,a1
   neg = 0;
- 452:	4881                	li	a7,0
- 454:	fc040693          	addi	a3,s0,-64
+ 462:	4881                	li	a7,0
+ 464:	fc040693          	addi	a3,s0,-64
   }
 
   i = 0;
- 458:	4701                	li	a4,0
+ 468:	4701                	li	a4,0
   do{
     buf[i++] = digits[x % base];
- 45a:	2601                	sext.w	a2,a2
- 45c:	00000517          	auipc	a0,0x0
- 460:	4d450513          	addi	a0,a0,1236 # 930 <digits>
- 464:	883a                	mv	a6,a4
- 466:	2705                	addiw	a4,a4,1
- 468:	02c5f7bb          	remuw	a5,a1,a2
- 46c:	1782                	slli	a5,a5,0x20
- 46e:	9381                	srli	a5,a5,0x20
- 470:	97aa                	add	a5,a5,a0
- 472:	0007c783          	lbu	a5,0(a5)
- 476:	00f68023          	sb	a5,0(a3)
+ 46a:	2601                	sext.w	a2,a2
+ 46c:	00000517          	auipc	a0,0x0
+ 470:	4d450513          	addi	a0,a0,1236 # 940 <digits>
+ 474:	883a                	mv	a6,a4
+ 476:	2705                	addiw	a4,a4,1
+ 478:	02c5f7bb          	remuw	a5,a1,a2
+ 47c:	1782                	slli	a5,a5,0x20
+ 47e:	9381                	srli	a5,a5,0x20
+ 480:	97aa                	add	a5,a5,a0
+ 482:	0007c783          	lbu	a5,0(a5)
+ 486:	00f68023          	sb	a5,0(a3)
   }while((x /= base) != 0);
- 47a:	0005879b          	sext.w	a5,a1
- 47e:	02c5d5bb          	divuw	a1,a1,a2
- 482:	0685                	addi	a3,a3,1
- 484:	fec7f0e3          	bgeu	a5,a2,464 <printint+0x2a>
+ 48a:	0005879b          	sext.w	a5,a1
+ 48e:	02c5d5bb          	divuw	a1,a1,a2
+ 492:	0685                	addi	a3,a3,1
+ 494:	fec7f0e3          	bgeu	a5,a2,474 <printint+0x2a>
   if(neg)
- 488:	00088c63          	beqz	a7,4a0 <printint+0x66>
+ 498:	00088c63          	beqz	a7,4b0 <printint+0x66>
     buf[i++] = '-';
- 48c:	fd070793          	addi	a5,a4,-48
- 490:	00878733          	add	a4,a5,s0
- 494:	02d00793          	li	a5,45
- 498:	fef70823          	sb	a5,-16(a4)
- 49c:	0028071b          	addiw	a4,a6,2
+ 49c:	fd070793          	addi	a5,a4,-48
+ 4a0:	00878733          	add	a4,a5,s0
+ 4a4:	02d00793          	li	a5,45
+ 4a8:	fef70823          	sb	a5,-16(a4)
+ 4ac:	0028071b          	addiw	a4,a6,2
 
   while(--i >= 0)
- 4a0:	02e05863          	blez	a4,4d0 <printint+0x96>
- 4a4:	fc040793          	addi	a5,s0,-64
- 4a8:	00e78933          	add	s2,a5,a4
- 4ac:	fff78993          	addi	s3,a5,-1
- 4b0:	99ba                	add	s3,s3,a4
- 4b2:	377d                	addiw	a4,a4,-1
- 4b4:	1702                	slli	a4,a4,0x20
- 4b6:	9301                	srli	a4,a4,0x20
- 4b8:	40e989b3          	sub	s3,s3,a4
+ 4b0:	02e05863          	blez	a4,4e0 <printint+0x96>
+ 4b4:	fc040793          	addi	a5,s0,-64
+ 4b8:	00e78933          	add	s2,a5,a4
+ 4bc:	fff78993          	addi	s3,a5,-1
+ 4c0:	99ba                	add	s3,s3,a4
+ 4c2:	377d                	addiw	a4,a4,-1
+ 4c4:	1702                	slli	a4,a4,0x20
+ 4c6:	9301                	srli	a4,a4,0x20
+ 4c8:	40e989b3          	sub	s3,s3,a4
     putc(fd, buf[i]);
- 4bc:	fff94583          	lbu	a1,-1(s2)
- 4c0:	8526                	mv	a0,s1
- 4c2:	00000097          	auipc	ra,0x0
- 4c6:	f56080e7          	jalr	-170(ra) # 418 <putc>
+ 4cc:	fff94583          	lbu	a1,-1(s2)
+ 4d0:	8526                	mv	a0,s1
+ 4d2:	00000097          	auipc	ra,0x0
+ 4d6:	f56080e7          	jalr	-170(ra) # 428 <putc>
   while(--i >= 0)
- 4ca:	197d                	addi	s2,s2,-1
- 4cc:	ff3918e3          	bne	s2,s3,4bc <printint+0x82>
+ 4da:	197d                	addi	s2,s2,-1
+ 4dc:	ff3918e3          	bne	s2,s3,4cc <printint+0x82>
 }
- 4d0:	70e2                	ld	ra,56(sp)
- 4d2:	7442                	ld	s0,48(sp)
- 4d4:	74a2                	ld	s1,40(sp)
- 4d6:	7902                	ld	s2,32(sp)
- 4d8:	69e2                	ld	s3,24(sp)
- 4da:	6121                	addi	sp,sp,64
- 4dc:	8082                	ret
+ 4e0:	70e2                	ld	ra,56(sp)
+ 4e2:	7442                	ld	s0,48(sp)
+ 4e4:	74a2                	ld	s1,40(sp)
+ 4e6:	7902                	ld	s2,32(sp)
+ 4e8:	69e2                	ld	s3,24(sp)
+ 4ea:	6121                	addi	sp,sp,64
+ 4ec:	8082                	ret
     x = -xx;
- 4de:	40b005bb          	negw	a1,a1
+ 4ee:	40b005bb          	negw	a1,a1
     neg = 1;
- 4e2:	4885                	li	a7,1
+ 4f2:	4885                	li	a7,1
     x = -xx;
- 4e4:	bf85                	j	454 <printint+0x1a>
+ 4f4:	bf85                	j	464 <printint+0x1a>
 
-00000000000004e6 <vprintf>:
+00000000000004f6 <vprintf>:
 }
 
 // Print to the given fd. Only understands %d, %x, %p, %s.
 void
 vprintf(int fd, const char *fmt, va_list ap)
 {
- 4e6:	7119                	addi	sp,sp,-128
- 4e8:	fc86                	sd	ra,120(sp)
- 4ea:	f8a2                	sd	s0,112(sp)
- 4ec:	f4a6                	sd	s1,104(sp)
- 4ee:	f0ca                	sd	s2,96(sp)
- 4f0:	ecce                	sd	s3,88(sp)
- 4f2:	e8d2                	sd	s4,80(sp)
- 4f4:	e4d6                	sd	s5,72(sp)
- 4f6:	e0da                	sd	s6,64(sp)
- 4f8:	fc5e                	sd	s7,56(sp)
- 4fa:	f862                	sd	s8,48(sp)
- 4fc:	f466                	sd	s9,40(sp)
- 4fe:	f06a                	sd	s10,32(sp)
- 500:	ec6e                	sd	s11,24(sp)
- 502:	0100                	addi	s0,sp,128
+ 4f6:	7119                	addi	sp,sp,-128
+ 4f8:	fc86                	sd	ra,120(sp)
+ 4fa:	f8a2                	sd	s0,112(sp)
+ 4fc:	f4a6                	sd	s1,104(sp)
+ 4fe:	f0ca                	sd	s2,96(sp)
+ 500:	ecce                	sd	s3,88(sp)
+ 502:	e8d2                	sd	s4,80(sp)
+ 504:	e4d6                	sd	s5,72(sp)
+ 506:	e0da                	sd	s6,64(sp)
+ 508:	fc5e                	sd	s7,56(sp)
+ 50a:	f862                	sd	s8,48(sp)
+ 50c:	f466                	sd	s9,40(sp)
+ 50e:	f06a                	sd	s10,32(sp)
+ 510:	ec6e                	sd	s11,24(sp)
+ 512:	0100                	addi	s0,sp,128
   char *s;
   int c, i, state;
 
   state = 0;
   for(i = 0; fmt[i]; i++){
- 504:	0005c903          	lbu	s2,0(a1)
- 508:	18090f63          	beqz	s2,6a6 <vprintf+0x1c0>
- 50c:	8aaa                	mv	s5,a0
- 50e:	8b32                	mv	s6,a2
- 510:	00158493          	addi	s1,a1,1
+ 514:	0005c903          	lbu	s2,0(a1)
+ 518:	18090f63          	beqz	s2,6b6 <vprintf+0x1c0>
+ 51c:	8aaa                	mv	s5,a0
+ 51e:	8b32                	mv	s6,a2
+ 520:	00158493          	addi	s1,a1,1
   state = 0;
- 514:	4981                	li	s3,0
+ 524:	4981                	li	s3,0
       if(c == '%'){
         state = '%';
       } else {
         putc(fd, c);
       }
     } else if(state == '%'){
- 516:	02500a13          	li	s4,37
- 51a:	4c55                	li	s8,21
- 51c:	00000c97          	auipc	s9,0x0
- 520:	3bcc8c93          	addi	s9,s9,956 # 8d8 <malloc+0x12e>
+ 526:	02500a13          	li	s4,37
+ 52a:	4c55                	li	s8,21
+ 52c:	00000c97          	auipc	s9,0x0
+ 530:	3bcc8c93          	addi	s9,s9,956 # 8e8 <malloc+0x12e>
         printptr(fd, va_arg(ap, uint64));
       } else if(c == 's'){
         s = va_arg(ap, char*);
         if(s == 0)
           s = "(null)";
         while(*s != 0){
- 524:	02800d93          	li	s11,40
+ 534:	02800d93          	li	s11,40
   putc(fd, 'x');
- 528:	4d41                	li	s10,16
+ 538:	4d41                	li	s10,16
     putc(fd, digits[x >> (sizeof(uint64) * 8 - 4)]);
- 52a:	00000b97          	auipc	s7,0x0
- 52e:	406b8b93          	addi	s7,s7,1030 # 930 <digits>
- 532:	a839                	j	550 <vprintf+0x6a>
+ 53a:	00000b97          	auipc	s7,0x0
+ 53e:	406b8b93          	addi	s7,s7,1030 # 940 <digits>
+ 542:	a839                	j	560 <vprintf+0x6a>
         putc(fd, c);
- 534:	85ca                	mv	a1,s2
- 536:	8556                	mv	a0,s5
- 538:	00000097          	auipc	ra,0x0
- 53c:	ee0080e7          	jalr	-288(ra) # 418 <putc>
- 540:	a019                	j	546 <vprintf+0x60>
+ 544:	85ca                	mv	a1,s2
+ 546:	8556                	mv	a0,s5
+ 548:	00000097          	auipc	ra,0x0
+ 54c:	ee0080e7          	jalr	-288(ra) # 428 <putc>
+ 550:	a019                	j	556 <vprintf+0x60>
     } else if(state == '%'){
- 542:	01498d63          	beq	s3,s4,55c <vprintf+0x76>
+ 552:	01498d63          	beq	s3,s4,56c <vprintf+0x76>
   for(i = 0; fmt[i]; i++){
- 546:	0485                	addi	s1,s1,1
- 548:	fff4c903          	lbu	s2,-1(s1)
- 54c:	14090d63          	beqz	s2,6a6 <vprintf+0x1c0>
+ 556:	0485                	addi	s1,s1,1
+ 558:	fff4c903          	lbu	s2,-1(s1)
+ 55c:	14090d63          	beqz	s2,6b6 <vprintf+0x1c0>
     if(state == 0){
- 550:	fe0999e3          	bnez	s3,542 <vprintf+0x5c>
+ 560:	fe0999e3          	bnez	s3,552 <vprintf+0x5c>
       if(c == '%'){
- 554:	ff4910e3          	bne	s2,s4,534 <vprintf+0x4e>
+ 564:	ff4910e3          	bne	s2,s4,544 <vprintf+0x4e>
         state = '%';
- 558:	89d2                	mv	s3,s4
- 55a:	b7f5                	j	546 <vprintf+0x60>
+ 568:	89d2                	mv	s3,s4
+ 56a:	b7f5                	j	556 <vprintf+0x60>
       if(c == 'd'){
- 55c:	11490c63          	beq	s2,s4,674 <vprintf+0x18e>
- 560:	f9d9079b          	addiw	a5,s2,-99
- 564:	0ff7f793          	zext.b	a5,a5
- 568:	10fc6e63          	bltu	s8,a5,684 <vprintf+0x19e>
- 56c:	f9d9079b          	addiw	a5,s2,-99
- 570:	0ff7f713          	zext.b	a4,a5
- 574:	10ec6863          	bltu	s8,a4,684 <vprintf+0x19e>
- 578:	00271793          	slli	a5,a4,0x2
- 57c:	97e6                	add	a5,a5,s9
- 57e:	439c                	lw	a5,0(a5)
- 580:	97e6                	add	a5,a5,s9
- 582:	8782                	jr	a5
+ 56c:	11490c63          	beq	s2,s4,684 <vprintf+0x18e>
+ 570:	f9d9079b          	addiw	a5,s2,-99
+ 574:	0ff7f793          	zext.b	a5,a5
+ 578:	10fc6e63          	bltu	s8,a5,694 <vprintf+0x19e>
+ 57c:	f9d9079b          	addiw	a5,s2,-99
+ 580:	0ff7f713          	zext.b	a4,a5
+ 584:	10ec6863          	bltu	s8,a4,694 <vprintf+0x19e>
+ 588:	00271793          	slli	a5,a4,0x2
+ 58c:	97e6                	add	a5,a5,s9
+ 58e:	439c                	lw	a5,0(a5)
+ 590:	97e6                	add	a5,a5,s9
+ 592:	8782                	jr	a5
         printint(fd, va_arg(ap, int), 10, 1);
- 584:	008b0913          	addi	s2,s6,8
- 588:	4685                	li	a3,1
- 58a:	4629                	li	a2,10
- 58c:	000b2583          	lw	a1,0(s6)
- 590:	8556                	mv	a0,s5
- 592:	00000097          	auipc	ra,0x0
- 596:	ea8080e7          	jalr	-344(ra) # 43a <printint>
- 59a:	8b4a                	mv	s6,s2
+ 594:	008b0913          	addi	s2,s6,8
+ 598:	4685                	li	a3,1
+ 59a:	4629                	li	a2,10
+ 59c:	000b2583          	lw	a1,0(s6)
+ 5a0:	8556                	mv	a0,s5
+ 5a2:	00000097          	auipc	ra,0x0
+ 5a6:	ea8080e7          	jalr	-344(ra) # 44a <printint>
+ 5aa:	8b4a                	mv	s6,s2
       } else {
         // Unknown % sequence.  Print it to draw attention.
         putc(fd, '%');
         putc(fd, c);
       }
       state = 0;
- 59c:	4981                	li	s3,0
- 59e:	b765                	j	546 <vprintf+0x60>
+ 5ac:	4981                	li	s3,0
+ 5ae:	b765                	j	556 <vprintf+0x60>
         printint(fd, va_arg(ap, uint64), 10, 0);
- 5a0:	008b0913          	addi	s2,s6,8
- 5a4:	4681                	li	a3,0
- 5a6:	4629                	li	a2,10
- 5a8:	000b2583          	lw	a1,0(s6)
- 5ac:	8556                	mv	a0,s5
- 5ae:	00000097          	auipc	ra,0x0
- 5b2:	e8c080e7          	jalr	-372(ra) # 43a <printint>
- 5b6:	8b4a                	mv	s6,s2
+ 5b0:	008b0913          	addi	s2,s6,8
+ 5b4:	4681                	li	a3,0
+ 5b6:	4629                	li	a2,10
+ 5b8:	000b2583          	lw	a1,0(s6)
+ 5bc:	8556                	mv	a0,s5
+ 5be:	00000097          	auipc	ra,0x0
+ 5c2:	e8c080e7          	jalr	-372(ra) # 44a <printint>
+ 5c6:	8b4a                	mv	s6,s2
       state = 0;
- 5b8:	4981                	li	s3,0
- 5ba:	b771                	j	546 <vprintf+0x60>
+ 5c8:	4981                	li	s3,0
+ 5ca:	b771                	j	556 <vprintf+0x60>
         printint(fd, va_arg(ap, int), 16, 0);
- 5bc:	008b0913          	addi	s2,s6,8
- 5c0:	4681                	li	a3,0
- 5c2:	866a                	mv	a2,s10
- 5c4:	000b2583          	lw	a1,0(s6)
- 5c8:	8556                	mv	a0,s5
- 5ca:	00000097          	auipc	ra,0x0
- 5ce:	e70080e7          	jalr	-400(ra) # 43a <printint>
- 5d2:	8b4a                	mv	s6,s2
+ 5cc:	008b0913          	addi	s2,s6,8
+ 5d0:	4681                	li	a3,0
+ 5d2:	866a                	mv	a2,s10
+ 5d4:	000b2583          	lw	a1,0(s6)
+ 5d8:	8556                	mv	a0,s5
+ 5da:	00000097          	auipc	ra,0x0
+ 5de:	e70080e7          	jalr	-400(ra) # 44a <printint>
+ 5e2:	8b4a                	mv	s6,s2
       state = 0;
- 5d4:	4981                	li	s3,0
- 5d6:	bf85                	j	546 <vprintf+0x60>
+ 5e4:	4981                	li	s3,0
+ 5e6:	bf85                	j	556 <vprintf+0x60>
         printptr(fd, va_arg(ap, uint64));
- 5d8:	008b0793          	addi	a5,s6,8
- 5dc:	f8f43423          	sd	a5,-120(s0)
- 5e0:	000b3983          	ld	s3,0(s6)
+ 5e8:	008b0793          	addi	a5,s6,8
+ 5ec:	f8f43423          	sd	a5,-120(s0)
+ 5f0:	000b3983          	ld	s3,0(s6)
   putc(fd, '0');
- 5e4:	03000593          	li	a1,48
- 5e8:	8556                	mv	a0,s5
- 5ea:	00000097          	auipc	ra,0x0
- 5ee:	e2e080e7          	jalr	-466(ra) # 418 <putc>
+ 5f4:	03000593          	li	a1,48
+ 5f8:	8556                	mv	a0,s5
+ 5fa:	00000097          	auipc	ra,0x0
+ 5fe:	e2e080e7          	jalr	-466(ra) # 428 <putc>
   putc(fd, 'x');
- 5f2:	07800593          	li	a1,120
- 5f6:	8556                	mv	a0,s5
- 5f8:	00000097          	auipc	ra,0x0
- 5fc:	e20080e7          	jalr	-480(ra) # 418 <putc>
- 600:	896a                	mv	s2,s10
+ 602:	07800593          	li	a1,120
+ 606:	8556                	mv	a0,s5
+ 608:	00000097          	auipc	ra,0x0
+ 60c:	e20080e7          	jalr	-480(ra) # 428 <putc>
+ 610:	896a                	mv	s2,s10
     putc(fd, digits[x >> (sizeof(uint64) * 8 - 4)]);
- 602:	03c9d793          	srli	a5,s3,0x3c
- 606:	97de                	add	a5,a5,s7
- 608:	0007c583          	lbu	a1,0(a5)
- 60c:	8556                	mv	a0,s5
- 60e:	00000097          	auipc	ra,0x0
- 612:	e0a080e7          	jalr	-502(ra) # 418 <putc>
+ 612:	03c9d793          	srli	a5,s3,0x3c
+ 616:	97de                	add	a5,a5,s7
+ 618:	0007c583          	lbu	a1,0(a5)
+ 61c:	8556                	mv	a0,s5
+ 61e:	00000097          	auipc	ra,0x0
+ 622:	e0a080e7          	jalr	-502(ra) # 428 <putc>
   for (i = 0; i < (sizeof(uint64) * 2); i++, x <<= 4)
- 616:	0992                	slli	s3,s3,0x4
- 618:	397d                	addiw	s2,s2,-1
- 61a:	fe0914e3          	bnez	s2,602 <vprintf+0x11c>
+ 626:	0992                	slli	s3,s3,0x4
+ 628:	397d                	addiw	s2,s2,-1
+ 62a:	fe0914e3          	bnez	s2,612 <vprintf+0x11c>
         printptr(fd, va_arg(ap, uint64));
- 61e:	f8843b03          	ld	s6,-120(s0)
+ 62e:	f8843b03          	ld	s6,-120(s0)
       state = 0;
- 622:	4981                	li	s3,0
- 624:	b70d                	j	546 <vprintf+0x60>
+ 632:	4981                	li	s3,0
+ 634:	b70d                	j	556 <vprintf+0x60>
         s = va_arg(ap, char*);
- 626:	008b0913          	addi	s2,s6,8
- 62a:	000b3983          	ld	s3,0(s6)
+ 636:	008b0913          	addi	s2,s6,8
+ 63a:	000b3983          	ld	s3,0(s6)
         if(s == 0)
- 62e:	02098163          	beqz	s3,650 <vprintf+0x16a>
+ 63e:	02098163          	beqz	s3,660 <vprintf+0x16a>
         while(*s != 0){
- 632:	0009c583          	lbu	a1,0(s3)
- 636:	c5ad                	beqz	a1,6a0 <vprintf+0x1ba>
+ 642:	0009c583          	lbu	a1,0(s3)
+ 646:	c5ad                	beqz	a1,6b0 <vprintf+0x1ba>
           putc(fd, *s);
- 638:	8556                	mv	a0,s5
- 63a:	00000097          	auipc	ra,0x0
- 63e:	dde080e7          	jalr	-546(ra) # 418 <putc>
+ 648:	8556                	mv	a0,s5
+ 64a:	00000097          	auipc	ra,0x0
+ 64e:	dde080e7          	jalr	-546(ra) # 428 <putc>
           s++;
- 642:	0985                	addi	s3,s3,1
+ 652:	0985                	addi	s3,s3,1
         while(*s != 0){
- 644:	0009c583          	lbu	a1,0(s3)
- 648:	f9e5                	bnez	a1,638 <vprintf+0x152>
+ 654:	0009c583          	lbu	a1,0(s3)
+ 658:	f9e5                	bnez	a1,648 <vprintf+0x152>
         s = va_arg(ap, char*);
- 64a:	8b4a                	mv	s6,s2
+ 65a:	8b4a                	mv	s6,s2
       state = 0;
- 64c:	4981                	li	s3,0
- 64e:	bde5                	j	546 <vprintf+0x60>
+ 65c:	4981                	li	s3,0
+ 65e:	bde5                	j	556 <vprintf+0x60>
           s = "(null)";
- 650:	00000997          	auipc	s3,0x0
- 654:	28098993          	addi	s3,s3,640 # 8d0 <malloc+0x126>
+ 660:	00000997          	auipc	s3,0x0
+ 664:	28098993          	addi	s3,s3,640 # 8e0 <malloc+0x126>
         while(*s != 0){
- 658:	85ee                	mv	a1,s11
- 65a:	bff9                	j	638 <vprintf+0x152>
+ 668:	85ee                	mv	a1,s11
+ 66a:	bff9                	j	648 <vprintf+0x152>
         putc(fd, va_arg(ap, uint));
- 65c:	008b0913          	addi	s2,s6,8
- 660:	000b4583          	lbu	a1,0(s6)
- 664:	8556                	mv	a0,s5
- 666:	00000097          	auipc	ra,0x0
- 66a:	db2080e7          	jalr	-590(ra) # 418 <putc>
- 66e:	8b4a                	mv	s6,s2
-      state = 0;
- 670:	4981                	li	s3,0
- 672:	bdd1                	j	546 <vprintf+0x60>
-        putc(fd, c);
- 674:	85d2                	mv	a1,s4
- 676:	8556                	mv	a0,s5
- 678:	00000097          	auipc	ra,0x0
- 67c:	da0080e7          	jalr	-608(ra) # 418 <putc>
+ 66c:	008b0913          	addi	s2,s6,8
+ 670:	000b4583          	lbu	a1,0(s6)
+ 674:	8556                	mv	a0,s5
+ 676:	00000097          	auipc	ra,0x0
+ 67a:	db2080e7          	jalr	-590(ra) # 428 <putc>
+ 67e:	8b4a                	mv	s6,s2
       state = 0;
  680:	4981                	li	s3,0
- 682:	b5d1                	j	546 <vprintf+0x60>
-        putc(fd, '%');
+ 682:	bdd1                	j	556 <vprintf+0x60>
+        putc(fd, c);
  684:	85d2                	mv	a1,s4
  686:	8556                	mv	a0,s5
  688:	00000097          	auipc	ra,0x0
- 68c:	d90080e7          	jalr	-624(ra) # 418 <putc>
+ 68c:	da0080e7          	jalr	-608(ra) # 428 <putc>
+      state = 0;
+ 690:	4981                	li	s3,0
+ 692:	b5d1                	j	556 <vprintf+0x60>
+        putc(fd, '%');
+ 694:	85d2                	mv	a1,s4
+ 696:	8556                	mv	a0,s5
+ 698:	00000097          	auipc	ra,0x0
+ 69c:	d90080e7          	jalr	-624(ra) # 428 <putc>
         putc(fd, c);
- 690:	85ca                	mv	a1,s2
- 692:	8556                	mv	a0,s5
- 694:	00000097          	auipc	ra,0x0
- 698:	d84080e7          	jalr	-636(ra) # 418 <putc>
+ 6a0:	85ca                	mv	a1,s2
+ 6a2:	8556                	mv	a0,s5
+ 6a4:	00000097          	auipc	ra,0x0
+ 6a8:	d84080e7          	jalr	-636(ra) # 428 <putc>
       state = 0;
- 69c:	4981                	li	s3,0
- 69e:	b565                	j	546 <vprintf+0x60>
+ 6ac:	4981                	li	s3,0
+ 6ae:	b565                	j	556 <vprintf+0x60>
         s = va_arg(ap, char*);
- 6a0:	8b4a                	mv	s6,s2
+ 6b0:	8b4a                	mv	s6,s2
       state = 0;
- 6a2:	4981                	li	s3,0
- 6a4:	b54d                	j	546 <vprintf+0x60>
+ 6b2:	4981                	li	s3,0
+ 6b4:	b54d                	j	556 <vprintf+0x60>
     }
   }
 }
- 6a6:	70e6                	ld	ra,120(sp)
- 6a8:	7446                	ld	s0,112(sp)
- 6aa:	74a6                	ld	s1,104(sp)
- 6ac:	7906                	ld	s2,96(sp)
- 6ae:	69e6                	ld	s3,88(sp)
- 6b0:	6a46                	ld	s4,80(sp)
- 6b2:	6aa6                	ld	s5,72(sp)
- 6b4:	6b06                	ld	s6,64(sp)
- 6b6:	7be2                	ld	s7,56(sp)
- 6b8:	7c42                	ld	s8,48(sp)
- 6ba:	7ca2                	ld	s9,40(sp)
- 6bc:	7d02                	ld	s10,32(sp)
- 6be:	6de2                	ld	s11,24(sp)
- 6c0:	6109                	addi	sp,sp,128
- 6c2:	8082                	ret
+ 6b6:	70e6                	ld	ra,120(sp)
+ 6b8:	7446                	ld	s0,112(sp)
+ 6ba:	74a6                	ld	s1,104(sp)
+ 6bc:	7906                	ld	s2,96(sp)
+ 6be:	69e6                	ld	s3,88(sp)
+ 6c0:	6a46                	ld	s4,80(sp)
+ 6c2:	6aa6                	ld	s5,72(sp)
+ 6c4:	6b06                	ld	s6,64(sp)
+ 6c6:	7be2                	ld	s7,56(sp)
+ 6c8:	7c42                	ld	s8,48(sp)
+ 6ca:	7ca2                	ld	s9,40(sp)
+ 6cc:	7d02                	ld	s10,32(sp)
+ 6ce:	6de2                	ld	s11,24(sp)
+ 6d0:	6109                	addi	sp,sp,128
+ 6d2:	8082                	ret
 
-00000000000006c4 <fprintf>:
+00000000000006d4 <fprintf>:
 
 void
 fprintf(int fd, const char *fmt, ...)
 {
- 6c4:	715d                	addi	sp,sp,-80
- 6c6:	ec06                	sd	ra,24(sp)
- 6c8:	e822                	sd	s0,16(sp)
- 6ca:	1000                	addi	s0,sp,32
- 6cc:	e010                	sd	a2,0(s0)
- 6ce:	e414                	sd	a3,8(s0)
- 6d0:	e818                	sd	a4,16(s0)
- 6d2:	ec1c                	sd	a5,24(s0)
- 6d4:	03043023          	sd	a6,32(s0)
- 6d8:	03143423          	sd	a7,40(s0)
+ 6d4:	715d                	addi	sp,sp,-80
+ 6d6:	ec06                	sd	ra,24(sp)
+ 6d8:	e822                	sd	s0,16(sp)
+ 6da:	1000                	addi	s0,sp,32
+ 6dc:	e010                	sd	a2,0(s0)
+ 6de:	e414                	sd	a3,8(s0)
+ 6e0:	e818                	sd	a4,16(s0)
+ 6e2:	ec1c                	sd	a5,24(s0)
+ 6e4:	03043023          	sd	a6,32(s0)
+ 6e8:	03143423          	sd	a7,40(s0)
   va_list ap;
 
   va_start(ap, fmt);
- 6dc:	fe843423          	sd	s0,-24(s0)
+ 6ec:	fe843423          	sd	s0,-24(s0)
   vprintf(fd, fmt, ap);
- 6e0:	8622                	mv	a2,s0
- 6e2:	00000097          	auipc	ra,0x0
- 6e6:	e04080e7          	jalr	-508(ra) # 4e6 <vprintf>
+ 6f0:	8622                	mv	a2,s0
+ 6f2:	00000097          	auipc	ra,0x0
+ 6f6:	e04080e7          	jalr	-508(ra) # 4f6 <vprintf>
 }
- 6ea:	60e2                	ld	ra,24(sp)
- 6ec:	6442                	ld	s0,16(sp)
- 6ee:	6161                	addi	sp,sp,80
- 6f0:	8082                	ret
+ 6fa:	60e2                	ld	ra,24(sp)
+ 6fc:	6442                	ld	s0,16(sp)
+ 6fe:	6161                	addi	sp,sp,80
+ 700:	8082                	ret
 
-00000000000006f2 <printf>:
+0000000000000702 <printf>:
 
 void
 printf(const char *fmt, ...)
 {
- 6f2:	711d                	addi	sp,sp,-96
- 6f4:	ec06                	sd	ra,24(sp)
- 6f6:	e822                	sd	s0,16(sp)
- 6f8:	1000                	addi	s0,sp,32
- 6fa:	e40c                	sd	a1,8(s0)
- 6fc:	e810                	sd	a2,16(s0)
- 6fe:	ec14                	sd	a3,24(s0)
- 700:	f018                	sd	a4,32(s0)
- 702:	f41c                	sd	a5,40(s0)
- 704:	03043823          	sd	a6,48(s0)
- 708:	03143c23          	sd	a7,56(s0)
+ 702:	711d                	addi	sp,sp,-96
+ 704:	ec06                	sd	ra,24(sp)
+ 706:	e822                	sd	s0,16(sp)
+ 708:	1000                	addi	s0,sp,32
+ 70a:	e40c                	sd	a1,8(s0)
+ 70c:	e810                	sd	a2,16(s0)
+ 70e:	ec14                	sd	a3,24(s0)
+ 710:	f018                	sd	a4,32(s0)
+ 712:	f41c                	sd	a5,40(s0)
+ 714:	03043823          	sd	a6,48(s0)
+ 718:	03143c23          	sd	a7,56(s0)
   va_list ap;
 
   va_start(ap, fmt);
- 70c:	00840613          	addi	a2,s0,8
- 710:	fec43423          	sd	a2,-24(s0)
+ 71c:	00840613          	addi	a2,s0,8
+ 720:	fec43423          	sd	a2,-24(s0)
   vprintf(1, fmt, ap);
- 714:	85aa                	mv	a1,a0
- 716:	4505                	li	a0,1
- 718:	00000097          	auipc	ra,0x0
- 71c:	dce080e7          	jalr	-562(ra) # 4e6 <vprintf>
+ 724:	85aa                	mv	a1,a0
+ 726:	4505                	li	a0,1
+ 728:	00000097          	auipc	ra,0x0
+ 72c:	dce080e7          	jalr	-562(ra) # 4f6 <vprintf>
 }
- 720:	60e2                	ld	ra,24(sp)
- 722:	6442                	ld	s0,16(sp)
- 724:	6125                	addi	sp,sp,96
- 726:	8082                	ret
+ 730:	60e2                	ld	ra,24(sp)
+ 732:	6442                	ld	s0,16(sp)
+ 734:	6125                	addi	sp,sp,96
+ 736:	8082                	ret
 
-0000000000000728 <free>:
+0000000000000738 <free>:
 static Header base;
 static Header *freep;
 
 void
 free(void *ap)
 {
- 728:	1141                	addi	sp,sp,-16
- 72a:	e422                	sd	s0,8(sp)
- 72c:	0800                	addi	s0,sp,16
+ 738:	1141                	addi	sp,sp,-16
+ 73a:	e422                	sd	s0,8(sp)
+ 73c:	0800                	addi	s0,sp,16
   Header *bp, *p;
 
   bp = (Header*)ap - 1;
- 72e:	ff050693          	addi	a3,a0,-16
+ 73e:	ff050693          	addi	a3,a0,-16
   for(p = freep; !(bp > p && bp < p->s.ptr); p = p->s.ptr)
- 732:	00000797          	auipc	a5,0x0
- 736:	2167b783          	ld	a5,534(a5) # 948 <freep>
- 73a:	a02d                	j	764 <free+0x3c>
+ 742:	00000797          	auipc	a5,0x0
+ 746:	2167b783          	ld	a5,534(a5) # 958 <freep>
+ 74a:	a02d                	j	774 <free+0x3c>
     if(p >= p->s.ptr && (bp > p || bp < p->s.ptr))
       break;
   if(bp + bp->s.size == p->s.ptr){
     bp->s.size += p->s.ptr->s.size;
- 73c:	4618                	lw	a4,8(a2)
- 73e:	9f2d                	addw	a4,a4,a1
- 740:	fee52c23          	sw	a4,-8(a0)
+ 74c:	4618                	lw	a4,8(a2)
+ 74e:	9f2d                	addw	a4,a4,a1
+ 750:	fee52c23          	sw	a4,-8(a0)
     bp->s.ptr = p->s.ptr->s.ptr;
- 744:	6398                	ld	a4,0(a5)
- 746:	6310                	ld	a2,0(a4)
- 748:	a83d                	j	786 <free+0x5e>
+ 754:	6398                	ld	a4,0(a5)
+ 756:	6310                	ld	a2,0(a4)
+ 758:	a83d                	j	796 <free+0x5e>
   } else
     bp->s.ptr = p->s.ptr;
   if(p + p->s.size == bp){
     p->s.size += bp->s.size;
- 74a:	ff852703          	lw	a4,-8(a0)
- 74e:	9f31                	addw	a4,a4,a2
- 750:	c798                	sw	a4,8(a5)
+ 75a:	ff852703          	lw	a4,-8(a0)
+ 75e:	9f31                	addw	a4,a4,a2
+ 760:	c798                	sw	a4,8(a5)
     p->s.ptr = bp->s.ptr;
- 752:	ff053683          	ld	a3,-16(a0)
- 756:	a091                	j	79a <free+0x72>
+ 762:	ff053683          	ld	a3,-16(a0)
+ 766:	a091                	j	7aa <free+0x72>
     if(p >= p->s.ptr && (bp > p || bp < p->s.ptr))
- 758:	6398                	ld	a4,0(a5)
- 75a:	00e7e463          	bltu	a5,a4,762 <free+0x3a>
- 75e:	00e6ea63          	bltu	a3,a4,772 <free+0x4a>
+ 768:	6398                	ld	a4,0(a5)
+ 76a:	00e7e463          	bltu	a5,a4,772 <free+0x3a>
+ 76e:	00e6ea63          	bltu	a3,a4,782 <free+0x4a>
 {
- 762:	87ba                	mv	a5,a4
+ 772:	87ba                	mv	a5,a4
   for(p = freep; !(bp > p && bp < p->s.ptr); p = p->s.ptr)
- 764:	fed7fae3          	bgeu	a5,a3,758 <free+0x30>
- 768:	6398                	ld	a4,0(a5)
- 76a:	00e6e463          	bltu	a3,a4,772 <free+0x4a>
+ 774:	fed7fae3          	bgeu	a5,a3,768 <free+0x30>
+ 778:	6398                	ld	a4,0(a5)
+ 77a:	00e6e463          	bltu	a3,a4,782 <free+0x4a>
     if(p >= p->s.ptr && (bp > p || bp < p->s.ptr))
- 76e:	fee7eae3          	bltu	a5,a4,762 <free+0x3a>
+ 77e:	fee7eae3          	bltu	a5,a4,772 <free+0x3a>
   if(bp + bp->s.size == p->s.ptr){
- 772:	ff852583          	lw	a1,-8(a0)
- 776:	6390                	ld	a2,0(a5)
- 778:	02059813          	slli	a6,a1,0x20
- 77c:	01c85713          	srli	a4,a6,0x1c
- 780:	9736                	add	a4,a4,a3
- 782:	fae60de3          	beq	a2,a4,73c <free+0x14>
+ 782:	ff852583          	lw	a1,-8(a0)
+ 786:	6390                	ld	a2,0(a5)
+ 788:	02059813          	slli	a6,a1,0x20
+ 78c:	01c85713          	srli	a4,a6,0x1c
+ 790:	9736                	add	a4,a4,a3
+ 792:	fae60de3          	beq	a2,a4,74c <free+0x14>
     bp->s.ptr = p->s.ptr->s.ptr;
- 786:	fec53823          	sd	a2,-16(a0)
+ 796:	fec53823          	sd	a2,-16(a0)
   if(p + p->s.size == bp){
- 78a:	4790                	lw	a2,8(a5)
- 78c:	02061593          	slli	a1,a2,0x20
- 790:	01c5d713          	srli	a4,a1,0x1c
- 794:	973e                	add	a4,a4,a5
- 796:	fae68ae3          	beq	a3,a4,74a <free+0x22>
+ 79a:	4790                	lw	a2,8(a5)
+ 79c:	02061593          	slli	a1,a2,0x20
+ 7a0:	01c5d713          	srli	a4,a1,0x1c
+ 7a4:	973e                	add	a4,a4,a5
+ 7a6:	fae68ae3          	beq	a3,a4,75a <free+0x22>
     p->s.ptr = bp->s.ptr;
- 79a:	e394                	sd	a3,0(a5)
+ 7aa:	e394                	sd	a3,0(a5)
   } else
     p->s.ptr = bp;
   freep = p;
- 79c:	00000717          	auipc	a4,0x0
- 7a0:	1af73623          	sd	a5,428(a4) # 948 <freep>
+ 7ac:	00000717          	auipc	a4,0x0
+ 7b0:	1af73623          	sd	a5,428(a4) # 958 <freep>
 }
- 7a4:	6422                	ld	s0,8(sp)
- 7a6:	0141                	addi	sp,sp,16
- 7a8:	8082                	ret
+ 7b4:	6422                	ld	s0,8(sp)
+ 7b6:	0141                	addi	sp,sp,16
+ 7b8:	8082                	ret
 
-00000000000007aa <malloc>:
+00000000000007ba <malloc>:
   return freep;
 }
 
 void*
 malloc(uint nbytes)
 {
- 7aa:	7139                	addi	sp,sp,-64
- 7ac:	fc06                	sd	ra,56(sp)
- 7ae:	f822                	sd	s0,48(sp)
- 7b0:	f426                	sd	s1,40(sp)
- 7b2:	f04a                	sd	s2,32(sp)
- 7b4:	ec4e                	sd	s3,24(sp)
- 7b6:	e852                	sd	s4,16(sp)
- 7b8:	e456                	sd	s5,8(sp)
- 7ba:	e05a                	sd	s6,0(sp)
- 7bc:	0080                	addi	s0,sp,64
+ 7ba:	7139                	addi	sp,sp,-64
+ 7bc:	fc06                	sd	ra,56(sp)
+ 7be:	f822                	sd	s0,48(sp)
+ 7c0:	f426                	sd	s1,40(sp)
+ 7c2:	f04a                	sd	s2,32(sp)
+ 7c4:	ec4e                	sd	s3,24(sp)
+ 7c6:	e852                	sd	s4,16(sp)
+ 7c8:	e456                	sd	s5,8(sp)
+ 7ca:	e05a                	sd	s6,0(sp)
+ 7cc:	0080                	addi	s0,sp,64
   Header *p, *prevp;
   uint nunits;
 
   nunits = (nbytes + sizeof(Header) - 1)/sizeof(Header) + 1;
- 7be:	02051493          	slli	s1,a0,0x20
- 7c2:	9081                	srli	s1,s1,0x20
- 7c4:	04bd                	addi	s1,s1,15
- 7c6:	8091                	srli	s1,s1,0x4
- 7c8:	0014899b          	addiw	s3,s1,1
- 7cc:	0485                	addi	s1,s1,1
+ 7ce:	02051493          	slli	s1,a0,0x20
+ 7d2:	9081                	srli	s1,s1,0x20
+ 7d4:	04bd                	addi	s1,s1,15
+ 7d6:	8091                	srli	s1,s1,0x4
+ 7d8:	0014899b          	addiw	s3,s1,1
+ 7dc:	0485                	addi	s1,s1,1
   if((prevp = freep) == 0){
- 7ce:	00000517          	auipc	a0,0x0
- 7d2:	17a53503          	ld	a0,378(a0) # 948 <freep>
- 7d6:	c515                	beqz	a0,802 <malloc+0x58>
+ 7de:	00000517          	auipc	a0,0x0
+ 7e2:	17a53503          	ld	a0,378(a0) # 958 <freep>
+ 7e6:	c515                	beqz	a0,812 <malloc+0x58>
     base.s.ptr = freep = prevp = &base;
     base.s.size = 0;
   }
   for(p = prevp->s.ptr; ; prevp = p, p = p->s.ptr){
- 7d8:	611c                	ld	a5,0(a0)
+ 7e8:	611c                	ld	a5,0(a0)
     if(p->s.size >= nunits){
- 7da:	4798                	lw	a4,8(a5)
- 7dc:	02977f63          	bgeu	a4,s1,81a <malloc+0x70>
- 7e0:	8a4e                	mv	s4,s3
- 7e2:	0009871b          	sext.w	a4,s3
- 7e6:	6685                	lui	a3,0x1
- 7e8:	00d77363          	bgeu	a4,a3,7ee <malloc+0x44>
- 7ec:	6a05                	lui	s4,0x1
- 7ee:	000a0b1b          	sext.w	s6,s4
+ 7ea:	4798                	lw	a4,8(a5)
+ 7ec:	02977f63          	bgeu	a4,s1,82a <malloc+0x70>
+ 7f0:	8a4e                	mv	s4,s3
+ 7f2:	0009871b          	sext.w	a4,s3
+ 7f6:	6685                	lui	a3,0x1
+ 7f8:	00d77363          	bgeu	a4,a3,7fe <malloc+0x44>
+ 7fc:	6a05                	lui	s4,0x1
+ 7fe:	000a0b1b          	sext.w	s6,s4
   p = sbrk(nu * sizeof(Header));
- 7f2:	004a1a1b          	slliw	s4,s4,0x4
+ 802:	004a1a1b          	slliw	s4,s4,0x4
         p->s.size = nunits;
       }
       freep = prevp;
       return (void*)(p + 1);
     }
     if(p == freep)
- 7f6:	00000917          	auipc	s2,0x0
- 7fa:	15290913          	addi	s2,s2,338 # 948 <freep>
+ 806:	00000917          	auipc	s2,0x0
+ 80a:	15290913          	addi	s2,s2,338 # 958 <freep>
   if(p == (char*)-1)
- 7fe:	5afd                	li	s5,-1
- 800:	a895                	j	874 <malloc+0xca>
+ 80e:	5afd                	li	s5,-1
+ 810:	a895                	j	884 <malloc+0xca>
     base.s.ptr = freep = prevp = &base;
- 802:	00000797          	auipc	a5,0x0
- 806:	14e78793          	addi	a5,a5,334 # 950 <base>
- 80a:	00000717          	auipc	a4,0x0
- 80e:	12f73f23          	sd	a5,318(a4) # 948 <freep>
- 812:	e39c                	sd	a5,0(a5)
+ 812:	00000797          	auipc	a5,0x0
+ 816:	14e78793          	addi	a5,a5,334 # 960 <base>
+ 81a:	00000717          	auipc	a4,0x0
+ 81e:	12f73f23          	sd	a5,318(a4) # 958 <freep>
+ 822:	e39c                	sd	a5,0(a5)
     base.s.size = 0;
- 814:	0007a423          	sw	zero,8(a5)
+ 824:	0007a423          	sw	zero,8(a5)
     if(p->s.size >= nunits){
- 818:	b7e1                	j	7e0 <malloc+0x36>
+ 828:	b7e1                	j	7f0 <malloc+0x36>
       if(p->s.size == nunits)
- 81a:	02e48c63          	beq	s1,a4,852 <malloc+0xa8>
+ 82a:	02e48c63          	beq	s1,a4,862 <malloc+0xa8>
         p->s.size -= nunits;
- 81e:	4137073b          	subw	a4,a4,s3
- 822:	c798                	sw	a4,8(a5)
+ 82e:	4137073b          	subw	a4,a4,s3
+ 832:	c798                	sw	a4,8(a5)
         p += p->s.size;
- 824:	02071693          	slli	a3,a4,0x20
- 828:	01c6d713          	srli	a4,a3,0x1c
- 82c:	97ba                	add	a5,a5,a4
+ 834:	02071693          	slli	a3,a4,0x20
+ 838:	01c6d713          	srli	a4,a3,0x1c
+ 83c:	97ba                	add	a5,a5,a4
         p->s.size = nunits;
- 82e:	0137a423          	sw	s3,8(a5)
+ 83e:	0137a423          	sw	s3,8(a5)
       freep = prevp;
- 832:	00000717          	auipc	a4,0x0
- 836:	10a73b23          	sd	a0,278(a4) # 948 <freep>
+ 842:	00000717          	auipc	a4,0x0
+ 846:	10a73b23          	sd	a0,278(a4) # 958 <freep>
       return (void*)(p + 1);
- 83a:	01078513          	addi	a0,a5,16
+ 84a:	01078513          	addi	a0,a5,16
       if((p = morecore(nunits)) == 0)
         return 0;
   }
 }
- 83e:	70e2                	ld	ra,56(sp)
- 840:	7442                	ld	s0,48(sp)
- 842:	74a2                	ld	s1,40(sp)
- 844:	7902                	ld	s2,32(sp)
- 846:	69e2                	ld	s3,24(sp)
- 848:	6a42                	ld	s4,16(sp)
- 84a:	6aa2                	ld	s5,8(sp)
- 84c:	6b02                	ld	s6,0(sp)
- 84e:	6121                	addi	sp,sp,64
- 850:	8082                	ret
+ 84e:	70e2                	ld	ra,56(sp)
+ 850:	7442                	ld	s0,48(sp)
+ 852:	74a2                	ld	s1,40(sp)
+ 854:	7902                	ld	s2,32(sp)
+ 856:	69e2                	ld	s3,24(sp)
+ 858:	6a42                	ld	s4,16(sp)
+ 85a:	6aa2                	ld	s5,8(sp)
+ 85c:	6b02                	ld	s6,0(sp)
+ 85e:	6121                	addi	sp,sp,64
+ 860:	8082                	ret
         prevp->s.ptr = p->s.ptr;
- 852:	6398                	ld	a4,0(a5)
- 854:	e118                	sd	a4,0(a0)
- 856:	bff1                	j	832 <malloc+0x88>
+ 862:	6398                	ld	a4,0(a5)
+ 864:	e118                	sd	a4,0(a0)
+ 866:	bff1                	j	842 <malloc+0x88>
   hp->s.size = nu;
- 858:	01652423          	sw	s6,8(a0)
+ 868:	01652423          	sw	s6,8(a0)
   free((void*)(hp + 1));
- 85c:	0541                	addi	a0,a0,16
- 85e:	00000097          	auipc	ra,0x0
- 862:	eca080e7          	jalr	-310(ra) # 728 <free>
+ 86c:	0541                	addi	a0,a0,16
+ 86e:	00000097          	auipc	ra,0x0
+ 872:	eca080e7          	jalr	-310(ra) # 738 <free>
   return freep;
- 866:	00093503          	ld	a0,0(s2)
+ 876:	00093503          	ld	a0,0(s2)
       if((p = morecore(nunits)) == 0)
- 86a:	d971                	beqz	a0,83e <malloc+0x94>
+ 87a:	d971                	beqz	a0,84e <malloc+0x94>
   for(p = prevp->s.ptr; ; prevp = p, p = p->s.ptr){
- 86c:	611c                	ld	a5,0(a0)
+ 87c:	611c                	ld	a5,0(a0)
     if(p->s.size >= nunits){
- 86e:	4798                	lw	a4,8(a5)
- 870:	fa9775e3          	bgeu	a4,s1,81a <malloc+0x70>
+ 87e:	4798                	lw	a4,8(a5)
+ 880:	fa9775e3          	bgeu	a4,s1,82a <malloc+0x70>
     if(p == freep)
- 874:	00093703          	ld	a4,0(s2)
- 878:	853e                	mv	a0,a5
- 87a:	fef719e3          	bne	a4,a5,86c <malloc+0xc2>
+ 884:	00093703          	ld	a4,0(s2)
+ 888:	853e                	mv	a0,a5
+ 88a:	fef719e3          	bne	a4,a5,87c <malloc+0xc2>
   p = sbrk(nu * sizeof(Header));
- 87e:	8552                	mv	a0,s4
- 880:	00000097          	auipc	ra,0x0
- 884:	b80080e7          	jalr	-1152(ra) # 400 <sbrk>
+ 88e:	8552                	mv	a0,s4
+ 890:	00000097          	auipc	ra,0x0
+ 894:	b70080e7          	jalr	-1168(ra) # 400 <sbrk>
   if(p == (char*)-1)
- 888:	fd5518e3          	bne	a0,s5,858 <malloc+0xae>
+ 898:	fd5518e3          	bne	a0,s5,868 <malloc+0xae>
         return 0;
- 88c:	4501                	li	a0,0
- 88e:	bf45                	j	83e <malloc+0x94>
+ 89c:	4501                	li	a0,0
+ 89e:	bf45                	j	84e <malloc+0x94>
Binary files ./user/stressfs.o and ../xv6-labs-2021/user/stressfs.o differ
diff -urN ./user/stressfs.sym ../xv6-labs-2021/user/stressfs.sym
--- ./user/stressfs.sym	2021-12-05 17:54:42.000000000 +0800
+++ ../xv6-labs-2021/user/stressfs.sym	2021-11-26 14:46:16.000000000 +0800
@@ -1,7 +1,7 @@
 0000000000000000 .text
-0000000000000890 .rodata
-0000000000000948 .sbss
-0000000000000950 .bss
+00000000000008a0 .rodata
+0000000000000958 .sbss
+0000000000000960 .bss
 0000000000000000 .comment
 0000000000000000 .riscv.attributes
 0000000000000000 .debug_aranges
@@ -16,29 +16,31 @@
 0000000000000000 stressfs.c
 0000000000000000 ulib.c
 0000000000000000 printf.c
-0000000000000418 putc
-000000000000043a printint
-0000000000000930 digits
+0000000000000428 putc
+000000000000044a printint
+0000000000000940 digits
 0000000000000000 umalloc.c
-0000000000000948 freep
-0000000000000950 base
+0000000000000958 freep
+0000000000000960 base
 000000000000010c strcpy
-00000000000006f2 printf
-0000000000001141 __global_pointer$
+0000000000000702 printf
+0000000000001151 __global_pointer$
 00000000000002c6 memmove
 00000000000003c0 mknod
+0000000000000418 trace
 00000000000001c4 gets
-0000000000000941 __SDATA_BEGIN__
+0000000000000951 __SDATA_BEGIN__
 00000000000003f8 getpid
 0000000000000358 memcpy
-00000000000007aa malloc
+00000000000007ba malloc
 0000000000000408 sleep
+0000000000000420 sysinfo
 0000000000000388 pipe
 0000000000000398 write
 00000000000003d0 fstat
-00000000000006c4 fprintf
+00000000000006d4 fprintf
 00000000000003a8 kill
-00000000000004e6 vprintf
+00000000000004f6 vprintf
 00000000000003e8 chdir
 00000000000003b0 exec
 0000000000000380 wait
@@ -46,18 +48,18 @@
 00000000000003c8 unlink
 000000000000031e memcmp
 0000000000000370 fork
-0000000000000960 __BSS_END__
+0000000000000970 __BSS_END__
 0000000000000400 sbrk
 0000000000000410 uptime
-0000000000000941 __bss_start
+0000000000000951 __bss_start
 000000000000017e memset
 0000000000000000 main
 0000000000000128 strcmp
 00000000000003f0 dup
-0000000000000941 __DATA_BEGIN__
+0000000000000951 __DATA_BEGIN__
 0000000000000238 stat
-0000000000000941 _edata
-0000000000000960 _end
+0000000000000951 _edata
+0000000000000970 _end
 00000000000003d8 link
 0000000000000378 exit
 000000000000027e atoi
@@ -66,4 +68,4 @@
 00000000000001a0 strchr
 00000000000003e0 mkdir
 00000000000003a0 close
-0000000000000728 free
+0000000000000738 free
diff -urN ./user/sysinfotest.asm ../xv6-labs-2021/user/sysinfotest.asm
--- ./user/sysinfotest.asm	1970-01-01 08:00:00.000000000 +0800
+++ ../xv6-labs-2021/user/sysinfotest.asm	2021-11-26 14:46:16.000000000 +0800
@@ -0,0 +1,1704 @@
+
+user/_sysinfotestÔºö     Êñá‰ª∂Ê†ºÂºè elf64-littleriscv
+
+
+Disassembly of section .text:
+
+0000000000000000 <sinfo>:
+#include "kernel/sysinfo.h"
+#include "user/user.h"
+
+
+void
+sinfo(struct sysinfo *info) {
+   0:	1141                	addi	sp,sp,-16
+   2:	e406                	sd	ra,8(sp)
+   4:	e022                	sd	s0,0(sp)
+   6:	0800                	addi	s0,sp,16
+  if (sysinfo(info) < 0) {
+   8:	00000097          	auipc	ra,0x0
+   c:	64c080e7          	jalr	1612(ra) # 654 <sysinfo>
+  10:	00054663          	bltz	a0,1c <sinfo+0x1c>
+    printf("FAIL: sysinfo failed");
+    exit(1);
+  }
+}
+  14:	60a2                	ld	ra,8(sp)
+  16:	6402                	ld	s0,0(sp)
+  18:	0141                	addi	sp,sp,16
+  1a:	8082                	ret
+    printf("FAIL: sysinfo failed");
+  1c:	00001517          	auipc	a0,0x1
+  20:	abc50513          	addi	a0,a0,-1348 # ad8 <malloc+0xea>
+  24:	00001097          	auipc	ra,0x1
+  28:	912080e7          	jalr	-1774(ra) # 936 <printf>
+    exit(1);
+  2c:	4505                	li	a0,1
+  2e:	00000097          	auipc	ra,0x0
+  32:	57e080e7          	jalr	1406(ra) # 5ac <exit>
+
+0000000000000036 <countfree>:
+//
+// use sbrk() to count how many free physical memory pages there are.
+//
+int
+countfree()
+{
+  36:	7139                	addi	sp,sp,-64
+  38:	fc06                	sd	ra,56(sp)
+  3a:	f822                	sd	s0,48(sp)
+  3c:	f426                	sd	s1,40(sp)
+  3e:	f04a                	sd	s2,32(sp)
+  40:	ec4e                	sd	s3,24(sp)
+  42:	e852                	sd	s4,16(sp)
+  44:	0080                	addi	s0,sp,64
+  uint64 sz0 = (uint64)sbrk(0);
+  46:	4501                	li	a0,0
+  48:	00000097          	auipc	ra,0x0
+  4c:	5ec080e7          	jalr	1516(ra) # 634 <sbrk>
+  50:	8a2a                	mv	s4,a0
+  struct sysinfo info;
+  int n = 0;
+  52:	4481                	li	s1,0
+
+  while(1){
+    if((uint64)sbrk(PGSIZE) == 0xffffffffffffffff){
+  54:	597d                	li	s2,-1
+      break;
+    }
+    n += PGSIZE;
+  56:	6985                	lui	s3,0x1
+  58:	a019                	j	5e <countfree+0x28>
+  5a:	009984bb          	addw	s1,s3,s1
+    if((uint64)sbrk(PGSIZE) == 0xffffffffffffffff){
+  5e:	6505                	lui	a0,0x1
+  60:	00000097          	auipc	ra,0x0
+  64:	5d4080e7          	jalr	1492(ra) # 634 <sbrk>
+  68:	ff2519e3          	bne	a0,s2,5a <countfree+0x24>
+  }
+  sinfo(&info);
+  6c:	fc040513          	addi	a0,s0,-64
+  70:	00000097          	auipc	ra,0x0
+  74:	f90080e7          	jalr	-112(ra) # 0 <sinfo>
+  if (info.freemem != 0) {
+  78:	fc043583          	ld	a1,-64(s0)
+  7c:	e58d                	bnez	a1,a6 <countfree+0x70>
+    printf("FAIL: there is no free mem, but sysinfo.freemem=%d\n",
+      info.freemem);
+    exit(1);
+  }
+  sbrk(-((uint64)sbrk(0) - sz0));
+  7e:	4501                	li	a0,0
+  80:	00000097          	auipc	ra,0x0
+  84:	5b4080e7          	jalr	1460(ra) # 634 <sbrk>
+  88:	40aa053b          	subw	a0,s4,a0
+  8c:	00000097          	auipc	ra,0x0
+  90:	5a8080e7          	jalr	1448(ra) # 634 <sbrk>
+  return n;
+}
+  94:	8526                	mv	a0,s1
+  96:	70e2                	ld	ra,56(sp)
+  98:	7442                	ld	s0,48(sp)
+  9a:	74a2                	ld	s1,40(sp)
+  9c:	7902                	ld	s2,32(sp)
+  9e:	69e2                	ld	s3,24(sp)
+  a0:	6a42                	ld	s4,16(sp)
+  a2:	6121                	addi	sp,sp,64
+  a4:	8082                	ret
+    printf("FAIL: there is no free mem, but sysinfo.freemem=%d\n",
+  a6:	00001517          	auipc	a0,0x1
+  aa:	a4a50513          	addi	a0,a0,-1462 # af0 <malloc+0x102>
+  ae:	00001097          	auipc	ra,0x1
+  b2:	888080e7          	jalr	-1912(ra) # 936 <printf>
+    exit(1);
+  b6:	4505                	li	a0,1
+  b8:	00000097          	auipc	ra,0x0
+  bc:	4f4080e7          	jalr	1268(ra) # 5ac <exit>
+
+00000000000000c0 <testmem>:
+
+void
+testmem() {
+  c0:	7179                	addi	sp,sp,-48
+  c2:	f406                	sd	ra,40(sp)
+  c4:	f022                	sd	s0,32(sp)
+  c6:	ec26                	sd	s1,24(sp)
+  c8:	e84a                	sd	s2,16(sp)
+  ca:	1800                	addi	s0,sp,48
+  struct sysinfo info;
+  uint64 n = countfree();
+  cc:	00000097          	auipc	ra,0x0
+  d0:	f6a080e7          	jalr	-150(ra) # 36 <countfree>
+  d4:	84aa                	mv	s1,a0
+  
+  sinfo(&info);
+  d6:	fd040513          	addi	a0,s0,-48
+  da:	00000097          	auipc	ra,0x0
+  de:	f26080e7          	jalr	-218(ra) # 0 <sinfo>
+
+  if (info.freemem!= n) {
+  e2:	fd043583          	ld	a1,-48(s0)
+  e6:	04959e63          	bne	a1,s1,142 <testmem+0x82>
+    printf("FAIL: free mem %d (bytes) instead of %d\n", info.freemem, n);
+    exit(1);
+  }
+  
+  if((uint64)sbrk(PGSIZE) == 0xffffffffffffffff){
+  ea:	6505                	lui	a0,0x1
+  ec:	00000097          	auipc	ra,0x0
+  f0:	548080e7          	jalr	1352(ra) # 634 <sbrk>
+  f4:	57fd                	li	a5,-1
+  f6:	06f50463          	beq	a0,a5,15e <testmem+0x9e>
+    printf("sbrk failed");
+    exit(1);
+  }
+
+  sinfo(&info);
+  fa:	fd040513          	addi	a0,s0,-48
+  fe:	00000097          	auipc	ra,0x0
+ 102:	f02080e7          	jalr	-254(ra) # 0 <sinfo>
+    
+  if (info.freemem != n-PGSIZE) {
+ 106:	fd043603          	ld	a2,-48(s0)
+ 10a:	75fd                	lui	a1,0xfffff
+ 10c:	95a6                	add	a1,a1,s1
+ 10e:	06b61563          	bne	a2,a1,178 <testmem+0xb8>
+    printf("FAIL: free mem %d (bytes) instead of %d\n", n-PGSIZE, info.freemem);
+    exit(1);
+  }
+  
+  if((uint64)sbrk(-PGSIZE) == 0xffffffffffffffff){
+ 112:	757d                	lui	a0,0xfffff
+ 114:	00000097          	auipc	ra,0x0
+ 118:	520080e7          	jalr	1312(ra) # 634 <sbrk>
+ 11c:	57fd                	li	a5,-1
+ 11e:	06f50a63          	beq	a0,a5,192 <testmem+0xd2>
+    printf("sbrk failed");
+    exit(1);
+  }
+
+  sinfo(&info);
+ 122:	fd040513          	addi	a0,s0,-48
+ 126:	00000097          	auipc	ra,0x0
+ 12a:	eda080e7          	jalr	-294(ra) # 0 <sinfo>
+    
+  if (info.freemem != n) {
+ 12e:	fd043603          	ld	a2,-48(s0)
+ 132:	06961d63          	bne	a2,s1,1ac <testmem+0xec>
+    printf("FAIL: free mem %d (bytes) instead of %d\n", n, info.freemem);
+    exit(1);
+  }
+}
+ 136:	70a2                	ld	ra,40(sp)
+ 138:	7402                	ld	s0,32(sp)
+ 13a:	64e2                	ld	s1,24(sp)
+ 13c:	6942                	ld	s2,16(sp)
+ 13e:	6145                	addi	sp,sp,48
+ 140:	8082                	ret
+    printf("FAIL: free mem %d (bytes) instead of %d\n", info.freemem, n);
+ 142:	8626                	mv	a2,s1
+ 144:	00001517          	auipc	a0,0x1
+ 148:	9e450513          	addi	a0,a0,-1564 # b28 <malloc+0x13a>
+ 14c:	00000097          	auipc	ra,0x0
+ 150:	7ea080e7          	jalr	2026(ra) # 936 <printf>
+    exit(1);
+ 154:	4505                	li	a0,1
+ 156:	00000097          	auipc	ra,0x0
+ 15a:	456080e7          	jalr	1110(ra) # 5ac <exit>
+    printf("sbrk failed");
+ 15e:	00001517          	auipc	a0,0x1
+ 162:	9fa50513          	addi	a0,a0,-1542 # b58 <malloc+0x16a>
+ 166:	00000097          	auipc	ra,0x0
+ 16a:	7d0080e7          	jalr	2000(ra) # 936 <printf>
+    exit(1);
+ 16e:	4505                	li	a0,1
+ 170:	00000097          	auipc	ra,0x0
+ 174:	43c080e7          	jalr	1084(ra) # 5ac <exit>
+    printf("FAIL: free mem %d (bytes) instead of %d\n", n-PGSIZE, info.freemem);
+ 178:	00001517          	auipc	a0,0x1
+ 17c:	9b050513          	addi	a0,a0,-1616 # b28 <malloc+0x13a>
+ 180:	00000097          	auipc	ra,0x0
+ 184:	7b6080e7          	jalr	1974(ra) # 936 <printf>
+    exit(1);
+ 188:	4505                	li	a0,1
+ 18a:	00000097          	auipc	ra,0x0
+ 18e:	422080e7          	jalr	1058(ra) # 5ac <exit>
+    printf("sbrk failed");
+ 192:	00001517          	auipc	a0,0x1
+ 196:	9c650513          	addi	a0,a0,-1594 # b58 <malloc+0x16a>
+ 19a:	00000097          	auipc	ra,0x0
+ 19e:	79c080e7          	jalr	1948(ra) # 936 <printf>
+    exit(1);
+ 1a2:	4505                	li	a0,1
+ 1a4:	00000097          	auipc	ra,0x0
+ 1a8:	408080e7          	jalr	1032(ra) # 5ac <exit>
+    printf("FAIL: free mem %d (bytes) instead of %d\n", n, info.freemem);
+ 1ac:	85a6                	mv	a1,s1
+ 1ae:	00001517          	auipc	a0,0x1
+ 1b2:	97a50513          	addi	a0,a0,-1670 # b28 <malloc+0x13a>
+ 1b6:	00000097          	auipc	ra,0x0
+ 1ba:	780080e7          	jalr	1920(ra) # 936 <printf>
+    exit(1);
+ 1be:	4505                	li	a0,1
+ 1c0:	00000097          	auipc	ra,0x0
+ 1c4:	3ec080e7          	jalr	1004(ra) # 5ac <exit>
+
+00000000000001c8 <testcall>:
+
+void
+testcall() {
+ 1c8:	1101                	addi	sp,sp,-32
+ 1ca:	ec06                	sd	ra,24(sp)
+ 1cc:	e822                	sd	s0,16(sp)
+ 1ce:	1000                	addi	s0,sp,32
+  struct sysinfo info;
+  
+  if (sysinfo(&info) < 0) {
+ 1d0:	fe040513          	addi	a0,s0,-32
+ 1d4:	00000097          	auipc	ra,0x0
+ 1d8:	480080e7          	jalr	1152(ra) # 654 <sysinfo>
+ 1dc:	02054163          	bltz	a0,1fe <testcall+0x36>
+    printf("FAIL: sysinfo failed\n");
+    exit(1);
+  }
+
+  if (sysinfo((struct sysinfo *) 0xeaeb0b5b00002f5e) !=  0xffffffffffffffff) {
+ 1e0:	00001517          	auipc	a0,0x1
+ 1e4:	ac853503          	ld	a0,-1336(a0) # ca8 <__SDATA_BEGIN__>
+ 1e8:	00000097          	auipc	ra,0x0
+ 1ec:	46c080e7          	jalr	1132(ra) # 654 <sysinfo>
+ 1f0:	57fd                	li	a5,-1
+ 1f2:	02f51363          	bne	a0,a5,218 <testcall+0x50>
+    printf("FAIL: sysinfo succeeded with bad argument\n");
+    exit(1);
+  }
+}
+ 1f6:	60e2                	ld	ra,24(sp)
+ 1f8:	6442                	ld	s0,16(sp)
+ 1fa:	6105                	addi	sp,sp,32
+ 1fc:	8082                	ret
+    printf("FAIL: sysinfo failed\n");
+ 1fe:	00001517          	auipc	a0,0x1
+ 202:	96a50513          	addi	a0,a0,-1686 # b68 <malloc+0x17a>
+ 206:	00000097          	auipc	ra,0x0
+ 20a:	730080e7          	jalr	1840(ra) # 936 <printf>
+    exit(1);
+ 20e:	4505                	li	a0,1
+ 210:	00000097          	auipc	ra,0x0
+ 214:	39c080e7          	jalr	924(ra) # 5ac <exit>
+    printf("FAIL: sysinfo succeeded with bad argument\n");
+ 218:	00001517          	auipc	a0,0x1
+ 21c:	96850513          	addi	a0,a0,-1688 # b80 <malloc+0x192>
+ 220:	00000097          	auipc	ra,0x0
+ 224:	716080e7          	jalr	1814(ra) # 936 <printf>
+    exit(1);
+ 228:	4505                	li	a0,1
+ 22a:	00000097          	auipc	ra,0x0
+ 22e:	382080e7          	jalr	898(ra) # 5ac <exit>
+
+0000000000000232 <testproc>:
+
+void testproc() {
+ 232:	7139                	addi	sp,sp,-64
+ 234:	fc06                	sd	ra,56(sp)
+ 236:	f822                	sd	s0,48(sp)
+ 238:	f426                	sd	s1,40(sp)
+ 23a:	0080                	addi	s0,sp,64
+  struct sysinfo info;
+  uint64 nproc;
+  int status;
+  int pid;
+  
+  sinfo(&info);
+ 23c:	fd040513          	addi	a0,s0,-48
+ 240:	00000097          	auipc	ra,0x0
+ 244:	dc0080e7          	jalr	-576(ra) # 0 <sinfo>
+  nproc = info.nproc;
+ 248:	fd843483          	ld	s1,-40(s0)
+
+  pid = fork();
+ 24c:	00000097          	auipc	ra,0x0
+ 250:	358080e7          	jalr	856(ra) # 5a4 <fork>
+  if(pid < 0){
+ 254:	02054c63          	bltz	a0,28c <testproc+0x5a>
+    printf("sysinfotest: fork failed\n");
+    exit(1);
+  }
+  if(pid == 0){
+ 258:	ed21                	bnez	a0,2b0 <testproc+0x7e>
+    sinfo(&info);
+ 25a:	fd040513          	addi	a0,s0,-48
+ 25e:	00000097          	auipc	ra,0x0
+ 262:	da2080e7          	jalr	-606(ra) # 0 <sinfo>
+    if(info.nproc != nproc+1) {
+ 266:	fd843583          	ld	a1,-40(s0)
+ 26a:	00148613          	addi	a2,s1,1
+ 26e:	02c58c63          	beq	a1,a2,2a6 <testproc+0x74>
+      printf("sysinfotest: FAIL nproc is %d instead of %d\n", info.nproc, nproc+1);
+ 272:	00001517          	auipc	a0,0x1
+ 276:	95e50513          	addi	a0,a0,-1698 # bd0 <malloc+0x1e2>
+ 27a:	00000097          	auipc	ra,0x0
+ 27e:	6bc080e7          	jalr	1724(ra) # 936 <printf>
+      exit(1);
+ 282:	4505                	li	a0,1
+ 284:	00000097          	auipc	ra,0x0
+ 288:	328080e7          	jalr	808(ra) # 5ac <exit>
+    printf("sysinfotest: fork failed\n");
+ 28c:	00001517          	auipc	a0,0x1
+ 290:	92450513          	addi	a0,a0,-1756 # bb0 <malloc+0x1c2>
+ 294:	00000097          	auipc	ra,0x0
+ 298:	6a2080e7          	jalr	1698(ra) # 936 <printf>
+    exit(1);
+ 29c:	4505                	li	a0,1
+ 29e:	00000097          	auipc	ra,0x0
+ 2a2:	30e080e7          	jalr	782(ra) # 5ac <exit>
+    }
+    exit(0);
+ 2a6:	4501                	li	a0,0
+ 2a8:	00000097          	auipc	ra,0x0
+ 2ac:	304080e7          	jalr	772(ra) # 5ac <exit>
+  }
+  wait(&status);
+ 2b0:	fcc40513          	addi	a0,s0,-52
+ 2b4:	00000097          	auipc	ra,0x0
+ 2b8:	300080e7          	jalr	768(ra) # 5b4 <wait>
+  sinfo(&info);
+ 2bc:	fd040513          	addi	a0,s0,-48
+ 2c0:	00000097          	auipc	ra,0x0
+ 2c4:	d40080e7          	jalr	-704(ra) # 0 <sinfo>
+  if(info.nproc != nproc) {
+ 2c8:	fd843583          	ld	a1,-40(s0)
+ 2cc:	00959763          	bne	a1,s1,2da <testproc+0xa8>
+      printf("sysinfotest: FAIL nproc is %d instead of %d\n", info.nproc, nproc);
+      exit(1);
+  }
+}
+ 2d0:	70e2                	ld	ra,56(sp)
+ 2d2:	7442                	ld	s0,48(sp)
+ 2d4:	74a2                	ld	s1,40(sp)
+ 2d6:	6121                	addi	sp,sp,64
+ 2d8:	8082                	ret
+      printf("sysinfotest: FAIL nproc is %d instead of %d\n", info.nproc, nproc);
+ 2da:	8626                	mv	a2,s1
+ 2dc:	00001517          	auipc	a0,0x1
+ 2e0:	8f450513          	addi	a0,a0,-1804 # bd0 <malloc+0x1e2>
+ 2e4:	00000097          	auipc	ra,0x0
+ 2e8:	652080e7          	jalr	1618(ra) # 936 <printf>
+      exit(1);
+ 2ec:	4505                	li	a0,1
+ 2ee:	00000097          	auipc	ra,0x0
+ 2f2:	2be080e7          	jalr	702(ra) # 5ac <exit>
+
+00000000000002f6 <main>:
+
+int
+main(int argc, char *argv[])
+{
+ 2f6:	1141                	addi	sp,sp,-16
+ 2f8:	e406                	sd	ra,8(sp)
+ 2fa:	e022                	sd	s0,0(sp)
+ 2fc:	0800                	addi	s0,sp,16
+  printf("sysinfotest: start\n");
+ 2fe:	00001517          	auipc	a0,0x1
+ 302:	90250513          	addi	a0,a0,-1790 # c00 <malloc+0x212>
+ 306:	00000097          	auipc	ra,0x0
+ 30a:	630080e7          	jalr	1584(ra) # 936 <printf>
+  testcall();
+ 30e:	00000097          	auipc	ra,0x0
+ 312:	eba080e7          	jalr	-326(ra) # 1c8 <testcall>
+  testmem();
+ 316:	00000097          	auipc	ra,0x0
+ 31a:	daa080e7          	jalr	-598(ra) # c0 <testmem>
+  testproc();
+ 31e:	00000097          	auipc	ra,0x0
+ 322:	f14080e7          	jalr	-236(ra) # 232 <testproc>
+  printf("sysinfotest: OK\n");
+ 326:	00001517          	auipc	a0,0x1
+ 32a:	8f250513          	addi	a0,a0,-1806 # c18 <malloc+0x22a>
+ 32e:	00000097          	auipc	ra,0x0
+ 332:	608080e7          	jalr	1544(ra) # 936 <printf>
+  exit(0);
+ 336:	4501                	li	a0,0
+ 338:	00000097          	auipc	ra,0x0
+ 33c:	274080e7          	jalr	628(ra) # 5ac <exit>
+
+0000000000000340 <strcpy>:
+#include "kernel/fcntl.h"
+#include "user/user.h"
+
+char*
+strcpy(char *s, const char *t)
+{
+ 340:	1141                	addi	sp,sp,-16
+ 342:	e422                	sd	s0,8(sp)
+ 344:	0800                	addi	s0,sp,16
+  char *os;
+
+  os = s;
+  while((*s++ = *t++) != 0)
+ 346:	87aa                	mv	a5,a0
+ 348:	0585                	addi	a1,a1,1
+ 34a:	0785                	addi	a5,a5,1
+ 34c:	fff5c703          	lbu	a4,-1(a1) # ffffffffffffefff <__global_pointer$+0xffffffffffffdb5e>
+ 350:	fee78fa3          	sb	a4,-1(a5)
+ 354:	fb75                	bnez	a4,348 <strcpy+0x8>
+    ;
+  return os;
+}
+ 356:	6422                	ld	s0,8(sp)
+ 358:	0141                	addi	sp,sp,16
+ 35a:	8082                	ret
+
+000000000000035c <strcmp>:
+
+int
+strcmp(const char *p, const char *q)
+{
+ 35c:	1141                	addi	sp,sp,-16
+ 35e:	e422                	sd	s0,8(sp)
+ 360:	0800                	addi	s0,sp,16
+  while(*p && *p == *q)
+ 362:	00054783          	lbu	a5,0(a0)
+ 366:	cb91                	beqz	a5,37a <strcmp+0x1e>
+ 368:	0005c703          	lbu	a4,0(a1)
+ 36c:	00f71763          	bne	a4,a5,37a <strcmp+0x1e>
+    p++, q++;
+ 370:	0505                	addi	a0,a0,1
+ 372:	0585                	addi	a1,a1,1
+  while(*p && *p == *q)
+ 374:	00054783          	lbu	a5,0(a0)
+ 378:	fbe5                	bnez	a5,368 <strcmp+0xc>
+  return (uchar)*p - (uchar)*q;
+ 37a:	0005c503          	lbu	a0,0(a1)
+}
+ 37e:	40a7853b          	subw	a0,a5,a0
+ 382:	6422                	ld	s0,8(sp)
+ 384:	0141                	addi	sp,sp,16
+ 386:	8082                	ret
+
+0000000000000388 <strlen>:
+
+uint
+strlen(const char *s)
+{
+ 388:	1141                	addi	sp,sp,-16
+ 38a:	e422                	sd	s0,8(sp)
+ 38c:	0800                	addi	s0,sp,16
+  int n;
+
+  for(n = 0; s[n]; n++)
+ 38e:	00054783          	lbu	a5,0(a0)
+ 392:	cf91                	beqz	a5,3ae <strlen+0x26>
+ 394:	0505                	addi	a0,a0,1
+ 396:	87aa                	mv	a5,a0
+ 398:	4685                	li	a3,1
+ 39a:	9e89                	subw	a3,a3,a0
+ 39c:	00f6853b          	addw	a0,a3,a5
+ 3a0:	0785                	addi	a5,a5,1
+ 3a2:	fff7c703          	lbu	a4,-1(a5)
+ 3a6:	fb7d                	bnez	a4,39c <strlen+0x14>
+    ;
+  return n;
+}
+ 3a8:	6422                	ld	s0,8(sp)
+ 3aa:	0141                	addi	sp,sp,16
+ 3ac:	8082                	ret
+  for(n = 0; s[n]; n++)
+ 3ae:	4501                	li	a0,0
+ 3b0:	bfe5                	j	3a8 <strlen+0x20>
+
+00000000000003b2 <memset>:
+
+void*
+memset(void *dst, int c, uint n)
+{
+ 3b2:	1141                	addi	sp,sp,-16
+ 3b4:	e422                	sd	s0,8(sp)
+ 3b6:	0800                	addi	s0,sp,16
+  char *cdst = (char *) dst;
+  int i;
+  for(i = 0; i < n; i++){
+ 3b8:	ca19                	beqz	a2,3ce <memset+0x1c>
+ 3ba:	87aa                	mv	a5,a0
+ 3bc:	1602                	slli	a2,a2,0x20
+ 3be:	9201                	srli	a2,a2,0x20
+ 3c0:	00a60733          	add	a4,a2,a0
+    cdst[i] = c;
+ 3c4:	00b78023          	sb	a1,0(a5)
+  for(i = 0; i < n; i++){
+ 3c8:	0785                	addi	a5,a5,1
+ 3ca:	fee79de3          	bne	a5,a4,3c4 <memset+0x12>
+  }
+  return dst;
+}
+ 3ce:	6422                	ld	s0,8(sp)
+ 3d0:	0141                	addi	sp,sp,16
+ 3d2:	8082                	ret
+
+00000000000003d4 <strchr>:
+
+char*
+strchr(const char *s, char c)
+{
+ 3d4:	1141                	addi	sp,sp,-16
+ 3d6:	e422                	sd	s0,8(sp)
+ 3d8:	0800                	addi	s0,sp,16
+  for(; *s; s++)
+ 3da:	00054783          	lbu	a5,0(a0)
+ 3de:	cb99                	beqz	a5,3f4 <strchr+0x20>
+    if(*s == c)
+ 3e0:	00f58763          	beq	a1,a5,3ee <strchr+0x1a>
+  for(; *s; s++)
+ 3e4:	0505                	addi	a0,a0,1
+ 3e6:	00054783          	lbu	a5,0(a0)
+ 3ea:	fbfd                	bnez	a5,3e0 <strchr+0xc>
+      return (char*)s;
+  return 0;
+ 3ec:	4501                	li	a0,0
+}
+ 3ee:	6422                	ld	s0,8(sp)
+ 3f0:	0141                	addi	sp,sp,16
+ 3f2:	8082                	ret
+  return 0;
+ 3f4:	4501                	li	a0,0
+ 3f6:	bfe5                	j	3ee <strchr+0x1a>
+
+00000000000003f8 <gets>:
+
+char*
+gets(char *buf, int max)
+{
+ 3f8:	711d                	addi	sp,sp,-96
+ 3fa:	ec86                	sd	ra,88(sp)
+ 3fc:	e8a2                	sd	s0,80(sp)
+ 3fe:	e4a6                	sd	s1,72(sp)
+ 400:	e0ca                	sd	s2,64(sp)
+ 402:	fc4e                	sd	s3,56(sp)
+ 404:	f852                	sd	s4,48(sp)
+ 406:	f456                	sd	s5,40(sp)
+ 408:	f05a                	sd	s6,32(sp)
+ 40a:	ec5e                	sd	s7,24(sp)
+ 40c:	1080                	addi	s0,sp,96
+ 40e:	8baa                	mv	s7,a0
+ 410:	8a2e                	mv	s4,a1
+  int i, cc;
+  char c;
+
+  for(i=0; i+1 < max; ){
+ 412:	892a                	mv	s2,a0
+ 414:	4481                	li	s1,0
+    cc = read(0, &c, 1);
+    if(cc < 1)
+      break;
+    buf[i++] = c;
+    if(c == '\n' || c == '\r')
+ 416:	4aa9                	li	s5,10
+ 418:	4b35                	li	s6,13
+  for(i=0; i+1 < max; ){
+ 41a:	89a6                	mv	s3,s1
+ 41c:	2485                	addiw	s1,s1,1
+ 41e:	0344d863          	bge	s1,s4,44e <gets+0x56>
+    cc = read(0, &c, 1);
+ 422:	4605                	li	a2,1
+ 424:	faf40593          	addi	a1,s0,-81
+ 428:	4501                	li	a0,0
+ 42a:	00000097          	auipc	ra,0x0
+ 42e:	19a080e7          	jalr	410(ra) # 5c4 <read>
+    if(cc < 1)
+ 432:	00a05e63          	blez	a0,44e <gets+0x56>
+    buf[i++] = c;
+ 436:	faf44783          	lbu	a5,-81(s0)
+ 43a:	00f90023          	sb	a5,0(s2)
+    if(c == '\n' || c == '\r')
+ 43e:	01578763          	beq	a5,s5,44c <gets+0x54>
+ 442:	0905                	addi	s2,s2,1
+ 444:	fd679be3          	bne	a5,s6,41a <gets+0x22>
+  for(i=0; i+1 < max; ){
+ 448:	89a6                	mv	s3,s1
+ 44a:	a011                	j	44e <gets+0x56>
+ 44c:	89a6                	mv	s3,s1
+      break;
+  }
+  buf[i] = '\0';
+ 44e:	99de                	add	s3,s3,s7
+ 450:	00098023          	sb	zero,0(s3) # 1000 <__BSS_END__+0x338>
+  return buf;
+}
+ 454:	855e                	mv	a0,s7
+ 456:	60e6                	ld	ra,88(sp)
+ 458:	6446                	ld	s0,80(sp)
+ 45a:	64a6                	ld	s1,72(sp)
+ 45c:	6906                	ld	s2,64(sp)
+ 45e:	79e2                	ld	s3,56(sp)
+ 460:	7a42                	ld	s4,48(sp)
+ 462:	7aa2                	ld	s5,40(sp)
+ 464:	7b02                	ld	s6,32(sp)
+ 466:	6be2                	ld	s7,24(sp)
+ 468:	6125                	addi	sp,sp,96
+ 46a:	8082                	ret
+
+000000000000046c <stat>:
+
+int
+stat(const char *n, struct stat *st)
+{
+ 46c:	1101                	addi	sp,sp,-32
+ 46e:	ec06                	sd	ra,24(sp)
+ 470:	e822                	sd	s0,16(sp)
+ 472:	e426                	sd	s1,8(sp)
+ 474:	e04a                	sd	s2,0(sp)
+ 476:	1000                	addi	s0,sp,32
+ 478:	892e                	mv	s2,a1
+  int fd;
+  int r;
+
+  fd = open(n, O_RDONLY);
+ 47a:	4581                	li	a1,0
+ 47c:	00000097          	auipc	ra,0x0
+ 480:	170080e7          	jalr	368(ra) # 5ec <open>
+  if(fd < 0)
+ 484:	02054563          	bltz	a0,4ae <stat+0x42>
+ 488:	84aa                	mv	s1,a0
+    return -1;
+  r = fstat(fd, st);
+ 48a:	85ca                	mv	a1,s2
+ 48c:	00000097          	auipc	ra,0x0
+ 490:	178080e7          	jalr	376(ra) # 604 <fstat>
+ 494:	892a                	mv	s2,a0
+  close(fd);
+ 496:	8526                	mv	a0,s1
+ 498:	00000097          	auipc	ra,0x0
+ 49c:	13c080e7          	jalr	316(ra) # 5d4 <close>
+  return r;
+}
+ 4a0:	854a                	mv	a0,s2
+ 4a2:	60e2                	ld	ra,24(sp)
+ 4a4:	6442                	ld	s0,16(sp)
+ 4a6:	64a2                	ld	s1,8(sp)
+ 4a8:	6902                	ld	s2,0(sp)
+ 4aa:	6105                	addi	sp,sp,32
+ 4ac:	8082                	ret
+    return -1;
+ 4ae:	597d                	li	s2,-1
+ 4b0:	bfc5                	j	4a0 <stat+0x34>
+
+00000000000004b2 <atoi>:
+
+int
+atoi(const char *s)
+{
+ 4b2:	1141                	addi	sp,sp,-16
+ 4b4:	e422                	sd	s0,8(sp)
+ 4b6:	0800                	addi	s0,sp,16
+  int n;
+
+  n = 0;
+  while('0' <= *s && *s <= '9')
+ 4b8:	00054683          	lbu	a3,0(a0)
+ 4bc:	fd06879b          	addiw	a5,a3,-48
+ 4c0:	0ff7f793          	zext.b	a5,a5
+ 4c4:	4625                	li	a2,9
+ 4c6:	02f66863          	bltu	a2,a5,4f6 <atoi+0x44>
+ 4ca:	872a                	mv	a4,a0
+  n = 0;
+ 4cc:	4501                	li	a0,0
+    n = n*10 + *s++ - '0';
+ 4ce:	0705                	addi	a4,a4,1
+ 4d0:	0025179b          	slliw	a5,a0,0x2
+ 4d4:	9fa9                	addw	a5,a5,a0
+ 4d6:	0017979b          	slliw	a5,a5,0x1
+ 4da:	9fb5                	addw	a5,a5,a3
+ 4dc:	fd07851b          	addiw	a0,a5,-48
+  while('0' <= *s && *s <= '9')
+ 4e0:	00074683          	lbu	a3,0(a4)
+ 4e4:	fd06879b          	addiw	a5,a3,-48
+ 4e8:	0ff7f793          	zext.b	a5,a5
+ 4ec:	fef671e3          	bgeu	a2,a5,4ce <atoi+0x1c>
+  return n;
+}
+ 4f0:	6422                	ld	s0,8(sp)
+ 4f2:	0141                	addi	sp,sp,16
+ 4f4:	8082                	ret
+  n = 0;
+ 4f6:	4501                	li	a0,0
+ 4f8:	bfe5                	j	4f0 <atoi+0x3e>
+
+00000000000004fa <memmove>:
+
+void*
+memmove(void *vdst, const void *vsrc, int n)
+{
+ 4fa:	1141                	addi	sp,sp,-16
+ 4fc:	e422                	sd	s0,8(sp)
+ 4fe:	0800                	addi	s0,sp,16
+  char *dst;
+  const char *src;
+
+  dst = vdst;
+  src = vsrc;
+  if (src > dst) {
+ 500:	02b57463          	bgeu	a0,a1,528 <memmove+0x2e>
+    while(n-- > 0)
+ 504:	00c05f63          	blez	a2,522 <memmove+0x28>
+ 508:	1602                	slli	a2,a2,0x20
+ 50a:	9201                	srli	a2,a2,0x20
+ 50c:	00c507b3          	add	a5,a0,a2
+  dst = vdst;
+ 510:	872a                	mv	a4,a0
+      *dst++ = *src++;
+ 512:	0585                	addi	a1,a1,1
+ 514:	0705                	addi	a4,a4,1
+ 516:	fff5c683          	lbu	a3,-1(a1)
+ 51a:	fed70fa3          	sb	a3,-1(a4)
+    while(n-- > 0)
+ 51e:	fee79ae3          	bne	a5,a4,512 <memmove+0x18>
+    src += n;
+    while(n-- > 0)
+      *--dst = *--src;
+  }
+  return vdst;
+}
+ 522:	6422                	ld	s0,8(sp)
+ 524:	0141                	addi	sp,sp,16
+ 526:	8082                	ret
+    dst += n;
+ 528:	00c50733          	add	a4,a0,a2
+    src += n;
+ 52c:	95b2                	add	a1,a1,a2
+    while(n-- > 0)
+ 52e:	fec05ae3          	blez	a2,522 <memmove+0x28>
+ 532:	fff6079b          	addiw	a5,a2,-1
+ 536:	1782                	slli	a5,a5,0x20
+ 538:	9381                	srli	a5,a5,0x20
+ 53a:	fff7c793          	not	a5,a5
+ 53e:	97ba                	add	a5,a5,a4
+      *--dst = *--src;
+ 540:	15fd                	addi	a1,a1,-1
+ 542:	177d                	addi	a4,a4,-1
+ 544:	0005c683          	lbu	a3,0(a1)
+ 548:	00d70023          	sb	a3,0(a4)
+    while(n-- > 0)
+ 54c:	fee79ae3          	bne	a5,a4,540 <memmove+0x46>
+ 550:	bfc9                	j	522 <memmove+0x28>
+
+0000000000000552 <memcmp>:
+
+int
+memcmp(const void *s1, const void *s2, uint n)
+{
+ 552:	1141                	addi	sp,sp,-16
+ 554:	e422                	sd	s0,8(sp)
+ 556:	0800                	addi	s0,sp,16
+  const char *p1 = s1, *p2 = s2;
+  while (n-- > 0) {
+ 558:	ca05                	beqz	a2,588 <memcmp+0x36>
+ 55a:	fff6069b          	addiw	a3,a2,-1
+ 55e:	1682                	slli	a3,a3,0x20
+ 560:	9281                	srli	a3,a3,0x20
+ 562:	0685                	addi	a3,a3,1
+ 564:	96aa                	add	a3,a3,a0
+    if (*p1 != *p2) {
+ 566:	00054783          	lbu	a5,0(a0)
+ 56a:	0005c703          	lbu	a4,0(a1)
+ 56e:	00e79863          	bne	a5,a4,57e <memcmp+0x2c>
+      return *p1 - *p2;
+    }
+    p1++;
+ 572:	0505                	addi	a0,a0,1
+    p2++;
+ 574:	0585                	addi	a1,a1,1
+  while (n-- > 0) {
+ 576:	fed518e3          	bne	a0,a3,566 <memcmp+0x14>
+  }
+  return 0;
+ 57a:	4501                	li	a0,0
+ 57c:	a019                	j	582 <memcmp+0x30>
+      return *p1 - *p2;
+ 57e:	40e7853b          	subw	a0,a5,a4
+}
+ 582:	6422                	ld	s0,8(sp)
+ 584:	0141                	addi	sp,sp,16
+ 586:	8082                	ret
+  return 0;
+ 588:	4501                	li	a0,0
+ 58a:	bfe5                	j	582 <memcmp+0x30>
+
+000000000000058c <memcpy>:
+
+void *
+memcpy(void *dst, const void *src, uint n)
+{
+ 58c:	1141                	addi	sp,sp,-16
+ 58e:	e406                	sd	ra,8(sp)
+ 590:	e022                	sd	s0,0(sp)
+ 592:	0800                	addi	s0,sp,16
+  return memmove(dst, src, n);
+ 594:	00000097          	auipc	ra,0x0
+ 598:	f66080e7          	jalr	-154(ra) # 4fa <memmove>
+}
+ 59c:	60a2                	ld	ra,8(sp)
+ 59e:	6402                	ld	s0,0(sp)
+ 5a0:	0141                	addi	sp,sp,16
+ 5a2:	8082                	ret
+
+00000000000005a4 <fork>:
+# generated by usys.pl - do not edit
+#include "kernel/syscall.h"
+.global fork
+fork:
+ li a7, SYS_fork
+ 5a4:	4885                	li	a7,1
+ ecall
+ 5a6:	00000073          	ecall
+ ret
+ 5aa:	8082                	ret
+
+00000000000005ac <exit>:
+.global exit
+exit:
+ li a7, SYS_exit
+ 5ac:	4889                	li	a7,2
+ ecall
+ 5ae:	00000073          	ecall
+ ret
+ 5b2:	8082                	ret
+
+00000000000005b4 <wait>:
+.global wait
+wait:
+ li a7, SYS_wait
+ 5b4:	488d                	li	a7,3
+ ecall
+ 5b6:	00000073          	ecall
+ ret
+ 5ba:	8082                	ret
+
+00000000000005bc <pipe>:
+.global pipe
+pipe:
+ li a7, SYS_pipe
+ 5bc:	4891                	li	a7,4
+ ecall
+ 5be:	00000073          	ecall
+ ret
+ 5c2:	8082                	ret
+
+00000000000005c4 <read>:
+.global read
+read:
+ li a7, SYS_read
+ 5c4:	4895                	li	a7,5
+ ecall
+ 5c6:	00000073          	ecall
+ ret
+ 5ca:	8082                	ret
+
+00000000000005cc <write>:
+.global write
+write:
+ li a7, SYS_write
+ 5cc:	48c1                	li	a7,16
+ ecall
+ 5ce:	00000073          	ecall
+ ret
+ 5d2:	8082                	ret
+
+00000000000005d4 <close>:
+.global close
+close:
+ li a7, SYS_close
+ 5d4:	48d5                	li	a7,21
+ ecall
+ 5d6:	00000073          	ecall
+ ret
+ 5da:	8082                	ret
+
+00000000000005dc <kill>:
+.global kill
+kill:
+ li a7, SYS_kill
+ 5dc:	4899                	li	a7,6
+ ecall
+ 5de:	00000073          	ecall
+ ret
+ 5e2:	8082                	ret
+
+00000000000005e4 <exec>:
+.global exec
+exec:
+ li a7, SYS_exec
+ 5e4:	489d                	li	a7,7
+ ecall
+ 5e6:	00000073          	ecall
+ ret
+ 5ea:	8082                	ret
+
+00000000000005ec <open>:
+.global open
+open:
+ li a7, SYS_open
+ 5ec:	48bd                	li	a7,15
+ ecall
+ 5ee:	00000073          	ecall
+ ret
+ 5f2:	8082                	ret
+
+00000000000005f4 <mknod>:
+.global mknod
+mknod:
+ li a7, SYS_mknod
+ 5f4:	48c5                	li	a7,17
+ ecall
+ 5f6:	00000073          	ecall
+ ret
+ 5fa:	8082                	ret
+
+00000000000005fc <unlink>:
+.global unlink
+unlink:
+ li a7, SYS_unlink
+ 5fc:	48c9                	li	a7,18
+ ecall
+ 5fe:	00000073          	ecall
+ ret
+ 602:	8082                	ret
+
+0000000000000604 <fstat>:
+.global fstat
+fstat:
+ li a7, SYS_fstat
+ 604:	48a1                	li	a7,8
+ ecall
+ 606:	00000073          	ecall
+ ret
+ 60a:	8082                	ret
+
+000000000000060c <link>:
+.global link
+link:
+ li a7, SYS_link
+ 60c:	48cd                	li	a7,19
+ ecall
+ 60e:	00000073          	ecall
+ ret
+ 612:	8082                	ret
+
+0000000000000614 <mkdir>:
+.global mkdir
+mkdir:
+ li a7, SYS_mkdir
+ 614:	48d1                	li	a7,20
+ ecall
+ 616:	00000073          	ecall
+ ret
+ 61a:	8082                	ret
+
+000000000000061c <chdir>:
+.global chdir
+chdir:
+ li a7, SYS_chdir
+ 61c:	48a5                	li	a7,9
+ ecall
+ 61e:	00000073          	ecall
+ ret
+ 622:	8082                	ret
+
+0000000000000624 <dup>:
+.global dup
+dup:
+ li a7, SYS_dup
+ 624:	48a9                	li	a7,10
+ ecall
+ 626:	00000073          	ecall
+ ret
+ 62a:	8082                	ret
+
+000000000000062c <getpid>:
+.global getpid
+getpid:
+ li a7, SYS_getpid
+ 62c:	48ad                	li	a7,11
+ ecall
+ 62e:	00000073          	ecall
+ ret
+ 632:	8082                	ret
+
+0000000000000634 <sbrk>:
+.global sbrk
+sbrk:
+ li a7, SYS_sbrk
+ 634:	48b1                	li	a7,12
+ ecall
+ 636:	00000073          	ecall
+ ret
+ 63a:	8082                	ret
+
+000000000000063c <sleep>:
+.global sleep
+sleep:
+ li a7, SYS_sleep
+ 63c:	48b5                	li	a7,13
+ ecall
+ 63e:	00000073          	ecall
+ ret
+ 642:	8082                	ret
+
+0000000000000644 <uptime>:
+.global uptime
+uptime:
+ li a7, SYS_uptime
+ 644:	48b9                	li	a7,14
+ ecall
+ 646:	00000073          	ecall
+ ret
+ 64a:	8082                	ret
+
+000000000000064c <trace>:
+.global trace
+trace:
+ li a7, SYS_trace
+ 64c:	48d9                	li	a7,22
+ ecall
+ 64e:	00000073          	ecall
+ ret
+ 652:	8082                	ret
+
+0000000000000654 <sysinfo>:
+.global sysinfo
+sysinfo:
+ li a7, SYS_sysinfo
+ 654:	48dd                	li	a7,23
+ ecall
+ 656:	00000073          	ecall
+ ret
+ 65a:	8082                	ret
+
+000000000000065c <putc>:
+
+static char digits[] = "0123456789ABCDEF";
+
+static void
+putc(int fd, char c)
+{
+ 65c:	1101                	addi	sp,sp,-32
+ 65e:	ec06                	sd	ra,24(sp)
+ 660:	e822                	sd	s0,16(sp)
+ 662:	1000                	addi	s0,sp,32
+ 664:	feb407a3          	sb	a1,-17(s0)
+  write(fd, &c, 1);
+ 668:	4605                	li	a2,1
+ 66a:	fef40593          	addi	a1,s0,-17
+ 66e:	00000097          	auipc	ra,0x0
+ 672:	f5e080e7          	jalr	-162(ra) # 5cc <write>
+}
+ 676:	60e2                	ld	ra,24(sp)
+ 678:	6442                	ld	s0,16(sp)
+ 67a:	6105                	addi	sp,sp,32
+ 67c:	8082                	ret
+
+000000000000067e <printint>:
+
+static void
+printint(int fd, int xx, int base, int sgn)
+{
+ 67e:	7139                	addi	sp,sp,-64
+ 680:	fc06                	sd	ra,56(sp)
+ 682:	f822                	sd	s0,48(sp)
+ 684:	f426                	sd	s1,40(sp)
+ 686:	f04a                	sd	s2,32(sp)
+ 688:	ec4e                	sd	s3,24(sp)
+ 68a:	0080                	addi	s0,sp,64
+ 68c:	84aa                	mv	s1,a0
+  char buf[16];
+  int i, neg;
+  uint x;
+
+  neg = 0;
+  if(sgn && xx < 0){
+ 68e:	c299                	beqz	a3,694 <printint+0x16>
+ 690:	0805c963          	bltz	a1,722 <printint+0xa4>
+    neg = 1;
+    x = -xx;
+  } else {
+    x = xx;
+ 694:	2581                	sext.w	a1,a1
+  neg = 0;
+ 696:	4881                	li	a7,0
+ 698:	fc040693          	addi	a3,s0,-64
+  }
+
+  i = 0;
+ 69c:	4701                	li	a4,0
+  do{
+    buf[i++] = digits[x % base];
+ 69e:	2601                	sext.w	a2,a2
+ 6a0:	00000517          	auipc	a0,0x0
+ 6a4:	5f050513          	addi	a0,a0,1520 # c90 <digits>
+ 6a8:	883a                	mv	a6,a4
+ 6aa:	2705                	addiw	a4,a4,1
+ 6ac:	02c5f7bb          	remuw	a5,a1,a2
+ 6b0:	1782                	slli	a5,a5,0x20
+ 6b2:	9381                	srli	a5,a5,0x20
+ 6b4:	97aa                	add	a5,a5,a0
+ 6b6:	0007c783          	lbu	a5,0(a5)
+ 6ba:	00f68023          	sb	a5,0(a3)
+  }while((x /= base) != 0);
+ 6be:	0005879b          	sext.w	a5,a1
+ 6c2:	02c5d5bb          	divuw	a1,a1,a2
+ 6c6:	0685                	addi	a3,a3,1
+ 6c8:	fec7f0e3          	bgeu	a5,a2,6a8 <printint+0x2a>
+  if(neg)
+ 6cc:	00088c63          	beqz	a7,6e4 <printint+0x66>
+    buf[i++] = '-';
+ 6d0:	fd070793          	addi	a5,a4,-48
+ 6d4:	00878733          	add	a4,a5,s0
+ 6d8:	02d00793          	li	a5,45
+ 6dc:	fef70823          	sb	a5,-16(a4)
+ 6e0:	0028071b          	addiw	a4,a6,2
+
+  while(--i >= 0)
+ 6e4:	02e05863          	blez	a4,714 <printint+0x96>
+ 6e8:	fc040793          	addi	a5,s0,-64
+ 6ec:	00e78933          	add	s2,a5,a4
+ 6f0:	fff78993          	addi	s3,a5,-1
+ 6f4:	99ba                	add	s3,s3,a4
+ 6f6:	377d                	addiw	a4,a4,-1
+ 6f8:	1702                	slli	a4,a4,0x20
+ 6fa:	9301                	srli	a4,a4,0x20
+ 6fc:	40e989b3          	sub	s3,s3,a4
+    putc(fd, buf[i]);
+ 700:	fff94583          	lbu	a1,-1(s2)
+ 704:	8526                	mv	a0,s1
+ 706:	00000097          	auipc	ra,0x0
+ 70a:	f56080e7          	jalr	-170(ra) # 65c <putc>
+  while(--i >= 0)
+ 70e:	197d                	addi	s2,s2,-1
+ 710:	ff3918e3          	bne	s2,s3,700 <printint+0x82>
+}
+ 714:	70e2                	ld	ra,56(sp)
+ 716:	7442                	ld	s0,48(sp)
+ 718:	74a2                	ld	s1,40(sp)
+ 71a:	7902                	ld	s2,32(sp)
+ 71c:	69e2                	ld	s3,24(sp)
+ 71e:	6121                	addi	sp,sp,64
+ 720:	8082                	ret
+    x = -xx;
+ 722:	40b005bb          	negw	a1,a1
+    neg = 1;
+ 726:	4885                	li	a7,1
+    x = -xx;
+ 728:	bf85                	j	698 <printint+0x1a>
+
+000000000000072a <vprintf>:
+}
+
+// Print to the given fd. Only understands %d, %x, %p, %s.
+void
+vprintf(int fd, const char *fmt, va_list ap)
+{
+ 72a:	7119                	addi	sp,sp,-128
+ 72c:	fc86                	sd	ra,120(sp)
+ 72e:	f8a2                	sd	s0,112(sp)
+ 730:	f4a6                	sd	s1,104(sp)
+ 732:	f0ca                	sd	s2,96(sp)
+ 734:	ecce                	sd	s3,88(sp)
+ 736:	e8d2                	sd	s4,80(sp)
+ 738:	e4d6                	sd	s5,72(sp)
+ 73a:	e0da                	sd	s6,64(sp)
+ 73c:	fc5e                	sd	s7,56(sp)
+ 73e:	f862                	sd	s8,48(sp)
+ 740:	f466                	sd	s9,40(sp)
+ 742:	f06a                	sd	s10,32(sp)
+ 744:	ec6e                	sd	s11,24(sp)
+ 746:	0100                	addi	s0,sp,128
+  char *s;
+  int c, i, state;
+
+  state = 0;
+  for(i = 0; fmt[i]; i++){
+ 748:	0005c903          	lbu	s2,0(a1)
+ 74c:	18090f63          	beqz	s2,8ea <vprintf+0x1c0>
+ 750:	8aaa                	mv	s5,a0
+ 752:	8b32                	mv	s6,a2
+ 754:	00158493          	addi	s1,a1,1
+  state = 0;
+ 758:	4981                	li	s3,0
+      if(c == '%'){
+        state = '%';
+      } else {
+        putc(fd, c);
+      }
+    } else if(state == '%'){
+ 75a:	02500a13          	li	s4,37
+ 75e:	4c55                	li	s8,21
+ 760:	00000c97          	auipc	s9,0x0
+ 764:	4d8c8c93          	addi	s9,s9,1240 # c38 <malloc+0x24a>
+        printptr(fd, va_arg(ap, uint64));
+      } else if(c == 's'){
+        s = va_arg(ap, char*);
+        if(s == 0)
+          s = "(null)";
+        while(*s != 0){
+ 768:	02800d93          	li	s11,40
+  putc(fd, 'x');
+ 76c:	4d41                	li	s10,16
+    putc(fd, digits[x >> (sizeof(uint64) * 8 - 4)]);
+ 76e:	00000b97          	auipc	s7,0x0
+ 772:	522b8b93          	addi	s7,s7,1314 # c90 <digits>
+ 776:	a839                	j	794 <vprintf+0x6a>
+        putc(fd, c);
+ 778:	85ca                	mv	a1,s2
+ 77a:	8556                	mv	a0,s5
+ 77c:	00000097          	auipc	ra,0x0
+ 780:	ee0080e7          	jalr	-288(ra) # 65c <putc>
+ 784:	a019                	j	78a <vprintf+0x60>
+    } else if(state == '%'){
+ 786:	01498d63          	beq	s3,s4,7a0 <vprintf+0x76>
+  for(i = 0; fmt[i]; i++){
+ 78a:	0485                	addi	s1,s1,1
+ 78c:	fff4c903          	lbu	s2,-1(s1)
+ 790:	14090d63          	beqz	s2,8ea <vprintf+0x1c0>
+    if(state == 0){
+ 794:	fe0999e3          	bnez	s3,786 <vprintf+0x5c>
+      if(c == '%'){
+ 798:	ff4910e3          	bne	s2,s4,778 <vprintf+0x4e>
+        state = '%';
+ 79c:	89d2                	mv	s3,s4
+ 79e:	b7f5                	j	78a <vprintf+0x60>
+      if(c == 'd'){
+ 7a0:	11490c63          	beq	s2,s4,8b8 <vprintf+0x18e>
+ 7a4:	f9d9079b          	addiw	a5,s2,-99
+ 7a8:	0ff7f793          	zext.b	a5,a5
+ 7ac:	10fc6e63          	bltu	s8,a5,8c8 <vprintf+0x19e>
+ 7b0:	f9d9079b          	addiw	a5,s2,-99
+ 7b4:	0ff7f713          	zext.b	a4,a5
+ 7b8:	10ec6863          	bltu	s8,a4,8c8 <vprintf+0x19e>
+ 7bc:	00271793          	slli	a5,a4,0x2
+ 7c0:	97e6                	add	a5,a5,s9
+ 7c2:	439c                	lw	a5,0(a5)
+ 7c4:	97e6                	add	a5,a5,s9
+ 7c6:	8782                	jr	a5
+        printint(fd, va_arg(ap, int), 10, 1);
+ 7c8:	008b0913          	addi	s2,s6,8
+ 7cc:	4685                	li	a3,1
+ 7ce:	4629                	li	a2,10
+ 7d0:	000b2583          	lw	a1,0(s6)
+ 7d4:	8556                	mv	a0,s5
+ 7d6:	00000097          	auipc	ra,0x0
+ 7da:	ea8080e7          	jalr	-344(ra) # 67e <printint>
+ 7de:	8b4a                	mv	s6,s2
+      } else {
+        // Unknown % sequence.  Print it to draw attention.
+        putc(fd, '%');
+        putc(fd, c);
+      }
+      state = 0;
+ 7e0:	4981                	li	s3,0
+ 7e2:	b765                	j	78a <vprintf+0x60>
+        printint(fd, va_arg(ap, uint64), 10, 0);
+ 7e4:	008b0913          	addi	s2,s6,8
+ 7e8:	4681                	li	a3,0
+ 7ea:	4629                	li	a2,10
+ 7ec:	000b2583          	lw	a1,0(s6)
+ 7f0:	8556                	mv	a0,s5
+ 7f2:	00000097          	auipc	ra,0x0
+ 7f6:	e8c080e7          	jalr	-372(ra) # 67e <printint>
+ 7fa:	8b4a                	mv	s6,s2
+      state = 0;
+ 7fc:	4981                	li	s3,0
+ 7fe:	b771                	j	78a <vprintf+0x60>
+        printint(fd, va_arg(ap, int), 16, 0);
+ 800:	008b0913          	addi	s2,s6,8
+ 804:	4681                	li	a3,0
+ 806:	866a                	mv	a2,s10
+ 808:	000b2583          	lw	a1,0(s6)
+ 80c:	8556                	mv	a0,s5
+ 80e:	00000097          	auipc	ra,0x0
+ 812:	e70080e7          	jalr	-400(ra) # 67e <printint>
+ 816:	8b4a                	mv	s6,s2
+      state = 0;
+ 818:	4981                	li	s3,0
+ 81a:	bf85                	j	78a <vprintf+0x60>
+        printptr(fd, va_arg(ap, uint64));
+ 81c:	008b0793          	addi	a5,s6,8
+ 820:	f8f43423          	sd	a5,-120(s0)
+ 824:	000b3983          	ld	s3,0(s6)
+  putc(fd, '0');
+ 828:	03000593          	li	a1,48
+ 82c:	8556                	mv	a0,s5
+ 82e:	00000097          	auipc	ra,0x0
+ 832:	e2e080e7          	jalr	-466(ra) # 65c <putc>
+  putc(fd, 'x');
+ 836:	07800593          	li	a1,120
+ 83a:	8556                	mv	a0,s5
+ 83c:	00000097          	auipc	ra,0x0
+ 840:	e20080e7          	jalr	-480(ra) # 65c <putc>
+ 844:	896a                	mv	s2,s10
+    putc(fd, digits[x >> (sizeof(uint64) * 8 - 4)]);
+ 846:	03c9d793          	srli	a5,s3,0x3c
+ 84a:	97de                	add	a5,a5,s7
+ 84c:	0007c583          	lbu	a1,0(a5)
+ 850:	8556                	mv	a0,s5
+ 852:	00000097          	auipc	ra,0x0
+ 856:	e0a080e7          	jalr	-502(ra) # 65c <putc>
+  for (i = 0; i < (sizeof(uint64) * 2); i++, x <<= 4)
+ 85a:	0992                	slli	s3,s3,0x4
+ 85c:	397d                	addiw	s2,s2,-1
+ 85e:	fe0914e3          	bnez	s2,846 <vprintf+0x11c>
+        printptr(fd, va_arg(ap, uint64));
+ 862:	f8843b03          	ld	s6,-120(s0)
+      state = 0;
+ 866:	4981                	li	s3,0
+ 868:	b70d                	j	78a <vprintf+0x60>
+        s = va_arg(ap, char*);
+ 86a:	008b0913          	addi	s2,s6,8
+ 86e:	000b3983          	ld	s3,0(s6)
+        if(s == 0)
+ 872:	02098163          	beqz	s3,894 <vprintf+0x16a>
+        while(*s != 0){
+ 876:	0009c583          	lbu	a1,0(s3)
+ 87a:	c5ad                	beqz	a1,8e4 <vprintf+0x1ba>
+          putc(fd, *s);
+ 87c:	8556                	mv	a0,s5
+ 87e:	00000097          	auipc	ra,0x0
+ 882:	dde080e7          	jalr	-546(ra) # 65c <putc>
+          s++;
+ 886:	0985                	addi	s3,s3,1
+        while(*s != 0){
+ 888:	0009c583          	lbu	a1,0(s3)
+ 88c:	f9e5                	bnez	a1,87c <vprintf+0x152>
+        s = va_arg(ap, char*);
+ 88e:	8b4a                	mv	s6,s2
+      state = 0;
+ 890:	4981                	li	s3,0
+ 892:	bde5                	j	78a <vprintf+0x60>
+          s = "(null)";
+ 894:	00000997          	auipc	s3,0x0
+ 898:	39c98993          	addi	s3,s3,924 # c30 <malloc+0x242>
+        while(*s != 0){
+ 89c:	85ee                	mv	a1,s11
+ 89e:	bff9                	j	87c <vprintf+0x152>
+        putc(fd, va_arg(ap, uint));
+ 8a0:	008b0913          	addi	s2,s6,8
+ 8a4:	000b4583          	lbu	a1,0(s6)
+ 8a8:	8556                	mv	a0,s5
+ 8aa:	00000097          	auipc	ra,0x0
+ 8ae:	db2080e7          	jalr	-590(ra) # 65c <putc>
+ 8b2:	8b4a                	mv	s6,s2
+      state = 0;
+ 8b4:	4981                	li	s3,0
+ 8b6:	bdd1                	j	78a <vprintf+0x60>
+        putc(fd, c);
+ 8b8:	85d2                	mv	a1,s4
+ 8ba:	8556                	mv	a0,s5
+ 8bc:	00000097          	auipc	ra,0x0
+ 8c0:	da0080e7          	jalr	-608(ra) # 65c <putc>
+      state = 0;
+ 8c4:	4981                	li	s3,0
+ 8c6:	b5d1                	j	78a <vprintf+0x60>
+        putc(fd, '%');
+ 8c8:	85d2                	mv	a1,s4
+ 8ca:	8556                	mv	a0,s5
+ 8cc:	00000097          	auipc	ra,0x0
+ 8d0:	d90080e7          	jalr	-624(ra) # 65c <putc>
+        putc(fd, c);
+ 8d4:	85ca                	mv	a1,s2
+ 8d6:	8556                	mv	a0,s5
+ 8d8:	00000097          	auipc	ra,0x0
+ 8dc:	d84080e7          	jalr	-636(ra) # 65c <putc>
+      state = 0;
+ 8e0:	4981                	li	s3,0
+ 8e2:	b565                	j	78a <vprintf+0x60>
+        s = va_arg(ap, char*);
+ 8e4:	8b4a                	mv	s6,s2
+      state = 0;
+ 8e6:	4981                	li	s3,0
+ 8e8:	b54d                	j	78a <vprintf+0x60>
+    }
+  }
+}
+ 8ea:	70e6                	ld	ra,120(sp)
+ 8ec:	7446                	ld	s0,112(sp)
+ 8ee:	74a6                	ld	s1,104(sp)
+ 8f0:	7906                	ld	s2,96(sp)
+ 8f2:	69e6                	ld	s3,88(sp)
+ 8f4:	6a46                	ld	s4,80(sp)
+ 8f6:	6aa6                	ld	s5,72(sp)
+ 8f8:	6b06                	ld	s6,64(sp)
+ 8fa:	7be2                	ld	s7,56(sp)
+ 8fc:	7c42                	ld	s8,48(sp)
+ 8fe:	7ca2                	ld	s9,40(sp)
+ 900:	7d02                	ld	s10,32(sp)
+ 902:	6de2                	ld	s11,24(sp)
+ 904:	6109                	addi	sp,sp,128
+ 906:	8082                	ret
+
+0000000000000908 <fprintf>:
+
+void
+fprintf(int fd, const char *fmt, ...)
+{
+ 908:	715d                	addi	sp,sp,-80
+ 90a:	ec06                	sd	ra,24(sp)
+ 90c:	e822                	sd	s0,16(sp)
+ 90e:	1000                	addi	s0,sp,32
+ 910:	e010                	sd	a2,0(s0)
+ 912:	e414                	sd	a3,8(s0)
+ 914:	e818                	sd	a4,16(s0)
+ 916:	ec1c                	sd	a5,24(s0)
+ 918:	03043023          	sd	a6,32(s0)
+ 91c:	03143423          	sd	a7,40(s0)
+  va_list ap;
+
+  va_start(ap, fmt);
+ 920:	fe843423          	sd	s0,-24(s0)
+  vprintf(fd, fmt, ap);
+ 924:	8622                	mv	a2,s0
+ 926:	00000097          	auipc	ra,0x0
+ 92a:	e04080e7          	jalr	-508(ra) # 72a <vprintf>
+}
+ 92e:	60e2                	ld	ra,24(sp)
+ 930:	6442                	ld	s0,16(sp)
+ 932:	6161                	addi	sp,sp,80
+ 934:	8082                	ret
+
+0000000000000936 <printf>:
+
+void
+printf(const char *fmt, ...)
+{
+ 936:	711d                	addi	sp,sp,-96
+ 938:	ec06                	sd	ra,24(sp)
+ 93a:	e822                	sd	s0,16(sp)
+ 93c:	1000                	addi	s0,sp,32
+ 93e:	e40c                	sd	a1,8(s0)
+ 940:	e810                	sd	a2,16(s0)
+ 942:	ec14                	sd	a3,24(s0)
+ 944:	f018                	sd	a4,32(s0)
+ 946:	f41c                	sd	a5,40(s0)
+ 948:	03043823          	sd	a6,48(s0)
+ 94c:	03143c23          	sd	a7,56(s0)
+  va_list ap;
+
+  va_start(ap, fmt);
+ 950:	00840613          	addi	a2,s0,8
+ 954:	fec43423          	sd	a2,-24(s0)
+  vprintf(1, fmt, ap);
+ 958:	85aa                	mv	a1,a0
+ 95a:	4505                	li	a0,1
+ 95c:	00000097          	auipc	ra,0x0
+ 960:	dce080e7          	jalr	-562(ra) # 72a <vprintf>
+}
+ 964:	60e2                	ld	ra,24(sp)
+ 966:	6442                	ld	s0,16(sp)
+ 968:	6125                	addi	sp,sp,96
+ 96a:	8082                	ret
+
+000000000000096c <free>:
+static Header base;
+static Header *freep;
+
+void
+free(void *ap)
+{
+ 96c:	1141                	addi	sp,sp,-16
+ 96e:	e422                	sd	s0,8(sp)
+ 970:	0800                	addi	s0,sp,16
+  Header *bp, *p;
+
+  bp = (Header*)ap - 1;
+ 972:	ff050693          	addi	a3,a0,-16
+  for(p = freep; !(bp > p && bp < p->s.ptr); p = p->s.ptr)
+ 976:	00000797          	auipc	a5,0x0
+ 97a:	33a7b783          	ld	a5,826(a5) # cb0 <freep>
+ 97e:	a02d                	j	9a8 <free+0x3c>
+    if(p >= p->s.ptr && (bp > p || bp < p->s.ptr))
+      break;
+  if(bp + bp->s.size == p->s.ptr){
+    bp->s.size += p->s.ptr->s.size;
+ 980:	4618                	lw	a4,8(a2)
+ 982:	9f2d                	addw	a4,a4,a1
+ 984:	fee52c23          	sw	a4,-8(a0)
+    bp->s.ptr = p->s.ptr->s.ptr;
+ 988:	6398                	ld	a4,0(a5)
+ 98a:	6310                	ld	a2,0(a4)
+ 98c:	a83d                	j	9ca <free+0x5e>
+  } else
+    bp->s.ptr = p->s.ptr;
+  if(p + p->s.size == bp){
+    p->s.size += bp->s.size;
+ 98e:	ff852703          	lw	a4,-8(a0)
+ 992:	9f31                	addw	a4,a4,a2
+ 994:	c798                	sw	a4,8(a5)
+    p->s.ptr = bp->s.ptr;
+ 996:	ff053683          	ld	a3,-16(a0)
+ 99a:	a091                	j	9de <free+0x72>
+    if(p >= p->s.ptr && (bp > p || bp < p->s.ptr))
+ 99c:	6398                	ld	a4,0(a5)
+ 99e:	00e7e463          	bltu	a5,a4,9a6 <free+0x3a>
+ 9a2:	00e6ea63          	bltu	a3,a4,9b6 <free+0x4a>
+{
+ 9a6:	87ba                	mv	a5,a4
+  for(p = freep; !(bp > p && bp < p->s.ptr); p = p->s.ptr)
+ 9a8:	fed7fae3          	bgeu	a5,a3,99c <free+0x30>
+ 9ac:	6398                	ld	a4,0(a5)
+ 9ae:	00e6e463          	bltu	a3,a4,9b6 <free+0x4a>
+    if(p >= p->s.ptr && (bp > p || bp < p->s.ptr))
+ 9b2:	fee7eae3          	bltu	a5,a4,9a6 <free+0x3a>
+  if(bp + bp->s.size == p->s.ptr){
+ 9b6:	ff852583          	lw	a1,-8(a0)
+ 9ba:	6390                	ld	a2,0(a5)
+ 9bc:	02059813          	slli	a6,a1,0x20
+ 9c0:	01c85713          	srli	a4,a6,0x1c
+ 9c4:	9736                	add	a4,a4,a3
+ 9c6:	fae60de3          	beq	a2,a4,980 <free+0x14>
+    bp->s.ptr = p->s.ptr->s.ptr;
+ 9ca:	fec53823          	sd	a2,-16(a0)
+  if(p + p->s.size == bp){
+ 9ce:	4790                	lw	a2,8(a5)
+ 9d0:	02061593          	slli	a1,a2,0x20
+ 9d4:	01c5d713          	srli	a4,a1,0x1c
+ 9d8:	973e                	add	a4,a4,a5
+ 9da:	fae68ae3          	beq	a3,a4,98e <free+0x22>
+    p->s.ptr = bp->s.ptr;
+ 9de:	e394                	sd	a3,0(a5)
+  } else
+    p->s.ptr = bp;
+  freep = p;
+ 9e0:	00000717          	auipc	a4,0x0
+ 9e4:	2cf73823          	sd	a5,720(a4) # cb0 <freep>
+}
+ 9e8:	6422                	ld	s0,8(sp)
+ 9ea:	0141                	addi	sp,sp,16
+ 9ec:	8082                	ret
+
+00000000000009ee <malloc>:
+  return freep;
+}
+
+void*
+malloc(uint nbytes)
+{
+ 9ee:	7139                	addi	sp,sp,-64
+ 9f0:	fc06                	sd	ra,56(sp)
+ 9f2:	f822                	sd	s0,48(sp)
+ 9f4:	f426                	sd	s1,40(sp)
+ 9f6:	f04a                	sd	s2,32(sp)
+ 9f8:	ec4e                	sd	s3,24(sp)
+ 9fa:	e852                	sd	s4,16(sp)
+ 9fc:	e456                	sd	s5,8(sp)
+ 9fe:	e05a                	sd	s6,0(sp)
+ a00:	0080                	addi	s0,sp,64
+  Header *p, *prevp;
+  uint nunits;
+
+  nunits = (nbytes + sizeof(Header) - 1)/sizeof(Header) + 1;
+ a02:	02051493          	slli	s1,a0,0x20
+ a06:	9081                	srli	s1,s1,0x20
+ a08:	04bd                	addi	s1,s1,15
+ a0a:	8091                	srli	s1,s1,0x4
+ a0c:	0014899b          	addiw	s3,s1,1
+ a10:	0485                	addi	s1,s1,1
+  if((prevp = freep) == 0){
+ a12:	00000517          	auipc	a0,0x0
+ a16:	29e53503          	ld	a0,670(a0) # cb0 <freep>
+ a1a:	c515                	beqz	a0,a46 <malloc+0x58>
+    base.s.ptr = freep = prevp = &base;
+    base.s.size = 0;
+  }
+  for(p = prevp->s.ptr; ; prevp = p, p = p->s.ptr){
+ a1c:	611c                	ld	a5,0(a0)
+    if(p->s.size >= nunits){
+ a1e:	4798                	lw	a4,8(a5)
+ a20:	02977f63          	bgeu	a4,s1,a5e <malloc+0x70>
+ a24:	8a4e                	mv	s4,s3
+ a26:	0009871b          	sext.w	a4,s3
+ a2a:	6685                	lui	a3,0x1
+ a2c:	00d77363          	bgeu	a4,a3,a32 <malloc+0x44>
+ a30:	6a05                	lui	s4,0x1
+ a32:	000a0b1b          	sext.w	s6,s4
+  p = sbrk(nu * sizeof(Header));
+ a36:	004a1a1b          	slliw	s4,s4,0x4
+        p->s.size = nunits;
+      }
+      freep = prevp;
+      return (void*)(p + 1);
+    }
+    if(p == freep)
+ a3a:	00000917          	auipc	s2,0x0
+ a3e:	27690913          	addi	s2,s2,630 # cb0 <freep>
+  if(p == (char*)-1)
+ a42:	5afd                	li	s5,-1
+ a44:	a895                	j	ab8 <malloc+0xca>
+    base.s.ptr = freep = prevp = &base;
+ a46:	00000797          	auipc	a5,0x0
+ a4a:	27278793          	addi	a5,a5,626 # cb8 <base>
+ a4e:	00000717          	auipc	a4,0x0
+ a52:	26f73123          	sd	a5,610(a4) # cb0 <freep>
+ a56:	e39c                	sd	a5,0(a5)
+    base.s.size = 0;
+ a58:	0007a423          	sw	zero,8(a5)
+    if(p->s.size >= nunits){
+ a5c:	b7e1                	j	a24 <malloc+0x36>
+      if(p->s.size == nunits)
+ a5e:	02e48c63          	beq	s1,a4,a96 <malloc+0xa8>
+        p->s.size -= nunits;
+ a62:	4137073b          	subw	a4,a4,s3
+ a66:	c798                	sw	a4,8(a5)
+        p += p->s.size;
+ a68:	02071693          	slli	a3,a4,0x20
+ a6c:	01c6d713          	srli	a4,a3,0x1c
+ a70:	97ba                	add	a5,a5,a4
+        p->s.size = nunits;
+ a72:	0137a423          	sw	s3,8(a5)
+      freep = prevp;
+ a76:	00000717          	auipc	a4,0x0
+ a7a:	22a73d23          	sd	a0,570(a4) # cb0 <freep>
+      return (void*)(p + 1);
+ a7e:	01078513          	addi	a0,a5,16
+      if((p = morecore(nunits)) == 0)
+        return 0;
+  }
+}
+ a82:	70e2                	ld	ra,56(sp)
+ a84:	7442                	ld	s0,48(sp)
+ a86:	74a2                	ld	s1,40(sp)
+ a88:	7902                	ld	s2,32(sp)
+ a8a:	69e2                	ld	s3,24(sp)
+ a8c:	6a42                	ld	s4,16(sp)
+ a8e:	6aa2                	ld	s5,8(sp)
+ a90:	6b02                	ld	s6,0(sp)
+ a92:	6121                	addi	sp,sp,64
+ a94:	8082                	ret
+        prevp->s.ptr = p->s.ptr;
+ a96:	6398                	ld	a4,0(a5)
+ a98:	e118                	sd	a4,0(a0)
+ a9a:	bff1                	j	a76 <malloc+0x88>
+  hp->s.size = nu;
+ a9c:	01652423          	sw	s6,8(a0)
+  free((void*)(hp + 1));
+ aa0:	0541                	addi	a0,a0,16
+ aa2:	00000097          	auipc	ra,0x0
+ aa6:	eca080e7          	jalr	-310(ra) # 96c <free>
+  return freep;
+ aaa:	00093503          	ld	a0,0(s2)
+      if((p = morecore(nunits)) == 0)
+ aae:	d971                	beqz	a0,a82 <malloc+0x94>
+  for(p = prevp->s.ptr; ; prevp = p, p = p->s.ptr){
+ ab0:	611c                	ld	a5,0(a0)
+    if(p->s.size >= nunits){
+ ab2:	4798                	lw	a4,8(a5)
+ ab4:	fa9775e3          	bgeu	a4,s1,a5e <malloc+0x70>
+    if(p == freep)
+ ab8:	00093703          	ld	a4,0(s2)
+ abc:	853e                	mv	a0,a5
+ abe:	fef719e3          	bne	a4,a5,ab0 <malloc+0xc2>
+  p = sbrk(nu * sizeof(Header));
+ ac2:	8552                	mv	a0,s4
+ ac4:	00000097          	auipc	ra,0x0
+ ac8:	b70080e7          	jalr	-1168(ra) # 634 <sbrk>
+  if(p == (char*)-1)
+ acc:	fd5518e3          	bne	a0,s5,a9c <malloc+0xae>
+        return 0;
+ ad0:	4501                	li	a0,0
+ ad2:	bf45                	j	a82 <malloc+0x94>
diff -urN ./user/sysinfotest.d ../xv6-labs-2021/user/sysinfotest.d
--- ./user/sysinfotest.d	1970-01-01 08:00:00.000000000 +0800
+++ ../xv6-labs-2021/user/sysinfotest.d	2021-11-26 14:46:16.000000000 +0800
@@ -0,0 +1,2 @@
+user/sysinfotest.o: user/sysinfotest.c kernel/types.h kernel/riscv.h \
+ kernel/sysinfo.h user/user.h
Binary files ./user/sysinfotest.o and ../xv6-labs-2021/user/sysinfotest.o differ
diff -urN ./user/sysinfotest.sym ../xv6-labs-2021/user/sysinfotest.sym
--- ./user/sysinfotest.sym	1970-01-01 08:00:00.000000000 +0800
+++ ../xv6-labs-2021/user/sysinfotest.sym	2021-11-26 14:46:16.000000000 +0800
@@ -0,0 +1,77 @@
+0000000000000000 .text
+0000000000000ad8 .rodata
+0000000000000ca8 .sdata
+0000000000000cb0 .sbss
+0000000000000cb8 .bss
+0000000000000000 .comment
+0000000000000000 .riscv.attributes
+0000000000000000 .debug_aranges
+0000000000000000 .debug_info
+0000000000000000 .debug_abbrev
+0000000000000000 .debug_line
+0000000000000000 .debug_frame
+0000000000000000 .debug_str
+0000000000000000 .debug_line_str
+0000000000000000 .debug_loclists
+0000000000000000 .debug_rnglists
+0000000000000000 sysinfotest.c
+0000000000000000 ulib.c
+0000000000000000 printf.c
+000000000000065c putc
+000000000000067e printint
+0000000000000c90 digits
+0000000000000000 umalloc.c
+0000000000000cb0 freep
+0000000000000cb8 base
+0000000000000340 strcpy
+0000000000000936 printf
+00000000000014a1 __global_pointer$
+00000000000004fa memmove
+00000000000005f4 mknod
+000000000000064c trace
+00000000000003f8 gets
+0000000000000ca8 __SDATA_BEGIN__
+000000000000062c getpid
+000000000000058c memcpy
+00000000000009ee malloc
+000000000000063c sleep
+0000000000000654 sysinfo
+0000000000000000 sinfo
+0000000000000232 testproc
+00000000000005bc pipe
+00000000000005cc write
+0000000000000604 fstat
+0000000000000908 fprintf
+00000000000005dc kill
+000000000000072a vprintf
+00000000000001c8 testcall
+000000000000061c chdir
+00000000000005e4 exec
+00000000000005b4 wait
+00000000000005c4 read
+00000000000005fc unlink
+0000000000000552 memcmp
+00000000000005a4 fork
+0000000000000cc8 __BSS_END__
+0000000000000634 sbrk
+0000000000000644 uptime
+0000000000000cb0 __bss_start
+00000000000003b2 memset
+00000000000002f6 main
+000000000000035c strcmp
+00000000000000c0 testmem
+0000000000000624 dup
+0000000000000ca1 __DATA_BEGIN__
+000000000000046c stat
+0000000000000cb0 _edata
+0000000000000cc8 _end
+0000000000000036 countfree
+000000000000060c link
+00000000000005ac exit
+00000000000004b2 atoi
+0000000000000388 strlen
+00000000000005ec open
+00000000000003d4 strchr
+0000000000000614 mkdir
+00000000000005d4 close
+000000000000096c free
diff -urN ./user/trace.asm ../xv6-labs-2021/user/trace.asm
--- ./user/trace.asm	1970-01-01 08:00:00.000000000 +0800
+++ ../xv6-labs-2021/user/trace.asm	2021-11-26 14:46:16.000000000 +0800
@@ -0,0 +1,1374 @@
+
+user/_traceÔºö     Êñá‰ª∂Ê†ºÂºè elf64-littleriscv
+
+
+Disassembly of section .text:
+
+0000000000000000 <main>:
+#include "kernel/stat.h"
+#include "user/user.h"
+
+int
+main(int argc, char *argv[])
+{
+   0:	712d                	addi	sp,sp,-288
+   2:	ee06                	sd	ra,280(sp)
+   4:	ea22                	sd	s0,272(sp)
+   6:	e626                	sd	s1,264(sp)
+   8:	e24a                	sd	s2,256(sp)
+   a:	1200                	addi	s0,sp,288
+   c:	892e                	mv	s2,a1
+  int i;
+  char *nargv[MAXARG];
+
+  if(argc < 3 || (argv[1][0] < '0' || argv[1][0] > '9')){
+   e:	4789                	li	a5,2
+  10:	00a7dd63          	bge	a5,a0,2a <main+0x2a>
+  14:	84aa                	mv	s1,a0
+  16:	6588                	ld	a0,8(a1)
+  18:	00054783          	lbu	a5,0(a0)
+  1c:	fd07879b          	addiw	a5,a5,-48
+  20:	0ff7f793          	zext.b	a5,a5
+  24:	4725                	li	a4,9
+  26:	02f77263          	bgeu	a4,a5,4a <main+0x4a>
+    fprintf(2, "Usage: %s mask command\n", argv[0]);
+  2a:	00093603          	ld	a2,0(s2)
+  2e:	00001597          	auipc	a1,0x1
+  32:	82a58593          	addi	a1,a1,-2006 # 858 <malloc+0xea>
+  36:	4509                	li	a0,2
+  38:	00000097          	auipc	ra,0x0
+  3c:	650080e7          	jalr	1616(ra) # 688 <fprintf>
+    exit(1);
+  40:	4505                	li	a0,1
+  42:	00000097          	auipc	ra,0x0
+  46:	2ea080e7          	jalr	746(ra) # 32c <exit>
+  }
+
+  if (trace(atoi(argv[1])) < 0) {
+  4a:	00000097          	auipc	ra,0x0
+  4e:	1e8080e7          	jalr	488(ra) # 232 <atoi>
+  52:	00000097          	auipc	ra,0x0
+  56:	37a080e7          	jalr	890(ra) # 3cc <trace>
+  5a:	04054363          	bltz	a0,a0 <main+0xa0>
+  5e:	01090793          	addi	a5,s2,16
+  62:	ee040713          	addi	a4,s0,-288
+  66:	34f5                	addiw	s1,s1,-3
+  68:	02049693          	slli	a3,s1,0x20
+  6c:	01d6d493          	srli	s1,a3,0x1d
+  70:	94be                	add	s1,s1,a5
+  72:	10090593          	addi	a1,s2,256
+    fprintf(2, "%s: trace failed\n", argv[0]);
+    exit(1);
+  }
+  
+  for(i = 2; i < argc && i < MAXARG; i++){
+    nargv[i-2] = argv[i];
+  76:	6394                	ld	a3,0(a5)
+  78:	e314                	sd	a3,0(a4)
+  for(i = 2; i < argc && i < MAXARG; i++){
+  7a:	00978663          	beq	a5,s1,86 <main+0x86>
+  7e:	07a1                	addi	a5,a5,8
+  80:	0721                	addi	a4,a4,8
+  82:	feb79ae3          	bne	a5,a1,76 <main+0x76>
+  }
+  exec(nargv[0], nargv);
+  86:	ee040593          	addi	a1,s0,-288
+  8a:	ee043503          	ld	a0,-288(s0)
+  8e:	00000097          	auipc	ra,0x0
+  92:	2d6080e7          	jalr	726(ra) # 364 <exec>
+  exit(0);
+  96:	4501                	li	a0,0
+  98:	00000097          	auipc	ra,0x0
+  9c:	294080e7          	jalr	660(ra) # 32c <exit>
+    fprintf(2, "%s: trace failed\n", argv[0]);
+  a0:	00093603          	ld	a2,0(s2)
+  a4:	00000597          	auipc	a1,0x0
+  a8:	7cc58593          	addi	a1,a1,1996 # 870 <malloc+0x102>
+  ac:	4509                	li	a0,2
+  ae:	00000097          	auipc	ra,0x0
+  b2:	5da080e7          	jalr	1498(ra) # 688 <fprintf>
+    exit(1);
+  b6:	4505                	li	a0,1
+  b8:	00000097          	auipc	ra,0x0
+  bc:	274080e7          	jalr	628(ra) # 32c <exit>
+
+00000000000000c0 <strcpy>:
+#include "kernel/fcntl.h"
+#include "user/user.h"
+
+char*
+strcpy(char *s, const char *t)
+{
+  c0:	1141                	addi	sp,sp,-16
+  c2:	e422                	sd	s0,8(sp)
+  c4:	0800                	addi	s0,sp,16
+  char *os;
+
+  os = s;
+  while((*s++ = *t++) != 0)
+  c6:	87aa                	mv	a5,a0
+  c8:	0585                	addi	a1,a1,1
+  ca:	0785                	addi	a5,a5,1
+  cc:	fff5c703          	lbu	a4,-1(a1)
+  d0:	fee78fa3          	sb	a4,-1(a5)
+  d4:	fb75                	bnez	a4,c8 <strcpy+0x8>
+    ;
+  return os;
+}
+  d6:	6422                	ld	s0,8(sp)
+  d8:	0141                	addi	sp,sp,16
+  da:	8082                	ret
+
+00000000000000dc <strcmp>:
+
+int
+strcmp(const char *p, const char *q)
+{
+  dc:	1141                	addi	sp,sp,-16
+  de:	e422                	sd	s0,8(sp)
+  e0:	0800                	addi	s0,sp,16
+  while(*p && *p == *q)
+  e2:	00054783          	lbu	a5,0(a0)
+  e6:	cb91                	beqz	a5,fa <strcmp+0x1e>
+  e8:	0005c703          	lbu	a4,0(a1)
+  ec:	00f71763          	bne	a4,a5,fa <strcmp+0x1e>
+    p++, q++;
+  f0:	0505                	addi	a0,a0,1
+  f2:	0585                	addi	a1,a1,1
+  while(*p && *p == *q)
+  f4:	00054783          	lbu	a5,0(a0)
+  f8:	fbe5                	bnez	a5,e8 <strcmp+0xc>
+  return (uchar)*p - (uchar)*q;
+  fa:	0005c503          	lbu	a0,0(a1)
+}
+  fe:	40a7853b          	subw	a0,a5,a0
+ 102:	6422                	ld	s0,8(sp)
+ 104:	0141                	addi	sp,sp,16
+ 106:	8082                	ret
+
+0000000000000108 <strlen>:
+
+uint
+strlen(const char *s)
+{
+ 108:	1141                	addi	sp,sp,-16
+ 10a:	e422                	sd	s0,8(sp)
+ 10c:	0800                	addi	s0,sp,16
+  int n;
+
+  for(n = 0; s[n]; n++)
+ 10e:	00054783          	lbu	a5,0(a0)
+ 112:	cf91                	beqz	a5,12e <strlen+0x26>
+ 114:	0505                	addi	a0,a0,1
+ 116:	87aa                	mv	a5,a0
+ 118:	4685                	li	a3,1
+ 11a:	9e89                	subw	a3,a3,a0
+ 11c:	00f6853b          	addw	a0,a3,a5
+ 120:	0785                	addi	a5,a5,1
+ 122:	fff7c703          	lbu	a4,-1(a5)
+ 126:	fb7d                	bnez	a4,11c <strlen+0x14>
+    ;
+  return n;
+}
+ 128:	6422                	ld	s0,8(sp)
+ 12a:	0141                	addi	sp,sp,16
+ 12c:	8082                	ret
+  for(n = 0; s[n]; n++)
+ 12e:	4501                	li	a0,0
+ 130:	bfe5                	j	128 <strlen+0x20>
+
+0000000000000132 <memset>:
+
+void*
+memset(void *dst, int c, uint n)
+{
+ 132:	1141                	addi	sp,sp,-16
+ 134:	e422                	sd	s0,8(sp)
+ 136:	0800                	addi	s0,sp,16
+  char *cdst = (char *) dst;
+  int i;
+  for(i = 0; i < n; i++){
+ 138:	ca19                	beqz	a2,14e <memset+0x1c>
+ 13a:	87aa                	mv	a5,a0
+ 13c:	1602                	slli	a2,a2,0x20
+ 13e:	9201                	srli	a2,a2,0x20
+ 140:	00a60733          	add	a4,a2,a0
+    cdst[i] = c;
+ 144:	00b78023          	sb	a1,0(a5)
+  for(i = 0; i < n; i++){
+ 148:	0785                	addi	a5,a5,1
+ 14a:	fee79de3          	bne	a5,a4,144 <memset+0x12>
+  }
+  return dst;
+}
+ 14e:	6422                	ld	s0,8(sp)
+ 150:	0141                	addi	sp,sp,16
+ 152:	8082                	ret
+
+0000000000000154 <strchr>:
+
+char*
+strchr(const char *s, char c)
+{
+ 154:	1141                	addi	sp,sp,-16
+ 156:	e422                	sd	s0,8(sp)
+ 158:	0800                	addi	s0,sp,16
+  for(; *s; s++)
+ 15a:	00054783          	lbu	a5,0(a0)
+ 15e:	cb99                	beqz	a5,174 <strchr+0x20>
+    if(*s == c)
+ 160:	00f58763          	beq	a1,a5,16e <strchr+0x1a>
+  for(; *s; s++)
+ 164:	0505                	addi	a0,a0,1
+ 166:	00054783          	lbu	a5,0(a0)
+ 16a:	fbfd                	bnez	a5,160 <strchr+0xc>
+      return (char*)s;
+  return 0;
+ 16c:	4501                	li	a0,0
+}
+ 16e:	6422                	ld	s0,8(sp)
+ 170:	0141                	addi	sp,sp,16
+ 172:	8082                	ret
+  return 0;
+ 174:	4501                	li	a0,0
+ 176:	bfe5                	j	16e <strchr+0x1a>
+
+0000000000000178 <gets>:
+
+char*
+gets(char *buf, int max)
+{
+ 178:	711d                	addi	sp,sp,-96
+ 17a:	ec86                	sd	ra,88(sp)
+ 17c:	e8a2                	sd	s0,80(sp)
+ 17e:	e4a6                	sd	s1,72(sp)
+ 180:	e0ca                	sd	s2,64(sp)
+ 182:	fc4e                	sd	s3,56(sp)
+ 184:	f852                	sd	s4,48(sp)
+ 186:	f456                	sd	s5,40(sp)
+ 188:	f05a                	sd	s6,32(sp)
+ 18a:	ec5e                	sd	s7,24(sp)
+ 18c:	1080                	addi	s0,sp,96
+ 18e:	8baa                	mv	s7,a0
+ 190:	8a2e                	mv	s4,a1
+  int i, cc;
+  char c;
+
+  for(i=0; i+1 < max; ){
+ 192:	892a                	mv	s2,a0
+ 194:	4481                	li	s1,0
+    cc = read(0, &c, 1);
+    if(cc < 1)
+      break;
+    buf[i++] = c;
+    if(c == '\n' || c == '\r')
+ 196:	4aa9                	li	s5,10
+ 198:	4b35                	li	s6,13
+  for(i=0; i+1 < max; ){
+ 19a:	89a6                	mv	s3,s1
+ 19c:	2485                	addiw	s1,s1,1
+ 19e:	0344d863          	bge	s1,s4,1ce <gets+0x56>
+    cc = read(0, &c, 1);
+ 1a2:	4605                	li	a2,1
+ 1a4:	faf40593          	addi	a1,s0,-81
+ 1a8:	4501                	li	a0,0
+ 1aa:	00000097          	auipc	ra,0x0
+ 1ae:	19a080e7          	jalr	410(ra) # 344 <read>
+    if(cc < 1)
+ 1b2:	00a05e63          	blez	a0,1ce <gets+0x56>
+    buf[i++] = c;
+ 1b6:	faf44783          	lbu	a5,-81(s0)
+ 1ba:	00f90023          	sb	a5,0(s2)
+    if(c == '\n' || c == '\r')
+ 1be:	01578763          	beq	a5,s5,1cc <gets+0x54>
+ 1c2:	0905                	addi	s2,s2,1
+ 1c4:	fd679be3          	bne	a5,s6,19a <gets+0x22>
+  for(i=0; i+1 < max; ){
+ 1c8:	89a6                	mv	s3,s1
+ 1ca:	a011                	j	1ce <gets+0x56>
+ 1cc:	89a6                	mv	s3,s1
+      break;
+  }
+  buf[i] = '\0';
+ 1ce:	99de                	add	s3,s3,s7
+ 1d0:	00098023          	sb	zero,0(s3)
+  return buf;
+}
+ 1d4:	855e                	mv	a0,s7
+ 1d6:	60e6                	ld	ra,88(sp)
+ 1d8:	6446                	ld	s0,80(sp)
+ 1da:	64a6                	ld	s1,72(sp)
+ 1dc:	6906                	ld	s2,64(sp)
+ 1de:	79e2                	ld	s3,56(sp)
+ 1e0:	7a42                	ld	s4,48(sp)
+ 1e2:	7aa2                	ld	s5,40(sp)
+ 1e4:	7b02                	ld	s6,32(sp)
+ 1e6:	6be2                	ld	s7,24(sp)
+ 1e8:	6125                	addi	sp,sp,96
+ 1ea:	8082                	ret
+
+00000000000001ec <stat>:
+
+int
+stat(const char *n, struct stat *st)
+{
+ 1ec:	1101                	addi	sp,sp,-32
+ 1ee:	ec06                	sd	ra,24(sp)
+ 1f0:	e822                	sd	s0,16(sp)
+ 1f2:	e426                	sd	s1,8(sp)
+ 1f4:	e04a                	sd	s2,0(sp)
+ 1f6:	1000                	addi	s0,sp,32
+ 1f8:	892e                	mv	s2,a1
+  int fd;
+  int r;
+
+  fd = open(n, O_RDONLY);
+ 1fa:	4581                	li	a1,0
+ 1fc:	00000097          	auipc	ra,0x0
+ 200:	170080e7          	jalr	368(ra) # 36c <open>
+  if(fd < 0)
+ 204:	02054563          	bltz	a0,22e <stat+0x42>
+ 208:	84aa                	mv	s1,a0
+    return -1;
+  r = fstat(fd, st);
+ 20a:	85ca                	mv	a1,s2
+ 20c:	00000097          	auipc	ra,0x0
+ 210:	178080e7          	jalr	376(ra) # 384 <fstat>
+ 214:	892a                	mv	s2,a0
+  close(fd);
+ 216:	8526                	mv	a0,s1
+ 218:	00000097          	auipc	ra,0x0
+ 21c:	13c080e7          	jalr	316(ra) # 354 <close>
+  return r;
+}
+ 220:	854a                	mv	a0,s2
+ 222:	60e2                	ld	ra,24(sp)
+ 224:	6442                	ld	s0,16(sp)
+ 226:	64a2                	ld	s1,8(sp)
+ 228:	6902                	ld	s2,0(sp)
+ 22a:	6105                	addi	sp,sp,32
+ 22c:	8082                	ret
+    return -1;
+ 22e:	597d                	li	s2,-1
+ 230:	bfc5                	j	220 <stat+0x34>
+
+0000000000000232 <atoi>:
+
+int
+atoi(const char *s)
+{
+ 232:	1141                	addi	sp,sp,-16
+ 234:	e422                	sd	s0,8(sp)
+ 236:	0800                	addi	s0,sp,16
+  int n;
+
+  n = 0;
+  while('0' <= *s && *s <= '9')
+ 238:	00054683          	lbu	a3,0(a0)
+ 23c:	fd06879b          	addiw	a5,a3,-48
+ 240:	0ff7f793          	zext.b	a5,a5
+ 244:	4625                	li	a2,9
+ 246:	02f66863          	bltu	a2,a5,276 <atoi+0x44>
+ 24a:	872a                	mv	a4,a0
+  n = 0;
+ 24c:	4501                	li	a0,0
+    n = n*10 + *s++ - '0';
+ 24e:	0705                	addi	a4,a4,1
+ 250:	0025179b          	slliw	a5,a0,0x2
+ 254:	9fa9                	addw	a5,a5,a0
+ 256:	0017979b          	slliw	a5,a5,0x1
+ 25a:	9fb5                	addw	a5,a5,a3
+ 25c:	fd07851b          	addiw	a0,a5,-48
+  while('0' <= *s && *s <= '9')
+ 260:	00074683          	lbu	a3,0(a4)
+ 264:	fd06879b          	addiw	a5,a3,-48
+ 268:	0ff7f793          	zext.b	a5,a5
+ 26c:	fef671e3          	bgeu	a2,a5,24e <atoi+0x1c>
+  return n;
+}
+ 270:	6422                	ld	s0,8(sp)
+ 272:	0141                	addi	sp,sp,16
+ 274:	8082                	ret
+  n = 0;
+ 276:	4501                	li	a0,0
+ 278:	bfe5                	j	270 <atoi+0x3e>
+
+000000000000027a <memmove>:
+
+void*
+memmove(void *vdst, const void *vsrc, int n)
+{
+ 27a:	1141                	addi	sp,sp,-16
+ 27c:	e422                	sd	s0,8(sp)
+ 27e:	0800                	addi	s0,sp,16
+  char *dst;
+  const char *src;
+
+  dst = vdst;
+  src = vsrc;
+  if (src > dst) {
+ 280:	02b57463          	bgeu	a0,a1,2a8 <memmove+0x2e>
+    while(n-- > 0)
+ 284:	00c05f63          	blez	a2,2a2 <memmove+0x28>
+ 288:	1602                	slli	a2,a2,0x20
+ 28a:	9201                	srli	a2,a2,0x20
+ 28c:	00c507b3          	add	a5,a0,a2
+  dst = vdst;
+ 290:	872a                	mv	a4,a0
+      *dst++ = *src++;
+ 292:	0585                	addi	a1,a1,1
+ 294:	0705                	addi	a4,a4,1
+ 296:	fff5c683          	lbu	a3,-1(a1)
+ 29a:	fed70fa3          	sb	a3,-1(a4)
+    while(n-- > 0)
+ 29e:	fee79ae3          	bne	a5,a4,292 <memmove+0x18>
+    src += n;
+    while(n-- > 0)
+      *--dst = *--src;
+  }
+  return vdst;
+}
+ 2a2:	6422                	ld	s0,8(sp)
+ 2a4:	0141                	addi	sp,sp,16
+ 2a6:	8082                	ret
+    dst += n;
+ 2a8:	00c50733          	add	a4,a0,a2
+    src += n;
+ 2ac:	95b2                	add	a1,a1,a2
+    while(n-- > 0)
+ 2ae:	fec05ae3          	blez	a2,2a2 <memmove+0x28>
+ 2b2:	fff6079b          	addiw	a5,a2,-1
+ 2b6:	1782                	slli	a5,a5,0x20
+ 2b8:	9381                	srli	a5,a5,0x20
+ 2ba:	fff7c793          	not	a5,a5
+ 2be:	97ba                	add	a5,a5,a4
+      *--dst = *--src;
+ 2c0:	15fd                	addi	a1,a1,-1
+ 2c2:	177d                	addi	a4,a4,-1
+ 2c4:	0005c683          	lbu	a3,0(a1)
+ 2c8:	00d70023          	sb	a3,0(a4)
+    while(n-- > 0)
+ 2cc:	fee79ae3          	bne	a5,a4,2c0 <memmove+0x46>
+ 2d0:	bfc9                	j	2a2 <memmove+0x28>
+
+00000000000002d2 <memcmp>:
+
+int
+memcmp(const void *s1, const void *s2, uint n)
+{
+ 2d2:	1141                	addi	sp,sp,-16
+ 2d4:	e422                	sd	s0,8(sp)
+ 2d6:	0800                	addi	s0,sp,16
+  const char *p1 = s1, *p2 = s2;
+  while (n-- > 0) {
+ 2d8:	ca05                	beqz	a2,308 <memcmp+0x36>
+ 2da:	fff6069b          	addiw	a3,a2,-1
+ 2de:	1682                	slli	a3,a3,0x20
+ 2e0:	9281                	srli	a3,a3,0x20
+ 2e2:	0685                	addi	a3,a3,1
+ 2e4:	96aa                	add	a3,a3,a0
+    if (*p1 != *p2) {
+ 2e6:	00054783          	lbu	a5,0(a0)
+ 2ea:	0005c703          	lbu	a4,0(a1)
+ 2ee:	00e79863          	bne	a5,a4,2fe <memcmp+0x2c>
+      return *p1 - *p2;
+    }
+    p1++;
+ 2f2:	0505                	addi	a0,a0,1
+    p2++;
+ 2f4:	0585                	addi	a1,a1,1
+  while (n-- > 0) {
+ 2f6:	fed518e3          	bne	a0,a3,2e6 <memcmp+0x14>
+  }
+  return 0;
+ 2fa:	4501                	li	a0,0
+ 2fc:	a019                	j	302 <memcmp+0x30>
+      return *p1 - *p2;
+ 2fe:	40e7853b          	subw	a0,a5,a4
+}
+ 302:	6422                	ld	s0,8(sp)
+ 304:	0141                	addi	sp,sp,16
+ 306:	8082                	ret
+  return 0;
+ 308:	4501                	li	a0,0
+ 30a:	bfe5                	j	302 <memcmp+0x30>
+
+000000000000030c <memcpy>:
+
+void *
+memcpy(void *dst, const void *src, uint n)
+{
+ 30c:	1141                	addi	sp,sp,-16
+ 30e:	e406                	sd	ra,8(sp)
+ 310:	e022                	sd	s0,0(sp)
+ 312:	0800                	addi	s0,sp,16
+  return memmove(dst, src, n);
+ 314:	00000097          	auipc	ra,0x0
+ 318:	f66080e7          	jalr	-154(ra) # 27a <memmove>
+}
+ 31c:	60a2                	ld	ra,8(sp)
+ 31e:	6402                	ld	s0,0(sp)
+ 320:	0141                	addi	sp,sp,16
+ 322:	8082                	ret
+
+0000000000000324 <fork>:
+# generated by usys.pl - do not edit
+#include "kernel/syscall.h"
+.global fork
+fork:
+ li a7, SYS_fork
+ 324:	4885                	li	a7,1
+ ecall
+ 326:	00000073          	ecall
+ ret
+ 32a:	8082                	ret
+
+000000000000032c <exit>:
+.global exit
+exit:
+ li a7, SYS_exit
+ 32c:	4889                	li	a7,2
+ ecall
+ 32e:	00000073          	ecall
+ ret
+ 332:	8082                	ret
+
+0000000000000334 <wait>:
+.global wait
+wait:
+ li a7, SYS_wait
+ 334:	488d                	li	a7,3
+ ecall
+ 336:	00000073          	ecall
+ ret
+ 33a:	8082                	ret
+
+000000000000033c <pipe>:
+.global pipe
+pipe:
+ li a7, SYS_pipe
+ 33c:	4891                	li	a7,4
+ ecall
+ 33e:	00000073          	ecall
+ ret
+ 342:	8082                	ret
+
+0000000000000344 <read>:
+.global read
+read:
+ li a7, SYS_read
+ 344:	4895                	li	a7,5
+ ecall
+ 346:	00000073          	ecall
+ ret
+ 34a:	8082                	ret
+
+000000000000034c <write>:
+.global write
+write:
+ li a7, SYS_write
+ 34c:	48c1                	li	a7,16
+ ecall
+ 34e:	00000073          	ecall
+ ret
+ 352:	8082                	ret
+
+0000000000000354 <close>:
+.global close
+close:
+ li a7, SYS_close
+ 354:	48d5                	li	a7,21
+ ecall
+ 356:	00000073          	ecall
+ ret
+ 35a:	8082                	ret
+
+000000000000035c <kill>:
+.global kill
+kill:
+ li a7, SYS_kill
+ 35c:	4899                	li	a7,6
+ ecall
+ 35e:	00000073          	ecall
+ ret
+ 362:	8082                	ret
+
+0000000000000364 <exec>:
+.global exec
+exec:
+ li a7, SYS_exec
+ 364:	489d                	li	a7,7
+ ecall
+ 366:	00000073          	ecall
+ ret
+ 36a:	8082                	ret
+
+000000000000036c <open>:
+.global open
+open:
+ li a7, SYS_open
+ 36c:	48bd                	li	a7,15
+ ecall
+ 36e:	00000073          	ecall
+ ret
+ 372:	8082                	ret
+
+0000000000000374 <mknod>:
+.global mknod
+mknod:
+ li a7, SYS_mknod
+ 374:	48c5                	li	a7,17
+ ecall
+ 376:	00000073          	ecall
+ ret
+ 37a:	8082                	ret
+
+000000000000037c <unlink>:
+.global unlink
+unlink:
+ li a7, SYS_unlink
+ 37c:	48c9                	li	a7,18
+ ecall
+ 37e:	00000073          	ecall
+ ret
+ 382:	8082                	ret
+
+0000000000000384 <fstat>:
+.global fstat
+fstat:
+ li a7, SYS_fstat
+ 384:	48a1                	li	a7,8
+ ecall
+ 386:	00000073          	ecall
+ ret
+ 38a:	8082                	ret
+
+000000000000038c <link>:
+.global link
+link:
+ li a7, SYS_link
+ 38c:	48cd                	li	a7,19
+ ecall
+ 38e:	00000073          	ecall
+ ret
+ 392:	8082                	ret
+
+0000000000000394 <mkdir>:
+.global mkdir
+mkdir:
+ li a7, SYS_mkdir
+ 394:	48d1                	li	a7,20
+ ecall
+ 396:	00000073          	ecall
+ ret
+ 39a:	8082                	ret
+
+000000000000039c <chdir>:
+.global chdir
+chdir:
+ li a7, SYS_chdir
+ 39c:	48a5                	li	a7,9
+ ecall
+ 39e:	00000073          	ecall
+ ret
+ 3a2:	8082                	ret
+
+00000000000003a4 <dup>:
+.global dup
+dup:
+ li a7, SYS_dup
+ 3a4:	48a9                	li	a7,10
+ ecall
+ 3a6:	00000073          	ecall
+ ret
+ 3aa:	8082                	ret
+
+00000000000003ac <getpid>:
+.global getpid
+getpid:
+ li a7, SYS_getpid
+ 3ac:	48ad                	li	a7,11
+ ecall
+ 3ae:	00000073          	ecall
+ ret
+ 3b2:	8082                	ret
+
+00000000000003b4 <sbrk>:
+.global sbrk
+sbrk:
+ li a7, SYS_sbrk
+ 3b4:	48b1                	li	a7,12
+ ecall
+ 3b6:	00000073          	ecall
+ ret
+ 3ba:	8082                	ret
+
+00000000000003bc <sleep>:
+.global sleep
+sleep:
+ li a7, SYS_sleep
+ 3bc:	48b5                	li	a7,13
+ ecall
+ 3be:	00000073          	ecall
+ ret
+ 3c2:	8082                	ret
+
+00000000000003c4 <uptime>:
+.global uptime
+uptime:
+ li a7, SYS_uptime
+ 3c4:	48b9                	li	a7,14
+ ecall
+ 3c6:	00000073          	ecall
+ ret
+ 3ca:	8082                	ret
+
+00000000000003cc <trace>:
+.global trace
+trace:
+ li a7, SYS_trace
+ 3cc:	48d9                	li	a7,22
+ ecall
+ 3ce:	00000073          	ecall
+ ret
+ 3d2:	8082                	ret
+
+00000000000003d4 <sysinfo>:
+.global sysinfo
+sysinfo:
+ li a7, SYS_sysinfo
+ 3d4:	48dd                	li	a7,23
+ ecall
+ 3d6:	00000073          	ecall
+ ret
+ 3da:	8082                	ret
+
+00000000000003dc <putc>:
+
+static char digits[] = "0123456789ABCDEF";
+
+static void
+putc(int fd, char c)
+{
+ 3dc:	1101                	addi	sp,sp,-32
+ 3de:	ec06                	sd	ra,24(sp)
+ 3e0:	e822                	sd	s0,16(sp)
+ 3e2:	1000                	addi	s0,sp,32
+ 3e4:	feb407a3          	sb	a1,-17(s0)
+  write(fd, &c, 1);
+ 3e8:	4605                	li	a2,1
+ 3ea:	fef40593          	addi	a1,s0,-17
+ 3ee:	00000097          	auipc	ra,0x0
+ 3f2:	f5e080e7          	jalr	-162(ra) # 34c <write>
+}
+ 3f6:	60e2                	ld	ra,24(sp)
+ 3f8:	6442                	ld	s0,16(sp)
+ 3fa:	6105                	addi	sp,sp,32
+ 3fc:	8082                	ret
+
+00000000000003fe <printint>:
+
+static void
+printint(int fd, int xx, int base, int sgn)
+{
+ 3fe:	7139                	addi	sp,sp,-64
+ 400:	fc06                	sd	ra,56(sp)
+ 402:	f822                	sd	s0,48(sp)
+ 404:	f426                	sd	s1,40(sp)
+ 406:	f04a                	sd	s2,32(sp)
+ 408:	ec4e                	sd	s3,24(sp)
+ 40a:	0080                	addi	s0,sp,64
+ 40c:	84aa                	mv	s1,a0
+  char buf[16];
+  int i, neg;
+  uint x;
+
+  neg = 0;
+  if(sgn && xx < 0){
+ 40e:	c299                	beqz	a3,414 <printint+0x16>
+ 410:	0805c963          	bltz	a1,4a2 <printint+0xa4>
+    neg = 1;
+    x = -xx;
+  } else {
+    x = xx;
+ 414:	2581                	sext.w	a1,a1
+  neg = 0;
+ 416:	4881                	li	a7,0
+ 418:	fc040693          	addi	a3,s0,-64
+  }
+
+  i = 0;
+ 41c:	4701                	li	a4,0
+  do{
+    buf[i++] = digits[x % base];
+ 41e:	2601                	sext.w	a2,a2
+ 420:	00000517          	auipc	a0,0x0
+ 424:	4c850513          	addi	a0,a0,1224 # 8e8 <digits>
+ 428:	883a                	mv	a6,a4
+ 42a:	2705                	addiw	a4,a4,1
+ 42c:	02c5f7bb          	remuw	a5,a1,a2
+ 430:	1782                	slli	a5,a5,0x20
+ 432:	9381                	srli	a5,a5,0x20
+ 434:	97aa                	add	a5,a5,a0
+ 436:	0007c783          	lbu	a5,0(a5)
+ 43a:	00f68023          	sb	a5,0(a3)
+  }while((x /= base) != 0);
+ 43e:	0005879b          	sext.w	a5,a1
+ 442:	02c5d5bb          	divuw	a1,a1,a2
+ 446:	0685                	addi	a3,a3,1
+ 448:	fec7f0e3          	bgeu	a5,a2,428 <printint+0x2a>
+  if(neg)
+ 44c:	00088c63          	beqz	a7,464 <printint+0x66>
+    buf[i++] = '-';
+ 450:	fd070793          	addi	a5,a4,-48
+ 454:	00878733          	add	a4,a5,s0
+ 458:	02d00793          	li	a5,45
+ 45c:	fef70823          	sb	a5,-16(a4)
+ 460:	0028071b          	addiw	a4,a6,2
+
+  while(--i >= 0)
+ 464:	02e05863          	blez	a4,494 <printint+0x96>
+ 468:	fc040793          	addi	a5,s0,-64
+ 46c:	00e78933          	add	s2,a5,a4
+ 470:	fff78993          	addi	s3,a5,-1
+ 474:	99ba                	add	s3,s3,a4
+ 476:	377d                	addiw	a4,a4,-1
+ 478:	1702                	slli	a4,a4,0x20
+ 47a:	9301                	srli	a4,a4,0x20
+ 47c:	40e989b3          	sub	s3,s3,a4
+    putc(fd, buf[i]);
+ 480:	fff94583          	lbu	a1,-1(s2)
+ 484:	8526                	mv	a0,s1
+ 486:	00000097          	auipc	ra,0x0
+ 48a:	f56080e7          	jalr	-170(ra) # 3dc <putc>
+  while(--i >= 0)
+ 48e:	197d                	addi	s2,s2,-1
+ 490:	ff3918e3          	bne	s2,s3,480 <printint+0x82>
+}
+ 494:	70e2                	ld	ra,56(sp)
+ 496:	7442                	ld	s0,48(sp)
+ 498:	74a2                	ld	s1,40(sp)
+ 49a:	7902                	ld	s2,32(sp)
+ 49c:	69e2                	ld	s3,24(sp)
+ 49e:	6121                	addi	sp,sp,64
+ 4a0:	8082                	ret
+    x = -xx;
+ 4a2:	40b005bb          	negw	a1,a1
+    neg = 1;
+ 4a6:	4885                	li	a7,1
+    x = -xx;
+ 4a8:	bf85                	j	418 <printint+0x1a>
+
+00000000000004aa <vprintf>:
+}
+
+// Print to the given fd. Only understands %d, %x, %p, %s.
+void
+vprintf(int fd, const char *fmt, va_list ap)
+{
+ 4aa:	7119                	addi	sp,sp,-128
+ 4ac:	fc86                	sd	ra,120(sp)
+ 4ae:	f8a2                	sd	s0,112(sp)
+ 4b0:	f4a6                	sd	s1,104(sp)
+ 4b2:	f0ca                	sd	s2,96(sp)
+ 4b4:	ecce                	sd	s3,88(sp)
+ 4b6:	e8d2                	sd	s4,80(sp)
+ 4b8:	e4d6                	sd	s5,72(sp)
+ 4ba:	e0da                	sd	s6,64(sp)
+ 4bc:	fc5e                	sd	s7,56(sp)
+ 4be:	f862                	sd	s8,48(sp)
+ 4c0:	f466                	sd	s9,40(sp)
+ 4c2:	f06a                	sd	s10,32(sp)
+ 4c4:	ec6e                	sd	s11,24(sp)
+ 4c6:	0100                	addi	s0,sp,128
+  char *s;
+  int c, i, state;
+
+  state = 0;
+  for(i = 0; fmt[i]; i++){
+ 4c8:	0005c903          	lbu	s2,0(a1)
+ 4cc:	18090f63          	beqz	s2,66a <vprintf+0x1c0>
+ 4d0:	8aaa                	mv	s5,a0
+ 4d2:	8b32                	mv	s6,a2
+ 4d4:	00158493          	addi	s1,a1,1
+  state = 0;
+ 4d8:	4981                	li	s3,0
+      if(c == '%'){
+        state = '%';
+      } else {
+        putc(fd, c);
+      }
+    } else if(state == '%'){
+ 4da:	02500a13          	li	s4,37
+ 4de:	4c55                	li	s8,21
+ 4e0:	00000c97          	auipc	s9,0x0
+ 4e4:	3b0c8c93          	addi	s9,s9,944 # 890 <malloc+0x122>
+        printptr(fd, va_arg(ap, uint64));
+      } else if(c == 's'){
+        s = va_arg(ap, char*);
+        if(s == 0)
+          s = "(null)";
+        while(*s != 0){
+ 4e8:	02800d93          	li	s11,40
+  putc(fd, 'x');
+ 4ec:	4d41                	li	s10,16
+    putc(fd, digits[x >> (sizeof(uint64) * 8 - 4)]);
+ 4ee:	00000b97          	auipc	s7,0x0
+ 4f2:	3fab8b93          	addi	s7,s7,1018 # 8e8 <digits>
+ 4f6:	a839                	j	514 <vprintf+0x6a>
+        putc(fd, c);
+ 4f8:	85ca                	mv	a1,s2
+ 4fa:	8556                	mv	a0,s5
+ 4fc:	00000097          	auipc	ra,0x0
+ 500:	ee0080e7          	jalr	-288(ra) # 3dc <putc>
+ 504:	a019                	j	50a <vprintf+0x60>
+    } else if(state == '%'){
+ 506:	01498d63          	beq	s3,s4,520 <vprintf+0x76>
+  for(i = 0; fmt[i]; i++){
+ 50a:	0485                	addi	s1,s1,1
+ 50c:	fff4c903          	lbu	s2,-1(s1)
+ 510:	14090d63          	beqz	s2,66a <vprintf+0x1c0>
+    if(state == 0){
+ 514:	fe0999e3          	bnez	s3,506 <vprintf+0x5c>
+      if(c == '%'){
+ 518:	ff4910e3          	bne	s2,s4,4f8 <vprintf+0x4e>
+        state = '%';
+ 51c:	89d2                	mv	s3,s4
+ 51e:	b7f5                	j	50a <vprintf+0x60>
+      if(c == 'd'){
+ 520:	11490c63          	beq	s2,s4,638 <vprintf+0x18e>
+ 524:	f9d9079b          	addiw	a5,s2,-99
+ 528:	0ff7f793          	zext.b	a5,a5
+ 52c:	10fc6e63          	bltu	s8,a5,648 <vprintf+0x19e>
+ 530:	f9d9079b          	addiw	a5,s2,-99
+ 534:	0ff7f713          	zext.b	a4,a5
+ 538:	10ec6863          	bltu	s8,a4,648 <vprintf+0x19e>
+ 53c:	00271793          	slli	a5,a4,0x2
+ 540:	97e6                	add	a5,a5,s9
+ 542:	439c                	lw	a5,0(a5)
+ 544:	97e6                	add	a5,a5,s9
+ 546:	8782                	jr	a5
+        printint(fd, va_arg(ap, int), 10, 1);
+ 548:	008b0913          	addi	s2,s6,8
+ 54c:	4685                	li	a3,1
+ 54e:	4629                	li	a2,10
+ 550:	000b2583          	lw	a1,0(s6)
+ 554:	8556                	mv	a0,s5
+ 556:	00000097          	auipc	ra,0x0
+ 55a:	ea8080e7          	jalr	-344(ra) # 3fe <printint>
+ 55e:	8b4a                	mv	s6,s2
+      } else {
+        // Unknown % sequence.  Print it to draw attention.
+        putc(fd, '%');
+        putc(fd, c);
+      }
+      state = 0;
+ 560:	4981                	li	s3,0
+ 562:	b765                	j	50a <vprintf+0x60>
+        printint(fd, va_arg(ap, uint64), 10, 0);
+ 564:	008b0913          	addi	s2,s6,8
+ 568:	4681                	li	a3,0
+ 56a:	4629                	li	a2,10
+ 56c:	000b2583          	lw	a1,0(s6)
+ 570:	8556                	mv	a0,s5
+ 572:	00000097          	auipc	ra,0x0
+ 576:	e8c080e7          	jalr	-372(ra) # 3fe <printint>
+ 57a:	8b4a                	mv	s6,s2
+      state = 0;
+ 57c:	4981                	li	s3,0
+ 57e:	b771                	j	50a <vprintf+0x60>
+        printint(fd, va_arg(ap, int), 16, 0);
+ 580:	008b0913          	addi	s2,s6,8
+ 584:	4681                	li	a3,0
+ 586:	866a                	mv	a2,s10
+ 588:	000b2583          	lw	a1,0(s6)
+ 58c:	8556                	mv	a0,s5
+ 58e:	00000097          	auipc	ra,0x0
+ 592:	e70080e7          	jalr	-400(ra) # 3fe <printint>
+ 596:	8b4a                	mv	s6,s2
+      state = 0;
+ 598:	4981                	li	s3,0
+ 59a:	bf85                	j	50a <vprintf+0x60>
+        printptr(fd, va_arg(ap, uint64));
+ 59c:	008b0793          	addi	a5,s6,8
+ 5a0:	f8f43423          	sd	a5,-120(s0)
+ 5a4:	000b3983          	ld	s3,0(s6)
+  putc(fd, '0');
+ 5a8:	03000593          	li	a1,48
+ 5ac:	8556                	mv	a0,s5
+ 5ae:	00000097          	auipc	ra,0x0
+ 5b2:	e2e080e7          	jalr	-466(ra) # 3dc <putc>
+  putc(fd, 'x');
+ 5b6:	07800593          	li	a1,120
+ 5ba:	8556                	mv	a0,s5
+ 5bc:	00000097          	auipc	ra,0x0
+ 5c0:	e20080e7          	jalr	-480(ra) # 3dc <putc>
+ 5c4:	896a                	mv	s2,s10
+    putc(fd, digits[x >> (sizeof(uint64) * 8 - 4)]);
+ 5c6:	03c9d793          	srli	a5,s3,0x3c
+ 5ca:	97de                	add	a5,a5,s7
+ 5cc:	0007c583          	lbu	a1,0(a5)
+ 5d0:	8556                	mv	a0,s5
+ 5d2:	00000097          	auipc	ra,0x0
+ 5d6:	e0a080e7          	jalr	-502(ra) # 3dc <putc>
+  for (i = 0; i < (sizeof(uint64) * 2); i++, x <<= 4)
+ 5da:	0992                	slli	s3,s3,0x4
+ 5dc:	397d                	addiw	s2,s2,-1
+ 5de:	fe0914e3          	bnez	s2,5c6 <vprintf+0x11c>
+        printptr(fd, va_arg(ap, uint64));
+ 5e2:	f8843b03          	ld	s6,-120(s0)
+      state = 0;
+ 5e6:	4981                	li	s3,0
+ 5e8:	b70d                	j	50a <vprintf+0x60>
+        s = va_arg(ap, char*);
+ 5ea:	008b0913          	addi	s2,s6,8
+ 5ee:	000b3983          	ld	s3,0(s6)
+        if(s == 0)
+ 5f2:	02098163          	beqz	s3,614 <vprintf+0x16a>
+        while(*s != 0){
+ 5f6:	0009c583          	lbu	a1,0(s3)
+ 5fa:	c5ad                	beqz	a1,664 <vprintf+0x1ba>
+          putc(fd, *s);
+ 5fc:	8556                	mv	a0,s5
+ 5fe:	00000097          	auipc	ra,0x0
+ 602:	dde080e7          	jalr	-546(ra) # 3dc <putc>
+          s++;
+ 606:	0985                	addi	s3,s3,1
+        while(*s != 0){
+ 608:	0009c583          	lbu	a1,0(s3)
+ 60c:	f9e5                	bnez	a1,5fc <vprintf+0x152>
+        s = va_arg(ap, char*);
+ 60e:	8b4a                	mv	s6,s2
+      state = 0;
+ 610:	4981                	li	s3,0
+ 612:	bde5                	j	50a <vprintf+0x60>
+          s = "(null)";
+ 614:	00000997          	auipc	s3,0x0
+ 618:	27498993          	addi	s3,s3,628 # 888 <malloc+0x11a>
+        while(*s != 0){
+ 61c:	85ee                	mv	a1,s11
+ 61e:	bff9                	j	5fc <vprintf+0x152>
+        putc(fd, va_arg(ap, uint));
+ 620:	008b0913          	addi	s2,s6,8
+ 624:	000b4583          	lbu	a1,0(s6)
+ 628:	8556                	mv	a0,s5
+ 62a:	00000097          	auipc	ra,0x0
+ 62e:	db2080e7          	jalr	-590(ra) # 3dc <putc>
+ 632:	8b4a                	mv	s6,s2
+      state = 0;
+ 634:	4981                	li	s3,0
+ 636:	bdd1                	j	50a <vprintf+0x60>
+        putc(fd, c);
+ 638:	85d2                	mv	a1,s4
+ 63a:	8556                	mv	a0,s5
+ 63c:	00000097          	auipc	ra,0x0
+ 640:	da0080e7          	jalr	-608(ra) # 3dc <putc>
+      state = 0;
+ 644:	4981                	li	s3,0
+ 646:	b5d1                	j	50a <vprintf+0x60>
+        putc(fd, '%');
+ 648:	85d2                	mv	a1,s4
+ 64a:	8556                	mv	a0,s5
+ 64c:	00000097          	auipc	ra,0x0
+ 650:	d90080e7          	jalr	-624(ra) # 3dc <putc>
+        putc(fd, c);
+ 654:	85ca                	mv	a1,s2
+ 656:	8556                	mv	a0,s5
+ 658:	00000097          	auipc	ra,0x0
+ 65c:	d84080e7          	jalr	-636(ra) # 3dc <putc>
+      state = 0;
+ 660:	4981                	li	s3,0
+ 662:	b565                	j	50a <vprintf+0x60>
+        s = va_arg(ap, char*);
+ 664:	8b4a                	mv	s6,s2
+      state = 0;
+ 666:	4981                	li	s3,0
+ 668:	b54d                	j	50a <vprintf+0x60>
+    }
+  }
+}
+ 66a:	70e6                	ld	ra,120(sp)
+ 66c:	7446                	ld	s0,112(sp)
+ 66e:	74a6                	ld	s1,104(sp)
+ 670:	7906                	ld	s2,96(sp)
+ 672:	69e6                	ld	s3,88(sp)
+ 674:	6a46                	ld	s4,80(sp)
+ 676:	6aa6                	ld	s5,72(sp)
+ 678:	6b06                	ld	s6,64(sp)
+ 67a:	7be2                	ld	s7,56(sp)
+ 67c:	7c42                	ld	s8,48(sp)
+ 67e:	7ca2                	ld	s9,40(sp)
+ 680:	7d02                	ld	s10,32(sp)
+ 682:	6de2                	ld	s11,24(sp)
+ 684:	6109                	addi	sp,sp,128
+ 686:	8082                	ret
+
+0000000000000688 <fprintf>:
+
+void
+fprintf(int fd, const char *fmt, ...)
+{
+ 688:	715d                	addi	sp,sp,-80
+ 68a:	ec06                	sd	ra,24(sp)
+ 68c:	e822                	sd	s0,16(sp)
+ 68e:	1000                	addi	s0,sp,32
+ 690:	e010                	sd	a2,0(s0)
+ 692:	e414                	sd	a3,8(s0)
+ 694:	e818                	sd	a4,16(s0)
+ 696:	ec1c                	sd	a5,24(s0)
+ 698:	03043023          	sd	a6,32(s0)
+ 69c:	03143423          	sd	a7,40(s0)
+  va_list ap;
+
+  va_start(ap, fmt);
+ 6a0:	fe843423          	sd	s0,-24(s0)
+  vprintf(fd, fmt, ap);
+ 6a4:	8622                	mv	a2,s0
+ 6a6:	00000097          	auipc	ra,0x0
+ 6aa:	e04080e7          	jalr	-508(ra) # 4aa <vprintf>
+}
+ 6ae:	60e2                	ld	ra,24(sp)
+ 6b0:	6442                	ld	s0,16(sp)
+ 6b2:	6161                	addi	sp,sp,80
+ 6b4:	8082                	ret
+
+00000000000006b6 <printf>:
+
+void
+printf(const char *fmt, ...)
+{
+ 6b6:	711d                	addi	sp,sp,-96
+ 6b8:	ec06                	sd	ra,24(sp)
+ 6ba:	e822                	sd	s0,16(sp)
+ 6bc:	1000                	addi	s0,sp,32
+ 6be:	e40c                	sd	a1,8(s0)
+ 6c0:	e810                	sd	a2,16(s0)
+ 6c2:	ec14                	sd	a3,24(s0)
+ 6c4:	f018                	sd	a4,32(s0)
+ 6c6:	f41c                	sd	a5,40(s0)
+ 6c8:	03043823          	sd	a6,48(s0)
+ 6cc:	03143c23          	sd	a7,56(s0)
+  va_list ap;
+
+  va_start(ap, fmt);
+ 6d0:	00840613          	addi	a2,s0,8
+ 6d4:	fec43423          	sd	a2,-24(s0)
+  vprintf(1, fmt, ap);
+ 6d8:	85aa                	mv	a1,a0
+ 6da:	4505                	li	a0,1
+ 6dc:	00000097          	auipc	ra,0x0
+ 6e0:	dce080e7          	jalr	-562(ra) # 4aa <vprintf>
+}
+ 6e4:	60e2                	ld	ra,24(sp)
+ 6e6:	6442                	ld	s0,16(sp)
+ 6e8:	6125                	addi	sp,sp,96
+ 6ea:	8082                	ret
+
+00000000000006ec <free>:
+static Header base;
+static Header *freep;
+
+void
+free(void *ap)
+{
+ 6ec:	1141                	addi	sp,sp,-16
+ 6ee:	e422                	sd	s0,8(sp)
+ 6f0:	0800                	addi	s0,sp,16
+  Header *bp, *p;
+
+  bp = (Header*)ap - 1;
+ 6f2:	ff050693          	addi	a3,a0,-16
+  for(p = freep; !(bp > p && bp < p->s.ptr); p = p->s.ptr)
+ 6f6:	00000797          	auipc	a5,0x0
+ 6fa:	20a7b783          	ld	a5,522(a5) # 900 <freep>
+ 6fe:	a02d                	j	728 <free+0x3c>
+    if(p >= p->s.ptr && (bp > p || bp < p->s.ptr))
+      break;
+  if(bp + bp->s.size == p->s.ptr){
+    bp->s.size += p->s.ptr->s.size;
+ 700:	4618                	lw	a4,8(a2)
+ 702:	9f2d                	addw	a4,a4,a1
+ 704:	fee52c23          	sw	a4,-8(a0)
+    bp->s.ptr = p->s.ptr->s.ptr;
+ 708:	6398                	ld	a4,0(a5)
+ 70a:	6310                	ld	a2,0(a4)
+ 70c:	a83d                	j	74a <free+0x5e>
+  } else
+    bp->s.ptr = p->s.ptr;
+  if(p + p->s.size == bp){
+    p->s.size += bp->s.size;
+ 70e:	ff852703          	lw	a4,-8(a0)
+ 712:	9f31                	addw	a4,a4,a2
+ 714:	c798                	sw	a4,8(a5)
+    p->s.ptr = bp->s.ptr;
+ 716:	ff053683          	ld	a3,-16(a0)
+ 71a:	a091                	j	75e <free+0x72>
+    if(p >= p->s.ptr && (bp > p || bp < p->s.ptr))
+ 71c:	6398                	ld	a4,0(a5)
+ 71e:	00e7e463          	bltu	a5,a4,726 <free+0x3a>
+ 722:	00e6ea63          	bltu	a3,a4,736 <free+0x4a>
+{
+ 726:	87ba                	mv	a5,a4
+  for(p = freep; !(bp > p && bp < p->s.ptr); p = p->s.ptr)
+ 728:	fed7fae3          	bgeu	a5,a3,71c <free+0x30>
+ 72c:	6398                	ld	a4,0(a5)
+ 72e:	00e6e463          	bltu	a3,a4,736 <free+0x4a>
+    if(p >= p->s.ptr && (bp > p || bp < p->s.ptr))
+ 732:	fee7eae3          	bltu	a5,a4,726 <free+0x3a>
+  if(bp + bp->s.size == p->s.ptr){
+ 736:	ff852583          	lw	a1,-8(a0)
+ 73a:	6390                	ld	a2,0(a5)
+ 73c:	02059813          	slli	a6,a1,0x20
+ 740:	01c85713          	srli	a4,a6,0x1c
+ 744:	9736                	add	a4,a4,a3
+ 746:	fae60de3          	beq	a2,a4,700 <free+0x14>
+    bp->s.ptr = p->s.ptr->s.ptr;
+ 74a:	fec53823          	sd	a2,-16(a0)
+  if(p + p->s.size == bp){
+ 74e:	4790                	lw	a2,8(a5)
+ 750:	02061593          	slli	a1,a2,0x20
+ 754:	01c5d713          	srli	a4,a1,0x1c
+ 758:	973e                	add	a4,a4,a5
+ 75a:	fae68ae3          	beq	a3,a4,70e <free+0x22>
+    p->s.ptr = bp->s.ptr;
+ 75e:	e394                	sd	a3,0(a5)
+  } else
+    p->s.ptr = bp;
+  freep = p;
+ 760:	00000717          	auipc	a4,0x0
+ 764:	1af73023          	sd	a5,416(a4) # 900 <freep>
+}
+ 768:	6422                	ld	s0,8(sp)
+ 76a:	0141                	addi	sp,sp,16
+ 76c:	8082                	ret
+
+000000000000076e <malloc>:
+  return freep;
+}
+
+void*
+malloc(uint nbytes)
+{
+ 76e:	7139                	addi	sp,sp,-64
+ 770:	fc06                	sd	ra,56(sp)
+ 772:	f822                	sd	s0,48(sp)
+ 774:	f426                	sd	s1,40(sp)
+ 776:	f04a                	sd	s2,32(sp)
+ 778:	ec4e                	sd	s3,24(sp)
+ 77a:	e852                	sd	s4,16(sp)
+ 77c:	e456                	sd	s5,8(sp)
+ 77e:	e05a                	sd	s6,0(sp)
+ 780:	0080                	addi	s0,sp,64
+  Header *p, *prevp;
+  uint nunits;
+
+  nunits = (nbytes + sizeof(Header) - 1)/sizeof(Header) + 1;
+ 782:	02051493          	slli	s1,a0,0x20
+ 786:	9081                	srli	s1,s1,0x20
+ 788:	04bd                	addi	s1,s1,15
+ 78a:	8091                	srli	s1,s1,0x4
+ 78c:	0014899b          	addiw	s3,s1,1
+ 790:	0485                	addi	s1,s1,1
+  if((prevp = freep) == 0){
+ 792:	00000517          	auipc	a0,0x0
+ 796:	16e53503          	ld	a0,366(a0) # 900 <freep>
+ 79a:	c515                	beqz	a0,7c6 <malloc+0x58>
+    base.s.ptr = freep = prevp = &base;
+    base.s.size = 0;
+  }
+  for(p = prevp->s.ptr; ; prevp = p, p = p->s.ptr){
+ 79c:	611c                	ld	a5,0(a0)
+    if(p->s.size >= nunits){
+ 79e:	4798                	lw	a4,8(a5)
+ 7a0:	02977f63          	bgeu	a4,s1,7de <malloc+0x70>
+ 7a4:	8a4e                	mv	s4,s3
+ 7a6:	0009871b          	sext.w	a4,s3
+ 7aa:	6685                	lui	a3,0x1
+ 7ac:	00d77363          	bgeu	a4,a3,7b2 <malloc+0x44>
+ 7b0:	6a05                	lui	s4,0x1
+ 7b2:	000a0b1b          	sext.w	s6,s4
+  p = sbrk(nu * sizeof(Header));
+ 7b6:	004a1a1b          	slliw	s4,s4,0x4
+        p->s.size = nunits;
+      }
+      freep = prevp;
+      return (void*)(p + 1);
+    }
+    if(p == freep)
+ 7ba:	00000917          	auipc	s2,0x0
+ 7be:	14690913          	addi	s2,s2,326 # 900 <freep>
+  if(p == (char*)-1)
+ 7c2:	5afd                	li	s5,-1
+ 7c4:	a895                	j	838 <malloc+0xca>
+    base.s.ptr = freep = prevp = &base;
+ 7c6:	00000797          	auipc	a5,0x0
+ 7ca:	14278793          	addi	a5,a5,322 # 908 <base>
+ 7ce:	00000717          	auipc	a4,0x0
+ 7d2:	12f73923          	sd	a5,306(a4) # 900 <freep>
+ 7d6:	e39c                	sd	a5,0(a5)
+    base.s.size = 0;
+ 7d8:	0007a423          	sw	zero,8(a5)
+    if(p->s.size >= nunits){
+ 7dc:	b7e1                	j	7a4 <malloc+0x36>
+      if(p->s.size == nunits)
+ 7de:	02e48c63          	beq	s1,a4,816 <malloc+0xa8>
+        p->s.size -= nunits;
+ 7e2:	4137073b          	subw	a4,a4,s3
+ 7e6:	c798                	sw	a4,8(a5)
+        p += p->s.size;
+ 7e8:	02071693          	slli	a3,a4,0x20
+ 7ec:	01c6d713          	srli	a4,a3,0x1c
+ 7f0:	97ba                	add	a5,a5,a4
+        p->s.size = nunits;
+ 7f2:	0137a423          	sw	s3,8(a5)
+      freep = prevp;
+ 7f6:	00000717          	auipc	a4,0x0
+ 7fa:	10a73523          	sd	a0,266(a4) # 900 <freep>
+      return (void*)(p + 1);
+ 7fe:	01078513          	addi	a0,a5,16
+      if((p = morecore(nunits)) == 0)
+        return 0;
+  }
+}
+ 802:	70e2                	ld	ra,56(sp)
+ 804:	7442                	ld	s0,48(sp)
+ 806:	74a2                	ld	s1,40(sp)
+ 808:	7902                	ld	s2,32(sp)
+ 80a:	69e2                	ld	s3,24(sp)
+ 80c:	6a42                	ld	s4,16(sp)
+ 80e:	6aa2                	ld	s5,8(sp)
+ 810:	6b02                	ld	s6,0(sp)
+ 812:	6121                	addi	sp,sp,64
+ 814:	8082                	ret
+        prevp->s.ptr = p->s.ptr;
+ 816:	6398                	ld	a4,0(a5)
+ 818:	e118                	sd	a4,0(a0)
+ 81a:	bff1                	j	7f6 <malloc+0x88>
+  hp->s.size = nu;
+ 81c:	01652423          	sw	s6,8(a0)
+  free((void*)(hp + 1));
+ 820:	0541                	addi	a0,a0,16
+ 822:	00000097          	auipc	ra,0x0
+ 826:	eca080e7          	jalr	-310(ra) # 6ec <free>
+  return freep;
+ 82a:	00093503          	ld	a0,0(s2)
+      if((p = morecore(nunits)) == 0)
+ 82e:	d971                	beqz	a0,802 <malloc+0x94>
+  for(p = prevp->s.ptr; ; prevp = p, p = p->s.ptr){
+ 830:	611c                	ld	a5,0(a0)
+    if(p->s.size >= nunits){
+ 832:	4798                	lw	a4,8(a5)
+ 834:	fa9775e3          	bgeu	a4,s1,7de <malloc+0x70>
+    if(p == freep)
+ 838:	00093703          	ld	a4,0(s2)
+ 83c:	853e                	mv	a0,a5
+ 83e:	fef719e3          	bne	a4,a5,830 <malloc+0xc2>
+  p = sbrk(nu * sizeof(Header));
+ 842:	8552                	mv	a0,s4
+ 844:	00000097          	auipc	ra,0x0
+ 848:	b70080e7          	jalr	-1168(ra) # 3b4 <sbrk>
+  if(p == (char*)-1)
+ 84c:	fd5518e3          	bne	a0,s5,81c <malloc+0xae>
+        return 0;
+ 850:	4501                	li	a0,0
+ 852:	bf45                	j	802 <malloc+0x94>
diff -urN ./user/trace.d ../xv6-labs-2021/user/trace.d
--- ./user/trace.d	1970-01-01 08:00:00.000000000 +0800
+++ ../xv6-labs-2021/user/trace.d	2021-11-26 14:46:16.000000000 +0800
@@ -0,0 +1,2 @@
+user/trace.o: user/trace.c kernel/param.h kernel/types.h kernel/stat.h \
+ user/user.h
Binary files ./user/trace.o and ../xv6-labs-2021/user/trace.o differ
diff -urN ./user/trace.sym ../xv6-labs-2021/user/trace.sym
--- ./user/trace.sym	1970-01-01 08:00:00.000000000 +0800
+++ ../xv6-labs-2021/user/trace.sym	2021-11-26 14:46:16.000000000 +0800
@@ -0,0 +1,71 @@
+0000000000000000 .text
+0000000000000858 .rodata
+0000000000000900 .sbss
+0000000000000908 .bss
+0000000000000000 .comment
+0000000000000000 .riscv.attributes
+0000000000000000 .debug_aranges
+0000000000000000 .debug_info
+0000000000000000 .debug_abbrev
+0000000000000000 .debug_line
+0000000000000000 .debug_frame
+0000000000000000 .debug_str
+0000000000000000 .debug_line_str
+0000000000000000 .debug_loclists
+0000000000000000 .debug_rnglists
+0000000000000000 trace.c
+0000000000000000 ulib.c
+0000000000000000 printf.c
+00000000000003dc putc
+00000000000003fe printint
+00000000000008e8 digits
+0000000000000000 umalloc.c
+0000000000000900 freep
+0000000000000908 base
+00000000000000c0 strcpy
+00000000000006b6 printf
+00000000000010f9 __global_pointer$
+000000000000027a memmove
+0000000000000374 mknod
+00000000000003cc trace
+0000000000000178 gets
+00000000000008f9 __SDATA_BEGIN__
+00000000000003ac getpid
+000000000000030c memcpy
+000000000000076e malloc
+00000000000003bc sleep
+00000000000003d4 sysinfo
+000000000000033c pipe
+000000000000034c write
+0000000000000384 fstat
+0000000000000688 fprintf
+000000000000035c kill
+00000000000004aa vprintf
+000000000000039c chdir
+0000000000000364 exec
+0000000000000334 wait
+0000000000000344 read
+000000000000037c unlink
+00000000000002d2 memcmp
+0000000000000324 fork
+0000000000000918 __BSS_END__
+00000000000003b4 sbrk
+00000000000003c4 uptime
+00000000000008f9 __bss_start
+0000000000000132 memset
+0000000000000000 main
+00000000000000dc strcmp
+00000000000003a4 dup
+00000000000008f9 __DATA_BEGIN__
+00000000000001ec stat
+00000000000008f9 _edata
+0000000000000918 _end
+000000000000038c link
+000000000000032c exit
+0000000000000232 atoi
+0000000000000108 strlen
+000000000000036c open
+0000000000000154 strchr
+0000000000000394 mkdir
+0000000000000354 close
+00000000000006ec free
Binary files ./user/ulib.o and ../xv6-labs-2021/user/ulib.o differ
Binary files ./user/umalloc.o and ../xv6-labs-2021/user/umalloc.o differ
diff -urN ./user/usertests.asm ../xv6-labs-2021/user/usertests.asm
--- ./user/usertests.asm	2021-12-05 17:54:42.000000000 +0800
+++ ../xv6-labs-2021/user/usertests.asm	2021-11-26 14:46:16.000000000 +0800
@@ -24,15 +24,15 @@
        8:	20100593          	li	a1,513
        c:	4505                	li	a0,1
        e:	057e                	slli	a0,a0,0x1f
-      10:	00005097          	auipc	ra,0x5
-      14:	39a080e7          	jalr	922(ra) # 53aa <open>
+      10:	00006097          	auipc	ra,0x6
+      14:	872080e7          	jalr	-1934(ra) # 5882 <open>
     if(fd >= 0){
       18:	02055063          	bgez	a0,38 <copyinstr1+0x38>
     int fd = open((char *)addr, O_CREATE|O_WRONLY);
       1c:	20100593          	li	a1,513
       20:	557d                	li	a0,-1
-      22:	00005097          	auipc	ra,0x5
-      26:	388080e7          	jalr	904(ra) # 53aa <open>
+      22:	00006097          	auipc	ra,0x6
+      26:	860080e7          	jalr	-1952(ra) # 5882 <open>
     uint64 addr = addrs[ai];
       2a:	55fd                	li	a1,-1
     if(fd >= 0){
@@ -52,13 +52,13 @@
       printf("open(%p) returned %d, not -1\n", addr, fd);
       3c:	862a                	mv	a2,a0
       3e:	00006517          	auipc	a0,0x6
-      42:	84a50513          	addi	a0,a0,-1974 # 5888 <malloc+0xec>
-      46:	00005097          	auipc	ra,0x5
-      4a:	69e080e7          	jalr	1694(ra) # 56e4 <printf>
+      42:	d3250513          	addi	a0,a0,-718 # 5d70 <malloc+0xec>
+      46:	00006097          	auipc	ra,0x6
+      4a:	b86080e7          	jalr	-1146(ra) # 5bcc <printf>
       exit(1);
       4e:	4505                	li	a0,1
       50:	00005097          	auipc	ra,0x5
-      54:	31a080e7          	jalr	794(ra) # 536a <exit>
+      54:	7f2080e7          	jalr	2034(ra) # 5842 <exit>
 
 0000000000000058 <bsstest>:
 void
@@ -68,9 +68,9 @@
 
   for(i = 0; i < sizeof(uninit); i++){
       58:	00009797          	auipc	a5,0x9
-      5c:	01878793          	addi	a5,a5,24 # 9070 <uninit>
-      60:	0000b697          	auipc	a3,0xb
-      64:	72068693          	addi	a3,a3,1824 # b780 <buf>
+      5c:	68078793          	addi	a5,a5,1664 # 96d8 <uninit>
+      60:	0000c697          	auipc	a3,0xc
+      64:	d8868693          	addi	a3,a3,-632 # bde8 <buf>
     if(uninit[i] != '\0'){
       68:	0007c703          	lbu	a4,0(a5)
       6c:	e709                	bnez	a4,76 <bsstest+0x1e>
@@ -86,13 +86,13 @@
       printf("%s: bss test failed\n", s);
       7e:	85aa                	mv	a1,a0
       80:	00006517          	auipc	a0,0x6
-      84:	82850513          	addi	a0,a0,-2008 # 58a8 <malloc+0x10c>
-      88:	00005097          	auipc	ra,0x5
-      8c:	65c080e7          	jalr	1628(ra) # 56e4 <printf>
+      84:	d1050513          	addi	a0,a0,-752 # 5d90 <malloc+0x10c>
+      88:	00006097          	auipc	ra,0x6
+      8c:	b44080e7          	jalr	-1212(ra) # 5bcc <printf>
       exit(1);
       90:	4505                	li	a0,1
       92:	00005097          	auipc	ra,0x5
-      96:	2d8080e7          	jalr	728(ra) # 536a <exit>
+      96:	7b0080e7          	jalr	1968(ra) # 5842 <exit>
 
 000000000000009a <opentest>:
 {
@@ -105,20 +105,20 @@
   fd = open("echo", 0);
       a6:	4581                	li	a1,0
       a8:	00006517          	auipc	a0,0x6
-      ac:	81850513          	addi	a0,a0,-2024 # 58c0 <malloc+0x124>
+      ac:	d0050513          	addi	a0,a0,-768 # 5da8 <malloc+0x124>
       b0:	00005097          	auipc	ra,0x5
-      b4:	2fa080e7          	jalr	762(ra) # 53aa <open>
+      b4:	7d2080e7          	jalr	2002(ra) # 5882 <open>
   if(fd < 0){
       b8:	02054663          	bltz	a0,e4 <opentest+0x4a>
   close(fd);
       bc:	00005097          	auipc	ra,0x5
-      c0:	2d6080e7          	jalr	726(ra) # 5392 <close>
+      c0:	7ae080e7          	jalr	1966(ra) # 586a <close>
   fd = open("doesnotexist", 0);
       c4:	4581                	li	a1,0
       c6:	00006517          	auipc	a0,0x6
-      ca:	81a50513          	addi	a0,a0,-2022 # 58e0 <malloc+0x144>
+      ca:	d0250513          	addi	a0,a0,-766 # 5dc8 <malloc+0x144>
       ce:	00005097          	auipc	ra,0x5
-      d2:	2dc080e7          	jalr	732(ra) # 53aa <open>
+      d2:	7b4080e7          	jalr	1972(ra) # 5882 <open>
   if(fd >= 0){
       d6:	02055563          	bgez	a0,100 <opentest+0x66>
 }
@@ -129,24 +129,24 @@
       e2:	8082                	ret
     printf("%s: open echo failed!\n", s);
       e4:	85a6                	mv	a1,s1
-      e6:	00005517          	auipc	a0,0x5
-      ea:	7e250513          	addi	a0,a0,2018 # 58c8 <malloc+0x12c>
-      ee:	00005097          	auipc	ra,0x5
-      f2:	5f6080e7          	jalr	1526(ra) # 56e4 <printf>
+      e6:	00006517          	auipc	a0,0x6
+      ea:	cca50513          	addi	a0,a0,-822 # 5db0 <malloc+0x12c>
+      ee:	00006097          	auipc	ra,0x6
+      f2:	ade080e7          	jalr	-1314(ra) # 5bcc <printf>
     exit(1);
       f6:	4505                	li	a0,1
       f8:	00005097          	auipc	ra,0x5
-      fc:	272080e7          	jalr	626(ra) # 536a <exit>
+      fc:	74a080e7          	jalr	1866(ra) # 5842 <exit>
     printf("%s: open doesnotexist succeeded!\n", s);
      100:	85a6                	mv	a1,s1
-     102:	00005517          	auipc	a0,0x5
-     106:	7ee50513          	addi	a0,a0,2030 # 58f0 <malloc+0x154>
-     10a:	00005097          	auipc	ra,0x5
-     10e:	5da080e7          	jalr	1498(ra) # 56e4 <printf>
+     102:	00006517          	auipc	a0,0x6
+     106:	cd650513          	addi	a0,a0,-810 # 5dd8 <malloc+0x154>
+     10a:	00006097          	auipc	ra,0x6
+     10e:	ac2080e7          	jalr	-1342(ra) # 5bcc <printf>
     exit(1);
      112:	4505                	li	a0,1
      114:	00005097          	auipc	ra,0x5
-     118:	256080e7          	jalr	598(ra) # 536a <exit>
+     118:	72e080e7          	jalr	1838(ra) # 5842 <exit>
 
 000000000000011c <truncate2>:
 {
@@ -159,53 +159,53 @@
      128:	1800                	addi	s0,sp,48
      12a:	89aa                	mv	s3,a0
   unlink("truncfile");
-     12c:	00005517          	auipc	a0,0x5
-     130:	7ec50513          	addi	a0,a0,2028 # 5918 <malloc+0x17c>
+     12c:	00006517          	auipc	a0,0x6
+     130:	cd450513          	addi	a0,a0,-812 # 5e00 <malloc+0x17c>
      134:	00005097          	auipc	ra,0x5
-     138:	286080e7          	jalr	646(ra) # 53ba <unlink>
+     138:	75e080e7          	jalr	1886(ra) # 5892 <unlink>
   int fd1 = open("truncfile", O_CREATE|O_TRUNC|O_WRONLY);
      13c:	60100593          	li	a1,1537
-     140:	00005517          	auipc	a0,0x5
-     144:	7d850513          	addi	a0,a0,2008 # 5918 <malloc+0x17c>
+     140:	00006517          	auipc	a0,0x6
+     144:	cc050513          	addi	a0,a0,-832 # 5e00 <malloc+0x17c>
      148:	00005097          	auipc	ra,0x5
-     14c:	262080e7          	jalr	610(ra) # 53aa <open>
+     14c:	73a080e7          	jalr	1850(ra) # 5882 <open>
      150:	84aa                	mv	s1,a0
   write(fd1, "abcd", 4);
      152:	4611                	li	a2,4
-     154:	00005597          	auipc	a1,0x5
-     158:	7d458593          	addi	a1,a1,2004 # 5928 <malloc+0x18c>
+     154:	00006597          	auipc	a1,0x6
+     158:	cbc58593          	addi	a1,a1,-836 # 5e10 <malloc+0x18c>
      15c:	00005097          	auipc	ra,0x5
-     160:	22e080e7          	jalr	558(ra) # 538a <write>
+     160:	706080e7          	jalr	1798(ra) # 5862 <write>
   int fd2 = open("truncfile", O_TRUNC|O_WRONLY);
      164:	40100593          	li	a1,1025
-     168:	00005517          	auipc	a0,0x5
-     16c:	7b050513          	addi	a0,a0,1968 # 5918 <malloc+0x17c>
+     168:	00006517          	auipc	a0,0x6
+     16c:	c9850513          	addi	a0,a0,-872 # 5e00 <malloc+0x17c>
      170:	00005097          	auipc	ra,0x5
-     174:	23a080e7          	jalr	570(ra) # 53aa <open>
+     174:	712080e7          	jalr	1810(ra) # 5882 <open>
      178:	892a                	mv	s2,a0
   int n = write(fd1, "x", 1);
      17a:	4605                	li	a2,1
-     17c:	00005597          	auipc	a1,0x5
-     180:	7b458593          	addi	a1,a1,1972 # 5930 <malloc+0x194>
+     17c:	00006597          	auipc	a1,0x6
+     180:	c9c58593          	addi	a1,a1,-868 # 5e18 <malloc+0x194>
      184:	8526                	mv	a0,s1
      186:	00005097          	auipc	ra,0x5
-     18a:	204080e7          	jalr	516(ra) # 538a <write>
+     18a:	6dc080e7          	jalr	1756(ra) # 5862 <write>
   if(n != -1){
      18e:	57fd                	li	a5,-1
      190:	02f51b63          	bne	a0,a5,1c6 <truncate2+0xaa>
   unlink("truncfile");
-     194:	00005517          	auipc	a0,0x5
-     198:	78450513          	addi	a0,a0,1924 # 5918 <malloc+0x17c>
+     194:	00006517          	auipc	a0,0x6
+     198:	c6c50513          	addi	a0,a0,-916 # 5e00 <malloc+0x17c>
      19c:	00005097          	auipc	ra,0x5
-     1a0:	21e080e7          	jalr	542(ra) # 53ba <unlink>
+     1a0:	6f6080e7          	jalr	1782(ra) # 5892 <unlink>
   close(fd1);
      1a4:	8526                	mv	a0,s1
      1a6:	00005097          	auipc	ra,0x5
-     1aa:	1ec080e7          	jalr	492(ra) # 5392 <close>
+     1aa:	6c4080e7          	jalr	1732(ra) # 586a <close>
   close(fd2);
      1ae:	854a                	mv	a0,s2
      1b0:	00005097          	auipc	ra,0x5
-     1b4:	1e2080e7          	jalr	482(ra) # 5392 <close>
+     1b4:	6ba080e7          	jalr	1722(ra) # 586a <close>
 }
      1b8:	70a2                	ld	ra,40(sp)
      1ba:	7402                	ld	s0,32(sp)
@@ -217,14 +217,14 @@
     printf("%s: write returned %d, expected -1\n", s, n);
      1c6:	862a                	mv	a2,a0
      1c8:	85ce                	mv	a1,s3
-     1ca:	00005517          	auipc	a0,0x5
-     1ce:	76e50513          	addi	a0,a0,1902 # 5938 <malloc+0x19c>
-     1d2:	00005097          	auipc	ra,0x5
-     1d6:	512080e7          	jalr	1298(ra) # 56e4 <printf>
+     1ca:	00006517          	auipc	a0,0x6
+     1ce:	c5650513          	addi	a0,a0,-938 # 5e20 <malloc+0x19c>
+     1d2:	00006097          	auipc	ra,0x6
+     1d6:	9fa080e7          	jalr	-1542(ra) # 5bcc <printf>
     exit(1);
      1da:	4505                	li	a0,1
      1dc:	00005097          	auipc	ra,0x5
-     1e0:	18e080e7          	jalr	398(ra) # 536a <exit>
+     1e0:	666080e7          	jalr	1638(ra) # 5842 <exit>
 
 00000000000001e4 <createtest>:
 {
@@ -233,9321 +233,9856 @@
      1e8:	f022                	sd	s0,32(sp)
      1ea:	ec26                	sd	s1,24(sp)
      1ec:	e84a                	sd	s2,16(sp)
-     1ee:	e44e                	sd	s3,8(sp)
-     1f0:	1800                	addi	s0,sp,48
+     1ee:	1800                	addi	s0,sp,48
   name[0] = 'a';
-     1f2:	00008797          	auipc	a5,0x8
-     1f6:	d6678793          	addi	a5,a5,-666 # 7f58 <name>
-     1fa:	06100713          	li	a4,97
-     1fe:	00e78023          	sb	a4,0(a5)
+     1f0:	06100793          	li	a5,97
+     1f4:	fcf40c23          	sb	a5,-40(s0)
   name[2] = '\0';
-     202:	00078123          	sb	zero,2(a5)
-     206:	03000493          	li	s1,48
-    name[1] = '0' + i;
-     20a:	893e                	mv	s2,a5
+     1f8:	fc040d23          	sb	zero,-38(s0)
+     1fc:	03000493          	li	s1,48
   for(i = 0; i < N; i++){
-     20c:	06400993          	li	s3,100
+     200:	06400913          	li	s2,100
     name[1] = '0' + i;
-     210:	009900a3          	sb	s1,1(s2)
+     204:	fc940ca3          	sb	s1,-39(s0)
     fd = open(name, O_CREATE|O_RDWR);
-     214:	20200593          	li	a1,514
-     218:	854a                	mv	a0,s2
-     21a:	00005097          	auipc	ra,0x5
-     21e:	190080e7          	jalr	400(ra) # 53aa <open>
+     208:	20200593          	li	a1,514
+     20c:	fd840513          	addi	a0,s0,-40
+     210:	00005097          	auipc	ra,0x5
+     214:	672080e7          	jalr	1650(ra) # 5882 <open>
     close(fd);
-     222:	00005097          	auipc	ra,0x5
-     226:	170080e7          	jalr	368(ra) # 5392 <close>
+     218:	00005097          	auipc	ra,0x5
+     21c:	652080e7          	jalr	1618(ra) # 586a <close>
   for(i = 0; i < N; i++){
-     22a:	2485                	addiw	s1,s1,1
-     22c:	0ff4f493          	zext.b	s1,s1
-     230:	ff3490e3          	bne	s1,s3,210 <createtest+0x2c>
+     220:	2485                	addiw	s1,s1,1
+     222:	0ff4f493          	zext.b	s1,s1
+     226:	fd249fe3          	bne	s1,s2,204 <createtest+0x20>
   name[0] = 'a';
-     234:	00008797          	auipc	a5,0x8
-     238:	d2478793          	addi	a5,a5,-732 # 7f58 <name>
-     23c:	06100713          	li	a4,97
-     240:	00e78023          	sb	a4,0(a5)
+     22a:	06100793          	li	a5,97
+     22e:	fcf40c23          	sb	a5,-40(s0)
   name[2] = '\0';
-     244:	00078123          	sb	zero,2(a5)
-     248:	03000493          	li	s1,48
-    name[1] = '0' + i;
-     24c:	893e                	mv	s2,a5
+     232:	fc040d23          	sb	zero,-38(s0)
+     236:	03000493          	li	s1,48
   for(i = 0; i < N; i++){
-     24e:	06400993          	li	s3,100
+     23a:	06400913          	li	s2,100
     name[1] = '0' + i;
-     252:	009900a3          	sb	s1,1(s2)
+     23e:	fc940ca3          	sb	s1,-39(s0)
     unlink(name);
-     256:	854a                	mv	a0,s2
-     258:	00005097          	auipc	ra,0x5
-     25c:	162080e7          	jalr	354(ra) # 53ba <unlink>
+     242:	fd840513          	addi	a0,s0,-40
+     246:	00005097          	auipc	ra,0x5
+     24a:	64c080e7          	jalr	1612(ra) # 5892 <unlink>
   for(i = 0; i < N; i++){
-     260:	2485                	addiw	s1,s1,1
-     262:	0ff4f493          	zext.b	s1,s1
-     266:	ff3496e3          	bne	s1,s3,252 <createtest+0x6e>
-}
-     26a:	70a2                	ld	ra,40(sp)
-     26c:	7402                	ld	s0,32(sp)
-     26e:	64e2                	ld	s1,24(sp)
-     270:	6942                	ld	s2,16(sp)
-     272:	69a2                	ld	s3,8(sp)
-     274:	6145                	addi	sp,sp,48
-     276:	8082                	ret
-
-0000000000000278 <bigwrite>:
-{
-     278:	715d                	addi	sp,sp,-80
-     27a:	e486                	sd	ra,72(sp)
-     27c:	e0a2                	sd	s0,64(sp)
-     27e:	fc26                	sd	s1,56(sp)
-     280:	f84a                	sd	s2,48(sp)
-     282:	f44e                	sd	s3,40(sp)
-     284:	f052                	sd	s4,32(sp)
-     286:	ec56                	sd	s5,24(sp)
-     288:	e85a                	sd	s6,16(sp)
-     28a:	e45e                	sd	s7,8(sp)
-     28c:	0880                	addi	s0,sp,80
-     28e:	8baa                	mv	s7,a0
+     24e:	2485                	addiw	s1,s1,1
+     250:	0ff4f493          	zext.b	s1,s1
+     254:	ff2495e3          	bne	s1,s2,23e <createtest+0x5a>
+}
+     258:	70a2                	ld	ra,40(sp)
+     25a:	7402                	ld	s0,32(sp)
+     25c:	64e2                	ld	s1,24(sp)
+     25e:	6942                	ld	s2,16(sp)
+     260:	6145                	addi	sp,sp,48
+     262:	8082                	ret
+
+0000000000000264 <bigwrite>:
+{
+     264:	715d                	addi	sp,sp,-80
+     266:	e486                	sd	ra,72(sp)
+     268:	e0a2                	sd	s0,64(sp)
+     26a:	fc26                	sd	s1,56(sp)
+     26c:	f84a                	sd	s2,48(sp)
+     26e:	f44e                	sd	s3,40(sp)
+     270:	f052                	sd	s4,32(sp)
+     272:	ec56                	sd	s5,24(sp)
+     274:	e85a                	sd	s6,16(sp)
+     276:	e45e                	sd	s7,8(sp)
+     278:	0880                	addi	s0,sp,80
+     27a:	8baa                	mv	s7,a0
   unlink("bigwrite");
-     290:	00005517          	auipc	a0,0x5
-     294:	6d050513          	addi	a0,a0,1744 # 5960 <malloc+0x1c4>
-     298:	00005097          	auipc	ra,0x5
-     29c:	122080e7          	jalr	290(ra) # 53ba <unlink>
+     27c:	00006517          	auipc	a0,0x6
+     280:	bcc50513          	addi	a0,a0,-1076 # 5e48 <malloc+0x1c4>
+     284:	00005097          	auipc	ra,0x5
+     288:	60e080e7          	jalr	1550(ra) # 5892 <unlink>
   for(sz = 499; sz < (MAXOPBLOCKS+2)*BSIZE; sz += 471){
-     2a0:	1f300493          	li	s1,499
+     28c:	1f300493          	li	s1,499
     fd = open("bigwrite", O_CREATE | O_RDWR);
-     2a4:	00005a97          	auipc	s5,0x5
-     2a8:	6bca8a93          	addi	s5,s5,1724 # 5960 <malloc+0x1c4>
+     290:	00006a97          	auipc	s5,0x6
+     294:	bb8a8a93          	addi	s5,s5,-1096 # 5e48 <malloc+0x1c4>
       int cc = write(fd, buf, sz);
-     2ac:	0000ba17          	auipc	s4,0xb
-     2b0:	4d4a0a13          	addi	s4,s4,1236 # b780 <buf>
+     298:	0000ca17          	auipc	s4,0xc
+     29c:	b50a0a13          	addi	s4,s4,-1200 # bde8 <buf>
   for(sz = 499; sz < (MAXOPBLOCKS+2)*BSIZE; sz += 471){
-     2b4:	6b0d                	lui	s6,0x3
-     2b6:	1c9b0b13          	addi	s6,s6,457 # 31c9 <subdir+0x4f3>
+     2a0:	6b0d                	lui	s6,0x3
+     2a2:	1c9b0b13          	addi	s6,s6,457 # 31c9 <dirtest+0x97>
     fd = open("bigwrite", O_CREATE | O_RDWR);
-     2ba:	20200593          	li	a1,514
-     2be:	8556                	mv	a0,s5
-     2c0:	00005097          	auipc	ra,0x5
-     2c4:	0ea080e7          	jalr	234(ra) # 53aa <open>
-     2c8:	892a                	mv	s2,a0
+     2a6:	20200593          	li	a1,514
+     2aa:	8556                	mv	a0,s5
+     2ac:	00005097          	auipc	ra,0x5
+     2b0:	5d6080e7          	jalr	1494(ra) # 5882 <open>
+     2b4:	892a                	mv	s2,a0
     if(fd < 0){
-     2ca:	04054d63          	bltz	a0,324 <bigwrite+0xac>
+     2b6:	04054d63          	bltz	a0,310 <bigwrite+0xac>
       int cc = write(fd, buf, sz);
-     2ce:	8626                	mv	a2,s1
-     2d0:	85d2                	mv	a1,s4
-     2d2:	00005097          	auipc	ra,0x5
-     2d6:	0b8080e7          	jalr	184(ra) # 538a <write>
-     2da:	89aa                	mv	s3,a0
+     2ba:	8626                	mv	a2,s1
+     2bc:	85d2                	mv	a1,s4
+     2be:	00005097          	auipc	ra,0x5
+     2c2:	5a4080e7          	jalr	1444(ra) # 5862 <write>
+     2c6:	89aa                	mv	s3,a0
       if(cc != sz){
-     2dc:	06a49263          	bne	s1,a0,340 <bigwrite+0xc8>
+     2c8:	06a49263          	bne	s1,a0,32c <bigwrite+0xc8>
       int cc = write(fd, buf, sz);
-     2e0:	8626                	mv	a2,s1
-     2e2:	85d2                	mv	a1,s4
-     2e4:	854a                	mv	a0,s2
-     2e6:	00005097          	auipc	ra,0x5
-     2ea:	0a4080e7          	jalr	164(ra) # 538a <write>
+     2cc:	8626                	mv	a2,s1
+     2ce:	85d2                	mv	a1,s4
+     2d0:	854a                	mv	a0,s2
+     2d2:	00005097          	auipc	ra,0x5
+     2d6:	590080e7          	jalr	1424(ra) # 5862 <write>
       if(cc != sz){
-     2ee:	04951a63          	bne	a0,s1,342 <bigwrite+0xca>
+     2da:	04951a63          	bne	a0,s1,32e <bigwrite+0xca>
     close(fd);
-     2f2:	854a                	mv	a0,s2
-     2f4:	00005097          	auipc	ra,0x5
-     2f8:	09e080e7          	jalr	158(ra) # 5392 <close>
+     2de:	854a                	mv	a0,s2
+     2e0:	00005097          	auipc	ra,0x5
+     2e4:	58a080e7          	jalr	1418(ra) # 586a <close>
     unlink("bigwrite");
-     2fc:	8556                	mv	a0,s5
-     2fe:	00005097          	auipc	ra,0x5
-     302:	0bc080e7          	jalr	188(ra) # 53ba <unlink>
+     2e8:	8556                	mv	a0,s5
+     2ea:	00005097          	auipc	ra,0x5
+     2ee:	5a8080e7          	jalr	1448(ra) # 5892 <unlink>
   for(sz = 499; sz < (MAXOPBLOCKS+2)*BSIZE; sz += 471){
-     306:	1d74849b          	addiw	s1,s1,471
-     30a:	fb6498e3          	bne	s1,s6,2ba <bigwrite+0x42>
+     2f2:	1d74849b          	addiw	s1,s1,471
+     2f6:	fb6498e3          	bne	s1,s6,2a6 <bigwrite+0x42>
 }
-     30e:	60a6                	ld	ra,72(sp)
-     310:	6406                	ld	s0,64(sp)
-     312:	74e2                	ld	s1,56(sp)
-     314:	7942                	ld	s2,48(sp)
-     316:	79a2                	ld	s3,40(sp)
-     318:	7a02                	ld	s4,32(sp)
-     31a:	6ae2                	ld	s5,24(sp)
-     31c:	6b42                	ld	s6,16(sp)
-     31e:	6ba2                	ld	s7,8(sp)
-     320:	6161                	addi	sp,sp,80
-     322:	8082                	ret
+     2fa:	60a6                	ld	ra,72(sp)
+     2fc:	6406                	ld	s0,64(sp)
+     2fe:	74e2                	ld	s1,56(sp)
+     300:	7942                	ld	s2,48(sp)
+     302:	79a2                	ld	s3,40(sp)
+     304:	7a02                	ld	s4,32(sp)
+     306:	6ae2                	ld	s5,24(sp)
+     308:	6b42                	ld	s6,16(sp)
+     30a:	6ba2                	ld	s7,8(sp)
+     30c:	6161                	addi	sp,sp,80
+     30e:	8082                	ret
       printf("%s: cannot create bigwrite\n", s);
-     324:	85de                	mv	a1,s7
-     326:	00005517          	auipc	a0,0x5
-     32a:	64a50513          	addi	a0,a0,1610 # 5970 <malloc+0x1d4>
-     32e:	00005097          	auipc	ra,0x5
-     332:	3b6080e7          	jalr	950(ra) # 56e4 <printf>
-      exit(1);
-     336:	4505                	li	a0,1
-     338:	00005097          	auipc	ra,0x5
-     33c:	032080e7          	jalr	50(ra) # 536a <exit>
+     310:	85de                	mv	a1,s7
+     312:	00006517          	auipc	a0,0x6
+     316:	b4650513          	addi	a0,a0,-1210 # 5e58 <malloc+0x1d4>
+     31a:	00006097          	auipc	ra,0x6
+     31e:	8b2080e7          	jalr	-1870(ra) # 5bcc <printf>
+      exit(1);
+     322:	4505                	li	a0,1
+     324:	00005097          	auipc	ra,0x5
+     328:	51e080e7          	jalr	1310(ra) # 5842 <exit>
       if(cc != sz){
-     340:	89a6                	mv	s3,s1
+     32c:	89a6                	mv	s3,s1
         printf("%s: write(%d) ret %d\n", s, sz, cc);
-     342:	86aa                	mv	a3,a0
-     344:	864e                	mv	a2,s3
-     346:	85de                	mv	a1,s7
-     348:	00005517          	auipc	a0,0x5
-     34c:	64850513          	addi	a0,a0,1608 # 5990 <malloc+0x1f4>
-     350:	00005097          	auipc	ra,0x5
-     354:	394080e7          	jalr	916(ra) # 56e4 <printf>
+     32e:	86aa                	mv	a3,a0
+     330:	864e                	mv	a2,s3
+     332:	85de                	mv	a1,s7
+     334:	00006517          	auipc	a0,0x6
+     338:	b4450513          	addi	a0,a0,-1212 # 5e78 <malloc+0x1f4>
+     33c:	00006097          	auipc	ra,0x6
+     340:	890080e7          	jalr	-1904(ra) # 5bcc <printf>
         exit(1);
-     358:	4505                	li	a0,1
-     35a:	00005097          	auipc	ra,0x5
-     35e:	010080e7          	jalr	16(ra) # 536a <exit>
-
-0000000000000362 <copyin>:
-{
-     362:	715d                	addi	sp,sp,-80
-     364:	e486                	sd	ra,72(sp)
-     366:	e0a2                	sd	s0,64(sp)
-     368:	fc26                	sd	s1,56(sp)
-     36a:	f84a                	sd	s2,48(sp)
-     36c:	f44e                	sd	s3,40(sp)
-     36e:	f052                	sd	s4,32(sp)
-     370:	0880                	addi	s0,sp,80
+     344:	4505                	li	a0,1
+     346:	00005097          	auipc	ra,0x5
+     34a:	4fc080e7          	jalr	1276(ra) # 5842 <exit>
+
+000000000000034e <copyin>:
+{
+     34e:	715d                	addi	sp,sp,-80
+     350:	e486                	sd	ra,72(sp)
+     352:	e0a2                	sd	s0,64(sp)
+     354:	fc26                	sd	s1,56(sp)
+     356:	f84a                	sd	s2,48(sp)
+     358:	f44e                	sd	s3,40(sp)
+     35a:	f052                	sd	s4,32(sp)
+     35c:	0880                	addi	s0,sp,80
   uint64 addrs[] = { 0x80000000LL, 0xffffffffffffffff };
-     372:	4785                	li	a5,1
-     374:	07fe                	slli	a5,a5,0x1f
-     376:	fcf43023          	sd	a5,-64(s0)
-     37a:	57fd                	li	a5,-1
-     37c:	fcf43423          	sd	a5,-56(s0)
+     35e:	4785                	li	a5,1
+     360:	07fe                	slli	a5,a5,0x1f
+     362:	fcf43023          	sd	a5,-64(s0)
+     366:	57fd                	li	a5,-1
+     368:	fcf43423          	sd	a5,-56(s0)
   for(int ai = 0; ai < 2; ai++){
-     380:	fc040913          	addi	s2,s0,-64
+     36c:	fc040913          	addi	s2,s0,-64
     int fd = open("copyin1", O_CREATE|O_WRONLY);
-     384:	00005a17          	auipc	s4,0x5
-     388:	624a0a13          	addi	s4,s4,1572 # 59a8 <malloc+0x20c>
+     370:	00006a17          	auipc	s4,0x6
+     374:	b20a0a13          	addi	s4,s4,-1248 # 5e90 <malloc+0x20c>
     uint64 addr = addrs[ai];
-     38c:	00093983          	ld	s3,0(s2)
+     378:	00093983          	ld	s3,0(s2)
     int fd = open("copyin1", O_CREATE|O_WRONLY);
-     390:	20100593          	li	a1,513
-     394:	8552                	mv	a0,s4
-     396:	00005097          	auipc	ra,0x5
-     39a:	014080e7          	jalr	20(ra) # 53aa <open>
-     39e:	84aa                	mv	s1,a0
+     37c:	20100593          	li	a1,513
+     380:	8552                	mv	a0,s4
+     382:	00005097          	auipc	ra,0x5
+     386:	500080e7          	jalr	1280(ra) # 5882 <open>
+     38a:	84aa                	mv	s1,a0
     if(fd < 0){
-     3a0:	08054863          	bltz	a0,430 <copyin+0xce>
+     38c:	08054863          	bltz	a0,41c <copyin+0xce>
     int n = write(fd, (void*)addr, 8192);
-     3a4:	6609                	lui	a2,0x2
-     3a6:	85ce                	mv	a1,s3
-     3a8:	00005097          	auipc	ra,0x5
-     3ac:	fe2080e7          	jalr	-30(ra) # 538a <write>
+     390:	6609                	lui	a2,0x2
+     392:	85ce                	mv	a1,s3
+     394:	00005097          	auipc	ra,0x5
+     398:	4ce080e7          	jalr	1230(ra) # 5862 <write>
     if(n >= 0){
-     3b0:	08055d63          	bgez	a0,44a <copyin+0xe8>
+     39c:	08055d63          	bgez	a0,436 <copyin+0xe8>
     close(fd);
-     3b4:	8526                	mv	a0,s1
-     3b6:	00005097          	auipc	ra,0x5
-     3ba:	fdc080e7          	jalr	-36(ra) # 5392 <close>
+     3a0:	8526                	mv	a0,s1
+     3a2:	00005097          	auipc	ra,0x5
+     3a6:	4c8080e7          	jalr	1224(ra) # 586a <close>
     unlink("copyin1");
-     3be:	8552                	mv	a0,s4
-     3c0:	00005097          	auipc	ra,0x5
-     3c4:	ffa080e7          	jalr	-6(ra) # 53ba <unlink>
+     3aa:	8552                	mv	a0,s4
+     3ac:	00005097          	auipc	ra,0x5
+     3b0:	4e6080e7          	jalr	1254(ra) # 5892 <unlink>
     n = write(1, (char*)addr, 8192);
-     3c8:	6609                	lui	a2,0x2
-     3ca:	85ce                	mv	a1,s3
-     3cc:	4505                	li	a0,1
-     3ce:	00005097          	auipc	ra,0x5
-     3d2:	fbc080e7          	jalr	-68(ra) # 538a <write>
+     3b4:	6609                	lui	a2,0x2
+     3b6:	85ce                	mv	a1,s3
+     3b8:	4505                	li	a0,1
+     3ba:	00005097          	auipc	ra,0x5
+     3be:	4a8080e7          	jalr	1192(ra) # 5862 <write>
     if(n > 0){
-     3d6:	08a04963          	bgtz	a0,468 <copyin+0x106>
+     3c2:	08a04963          	bgtz	a0,454 <copyin+0x106>
     if(pipe(fds) < 0){
-     3da:	fb840513          	addi	a0,s0,-72
-     3de:	00005097          	auipc	ra,0x5
-     3e2:	f9c080e7          	jalr	-100(ra) # 537a <pipe>
-     3e6:	0a054063          	bltz	a0,486 <copyin+0x124>
+     3c6:	fb840513          	addi	a0,s0,-72
+     3ca:	00005097          	auipc	ra,0x5
+     3ce:	488080e7          	jalr	1160(ra) # 5852 <pipe>
+     3d2:	0a054063          	bltz	a0,472 <copyin+0x124>
     n = write(fds[1], (char*)addr, 8192);
-     3ea:	6609                	lui	a2,0x2
-     3ec:	85ce                	mv	a1,s3
-     3ee:	fbc42503          	lw	a0,-68(s0)
-     3f2:	00005097          	auipc	ra,0x5
-     3f6:	f98080e7          	jalr	-104(ra) # 538a <write>
+     3d6:	6609                	lui	a2,0x2
+     3d8:	85ce                	mv	a1,s3
+     3da:	fbc42503          	lw	a0,-68(s0)
+     3de:	00005097          	auipc	ra,0x5
+     3e2:	484080e7          	jalr	1156(ra) # 5862 <write>
     if(n > 0){
-     3fa:	0aa04363          	bgtz	a0,4a0 <copyin+0x13e>
+     3e6:	0aa04363          	bgtz	a0,48c <copyin+0x13e>
     close(fds[0]);
-     3fe:	fb842503          	lw	a0,-72(s0)
-     402:	00005097          	auipc	ra,0x5
-     406:	f90080e7          	jalr	-112(ra) # 5392 <close>
+     3ea:	fb842503          	lw	a0,-72(s0)
+     3ee:	00005097          	auipc	ra,0x5
+     3f2:	47c080e7          	jalr	1148(ra) # 586a <close>
     close(fds[1]);
-     40a:	fbc42503          	lw	a0,-68(s0)
-     40e:	00005097          	auipc	ra,0x5
-     412:	f84080e7          	jalr	-124(ra) # 5392 <close>
+     3f6:	fbc42503          	lw	a0,-68(s0)
+     3fa:	00005097          	auipc	ra,0x5
+     3fe:	470080e7          	jalr	1136(ra) # 586a <close>
   for(int ai = 0; ai < 2; ai++){
-     416:	0921                	addi	s2,s2,8
-     418:	fd040793          	addi	a5,s0,-48
-     41c:	f6f918e3          	bne	s2,a5,38c <copyin+0x2a>
-}
-     420:	60a6                	ld	ra,72(sp)
-     422:	6406                	ld	s0,64(sp)
-     424:	74e2                	ld	s1,56(sp)
-     426:	7942                	ld	s2,48(sp)
-     428:	79a2                	ld	s3,40(sp)
-     42a:	7a02                	ld	s4,32(sp)
-     42c:	6161                	addi	sp,sp,80
-     42e:	8082                	ret
+     402:	0921                	addi	s2,s2,8
+     404:	fd040793          	addi	a5,s0,-48
+     408:	f6f918e3          	bne	s2,a5,378 <copyin+0x2a>
+}
+     40c:	60a6                	ld	ra,72(sp)
+     40e:	6406                	ld	s0,64(sp)
+     410:	74e2                	ld	s1,56(sp)
+     412:	7942                	ld	s2,48(sp)
+     414:	79a2                	ld	s3,40(sp)
+     416:	7a02                	ld	s4,32(sp)
+     418:	6161                	addi	sp,sp,80
+     41a:	8082                	ret
       printf("open(copyin1) failed\n");
-     430:	00005517          	auipc	a0,0x5
-     434:	58050513          	addi	a0,a0,1408 # 59b0 <malloc+0x214>
-     438:	00005097          	auipc	ra,0x5
-     43c:	2ac080e7          	jalr	684(ra) # 56e4 <printf>
-      exit(1);
-     440:	4505                	li	a0,1
-     442:	00005097          	auipc	ra,0x5
-     446:	f28080e7          	jalr	-216(ra) # 536a <exit>
+     41c:	00006517          	auipc	a0,0x6
+     420:	a7c50513          	addi	a0,a0,-1412 # 5e98 <malloc+0x214>
+     424:	00005097          	auipc	ra,0x5
+     428:	7a8080e7          	jalr	1960(ra) # 5bcc <printf>
+      exit(1);
+     42c:	4505                	li	a0,1
+     42e:	00005097          	auipc	ra,0x5
+     432:	414080e7          	jalr	1044(ra) # 5842 <exit>
       printf("write(fd, %p, 8192) returned %d, not -1\n", addr, n);
-     44a:	862a                	mv	a2,a0
-     44c:	85ce                	mv	a1,s3
-     44e:	00005517          	auipc	a0,0x5
-     452:	57a50513          	addi	a0,a0,1402 # 59c8 <malloc+0x22c>
-     456:	00005097          	auipc	ra,0x5
-     45a:	28e080e7          	jalr	654(ra) # 56e4 <printf>
+     436:	862a                	mv	a2,a0
+     438:	85ce                	mv	a1,s3
+     43a:	00006517          	auipc	a0,0x6
+     43e:	a7650513          	addi	a0,a0,-1418 # 5eb0 <malloc+0x22c>
+     442:	00005097          	auipc	ra,0x5
+     446:	78a080e7          	jalr	1930(ra) # 5bcc <printf>
       exit(1);
-     45e:	4505                	li	a0,1
-     460:	00005097          	auipc	ra,0x5
-     464:	f0a080e7          	jalr	-246(ra) # 536a <exit>
+     44a:	4505                	li	a0,1
+     44c:	00005097          	auipc	ra,0x5
+     450:	3f6080e7          	jalr	1014(ra) # 5842 <exit>
       printf("write(1, %p, 8192) returned %d, not -1 or 0\n", addr, n);
-     468:	862a                	mv	a2,a0
-     46a:	85ce                	mv	a1,s3
-     46c:	00005517          	auipc	a0,0x5
-     470:	58c50513          	addi	a0,a0,1420 # 59f8 <malloc+0x25c>
-     474:	00005097          	auipc	ra,0x5
-     478:	270080e7          	jalr	624(ra) # 56e4 <printf>
-      exit(1);
-     47c:	4505                	li	a0,1
-     47e:	00005097          	auipc	ra,0x5
-     482:	eec080e7          	jalr	-276(ra) # 536a <exit>
-      printf("pipe() failed\n");
-     486:	00005517          	auipc	a0,0x5
-     48a:	5a250513          	addi	a0,a0,1442 # 5a28 <malloc+0x28c>
-     48e:	00005097          	auipc	ra,0x5
-     492:	256080e7          	jalr	598(ra) # 56e4 <printf>
+     454:	862a                	mv	a2,a0
+     456:	85ce                	mv	a1,s3
+     458:	00006517          	auipc	a0,0x6
+     45c:	a8850513          	addi	a0,a0,-1400 # 5ee0 <malloc+0x25c>
+     460:	00005097          	auipc	ra,0x5
+     464:	76c080e7          	jalr	1900(ra) # 5bcc <printf>
       exit(1);
-     496:	4505                	li	a0,1
-     498:	00005097          	auipc	ra,0x5
-     49c:	ed2080e7          	jalr	-302(ra) # 536a <exit>
+     468:	4505                	li	a0,1
+     46a:	00005097          	auipc	ra,0x5
+     46e:	3d8080e7          	jalr	984(ra) # 5842 <exit>
+      printf("pipe() failed\n");
+     472:	00006517          	auipc	a0,0x6
+     476:	a9e50513          	addi	a0,a0,-1378 # 5f10 <malloc+0x28c>
+     47a:	00005097          	auipc	ra,0x5
+     47e:	752080e7          	jalr	1874(ra) # 5bcc <printf>
+      exit(1);
+     482:	4505                	li	a0,1
+     484:	00005097          	auipc	ra,0x5
+     488:	3be080e7          	jalr	958(ra) # 5842 <exit>
       printf("write(pipe, %p, 8192) returned %d, not -1 or 0\n", addr, n);
-     4a0:	862a                	mv	a2,a0
-     4a2:	85ce                	mv	a1,s3
-     4a4:	00005517          	auipc	a0,0x5
-     4a8:	59450513          	addi	a0,a0,1428 # 5a38 <malloc+0x29c>
-     4ac:	00005097          	auipc	ra,0x5
-     4b0:	238080e7          	jalr	568(ra) # 56e4 <printf>
-      exit(1);
-     4b4:	4505                	li	a0,1
-     4b6:	00005097          	auipc	ra,0x5
-     4ba:	eb4080e7          	jalr	-332(ra) # 536a <exit>
-
-00000000000004be <copyout>:
-{
-     4be:	711d                	addi	sp,sp,-96
-     4c0:	ec86                	sd	ra,88(sp)
-     4c2:	e8a2                	sd	s0,80(sp)
-     4c4:	e4a6                	sd	s1,72(sp)
-     4c6:	e0ca                	sd	s2,64(sp)
-     4c8:	fc4e                	sd	s3,56(sp)
-     4ca:	f852                	sd	s4,48(sp)
-     4cc:	f456                	sd	s5,40(sp)
-     4ce:	1080                	addi	s0,sp,96
+     48c:	862a                	mv	a2,a0
+     48e:	85ce                	mv	a1,s3
+     490:	00006517          	auipc	a0,0x6
+     494:	a9050513          	addi	a0,a0,-1392 # 5f20 <malloc+0x29c>
+     498:	00005097          	auipc	ra,0x5
+     49c:	734080e7          	jalr	1844(ra) # 5bcc <printf>
+      exit(1);
+     4a0:	4505                	li	a0,1
+     4a2:	00005097          	auipc	ra,0x5
+     4a6:	3a0080e7          	jalr	928(ra) # 5842 <exit>
+
+00000000000004aa <copyout>:
+{
+     4aa:	711d                	addi	sp,sp,-96
+     4ac:	ec86                	sd	ra,88(sp)
+     4ae:	e8a2                	sd	s0,80(sp)
+     4b0:	e4a6                	sd	s1,72(sp)
+     4b2:	e0ca                	sd	s2,64(sp)
+     4b4:	fc4e                	sd	s3,56(sp)
+     4b6:	f852                	sd	s4,48(sp)
+     4b8:	f456                	sd	s5,40(sp)
+     4ba:	1080                	addi	s0,sp,96
   uint64 addrs[] = { 0x80000000LL, 0xffffffffffffffff };
-     4d0:	4785                	li	a5,1
-     4d2:	07fe                	slli	a5,a5,0x1f
-     4d4:	faf43823          	sd	a5,-80(s0)
-     4d8:	57fd                	li	a5,-1
-     4da:	faf43c23          	sd	a5,-72(s0)
+     4bc:	4785                	li	a5,1
+     4be:	07fe                	slli	a5,a5,0x1f
+     4c0:	faf43823          	sd	a5,-80(s0)
+     4c4:	57fd                	li	a5,-1
+     4c6:	faf43c23          	sd	a5,-72(s0)
   for(int ai = 0; ai < 2; ai++){
-     4de:	fb040913          	addi	s2,s0,-80
+     4ca:	fb040913          	addi	s2,s0,-80
     int fd = open("README", 0);
-     4e2:	00005a17          	auipc	s4,0x5
-     4e6:	586a0a13          	addi	s4,s4,1414 # 5a68 <malloc+0x2cc>
+     4ce:	00006a17          	auipc	s4,0x6
+     4d2:	a82a0a13          	addi	s4,s4,-1406 # 5f50 <malloc+0x2cc>
     n = write(fds[1], "x", 1);
-     4ea:	00005a97          	auipc	s5,0x5
-     4ee:	446a8a93          	addi	s5,s5,1094 # 5930 <malloc+0x194>
+     4d6:	00006a97          	auipc	s5,0x6
+     4da:	942a8a93          	addi	s5,s5,-1726 # 5e18 <malloc+0x194>
     uint64 addr = addrs[ai];
-     4f2:	00093983          	ld	s3,0(s2)
+     4de:	00093983          	ld	s3,0(s2)
     int fd = open("README", 0);
-     4f6:	4581                	li	a1,0
-     4f8:	8552                	mv	a0,s4
-     4fa:	00005097          	auipc	ra,0x5
-     4fe:	eb0080e7          	jalr	-336(ra) # 53aa <open>
-     502:	84aa                	mv	s1,a0
+     4e2:	4581                	li	a1,0
+     4e4:	8552                	mv	a0,s4
+     4e6:	00005097          	auipc	ra,0x5
+     4ea:	39c080e7          	jalr	924(ra) # 5882 <open>
+     4ee:	84aa                	mv	s1,a0
     if(fd < 0){
-     504:	08054663          	bltz	a0,590 <copyout+0xd2>
+     4f0:	08054663          	bltz	a0,57c <copyout+0xd2>
     int n = read(fd, (void*)addr, 8192);
-     508:	6609                	lui	a2,0x2
-     50a:	85ce                	mv	a1,s3
-     50c:	00005097          	auipc	ra,0x5
-     510:	e76080e7          	jalr	-394(ra) # 5382 <read>
+     4f4:	6609                	lui	a2,0x2
+     4f6:	85ce                	mv	a1,s3
+     4f8:	00005097          	auipc	ra,0x5
+     4fc:	362080e7          	jalr	866(ra) # 585a <read>
     if(n > 0){
-     514:	08a04b63          	bgtz	a0,5aa <copyout+0xec>
+     500:	08a04b63          	bgtz	a0,596 <copyout+0xec>
     close(fd);
-     518:	8526                	mv	a0,s1
-     51a:	00005097          	auipc	ra,0x5
-     51e:	e78080e7          	jalr	-392(ra) # 5392 <close>
+     504:	8526                	mv	a0,s1
+     506:	00005097          	auipc	ra,0x5
+     50a:	364080e7          	jalr	868(ra) # 586a <close>
     if(pipe(fds) < 0){
-     522:	fa840513          	addi	a0,s0,-88
-     526:	00005097          	auipc	ra,0x5
-     52a:	e54080e7          	jalr	-428(ra) # 537a <pipe>
-     52e:	08054d63          	bltz	a0,5c8 <copyout+0x10a>
+     50e:	fa840513          	addi	a0,s0,-88
+     512:	00005097          	auipc	ra,0x5
+     516:	340080e7          	jalr	832(ra) # 5852 <pipe>
+     51a:	08054d63          	bltz	a0,5b4 <copyout+0x10a>
     n = write(fds[1], "x", 1);
-     532:	4605                	li	a2,1
-     534:	85d6                	mv	a1,s5
-     536:	fac42503          	lw	a0,-84(s0)
-     53a:	00005097          	auipc	ra,0x5
-     53e:	e50080e7          	jalr	-432(ra) # 538a <write>
+     51e:	4605                	li	a2,1
+     520:	85d6                	mv	a1,s5
+     522:	fac42503          	lw	a0,-84(s0)
+     526:	00005097          	auipc	ra,0x5
+     52a:	33c080e7          	jalr	828(ra) # 5862 <write>
     if(n != 1){
-     542:	4785                	li	a5,1
-     544:	08f51f63          	bne	a0,a5,5e2 <copyout+0x124>
+     52e:	4785                	li	a5,1
+     530:	08f51f63          	bne	a0,a5,5ce <copyout+0x124>
     n = read(fds[0], (void*)addr, 8192);
-     548:	6609                	lui	a2,0x2
-     54a:	85ce                	mv	a1,s3
-     54c:	fa842503          	lw	a0,-88(s0)
-     550:	00005097          	auipc	ra,0x5
-     554:	e32080e7          	jalr	-462(ra) # 5382 <read>
+     534:	6609                	lui	a2,0x2
+     536:	85ce                	mv	a1,s3
+     538:	fa842503          	lw	a0,-88(s0)
+     53c:	00005097          	auipc	ra,0x5
+     540:	31e080e7          	jalr	798(ra) # 585a <read>
     if(n > 0){
-     558:	0aa04263          	bgtz	a0,5fc <copyout+0x13e>
+     544:	0aa04263          	bgtz	a0,5e8 <copyout+0x13e>
     close(fds[0]);
-     55c:	fa842503          	lw	a0,-88(s0)
-     560:	00005097          	auipc	ra,0x5
-     564:	e32080e7          	jalr	-462(ra) # 5392 <close>
+     548:	fa842503          	lw	a0,-88(s0)
+     54c:	00005097          	auipc	ra,0x5
+     550:	31e080e7          	jalr	798(ra) # 586a <close>
     close(fds[1]);
-     568:	fac42503          	lw	a0,-84(s0)
-     56c:	00005097          	auipc	ra,0x5
-     570:	e26080e7          	jalr	-474(ra) # 5392 <close>
+     554:	fac42503          	lw	a0,-84(s0)
+     558:	00005097          	auipc	ra,0x5
+     55c:	312080e7          	jalr	786(ra) # 586a <close>
   for(int ai = 0; ai < 2; ai++){
-     574:	0921                	addi	s2,s2,8
-     576:	fc040793          	addi	a5,s0,-64
-     57a:	f6f91ce3          	bne	s2,a5,4f2 <copyout+0x34>
-}
-     57e:	60e6                	ld	ra,88(sp)
-     580:	6446                	ld	s0,80(sp)
-     582:	64a6                	ld	s1,72(sp)
-     584:	6906                	ld	s2,64(sp)
-     586:	79e2                	ld	s3,56(sp)
-     588:	7a42                	ld	s4,48(sp)
-     58a:	7aa2                	ld	s5,40(sp)
-     58c:	6125                	addi	sp,sp,96
-     58e:	8082                	ret
+     560:	0921                	addi	s2,s2,8
+     562:	fc040793          	addi	a5,s0,-64
+     566:	f6f91ce3          	bne	s2,a5,4de <copyout+0x34>
+}
+     56a:	60e6                	ld	ra,88(sp)
+     56c:	6446                	ld	s0,80(sp)
+     56e:	64a6                	ld	s1,72(sp)
+     570:	6906                	ld	s2,64(sp)
+     572:	79e2                	ld	s3,56(sp)
+     574:	7a42                	ld	s4,48(sp)
+     576:	7aa2                	ld	s5,40(sp)
+     578:	6125                	addi	sp,sp,96
+     57a:	8082                	ret
       printf("open(README) failed\n");
-     590:	00005517          	auipc	a0,0x5
-     594:	4e050513          	addi	a0,a0,1248 # 5a70 <malloc+0x2d4>
-     598:	00005097          	auipc	ra,0x5
-     59c:	14c080e7          	jalr	332(ra) # 56e4 <printf>
-      exit(1);
-     5a0:	4505                	li	a0,1
-     5a2:	00005097          	auipc	ra,0x5
-     5a6:	dc8080e7          	jalr	-568(ra) # 536a <exit>
+     57c:	00006517          	auipc	a0,0x6
+     580:	9dc50513          	addi	a0,a0,-1572 # 5f58 <malloc+0x2d4>
+     584:	00005097          	auipc	ra,0x5
+     588:	648080e7          	jalr	1608(ra) # 5bcc <printf>
+      exit(1);
+     58c:	4505                	li	a0,1
+     58e:	00005097          	auipc	ra,0x5
+     592:	2b4080e7          	jalr	692(ra) # 5842 <exit>
       printf("read(fd, %p, 8192) returned %d, not -1 or 0\n", addr, n);
-     5aa:	862a                	mv	a2,a0
-     5ac:	85ce                	mv	a1,s3
-     5ae:	00005517          	auipc	a0,0x5
-     5b2:	4da50513          	addi	a0,a0,1242 # 5a88 <malloc+0x2ec>
-     5b6:	00005097          	auipc	ra,0x5
-     5ba:	12e080e7          	jalr	302(ra) # 56e4 <printf>
-      exit(1);
-     5be:	4505                	li	a0,1
-     5c0:	00005097          	auipc	ra,0x5
-     5c4:	daa080e7          	jalr	-598(ra) # 536a <exit>
+     596:	862a                	mv	a2,a0
+     598:	85ce                	mv	a1,s3
+     59a:	00006517          	auipc	a0,0x6
+     59e:	9d650513          	addi	a0,a0,-1578 # 5f70 <malloc+0x2ec>
+     5a2:	00005097          	auipc	ra,0x5
+     5a6:	62a080e7          	jalr	1578(ra) # 5bcc <printf>
+      exit(1);
+     5aa:	4505                	li	a0,1
+     5ac:	00005097          	auipc	ra,0x5
+     5b0:	296080e7          	jalr	662(ra) # 5842 <exit>
       printf("pipe() failed\n");
-     5c8:	00005517          	auipc	a0,0x5
-     5cc:	46050513          	addi	a0,a0,1120 # 5a28 <malloc+0x28c>
-     5d0:	00005097          	auipc	ra,0x5
-     5d4:	114080e7          	jalr	276(ra) # 56e4 <printf>
-      exit(1);
-     5d8:	4505                	li	a0,1
-     5da:	00005097          	auipc	ra,0x5
-     5de:	d90080e7          	jalr	-624(ra) # 536a <exit>
+     5b4:	00006517          	auipc	a0,0x6
+     5b8:	95c50513          	addi	a0,a0,-1700 # 5f10 <malloc+0x28c>
+     5bc:	00005097          	auipc	ra,0x5
+     5c0:	610080e7          	jalr	1552(ra) # 5bcc <printf>
+      exit(1);
+     5c4:	4505                	li	a0,1
+     5c6:	00005097          	auipc	ra,0x5
+     5ca:	27c080e7          	jalr	636(ra) # 5842 <exit>
       printf("pipe write failed\n");
-     5e2:	00005517          	auipc	a0,0x5
-     5e6:	4d650513          	addi	a0,a0,1238 # 5ab8 <malloc+0x31c>
-     5ea:	00005097          	auipc	ra,0x5
-     5ee:	0fa080e7          	jalr	250(ra) # 56e4 <printf>
-      exit(1);
-     5f2:	4505                	li	a0,1
-     5f4:	00005097          	auipc	ra,0x5
-     5f8:	d76080e7          	jalr	-650(ra) # 536a <exit>
+     5ce:	00006517          	auipc	a0,0x6
+     5d2:	9d250513          	addi	a0,a0,-1582 # 5fa0 <malloc+0x31c>
+     5d6:	00005097          	auipc	ra,0x5
+     5da:	5f6080e7          	jalr	1526(ra) # 5bcc <printf>
+      exit(1);
+     5de:	4505                	li	a0,1
+     5e0:	00005097          	auipc	ra,0x5
+     5e4:	262080e7          	jalr	610(ra) # 5842 <exit>
       printf("read(pipe, %p, 8192) returned %d, not -1 or 0\n", addr, n);
-     5fc:	862a                	mv	a2,a0
-     5fe:	85ce                	mv	a1,s3
-     600:	00005517          	auipc	a0,0x5
-     604:	4d050513          	addi	a0,a0,1232 # 5ad0 <malloc+0x334>
-     608:	00005097          	auipc	ra,0x5
-     60c:	0dc080e7          	jalr	220(ra) # 56e4 <printf>
-      exit(1);
-     610:	4505                	li	a0,1
-     612:	00005097          	auipc	ra,0x5
-     616:	d58080e7          	jalr	-680(ra) # 536a <exit>
-
-000000000000061a <truncate1>:
-{
-     61a:	711d                	addi	sp,sp,-96
-     61c:	ec86                	sd	ra,88(sp)
-     61e:	e8a2                	sd	s0,80(sp)
-     620:	e4a6                	sd	s1,72(sp)
-     622:	e0ca                	sd	s2,64(sp)
-     624:	fc4e                	sd	s3,56(sp)
-     626:	f852                	sd	s4,48(sp)
-     628:	f456                	sd	s5,40(sp)
-     62a:	1080                	addi	s0,sp,96
-     62c:	8aaa                	mv	s5,a0
+     5e8:	862a                	mv	a2,a0
+     5ea:	85ce                	mv	a1,s3
+     5ec:	00006517          	auipc	a0,0x6
+     5f0:	9cc50513          	addi	a0,a0,-1588 # 5fb8 <malloc+0x334>
+     5f4:	00005097          	auipc	ra,0x5
+     5f8:	5d8080e7          	jalr	1496(ra) # 5bcc <printf>
+      exit(1);
+     5fc:	4505                	li	a0,1
+     5fe:	00005097          	auipc	ra,0x5
+     602:	244080e7          	jalr	580(ra) # 5842 <exit>
+
+0000000000000606 <truncate1>:
+{
+     606:	711d                	addi	sp,sp,-96
+     608:	ec86                	sd	ra,88(sp)
+     60a:	e8a2                	sd	s0,80(sp)
+     60c:	e4a6                	sd	s1,72(sp)
+     60e:	e0ca                	sd	s2,64(sp)
+     610:	fc4e                	sd	s3,56(sp)
+     612:	f852                	sd	s4,48(sp)
+     614:	f456                	sd	s5,40(sp)
+     616:	1080                	addi	s0,sp,96
+     618:	8aaa                	mv	s5,a0
   unlink("truncfile");
+     61a:	00005517          	auipc	a0,0x5
+     61e:	7e650513          	addi	a0,a0,2022 # 5e00 <malloc+0x17c>
+     622:	00005097          	auipc	ra,0x5
+     626:	270080e7          	jalr	624(ra) # 5892 <unlink>
+  int fd1 = open("truncfile", O_CREATE|O_WRONLY|O_TRUNC);
+     62a:	60100593          	li	a1,1537
      62e:	00005517          	auipc	a0,0x5
-     632:	2ea50513          	addi	a0,a0,746 # 5918 <malloc+0x17c>
+     632:	7d250513          	addi	a0,a0,2002 # 5e00 <malloc+0x17c>
      636:	00005097          	auipc	ra,0x5
-     63a:	d84080e7          	jalr	-636(ra) # 53ba <unlink>
-  int fd1 = open("truncfile", O_CREATE|O_WRONLY|O_TRUNC);
-     63e:	60100593          	li	a1,1537
-     642:	00005517          	auipc	a0,0x5
-     646:	2d650513          	addi	a0,a0,726 # 5918 <malloc+0x17c>
-     64a:	00005097          	auipc	ra,0x5
-     64e:	d60080e7          	jalr	-672(ra) # 53aa <open>
-     652:	84aa                	mv	s1,a0
+     63a:	24c080e7          	jalr	588(ra) # 5882 <open>
+     63e:	84aa                	mv	s1,a0
   write(fd1, "abcd", 4);
-     654:	4611                	li	a2,4
-     656:	00005597          	auipc	a1,0x5
-     65a:	2d258593          	addi	a1,a1,722 # 5928 <malloc+0x18c>
-     65e:	00005097          	auipc	ra,0x5
-     662:	d2c080e7          	jalr	-724(ra) # 538a <write>
+     640:	4611                	li	a2,4
+     642:	00005597          	auipc	a1,0x5
+     646:	7ce58593          	addi	a1,a1,1998 # 5e10 <malloc+0x18c>
+     64a:	00005097          	auipc	ra,0x5
+     64e:	218080e7          	jalr	536(ra) # 5862 <write>
   close(fd1);
-     666:	8526                	mv	a0,s1
-     668:	00005097          	auipc	ra,0x5
-     66c:	d2a080e7          	jalr	-726(ra) # 5392 <close>
+     652:	8526                	mv	a0,s1
+     654:	00005097          	auipc	ra,0x5
+     658:	216080e7          	jalr	534(ra) # 586a <close>
   int fd2 = open("truncfile", O_RDONLY);
-     670:	4581                	li	a1,0
-     672:	00005517          	auipc	a0,0x5
-     676:	2a650513          	addi	a0,a0,678 # 5918 <malloc+0x17c>
-     67a:	00005097          	auipc	ra,0x5
-     67e:	d30080e7          	jalr	-720(ra) # 53aa <open>
-     682:	84aa                	mv	s1,a0
+     65c:	4581                	li	a1,0
+     65e:	00005517          	auipc	a0,0x5
+     662:	7a250513          	addi	a0,a0,1954 # 5e00 <malloc+0x17c>
+     666:	00005097          	auipc	ra,0x5
+     66a:	21c080e7          	jalr	540(ra) # 5882 <open>
+     66e:	84aa                	mv	s1,a0
   int n = read(fd2, buf, sizeof(buf));
-     684:	02000613          	li	a2,32
-     688:	fa040593          	addi	a1,s0,-96
-     68c:	00005097          	auipc	ra,0x5
-     690:	cf6080e7          	jalr	-778(ra) # 5382 <read>
+     670:	02000613          	li	a2,32
+     674:	fa040593          	addi	a1,s0,-96
+     678:	00005097          	auipc	ra,0x5
+     67c:	1e2080e7          	jalr	482(ra) # 585a <read>
   if(n != 4){
-     694:	4791                	li	a5,4
-     696:	0cf51e63          	bne	a0,a5,772 <truncate1+0x158>
+     680:	4791                	li	a5,4
+     682:	0cf51e63          	bne	a0,a5,75e <truncate1+0x158>
   fd1 = open("truncfile", O_WRONLY|O_TRUNC);
-     69a:	40100593          	li	a1,1025
+     686:	40100593          	li	a1,1025
+     68a:	00005517          	auipc	a0,0x5
+     68e:	77650513          	addi	a0,a0,1910 # 5e00 <malloc+0x17c>
+     692:	00005097          	auipc	ra,0x5
+     696:	1f0080e7          	jalr	496(ra) # 5882 <open>
+     69a:	89aa                	mv	s3,a0
+  int fd3 = open("truncfile", O_RDONLY);
+     69c:	4581                	li	a1,0
      69e:	00005517          	auipc	a0,0x5
-     6a2:	27a50513          	addi	a0,a0,634 # 5918 <malloc+0x17c>
+     6a2:	76250513          	addi	a0,a0,1890 # 5e00 <malloc+0x17c>
      6a6:	00005097          	auipc	ra,0x5
-     6aa:	d04080e7          	jalr	-764(ra) # 53aa <open>
-     6ae:	89aa                	mv	s3,a0
-  int fd3 = open("truncfile", O_RDONLY);
-     6b0:	4581                	li	a1,0
-     6b2:	00005517          	auipc	a0,0x5
-     6b6:	26650513          	addi	a0,a0,614 # 5918 <malloc+0x17c>
-     6ba:	00005097          	auipc	ra,0x5
-     6be:	cf0080e7          	jalr	-784(ra) # 53aa <open>
-     6c2:	892a                	mv	s2,a0
+     6aa:	1dc080e7          	jalr	476(ra) # 5882 <open>
+     6ae:	892a                	mv	s2,a0
   n = read(fd3, buf, sizeof(buf));
-     6c4:	02000613          	li	a2,32
-     6c8:	fa040593          	addi	a1,s0,-96
-     6cc:	00005097          	auipc	ra,0x5
-     6d0:	cb6080e7          	jalr	-842(ra) # 5382 <read>
-     6d4:	8a2a                	mv	s4,a0
+     6b0:	02000613          	li	a2,32
+     6b4:	fa040593          	addi	a1,s0,-96
+     6b8:	00005097          	auipc	ra,0x5
+     6bc:	1a2080e7          	jalr	418(ra) # 585a <read>
+     6c0:	8a2a                	mv	s4,a0
   if(n != 0){
-     6d6:	ed4d                	bnez	a0,790 <truncate1+0x176>
+     6c2:	ed4d                	bnez	a0,77c <truncate1+0x176>
   n = read(fd2, buf, sizeof(buf));
-     6d8:	02000613          	li	a2,32
-     6dc:	fa040593          	addi	a1,s0,-96
-     6e0:	8526                	mv	a0,s1
-     6e2:	00005097          	auipc	ra,0x5
-     6e6:	ca0080e7          	jalr	-864(ra) # 5382 <read>
-     6ea:	8a2a                	mv	s4,a0
+     6c4:	02000613          	li	a2,32
+     6c8:	fa040593          	addi	a1,s0,-96
+     6cc:	8526                	mv	a0,s1
+     6ce:	00005097          	auipc	ra,0x5
+     6d2:	18c080e7          	jalr	396(ra) # 585a <read>
+     6d6:	8a2a                	mv	s4,a0
   if(n != 0){
-     6ec:	e971                	bnez	a0,7c0 <truncate1+0x1a6>
+     6d8:	e971                	bnez	a0,7ac <truncate1+0x1a6>
   write(fd1, "abcdef", 6);
-     6ee:	4619                	li	a2,6
-     6f0:	00005597          	auipc	a1,0x5
-     6f4:	47058593          	addi	a1,a1,1136 # 5b60 <malloc+0x3c4>
-     6f8:	854e                	mv	a0,s3
-     6fa:	00005097          	auipc	ra,0x5
-     6fe:	c90080e7          	jalr	-880(ra) # 538a <write>
+     6da:	4619                	li	a2,6
+     6dc:	00006597          	auipc	a1,0x6
+     6e0:	96c58593          	addi	a1,a1,-1684 # 6048 <malloc+0x3c4>
+     6e4:	854e                	mv	a0,s3
+     6e6:	00005097          	auipc	ra,0x5
+     6ea:	17c080e7          	jalr	380(ra) # 5862 <write>
   n = read(fd3, buf, sizeof(buf));
-     702:	02000613          	li	a2,32
-     706:	fa040593          	addi	a1,s0,-96
-     70a:	854a                	mv	a0,s2
-     70c:	00005097          	auipc	ra,0x5
-     710:	c76080e7          	jalr	-906(ra) # 5382 <read>
+     6ee:	02000613          	li	a2,32
+     6f2:	fa040593          	addi	a1,s0,-96
+     6f6:	854a                	mv	a0,s2
+     6f8:	00005097          	auipc	ra,0x5
+     6fc:	162080e7          	jalr	354(ra) # 585a <read>
   if(n != 6){
-     714:	4799                	li	a5,6
-     716:	0cf51d63          	bne	a0,a5,7f0 <truncate1+0x1d6>
+     700:	4799                	li	a5,6
+     702:	0cf51d63          	bne	a0,a5,7dc <truncate1+0x1d6>
   n = read(fd2, buf, sizeof(buf));
-     71a:	02000613          	li	a2,32
-     71e:	fa040593          	addi	a1,s0,-96
-     722:	8526                	mv	a0,s1
-     724:	00005097          	auipc	ra,0x5
-     728:	c5e080e7          	jalr	-930(ra) # 5382 <read>
+     706:	02000613          	li	a2,32
+     70a:	fa040593          	addi	a1,s0,-96
+     70e:	8526                	mv	a0,s1
+     710:	00005097          	auipc	ra,0x5
+     714:	14a080e7          	jalr	330(ra) # 585a <read>
   if(n != 2){
-     72c:	4789                	li	a5,2
-     72e:	0ef51063          	bne	a0,a5,80e <truncate1+0x1f4>
+     718:	4789                	li	a5,2
+     71a:	0ef51063          	bne	a0,a5,7fa <truncate1+0x1f4>
   unlink("truncfile");
-     732:	00005517          	auipc	a0,0x5
-     736:	1e650513          	addi	a0,a0,486 # 5918 <malloc+0x17c>
-     73a:	00005097          	auipc	ra,0x5
-     73e:	c80080e7          	jalr	-896(ra) # 53ba <unlink>
+     71e:	00005517          	auipc	a0,0x5
+     722:	6e250513          	addi	a0,a0,1762 # 5e00 <malloc+0x17c>
+     726:	00005097          	auipc	ra,0x5
+     72a:	16c080e7          	jalr	364(ra) # 5892 <unlink>
   close(fd1);
-     742:	854e                	mv	a0,s3
-     744:	00005097          	auipc	ra,0x5
-     748:	c4e080e7          	jalr	-946(ra) # 5392 <close>
+     72e:	854e                	mv	a0,s3
+     730:	00005097          	auipc	ra,0x5
+     734:	13a080e7          	jalr	314(ra) # 586a <close>
   close(fd2);
-     74c:	8526                	mv	a0,s1
-     74e:	00005097          	auipc	ra,0x5
-     752:	c44080e7          	jalr	-956(ra) # 5392 <close>
+     738:	8526                	mv	a0,s1
+     73a:	00005097          	auipc	ra,0x5
+     73e:	130080e7          	jalr	304(ra) # 586a <close>
   close(fd3);
-     756:	854a                	mv	a0,s2
-     758:	00005097          	auipc	ra,0x5
-     75c:	c3a080e7          	jalr	-966(ra) # 5392 <close>
-}
-     760:	60e6                	ld	ra,88(sp)
-     762:	6446                	ld	s0,80(sp)
-     764:	64a6                	ld	s1,72(sp)
-     766:	6906                	ld	s2,64(sp)
-     768:	79e2                	ld	s3,56(sp)
-     76a:	7a42                	ld	s4,48(sp)
-     76c:	7aa2                	ld	s5,40(sp)
-     76e:	6125                	addi	sp,sp,96
-     770:	8082                	ret
+     742:	854a                	mv	a0,s2
+     744:	00005097          	auipc	ra,0x5
+     748:	126080e7          	jalr	294(ra) # 586a <close>
+}
+     74c:	60e6                	ld	ra,88(sp)
+     74e:	6446                	ld	s0,80(sp)
+     750:	64a6                	ld	s1,72(sp)
+     752:	6906                	ld	s2,64(sp)
+     754:	79e2                	ld	s3,56(sp)
+     756:	7a42                	ld	s4,48(sp)
+     758:	7aa2                	ld	s5,40(sp)
+     75a:	6125                	addi	sp,sp,96
+     75c:	8082                	ret
     printf("%s: read %d bytes, wanted 4\n", s, n);
-     772:	862a                	mv	a2,a0
-     774:	85d6                	mv	a1,s5
-     776:	00005517          	auipc	a0,0x5
-     77a:	38a50513          	addi	a0,a0,906 # 5b00 <malloc+0x364>
-     77e:	00005097          	auipc	ra,0x5
-     782:	f66080e7          	jalr	-154(ra) # 56e4 <printf>
-    exit(1);
-     786:	4505                	li	a0,1
-     788:	00005097          	auipc	ra,0x5
-     78c:	be2080e7          	jalr	-1054(ra) # 536a <exit>
+     75e:	862a                	mv	a2,a0
+     760:	85d6                	mv	a1,s5
+     762:	00006517          	auipc	a0,0x6
+     766:	88650513          	addi	a0,a0,-1914 # 5fe8 <malloc+0x364>
+     76a:	00005097          	auipc	ra,0x5
+     76e:	462080e7          	jalr	1122(ra) # 5bcc <printf>
+    exit(1);
+     772:	4505                	li	a0,1
+     774:	00005097          	auipc	ra,0x5
+     778:	0ce080e7          	jalr	206(ra) # 5842 <exit>
     printf("aaa fd3=%d\n", fd3);
-     790:	85ca                	mv	a1,s2
-     792:	00005517          	auipc	a0,0x5
-     796:	38e50513          	addi	a0,a0,910 # 5b20 <malloc+0x384>
-     79a:	00005097          	auipc	ra,0x5
-     79e:	f4a080e7          	jalr	-182(ra) # 56e4 <printf>
+     77c:	85ca                	mv	a1,s2
+     77e:	00006517          	auipc	a0,0x6
+     782:	88a50513          	addi	a0,a0,-1910 # 6008 <malloc+0x384>
+     786:	00005097          	auipc	ra,0x5
+     78a:	446080e7          	jalr	1094(ra) # 5bcc <printf>
     printf("%s: read %d bytes, wanted 0\n", s, n);
-     7a2:	8652                	mv	a2,s4
-     7a4:	85d6                	mv	a1,s5
-     7a6:	00005517          	auipc	a0,0x5
-     7aa:	38a50513          	addi	a0,a0,906 # 5b30 <malloc+0x394>
-     7ae:	00005097          	auipc	ra,0x5
-     7b2:	f36080e7          	jalr	-202(ra) # 56e4 <printf>
-    exit(1);
-     7b6:	4505                	li	a0,1
-     7b8:	00005097          	auipc	ra,0x5
-     7bc:	bb2080e7          	jalr	-1102(ra) # 536a <exit>
+     78e:	8652                	mv	a2,s4
+     790:	85d6                	mv	a1,s5
+     792:	00006517          	auipc	a0,0x6
+     796:	88650513          	addi	a0,a0,-1914 # 6018 <malloc+0x394>
+     79a:	00005097          	auipc	ra,0x5
+     79e:	432080e7          	jalr	1074(ra) # 5bcc <printf>
+    exit(1);
+     7a2:	4505                	li	a0,1
+     7a4:	00005097          	auipc	ra,0x5
+     7a8:	09e080e7          	jalr	158(ra) # 5842 <exit>
     printf("bbb fd2=%d\n", fd2);
-     7c0:	85a6                	mv	a1,s1
-     7c2:	00005517          	auipc	a0,0x5
-     7c6:	38e50513          	addi	a0,a0,910 # 5b50 <malloc+0x3b4>
-     7ca:	00005097          	auipc	ra,0x5
-     7ce:	f1a080e7          	jalr	-230(ra) # 56e4 <printf>
+     7ac:	85a6                	mv	a1,s1
+     7ae:	00006517          	auipc	a0,0x6
+     7b2:	88a50513          	addi	a0,a0,-1910 # 6038 <malloc+0x3b4>
+     7b6:	00005097          	auipc	ra,0x5
+     7ba:	416080e7          	jalr	1046(ra) # 5bcc <printf>
     printf("%s: read %d bytes, wanted 0\n", s, n);
-     7d2:	8652                	mv	a2,s4
-     7d4:	85d6                	mv	a1,s5
-     7d6:	00005517          	auipc	a0,0x5
-     7da:	35a50513          	addi	a0,a0,858 # 5b30 <malloc+0x394>
-     7de:	00005097          	auipc	ra,0x5
-     7e2:	f06080e7          	jalr	-250(ra) # 56e4 <printf>
+     7be:	8652                	mv	a2,s4
+     7c0:	85d6                	mv	a1,s5
+     7c2:	00006517          	auipc	a0,0x6
+     7c6:	85650513          	addi	a0,a0,-1962 # 6018 <malloc+0x394>
+     7ca:	00005097          	auipc	ra,0x5
+     7ce:	402080e7          	jalr	1026(ra) # 5bcc <printf>
     exit(1);
-     7e6:	4505                	li	a0,1
-     7e8:	00005097          	auipc	ra,0x5
-     7ec:	b82080e7          	jalr	-1150(ra) # 536a <exit>
+     7d2:	4505                	li	a0,1
+     7d4:	00005097          	auipc	ra,0x5
+     7d8:	06e080e7          	jalr	110(ra) # 5842 <exit>
     printf("%s: read %d bytes, wanted 6\n", s, n);
-     7f0:	862a                	mv	a2,a0
-     7f2:	85d6                	mv	a1,s5
-     7f4:	00005517          	auipc	a0,0x5
-     7f8:	37450513          	addi	a0,a0,884 # 5b68 <malloc+0x3cc>
-     7fc:	00005097          	auipc	ra,0x5
-     800:	ee8080e7          	jalr	-280(ra) # 56e4 <printf>
+     7dc:	862a                	mv	a2,a0
+     7de:	85d6                	mv	a1,s5
+     7e0:	00006517          	auipc	a0,0x6
+     7e4:	87050513          	addi	a0,a0,-1936 # 6050 <malloc+0x3cc>
+     7e8:	00005097          	auipc	ra,0x5
+     7ec:	3e4080e7          	jalr	996(ra) # 5bcc <printf>
     exit(1);
-     804:	4505                	li	a0,1
-     806:	00005097          	auipc	ra,0x5
-     80a:	b64080e7          	jalr	-1180(ra) # 536a <exit>
+     7f0:	4505                	li	a0,1
+     7f2:	00005097          	auipc	ra,0x5
+     7f6:	050080e7          	jalr	80(ra) # 5842 <exit>
     printf("%s: read %d bytes, wanted 2\n", s, n);
-     80e:	862a                	mv	a2,a0
-     810:	85d6                	mv	a1,s5
-     812:	00005517          	auipc	a0,0x5
-     816:	37650513          	addi	a0,a0,886 # 5b88 <malloc+0x3ec>
-     81a:	00005097          	auipc	ra,0x5
-     81e:	eca080e7          	jalr	-310(ra) # 56e4 <printf>
-    exit(1);
-     822:	4505                	li	a0,1
-     824:	00005097          	auipc	ra,0x5
-     828:	b46080e7          	jalr	-1210(ra) # 536a <exit>
-
-000000000000082c <writetest>:
-{
-     82c:	7139                	addi	sp,sp,-64
-     82e:	fc06                	sd	ra,56(sp)
-     830:	f822                	sd	s0,48(sp)
-     832:	f426                	sd	s1,40(sp)
-     834:	f04a                	sd	s2,32(sp)
-     836:	ec4e                	sd	s3,24(sp)
-     838:	e852                	sd	s4,16(sp)
-     83a:	e456                	sd	s5,8(sp)
-     83c:	e05a                	sd	s6,0(sp)
-     83e:	0080                	addi	s0,sp,64
-     840:	8b2a                	mv	s6,a0
+     7fa:	862a                	mv	a2,a0
+     7fc:	85d6                	mv	a1,s5
+     7fe:	00006517          	auipc	a0,0x6
+     802:	87250513          	addi	a0,a0,-1934 # 6070 <malloc+0x3ec>
+     806:	00005097          	auipc	ra,0x5
+     80a:	3c6080e7          	jalr	966(ra) # 5bcc <printf>
+    exit(1);
+     80e:	4505                	li	a0,1
+     810:	00005097          	auipc	ra,0x5
+     814:	032080e7          	jalr	50(ra) # 5842 <exit>
+
+0000000000000818 <writetest>:
+{
+     818:	7139                	addi	sp,sp,-64
+     81a:	fc06                	sd	ra,56(sp)
+     81c:	f822                	sd	s0,48(sp)
+     81e:	f426                	sd	s1,40(sp)
+     820:	f04a                	sd	s2,32(sp)
+     822:	ec4e                	sd	s3,24(sp)
+     824:	e852                	sd	s4,16(sp)
+     826:	e456                	sd	s5,8(sp)
+     828:	e05a                	sd	s6,0(sp)
+     82a:	0080                	addi	s0,sp,64
+     82c:	8b2a                	mv	s6,a0
   fd = open("small", O_CREATE|O_RDWR);
-     842:	20200593          	li	a1,514
-     846:	00005517          	auipc	a0,0x5
-     84a:	36250513          	addi	a0,a0,866 # 5ba8 <malloc+0x40c>
-     84e:	00005097          	auipc	ra,0x5
-     852:	b5c080e7          	jalr	-1188(ra) # 53aa <open>
+     82e:	20200593          	li	a1,514
+     832:	00006517          	auipc	a0,0x6
+     836:	85e50513          	addi	a0,a0,-1954 # 6090 <malloc+0x40c>
+     83a:	00005097          	auipc	ra,0x5
+     83e:	048080e7          	jalr	72(ra) # 5882 <open>
   if(fd < 0){
-     856:	0a054d63          	bltz	a0,910 <writetest+0xe4>
-     85a:	892a                	mv	s2,a0
-     85c:	4481                	li	s1,0
+     842:	0a054d63          	bltz	a0,8fc <writetest+0xe4>
+     846:	892a                	mv	s2,a0
+     848:	4481                	li	s1,0
     if(write(fd, "aaaaaaaaaa", SZ) != SZ){
-     85e:	00005997          	auipc	s3,0x5
-     862:	37298993          	addi	s3,s3,882 # 5bd0 <malloc+0x434>
+     84a:	00006997          	auipc	s3,0x6
+     84e:	86e98993          	addi	s3,s3,-1938 # 60b8 <malloc+0x434>
     if(write(fd, "bbbbbbbbbb", SZ) != SZ){
-     866:	00005a97          	auipc	s5,0x5
-     86a:	3a2a8a93          	addi	s5,s5,930 # 5c08 <malloc+0x46c>
+     852:	00006a97          	auipc	s5,0x6
+     856:	89ea8a93          	addi	s5,s5,-1890 # 60f0 <malloc+0x46c>
   for(i = 0; i < N; i++){
-     86e:	06400a13          	li	s4,100
+     85a:	06400a13          	li	s4,100
     if(write(fd, "aaaaaaaaaa", SZ) != SZ){
+     85e:	4629                	li	a2,10
+     860:	85ce                	mv	a1,s3
+     862:	854a                	mv	a0,s2
+     864:	00005097          	auipc	ra,0x5
+     868:	ffe080e7          	jalr	-2(ra) # 5862 <write>
+     86c:	47a9                	li	a5,10
+     86e:	0af51563          	bne	a0,a5,918 <writetest+0x100>
+    if(write(fd, "bbbbbbbbbb", SZ) != SZ){
      872:	4629                	li	a2,10
-     874:	85ce                	mv	a1,s3
+     874:	85d6                	mv	a1,s5
      876:	854a                	mv	a0,s2
      878:	00005097          	auipc	ra,0x5
-     87c:	b12080e7          	jalr	-1262(ra) # 538a <write>
+     87c:	fea080e7          	jalr	-22(ra) # 5862 <write>
      880:	47a9                	li	a5,10
-     882:	0af51563          	bne	a0,a5,92c <writetest+0x100>
-    if(write(fd, "bbbbbbbbbb", SZ) != SZ){
-     886:	4629                	li	a2,10
-     888:	85d6                	mv	a1,s5
-     88a:	854a                	mv	a0,s2
-     88c:	00005097          	auipc	ra,0x5
-     890:	afe080e7          	jalr	-1282(ra) # 538a <write>
-     894:	47a9                	li	a5,10
-     896:	0af51963          	bne	a0,a5,948 <writetest+0x11c>
+     882:	0af51a63          	bne	a0,a5,936 <writetest+0x11e>
   for(i = 0; i < N; i++){
-     89a:	2485                	addiw	s1,s1,1
-     89c:	fd449be3          	bne	s1,s4,872 <writetest+0x46>
+     886:	2485                	addiw	s1,s1,1
+     888:	fd449be3          	bne	s1,s4,85e <writetest+0x46>
   close(fd);
-     8a0:	854a                	mv	a0,s2
-     8a2:	00005097          	auipc	ra,0x5
-     8a6:	af0080e7          	jalr	-1296(ra) # 5392 <close>
+     88c:	854a                	mv	a0,s2
+     88e:	00005097          	auipc	ra,0x5
+     892:	fdc080e7          	jalr	-36(ra) # 586a <close>
   fd = open("small", O_RDONLY);
-     8aa:	4581                	li	a1,0
-     8ac:	00005517          	auipc	a0,0x5
-     8b0:	2fc50513          	addi	a0,a0,764 # 5ba8 <malloc+0x40c>
-     8b4:	00005097          	auipc	ra,0x5
-     8b8:	af6080e7          	jalr	-1290(ra) # 53aa <open>
-     8bc:	84aa                	mv	s1,a0
+     896:	4581                	li	a1,0
+     898:	00005517          	auipc	a0,0x5
+     89c:	7f850513          	addi	a0,a0,2040 # 6090 <malloc+0x40c>
+     8a0:	00005097          	auipc	ra,0x5
+     8a4:	fe2080e7          	jalr	-30(ra) # 5882 <open>
+     8a8:	84aa                	mv	s1,a0
   if(fd < 0){
-     8be:	0a054363          	bltz	a0,964 <writetest+0x138>
+     8aa:	0a054563          	bltz	a0,954 <writetest+0x13c>
   i = read(fd, buf, N*SZ*2);
-     8c2:	7d000613          	li	a2,2000
-     8c6:	0000b597          	auipc	a1,0xb
-     8ca:	eba58593          	addi	a1,a1,-326 # b780 <buf>
-     8ce:	00005097          	auipc	ra,0x5
-     8d2:	ab4080e7          	jalr	-1356(ra) # 5382 <read>
+     8ae:	7d000613          	li	a2,2000
+     8b2:	0000b597          	auipc	a1,0xb
+     8b6:	53658593          	addi	a1,a1,1334 # bde8 <buf>
+     8ba:	00005097          	auipc	ra,0x5
+     8be:	fa0080e7          	jalr	-96(ra) # 585a <read>
   if(i != N*SZ*2){
-     8d6:	7d000793          	li	a5,2000
-     8da:	0af51363          	bne	a0,a5,980 <writetest+0x154>
+     8c2:	7d000793          	li	a5,2000
+     8c6:	0af51563          	bne	a0,a5,970 <writetest+0x158>
   close(fd);
-     8de:	8526                	mv	a0,s1
-     8e0:	00005097          	auipc	ra,0x5
-     8e4:	ab2080e7          	jalr	-1358(ra) # 5392 <close>
+     8ca:	8526                	mv	a0,s1
+     8cc:	00005097          	auipc	ra,0x5
+     8d0:	f9e080e7          	jalr	-98(ra) # 586a <close>
   if(unlink("small") < 0){
-     8e8:	00005517          	auipc	a0,0x5
-     8ec:	2c050513          	addi	a0,a0,704 # 5ba8 <malloc+0x40c>
-     8f0:	00005097          	auipc	ra,0x5
-     8f4:	aca080e7          	jalr	-1334(ra) # 53ba <unlink>
-     8f8:	0a054263          	bltz	a0,99c <writetest+0x170>
-}
-     8fc:	70e2                	ld	ra,56(sp)
-     8fe:	7442                	ld	s0,48(sp)
-     900:	74a2                	ld	s1,40(sp)
-     902:	7902                	ld	s2,32(sp)
-     904:	69e2                	ld	s3,24(sp)
-     906:	6a42                	ld	s4,16(sp)
-     908:	6aa2                	ld	s5,8(sp)
-     90a:	6b02                	ld	s6,0(sp)
-     90c:	6121                	addi	sp,sp,64
-     90e:	8082                	ret
+     8d4:	00005517          	auipc	a0,0x5
+     8d8:	7bc50513          	addi	a0,a0,1980 # 6090 <malloc+0x40c>
+     8dc:	00005097          	auipc	ra,0x5
+     8e0:	fb6080e7          	jalr	-74(ra) # 5892 <unlink>
+     8e4:	0a054463          	bltz	a0,98c <writetest+0x174>
+}
+     8e8:	70e2                	ld	ra,56(sp)
+     8ea:	7442                	ld	s0,48(sp)
+     8ec:	74a2                	ld	s1,40(sp)
+     8ee:	7902                	ld	s2,32(sp)
+     8f0:	69e2                	ld	s3,24(sp)
+     8f2:	6a42                	ld	s4,16(sp)
+     8f4:	6aa2                	ld	s5,8(sp)
+     8f6:	6b02                	ld	s6,0(sp)
+     8f8:	6121                	addi	sp,sp,64
+     8fa:	8082                	ret
     printf("%s: error: creat small failed!\n", s);
-     910:	85da                	mv	a1,s6
-     912:	00005517          	auipc	a0,0x5
-     916:	29e50513          	addi	a0,a0,670 # 5bb0 <malloc+0x414>
-     91a:	00005097          	auipc	ra,0x5
-     91e:	dca080e7          	jalr	-566(ra) # 56e4 <printf>
-    exit(1);
-     922:	4505                	li	a0,1
+     8fc:	85da                	mv	a1,s6
+     8fe:	00005517          	auipc	a0,0x5
+     902:	79a50513          	addi	a0,a0,1946 # 6098 <malloc+0x414>
+     906:	00005097          	auipc	ra,0x5
+     90a:	2c6080e7          	jalr	710(ra) # 5bcc <printf>
+    exit(1);
+     90e:	4505                	li	a0,1
+     910:	00005097          	auipc	ra,0x5
+     914:	f32080e7          	jalr	-206(ra) # 5842 <exit>
+      printf("%s: error: write aa %d new file failed\n", s, i);
+     918:	8626                	mv	a2,s1
+     91a:	85da                	mv	a1,s6
+     91c:	00005517          	auipc	a0,0x5
+     920:	7ac50513          	addi	a0,a0,1964 # 60c8 <malloc+0x444>
      924:	00005097          	auipc	ra,0x5
-     928:	a46080e7          	jalr	-1466(ra) # 536a <exit>
-      printf("%s: error: write aa %d new file failed\n", i);
-     92c:	85a6                	mv	a1,s1
-     92e:	00005517          	auipc	a0,0x5
-     932:	2b250513          	addi	a0,a0,690 # 5be0 <malloc+0x444>
-     936:	00005097          	auipc	ra,0x5
-     93a:	dae080e7          	jalr	-594(ra) # 56e4 <printf>
-      exit(1);
-     93e:	4505                	li	a0,1
-     940:	00005097          	auipc	ra,0x5
-     944:	a2a080e7          	jalr	-1494(ra) # 536a <exit>
-      printf("%s: error: write bb %d new file failed\n", i);
-     948:	85a6                	mv	a1,s1
-     94a:	00005517          	auipc	a0,0x5
-     94e:	2ce50513          	addi	a0,a0,718 # 5c18 <malloc+0x47c>
-     952:	00005097          	auipc	ra,0x5
-     956:	d92080e7          	jalr	-622(ra) # 56e4 <printf>
-      exit(1);
-     95a:	4505                	li	a0,1
-     95c:	00005097          	auipc	ra,0x5
-     960:	a0e080e7          	jalr	-1522(ra) # 536a <exit>
+     928:	2a8080e7          	jalr	680(ra) # 5bcc <printf>
+      exit(1);
+     92c:	4505                	li	a0,1
+     92e:	00005097          	auipc	ra,0x5
+     932:	f14080e7          	jalr	-236(ra) # 5842 <exit>
+      printf("%s: error: write bb %d new file failed\n", s, i);
+     936:	8626                	mv	a2,s1
+     938:	85da                	mv	a1,s6
+     93a:	00005517          	auipc	a0,0x5
+     93e:	7c650513          	addi	a0,a0,1990 # 6100 <malloc+0x47c>
+     942:	00005097          	auipc	ra,0x5
+     946:	28a080e7          	jalr	650(ra) # 5bcc <printf>
+      exit(1);
+     94a:	4505                	li	a0,1
+     94c:	00005097          	auipc	ra,0x5
+     950:	ef6080e7          	jalr	-266(ra) # 5842 <exit>
     printf("%s: error: open small failed!\n", s);
-     964:	85da                	mv	a1,s6
-     966:	00005517          	auipc	a0,0x5
-     96a:	2da50513          	addi	a0,a0,730 # 5c40 <malloc+0x4a4>
-     96e:	00005097          	auipc	ra,0x5
-     972:	d76080e7          	jalr	-650(ra) # 56e4 <printf>
-    exit(1);
-     976:	4505                	li	a0,1
-     978:	00005097          	auipc	ra,0x5
-     97c:	9f2080e7          	jalr	-1550(ra) # 536a <exit>
+     954:	85da                	mv	a1,s6
+     956:	00005517          	auipc	a0,0x5
+     95a:	7d250513          	addi	a0,a0,2002 # 6128 <malloc+0x4a4>
+     95e:	00005097          	auipc	ra,0x5
+     962:	26e080e7          	jalr	622(ra) # 5bcc <printf>
+    exit(1);
+     966:	4505                	li	a0,1
+     968:	00005097          	auipc	ra,0x5
+     96c:	eda080e7          	jalr	-294(ra) # 5842 <exit>
     printf("%s: read failed\n", s);
-     980:	85da                	mv	a1,s6
-     982:	00005517          	auipc	a0,0x5
-     986:	2de50513          	addi	a0,a0,734 # 5c60 <malloc+0x4c4>
-     98a:	00005097          	auipc	ra,0x5
-     98e:	d5a080e7          	jalr	-678(ra) # 56e4 <printf>
-    exit(1);
-     992:	4505                	li	a0,1
-     994:	00005097          	auipc	ra,0x5
-     998:	9d6080e7          	jalr	-1578(ra) # 536a <exit>
+     970:	85da                	mv	a1,s6
+     972:	00005517          	auipc	a0,0x5
+     976:	7d650513          	addi	a0,a0,2006 # 6148 <malloc+0x4c4>
+     97a:	00005097          	auipc	ra,0x5
+     97e:	252080e7          	jalr	594(ra) # 5bcc <printf>
+    exit(1);
+     982:	4505                	li	a0,1
+     984:	00005097          	auipc	ra,0x5
+     988:	ebe080e7          	jalr	-322(ra) # 5842 <exit>
     printf("%s: unlink small failed\n", s);
-     99c:	85da                	mv	a1,s6
-     99e:	00005517          	auipc	a0,0x5
-     9a2:	2da50513          	addi	a0,a0,730 # 5c78 <malloc+0x4dc>
-     9a6:	00005097          	auipc	ra,0x5
-     9aa:	d3e080e7          	jalr	-706(ra) # 56e4 <printf>
-    exit(1);
-     9ae:	4505                	li	a0,1
-     9b0:	00005097          	auipc	ra,0x5
-     9b4:	9ba080e7          	jalr	-1606(ra) # 536a <exit>
-
-00000000000009b8 <writebig>:
-{
-     9b8:	7139                	addi	sp,sp,-64
-     9ba:	fc06                	sd	ra,56(sp)
-     9bc:	f822                	sd	s0,48(sp)
-     9be:	f426                	sd	s1,40(sp)
-     9c0:	f04a                	sd	s2,32(sp)
-     9c2:	ec4e                	sd	s3,24(sp)
-     9c4:	e852                	sd	s4,16(sp)
-     9c6:	e456                	sd	s5,8(sp)
-     9c8:	0080                	addi	s0,sp,64
-     9ca:	8aaa                	mv	s5,a0
+     98c:	85da                	mv	a1,s6
+     98e:	00005517          	auipc	a0,0x5
+     992:	7d250513          	addi	a0,a0,2002 # 6160 <malloc+0x4dc>
+     996:	00005097          	auipc	ra,0x5
+     99a:	236080e7          	jalr	566(ra) # 5bcc <printf>
+    exit(1);
+     99e:	4505                	li	a0,1
+     9a0:	00005097          	auipc	ra,0x5
+     9a4:	ea2080e7          	jalr	-350(ra) # 5842 <exit>
+
+00000000000009a8 <writebig>:
+{
+     9a8:	7139                	addi	sp,sp,-64
+     9aa:	fc06                	sd	ra,56(sp)
+     9ac:	f822                	sd	s0,48(sp)
+     9ae:	f426                	sd	s1,40(sp)
+     9b0:	f04a                	sd	s2,32(sp)
+     9b2:	ec4e                	sd	s3,24(sp)
+     9b4:	e852                	sd	s4,16(sp)
+     9b6:	e456                	sd	s5,8(sp)
+     9b8:	0080                	addi	s0,sp,64
+     9ba:	8aaa                	mv	s5,a0
   fd = open("big", O_CREATE|O_RDWR);
-     9cc:	20200593          	li	a1,514
-     9d0:	00005517          	auipc	a0,0x5
-     9d4:	2c850513          	addi	a0,a0,712 # 5c98 <malloc+0x4fc>
-     9d8:	00005097          	auipc	ra,0x5
-     9dc:	9d2080e7          	jalr	-1582(ra) # 53aa <open>
-     9e0:	89aa                	mv	s3,a0
+     9bc:	20200593          	li	a1,514
+     9c0:	00005517          	auipc	a0,0x5
+     9c4:	7c050513          	addi	a0,a0,1984 # 6180 <malloc+0x4fc>
+     9c8:	00005097          	auipc	ra,0x5
+     9cc:	eba080e7          	jalr	-326(ra) # 5882 <open>
+     9d0:	89aa                	mv	s3,a0
   for(i = 0; i < MAXFILE; i++){
-     9e2:	4481                	li	s1,0
+     9d2:	4481                	li	s1,0
     ((int*)buf)[0] = i;
-     9e4:	0000b917          	auipc	s2,0xb
-     9e8:	d9c90913          	addi	s2,s2,-612 # b780 <buf>
+     9d4:	0000b917          	auipc	s2,0xb
+     9d8:	41490913          	addi	s2,s2,1044 # bde8 <buf>
   for(i = 0; i < MAXFILE; i++){
-     9ec:	10c00a13          	li	s4,268
+     9dc:	10c00a13          	li	s4,268
   if(fd < 0){
-     9f0:	06054c63          	bltz	a0,a68 <writebig+0xb0>
+     9e0:	06054c63          	bltz	a0,a58 <writebig+0xb0>
     ((int*)buf)[0] = i;
-     9f4:	00992023          	sw	s1,0(s2)
+     9e4:	00992023          	sw	s1,0(s2)
     if(write(fd, buf, BSIZE) != BSIZE){
-     9f8:	40000613          	li	a2,1024
-     9fc:	85ca                	mv	a1,s2
-     9fe:	854e                	mv	a0,s3
-     a00:	00005097          	auipc	ra,0x5
-     a04:	98a080e7          	jalr	-1654(ra) # 538a <write>
-     a08:	40000793          	li	a5,1024
-     a0c:	06f51c63          	bne	a0,a5,a84 <writebig+0xcc>
+     9e8:	40000613          	li	a2,1024
+     9ec:	85ca                	mv	a1,s2
+     9ee:	854e                	mv	a0,s3
+     9f0:	00005097          	auipc	ra,0x5
+     9f4:	e72080e7          	jalr	-398(ra) # 5862 <write>
+     9f8:	40000793          	li	a5,1024
+     9fc:	06f51c63          	bne	a0,a5,a74 <writebig+0xcc>
   for(i = 0; i < MAXFILE; i++){
-     a10:	2485                	addiw	s1,s1,1
-     a12:	ff4491e3          	bne	s1,s4,9f4 <writebig+0x3c>
+     a00:	2485                	addiw	s1,s1,1
+     a02:	ff4491e3          	bne	s1,s4,9e4 <writebig+0x3c>
   close(fd);
-     a16:	854e                	mv	a0,s3
-     a18:	00005097          	auipc	ra,0x5
-     a1c:	97a080e7          	jalr	-1670(ra) # 5392 <close>
+     a06:	854e                	mv	a0,s3
+     a08:	00005097          	auipc	ra,0x5
+     a0c:	e62080e7          	jalr	-414(ra) # 586a <close>
   fd = open("big", O_RDONLY);
-     a20:	4581                	li	a1,0
-     a22:	00005517          	auipc	a0,0x5
-     a26:	27650513          	addi	a0,a0,630 # 5c98 <malloc+0x4fc>
-     a2a:	00005097          	auipc	ra,0x5
-     a2e:	980080e7          	jalr	-1664(ra) # 53aa <open>
-     a32:	89aa                	mv	s3,a0
+     a10:	4581                	li	a1,0
+     a12:	00005517          	auipc	a0,0x5
+     a16:	76e50513          	addi	a0,a0,1902 # 6180 <malloc+0x4fc>
+     a1a:	00005097          	auipc	ra,0x5
+     a1e:	e68080e7          	jalr	-408(ra) # 5882 <open>
+     a22:	89aa                	mv	s3,a0
   n = 0;
-     a34:	4481                	li	s1,0
+     a24:	4481                	li	s1,0
     i = read(fd, buf, BSIZE);
-     a36:	0000b917          	auipc	s2,0xb
-     a3a:	d4a90913          	addi	s2,s2,-694 # b780 <buf>
+     a26:	0000b917          	auipc	s2,0xb
+     a2a:	3c290913          	addi	s2,s2,962 # bde8 <buf>
   if(fd < 0){
-     a3e:	06054163          	bltz	a0,aa0 <writebig+0xe8>
+     a2e:	06054263          	bltz	a0,a92 <writebig+0xea>
     i = read(fd, buf, BSIZE);
-     a42:	40000613          	li	a2,1024
-     a46:	85ca                	mv	a1,s2
-     a48:	854e                	mv	a0,s3
-     a4a:	00005097          	auipc	ra,0x5
-     a4e:	938080e7          	jalr	-1736(ra) # 5382 <read>
+     a32:	40000613          	li	a2,1024
+     a36:	85ca                	mv	a1,s2
+     a38:	854e                	mv	a0,s3
+     a3a:	00005097          	auipc	ra,0x5
+     a3e:	e20080e7          	jalr	-480(ra) # 585a <read>
     if(i == 0){
-     a52:	c52d                	beqz	a0,abc <writebig+0x104>
+     a42:	c535                	beqz	a0,aae <writebig+0x106>
     } else if(i != BSIZE){
-     a54:	40000793          	li	a5,1024
-     a58:	0af51d63          	bne	a0,a5,b12 <writebig+0x15a>
+     a44:	40000793          	li	a5,1024
+     a48:	0af51f63          	bne	a0,a5,b06 <writebig+0x15e>
     if(((int*)buf)[0] != n){
-     a5c:	00092603          	lw	a2,0(s2)
-     a60:	0c961763          	bne	a2,s1,b2e <writebig+0x176>
+     a4c:	00092683          	lw	a3,0(s2)
+     a50:	0c969a63          	bne	a3,s1,b24 <writebig+0x17c>
     n++;
-     a64:	2485                	addiw	s1,s1,1
+     a54:	2485                	addiw	s1,s1,1
     i = read(fd, buf, BSIZE);
-     a66:	bff1                	j	a42 <writebig+0x8a>
+     a56:	bff1                	j	a32 <writebig+0x8a>
     printf("%s: error: creat big failed!\n", s);
-     a68:	85d6                	mv	a1,s5
-     a6a:	00005517          	auipc	a0,0x5
-     a6e:	23650513          	addi	a0,a0,566 # 5ca0 <malloc+0x504>
-     a72:	00005097          	auipc	ra,0x5
-     a76:	c72080e7          	jalr	-910(ra) # 56e4 <printf>
-    exit(1);
-     a7a:	4505                	li	a0,1
-     a7c:	00005097          	auipc	ra,0x5
-     a80:	8ee080e7          	jalr	-1810(ra) # 536a <exit>
-      printf("%s: error: write big file failed\n", i);
-     a84:	85a6                	mv	a1,s1
-     a86:	00005517          	auipc	a0,0x5
-     a8a:	23a50513          	addi	a0,a0,570 # 5cc0 <malloc+0x524>
-     a8e:	00005097          	auipc	ra,0x5
-     a92:	c56080e7          	jalr	-938(ra) # 56e4 <printf>
-      exit(1);
-     a96:	4505                	li	a0,1
-     a98:	00005097          	auipc	ra,0x5
-     a9c:	8d2080e7          	jalr	-1838(ra) # 536a <exit>
+     a58:	85d6                	mv	a1,s5
+     a5a:	00005517          	auipc	a0,0x5
+     a5e:	72e50513          	addi	a0,a0,1838 # 6188 <malloc+0x504>
+     a62:	00005097          	auipc	ra,0x5
+     a66:	16a080e7          	jalr	362(ra) # 5bcc <printf>
+    exit(1);
+     a6a:	4505                	li	a0,1
+     a6c:	00005097          	auipc	ra,0x5
+     a70:	dd6080e7          	jalr	-554(ra) # 5842 <exit>
+      printf("%s: error: write big file failed\n", s, i);
+     a74:	8626                	mv	a2,s1
+     a76:	85d6                	mv	a1,s5
+     a78:	00005517          	auipc	a0,0x5
+     a7c:	73050513          	addi	a0,a0,1840 # 61a8 <malloc+0x524>
+     a80:	00005097          	auipc	ra,0x5
+     a84:	14c080e7          	jalr	332(ra) # 5bcc <printf>
+      exit(1);
+     a88:	4505                	li	a0,1
+     a8a:	00005097          	auipc	ra,0x5
+     a8e:	db8080e7          	jalr	-584(ra) # 5842 <exit>
     printf("%s: error: open big failed!\n", s);
-     aa0:	85d6                	mv	a1,s5
-     aa2:	00005517          	auipc	a0,0x5
-     aa6:	24650513          	addi	a0,a0,582 # 5ce8 <malloc+0x54c>
-     aaa:	00005097          	auipc	ra,0x5
-     aae:	c3a080e7          	jalr	-966(ra) # 56e4 <printf>
-    exit(1);
-     ab2:	4505                	li	a0,1
-     ab4:	00005097          	auipc	ra,0x5
-     ab8:	8b6080e7          	jalr	-1866(ra) # 536a <exit>
+     a92:	85d6                	mv	a1,s5
+     a94:	00005517          	auipc	a0,0x5
+     a98:	73c50513          	addi	a0,a0,1852 # 61d0 <malloc+0x54c>
+     a9c:	00005097          	auipc	ra,0x5
+     aa0:	130080e7          	jalr	304(ra) # 5bcc <printf>
+    exit(1);
+     aa4:	4505                	li	a0,1
+     aa6:	00005097          	auipc	ra,0x5
+     aaa:	d9c080e7          	jalr	-612(ra) # 5842 <exit>
       if(n == MAXFILE - 1){
-     abc:	10b00793          	li	a5,267
-     ac0:	02f48a63          	beq	s1,a5,af4 <writebig+0x13c>
+     aae:	10b00793          	li	a5,267
+     ab2:	02f48a63          	beq	s1,a5,ae6 <writebig+0x13e>
   close(fd);
-     ac4:	854e                	mv	a0,s3
-     ac6:	00005097          	auipc	ra,0x5
-     aca:	8cc080e7          	jalr	-1844(ra) # 5392 <close>
+     ab6:	854e                	mv	a0,s3
+     ab8:	00005097          	auipc	ra,0x5
+     abc:	db2080e7          	jalr	-590(ra) # 586a <close>
   if(unlink("big") < 0){
-     ace:	00005517          	auipc	a0,0x5
-     ad2:	1ca50513          	addi	a0,a0,458 # 5c98 <malloc+0x4fc>
-     ad6:	00005097          	auipc	ra,0x5
-     ada:	8e4080e7          	jalr	-1820(ra) # 53ba <unlink>
-     ade:	06054663          	bltz	a0,b4a <writebig+0x192>
-}
-     ae2:	70e2                	ld	ra,56(sp)
-     ae4:	7442                	ld	s0,48(sp)
-     ae6:	74a2                	ld	s1,40(sp)
-     ae8:	7902                	ld	s2,32(sp)
-     aea:	69e2                	ld	s3,24(sp)
-     aec:	6a42                	ld	s4,16(sp)
-     aee:	6aa2                	ld	s5,8(sp)
-     af0:	6121                	addi	sp,sp,64
-     af2:	8082                	ret
-        printf("%s: read only %d blocks from big", n);
-     af4:	10b00593          	li	a1,267
-     af8:	00005517          	auipc	a0,0x5
-     afc:	21050513          	addi	a0,a0,528 # 5d08 <malloc+0x56c>
-     b00:	00005097          	auipc	ra,0x5
-     b04:	be4080e7          	jalr	-1052(ra) # 56e4 <printf>
+     ac0:	00005517          	auipc	a0,0x5
+     ac4:	6c050513          	addi	a0,a0,1728 # 6180 <malloc+0x4fc>
+     ac8:	00005097          	auipc	ra,0x5
+     acc:	dca080e7          	jalr	-566(ra) # 5892 <unlink>
+     ad0:	06054963          	bltz	a0,b42 <writebig+0x19a>
+}
+     ad4:	70e2                	ld	ra,56(sp)
+     ad6:	7442                	ld	s0,48(sp)
+     ad8:	74a2                	ld	s1,40(sp)
+     ada:	7902                	ld	s2,32(sp)
+     adc:	69e2                	ld	s3,24(sp)
+     ade:	6a42                	ld	s4,16(sp)
+     ae0:	6aa2                	ld	s5,8(sp)
+     ae2:	6121                	addi	sp,sp,64
+     ae4:	8082                	ret
+        printf("%s: read only %d blocks from big", s, n);
+     ae6:	10b00613          	li	a2,267
+     aea:	85d6                	mv	a1,s5
+     aec:	00005517          	auipc	a0,0x5
+     af0:	70450513          	addi	a0,a0,1796 # 61f0 <malloc+0x56c>
+     af4:	00005097          	auipc	ra,0x5
+     af8:	0d8080e7          	jalr	216(ra) # 5bcc <printf>
         exit(1);
-     b08:	4505                	li	a0,1
-     b0a:	00005097          	auipc	ra,0x5
-     b0e:	860080e7          	jalr	-1952(ra) # 536a <exit>
-      printf("%s: read failed %d\n", i);
-     b12:	85aa                	mv	a1,a0
-     b14:	00005517          	auipc	a0,0x5
-     b18:	21c50513          	addi	a0,a0,540 # 5d30 <malloc+0x594>
-     b1c:	00005097          	auipc	ra,0x5
-     b20:	bc8080e7          	jalr	-1080(ra) # 56e4 <printf>
+     afc:	4505                	li	a0,1
+     afe:	00005097          	auipc	ra,0x5
+     b02:	d44080e7          	jalr	-700(ra) # 5842 <exit>
+      printf("%s: read failed %d\n", s, i);
+     b06:	862a                	mv	a2,a0
+     b08:	85d6                	mv	a1,s5
+     b0a:	00005517          	auipc	a0,0x5
+     b0e:	70e50513          	addi	a0,a0,1806 # 6218 <malloc+0x594>
+     b12:	00005097          	auipc	ra,0x5
+     b16:	0ba080e7          	jalr	186(ra) # 5bcc <printf>
       exit(1);
-     b24:	4505                	li	a0,1
-     b26:	00005097          	auipc	ra,0x5
-     b2a:	844080e7          	jalr	-1980(ra) # 536a <exit>
-      printf("%s: read content of block %d is %d\n",
-     b2e:	85a6                	mv	a1,s1
-     b30:	00005517          	auipc	a0,0x5
-     b34:	21850513          	addi	a0,a0,536 # 5d48 <malloc+0x5ac>
-     b38:	00005097          	auipc	ra,0x5
-     b3c:	bac080e7          	jalr	-1108(ra) # 56e4 <printf>
-      exit(1);
-     b40:	4505                	li	a0,1
-     b42:	00005097          	auipc	ra,0x5
-     b46:	828080e7          	jalr	-2008(ra) # 536a <exit>
+     b1a:	4505                	li	a0,1
+     b1c:	00005097          	auipc	ra,0x5
+     b20:	d26080e7          	jalr	-730(ra) # 5842 <exit>
+      printf("%s: read content of block %d is %d\n", s,
+     b24:	8626                	mv	a2,s1
+     b26:	85d6                	mv	a1,s5
+     b28:	00005517          	auipc	a0,0x5
+     b2c:	70850513          	addi	a0,a0,1800 # 6230 <malloc+0x5ac>
+     b30:	00005097          	auipc	ra,0x5
+     b34:	09c080e7          	jalr	156(ra) # 5bcc <printf>
+      exit(1);
+     b38:	4505                	li	a0,1
+     b3a:	00005097          	auipc	ra,0x5
+     b3e:	d08080e7          	jalr	-760(ra) # 5842 <exit>
     printf("%s: unlink big failed\n", s);
-     b4a:	85d6                	mv	a1,s5
-     b4c:	00005517          	auipc	a0,0x5
-     b50:	22450513          	addi	a0,a0,548 # 5d70 <malloc+0x5d4>
-     b54:	00005097          	auipc	ra,0x5
-     b58:	b90080e7          	jalr	-1136(ra) # 56e4 <printf>
-    exit(1);
-     b5c:	4505                	li	a0,1
-     b5e:	00005097          	auipc	ra,0x5
-     b62:	80c080e7          	jalr	-2036(ra) # 536a <exit>
-
-0000000000000b66 <unlinkread>:
-{
-     b66:	7179                	addi	sp,sp,-48
-     b68:	f406                	sd	ra,40(sp)
-     b6a:	f022                	sd	s0,32(sp)
-     b6c:	ec26                	sd	s1,24(sp)
-     b6e:	e84a                	sd	s2,16(sp)
-     b70:	e44e                	sd	s3,8(sp)
-     b72:	1800                	addi	s0,sp,48
-     b74:	89aa                	mv	s3,a0
+     b42:	85d6                	mv	a1,s5
+     b44:	00005517          	auipc	a0,0x5
+     b48:	71450513          	addi	a0,a0,1812 # 6258 <malloc+0x5d4>
+     b4c:	00005097          	auipc	ra,0x5
+     b50:	080080e7          	jalr	128(ra) # 5bcc <printf>
+    exit(1);
+     b54:	4505                	li	a0,1
+     b56:	00005097          	auipc	ra,0x5
+     b5a:	cec080e7          	jalr	-788(ra) # 5842 <exit>
+
+0000000000000b5e <unlinkread>:
+{
+     b5e:	7179                	addi	sp,sp,-48
+     b60:	f406                	sd	ra,40(sp)
+     b62:	f022                	sd	s0,32(sp)
+     b64:	ec26                	sd	s1,24(sp)
+     b66:	e84a                	sd	s2,16(sp)
+     b68:	e44e                	sd	s3,8(sp)
+     b6a:	1800                	addi	s0,sp,48
+     b6c:	89aa                	mv	s3,a0
   fd = open("unlinkread", O_CREATE | O_RDWR);
-     b76:	20200593          	li	a1,514
-     b7a:	00005517          	auipc	a0,0x5
-     b7e:	20e50513          	addi	a0,a0,526 # 5d88 <malloc+0x5ec>
-     b82:	00005097          	auipc	ra,0x5
-     b86:	828080e7          	jalr	-2008(ra) # 53aa <open>
+     b6e:	20200593          	li	a1,514
+     b72:	00005517          	auipc	a0,0x5
+     b76:	6fe50513          	addi	a0,a0,1790 # 6270 <malloc+0x5ec>
+     b7a:	00005097          	auipc	ra,0x5
+     b7e:	d08080e7          	jalr	-760(ra) # 5882 <open>
   if(fd < 0){
-     b8a:	0e054563          	bltz	a0,c74 <unlinkread+0x10e>
-     b8e:	84aa                	mv	s1,a0
+     b82:	0e054563          	bltz	a0,c6c <unlinkread+0x10e>
+     b86:	84aa                	mv	s1,a0
   write(fd, "hello", SZ);
-     b90:	4615                	li	a2,5
-     b92:	00005597          	auipc	a1,0x5
-     b96:	22658593          	addi	a1,a1,550 # 5db8 <malloc+0x61c>
-     b9a:	00004097          	auipc	ra,0x4
-     b9e:	7f0080e7          	jalr	2032(ra) # 538a <write>
+     b88:	4615                	li	a2,5
+     b8a:	00005597          	auipc	a1,0x5
+     b8e:	71658593          	addi	a1,a1,1814 # 62a0 <malloc+0x61c>
+     b92:	00005097          	auipc	ra,0x5
+     b96:	cd0080e7          	jalr	-816(ra) # 5862 <write>
   close(fd);
-     ba2:	8526                	mv	a0,s1
-     ba4:	00004097          	auipc	ra,0x4
-     ba8:	7ee080e7          	jalr	2030(ra) # 5392 <close>
+     b9a:	8526                	mv	a0,s1
+     b9c:	00005097          	auipc	ra,0x5
+     ba0:	cce080e7          	jalr	-818(ra) # 586a <close>
   fd = open("unlinkread", O_RDWR);
-     bac:	4589                	li	a1,2
-     bae:	00005517          	auipc	a0,0x5
-     bb2:	1da50513          	addi	a0,a0,474 # 5d88 <malloc+0x5ec>
-     bb6:	00004097          	auipc	ra,0x4
-     bba:	7f4080e7          	jalr	2036(ra) # 53aa <open>
-     bbe:	84aa                	mv	s1,a0
+     ba4:	4589                	li	a1,2
+     ba6:	00005517          	auipc	a0,0x5
+     baa:	6ca50513          	addi	a0,a0,1738 # 6270 <malloc+0x5ec>
+     bae:	00005097          	auipc	ra,0x5
+     bb2:	cd4080e7          	jalr	-812(ra) # 5882 <open>
+     bb6:	84aa                	mv	s1,a0
   if(fd < 0){
-     bc0:	0c054863          	bltz	a0,c90 <unlinkread+0x12a>
+     bb8:	0c054863          	bltz	a0,c88 <unlinkread+0x12a>
   if(unlink("unlinkread") != 0){
-     bc4:	00005517          	auipc	a0,0x5
-     bc8:	1c450513          	addi	a0,a0,452 # 5d88 <malloc+0x5ec>
-     bcc:	00004097          	auipc	ra,0x4
-     bd0:	7ee080e7          	jalr	2030(ra) # 53ba <unlink>
-     bd4:	ed61                	bnez	a0,cac <unlinkread+0x146>
+     bbc:	00005517          	auipc	a0,0x5
+     bc0:	6b450513          	addi	a0,a0,1716 # 6270 <malloc+0x5ec>
+     bc4:	00005097          	auipc	ra,0x5
+     bc8:	cce080e7          	jalr	-818(ra) # 5892 <unlink>
+     bcc:	ed61                	bnez	a0,ca4 <unlinkread+0x146>
   fd1 = open("unlinkread", O_CREATE | O_RDWR);
-     bd6:	20200593          	li	a1,514
-     bda:	00005517          	auipc	a0,0x5
-     bde:	1ae50513          	addi	a0,a0,430 # 5d88 <malloc+0x5ec>
-     be2:	00004097          	auipc	ra,0x4
-     be6:	7c8080e7          	jalr	1992(ra) # 53aa <open>
-     bea:	892a                	mv	s2,a0
+     bce:	20200593          	li	a1,514
+     bd2:	00005517          	auipc	a0,0x5
+     bd6:	69e50513          	addi	a0,a0,1694 # 6270 <malloc+0x5ec>
+     bda:	00005097          	auipc	ra,0x5
+     bde:	ca8080e7          	jalr	-856(ra) # 5882 <open>
+     be2:	892a                	mv	s2,a0
   write(fd1, "yyy", 3);
-     bec:	460d                	li	a2,3
-     bee:	00005597          	auipc	a1,0x5
-     bf2:	21258593          	addi	a1,a1,530 # 5e00 <malloc+0x664>
-     bf6:	00004097          	auipc	ra,0x4
-     bfa:	794080e7          	jalr	1940(ra) # 538a <write>
+     be4:	460d                	li	a2,3
+     be6:	00005597          	auipc	a1,0x5
+     bea:	70258593          	addi	a1,a1,1794 # 62e8 <malloc+0x664>
+     bee:	00005097          	auipc	ra,0x5
+     bf2:	c74080e7          	jalr	-908(ra) # 5862 <write>
   close(fd1);
-     bfe:	854a                	mv	a0,s2
-     c00:	00004097          	auipc	ra,0x4
-     c04:	792080e7          	jalr	1938(ra) # 5392 <close>
+     bf6:	854a                	mv	a0,s2
+     bf8:	00005097          	auipc	ra,0x5
+     bfc:	c72080e7          	jalr	-910(ra) # 586a <close>
   if(read(fd, buf, sizeof(buf)) != SZ){
-     c08:	660d                	lui	a2,0x3
-     c0a:	0000b597          	auipc	a1,0xb
-     c0e:	b7658593          	addi	a1,a1,-1162 # b780 <buf>
-     c12:	8526                	mv	a0,s1
-     c14:	00004097          	auipc	ra,0x4
-     c18:	76e080e7          	jalr	1902(ra) # 5382 <read>
-     c1c:	4795                	li	a5,5
-     c1e:	0af51563          	bne	a0,a5,cc8 <unlinkread+0x162>
+     c00:	660d                	lui	a2,0x3
+     c02:	0000b597          	auipc	a1,0xb
+     c06:	1e658593          	addi	a1,a1,486 # bde8 <buf>
+     c0a:	8526                	mv	a0,s1
+     c0c:	00005097          	auipc	ra,0x5
+     c10:	c4e080e7          	jalr	-946(ra) # 585a <read>
+     c14:	4795                	li	a5,5
+     c16:	0af51563          	bne	a0,a5,cc0 <unlinkread+0x162>
   if(buf[0] != 'h'){
-     c22:	0000b717          	auipc	a4,0xb
-     c26:	b5e74703          	lbu	a4,-1186(a4) # b780 <buf>
-     c2a:	06800793          	li	a5,104
-     c2e:	0af71b63          	bne	a4,a5,ce4 <unlinkread+0x17e>
+     c1a:	0000b717          	auipc	a4,0xb
+     c1e:	1ce74703          	lbu	a4,462(a4) # bde8 <buf>
+     c22:	06800793          	li	a5,104
+     c26:	0af71b63          	bne	a4,a5,cdc <unlinkread+0x17e>
   if(write(fd, buf, 10) != 10){
-     c32:	4629                	li	a2,10
-     c34:	0000b597          	auipc	a1,0xb
-     c38:	b4c58593          	addi	a1,a1,-1204 # b780 <buf>
-     c3c:	8526                	mv	a0,s1
-     c3e:	00004097          	auipc	ra,0x4
-     c42:	74c080e7          	jalr	1868(ra) # 538a <write>
-     c46:	47a9                	li	a5,10
-     c48:	0af51c63          	bne	a0,a5,d00 <unlinkread+0x19a>
+     c2a:	4629                	li	a2,10
+     c2c:	0000b597          	auipc	a1,0xb
+     c30:	1bc58593          	addi	a1,a1,444 # bde8 <buf>
+     c34:	8526                	mv	a0,s1
+     c36:	00005097          	auipc	ra,0x5
+     c3a:	c2c080e7          	jalr	-980(ra) # 5862 <write>
+     c3e:	47a9                	li	a5,10
+     c40:	0af51c63          	bne	a0,a5,cf8 <unlinkread+0x19a>
   close(fd);
-     c4c:	8526                	mv	a0,s1
-     c4e:	00004097          	auipc	ra,0x4
-     c52:	744080e7          	jalr	1860(ra) # 5392 <close>
+     c44:	8526                	mv	a0,s1
+     c46:	00005097          	auipc	ra,0x5
+     c4a:	c24080e7          	jalr	-988(ra) # 586a <close>
   unlink("unlinkread");
-     c56:	00005517          	auipc	a0,0x5
-     c5a:	13250513          	addi	a0,a0,306 # 5d88 <malloc+0x5ec>
-     c5e:	00004097          	auipc	ra,0x4
-     c62:	75c080e7          	jalr	1884(ra) # 53ba <unlink>
-}
-     c66:	70a2                	ld	ra,40(sp)
-     c68:	7402                	ld	s0,32(sp)
-     c6a:	64e2                	ld	s1,24(sp)
-     c6c:	6942                	ld	s2,16(sp)
-     c6e:	69a2                	ld	s3,8(sp)
-     c70:	6145                	addi	sp,sp,48
-     c72:	8082                	ret
+     c4e:	00005517          	auipc	a0,0x5
+     c52:	62250513          	addi	a0,a0,1570 # 6270 <malloc+0x5ec>
+     c56:	00005097          	auipc	ra,0x5
+     c5a:	c3c080e7          	jalr	-964(ra) # 5892 <unlink>
+}
+     c5e:	70a2                	ld	ra,40(sp)
+     c60:	7402                	ld	s0,32(sp)
+     c62:	64e2                	ld	s1,24(sp)
+     c64:	6942                	ld	s2,16(sp)
+     c66:	69a2                	ld	s3,8(sp)
+     c68:	6145                	addi	sp,sp,48
+     c6a:	8082                	ret
     printf("%s: create unlinkread failed\n", s);
-     c74:	85ce                	mv	a1,s3
-     c76:	00005517          	auipc	a0,0x5
-     c7a:	12250513          	addi	a0,a0,290 # 5d98 <malloc+0x5fc>
-     c7e:	00005097          	auipc	ra,0x5
-     c82:	a66080e7          	jalr	-1434(ra) # 56e4 <printf>
-    exit(1);
-     c86:	4505                	li	a0,1
-     c88:	00004097          	auipc	ra,0x4
-     c8c:	6e2080e7          	jalr	1762(ra) # 536a <exit>
+     c6c:	85ce                	mv	a1,s3
+     c6e:	00005517          	auipc	a0,0x5
+     c72:	61250513          	addi	a0,a0,1554 # 6280 <malloc+0x5fc>
+     c76:	00005097          	auipc	ra,0x5
+     c7a:	f56080e7          	jalr	-170(ra) # 5bcc <printf>
+    exit(1);
+     c7e:	4505                	li	a0,1
+     c80:	00005097          	auipc	ra,0x5
+     c84:	bc2080e7          	jalr	-1086(ra) # 5842 <exit>
     printf("%s: open unlinkread failed\n", s);
-     c90:	85ce                	mv	a1,s3
-     c92:	00005517          	auipc	a0,0x5
-     c96:	12e50513          	addi	a0,a0,302 # 5dc0 <malloc+0x624>
-     c9a:	00005097          	auipc	ra,0x5
-     c9e:	a4a080e7          	jalr	-1462(ra) # 56e4 <printf>
-    exit(1);
-     ca2:	4505                	li	a0,1
-     ca4:	00004097          	auipc	ra,0x4
-     ca8:	6c6080e7          	jalr	1734(ra) # 536a <exit>
+     c88:	85ce                	mv	a1,s3
+     c8a:	00005517          	auipc	a0,0x5
+     c8e:	61e50513          	addi	a0,a0,1566 # 62a8 <malloc+0x624>
+     c92:	00005097          	auipc	ra,0x5
+     c96:	f3a080e7          	jalr	-198(ra) # 5bcc <printf>
+    exit(1);
+     c9a:	4505                	li	a0,1
+     c9c:	00005097          	auipc	ra,0x5
+     ca0:	ba6080e7          	jalr	-1114(ra) # 5842 <exit>
     printf("%s: unlink unlinkread failed\n", s);
-     cac:	85ce                	mv	a1,s3
-     cae:	00005517          	auipc	a0,0x5
-     cb2:	13250513          	addi	a0,a0,306 # 5de0 <malloc+0x644>
-     cb6:	00005097          	auipc	ra,0x5
-     cba:	a2e080e7          	jalr	-1490(ra) # 56e4 <printf>
-    exit(1);
-     cbe:	4505                	li	a0,1
-     cc0:	00004097          	auipc	ra,0x4
-     cc4:	6aa080e7          	jalr	1706(ra) # 536a <exit>
+     ca4:	85ce                	mv	a1,s3
+     ca6:	00005517          	auipc	a0,0x5
+     caa:	62250513          	addi	a0,a0,1570 # 62c8 <malloc+0x644>
+     cae:	00005097          	auipc	ra,0x5
+     cb2:	f1e080e7          	jalr	-226(ra) # 5bcc <printf>
+    exit(1);
+     cb6:	4505                	li	a0,1
+     cb8:	00005097          	auipc	ra,0x5
+     cbc:	b8a080e7          	jalr	-1142(ra) # 5842 <exit>
     printf("%s: unlinkread read failed", s);
-     cc8:	85ce                	mv	a1,s3
-     cca:	00005517          	auipc	a0,0x5
-     cce:	13e50513          	addi	a0,a0,318 # 5e08 <malloc+0x66c>
-     cd2:	00005097          	auipc	ra,0x5
-     cd6:	a12080e7          	jalr	-1518(ra) # 56e4 <printf>
-    exit(1);
-     cda:	4505                	li	a0,1
-     cdc:	00004097          	auipc	ra,0x4
-     ce0:	68e080e7          	jalr	1678(ra) # 536a <exit>
+     cc0:	85ce                	mv	a1,s3
+     cc2:	00005517          	auipc	a0,0x5
+     cc6:	62e50513          	addi	a0,a0,1582 # 62f0 <malloc+0x66c>
+     cca:	00005097          	auipc	ra,0x5
+     cce:	f02080e7          	jalr	-254(ra) # 5bcc <printf>
+    exit(1);
+     cd2:	4505                	li	a0,1
+     cd4:	00005097          	auipc	ra,0x5
+     cd8:	b6e080e7          	jalr	-1170(ra) # 5842 <exit>
     printf("%s: unlinkread wrong data\n", s);
-     ce4:	85ce                	mv	a1,s3
-     ce6:	00005517          	auipc	a0,0x5
-     cea:	14250513          	addi	a0,a0,322 # 5e28 <malloc+0x68c>
-     cee:	00005097          	auipc	ra,0x5
-     cf2:	9f6080e7          	jalr	-1546(ra) # 56e4 <printf>
-    exit(1);
-     cf6:	4505                	li	a0,1
-     cf8:	00004097          	auipc	ra,0x4
-     cfc:	672080e7          	jalr	1650(ra) # 536a <exit>
+     cdc:	85ce                	mv	a1,s3
+     cde:	00005517          	auipc	a0,0x5
+     ce2:	63250513          	addi	a0,a0,1586 # 6310 <malloc+0x68c>
+     ce6:	00005097          	auipc	ra,0x5
+     cea:	ee6080e7          	jalr	-282(ra) # 5bcc <printf>
+    exit(1);
+     cee:	4505                	li	a0,1
+     cf0:	00005097          	auipc	ra,0x5
+     cf4:	b52080e7          	jalr	-1198(ra) # 5842 <exit>
     printf("%s: unlinkread write failed\n", s);
-     d00:	85ce                	mv	a1,s3
-     d02:	00005517          	auipc	a0,0x5
-     d06:	14650513          	addi	a0,a0,326 # 5e48 <malloc+0x6ac>
-     d0a:	00005097          	auipc	ra,0x5
-     d0e:	9da080e7          	jalr	-1574(ra) # 56e4 <printf>
-    exit(1);
-     d12:	4505                	li	a0,1
-     d14:	00004097          	auipc	ra,0x4
-     d18:	656080e7          	jalr	1622(ra) # 536a <exit>
-
-0000000000000d1c <linktest>:
-{
-     d1c:	1101                	addi	sp,sp,-32
-     d1e:	ec06                	sd	ra,24(sp)
-     d20:	e822                	sd	s0,16(sp)
-     d22:	e426                	sd	s1,8(sp)
-     d24:	e04a                	sd	s2,0(sp)
-     d26:	1000                	addi	s0,sp,32
-     d28:	892a                	mv	s2,a0
+     cf8:	85ce                	mv	a1,s3
+     cfa:	00005517          	auipc	a0,0x5
+     cfe:	63650513          	addi	a0,a0,1590 # 6330 <malloc+0x6ac>
+     d02:	00005097          	auipc	ra,0x5
+     d06:	eca080e7          	jalr	-310(ra) # 5bcc <printf>
+    exit(1);
+     d0a:	4505                	li	a0,1
+     d0c:	00005097          	auipc	ra,0x5
+     d10:	b36080e7          	jalr	-1226(ra) # 5842 <exit>
+
+0000000000000d14 <linktest>:
+{
+     d14:	1101                	addi	sp,sp,-32
+     d16:	ec06                	sd	ra,24(sp)
+     d18:	e822                	sd	s0,16(sp)
+     d1a:	e426                	sd	s1,8(sp)
+     d1c:	e04a                	sd	s2,0(sp)
+     d1e:	1000                	addi	s0,sp,32
+     d20:	892a                	mv	s2,a0
   unlink("lf1");
-     d2a:	00005517          	auipc	a0,0x5
-     d2e:	13e50513          	addi	a0,a0,318 # 5e68 <malloc+0x6cc>
-     d32:	00004097          	auipc	ra,0x4
-     d36:	688080e7          	jalr	1672(ra) # 53ba <unlink>
+     d22:	00005517          	auipc	a0,0x5
+     d26:	62e50513          	addi	a0,a0,1582 # 6350 <malloc+0x6cc>
+     d2a:	00005097          	auipc	ra,0x5
+     d2e:	b68080e7          	jalr	-1176(ra) # 5892 <unlink>
   unlink("lf2");
-     d3a:	00005517          	auipc	a0,0x5
-     d3e:	13650513          	addi	a0,a0,310 # 5e70 <malloc+0x6d4>
-     d42:	00004097          	auipc	ra,0x4
-     d46:	678080e7          	jalr	1656(ra) # 53ba <unlink>
+     d32:	00005517          	auipc	a0,0x5
+     d36:	62650513          	addi	a0,a0,1574 # 6358 <malloc+0x6d4>
+     d3a:	00005097          	auipc	ra,0x5
+     d3e:	b58080e7          	jalr	-1192(ra) # 5892 <unlink>
   fd = open("lf1", O_CREATE|O_RDWR);
-     d4a:	20200593          	li	a1,514
-     d4e:	00005517          	auipc	a0,0x5
-     d52:	11a50513          	addi	a0,a0,282 # 5e68 <malloc+0x6cc>
-     d56:	00004097          	auipc	ra,0x4
-     d5a:	654080e7          	jalr	1620(ra) # 53aa <open>
+     d42:	20200593          	li	a1,514
+     d46:	00005517          	auipc	a0,0x5
+     d4a:	60a50513          	addi	a0,a0,1546 # 6350 <malloc+0x6cc>
+     d4e:	00005097          	auipc	ra,0x5
+     d52:	b34080e7          	jalr	-1228(ra) # 5882 <open>
   if(fd < 0){
-     d5e:	10054763          	bltz	a0,e6c <linktest+0x150>
-     d62:	84aa                	mv	s1,a0
+     d56:	10054763          	bltz	a0,e64 <linktest+0x150>
+     d5a:	84aa                	mv	s1,a0
   if(write(fd, "hello", SZ) != SZ){
-     d64:	4615                	li	a2,5
-     d66:	00005597          	auipc	a1,0x5
-     d6a:	05258593          	addi	a1,a1,82 # 5db8 <malloc+0x61c>
-     d6e:	00004097          	auipc	ra,0x4
-     d72:	61c080e7          	jalr	1564(ra) # 538a <write>
-     d76:	4795                	li	a5,5
-     d78:	10f51863          	bne	a0,a5,e88 <linktest+0x16c>
+     d5c:	4615                	li	a2,5
+     d5e:	00005597          	auipc	a1,0x5
+     d62:	54258593          	addi	a1,a1,1346 # 62a0 <malloc+0x61c>
+     d66:	00005097          	auipc	ra,0x5
+     d6a:	afc080e7          	jalr	-1284(ra) # 5862 <write>
+     d6e:	4795                	li	a5,5
+     d70:	10f51863          	bne	a0,a5,e80 <linktest+0x16c>
   close(fd);
-     d7c:	8526                	mv	a0,s1
-     d7e:	00004097          	auipc	ra,0x4
-     d82:	614080e7          	jalr	1556(ra) # 5392 <close>
+     d74:	8526                	mv	a0,s1
+     d76:	00005097          	auipc	ra,0x5
+     d7a:	af4080e7          	jalr	-1292(ra) # 586a <close>
   if(link("lf1", "lf2") < 0){
-     d86:	00005597          	auipc	a1,0x5
-     d8a:	0ea58593          	addi	a1,a1,234 # 5e70 <malloc+0x6d4>
-     d8e:	00005517          	auipc	a0,0x5
-     d92:	0da50513          	addi	a0,a0,218 # 5e68 <malloc+0x6cc>
-     d96:	00004097          	auipc	ra,0x4
-     d9a:	634080e7          	jalr	1588(ra) # 53ca <link>
-     d9e:	10054363          	bltz	a0,ea4 <linktest+0x188>
+     d7e:	00005597          	auipc	a1,0x5
+     d82:	5da58593          	addi	a1,a1,1498 # 6358 <malloc+0x6d4>
+     d86:	00005517          	auipc	a0,0x5
+     d8a:	5ca50513          	addi	a0,a0,1482 # 6350 <malloc+0x6cc>
+     d8e:	00005097          	auipc	ra,0x5
+     d92:	b14080e7          	jalr	-1260(ra) # 58a2 <link>
+     d96:	10054363          	bltz	a0,e9c <linktest+0x188>
   unlink("lf1");
-     da2:	00005517          	auipc	a0,0x5
-     da6:	0c650513          	addi	a0,a0,198 # 5e68 <malloc+0x6cc>
-     daa:	00004097          	auipc	ra,0x4
-     dae:	610080e7          	jalr	1552(ra) # 53ba <unlink>
+     d9a:	00005517          	auipc	a0,0x5
+     d9e:	5b650513          	addi	a0,a0,1462 # 6350 <malloc+0x6cc>
+     da2:	00005097          	auipc	ra,0x5
+     da6:	af0080e7          	jalr	-1296(ra) # 5892 <unlink>
   if(open("lf1", 0) >= 0){
-     db2:	4581                	li	a1,0
-     db4:	00005517          	auipc	a0,0x5
-     db8:	0b450513          	addi	a0,a0,180 # 5e68 <malloc+0x6cc>
-     dbc:	00004097          	auipc	ra,0x4
-     dc0:	5ee080e7          	jalr	1518(ra) # 53aa <open>
-     dc4:	0e055e63          	bgez	a0,ec0 <linktest+0x1a4>
+     daa:	4581                	li	a1,0
+     dac:	00005517          	auipc	a0,0x5
+     db0:	5a450513          	addi	a0,a0,1444 # 6350 <malloc+0x6cc>
+     db4:	00005097          	auipc	ra,0x5
+     db8:	ace080e7          	jalr	-1330(ra) # 5882 <open>
+     dbc:	0e055e63          	bgez	a0,eb8 <linktest+0x1a4>
   fd = open("lf2", 0);
-     dc8:	4581                	li	a1,0
-     dca:	00005517          	auipc	a0,0x5
-     dce:	0a650513          	addi	a0,a0,166 # 5e70 <malloc+0x6d4>
-     dd2:	00004097          	auipc	ra,0x4
-     dd6:	5d8080e7          	jalr	1496(ra) # 53aa <open>
-     dda:	84aa                	mv	s1,a0
+     dc0:	4581                	li	a1,0
+     dc2:	00005517          	auipc	a0,0x5
+     dc6:	59650513          	addi	a0,a0,1430 # 6358 <malloc+0x6d4>
+     dca:	00005097          	auipc	ra,0x5
+     dce:	ab8080e7          	jalr	-1352(ra) # 5882 <open>
+     dd2:	84aa                	mv	s1,a0
   if(fd < 0){
-     ddc:	10054063          	bltz	a0,edc <linktest+0x1c0>
+     dd4:	10054063          	bltz	a0,ed4 <linktest+0x1c0>
   if(read(fd, buf, sizeof(buf)) != SZ){
-     de0:	660d                	lui	a2,0x3
-     de2:	0000b597          	auipc	a1,0xb
-     de6:	99e58593          	addi	a1,a1,-1634 # b780 <buf>
-     dea:	00004097          	auipc	ra,0x4
-     dee:	598080e7          	jalr	1432(ra) # 5382 <read>
-     df2:	4795                	li	a5,5
-     df4:	10f51263          	bne	a0,a5,ef8 <linktest+0x1dc>
+     dd8:	660d                	lui	a2,0x3
+     dda:	0000b597          	auipc	a1,0xb
+     dde:	00e58593          	addi	a1,a1,14 # bde8 <buf>
+     de2:	00005097          	auipc	ra,0x5
+     de6:	a78080e7          	jalr	-1416(ra) # 585a <read>
+     dea:	4795                	li	a5,5
+     dec:	10f51263          	bne	a0,a5,ef0 <linktest+0x1dc>
   close(fd);
-     df8:	8526                	mv	a0,s1
-     dfa:	00004097          	auipc	ra,0x4
-     dfe:	598080e7          	jalr	1432(ra) # 5392 <close>
+     df0:	8526                	mv	a0,s1
+     df2:	00005097          	auipc	ra,0x5
+     df6:	a78080e7          	jalr	-1416(ra) # 586a <close>
   if(link("lf2", "lf2") >= 0){
-     e02:	00005597          	auipc	a1,0x5
-     e06:	06e58593          	addi	a1,a1,110 # 5e70 <malloc+0x6d4>
-     e0a:	852e                	mv	a0,a1
-     e0c:	00004097          	auipc	ra,0x4
-     e10:	5be080e7          	jalr	1470(ra) # 53ca <link>
-     e14:	10055063          	bgez	a0,f14 <linktest+0x1f8>
+     dfa:	00005597          	auipc	a1,0x5
+     dfe:	55e58593          	addi	a1,a1,1374 # 6358 <malloc+0x6d4>
+     e02:	852e                	mv	a0,a1
+     e04:	00005097          	auipc	ra,0x5
+     e08:	a9e080e7          	jalr	-1378(ra) # 58a2 <link>
+     e0c:	10055063          	bgez	a0,f0c <linktest+0x1f8>
   unlink("lf2");
-     e18:	00005517          	auipc	a0,0x5
-     e1c:	05850513          	addi	a0,a0,88 # 5e70 <malloc+0x6d4>
-     e20:	00004097          	auipc	ra,0x4
-     e24:	59a080e7          	jalr	1434(ra) # 53ba <unlink>
+     e10:	00005517          	auipc	a0,0x5
+     e14:	54850513          	addi	a0,a0,1352 # 6358 <malloc+0x6d4>
+     e18:	00005097          	auipc	ra,0x5
+     e1c:	a7a080e7          	jalr	-1414(ra) # 5892 <unlink>
   if(link("lf2", "lf1") >= 0){
-     e28:	00005597          	auipc	a1,0x5
-     e2c:	04058593          	addi	a1,a1,64 # 5e68 <malloc+0x6cc>
-     e30:	00005517          	auipc	a0,0x5
-     e34:	04050513          	addi	a0,a0,64 # 5e70 <malloc+0x6d4>
-     e38:	00004097          	auipc	ra,0x4
-     e3c:	592080e7          	jalr	1426(ra) # 53ca <link>
-     e40:	0e055863          	bgez	a0,f30 <linktest+0x214>
+     e20:	00005597          	auipc	a1,0x5
+     e24:	53058593          	addi	a1,a1,1328 # 6350 <malloc+0x6cc>
+     e28:	00005517          	auipc	a0,0x5
+     e2c:	53050513          	addi	a0,a0,1328 # 6358 <malloc+0x6d4>
+     e30:	00005097          	auipc	ra,0x5
+     e34:	a72080e7          	jalr	-1422(ra) # 58a2 <link>
+     e38:	0e055863          	bgez	a0,f28 <linktest+0x214>
   if(link(".", "lf1") >= 0){
-     e44:	00005597          	auipc	a1,0x5
-     e48:	02458593          	addi	a1,a1,36 # 5e68 <malloc+0x6cc>
-     e4c:	00005517          	auipc	a0,0x5
-     e50:	12c50513          	addi	a0,a0,300 # 5f78 <malloc+0x7dc>
-     e54:	00004097          	auipc	ra,0x4
-     e58:	576080e7          	jalr	1398(ra) # 53ca <link>
-     e5c:	0e055863          	bgez	a0,f4c <linktest+0x230>
-}
-     e60:	60e2                	ld	ra,24(sp)
-     e62:	6442                	ld	s0,16(sp)
-     e64:	64a2                	ld	s1,8(sp)
-     e66:	6902                	ld	s2,0(sp)
-     e68:	6105                	addi	sp,sp,32
-     e6a:	8082                	ret
+     e3c:	00005597          	auipc	a1,0x5
+     e40:	51458593          	addi	a1,a1,1300 # 6350 <malloc+0x6cc>
+     e44:	00005517          	auipc	a0,0x5
+     e48:	61c50513          	addi	a0,a0,1564 # 6460 <malloc+0x7dc>
+     e4c:	00005097          	auipc	ra,0x5
+     e50:	a56080e7          	jalr	-1450(ra) # 58a2 <link>
+     e54:	0e055863          	bgez	a0,f44 <linktest+0x230>
+}
+     e58:	60e2                	ld	ra,24(sp)
+     e5a:	6442                	ld	s0,16(sp)
+     e5c:	64a2                	ld	s1,8(sp)
+     e5e:	6902                	ld	s2,0(sp)
+     e60:	6105                	addi	sp,sp,32
+     e62:	8082                	ret
     printf("%s: create lf1 failed\n", s);
-     e6c:	85ca                	mv	a1,s2
-     e6e:	00005517          	auipc	a0,0x5
-     e72:	00a50513          	addi	a0,a0,10 # 5e78 <malloc+0x6dc>
-     e76:	00005097          	auipc	ra,0x5
-     e7a:	86e080e7          	jalr	-1938(ra) # 56e4 <printf>
-    exit(1);
-     e7e:	4505                	li	a0,1
-     e80:	00004097          	auipc	ra,0x4
-     e84:	4ea080e7          	jalr	1258(ra) # 536a <exit>
+     e64:	85ca                	mv	a1,s2
+     e66:	00005517          	auipc	a0,0x5
+     e6a:	4fa50513          	addi	a0,a0,1274 # 6360 <malloc+0x6dc>
+     e6e:	00005097          	auipc	ra,0x5
+     e72:	d5e080e7          	jalr	-674(ra) # 5bcc <printf>
+    exit(1);
+     e76:	4505                	li	a0,1
+     e78:	00005097          	auipc	ra,0x5
+     e7c:	9ca080e7          	jalr	-1590(ra) # 5842 <exit>
     printf("%s: write lf1 failed\n", s);
-     e88:	85ca                	mv	a1,s2
-     e8a:	00005517          	auipc	a0,0x5
-     e8e:	00650513          	addi	a0,a0,6 # 5e90 <malloc+0x6f4>
-     e92:	00005097          	auipc	ra,0x5
-     e96:	852080e7          	jalr	-1966(ra) # 56e4 <printf>
-    exit(1);
-     e9a:	4505                	li	a0,1
-     e9c:	00004097          	auipc	ra,0x4
-     ea0:	4ce080e7          	jalr	1230(ra) # 536a <exit>
+     e80:	85ca                	mv	a1,s2
+     e82:	00005517          	auipc	a0,0x5
+     e86:	4f650513          	addi	a0,a0,1270 # 6378 <malloc+0x6f4>
+     e8a:	00005097          	auipc	ra,0x5
+     e8e:	d42080e7          	jalr	-702(ra) # 5bcc <printf>
+    exit(1);
+     e92:	4505                	li	a0,1
+     e94:	00005097          	auipc	ra,0x5
+     e98:	9ae080e7          	jalr	-1618(ra) # 5842 <exit>
     printf("%s: link lf1 lf2 failed\n", s);
-     ea4:	85ca                	mv	a1,s2
-     ea6:	00005517          	auipc	a0,0x5
-     eaa:	00250513          	addi	a0,a0,2 # 5ea8 <malloc+0x70c>
-     eae:	00005097          	auipc	ra,0x5
-     eb2:	836080e7          	jalr	-1994(ra) # 56e4 <printf>
-    exit(1);
-     eb6:	4505                	li	a0,1
-     eb8:	00004097          	auipc	ra,0x4
-     ebc:	4b2080e7          	jalr	1202(ra) # 536a <exit>
+     e9c:	85ca                	mv	a1,s2
+     e9e:	00005517          	auipc	a0,0x5
+     ea2:	4f250513          	addi	a0,a0,1266 # 6390 <malloc+0x70c>
+     ea6:	00005097          	auipc	ra,0x5
+     eaa:	d26080e7          	jalr	-730(ra) # 5bcc <printf>
+    exit(1);
+     eae:	4505                	li	a0,1
+     eb0:	00005097          	auipc	ra,0x5
+     eb4:	992080e7          	jalr	-1646(ra) # 5842 <exit>
     printf("%s: unlinked lf1 but it is still there!\n", s);
-     ec0:	85ca                	mv	a1,s2
-     ec2:	00005517          	auipc	a0,0x5
-     ec6:	00650513          	addi	a0,a0,6 # 5ec8 <malloc+0x72c>
-     eca:	00005097          	auipc	ra,0x5
-     ece:	81a080e7          	jalr	-2022(ra) # 56e4 <printf>
-    exit(1);
-     ed2:	4505                	li	a0,1
-     ed4:	00004097          	auipc	ra,0x4
-     ed8:	496080e7          	jalr	1174(ra) # 536a <exit>
+     eb8:	85ca                	mv	a1,s2
+     eba:	00005517          	auipc	a0,0x5
+     ebe:	4f650513          	addi	a0,a0,1270 # 63b0 <malloc+0x72c>
+     ec2:	00005097          	auipc	ra,0x5
+     ec6:	d0a080e7          	jalr	-758(ra) # 5bcc <printf>
+    exit(1);
+     eca:	4505                	li	a0,1
+     ecc:	00005097          	auipc	ra,0x5
+     ed0:	976080e7          	jalr	-1674(ra) # 5842 <exit>
     printf("%s: open lf2 failed\n", s);
-     edc:	85ca                	mv	a1,s2
-     ede:	00005517          	auipc	a0,0x5
-     ee2:	01a50513          	addi	a0,a0,26 # 5ef8 <malloc+0x75c>
-     ee6:	00004097          	auipc	ra,0x4
-     eea:	7fe080e7          	jalr	2046(ra) # 56e4 <printf>
-    exit(1);
-     eee:	4505                	li	a0,1
-     ef0:	00004097          	auipc	ra,0x4
-     ef4:	47a080e7          	jalr	1146(ra) # 536a <exit>
+     ed4:	85ca                	mv	a1,s2
+     ed6:	00005517          	auipc	a0,0x5
+     eda:	50a50513          	addi	a0,a0,1290 # 63e0 <malloc+0x75c>
+     ede:	00005097          	auipc	ra,0x5
+     ee2:	cee080e7          	jalr	-786(ra) # 5bcc <printf>
+    exit(1);
+     ee6:	4505                	li	a0,1
+     ee8:	00005097          	auipc	ra,0x5
+     eec:	95a080e7          	jalr	-1702(ra) # 5842 <exit>
     printf("%s: read lf2 failed\n", s);
-     ef8:	85ca                	mv	a1,s2
-     efa:	00005517          	auipc	a0,0x5
-     efe:	01650513          	addi	a0,a0,22 # 5f10 <malloc+0x774>
-     f02:	00004097          	auipc	ra,0x4
-     f06:	7e2080e7          	jalr	2018(ra) # 56e4 <printf>
-    exit(1);
-     f0a:	4505                	li	a0,1
-     f0c:	00004097          	auipc	ra,0x4
-     f10:	45e080e7          	jalr	1118(ra) # 536a <exit>
+     ef0:	85ca                	mv	a1,s2
+     ef2:	00005517          	auipc	a0,0x5
+     ef6:	50650513          	addi	a0,a0,1286 # 63f8 <malloc+0x774>
+     efa:	00005097          	auipc	ra,0x5
+     efe:	cd2080e7          	jalr	-814(ra) # 5bcc <printf>
+    exit(1);
+     f02:	4505                	li	a0,1
+     f04:	00005097          	auipc	ra,0x5
+     f08:	93e080e7          	jalr	-1730(ra) # 5842 <exit>
     printf("%s: link lf2 lf2 succeeded! oops\n", s);
-     f14:	85ca                	mv	a1,s2
-     f16:	00005517          	auipc	a0,0x5
-     f1a:	01250513          	addi	a0,a0,18 # 5f28 <malloc+0x78c>
-     f1e:	00004097          	auipc	ra,0x4
-     f22:	7c6080e7          	jalr	1990(ra) # 56e4 <printf>
-    exit(1);
-     f26:	4505                	li	a0,1
-     f28:	00004097          	auipc	ra,0x4
-     f2c:	442080e7          	jalr	1090(ra) # 536a <exit>
-    printf("%s: link non-existant succeeded! oops\n", s);
-     f30:	85ca                	mv	a1,s2
-     f32:	00005517          	auipc	a0,0x5
-     f36:	01e50513          	addi	a0,a0,30 # 5f50 <malloc+0x7b4>
-     f3a:	00004097          	auipc	ra,0x4
-     f3e:	7aa080e7          	jalr	1962(ra) # 56e4 <printf>
-    exit(1);
-     f42:	4505                	li	a0,1
-     f44:	00004097          	auipc	ra,0x4
-     f48:	426080e7          	jalr	1062(ra) # 536a <exit>
+     f0c:	85ca                	mv	a1,s2
+     f0e:	00005517          	auipc	a0,0x5
+     f12:	50250513          	addi	a0,a0,1282 # 6410 <malloc+0x78c>
+     f16:	00005097          	auipc	ra,0x5
+     f1a:	cb6080e7          	jalr	-842(ra) # 5bcc <printf>
+    exit(1);
+     f1e:	4505                	li	a0,1
+     f20:	00005097          	auipc	ra,0x5
+     f24:	922080e7          	jalr	-1758(ra) # 5842 <exit>
+    printf("%s: link non-existent succeeded! oops\n", s);
+     f28:	85ca                	mv	a1,s2
+     f2a:	00005517          	auipc	a0,0x5
+     f2e:	50e50513          	addi	a0,a0,1294 # 6438 <malloc+0x7b4>
+     f32:	00005097          	auipc	ra,0x5
+     f36:	c9a080e7          	jalr	-870(ra) # 5bcc <printf>
+    exit(1);
+     f3a:	4505                	li	a0,1
+     f3c:	00005097          	auipc	ra,0x5
+     f40:	906080e7          	jalr	-1786(ra) # 5842 <exit>
     printf("%s: link . lf1 succeeded! oops\n", s);
-     f4c:	85ca                	mv	a1,s2
-     f4e:	00005517          	auipc	a0,0x5
-     f52:	03250513          	addi	a0,a0,50 # 5f80 <malloc+0x7e4>
-     f56:	00004097          	auipc	ra,0x4
-     f5a:	78e080e7          	jalr	1934(ra) # 56e4 <printf>
-    exit(1);
-     f5e:	4505                	li	a0,1
-     f60:	00004097          	auipc	ra,0x4
-     f64:	40a080e7          	jalr	1034(ra) # 536a <exit>
-
-0000000000000f68 <bigdir>:
-{
-     f68:	715d                	addi	sp,sp,-80
-     f6a:	e486                	sd	ra,72(sp)
-     f6c:	e0a2                	sd	s0,64(sp)
-     f6e:	fc26                	sd	s1,56(sp)
-     f70:	f84a                	sd	s2,48(sp)
-     f72:	f44e                	sd	s3,40(sp)
-     f74:	f052                	sd	s4,32(sp)
-     f76:	ec56                	sd	s5,24(sp)
-     f78:	e85a                	sd	s6,16(sp)
-     f7a:	0880                	addi	s0,sp,80
-     f7c:	89aa                	mv	s3,a0
+     f44:	85ca                	mv	a1,s2
+     f46:	00005517          	auipc	a0,0x5
+     f4a:	52250513          	addi	a0,a0,1314 # 6468 <malloc+0x7e4>
+     f4e:	00005097          	auipc	ra,0x5
+     f52:	c7e080e7          	jalr	-898(ra) # 5bcc <printf>
+    exit(1);
+     f56:	4505                	li	a0,1
+     f58:	00005097          	auipc	ra,0x5
+     f5c:	8ea080e7          	jalr	-1814(ra) # 5842 <exit>
+
+0000000000000f60 <bigdir>:
+{
+     f60:	715d                	addi	sp,sp,-80
+     f62:	e486                	sd	ra,72(sp)
+     f64:	e0a2                	sd	s0,64(sp)
+     f66:	fc26                	sd	s1,56(sp)
+     f68:	f84a                	sd	s2,48(sp)
+     f6a:	f44e                	sd	s3,40(sp)
+     f6c:	f052                	sd	s4,32(sp)
+     f6e:	ec56                	sd	s5,24(sp)
+     f70:	e85a                	sd	s6,16(sp)
+     f72:	0880                	addi	s0,sp,80
+     f74:	89aa                	mv	s3,a0
   unlink("bd");
-     f7e:	00005517          	auipc	a0,0x5
-     f82:	02250513          	addi	a0,a0,34 # 5fa0 <malloc+0x804>
-     f86:	00004097          	auipc	ra,0x4
-     f8a:	434080e7          	jalr	1076(ra) # 53ba <unlink>
+     f76:	00005517          	auipc	a0,0x5
+     f7a:	51250513          	addi	a0,a0,1298 # 6488 <malloc+0x804>
+     f7e:	00005097          	auipc	ra,0x5
+     f82:	914080e7          	jalr	-1772(ra) # 5892 <unlink>
   fd = open("bd", O_CREATE);
-     f8e:	20000593          	li	a1,512
-     f92:	00005517          	auipc	a0,0x5
-     f96:	00e50513          	addi	a0,a0,14 # 5fa0 <malloc+0x804>
-     f9a:	00004097          	auipc	ra,0x4
-     f9e:	410080e7          	jalr	1040(ra) # 53aa <open>
+     f86:	20000593          	li	a1,512
+     f8a:	00005517          	auipc	a0,0x5
+     f8e:	4fe50513          	addi	a0,a0,1278 # 6488 <malloc+0x804>
+     f92:	00005097          	auipc	ra,0x5
+     f96:	8f0080e7          	jalr	-1808(ra) # 5882 <open>
   if(fd < 0){
-     fa2:	0c054963          	bltz	a0,1074 <bigdir+0x10c>
+     f9a:	0c054963          	bltz	a0,106c <bigdir+0x10c>
   close(fd);
-     fa6:	00004097          	auipc	ra,0x4
-     faa:	3ec080e7          	jalr	1004(ra) # 5392 <close>
+     f9e:	00005097          	auipc	ra,0x5
+     fa2:	8cc080e7          	jalr	-1844(ra) # 586a <close>
   for(i = 0; i < N; i++){
-     fae:	4901                	li	s2,0
+     fa6:	4901                	li	s2,0
     name[0] = 'x';
-     fb0:	07800a93          	li	s5,120
+     fa8:	07800a93          	li	s5,120
     if(link("bd", name) != 0){
-     fb4:	00005a17          	auipc	s4,0x5
-     fb8:	feca0a13          	addi	s4,s4,-20 # 5fa0 <malloc+0x804>
+     fac:	00005a17          	auipc	s4,0x5
+     fb0:	4dca0a13          	addi	s4,s4,1244 # 6488 <malloc+0x804>
   for(i = 0; i < N; i++){
-     fbc:	1f400b13          	li	s6,500
+     fb4:	1f400b13          	li	s6,500
     name[0] = 'x';
-     fc0:	fb540823          	sb	s5,-80(s0)
+     fb8:	fb540823          	sb	s5,-80(s0)
     name[1] = '0' + (i / 64);
-     fc4:	41f9571b          	sraiw	a4,s2,0x1f
-     fc8:	01a7571b          	srliw	a4,a4,0x1a
-     fcc:	012707bb          	addw	a5,a4,s2
-     fd0:	4067d69b          	sraiw	a3,a5,0x6
-     fd4:	0306869b          	addiw	a3,a3,48
-     fd8:	fad408a3          	sb	a3,-79(s0)
+     fbc:	41f9571b          	sraiw	a4,s2,0x1f
+     fc0:	01a7571b          	srliw	a4,a4,0x1a
+     fc4:	012707bb          	addw	a5,a4,s2
+     fc8:	4067d69b          	sraiw	a3,a5,0x6
+     fcc:	0306869b          	addiw	a3,a3,48
+     fd0:	fad408a3          	sb	a3,-79(s0)
     name[2] = '0' + (i % 64);
-     fdc:	03f7f793          	andi	a5,a5,63
-     fe0:	9f99                	subw	a5,a5,a4
-     fe2:	0307879b          	addiw	a5,a5,48
-     fe6:	faf40923          	sb	a5,-78(s0)
+     fd4:	03f7f793          	andi	a5,a5,63
+     fd8:	9f99                	subw	a5,a5,a4
+     fda:	0307879b          	addiw	a5,a5,48
+     fde:	faf40923          	sb	a5,-78(s0)
     name[3] = '\0';
-     fea:	fa0409a3          	sb	zero,-77(s0)
+     fe2:	fa0409a3          	sb	zero,-77(s0)
     if(link("bd", name) != 0){
-     fee:	fb040593          	addi	a1,s0,-80
-     ff2:	8552                	mv	a0,s4
-     ff4:	00004097          	auipc	ra,0x4
-     ff8:	3d6080e7          	jalr	982(ra) # 53ca <link>
-     ffc:	84aa                	mv	s1,a0
-     ffe:	e949                	bnez	a0,1090 <bigdir+0x128>
+     fe6:	fb040593          	addi	a1,s0,-80
+     fea:	8552                	mv	a0,s4
+     fec:	00005097          	auipc	ra,0x5
+     ff0:	8b6080e7          	jalr	-1866(ra) # 58a2 <link>
+     ff4:	84aa                	mv	s1,a0
+     ff6:	e949                	bnez	a0,1088 <bigdir+0x128>
   for(i = 0; i < N; i++){
-    1000:	2905                	addiw	s2,s2,1
-    1002:	fb691fe3          	bne	s2,s6,fc0 <bigdir+0x58>
+     ff8:	2905                	addiw	s2,s2,1
+     ffa:	fb691fe3          	bne	s2,s6,fb8 <bigdir+0x58>
   unlink("bd");
-    1006:	00005517          	auipc	a0,0x5
-    100a:	f9a50513          	addi	a0,a0,-102 # 5fa0 <malloc+0x804>
-    100e:	00004097          	auipc	ra,0x4
-    1012:	3ac080e7          	jalr	940(ra) # 53ba <unlink>
+     ffe:	00005517          	auipc	a0,0x5
+    1002:	48a50513          	addi	a0,a0,1162 # 6488 <malloc+0x804>
+    1006:	00005097          	auipc	ra,0x5
+    100a:	88c080e7          	jalr	-1908(ra) # 5892 <unlink>
     name[0] = 'x';
-    1016:	07800913          	li	s2,120
+    100e:	07800913          	li	s2,120
   for(i = 0; i < N; i++){
-    101a:	1f400a13          	li	s4,500
+    1012:	1f400a13          	li	s4,500
     name[0] = 'x';
-    101e:	fb240823          	sb	s2,-80(s0)
+    1016:	fb240823          	sb	s2,-80(s0)
     name[1] = '0' + (i / 64);
-    1022:	41f4d71b          	sraiw	a4,s1,0x1f
-    1026:	01a7571b          	srliw	a4,a4,0x1a
-    102a:	009707bb          	addw	a5,a4,s1
-    102e:	4067d69b          	sraiw	a3,a5,0x6
-    1032:	0306869b          	addiw	a3,a3,48
-    1036:	fad408a3          	sb	a3,-79(s0)
+    101a:	41f4d71b          	sraiw	a4,s1,0x1f
+    101e:	01a7571b          	srliw	a4,a4,0x1a
+    1022:	009707bb          	addw	a5,a4,s1
+    1026:	4067d69b          	sraiw	a3,a5,0x6
+    102a:	0306869b          	addiw	a3,a3,48
+    102e:	fad408a3          	sb	a3,-79(s0)
     name[2] = '0' + (i % 64);
-    103a:	03f7f793          	andi	a5,a5,63
-    103e:	9f99                	subw	a5,a5,a4
-    1040:	0307879b          	addiw	a5,a5,48
-    1044:	faf40923          	sb	a5,-78(s0)
+    1032:	03f7f793          	andi	a5,a5,63
+    1036:	9f99                	subw	a5,a5,a4
+    1038:	0307879b          	addiw	a5,a5,48
+    103c:	faf40923          	sb	a5,-78(s0)
     name[3] = '\0';
-    1048:	fa0409a3          	sb	zero,-77(s0)
+    1040:	fa0409a3          	sb	zero,-77(s0)
     if(unlink(name) != 0){
-    104c:	fb040513          	addi	a0,s0,-80
-    1050:	00004097          	auipc	ra,0x4
-    1054:	36a080e7          	jalr	874(ra) # 53ba <unlink>
-    1058:	ed21                	bnez	a0,10b0 <bigdir+0x148>
+    1044:	fb040513          	addi	a0,s0,-80
+    1048:	00005097          	auipc	ra,0x5
+    104c:	84a080e7          	jalr	-1974(ra) # 5892 <unlink>
+    1050:	ed21                	bnez	a0,10a8 <bigdir+0x148>
   for(i = 0; i < N; i++){
-    105a:	2485                	addiw	s1,s1,1
-    105c:	fd4491e3          	bne	s1,s4,101e <bigdir+0xb6>
+    1052:	2485                	addiw	s1,s1,1
+    1054:	fd4491e3          	bne	s1,s4,1016 <bigdir+0xb6>
 }
-    1060:	60a6                	ld	ra,72(sp)
-    1062:	6406                	ld	s0,64(sp)
-    1064:	74e2                	ld	s1,56(sp)
-    1066:	7942                	ld	s2,48(sp)
-    1068:	79a2                	ld	s3,40(sp)
-    106a:	7a02                	ld	s4,32(sp)
-    106c:	6ae2                	ld	s5,24(sp)
-    106e:	6b42                	ld	s6,16(sp)
-    1070:	6161                	addi	sp,sp,80
-    1072:	8082                	ret
+    1058:	60a6                	ld	ra,72(sp)
+    105a:	6406                	ld	s0,64(sp)
+    105c:	74e2                	ld	s1,56(sp)
+    105e:	7942                	ld	s2,48(sp)
+    1060:	79a2                	ld	s3,40(sp)
+    1062:	7a02                	ld	s4,32(sp)
+    1064:	6ae2                	ld	s5,24(sp)
+    1066:	6b42                	ld	s6,16(sp)
+    1068:	6161                	addi	sp,sp,80
+    106a:	8082                	ret
     printf("%s: bigdir create failed\n", s);
-    1074:	85ce                	mv	a1,s3
-    1076:	00005517          	auipc	a0,0x5
-    107a:	f3250513          	addi	a0,a0,-206 # 5fa8 <malloc+0x80c>
-    107e:	00004097          	auipc	ra,0x4
-    1082:	666080e7          	jalr	1638(ra) # 56e4 <printf>
-    exit(1);
-    1086:	4505                	li	a0,1
-    1088:	00004097          	auipc	ra,0x4
-    108c:	2e2080e7          	jalr	738(ra) # 536a <exit>
+    106c:	85ce                	mv	a1,s3
+    106e:	00005517          	auipc	a0,0x5
+    1072:	42250513          	addi	a0,a0,1058 # 6490 <malloc+0x80c>
+    1076:	00005097          	auipc	ra,0x5
+    107a:	b56080e7          	jalr	-1194(ra) # 5bcc <printf>
+    exit(1);
+    107e:	4505                	li	a0,1
+    1080:	00004097          	auipc	ra,0x4
+    1084:	7c2080e7          	jalr	1986(ra) # 5842 <exit>
       printf("%s: bigdir link(bd, %s) failed\n", s, name);
-    1090:	fb040613          	addi	a2,s0,-80
-    1094:	85ce                	mv	a1,s3
-    1096:	00005517          	auipc	a0,0x5
-    109a:	f3250513          	addi	a0,a0,-206 # 5fc8 <malloc+0x82c>
-    109e:	00004097          	auipc	ra,0x4
-    10a2:	646080e7          	jalr	1606(ra) # 56e4 <printf>
-      exit(1);
-    10a6:	4505                	li	a0,1
-    10a8:	00004097          	auipc	ra,0x4
-    10ac:	2c2080e7          	jalr	706(ra) # 536a <exit>
+    1088:	fb040613          	addi	a2,s0,-80
+    108c:	85ce                	mv	a1,s3
+    108e:	00005517          	auipc	a0,0x5
+    1092:	42250513          	addi	a0,a0,1058 # 64b0 <malloc+0x82c>
+    1096:	00005097          	auipc	ra,0x5
+    109a:	b36080e7          	jalr	-1226(ra) # 5bcc <printf>
+      exit(1);
+    109e:	4505                	li	a0,1
+    10a0:	00004097          	auipc	ra,0x4
+    10a4:	7a2080e7          	jalr	1954(ra) # 5842 <exit>
       printf("%s: bigdir unlink failed", s);
-    10b0:	85ce                	mv	a1,s3
-    10b2:	00005517          	auipc	a0,0x5
-    10b6:	f3650513          	addi	a0,a0,-202 # 5fe8 <malloc+0x84c>
-    10ba:	00004097          	auipc	ra,0x4
-    10be:	62a080e7          	jalr	1578(ra) # 56e4 <printf>
-      exit(1);
-    10c2:	4505                	li	a0,1
-    10c4:	00004097          	auipc	ra,0x4
-    10c8:	2a6080e7          	jalr	678(ra) # 536a <exit>
-
-00000000000010cc <validatetest>:
-{
-    10cc:	7139                	addi	sp,sp,-64
-    10ce:	fc06                	sd	ra,56(sp)
-    10d0:	f822                	sd	s0,48(sp)
-    10d2:	f426                	sd	s1,40(sp)
-    10d4:	f04a                	sd	s2,32(sp)
-    10d6:	ec4e                	sd	s3,24(sp)
-    10d8:	e852                	sd	s4,16(sp)
-    10da:	e456                	sd	s5,8(sp)
-    10dc:	e05a                	sd	s6,0(sp)
-    10de:	0080                	addi	s0,sp,64
-    10e0:	8b2a                	mv	s6,a0
+    10a8:	85ce                	mv	a1,s3
+    10aa:	00005517          	auipc	a0,0x5
+    10ae:	42650513          	addi	a0,a0,1062 # 64d0 <malloc+0x84c>
+    10b2:	00005097          	auipc	ra,0x5
+    10b6:	b1a080e7          	jalr	-1254(ra) # 5bcc <printf>
+      exit(1);
+    10ba:	4505                	li	a0,1
+    10bc:	00004097          	auipc	ra,0x4
+    10c0:	786080e7          	jalr	1926(ra) # 5842 <exit>
+
+00000000000010c4 <validatetest>:
+{
+    10c4:	7139                	addi	sp,sp,-64
+    10c6:	fc06                	sd	ra,56(sp)
+    10c8:	f822                	sd	s0,48(sp)
+    10ca:	f426                	sd	s1,40(sp)
+    10cc:	f04a                	sd	s2,32(sp)
+    10ce:	ec4e                	sd	s3,24(sp)
+    10d0:	e852                	sd	s4,16(sp)
+    10d2:	e456                	sd	s5,8(sp)
+    10d4:	e05a                	sd	s6,0(sp)
+    10d6:	0080                	addi	s0,sp,64
+    10d8:	8b2a                	mv	s6,a0
   for(p = 0; p <= (uint)hi; p += PGSIZE){
-    10e2:	4481                	li	s1,0
+    10da:	4481                	li	s1,0
     if(link("nosuchfile", (char*)p) != -1){
-    10e4:	00005997          	auipc	s3,0x5
-    10e8:	f2498993          	addi	s3,s3,-220 # 6008 <malloc+0x86c>
-    10ec:	597d                	li	s2,-1
+    10dc:	00005997          	auipc	s3,0x5
+    10e0:	41498993          	addi	s3,s3,1044 # 64f0 <malloc+0x86c>
+    10e4:	597d                	li	s2,-1
   for(p = 0; p <= (uint)hi; p += PGSIZE){
-    10ee:	6a85                	lui	s5,0x1
-    10f0:	00114a37          	lui	s4,0x114
+    10e6:	6a85                	lui	s5,0x1
+    10e8:	00114a37          	lui	s4,0x114
     if(link("nosuchfile", (char*)p) != -1){
-    10f4:	85a6                	mv	a1,s1
-    10f6:	854e                	mv	a0,s3
-    10f8:	00004097          	auipc	ra,0x4
-    10fc:	2d2080e7          	jalr	722(ra) # 53ca <link>
-    1100:	01251f63          	bne	a0,s2,111e <validatetest+0x52>
+    10ec:	85a6                	mv	a1,s1
+    10ee:	854e                	mv	a0,s3
+    10f0:	00004097          	auipc	ra,0x4
+    10f4:	7b2080e7          	jalr	1970(ra) # 58a2 <link>
+    10f8:	01251f63          	bne	a0,s2,1116 <validatetest+0x52>
   for(p = 0; p <= (uint)hi; p += PGSIZE){
-    1104:	94d6                	add	s1,s1,s5
-    1106:	ff4497e3          	bne	s1,s4,10f4 <validatetest+0x28>
+    10fc:	94d6                	add	s1,s1,s5
+    10fe:	ff4497e3          	bne	s1,s4,10ec <validatetest+0x28>
 }
-    110a:	70e2                	ld	ra,56(sp)
-    110c:	7442                	ld	s0,48(sp)
-    110e:	74a2                	ld	s1,40(sp)
-    1110:	7902                	ld	s2,32(sp)
-    1112:	69e2                	ld	s3,24(sp)
-    1114:	6a42                	ld	s4,16(sp)
-    1116:	6aa2                	ld	s5,8(sp)
-    1118:	6b02                	ld	s6,0(sp)
-    111a:	6121                	addi	sp,sp,64
-    111c:	8082                	ret
+    1102:	70e2                	ld	ra,56(sp)
+    1104:	7442                	ld	s0,48(sp)
+    1106:	74a2                	ld	s1,40(sp)
+    1108:	7902                	ld	s2,32(sp)
+    110a:	69e2                	ld	s3,24(sp)
+    110c:	6a42                	ld	s4,16(sp)
+    110e:	6aa2                	ld	s5,8(sp)
+    1110:	6b02                	ld	s6,0(sp)
+    1112:	6121                	addi	sp,sp,64
+    1114:	8082                	ret
       printf("%s: link should not succeed\n", s);
-    111e:	85da                	mv	a1,s6
-    1120:	00005517          	auipc	a0,0x5
-    1124:	ef850513          	addi	a0,a0,-264 # 6018 <malloc+0x87c>
-    1128:	00004097          	auipc	ra,0x4
-    112c:	5bc080e7          	jalr	1468(ra) # 56e4 <printf>
-      exit(1);
-    1130:	4505                	li	a0,1
-    1132:	00004097          	auipc	ra,0x4
-    1136:	238080e7          	jalr	568(ra) # 536a <exit>
+    1116:	85da                	mv	a1,s6
+    1118:	00005517          	auipc	a0,0x5
+    111c:	3e850513          	addi	a0,a0,1000 # 6500 <malloc+0x87c>
+    1120:	00005097          	auipc	ra,0x5
+    1124:	aac080e7          	jalr	-1364(ra) # 5bcc <printf>
+      exit(1);
+    1128:	4505                	li	a0,1
+    112a:	00004097          	auipc	ra,0x4
+    112e:	718080e7          	jalr	1816(ra) # 5842 <exit>
 
-000000000000113a <pgbug>:
+0000000000001132 <pgbug>:
 // regression test. copyin(), copyout(), and copyinstr() used to cast
 // the virtual page address to uint, which (with certain wild system
 // call arguments) resulted in a kernel page faults.
 void
 pgbug(char *s)
 {
-    113a:	7179                	addi	sp,sp,-48
-    113c:	f406                	sd	ra,40(sp)
-    113e:	f022                	sd	s0,32(sp)
-    1140:	ec26                	sd	s1,24(sp)
-    1142:	1800                	addi	s0,sp,48
+    1132:	7179                	addi	sp,sp,-48
+    1134:	f406                	sd	ra,40(sp)
+    1136:	f022                	sd	s0,32(sp)
+    1138:	ec26                	sd	s1,24(sp)
+    113a:	1800                	addi	s0,sp,48
   char *argv[1];
   argv[0] = 0;
-    1144:	fc043c23          	sd	zero,-40(s0)
+    113c:	fc043c23          	sd	zero,-40(s0)
   exec((char*)0xeaeb0b5b00002f5e, argv);
-    1148:	00007497          	auipc	s1,0x7
-    114c:	e004b483          	ld	s1,-512(s1) # 7f48 <__SDATA_BEGIN__>
-    1150:	fd840593          	addi	a1,s0,-40
-    1154:	8526                	mv	a0,s1
-    1156:	00004097          	auipc	ra,0x4
-    115a:	24c080e7          	jalr	588(ra) # 53a2 <exec>
+    1140:	00007497          	auipc	s1,0x7
+    1144:	4804b483          	ld	s1,1152(s1) # 85c0 <__SDATA_BEGIN__>
+    1148:	fd840593          	addi	a1,s0,-40
+    114c:	8526                	mv	a0,s1
+    114e:	00004097          	auipc	ra,0x4
+    1152:	72c080e7          	jalr	1836(ra) # 587a <exec>
 
   pipe((int*)0xeaeb0b5b00002f5e);
-    115e:	8526                	mv	a0,s1
-    1160:	00004097          	auipc	ra,0x4
-    1164:	21a080e7          	jalr	538(ra) # 537a <pipe>
+    1156:	8526                	mv	a0,s1
+    1158:	00004097          	auipc	ra,0x4
+    115c:	6fa080e7          	jalr	1786(ra) # 5852 <pipe>
 
   exit(0);
-    1168:	4501                	li	a0,0
-    116a:	00004097          	auipc	ra,0x4
-    116e:	200080e7          	jalr	512(ra) # 536a <exit>
+    1160:	4501                	li	a0,0
+    1162:	00004097          	auipc	ra,0x4
+    1166:	6e0080e7          	jalr	1760(ra) # 5842 <exit>
 
-0000000000001172 <badarg>:
+000000000000116a <badarg>:
 
 // regression test. test whether exec() leaks memory if one of the
 // arguments is invalid. the test passes if the kernel doesn't panic.
 void
 badarg(char *s)
 {
-    1172:	7139                	addi	sp,sp,-64
-    1174:	fc06                	sd	ra,56(sp)
-    1176:	f822                	sd	s0,48(sp)
-    1178:	f426                	sd	s1,40(sp)
-    117a:	f04a                	sd	s2,32(sp)
-    117c:	ec4e                	sd	s3,24(sp)
-    117e:	0080                	addi	s0,sp,64
-    1180:	64b1                	lui	s1,0xc
-    1182:	35048493          	addi	s1,s1,848 # c350 <buf+0xbd0>
+    116a:	7139                	addi	sp,sp,-64
+    116c:	fc06                	sd	ra,56(sp)
+    116e:	f822                	sd	s0,48(sp)
+    1170:	f426                	sd	s1,40(sp)
+    1172:	f04a                	sd	s2,32(sp)
+    1174:	ec4e                	sd	s3,24(sp)
+    1176:	0080                	addi	s0,sp,64
+    1178:	64b1                	lui	s1,0xc
+    117a:	35048493          	addi	s1,s1,848 # c350 <buf+0x568>
   for(int i = 0; i < 50000; i++){
     char *argv[2];
     argv[0] = (char*)0xffffffff;
-    1186:	597d                	li	s2,-1
-    1188:	02095913          	srli	s2,s2,0x20
+    117e:	597d                	li	s2,-1
+    1180:	02095913          	srli	s2,s2,0x20
     argv[1] = 0;
     exec("echo", argv);
-    118c:	00004997          	auipc	s3,0x4
-    1190:	73498993          	addi	s3,s3,1844 # 58c0 <malloc+0x124>
+    1184:	00005997          	auipc	s3,0x5
+    1188:	c2498993          	addi	s3,s3,-988 # 5da8 <malloc+0x124>
     argv[0] = (char*)0xffffffff;
-    1194:	fd243023          	sd	s2,-64(s0)
+    118c:	fd243023          	sd	s2,-64(s0)
     argv[1] = 0;
-    1198:	fc043423          	sd	zero,-56(s0)
+    1190:	fc043423          	sd	zero,-56(s0)
     exec("echo", argv);
-    119c:	fc040593          	addi	a1,s0,-64
-    11a0:	854e                	mv	a0,s3
-    11a2:	00004097          	auipc	ra,0x4
-    11a6:	200080e7          	jalr	512(ra) # 53a2 <exec>
+    1194:	fc040593          	addi	a1,s0,-64
+    1198:	854e                	mv	a0,s3
+    119a:	00004097          	auipc	ra,0x4
+    119e:	6e0080e7          	jalr	1760(ra) # 587a <exec>
   for(int i = 0; i < 50000; i++){
-    11aa:	34fd                	addiw	s1,s1,-1
-    11ac:	f4e5                	bnez	s1,1194 <badarg+0x22>
+    11a2:	34fd                	addiw	s1,s1,-1
+    11a4:	f4e5                	bnez	s1,118c <badarg+0x22>
   }
   
   exit(0);
-    11ae:	4501                	li	a0,0
-    11b0:	00004097          	auipc	ra,0x4
-    11b4:	1ba080e7          	jalr	442(ra) # 536a <exit>
-
-00000000000011b8 <copyinstr2>:
-{
-    11b8:	7155                	addi	sp,sp,-208
-    11ba:	e586                	sd	ra,200(sp)
-    11bc:	e1a2                	sd	s0,192(sp)
-    11be:	0980                	addi	s0,sp,208
+    11a6:	4501                	li	a0,0
+    11a8:	00004097          	auipc	ra,0x4
+    11ac:	69a080e7          	jalr	1690(ra) # 5842 <exit>
+
+00000000000011b0 <copyinstr2>:
+{
+    11b0:	7155                	addi	sp,sp,-208
+    11b2:	e586                	sd	ra,200(sp)
+    11b4:	e1a2                	sd	s0,192(sp)
+    11b6:	0980                	addi	s0,sp,208
   for(int i = 0; i < MAXPATH; i++)
-    11c0:	f6840793          	addi	a5,s0,-152
-    11c4:	fe840693          	addi	a3,s0,-24
+    11b8:	f6840793          	addi	a5,s0,-152
+    11bc:	fe840693          	addi	a3,s0,-24
     b[i] = 'x';
-    11c8:	07800713          	li	a4,120
-    11cc:	00e78023          	sb	a4,0(a5)
+    11c0:	07800713          	li	a4,120
+    11c4:	00e78023          	sb	a4,0(a5)
   for(int i = 0; i < MAXPATH; i++)
-    11d0:	0785                	addi	a5,a5,1
-    11d2:	fed79de3          	bne	a5,a3,11cc <copyinstr2+0x14>
+    11c8:	0785                	addi	a5,a5,1
+    11ca:	fed79de3          	bne	a5,a3,11c4 <copyinstr2+0x14>
   b[MAXPATH] = '\0';
-    11d6:	fe040423          	sb	zero,-24(s0)
+    11ce:	fe040423          	sb	zero,-24(s0)
   int ret = unlink(b);
-    11da:	f6840513          	addi	a0,s0,-152
-    11de:	00004097          	auipc	ra,0x4
-    11e2:	1dc080e7          	jalr	476(ra) # 53ba <unlink>
+    11d2:	f6840513          	addi	a0,s0,-152
+    11d6:	00004097          	auipc	ra,0x4
+    11da:	6bc080e7          	jalr	1724(ra) # 5892 <unlink>
   if(ret != -1){
-    11e6:	57fd                	li	a5,-1
-    11e8:	0ef51063          	bne	a0,a5,12c8 <copyinstr2+0x110>
+    11de:	57fd                	li	a5,-1
+    11e0:	0ef51063          	bne	a0,a5,12c0 <copyinstr2+0x110>
   int fd = open(b, O_CREATE | O_WRONLY);
-    11ec:	20100593          	li	a1,513
-    11f0:	f6840513          	addi	a0,s0,-152
-    11f4:	00004097          	auipc	ra,0x4
-    11f8:	1b6080e7          	jalr	438(ra) # 53aa <open>
+    11e4:	20100593          	li	a1,513
+    11e8:	f6840513          	addi	a0,s0,-152
+    11ec:	00004097          	auipc	ra,0x4
+    11f0:	696080e7          	jalr	1686(ra) # 5882 <open>
   if(fd != -1){
-    11fc:	57fd                	li	a5,-1
-    11fe:	0ef51563          	bne	a0,a5,12e8 <copyinstr2+0x130>
+    11f4:	57fd                	li	a5,-1
+    11f6:	0ef51563          	bne	a0,a5,12e0 <copyinstr2+0x130>
   ret = link(b, b);
-    1202:	f6840593          	addi	a1,s0,-152
-    1206:	852e                	mv	a0,a1
-    1208:	00004097          	auipc	ra,0x4
-    120c:	1c2080e7          	jalr	450(ra) # 53ca <link>
+    11fa:	f6840593          	addi	a1,s0,-152
+    11fe:	852e                	mv	a0,a1
+    1200:	00004097          	auipc	ra,0x4
+    1204:	6a2080e7          	jalr	1698(ra) # 58a2 <link>
   if(ret != -1){
-    1210:	57fd                	li	a5,-1
-    1212:	0ef51b63          	bne	a0,a5,1308 <copyinstr2+0x150>
+    1208:	57fd                	li	a5,-1
+    120a:	0ef51b63          	bne	a0,a5,1300 <copyinstr2+0x150>
   char *args[] = { "xx", 0 };
-    1216:	00006797          	auipc	a5,0x6
-    121a:	eca78793          	addi	a5,a5,-310 # 70e0 <malloc+0x1944>
-    121e:	f4f43c23          	sd	a5,-168(s0)
-    1222:	f6043023          	sd	zero,-160(s0)
+    120e:	00006797          	auipc	a5,0x6
+    1212:	4ea78793          	addi	a5,a5,1258 # 76f8 <malloc+0x1a74>
+    1216:	f4f43c23          	sd	a5,-168(s0)
+    121a:	f6043023          	sd	zero,-160(s0)
   ret = exec(b, args);
-    1226:	f5840593          	addi	a1,s0,-168
-    122a:	f6840513          	addi	a0,s0,-152
-    122e:	00004097          	auipc	ra,0x4
-    1232:	174080e7          	jalr	372(ra) # 53a2 <exec>
+    121e:	f5840593          	addi	a1,s0,-168
+    1222:	f6840513          	addi	a0,s0,-152
+    1226:	00004097          	auipc	ra,0x4
+    122a:	654080e7          	jalr	1620(ra) # 587a <exec>
   if(ret != -1){
-    1236:	57fd                	li	a5,-1
-    1238:	0ef51963          	bne	a0,a5,132a <copyinstr2+0x172>
+    122e:	57fd                	li	a5,-1
+    1230:	0ef51963          	bne	a0,a5,1322 <copyinstr2+0x172>
   int pid = fork();
-    123c:	00004097          	auipc	ra,0x4
-    1240:	126080e7          	jalr	294(ra) # 5362 <fork>
+    1234:	00004097          	auipc	ra,0x4
+    1238:	606080e7          	jalr	1542(ra) # 583a <fork>
   if(pid < 0){
-    1244:	10054363          	bltz	a0,134a <copyinstr2+0x192>
+    123c:	10054363          	bltz	a0,1342 <copyinstr2+0x192>
   if(pid == 0){
-    1248:	12051463          	bnez	a0,1370 <copyinstr2+0x1b8>
-    124c:	00007797          	auipc	a5,0x7
-    1250:	e1c78793          	addi	a5,a5,-484 # 8068 <big.0>
-    1254:	00008697          	auipc	a3,0x8
-    1258:	e1468693          	addi	a3,a3,-492 # 9068 <__global_pointer$+0x920>
+    1240:	12051463          	bnez	a0,1368 <copyinstr2+0x1b8>
+    1244:	00007797          	auipc	a5,0x7
+    1248:	48c78793          	addi	a5,a5,1164 # 86d0 <big.0>
+    124c:	00008697          	auipc	a3,0x8
+    1250:	48468693          	addi	a3,a3,1156 # 96d0 <__global_pointer$+0x910>
       big[i] = 'x';
-    125c:	07800713          	li	a4,120
-    1260:	00e78023          	sb	a4,0(a5)
+    1254:	07800713          	li	a4,120
+    1258:	00e78023          	sb	a4,0(a5)
     for(int i = 0; i < PGSIZE; i++)
-    1264:	0785                	addi	a5,a5,1
-    1266:	fed79de3          	bne	a5,a3,1260 <copyinstr2+0xa8>
+    125c:	0785                	addi	a5,a5,1
+    125e:	fed79de3          	bne	a5,a3,1258 <copyinstr2+0xa8>
     big[PGSIZE] = '\0';
-    126a:	00008797          	auipc	a5,0x8
-    126e:	de078f23          	sb	zero,-514(a5) # 9068 <__global_pointer$+0x920>
+    1262:	00008797          	auipc	a5,0x8
+    1266:	46078723          	sb	zero,1134(a5) # 96d0 <__global_pointer$+0x910>
     char *args2[] = { big, big, big, 0 };
-    1272:	00007797          	auipc	a5,0x7
-    1276:	8be78793          	addi	a5,a5,-1858 # 7b30 <malloc+0x2394>
-    127a:	6390                	ld	a2,0(a5)
-    127c:	6794                	ld	a3,8(a5)
-    127e:	6b98                	ld	a4,16(a5)
-    1280:	6f9c                	ld	a5,24(a5)
-    1282:	f2c43823          	sd	a2,-208(s0)
-    1286:	f2d43c23          	sd	a3,-200(s0)
-    128a:	f4e43023          	sd	a4,-192(s0)
-    128e:	f4f43423          	sd	a5,-184(s0)
+    126a:	00007797          	auipc	a5,0x7
+    126e:	ece78793          	addi	a5,a5,-306 # 8138 <malloc+0x24b4>
+    1272:	6390                	ld	a2,0(a5)
+    1274:	6794                	ld	a3,8(a5)
+    1276:	6b98                	ld	a4,16(a5)
+    1278:	6f9c                	ld	a5,24(a5)
+    127a:	f2c43823          	sd	a2,-208(s0)
+    127e:	f2d43c23          	sd	a3,-200(s0)
+    1282:	f4e43023          	sd	a4,-192(s0)
+    1286:	f4f43423          	sd	a5,-184(s0)
     ret = exec("echo", args2);
-    1292:	f3040593          	addi	a1,s0,-208
-    1296:	00004517          	auipc	a0,0x4
-    129a:	62a50513          	addi	a0,a0,1578 # 58c0 <malloc+0x124>
-    129e:	00004097          	auipc	ra,0x4
-    12a2:	104080e7          	jalr	260(ra) # 53a2 <exec>
+    128a:	f3040593          	addi	a1,s0,-208
+    128e:	00005517          	auipc	a0,0x5
+    1292:	b1a50513          	addi	a0,a0,-1254 # 5da8 <malloc+0x124>
+    1296:	00004097          	auipc	ra,0x4
+    129a:	5e4080e7          	jalr	1508(ra) # 587a <exec>
     if(ret != -1){
-    12a6:	57fd                	li	a5,-1
-    12a8:	0af50e63          	beq	a0,a5,1364 <copyinstr2+0x1ac>
+    129e:	57fd                	li	a5,-1
+    12a0:	0af50e63          	beq	a0,a5,135c <copyinstr2+0x1ac>
       printf("exec(echo, BIG) returned %d, not -1\n", fd);
-    12ac:	55fd                	li	a1,-1
-    12ae:	00005517          	auipc	a0,0x5
-    12b2:	e1250513          	addi	a0,a0,-494 # 60c0 <malloc+0x924>
-    12b6:	00004097          	auipc	ra,0x4
-    12ba:	42e080e7          	jalr	1070(ra) # 56e4 <printf>
-      exit(1);
-    12be:	4505                	li	a0,1
-    12c0:	00004097          	auipc	ra,0x4
-    12c4:	0aa080e7          	jalr	170(ra) # 536a <exit>
+    12a4:	55fd                	li	a1,-1
+    12a6:	00005517          	auipc	a0,0x5
+    12aa:	30250513          	addi	a0,a0,770 # 65a8 <malloc+0x924>
+    12ae:	00005097          	auipc	ra,0x5
+    12b2:	91e080e7          	jalr	-1762(ra) # 5bcc <printf>
+      exit(1);
+    12b6:	4505                	li	a0,1
+    12b8:	00004097          	auipc	ra,0x4
+    12bc:	58a080e7          	jalr	1418(ra) # 5842 <exit>
     printf("unlink(%s) returned %d, not -1\n", b, ret);
-    12c8:	862a                	mv	a2,a0
-    12ca:	f6840593          	addi	a1,s0,-152
-    12ce:	00005517          	auipc	a0,0x5
-    12d2:	d6a50513          	addi	a0,a0,-662 # 6038 <malloc+0x89c>
-    12d6:	00004097          	auipc	ra,0x4
-    12da:	40e080e7          	jalr	1038(ra) # 56e4 <printf>
-    exit(1);
-    12de:	4505                	li	a0,1
-    12e0:	00004097          	auipc	ra,0x4
-    12e4:	08a080e7          	jalr	138(ra) # 536a <exit>
+    12c0:	862a                	mv	a2,a0
+    12c2:	f6840593          	addi	a1,s0,-152
+    12c6:	00005517          	auipc	a0,0x5
+    12ca:	25a50513          	addi	a0,a0,602 # 6520 <malloc+0x89c>
+    12ce:	00005097          	auipc	ra,0x5
+    12d2:	8fe080e7          	jalr	-1794(ra) # 5bcc <printf>
+    exit(1);
+    12d6:	4505                	li	a0,1
+    12d8:	00004097          	auipc	ra,0x4
+    12dc:	56a080e7          	jalr	1386(ra) # 5842 <exit>
     printf("open(%s) returned %d, not -1\n", b, fd);
-    12e8:	862a                	mv	a2,a0
-    12ea:	f6840593          	addi	a1,s0,-152
-    12ee:	00005517          	auipc	a0,0x5
-    12f2:	d6a50513          	addi	a0,a0,-662 # 6058 <malloc+0x8bc>
-    12f6:	00004097          	auipc	ra,0x4
-    12fa:	3ee080e7          	jalr	1006(ra) # 56e4 <printf>
-    exit(1);
-    12fe:	4505                	li	a0,1
-    1300:	00004097          	auipc	ra,0x4
-    1304:	06a080e7          	jalr	106(ra) # 536a <exit>
+    12e0:	862a                	mv	a2,a0
+    12e2:	f6840593          	addi	a1,s0,-152
+    12e6:	00005517          	auipc	a0,0x5
+    12ea:	25a50513          	addi	a0,a0,602 # 6540 <malloc+0x8bc>
+    12ee:	00005097          	auipc	ra,0x5
+    12f2:	8de080e7          	jalr	-1826(ra) # 5bcc <printf>
+    exit(1);
+    12f6:	4505                	li	a0,1
+    12f8:	00004097          	auipc	ra,0x4
+    12fc:	54a080e7          	jalr	1354(ra) # 5842 <exit>
     printf("link(%s, %s) returned %d, not -1\n", b, b, ret);
-    1308:	86aa                	mv	a3,a0
-    130a:	f6840613          	addi	a2,s0,-152
-    130e:	85b2                	mv	a1,a2
-    1310:	00005517          	auipc	a0,0x5
-    1314:	d6850513          	addi	a0,a0,-664 # 6078 <malloc+0x8dc>
-    1318:	00004097          	auipc	ra,0x4
-    131c:	3cc080e7          	jalr	972(ra) # 56e4 <printf>
-    exit(1);
-    1320:	4505                	li	a0,1
-    1322:	00004097          	auipc	ra,0x4
-    1326:	048080e7          	jalr	72(ra) # 536a <exit>
+    1300:	86aa                	mv	a3,a0
+    1302:	f6840613          	addi	a2,s0,-152
+    1306:	85b2                	mv	a1,a2
+    1308:	00005517          	auipc	a0,0x5
+    130c:	25850513          	addi	a0,a0,600 # 6560 <malloc+0x8dc>
+    1310:	00005097          	auipc	ra,0x5
+    1314:	8bc080e7          	jalr	-1860(ra) # 5bcc <printf>
+    exit(1);
+    1318:	4505                	li	a0,1
+    131a:	00004097          	auipc	ra,0x4
+    131e:	528080e7          	jalr	1320(ra) # 5842 <exit>
     printf("exec(%s) returned %d, not -1\n", b, fd);
-    132a:	567d                	li	a2,-1
-    132c:	f6840593          	addi	a1,s0,-152
-    1330:	00005517          	auipc	a0,0x5
-    1334:	d7050513          	addi	a0,a0,-656 # 60a0 <malloc+0x904>
-    1338:	00004097          	auipc	ra,0x4
-    133c:	3ac080e7          	jalr	940(ra) # 56e4 <printf>
-    exit(1);
-    1340:	4505                	li	a0,1
-    1342:	00004097          	auipc	ra,0x4
-    1346:	028080e7          	jalr	40(ra) # 536a <exit>
+    1322:	567d                	li	a2,-1
+    1324:	f6840593          	addi	a1,s0,-152
+    1328:	00005517          	auipc	a0,0x5
+    132c:	26050513          	addi	a0,a0,608 # 6588 <malloc+0x904>
+    1330:	00005097          	auipc	ra,0x5
+    1334:	89c080e7          	jalr	-1892(ra) # 5bcc <printf>
+    exit(1);
+    1338:	4505                	li	a0,1
+    133a:	00004097          	auipc	ra,0x4
+    133e:	508080e7          	jalr	1288(ra) # 5842 <exit>
     printf("fork failed\n");
-    134a:	00005517          	auipc	a0,0x5
-    134e:	1be50513          	addi	a0,a0,446 # 6508 <malloc+0xd6c>
-    1352:	00004097          	auipc	ra,0x4
-    1356:	392080e7          	jalr	914(ra) # 56e4 <printf>
-    exit(1);
-    135a:	4505                	li	a0,1
-    135c:	00004097          	auipc	ra,0x4
-    1360:	00e080e7          	jalr	14(ra) # 536a <exit>
+    1342:	00005517          	auipc	a0,0x5
+    1346:	6de50513          	addi	a0,a0,1758 # 6a20 <malloc+0xd9c>
+    134a:	00005097          	auipc	ra,0x5
+    134e:	882080e7          	jalr	-1918(ra) # 5bcc <printf>
+    exit(1);
+    1352:	4505                	li	a0,1
+    1354:	00004097          	auipc	ra,0x4
+    1358:	4ee080e7          	jalr	1262(ra) # 5842 <exit>
     exit(747); // OK
-    1364:	2eb00513          	li	a0,747
-    1368:	00004097          	auipc	ra,0x4
-    136c:	002080e7          	jalr	2(ra) # 536a <exit>
+    135c:	2eb00513          	li	a0,747
+    1360:	00004097          	auipc	ra,0x4
+    1364:	4e2080e7          	jalr	1250(ra) # 5842 <exit>
   int st = 0;
-    1370:	f4042a23          	sw	zero,-172(s0)
+    1368:	f4042a23          	sw	zero,-172(s0)
   wait(&st);
-    1374:	f5440513          	addi	a0,s0,-172
-    1378:	00004097          	auipc	ra,0x4
-    137c:	ffa080e7          	jalr	-6(ra) # 5372 <wait>
+    136c:	f5440513          	addi	a0,s0,-172
+    1370:	00004097          	auipc	ra,0x4
+    1374:	4da080e7          	jalr	1242(ra) # 584a <wait>
   if(st != 747){
-    1380:	f5442703          	lw	a4,-172(s0)
-    1384:	2eb00793          	li	a5,747
-    1388:	00f71663          	bne	a4,a5,1394 <copyinstr2+0x1dc>
-}
-    138c:	60ae                	ld	ra,200(sp)
-    138e:	640e                	ld	s0,192(sp)
-    1390:	6169                	addi	sp,sp,208
-    1392:	8082                	ret
+    1378:	f5442703          	lw	a4,-172(s0)
+    137c:	2eb00793          	li	a5,747
+    1380:	00f71663          	bne	a4,a5,138c <copyinstr2+0x1dc>
+}
+    1384:	60ae                	ld	ra,200(sp)
+    1386:	640e                	ld	s0,192(sp)
+    1388:	6169                	addi	sp,sp,208
+    138a:	8082                	ret
     printf("exec(echo, BIG) succeeded, should have failed\n");
-    1394:	00005517          	auipc	a0,0x5
-    1398:	d5450513          	addi	a0,a0,-684 # 60e8 <malloc+0x94c>
-    139c:	00004097          	auipc	ra,0x4
-    13a0:	348080e7          	jalr	840(ra) # 56e4 <printf>
-    exit(1);
-    13a4:	4505                	li	a0,1
-    13a6:	00004097          	auipc	ra,0x4
-    13aa:	fc4080e7          	jalr	-60(ra) # 536a <exit>
-
-00000000000013ae <truncate3>:
-{
-    13ae:	7159                	addi	sp,sp,-112
-    13b0:	f486                	sd	ra,104(sp)
-    13b2:	f0a2                	sd	s0,96(sp)
-    13b4:	eca6                	sd	s1,88(sp)
-    13b6:	e8ca                	sd	s2,80(sp)
-    13b8:	e4ce                	sd	s3,72(sp)
-    13ba:	e0d2                	sd	s4,64(sp)
-    13bc:	fc56                	sd	s5,56(sp)
-    13be:	1880                	addi	s0,sp,112
-    13c0:	892a                	mv	s2,a0
+    138c:	00005517          	auipc	a0,0x5
+    1390:	24450513          	addi	a0,a0,580 # 65d0 <malloc+0x94c>
+    1394:	00005097          	auipc	ra,0x5
+    1398:	838080e7          	jalr	-1992(ra) # 5bcc <printf>
+    exit(1);
+    139c:	4505                	li	a0,1
+    139e:	00004097          	auipc	ra,0x4
+    13a2:	4a4080e7          	jalr	1188(ra) # 5842 <exit>
+
+00000000000013a6 <truncate3>:
+{
+    13a6:	7159                	addi	sp,sp,-112
+    13a8:	f486                	sd	ra,104(sp)
+    13aa:	f0a2                	sd	s0,96(sp)
+    13ac:	eca6                	sd	s1,88(sp)
+    13ae:	e8ca                	sd	s2,80(sp)
+    13b0:	e4ce                	sd	s3,72(sp)
+    13b2:	e0d2                	sd	s4,64(sp)
+    13b4:	fc56                	sd	s5,56(sp)
+    13b6:	1880                	addi	s0,sp,112
+    13b8:	892a                	mv	s2,a0
   close(open("truncfile", O_CREATE|O_TRUNC|O_WRONLY));
-    13c2:	60100593          	li	a1,1537
-    13c6:	00004517          	auipc	a0,0x4
-    13ca:	55250513          	addi	a0,a0,1362 # 5918 <malloc+0x17c>
+    13ba:	60100593          	li	a1,1537
+    13be:	00005517          	auipc	a0,0x5
+    13c2:	a4250513          	addi	a0,a0,-1470 # 5e00 <malloc+0x17c>
+    13c6:	00004097          	auipc	ra,0x4
+    13ca:	4bc080e7          	jalr	1212(ra) # 5882 <open>
     13ce:	00004097          	auipc	ra,0x4
-    13d2:	fdc080e7          	jalr	-36(ra) # 53aa <open>
-    13d6:	00004097          	auipc	ra,0x4
-    13da:	fbc080e7          	jalr	-68(ra) # 5392 <close>
+    13d2:	49c080e7          	jalr	1180(ra) # 586a <close>
   pid = fork();
-    13de:	00004097          	auipc	ra,0x4
-    13e2:	f84080e7          	jalr	-124(ra) # 5362 <fork>
+    13d6:	00004097          	auipc	ra,0x4
+    13da:	464080e7          	jalr	1124(ra) # 583a <fork>
   if(pid < 0){
-    13e6:	08054063          	bltz	a0,1466 <truncate3+0xb8>
+    13de:	08054063          	bltz	a0,145e <truncate3+0xb8>
   if(pid == 0){
-    13ea:	e969                	bnez	a0,14bc <truncate3+0x10e>
-    13ec:	06400993          	li	s3,100
+    13e2:	e969                	bnez	a0,14b4 <truncate3+0x10e>
+    13e4:	06400993          	li	s3,100
       int fd = open("truncfile", O_WRONLY);
-    13f0:	00004a17          	auipc	s4,0x4
-    13f4:	528a0a13          	addi	s4,s4,1320 # 5918 <malloc+0x17c>
+    13e8:	00005a17          	auipc	s4,0x5
+    13ec:	a18a0a13          	addi	s4,s4,-1512 # 5e00 <malloc+0x17c>
       int n = write(fd, "1234567890", 10);
-    13f8:	00005a97          	auipc	s5,0x5
-    13fc:	d50a8a93          	addi	s5,s5,-688 # 6148 <malloc+0x9ac>
+    13f0:	00005a97          	auipc	s5,0x5
+    13f4:	240a8a93          	addi	s5,s5,576 # 6630 <malloc+0x9ac>
       int fd = open("truncfile", O_WRONLY);
-    1400:	4585                	li	a1,1
-    1402:	8552                	mv	a0,s4
-    1404:	00004097          	auipc	ra,0x4
-    1408:	fa6080e7          	jalr	-90(ra) # 53aa <open>
-    140c:	84aa                	mv	s1,a0
+    13f8:	4585                	li	a1,1
+    13fa:	8552                	mv	a0,s4
+    13fc:	00004097          	auipc	ra,0x4
+    1400:	486080e7          	jalr	1158(ra) # 5882 <open>
+    1404:	84aa                	mv	s1,a0
       if(fd < 0){
-    140e:	06054a63          	bltz	a0,1482 <truncate3+0xd4>
+    1406:	06054a63          	bltz	a0,147a <truncate3+0xd4>
       int n = write(fd, "1234567890", 10);
-    1412:	4629                	li	a2,10
-    1414:	85d6                	mv	a1,s5
-    1416:	00004097          	auipc	ra,0x4
-    141a:	f74080e7          	jalr	-140(ra) # 538a <write>
+    140a:	4629                	li	a2,10
+    140c:	85d6                	mv	a1,s5
+    140e:	00004097          	auipc	ra,0x4
+    1412:	454080e7          	jalr	1108(ra) # 5862 <write>
       if(n != 10){
-    141e:	47a9                	li	a5,10
-    1420:	06f51f63          	bne	a0,a5,149e <truncate3+0xf0>
+    1416:	47a9                	li	a5,10
+    1418:	06f51f63          	bne	a0,a5,1496 <truncate3+0xf0>
       close(fd);
-    1424:	8526                	mv	a0,s1
-    1426:	00004097          	auipc	ra,0x4
-    142a:	f6c080e7          	jalr	-148(ra) # 5392 <close>
+    141c:	8526                	mv	a0,s1
+    141e:	00004097          	auipc	ra,0x4
+    1422:	44c080e7          	jalr	1100(ra) # 586a <close>
       fd = open("truncfile", O_RDONLY);
-    142e:	4581                	li	a1,0
-    1430:	8552                	mv	a0,s4
-    1432:	00004097          	auipc	ra,0x4
-    1436:	f78080e7          	jalr	-136(ra) # 53aa <open>
-    143a:	84aa                	mv	s1,a0
+    1426:	4581                	li	a1,0
+    1428:	8552                	mv	a0,s4
+    142a:	00004097          	auipc	ra,0x4
+    142e:	458080e7          	jalr	1112(ra) # 5882 <open>
+    1432:	84aa                	mv	s1,a0
       read(fd, buf, sizeof(buf));
-    143c:	02000613          	li	a2,32
-    1440:	f9840593          	addi	a1,s0,-104
-    1444:	00004097          	auipc	ra,0x4
-    1448:	f3e080e7          	jalr	-194(ra) # 5382 <read>
+    1434:	02000613          	li	a2,32
+    1438:	f9840593          	addi	a1,s0,-104
+    143c:	00004097          	auipc	ra,0x4
+    1440:	41e080e7          	jalr	1054(ra) # 585a <read>
       close(fd);
-    144c:	8526                	mv	a0,s1
-    144e:	00004097          	auipc	ra,0x4
-    1452:	f44080e7          	jalr	-188(ra) # 5392 <close>
+    1444:	8526                	mv	a0,s1
+    1446:	00004097          	auipc	ra,0x4
+    144a:	424080e7          	jalr	1060(ra) # 586a <close>
     for(int i = 0; i < 100; i++){
-    1456:	39fd                	addiw	s3,s3,-1
-    1458:	fa0994e3          	bnez	s3,1400 <truncate3+0x52>
+    144e:	39fd                	addiw	s3,s3,-1
+    1450:	fa0994e3          	bnez	s3,13f8 <truncate3+0x52>
     exit(0);
-    145c:	4501                	li	a0,0
-    145e:	00004097          	auipc	ra,0x4
-    1462:	f0c080e7          	jalr	-244(ra) # 536a <exit>
+    1454:	4501                	li	a0,0
+    1456:	00004097          	auipc	ra,0x4
+    145a:	3ec080e7          	jalr	1004(ra) # 5842 <exit>
     printf("%s: fork failed\n", s);
-    1466:	85ca                	mv	a1,s2
-    1468:	00005517          	auipc	a0,0x5
-    146c:	cb050513          	addi	a0,a0,-848 # 6118 <malloc+0x97c>
-    1470:	00004097          	auipc	ra,0x4
-    1474:	274080e7          	jalr	628(ra) # 56e4 <printf>
-    exit(1);
-    1478:	4505                	li	a0,1
-    147a:	00004097          	auipc	ra,0x4
-    147e:	ef0080e7          	jalr	-272(ra) # 536a <exit>
+    145e:	85ca                	mv	a1,s2
+    1460:	00005517          	auipc	a0,0x5
+    1464:	1a050513          	addi	a0,a0,416 # 6600 <malloc+0x97c>
+    1468:	00004097          	auipc	ra,0x4
+    146c:	764080e7          	jalr	1892(ra) # 5bcc <printf>
+    exit(1);
+    1470:	4505                	li	a0,1
+    1472:	00004097          	auipc	ra,0x4
+    1476:	3d0080e7          	jalr	976(ra) # 5842 <exit>
         printf("%s: open failed\n", s);
-    1482:	85ca                	mv	a1,s2
-    1484:	00005517          	auipc	a0,0x5
-    1488:	cac50513          	addi	a0,a0,-852 # 6130 <malloc+0x994>
-    148c:	00004097          	auipc	ra,0x4
-    1490:	258080e7          	jalr	600(ra) # 56e4 <printf>
+    147a:	85ca                	mv	a1,s2
+    147c:	00005517          	auipc	a0,0x5
+    1480:	19c50513          	addi	a0,a0,412 # 6618 <malloc+0x994>
+    1484:	00004097          	auipc	ra,0x4
+    1488:	748080e7          	jalr	1864(ra) # 5bcc <printf>
         exit(1);
-    1494:	4505                	li	a0,1
-    1496:	00004097          	auipc	ra,0x4
-    149a:	ed4080e7          	jalr	-300(ra) # 536a <exit>
+    148c:	4505                	li	a0,1
+    148e:	00004097          	auipc	ra,0x4
+    1492:	3b4080e7          	jalr	948(ra) # 5842 <exit>
         printf("%s: write got %d, expected 10\n", s, n);
-    149e:	862a                	mv	a2,a0
-    14a0:	85ca                	mv	a1,s2
-    14a2:	00005517          	auipc	a0,0x5
-    14a6:	cb650513          	addi	a0,a0,-842 # 6158 <malloc+0x9bc>
-    14aa:	00004097          	auipc	ra,0x4
-    14ae:	23a080e7          	jalr	570(ra) # 56e4 <printf>
+    1496:	862a                	mv	a2,a0
+    1498:	85ca                	mv	a1,s2
+    149a:	00005517          	auipc	a0,0x5
+    149e:	1a650513          	addi	a0,a0,422 # 6640 <malloc+0x9bc>
+    14a2:	00004097          	auipc	ra,0x4
+    14a6:	72a080e7          	jalr	1834(ra) # 5bcc <printf>
         exit(1);
-    14b2:	4505                	li	a0,1
-    14b4:	00004097          	auipc	ra,0x4
-    14b8:	eb6080e7          	jalr	-330(ra) # 536a <exit>
-    14bc:	09600993          	li	s3,150
+    14aa:	4505                	li	a0,1
+    14ac:	00004097          	auipc	ra,0x4
+    14b0:	396080e7          	jalr	918(ra) # 5842 <exit>
+    14b4:	09600993          	li	s3,150
     int fd = open("truncfile", O_CREATE|O_WRONLY|O_TRUNC);
-    14c0:	00004a17          	auipc	s4,0x4
-    14c4:	458a0a13          	addi	s4,s4,1112 # 5918 <malloc+0x17c>
+    14b8:	00005a17          	auipc	s4,0x5
+    14bc:	948a0a13          	addi	s4,s4,-1720 # 5e00 <malloc+0x17c>
     int n = write(fd, "xxx", 3);
-    14c8:	00005a97          	auipc	s5,0x5
-    14cc:	cb0a8a93          	addi	s5,s5,-848 # 6178 <malloc+0x9dc>
+    14c0:	00005a97          	auipc	s5,0x5
+    14c4:	1a0a8a93          	addi	s5,s5,416 # 6660 <malloc+0x9dc>
     int fd = open("truncfile", O_CREATE|O_WRONLY|O_TRUNC);
-    14d0:	60100593          	li	a1,1537
-    14d4:	8552                	mv	a0,s4
-    14d6:	00004097          	auipc	ra,0x4
-    14da:	ed4080e7          	jalr	-300(ra) # 53aa <open>
-    14de:	84aa                	mv	s1,a0
+    14c8:	60100593          	li	a1,1537
+    14cc:	8552                	mv	a0,s4
+    14ce:	00004097          	auipc	ra,0x4
+    14d2:	3b4080e7          	jalr	948(ra) # 5882 <open>
+    14d6:	84aa                	mv	s1,a0
     if(fd < 0){
-    14e0:	04054763          	bltz	a0,152e <truncate3+0x180>
+    14d8:	04054763          	bltz	a0,1526 <truncate3+0x180>
     int n = write(fd, "xxx", 3);
-    14e4:	460d                	li	a2,3
-    14e6:	85d6                	mv	a1,s5
-    14e8:	00004097          	auipc	ra,0x4
-    14ec:	ea2080e7          	jalr	-350(ra) # 538a <write>
+    14dc:	460d                	li	a2,3
+    14de:	85d6                	mv	a1,s5
+    14e0:	00004097          	auipc	ra,0x4
+    14e4:	382080e7          	jalr	898(ra) # 5862 <write>
     if(n != 3){
-    14f0:	478d                	li	a5,3
-    14f2:	04f51c63          	bne	a0,a5,154a <truncate3+0x19c>
+    14e8:	478d                	li	a5,3
+    14ea:	04f51c63          	bne	a0,a5,1542 <truncate3+0x19c>
     close(fd);
-    14f6:	8526                	mv	a0,s1
-    14f8:	00004097          	auipc	ra,0x4
-    14fc:	e9a080e7          	jalr	-358(ra) # 5392 <close>
+    14ee:	8526                	mv	a0,s1
+    14f0:	00004097          	auipc	ra,0x4
+    14f4:	37a080e7          	jalr	890(ra) # 586a <close>
   for(int i = 0; i < 150; i++){
-    1500:	39fd                	addiw	s3,s3,-1
-    1502:	fc0997e3          	bnez	s3,14d0 <truncate3+0x122>
+    14f8:	39fd                	addiw	s3,s3,-1
+    14fa:	fc0997e3          	bnez	s3,14c8 <truncate3+0x122>
   wait(&xstatus);
-    1506:	fbc40513          	addi	a0,s0,-68
-    150a:	00004097          	auipc	ra,0x4
-    150e:	e68080e7          	jalr	-408(ra) # 5372 <wait>
+    14fe:	fbc40513          	addi	a0,s0,-68
+    1502:	00004097          	auipc	ra,0x4
+    1506:	348080e7          	jalr	840(ra) # 584a <wait>
   unlink("truncfile");
-    1512:	00004517          	auipc	a0,0x4
-    1516:	40650513          	addi	a0,a0,1030 # 5918 <malloc+0x17c>
-    151a:	00004097          	auipc	ra,0x4
-    151e:	ea0080e7          	jalr	-352(ra) # 53ba <unlink>
+    150a:	00005517          	auipc	a0,0x5
+    150e:	8f650513          	addi	a0,a0,-1802 # 5e00 <malloc+0x17c>
+    1512:	00004097          	auipc	ra,0x4
+    1516:	380080e7          	jalr	896(ra) # 5892 <unlink>
   exit(xstatus);
-    1522:	fbc42503          	lw	a0,-68(s0)
-    1526:	00004097          	auipc	ra,0x4
-    152a:	e44080e7          	jalr	-444(ra) # 536a <exit>
+    151a:	fbc42503          	lw	a0,-68(s0)
+    151e:	00004097          	auipc	ra,0x4
+    1522:	324080e7          	jalr	804(ra) # 5842 <exit>
       printf("%s: open failed\n", s);
-    152e:	85ca                	mv	a1,s2
-    1530:	00005517          	auipc	a0,0x5
-    1534:	c0050513          	addi	a0,a0,-1024 # 6130 <malloc+0x994>
-    1538:	00004097          	auipc	ra,0x4
-    153c:	1ac080e7          	jalr	428(ra) # 56e4 <printf>
-      exit(1);
-    1540:	4505                	li	a0,1
-    1542:	00004097          	auipc	ra,0x4
-    1546:	e28080e7          	jalr	-472(ra) # 536a <exit>
+    1526:	85ca                	mv	a1,s2
+    1528:	00005517          	auipc	a0,0x5
+    152c:	0f050513          	addi	a0,a0,240 # 6618 <malloc+0x994>
+    1530:	00004097          	auipc	ra,0x4
+    1534:	69c080e7          	jalr	1692(ra) # 5bcc <printf>
+      exit(1);
+    1538:	4505                	li	a0,1
+    153a:	00004097          	auipc	ra,0x4
+    153e:	308080e7          	jalr	776(ra) # 5842 <exit>
       printf("%s: write got %d, expected 3\n", s, n);
-    154a:	862a                	mv	a2,a0
-    154c:	85ca                	mv	a1,s2
-    154e:	00005517          	auipc	a0,0x5
-    1552:	c3250513          	addi	a0,a0,-974 # 6180 <malloc+0x9e4>
-    1556:	00004097          	auipc	ra,0x4
-    155a:	18e080e7          	jalr	398(ra) # 56e4 <printf>
-      exit(1);
-    155e:	4505                	li	a0,1
-    1560:	00004097          	auipc	ra,0x4
-    1564:	e0a080e7          	jalr	-502(ra) # 536a <exit>
-
-0000000000001568 <exectest>:
-{
-    1568:	715d                	addi	sp,sp,-80
-    156a:	e486                	sd	ra,72(sp)
-    156c:	e0a2                	sd	s0,64(sp)
-    156e:	fc26                	sd	s1,56(sp)
-    1570:	f84a                	sd	s2,48(sp)
-    1572:	0880                	addi	s0,sp,80
-    1574:	892a                	mv	s2,a0
+    1542:	862a                	mv	a2,a0
+    1544:	85ca                	mv	a1,s2
+    1546:	00005517          	auipc	a0,0x5
+    154a:	12250513          	addi	a0,a0,290 # 6668 <malloc+0x9e4>
+    154e:	00004097          	auipc	ra,0x4
+    1552:	67e080e7          	jalr	1662(ra) # 5bcc <printf>
+      exit(1);
+    1556:	4505                	li	a0,1
+    1558:	00004097          	auipc	ra,0x4
+    155c:	2ea080e7          	jalr	746(ra) # 5842 <exit>
+
+0000000000001560 <exectest>:
+{
+    1560:	715d                	addi	sp,sp,-80
+    1562:	e486                	sd	ra,72(sp)
+    1564:	e0a2                	sd	s0,64(sp)
+    1566:	fc26                	sd	s1,56(sp)
+    1568:	f84a                	sd	s2,48(sp)
+    156a:	0880                	addi	s0,sp,80
+    156c:	892a                	mv	s2,a0
   char *echoargv[] = { "echo", "OK", 0 };
-    1576:	00004797          	auipc	a5,0x4
-    157a:	34a78793          	addi	a5,a5,842 # 58c0 <malloc+0x124>
-    157e:	fcf43023          	sd	a5,-64(s0)
-    1582:	00005797          	auipc	a5,0x5
-    1586:	c1e78793          	addi	a5,a5,-994 # 61a0 <malloc+0xa04>
-    158a:	fcf43423          	sd	a5,-56(s0)
-    158e:	fc043823          	sd	zero,-48(s0)
+    156e:	00005797          	auipc	a5,0x5
+    1572:	83a78793          	addi	a5,a5,-1990 # 5da8 <malloc+0x124>
+    1576:	fcf43023          	sd	a5,-64(s0)
+    157a:	00005797          	auipc	a5,0x5
+    157e:	10e78793          	addi	a5,a5,270 # 6688 <malloc+0xa04>
+    1582:	fcf43423          	sd	a5,-56(s0)
+    1586:	fc043823          	sd	zero,-48(s0)
   unlink("echo-ok");
-    1592:	00005517          	auipc	a0,0x5
-    1596:	c1650513          	addi	a0,a0,-1002 # 61a8 <malloc+0xa0c>
-    159a:	00004097          	auipc	ra,0x4
-    159e:	e20080e7          	jalr	-480(ra) # 53ba <unlink>
+    158a:	00005517          	auipc	a0,0x5
+    158e:	10650513          	addi	a0,a0,262 # 6690 <malloc+0xa0c>
+    1592:	00004097          	auipc	ra,0x4
+    1596:	300080e7          	jalr	768(ra) # 5892 <unlink>
   pid = fork();
-    15a2:	00004097          	auipc	ra,0x4
-    15a6:	dc0080e7          	jalr	-576(ra) # 5362 <fork>
+    159a:	00004097          	auipc	ra,0x4
+    159e:	2a0080e7          	jalr	672(ra) # 583a <fork>
   if(pid < 0) {
-    15aa:	04054663          	bltz	a0,15f6 <exectest+0x8e>
-    15ae:	84aa                	mv	s1,a0
+    15a2:	04054663          	bltz	a0,15ee <exectest+0x8e>
+    15a6:	84aa                	mv	s1,a0
   if(pid == 0) {
-    15b0:	e959                	bnez	a0,1646 <exectest+0xde>
+    15a8:	e959                	bnez	a0,163e <exectest+0xde>
     close(1);
-    15b2:	4505                	li	a0,1
-    15b4:	00004097          	auipc	ra,0x4
-    15b8:	dde080e7          	jalr	-546(ra) # 5392 <close>
+    15aa:	4505                	li	a0,1
+    15ac:	00004097          	auipc	ra,0x4
+    15b0:	2be080e7          	jalr	702(ra) # 586a <close>
     fd = open("echo-ok", O_CREATE|O_WRONLY);
-    15bc:	20100593          	li	a1,513
-    15c0:	00005517          	auipc	a0,0x5
-    15c4:	be850513          	addi	a0,a0,-1048 # 61a8 <malloc+0xa0c>
-    15c8:	00004097          	auipc	ra,0x4
-    15cc:	de2080e7          	jalr	-542(ra) # 53aa <open>
+    15b4:	20100593          	li	a1,513
+    15b8:	00005517          	auipc	a0,0x5
+    15bc:	0d850513          	addi	a0,a0,216 # 6690 <malloc+0xa0c>
+    15c0:	00004097          	auipc	ra,0x4
+    15c4:	2c2080e7          	jalr	706(ra) # 5882 <open>
     if(fd < 0) {
-    15d0:	04054163          	bltz	a0,1612 <exectest+0xaa>
+    15c8:	04054163          	bltz	a0,160a <exectest+0xaa>
     if(fd != 1) {
-    15d4:	4785                	li	a5,1
-    15d6:	04f50c63          	beq	a0,a5,162e <exectest+0xc6>
+    15cc:	4785                	li	a5,1
+    15ce:	04f50c63          	beq	a0,a5,1626 <exectest+0xc6>
       printf("%s: wrong fd\n", s);
-    15da:	85ca                	mv	a1,s2
-    15dc:	00005517          	auipc	a0,0x5
-    15e0:	bec50513          	addi	a0,a0,-1044 # 61c8 <malloc+0xa2c>
-    15e4:	00004097          	auipc	ra,0x4
-    15e8:	100080e7          	jalr	256(ra) # 56e4 <printf>
-      exit(1);
-    15ec:	4505                	li	a0,1
-    15ee:	00004097          	auipc	ra,0x4
-    15f2:	d7c080e7          	jalr	-644(ra) # 536a <exit>
+    15d2:	85ca                	mv	a1,s2
+    15d4:	00005517          	auipc	a0,0x5
+    15d8:	0dc50513          	addi	a0,a0,220 # 66b0 <malloc+0xa2c>
+    15dc:	00004097          	auipc	ra,0x4
+    15e0:	5f0080e7          	jalr	1520(ra) # 5bcc <printf>
+      exit(1);
+    15e4:	4505                	li	a0,1
+    15e6:	00004097          	auipc	ra,0x4
+    15ea:	25c080e7          	jalr	604(ra) # 5842 <exit>
      printf("%s: fork failed\n", s);
-    15f6:	85ca                	mv	a1,s2
-    15f8:	00005517          	auipc	a0,0x5
-    15fc:	b2050513          	addi	a0,a0,-1248 # 6118 <malloc+0x97c>
-    1600:	00004097          	auipc	ra,0x4
-    1604:	0e4080e7          	jalr	228(ra) # 56e4 <printf>
+    15ee:	85ca                	mv	a1,s2
+    15f0:	00005517          	auipc	a0,0x5
+    15f4:	01050513          	addi	a0,a0,16 # 6600 <malloc+0x97c>
+    15f8:	00004097          	auipc	ra,0x4
+    15fc:	5d4080e7          	jalr	1492(ra) # 5bcc <printf>
      exit(1);
-    1608:	4505                	li	a0,1
-    160a:	00004097          	auipc	ra,0x4
-    160e:	d60080e7          	jalr	-672(ra) # 536a <exit>
+    1600:	4505                	li	a0,1
+    1602:	00004097          	auipc	ra,0x4
+    1606:	240080e7          	jalr	576(ra) # 5842 <exit>
       printf("%s: create failed\n", s);
-    1612:	85ca                	mv	a1,s2
-    1614:	00005517          	auipc	a0,0x5
-    1618:	b9c50513          	addi	a0,a0,-1124 # 61b0 <malloc+0xa14>
-    161c:	00004097          	auipc	ra,0x4
-    1620:	0c8080e7          	jalr	200(ra) # 56e4 <printf>
-      exit(1);
-    1624:	4505                	li	a0,1
-    1626:	00004097          	auipc	ra,0x4
-    162a:	d44080e7          	jalr	-700(ra) # 536a <exit>
+    160a:	85ca                	mv	a1,s2
+    160c:	00005517          	auipc	a0,0x5
+    1610:	08c50513          	addi	a0,a0,140 # 6698 <malloc+0xa14>
+    1614:	00004097          	auipc	ra,0x4
+    1618:	5b8080e7          	jalr	1464(ra) # 5bcc <printf>
+      exit(1);
+    161c:	4505                	li	a0,1
+    161e:	00004097          	auipc	ra,0x4
+    1622:	224080e7          	jalr	548(ra) # 5842 <exit>
     if(exec("echo", echoargv) < 0){
-    162e:	fc040593          	addi	a1,s0,-64
-    1632:	00004517          	auipc	a0,0x4
-    1636:	28e50513          	addi	a0,a0,654 # 58c0 <malloc+0x124>
-    163a:	00004097          	auipc	ra,0x4
-    163e:	d68080e7          	jalr	-664(ra) # 53a2 <exec>
-    1642:	02054163          	bltz	a0,1664 <exectest+0xfc>
+    1626:	fc040593          	addi	a1,s0,-64
+    162a:	00004517          	auipc	a0,0x4
+    162e:	77e50513          	addi	a0,a0,1918 # 5da8 <malloc+0x124>
+    1632:	00004097          	auipc	ra,0x4
+    1636:	248080e7          	jalr	584(ra) # 587a <exec>
+    163a:	02054163          	bltz	a0,165c <exectest+0xfc>
   if (wait(&xstatus) != pid) {
-    1646:	fdc40513          	addi	a0,s0,-36
-    164a:	00004097          	auipc	ra,0x4
-    164e:	d28080e7          	jalr	-728(ra) # 5372 <wait>
-    1652:	02951763          	bne	a0,s1,1680 <exectest+0x118>
+    163e:	fdc40513          	addi	a0,s0,-36
+    1642:	00004097          	auipc	ra,0x4
+    1646:	208080e7          	jalr	520(ra) # 584a <wait>
+    164a:	02951763          	bne	a0,s1,1678 <exectest+0x118>
   if(xstatus != 0)
-    1656:	fdc42503          	lw	a0,-36(s0)
-    165a:	cd0d                	beqz	a0,1694 <exectest+0x12c>
+    164e:	fdc42503          	lw	a0,-36(s0)
+    1652:	cd0d                	beqz	a0,168c <exectest+0x12c>
     exit(xstatus);
-    165c:	00004097          	auipc	ra,0x4
-    1660:	d0e080e7          	jalr	-754(ra) # 536a <exit>
+    1654:	00004097          	auipc	ra,0x4
+    1658:	1ee080e7          	jalr	494(ra) # 5842 <exit>
       printf("%s: exec echo failed\n", s);
-    1664:	85ca                	mv	a1,s2
-    1666:	00005517          	auipc	a0,0x5
-    166a:	b7250513          	addi	a0,a0,-1166 # 61d8 <malloc+0xa3c>
-    166e:	00004097          	auipc	ra,0x4
-    1672:	076080e7          	jalr	118(ra) # 56e4 <printf>
-      exit(1);
-    1676:	4505                	li	a0,1
-    1678:	00004097          	auipc	ra,0x4
-    167c:	cf2080e7          	jalr	-782(ra) # 536a <exit>
+    165c:	85ca                	mv	a1,s2
+    165e:	00005517          	auipc	a0,0x5
+    1662:	06250513          	addi	a0,a0,98 # 66c0 <malloc+0xa3c>
+    1666:	00004097          	auipc	ra,0x4
+    166a:	566080e7          	jalr	1382(ra) # 5bcc <printf>
+      exit(1);
+    166e:	4505                	li	a0,1
+    1670:	00004097          	auipc	ra,0x4
+    1674:	1d2080e7          	jalr	466(ra) # 5842 <exit>
     printf("%s: wait failed!\n", s);
-    1680:	85ca                	mv	a1,s2
-    1682:	00005517          	auipc	a0,0x5
-    1686:	b6e50513          	addi	a0,a0,-1170 # 61f0 <malloc+0xa54>
-    168a:	00004097          	auipc	ra,0x4
-    168e:	05a080e7          	jalr	90(ra) # 56e4 <printf>
-    1692:	b7d1                	j	1656 <exectest+0xee>
+    1678:	85ca                	mv	a1,s2
+    167a:	00005517          	auipc	a0,0x5
+    167e:	05e50513          	addi	a0,a0,94 # 66d8 <malloc+0xa54>
+    1682:	00004097          	auipc	ra,0x4
+    1686:	54a080e7          	jalr	1354(ra) # 5bcc <printf>
+    168a:	b7d1                	j	164e <exectest+0xee>
   fd = open("echo-ok", O_RDONLY);
-    1694:	4581                	li	a1,0
-    1696:	00005517          	auipc	a0,0x5
-    169a:	b1250513          	addi	a0,a0,-1262 # 61a8 <malloc+0xa0c>
-    169e:	00004097          	auipc	ra,0x4
-    16a2:	d0c080e7          	jalr	-756(ra) # 53aa <open>
+    168c:	4581                	li	a1,0
+    168e:	00005517          	auipc	a0,0x5
+    1692:	00250513          	addi	a0,a0,2 # 6690 <malloc+0xa0c>
+    1696:	00004097          	auipc	ra,0x4
+    169a:	1ec080e7          	jalr	492(ra) # 5882 <open>
   if(fd < 0) {
-    16a6:	02054a63          	bltz	a0,16da <exectest+0x172>
+    169e:	02054a63          	bltz	a0,16d2 <exectest+0x172>
   if (read(fd, buf, 2) != 2) {
-    16aa:	4609                	li	a2,2
-    16ac:	fb840593          	addi	a1,s0,-72
-    16b0:	00004097          	auipc	ra,0x4
-    16b4:	cd2080e7          	jalr	-814(ra) # 5382 <read>
-    16b8:	4789                	li	a5,2
-    16ba:	02f50e63          	beq	a0,a5,16f6 <exectest+0x18e>
+    16a2:	4609                	li	a2,2
+    16a4:	fb840593          	addi	a1,s0,-72
+    16a8:	00004097          	auipc	ra,0x4
+    16ac:	1b2080e7          	jalr	434(ra) # 585a <read>
+    16b0:	4789                	li	a5,2
+    16b2:	02f50e63          	beq	a0,a5,16ee <exectest+0x18e>
     printf("%s: read failed\n", s);
-    16be:	85ca                	mv	a1,s2
-    16c0:	00004517          	auipc	a0,0x4
-    16c4:	5a050513          	addi	a0,a0,1440 # 5c60 <malloc+0x4c4>
-    16c8:	00004097          	auipc	ra,0x4
-    16cc:	01c080e7          	jalr	28(ra) # 56e4 <printf>
-    exit(1);
-    16d0:	4505                	li	a0,1
-    16d2:	00004097          	auipc	ra,0x4
-    16d6:	c98080e7          	jalr	-872(ra) # 536a <exit>
+    16b6:	85ca                	mv	a1,s2
+    16b8:	00005517          	auipc	a0,0x5
+    16bc:	a9050513          	addi	a0,a0,-1392 # 6148 <malloc+0x4c4>
+    16c0:	00004097          	auipc	ra,0x4
+    16c4:	50c080e7          	jalr	1292(ra) # 5bcc <printf>
+    exit(1);
+    16c8:	4505                	li	a0,1
+    16ca:	00004097          	auipc	ra,0x4
+    16ce:	178080e7          	jalr	376(ra) # 5842 <exit>
     printf("%s: open failed\n", s);
-    16da:	85ca                	mv	a1,s2
-    16dc:	00005517          	auipc	a0,0x5
-    16e0:	a5450513          	addi	a0,a0,-1452 # 6130 <malloc+0x994>
-    16e4:	00004097          	auipc	ra,0x4
-    16e8:	000080e7          	jalr	ra # 56e4 <printf>
-    exit(1);
-    16ec:	4505                	li	a0,1
-    16ee:	00004097          	auipc	ra,0x4
-    16f2:	c7c080e7          	jalr	-900(ra) # 536a <exit>
+    16d2:	85ca                	mv	a1,s2
+    16d4:	00005517          	auipc	a0,0x5
+    16d8:	f4450513          	addi	a0,a0,-188 # 6618 <malloc+0x994>
+    16dc:	00004097          	auipc	ra,0x4
+    16e0:	4f0080e7          	jalr	1264(ra) # 5bcc <printf>
+    exit(1);
+    16e4:	4505                	li	a0,1
+    16e6:	00004097          	auipc	ra,0x4
+    16ea:	15c080e7          	jalr	348(ra) # 5842 <exit>
   unlink("echo-ok");
-    16f6:	00005517          	auipc	a0,0x5
-    16fa:	ab250513          	addi	a0,a0,-1358 # 61a8 <malloc+0xa0c>
-    16fe:	00004097          	auipc	ra,0x4
-    1702:	cbc080e7          	jalr	-836(ra) # 53ba <unlink>
+    16ee:	00005517          	auipc	a0,0x5
+    16f2:	fa250513          	addi	a0,a0,-94 # 6690 <malloc+0xa0c>
+    16f6:	00004097          	auipc	ra,0x4
+    16fa:	19c080e7          	jalr	412(ra) # 5892 <unlink>
   if(buf[0] == 'O' && buf[1] == 'K')
-    1706:	fb844703          	lbu	a4,-72(s0)
-    170a:	04f00793          	li	a5,79
-    170e:	00f71863          	bne	a4,a5,171e <exectest+0x1b6>
-    1712:	fb944703          	lbu	a4,-71(s0)
-    1716:	04b00793          	li	a5,75
-    171a:	02f70063          	beq	a4,a5,173a <exectest+0x1d2>
+    16fe:	fb844703          	lbu	a4,-72(s0)
+    1702:	04f00793          	li	a5,79
+    1706:	00f71863          	bne	a4,a5,1716 <exectest+0x1b6>
+    170a:	fb944703          	lbu	a4,-71(s0)
+    170e:	04b00793          	li	a5,75
+    1712:	02f70063          	beq	a4,a5,1732 <exectest+0x1d2>
     printf("%s: wrong output\n", s);
-    171e:	85ca                	mv	a1,s2
-    1720:	00005517          	auipc	a0,0x5
-    1724:	ae850513          	addi	a0,a0,-1304 # 6208 <malloc+0xa6c>
-    1728:	00004097          	auipc	ra,0x4
-    172c:	fbc080e7          	jalr	-68(ra) # 56e4 <printf>
-    exit(1);
-    1730:	4505                	li	a0,1
-    1732:	00004097          	auipc	ra,0x4
-    1736:	c38080e7          	jalr	-968(ra) # 536a <exit>
+    1716:	85ca                	mv	a1,s2
+    1718:	00005517          	auipc	a0,0x5
+    171c:	fd850513          	addi	a0,a0,-40 # 66f0 <malloc+0xa6c>
+    1720:	00004097          	auipc	ra,0x4
+    1724:	4ac080e7          	jalr	1196(ra) # 5bcc <printf>
+    exit(1);
+    1728:	4505                	li	a0,1
+    172a:	00004097          	auipc	ra,0x4
+    172e:	118080e7          	jalr	280(ra) # 5842 <exit>
     exit(0);
-    173a:	4501                	li	a0,0
-    173c:	00004097          	auipc	ra,0x4
-    1740:	c2e080e7          	jalr	-978(ra) # 536a <exit>
-
-0000000000001744 <pipe1>:
-{
-    1744:	711d                	addi	sp,sp,-96
-    1746:	ec86                	sd	ra,88(sp)
-    1748:	e8a2                	sd	s0,80(sp)
-    174a:	e4a6                	sd	s1,72(sp)
-    174c:	e0ca                	sd	s2,64(sp)
-    174e:	fc4e                	sd	s3,56(sp)
-    1750:	f852                	sd	s4,48(sp)
-    1752:	f456                	sd	s5,40(sp)
-    1754:	f05a                	sd	s6,32(sp)
-    1756:	ec5e                	sd	s7,24(sp)
-    1758:	1080                	addi	s0,sp,96
-    175a:	892a                	mv	s2,a0
+    1732:	4501                	li	a0,0
+    1734:	00004097          	auipc	ra,0x4
+    1738:	10e080e7          	jalr	270(ra) # 5842 <exit>
+
+000000000000173c <pipe1>:
+{
+    173c:	711d                	addi	sp,sp,-96
+    173e:	ec86                	sd	ra,88(sp)
+    1740:	e8a2                	sd	s0,80(sp)
+    1742:	e4a6                	sd	s1,72(sp)
+    1744:	e0ca                	sd	s2,64(sp)
+    1746:	fc4e                	sd	s3,56(sp)
+    1748:	f852                	sd	s4,48(sp)
+    174a:	f456                	sd	s5,40(sp)
+    174c:	f05a                	sd	s6,32(sp)
+    174e:	ec5e                	sd	s7,24(sp)
+    1750:	1080                	addi	s0,sp,96
+    1752:	892a                	mv	s2,a0
   if(pipe(fds) != 0){
-    175c:	fa840513          	addi	a0,s0,-88
-    1760:	00004097          	auipc	ra,0x4
-    1764:	c1a080e7          	jalr	-998(ra) # 537a <pipe>
-    1768:	e93d                	bnez	a0,17de <pipe1+0x9a>
-    176a:	84aa                	mv	s1,a0
+    1754:	fa840513          	addi	a0,s0,-88
+    1758:	00004097          	auipc	ra,0x4
+    175c:	0fa080e7          	jalr	250(ra) # 5852 <pipe>
+    1760:	e93d                	bnez	a0,17d6 <pipe1+0x9a>
+    1762:	84aa                	mv	s1,a0
   pid = fork();
-    176c:	00004097          	auipc	ra,0x4
-    1770:	bf6080e7          	jalr	-1034(ra) # 5362 <fork>
-    1774:	8a2a                	mv	s4,a0
+    1764:	00004097          	auipc	ra,0x4
+    1768:	0d6080e7          	jalr	214(ra) # 583a <fork>
+    176c:	8a2a                	mv	s4,a0
   if(pid == 0){
-    1776:	c151                	beqz	a0,17fa <pipe1+0xb6>
+    176e:	c151                	beqz	a0,17f2 <pipe1+0xb6>
   } else if(pid > 0){
-    1778:	16a05d63          	blez	a0,18f2 <pipe1+0x1ae>
+    1770:	16a05d63          	blez	a0,18ea <pipe1+0x1ae>
     close(fds[1]);
-    177c:	fac42503          	lw	a0,-84(s0)
-    1780:	00004097          	auipc	ra,0x4
-    1784:	c12080e7          	jalr	-1006(ra) # 5392 <close>
+    1774:	fac42503          	lw	a0,-84(s0)
+    1778:	00004097          	auipc	ra,0x4
+    177c:	0f2080e7          	jalr	242(ra) # 586a <close>
     total = 0;
-    1788:	8a26                	mv	s4,s1
+    1780:	8a26                	mv	s4,s1
     cc = 1;
-    178a:	4985                	li	s3,1
+    1782:	4985                	li	s3,1
     while((n = read(fds[0], buf, cc)) > 0){
-    178c:	0000aa97          	auipc	s5,0xa
-    1790:	ff4a8a93          	addi	s5,s5,-12 # b780 <buf>
+    1784:	0000aa97          	auipc	s5,0xa
+    1788:	664a8a93          	addi	s5,s5,1636 # bde8 <buf>
       if(cc > sizeof(buf))
-    1794:	6b0d                	lui	s6,0x3
+    178c:	6b0d                	lui	s6,0x3
     while((n = read(fds[0], buf, cc)) > 0){
-    1796:	864e                	mv	a2,s3
-    1798:	85d6                	mv	a1,s5
-    179a:	fa842503          	lw	a0,-88(s0)
-    179e:	00004097          	auipc	ra,0x4
-    17a2:	be4080e7          	jalr	-1052(ra) # 5382 <read>
-    17a6:	10a05163          	blez	a0,18a8 <pipe1+0x164>
+    178e:	864e                	mv	a2,s3
+    1790:	85d6                	mv	a1,s5
+    1792:	fa842503          	lw	a0,-88(s0)
+    1796:	00004097          	auipc	ra,0x4
+    179a:	0c4080e7          	jalr	196(ra) # 585a <read>
+    179e:	10a05163          	blez	a0,18a0 <pipe1+0x164>
       for(i = 0; i < n; i++){
-    17aa:	0000a717          	auipc	a4,0xa
-    17ae:	fd670713          	addi	a4,a4,-42 # b780 <buf>
-    17b2:	00a4863b          	addw	a2,s1,a0
+    17a2:	0000a717          	auipc	a4,0xa
+    17a6:	64670713          	addi	a4,a4,1606 # bde8 <buf>
+    17aa:	00a4863b          	addw	a2,s1,a0
         if((buf[i] & 0xff) != (seq++ & 0xff)){
-    17b6:	00074683          	lbu	a3,0(a4)
-    17ba:	0ff4f793          	zext.b	a5,s1
-    17be:	2485                	addiw	s1,s1,1
-    17c0:	0cf69063          	bne	a3,a5,1880 <pipe1+0x13c>
+    17ae:	00074683          	lbu	a3,0(a4)
+    17b2:	0ff4f793          	zext.b	a5,s1
+    17b6:	2485                	addiw	s1,s1,1
+    17b8:	0cf69063          	bne	a3,a5,1878 <pipe1+0x13c>
       for(i = 0; i < n; i++){
-    17c4:	0705                	addi	a4,a4,1
-    17c6:	fec498e3          	bne	s1,a2,17b6 <pipe1+0x72>
+    17bc:	0705                	addi	a4,a4,1
+    17be:	fec498e3          	bne	s1,a2,17ae <pipe1+0x72>
       total += n;
-    17ca:	00aa0a3b          	addw	s4,s4,a0
+    17c2:	00aa0a3b          	addw	s4,s4,a0
       cc = cc * 2;
-    17ce:	0019979b          	slliw	a5,s3,0x1
-    17d2:	0007899b          	sext.w	s3,a5
+    17c6:	0019979b          	slliw	a5,s3,0x1
+    17ca:	0007899b          	sext.w	s3,a5
       if(cc > sizeof(buf))
-    17d6:	fd3b70e3          	bgeu	s6,s3,1796 <pipe1+0x52>
+    17ce:	fd3b70e3          	bgeu	s6,s3,178e <pipe1+0x52>
         cc = sizeof(buf);
-    17da:	89da                	mv	s3,s6
-    17dc:	bf6d                	j	1796 <pipe1+0x52>
+    17d2:	89da                	mv	s3,s6
+    17d4:	bf6d                	j	178e <pipe1+0x52>
     printf("%s: pipe() failed\n", s);
-    17de:	85ca                	mv	a1,s2
-    17e0:	00005517          	auipc	a0,0x5
-    17e4:	a4050513          	addi	a0,a0,-1472 # 6220 <malloc+0xa84>
-    17e8:	00004097          	auipc	ra,0x4
-    17ec:	efc080e7          	jalr	-260(ra) # 56e4 <printf>
-    exit(1);
-    17f0:	4505                	li	a0,1
-    17f2:	00004097          	auipc	ra,0x4
-    17f6:	b78080e7          	jalr	-1160(ra) # 536a <exit>
+    17d6:	85ca                	mv	a1,s2
+    17d8:	00005517          	auipc	a0,0x5
+    17dc:	f3050513          	addi	a0,a0,-208 # 6708 <malloc+0xa84>
+    17e0:	00004097          	auipc	ra,0x4
+    17e4:	3ec080e7          	jalr	1004(ra) # 5bcc <printf>
+    exit(1);
+    17e8:	4505                	li	a0,1
+    17ea:	00004097          	auipc	ra,0x4
+    17ee:	058080e7          	jalr	88(ra) # 5842 <exit>
     close(fds[0]);
-    17fa:	fa842503          	lw	a0,-88(s0)
-    17fe:	00004097          	auipc	ra,0x4
-    1802:	b94080e7          	jalr	-1132(ra) # 5392 <close>
+    17f2:	fa842503          	lw	a0,-88(s0)
+    17f6:	00004097          	auipc	ra,0x4
+    17fa:	074080e7          	jalr	116(ra) # 586a <close>
     for(n = 0; n < N; n++){
-    1806:	0000ab17          	auipc	s6,0xa
-    180a:	f7ab0b13          	addi	s6,s6,-134 # b780 <buf>
-    180e:	416004bb          	negw	s1,s6
-    1812:	0ff4f493          	zext.b	s1,s1
-    1816:	409b0993          	addi	s3,s6,1033
+    17fe:	0000ab17          	auipc	s6,0xa
+    1802:	5eab0b13          	addi	s6,s6,1514 # bde8 <buf>
+    1806:	416004bb          	negw	s1,s6
+    180a:	0ff4f493          	zext.b	s1,s1
+    180e:	409b0993          	addi	s3,s6,1033
       if(write(fds[1], buf, SZ) != SZ){
-    181a:	8bda                	mv	s7,s6
+    1812:	8bda                	mv	s7,s6
     for(n = 0; n < N; n++){
-    181c:	6a85                	lui	s5,0x1
-    181e:	42da8a93          	addi	s5,s5,1069 # 142d <truncate3+0x7f>
+    1814:	6a85                	lui	s5,0x1
+    1816:	42da8a93          	addi	s5,s5,1069 # 142d <truncate3+0x87>
 {
-    1822:	87da                	mv	a5,s6
+    181a:	87da                	mv	a5,s6
         buf[i] = seq++;
-    1824:	0097873b          	addw	a4,a5,s1
-    1828:	00e78023          	sb	a4,0(a5)
+    181c:	0097873b          	addw	a4,a5,s1
+    1820:	00e78023          	sb	a4,0(a5)
       for(i = 0; i < SZ; i++)
-    182c:	0785                	addi	a5,a5,1
-    182e:	fef99be3          	bne	s3,a5,1824 <pipe1+0xe0>
+    1824:	0785                	addi	a5,a5,1
+    1826:	fef99be3          	bne	s3,a5,181c <pipe1+0xe0>
         buf[i] = seq++;
-    1832:	409a0a1b          	addiw	s4,s4,1033
+    182a:	409a0a1b          	addiw	s4,s4,1033
       if(write(fds[1], buf, SZ) != SZ){
-    1836:	40900613          	li	a2,1033
-    183a:	85de                	mv	a1,s7
-    183c:	fac42503          	lw	a0,-84(s0)
-    1840:	00004097          	auipc	ra,0x4
-    1844:	b4a080e7          	jalr	-1206(ra) # 538a <write>
-    1848:	40900793          	li	a5,1033
-    184c:	00f51c63          	bne	a0,a5,1864 <pipe1+0x120>
+    182e:	40900613          	li	a2,1033
+    1832:	85de                	mv	a1,s7
+    1834:	fac42503          	lw	a0,-84(s0)
+    1838:	00004097          	auipc	ra,0x4
+    183c:	02a080e7          	jalr	42(ra) # 5862 <write>
+    1840:	40900793          	li	a5,1033
+    1844:	00f51c63          	bne	a0,a5,185c <pipe1+0x120>
     for(n = 0; n < N; n++){
-    1850:	24a5                	addiw	s1,s1,9
-    1852:	0ff4f493          	zext.b	s1,s1
-    1856:	fd5a16e3          	bne	s4,s5,1822 <pipe1+0xde>
+    1848:	24a5                	addiw	s1,s1,9
+    184a:	0ff4f493          	zext.b	s1,s1
+    184e:	fd5a16e3          	bne	s4,s5,181a <pipe1+0xde>
     exit(0);
-    185a:	4501                	li	a0,0
-    185c:	00004097          	auipc	ra,0x4
-    1860:	b0e080e7          	jalr	-1266(ra) # 536a <exit>
+    1852:	4501                	li	a0,0
+    1854:	00004097          	auipc	ra,0x4
+    1858:	fee080e7          	jalr	-18(ra) # 5842 <exit>
         printf("%s: pipe1 oops 1\n", s);
-    1864:	85ca                	mv	a1,s2
-    1866:	00005517          	auipc	a0,0x5
-    186a:	9d250513          	addi	a0,a0,-1582 # 6238 <malloc+0xa9c>
-    186e:	00004097          	auipc	ra,0x4
-    1872:	e76080e7          	jalr	-394(ra) # 56e4 <printf>
+    185c:	85ca                	mv	a1,s2
+    185e:	00005517          	auipc	a0,0x5
+    1862:	ec250513          	addi	a0,a0,-318 # 6720 <malloc+0xa9c>
+    1866:	00004097          	auipc	ra,0x4
+    186a:	366080e7          	jalr	870(ra) # 5bcc <printf>
         exit(1);
-    1876:	4505                	li	a0,1
-    1878:	00004097          	auipc	ra,0x4
-    187c:	af2080e7          	jalr	-1294(ra) # 536a <exit>
+    186e:	4505                	li	a0,1
+    1870:	00004097          	auipc	ra,0x4
+    1874:	fd2080e7          	jalr	-46(ra) # 5842 <exit>
           printf("%s: pipe1 oops 2\n", s);
-    1880:	85ca                	mv	a1,s2
-    1882:	00005517          	auipc	a0,0x5
-    1886:	9ce50513          	addi	a0,a0,-1586 # 6250 <malloc+0xab4>
-    188a:	00004097          	auipc	ra,0x4
-    188e:	e5a080e7          	jalr	-422(ra) # 56e4 <printf>
-}
-    1892:	60e6                	ld	ra,88(sp)
-    1894:	6446                	ld	s0,80(sp)
-    1896:	64a6                	ld	s1,72(sp)
-    1898:	6906                	ld	s2,64(sp)
-    189a:	79e2                	ld	s3,56(sp)
-    189c:	7a42                	ld	s4,48(sp)
-    189e:	7aa2                	ld	s5,40(sp)
-    18a0:	7b02                	ld	s6,32(sp)
-    18a2:	6be2                	ld	s7,24(sp)
-    18a4:	6125                	addi	sp,sp,96
-    18a6:	8082                	ret
+    1878:	85ca                	mv	a1,s2
+    187a:	00005517          	auipc	a0,0x5
+    187e:	ebe50513          	addi	a0,a0,-322 # 6738 <malloc+0xab4>
+    1882:	00004097          	auipc	ra,0x4
+    1886:	34a080e7          	jalr	842(ra) # 5bcc <printf>
+}
+    188a:	60e6                	ld	ra,88(sp)
+    188c:	6446                	ld	s0,80(sp)
+    188e:	64a6                	ld	s1,72(sp)
+    1890:	6906                	ld	s2,64(sp)
+    1892:	79e2                	ld	s3,56(sp)
+    1894:	7a42                	ld	s4,48(sp)
+    1896:	7aa2                	ld	s5,40(sp)
+    1898:	7b02                	ld	s6,32(sp)
+    189a:	6be2                	ld	s7,24(sp)
+    189c:	6125                	addi	sp,sp,96
+    189e:	8082                	ret
     if(total != N * SZ){
-    18a8:	6785                	lui	a5,0x1
-    18aa:	42d78793          	addi	a5,a5,1069 # 142d <truncate3+0x7f>
-    18ae:	02fa0063          	beq	s4,a5,18ce <pipe1+0x18a>
+    18a0:	6785                	lui	a5,0x1
+    18a2:	42d78793          	addi	a5,a5,1069 # 142d <truncate3+0x87>
+    18a6:	02fa0063          	beq	s4,a5,18c6 <pipe1+0x18a>
       printf("%s: pipe1 oops 3 total %d\n", total);
-    18b2:	85d2                	mv	a1,s4
-    18b4:	00005517          	auipc	a0,0x5
-    18b8:	9b450513          	addi	a0,a0,-1612 # 6268 <malloc+0xacc>
-    18bc:	00004097          	auipc	ra,0x4
-    18c0:	e28080e7          	jalr	-472(ra) # 56e4 <printf>
-      exit(1);
-    18c4:	4505                	li	a0,1
-    18c6:	00004097          	auipc	ra,0x4
-    18ca:	aa4080e7          	jalr	-1372(ra) # 536a <exit>
+    18aa:	85d2                	mv	a1,s4
+    18ac:	00005517          	auipc	a0,0x5
+    18b0:	ea450513          	addi	a0,a0,-348 # 6750 <malloc+0xacc>
+    18b4:	00004097          	auipc	ra,0x4
+    18b8:	318080e7          	jalr	792(ra) # 5bcc <printf>
+      exit(1);
+    18bc:	4505                	li	a0,1
+    18be:	00004097          	auipc	ra,0x4
+    18c2:	f84080e7          	jalr	-124(ra) # 5842 <exit>
     close(fds[0]);
-    18ce:	fa842503          	lw	a0,-88(s0)
-    18d2:	00004097          	auipc	ra,0x4
-    18d6:	ac0080e7          	jalr	-1344(ra) # 5392 <close>
+    18c6:	fa842503          	lw	a0,-88(s0)
+    18ca:	00004097          	auipc	ra,0x4
+    18ce:	fa0080e7          	jalr	-96(ra) # 586a <close>
     wait(&xstatus);
-    18da:	fa440513          	addi	a0,s0,-92
-    18de:	00004097          	auipc	ra,0x4
-    18e2:	a94080e7          	jalr	-1388(ra) # 5372 <wait>
+    18d2:	fa440513          	addi	a0,s0,-92
+    18d6:	00004097          	auipc	ra,0x4
+    18da:	f74080e7          	jalr	-140(ra) # 584a <wait>
     exit(xstatus);
-    18e6:	fa442503          	lw	a0,-92(s0)
-    18ea:	00004097          	auipc	ra,0x4
-    18ee:	a80080e7          	jalr	-1408(ra) # 536a <exit>
+    18de:	fa442503          	lw	a0,-92(s0)
+    18e2:	00004097          	auipc	ra,0x4
+    18e6:	f60080e7          	jalr	-160(ra) # 5842 <exit>
     printf("%s: fork() failed\n", s);
-    18f2:	85ca                	mv	a1,s2
-    18f4:	00005517          	auipc	a0,0x5
-    18f8:	99450513          	addi	a0,a0,-1644 # 6288 <malloc+0xaec>
-    18fc:	00004097          	auipc	ra,0x4
-    1900:	de8080e7          	jalr	-536(ra) # 56e4 <printf>
-    exit(1);
-    1904:	4505                	li	a0,1
-    1906:	00004097          	auipc	ra,0x4
-    190a:	a64080e7          	jalr	-1436(ra) # 536a <exit>
-
-000000000000190e <exitwait>:
-{
-    190e:	7139                	addi	sp,sp,-64
-    1910:	fc06                	sd	ra,56(sp)
-    1912:	f822                	sd	s0,48(sp)
-    1914:	f426                	sd	s1,40(sp)
-    1916:	f04a                	sd	s2,32(sp)
-    1918:	ec4e                	sd	s3,24(sp)
-    191a:	e852                	sd	s4,16(sp)
-    191c:	0080                	addi	s0,sp,64
-    191e:	8a2a                	mv	s4,a0
+    18ea:	85ca                	mv	a1,s2
+    18ec:	00005517          	auipc	a0,0x5
+    18f0:	e8450513          	addi	a0,a0,-380 # 6770 <malloc+0xaec>
+    18f4:	00004097          	auipc	ra,0x4
+    18f8:	2d8080e7          	jalr	728(ra) # 5bcc <printf>
+    exit(1);
+    18fc:	4505                	li	a0,1
+    18fe:	00004097          	auipc	ra,0x4
+    1902:	f44080e7          	jalr	-188(ra) # 5842 <exit>
+
+0000000000001906 <exitwait>:
+{
+    1906:	7139                	addi	sp,sp,-64
+    1908:	fc06                	sd	ra,56(sp)
+    190a:	f822                	sd	s0,48(sp)
+    190c:	f426                	sd	s1,40(sp)
+    190e:	f04a                	sd	s2,32(sp)
+    1910:	ec4e                	sd	s3,24(sp)
+    1912:	e852                	sd	s4,16(sp)
+    1914:	0080                	addi	s0,sp,64
+    1916:	8a2a                	mv	s4,a0
   for(i = 0; i < 100; i++){
-    1920:	4901                	li	s2,0
-    1922:	06400993          	li	s3,100
+    1918:	4901                	li	s2,0
+    191a:	06400993          	li	s3,100
     pid = fork();
-    1926:	00004097          	auipc	ra,0x4
-    192a:	a3c080e7          	jalr	-1476(ra) # 5362 <fork>
-    192e:	84aa                	mv	s1,a0
+    191e:	00004097          	auipc	ra,0x4
+    1922:	f1c080e7          	jalr	-228(ra) # 583a <fork>
+    1926:	84aa                	mv	s1,a0
     if(pid < 0){
-    1930:	02054a63          	bltz	a0,1964 <exitwait+0x56>
+    1928:	02054a63          	bltz	a0,195c <exitwait+0x56>
     if(pid){
-    1934:	c151                	beqz	a0,19b8 <exitwait+0xaa>
+    192c:	c151                	beqz	a0,19b0 <exitwait+0xaa>
       if(wait(&xstate) != pid){
-    1936:	fcc40513          	addi	a0,s0,-52
-    193a:	00004097          	auipc	ra,0x4
-    193e:	a38080e7          	jalr	-1480(ra) # 5372 <wait>
-    1942:	02951f63          	bne	a0,s1,1980 <exitwait+0x72>
+    192e:	fcc40513          	addi	a0,s0,-52
+    1932:	00004097          	auipc	ra,0x4
+    1936:	f18080e7          	jalr	-232(ra) # 584a <wait>
+    193a:	02951f63          	bne	a0,s1,1978 <exitwait+0x72>
       if(i != xstate) {
-    1946:	fcc42783          	lw	a5,-52(s0)
-    194a:	05279963          	bne	a5,s2,199c <exitwait+0x8e>
+    193e:	fcc42783          	lw	a5,-52(s0)
+    1942:	05279963          	bne	a5,s2,1994 <exitwait+0x8e>
   for(i = 0; i < 100; i++){
-    194e:	2905                	addiw	s2,s2,1
-    1950:	fd391be3          	bne	s2,s3,1926 <exitwait+0x18>
+    1946:	2905                	addiw	s2,s2,1
+    1948:	fd391be3          	bne	s2,s3,191e <exitwait+0x18>
 }
-    1954:	70e2                	ld	ra,56(sp)
-    1956:	7442                	ld	s0,48(sp)
-    1958:	74a2                	ld	s1,40(sp)
-    195a:	7902                	ld	s2,32(sp)
-    195c:	69e2                	ld	s3,24(sp)
-    195e:	6a42                	ld	s4,16(sp)
-    1960:	6121                	addi	sp,sp,64
-    1962:	8082                	ret
+    194c:	70e2                	ld	ra,56(sp)
+    194e:	7442                	ld	s0,48(sp)
+    1950:	74a2                	ld	s1,40(sp)
+    1952:	7902                	ld	s2,32(sp)
+    1954:	69e2                	ld	s3,24(sp)
+    1956:	6a42                	ld	s4,16(sp)
+    1958:	6121                	addi	sp,sp,64
+    195a:	8082                	ret
       printf("%s: fork failed\n", s);
-    1964:	85d2                	mv	a1,s4
-    1966:	00004517          	auipc	a0,0x4
-    196a:	7b250513          	addi	a0,a0,1970 # 6118 <malloc+0x97c>
-    196e:	00004097          	auipc	ra,0x4
-    1972:	d76080e7          	jalr	-650(ra) # 56e4 <printf>
-      exit(1);
-    1976:	4505                	li	a0,1
-    1978:	00004097          	auipc	ra,0x4
-    197c:	9f2080e7          	jalr	-1550(ra) # 536a <exit>
+    195c:	85d2                	mv	a1,s4
+    195e:	00005517          	auipc	a0,0x5
+    1962:	ca250513          	addi	a0,a0,-862 # 6600 <malloc+0x97c>
+    1966:	00004097          	auipc	ra,0x4
+    196a:	266080e7          	jalr	614(ra) # 5bcc <printf>
+      exit(1);
+    196e:	4505                	li	a0,1
+    1970:	00004097          	auipc	ra,0x4
+    1974:	ed2080e7          	jalr	-302(ra) # 5842 <exit>
         printf("%s: wait wrong pid\n", s);
-    1980:	85d2                	mv	a1,s4
-    1982:	00005517          	auipc	a0,0x5
-    1986:	91e50513          	addi	a0,a0,-1762 # 62a0 <malloc+0xb04>
-    198a:	00004097          	auipc	ra,0x4
-    198e:	d5a080e7          	jalr	-678(ra) # 56e4 <printf>
+    1978:	85d2                	mv	a1,s4
+    197a:	00005517          	auipc	a0,0x5
+    197e:	e0e50513          	addi	a0,a0,-498 # 6788 <malloc+0xb04>
+    1982:	00004097          	auipc	ra,0x4
+    1986:	24a080e7          	jalr	586(ra) # 5bcc <printf>
         exit(1);
-    1992:	4505                	li	a0,1
-    1994:	00004097          	auipc	ra,0x4
-    1998:	9d6080e7          	jalr	-1578(ra) # 536a <exit>
+    198a:	4505                	li	a0,1
+    198c:	00004097          	auipc	ra,0x4
+    1990:	eb6080e7          	jalr	-330(ra) # 5842 <exit>
         printf("%s: wait wrong exit status\n", s);
-    199c:	85d2                	mv	a1,s4
-    199e:	00005517          	auipc	a0,0x5
-    19a2:	91a50513          	addi	a0,a0,-1766 # 62b8 <malloc+0xb1c>
-    19a6:	00004097          	auipc	ra,0x4
-    19aa:	d3e080e7          	jalr	-706(ra) # 56e4 <printf>
+    1994:	85d2                	mv	a1,s4
+    1996:	00005517          	auipc	a0,0x5
+    199a:	e0a50513          	addi	a0,a0,-502 # 67a0 <malloc+0xb1c>
+    199e:	00004097          	auipc	ra,0x4
+    19a2:	22e080e7          	jalr	558(ra) # 5bcc <printf>
         exit(1);
-    19ae:	4505                	li	a0,1
-    19b0:	00004097          	auipc	ra,0x4
-    19b4:	9ba080e7          	jalr	-1606(ra) # 536a <exit>
+    19a6:	4505                	li	a0,1
+    19a8:	00004097          	auipc	ra,0x4
+    19ac:	e9a080e7          	jalr	-358(ra) # 5842 <exit>
       exit(i);
-    19b8:	854a                	mv	a0,s2
-    19ba:	00004097          	auipc	ra,0x4
-    19be:	9b0080e7          	jalr	-1616(ra) # 536a <exit>
-
-00000000000019c2 <twochildren>:
-{
-    19c2:	1101                	addi	sp,sp,-32
-    19c4:	ec06                	sd	ra,24(sp)
-    19c6:	e822                	sd	s0,16(sp)
-    19c8:	e426                	sd	s1,8(sp)
-    19ca:	e04a                	sd	s2,0(sp)
-    19cc:	1000                	addi	s0,sp,32
-    19ce:	892a                	mv	s2,a0
-    19d0:	3e800493          	li	s1,1000
+    19b0:	854a                	mv	a0,s2
+    19b2:	00004097          	auipc	ra,0x4
+    19b6:	e90080e7          	jalr	-368(ra) # 5842 <exit>
+
+00000000000019ba <twochildren>:
+{
+    19ba:	1101                	addi	sp,sp,-32
+    19bc:	ec06                	sd	ra,24(sp)
+    19be:	e822                	sd	s0,16(sp)
+    19c0:	e426                	sd	s1,8(sp)
+    19c2:	e04a                	sd	s2,0(sp)
+    19c4:	1000                	addi	s0,sp,32
+    19c6:	892a                	mv	s2,a0
+    19c8:	3e800493          	li	s1,1000
     int pid1 = fork();
-    19d4:	00004097          	auipc	ra,0x4
-    19d8:	98e080e7          	jalr	-1650(ra) # 5362 <fork>
+    19cc:	00004097          	auipc	ra,0x4
+    19d0:	e6e080e7          	jalr	-402(ra) # 583a <fork>
     if(pid1 < 0){
-    19dc:	02054c63          	bltz	a0,1a14 <twochildren+0x52>
+    19d4:	02054c63          	bltz	a0,1a0c <twochildren+0x52>
     if(pid1 == 0){
-    19e0:	c921                	beqz	a0,1a30 <twochildren+0x6e>
+    19d8:	c921                	beqz	a0,1a28 <twochildren+0x6e>
       int pid2 = fork();
-    19e2:	00004097          	auipc	ra,0x4
-    19e6:	980080e7          	jalr	-1664(ra) # 5362 <fork>
+    19da:	00004097          	auipc	ra,0x4
+    19de:	e60080e7          	jalr	-416(ra) # 583a <fork>
       if(pid2 < 0){
-    19ea:	04054763          	bltz	a0,1a38 <twochildren+0x76>
+    19e2:	04054763          	bltz	a0,1a30 <twochildren+0x76>
       if(pid2 == 0){
-    19ee:	c13d                	beqz	a0,1a54 <twochildren+0x92>
+    19e6:	c13d                	beqz	a0,1a4c <twochildren+0x92>
         wait(0);
-    19f0:	4501                	li	a0,0
-    19f2:	00004097          	auipc	ra,0x4
-    19f6:	980080e7          	jalr	-1664(ra) # 5372 <wait>
+    19e8:	4501                	li	a0,0
+    19ea:	00004097          	auipc	ra,0x4
+    19ee:	e60080e7          	jalr	-416(ra) # 584a <wait>
         wait(0);
-    19fa:	4501                	li	a0,0
-    19fc:	00004097          	auipc	ra,0x4
-    1a00:	976080e7          	jalr	-1674(ra) # 5372 <wait>
+    19f2:	4501                	li	a0,0
+    19f4:	00004097          	auipc	ra,0x4
+    19f8:	e56080e7          	jalr	-426(ra) # 584a <wait>
   for(int i = 0; i < 1000; i++){
-    1a04:	34fd                	addiw	s1,s1,-1
-    1a06:	f4f9                	bnez	s1,19d4 <twochildren+0x12>
+    19fc:	34fd                	addiw	s1,s1,-1
+    19fe:	f4f9                	bnez	s1,19cc <twochildren+0x12>
 }
-    1a08:	60e2                	ld	ra,24(sp)
-    1a0a:	6442                	ld	s0,16(sp)
-    1a0c:	64a2                	ld	s1,8(sp)
-    1a0e:	6902                	ld	s2,0(sp)
-    1a10:	6105                	addi	sp,sp,32
-    1a12:	8082                	ret
+    1a00:	60e2                	ld	ra,24(sp)
+    1a02:	6442                	ld	s0,16(sp)
+    1a04:	64a2                	ld	s1,8(sp)
+    1a06:	6902                	ld	s2,0(sp)
+    1a08:	6105                	addi	sp,sp,32
+    1a0a:	8082                	ret
       printf("%s: fork failed\n", s);
-    1a14:	85ca                	mv	a1,s2
-    1a16:	00004517          	auipc	a0,0x4
-    1a1a:	70250513          	addi	a0,a0,1794 # 6118 <malloc+0x97c>
-    1a1e:	00004097          	auipc	ra,0x4
-    1a22:	cc6080e7          	jalr	-826(ra) # 56e4 <printf>
-      exit(1);
-    1a26:	4505                	li	a0,1
-    1a28:	00004097          	auipc	ra,0x4
-    1a2c:	942080e7          	jalr	-1726(ra) # 536a <exit>
+    1a0c:	85ca                	mv	a1,s2
+    1a0e:	00005517          	auipc	a0,0x5
+    1a12:	bf250513          	addi	a0,a0,-1038 # 6600 <malloc+0x97c>
+    1a16:	00004097          	auipc	ra,0x4
+    1a1a:	1b6080e7          	jalr	438(ra) # 5bcc <printf>
+      exit(1);
+    1a1e:	4505                	li	a0,1
+    1a20:	00004097          	auipc	ra,0x4
+    1a24:	e22080e7          	jalr	-478(ra) # 5842 <exit>
       exit(0);
-    1a30:	00004097          	auipc	ra,0x4
-    1a34:	93a080e7          	jalr	-1734(ra) # 536a <exit>
+    1a28:	00004097          	auipc	ra,0x4
+    1a2c:	e1a080e7          	jalr	-486(ra) # 5842 <exit>
         printf("%s: fork failed\n", s);
-    1a38:	85ca                	mv	a1,s2
-    1a3a:	00004517          	auipc	a0,0x4
-    1a3e:	6de50513          	addi	a0,a0,1758 # 6118 <malloc+0x97c>
-    1a42:	00004097          	auipc	ra,0x4
-    1a46:	ca2080e7          	jalr	-862(ra) # 56e4 <printf>
+    1a30:	85ca                	mv	a1,s2
+    1a32:	00005517          	auipc	a0,0x5
+    1a36:	bce50513          	addi	a0,a0,-1074 # 6600 <malloc+0x97c>
+    1a3a:	00004097          	auipc	ra,0x4
+    1a3e:	192080e7          	jalr	402(ra) # 5bcc <printf>
         exit(1);
-    1a4a:	4505                	li	a0,1
-    1a4c:	00004097          	auipc	ra,0x4
-    1a50:	91e080e7          	jalr	-1762(ra) # 536a <exit>
+    1a42:	4505                	li	a0,1
+    1a44:	00004097          	auipc	ra,0x4
+    1a48:	dfe080e7          	jalr	-514(ra) # 5842 <exit>
         exit(0);
-    1a54:	00004097          	auipc	ra,0x4
-    1a58:	916080e7          	jalr	-1770(ra) # 536a <exit>
+    1a4c:	00004097          	auipc	ra,0x4
+    1a50:	df6080e7          	jalr	-522(ra) # 5842 <exit>
 
-0000000000001a5c <forkfork>:
+0000000000001a54 <forkfork>:
 {
-    1a5c:	7179                	addi	sp,sp,-48
-    1a5e:	f406                	sd	ra,40(sp)
-    1a60:	f022                	sd	s0,32(sp)
-    1a62:	ec26                	sd	s1,24(sp)
-    1a64:	1800                	addi	s0,sp,48
-    1a66:	84aa                	mv	s1,a0
+    1a54:	7179                	addi	sp,sp,-48
+    1a56:	f406                	sd	ra,40(sp)
+    1a58:	f022                	sd	s0,32(sp)
+    1a5a:	ec26                	sd	s1,24(sp)
+    1a5c:	1800                	addi	s0,sp,48
+    1a5e:	84aa                	mv	s1,a0
     int pid = fork();
-    1a68:	00004097          	auipc	ra,0x4
-    1a6c:	8fa080e7          	jalr	-1798(ra) # 5362 <fork>
+    1a60:	00004097          	auipc	ra,0x4
+    1a64:	dda080e7          	jalr	-550(ra) # 583a <fork>
     if(pid < 0){
-    1a70:	04054163          	bltz	a0,1ab2 <forkfork+0x56>
+    1a68:	04054163          	bltz	a0,1aaa <forkfork+0x56>
     if(pid == 0){
-    1a74:	cd29                	beqz	a0,1ace <forkfork+0x72>
+    1a6c:	cd29                	beqz	a0,1ac6 <forkfork+0x72>
     int pid = fork();
-    1a76:	00004097          	auipc	ra,0x4
-    1a7a:	8ec080e7          	jalr	-1812(ra) # 5362 <fork>
+    1a6e:	00004097          	auipc	ra,0x4
+    1a72:	dcc080e7          	jalr	-564(ra) # 583a <fork>
     if(pid < 0){
-    1a7e:	02054a63          	bltz	a0,1ab2 <forkfork+0x56>
+    1a76:	02054a63          	bltz	a0,1aaa <forkfork+0x56>
     if(pid == 0){
-    1a82:	c531                	beqz	a0,1ace <forkfork+0x72>
+    1a7a:	c531                	beqz	a0,1ac6 <forkfork+0x72>
     wait(&xstatus);
-    1a84:	fdc40513          	addi	a0,s0,-36
-    1a88:	00004097          	auipc	ra,0x4
-    1a8c:	8ea080e7          	jalr	-1814(ra) # 5372 <wait>
+    1a7c:	fdc40513          	addi	a0,s0,-36
+    1a80:	00004097          	auipc	ra,0x4
+    1a84:	dca080e7          	jalr	-566(ra) # 584a <wait>
     if(xstatus != 0) {
-    1a90:	fdc42783          	lw	a5,-36(s0)
-    1a94:	ebbd                	bnez	a5,1b0a <forkfork+0xae>
+    1a88:	fdc42783          	lw	a5,-36(s0)
+    1a8c:	ebbd                	bnez	a5,1b02 <forkfork+0xae>
     wait(&xstatus);
-    1a96:	fdc40513          	addi	a0,s0,-36
-    1a9a:	00004097          	auipc	ra,0x4
-    1a9e:	8d8080e7          	jalr	-1832(ra) # 5372 <wait>
+    1a8e:	fdc40513          	addi	a0,s0,-36
+    1a92:	00004097          	auipc	ra,0x4
+    1a96:	db8080e7          	jalr	-584(ra) # 584a <wait>
     if(xstatus != 0) {
-    1aa2:	fdc42783          	lw	a5,-36(s0)
-    1aa6:	e3b5                	bnez	a5,1b0a <forkfork+0xae>
+    1a9a:	fdc42783          	lw	a5,-36(s0)
+    1a9e:	e3b5                	bnez	a5,1b02 <forkfork+0xae>
 }
-    1aa8:	70a2                	ld	ra,40(sp)
-    1aaa:	7402                	ld	s0,32(sp)
-    1aac:	64e2                	ld	s1,24(sp)
-    1aae:	6145                	addi	sp,sp,48
-    1ab0:	8082                	ret
+    1aa0:	70a2                	ld	ra,40(sp)
+    1aa2:	7402                	ld	s0,32(sp)
+    1aa4:	64e2                	ld	s1,24(sp)
+    1aa6:	6145                	addi	sp,sp,48
+    1aa8:	8082                	ret
       printf("%s: fork failed", s);
-    1ab2:	85a6                	mv	a1,s1
-    1ab4:	00005517          	auipc	a0,0x5
-    1ab8:	82450513          	addi	a0,a0,-2012 # 62d8 <malloc+0xb3c>
-    1abc:	00004097          	auipc	ra,0x4
-    1ac0:	c28080e7          	jalr	-984(ra) # 56e4 <printf>
-      exit(1);
-    1ac4:	4505                	li	a0,1
-    1ac6:	00004097          	auipc	ra,0x4
-    1aca:	8a4080e7          	jalr	-1884(ra) # 536a <exit>
+    1aaa:	85a6                	mv	a1,s1
+    1aac:	00005517          	auipc	a0,0x5
+    1ab0:	d1450513          	addi	a0,a0,-748 # 67c0 <malloc+0xb3c>
+    1ab4:	00004097          	auipc	ra,0x4
+    1ab8:	118080e7          	jalr	280(ra) # 5bcc <printf>
+      exit(1);
+    1abc:	4505                	li	a0,1
+    1abe:	00004097          	auipc	ra,0x4
+    1ac2:	d84080e7          	jalr	-636(ra) # 5842 <exit>
 {
-    1ace:	0c800493          	li	s1,200
+    1ac6:	0c800493          	li	s1,200
         int pid1 = fork();
-    1ad2:	00004097          	auipc	ra,0x4
-    1ad6:	890080e7          	jalr	-1904(ra) # 5362 <fork>
+    1aca:	00004097          	auipc	ra,0x4
+    1ace:	d70080e7          	jalr	-656(ra) # 583a <fork>
         if(pid1 < 0){
-    1ada:	00054f63          	bltz	a0,1af8 <forkfork+0x9c>
+    1ad2:	00054f63          	bltz	a0,1af0 <forkfork+0x9c>
         if(pid1 == 0){
-    1ade:	c115                	beqz	a0,1b02 <forkfork+0xa6>
+    1ad6:	c115                	beqz	a0,1afa <forkfork+0xa6>
         wait(0);
-    1ae0:	4501                	li	a0,0
-    1ae2:	00004097          	auipc	ra,0x4
-    1ae6:	890080e7          	jalr	-1904(ra) # 5372 <wait>
+    1ad8:	4501                	li	a0,0
+    1ada:	00004097          	auipc	ra,0x4
+    1ade:	d70080e7          	jalr	-656(ra) # 584a <wait>
       for(int j = 0; j < 200; j++){
-    1aea:	34fd                	addiw	s1,s1,-1
-    1aec:	f0fd                	bnez	s1,1ad2 <forkfork+0x76>
+    1ae2:	34fd                	addiw	s1,s1,-1
+    1ae4:	f0fd                	bnez	s1,1aca <forkfork+0x76>
       exit(0);
-    1aee:	4501                	li	a0,0
-    1af0:	00004097          	auipc	ra,0x4
-    1af4:	87a080e7          	jalr	-1926(ra) # 536a <exit>
+    1ae6:	4501                	li	a0,0
+    1ae8:	00004097          	auipc	ra,0x4
+    1aec:	d5a080e7          	jalr	-678(ra) # 5842 <exit>
           exit(1);
-    1af8:	4505                	li	a0,1
-    1afa:	00004097          	auipc	ra,0x4
-    1afe:	870080e7          	jalr	-1936(ra) # 536a <exit>
+    1af0:	4505                	li	a0,1
+    1af2:	00004097          	auipc	ra,0x4
+    1af6:	d50080e7          	jalr	-688(ra) # 5842 <exit>
           exit(0);
-    1b02:	00004097          	auipc	ra,0x4
-    1b06:	868080e7          	jalr	-1944(ra) # 536a <exit>
+    1afa:	00004097          	auipc	ra,0x4
+    1afe:	d48080e7          	jalr	-696(ra) # 5842 <exit>
       printf("%s: fork in child failed", s);
-    1b0a:	85a6                	mv	a1,s1
-    1b0c:	00004517          	auipc	a0,0x4
-    1b10:	7dc50513          	addi	a0,a0,2012 # 62e8 <malloc+0xb4c>
-    1b14:	00004097          	auipc	ra,0x4
-    1b18:	bd0080e7          	jalr	-1072(ra) # 56e4 <printf>
-      exit(1);
-    1b1c:	4505                	li	a0,1
-    1b1e:	00004097          	auipc	ra,0x4
-    1b22:	84c080e7          	jalr	-1972(ra) # 536a <exit>
-
-0000000000001b26 <reparent2>:
-{
-    1b26:	1101                	addi	sp,sp,-32
-    1b28:	ec06                	sd	ra,24(sp)
-    1b2a:	e822                	sd	s0,16(sp)
-    1b2c:	e426                	sd	s1,8(sp)
-    1b2e:	1000                	addi	s0,sp,32
-    1b30:	32000493          	li	s1,800
+    1b02:	85a6                	mv	a1,s1
+    1b04:	00005517          	auipc	a0,0x5
+    1b08:	ccc50513          	addi	a0,a0,-820 # 67d0 <malloc+0xb4c>
+    1b0c:	00004097          	auipc	ra,0x4
+    1b10:	0c0080e7          	jalr	192(ra) # 5bcc <printf>
+      exit(1);
+    1b14:	4505                	li	a0,1
+    1b16:	00004097          	auipc	ra,0x4
+    1b1a:	d2c080e7          	jalr	-724(ra) # 5842 <exit>
+
+0000000000001b1e <reparent2>:
+{
+    1b1e:	1101                	addi	sp,sp,-32
+    1b20:	ec06                	sd	ra,24(sp)
+    1b22:	e822                	sd	s0,16(sp)
+    1b24:	e426                	sd	s1,8(sp)
+    1b26:	1000                	addi	s0,sp,32
+    1b28:	32000493          	li	s1,800
     int pid1 = fork();
-    1b34:	00004097          	auipc	ra,0x4
-    1b38:	82e080e7          	jalr	-2002(ra) # 5362 <fork>
+    1b2c:	00004097          	auipc	ra,0x4
+    1b30:	d0e080e7          	jalr	-754(ra) # 583a <fork>
     if(pid1 < 0){
-    1b3c:	00054f63          	bltz	a0,1b5a <reparent2+0x34>
+    1b34:	00054f63          	bltz	a0,1b52 <reparent2+0x34>
     if(pid1 == 0){
-    1b40:	c915                	beqz	a0,1b74 <reparent2+0x4e>
+    1b38:	c915                	beqz	a0,1b6c <reparent2+0x4e>
     wait(0);
-    1b42:	4501                	li	a0,0
-    1b44:	00004097          	auipc	ra,0x4
-    1b48:	82e080e7          	jalr	-2002(ra) # 5372 <wait>
+    1b3a:	4501                	li	a0,0
+    1b3c:	00004097          	auipc	ra,0x4
+    1b40:	d0e080e7          	jalr	-754(ra) # 584a <wait>
   for(int i = 0; i < 800; i++){
-    1b4c:	34fd                	addiw	s1,s1,-1
-    1b4e:	f0fd                	bnez	s1,1b34 <reparent2+0xe>
+    1b44:	34fd                	addiw	s1,s1,-1
+    1b46:	f0fd                	bnez	s1,1b2c <reparent2+0xe>
   exit(0);
-    1b50:	4501                	li	a0,0
-    1b52:	00004097          	auipc	ra,0x4
-    1b56:	818080e7          	jalr	-2024(ra) # 536a <exit>
+    1b48:	4501                	li	a0,0
+    1b4a:	00004097          	auipc	ra,0x4
+    1b4e:	cf8080e7          	jalr	-776(ra) # 5842 <exit>
       printf("fork failed\n");
-    1b5a:	00005517          	auipc	a0,0x5
-    1b5e:	9ae50513          	addi	a0,a0,-1618 # 6508 <malloc+0xd6c>
-    1b62:	00004097          	auipc	ra,0x4
-    1b66:	b82080e7          	jalr	-1150(ra) # 56e4 <printf>
-      exit(1);
-    1b6a:	4505                	li	a0,1
-    1b6c:	00003097          	auipc	ra,0x3
-    1b70:	7fe080e7          	jalr	2046(ra) # 536a <exit>
+    1b52:	00005517          	auipc	a0,0x5
+    1b56:	ece50513          	addi	a0,a0,-306 # 6a20 <malloc+0xd9c>
+    1b5a:	00004097          	auipc	ra,0x4
+    1b5e:	072080e7          	jalr	114(ra) # 5bcc <printf>
+      exit(1);
+    1b62:	4505                	li	a0,1
+    1b64:	00004097          	auipc	ra,0x4
+    1b68:	cde080e7          	jalr	-802(ra) # 5842 <exit>
       fork();
-    1b74:	00003097          	auipc	ra,0x3
-    1b78:	7ee080e7          	jalr	2030(ra) # 5362 <fork>
+    1b6c:	00004097          	auipc	ra,0x4
+    1b70:	cce080e7          	jalr	-818(ra) # 583a <fork>
       fork();
-    1b7c:	00003097          	auipc	ra,0x3
-    1b80:	7e6080e7          	jalr	2022(ra) # 5362 <fork>
+    1b74:	00004097          	auipc	ra,0x4
+    1b78:	cc6080e7          	jalr	-826(ra) # 583a <fork>
       exit(0);
-    1b84:	4501                	li	a0,0
-    1b86:	00003097          	auipc	ra,0x3
-    1b8a:	7e4080e7          	jalr	2020(ra) # 536a <exit>
-
-0000000000001b8e <createdelete>:
-{
-    1b8e:	7175                	addi	sp,sp,-144
-    1b90:	e506                	sd	ra,136(sp)
-    1b92:	e122                	sd	s0,128(sp)
-    1b94:	fca6                	sd	s1,120(sp)
-    1b96:	f8ca                	sd	s2,112(sp)
-    1b98:	f4ce                	sd	s3,104(sp)
-    1b9a:	f0d2                	sd	s4,96(sp)
-    1b9c:	ecd6                	sd	s5,88(sp)
-    1b9e:	e8da                	sd	s6,80(sp)
-    1ba0:	e4de                	sd	s7,72(sp)
-    1ba2:	e0e2                	sd	s8,64(sp)
-    1ba4:	fc66                	sd	s9,56(sp)
-    1ba6:	0900                	addi	s0,sp,144
-    1ba8:	8caa                	mv	s9,a0
+    1b7c:	4501                	li	a0,0
+    1b7e:	00004097          	auipc	ra,0x4
+    1b82:	cc4080e7          	jalr	-828(ra) # 5842 <exit>
+
+0000000000001b86 <createdelete>:
+{
+    1b86:	7175                	addi	sp,sp,-144
+    1b88:	e506                	sd	ra,136(sp)
+    1b8a:	e122                	sd	s0,128(sp)
+    1b8c:	fca6                	sd	s1,120(sp)
+    1b8e:	f8ca                	sd	s2,112(sp)
+    1b90:	f4ce                	sd	s3,104(sp)
+    1b92:	f0d2                	sd	s4,96(sp)
+    1b94:	ecd6                	sd	s5,88(sp)
+    1b96:	e8da                	sd	s6,80(sp)
+    1b98:	e4de                	sd	s7,72(sp)
+    1b9a:	e0e2                	sd	s8,64(sp)
+    1b9c:	fc66                	sd	s9,56(sp)
+    1b9e:	0900                	addi	s0,sp,144
+    1ba0:	8caa                	mv	s9,a0
   for(pi = 0; pi < NCHILD; pi++){
-    1baa:	4901                	li	s2,0
-    1bac:	4991                	li	s3,4
+    1ba2:	4901                	li	s2,0
+    1ba4:	4991                	li	s3,4
     pid = fork();
-    1bae:	00003097          	auipc	ra,0x3
-    1bb2:	7b4080e7          	jalr	1972(ra) # 5362 <fork>
-    1bb6:	84aa                	mv	s1,a0
+    1ba6:	00004097          	auipc	ra,0x4
+    1baa:	c94080e7          	jalr	-876(ra) # 583a <fork>
+    1bae:	84aa                	mv	s1,a0
     if(pid < 0){
-    1bb8:	02054f63          	bltz	a0,1bf6 <createdelete+0x68>
+    1bb0:	02054f63          	bltz	a0,1bee <createdelete+0x68>
     if(pid == 0){
-    1bbc:	c939                	beqz	a0,1c12 <createdelete+0x84>
+    1bb4:	c939                	beqz	a0,1c0a <createdelete+0x84>
   for(pi = 0; pi < NCHILD; pi++){
-    1bbe:	2905                	addiw	s2,s2,1
-    1bc0:	ff3917e3          	bne	s2,s3,1bae <createdelete+0x20>
-    1bc4:	4491                	li	s1,4
+    1bb6:	2905                	addiw	s2,s2,1
+    1bb8:	ff3917e3          	bne	s2,s3,1ba6 <createdelete+0x20>
+    1bbc:	4491                	li	s1,4
     wait(&xstatus);
-    1bc6:	f7c40513          	addi	a0,s0,-132
-    1bca:	00003097          	auipc	ra,0x3
-    1bce:	7a8080e7          	jalr	1960(ra) # 5372 <wait>
+    1bbe:	f7c40513          	addi	a0,s0,-132
+    1bc2:	00004097          	auipc	ra,0x4
+    1bc6:	c88080e7          	jalr	-888(ra) # 584a <wait>
     if(xstatus != 0)
-    1bd2:	f7c42903          	lw	s2,-132(s0)
-    1bd6:	0e091263          	bnez	s2,1cba <createdelete+0x12c>
+    1bca:	f7c42903          	lw	s2,-132(s0)
+    1bce:	0e091263          	bnez	s2,1cb2 <createdelete+0x12c>
   for(pi = 0; pi < NCHILD; pi++){
-    1bda:	34fd                	addiw	s1,s1,-1
-    1bdc:	f4ed                	bnez	s1,1bc6 <createdelete+0x38>
+    1bd2:	34fd                	addiw	s1,s1,-1
+    1bd4:	f4ed                	bnez	s1,1bbe <createdelete+0x38>
   name[0] = name[1] = name[2] = 0;
-    1bde:	f8040123          	sb	zero,-126(s0)
-    1be2:	03000993          	li	s3,48
-    1be6:	5a7d                	li	s4,-1
-    1be8:	07000c13          	li	s8,112
+    1bd6:	f8040123          	sb	zero,-126(s0)
+    1bda:	03000993          	li	s3,48
+    1bde:	5a7d                	li	s4,-1
+    1be0:	07000c13          	li	s8,112
       } else if((i >= 1 && i < N/2) && fd >= 0){
-    1bec:	4b21                	li	s6,8
+    1be4:	4b21                	li	s6,8
       if((i == 0 || i >= N/2) && fd < 0){
-    1bee:	4ba5                	li	s7,9
+    1be6:	4ba5                	li	s7,9
     for(pi = 0; pi < NCHILD; pi++){
-    1bf0:	07400a93          	li	s5,116
-    1bf4:	a29d                	j	1d5a <createdelete+0x1cc>
+    1be8:	07400a93          	li	s5,116
+    1bec:	a29d                	j	1d52 <createdelete+0x1cc>
       printf("fork failed\n", s);
-    1bf6:	85e6                	mv	a1,s9
-    1bf8:	00005517          	auipc	a0,0x5
-    1bfc:	91050513          	addi	a0,a0,-1776 # 6508 <malloc+0xd6c>
-    1c00:	00004097          	auipc	ra,0x4
-    1c04:	ae4080e7          	jalr	-1308(ra) # 56e4 <printf>
-      exit(1);
-    1c08:	4505                	li	a0,1
-    1c0a:	00003097          	auipc	ra,0x3
-    1c0e:	760080e7          	jalr	1888(ra) # 536a <exit>
+    1bee:	85e6                	mv	a1,s9
+    1bf0:	00005517          	auipc	a0,0x5
+    1bf4:	e3050513          	addi	a0,a0,-464 # 6a20 <malloc+0xd9c>
+    1bf8:	00004097          	auipc	ra,0x4
+    1bfc:	fd4080e7          	jalr	-44(ra) # 5bcc <printf>
+      exit(1);
+    1c00:	4505                	li	a0,1
+    1c02:	00004097          	auipc	ra,0x4
+    1c06:	c40080e7          	jalr	-960(ra) # 5842 <exit>
       name[0] = 'p' + pi;
-    1c12:	0709091b          	addiw	s2,s2,112
-    1c16:	f9240023          	sb	s2,-128(s0)
+    1c0a:	0709091b          	addiw	s2,s2,112
+    1c0e:	f9240023          	sb	s2,-128(s0)
       name[2] = '\0';
-    1c1a:	f8040123          	sb	zero,-126(s0)
+    1c12:	f8040123          	sb	zero,-126(s0)
       for(i = 0; i < N; i++){
-    1c1e:	4951                	li	s2,20
-    1c20:	a015                	j	1c44 <createdelete+0xb6>
+    1c16:	4951                	li	s2,20
+    1c18:	a015                	j	1c3c <createdelete+0xb6>
           printf("%s: create failed\n", s);
-    1c22:	85e6                	mv	a1,s9
-    1c24:	00004517          	auipc	a0,0x4
-    1c28:	58c50513          	addi	a0,a0,1420 # 61b0 <malloc+0xa14>
-    1c2c:	00004097          	auipc	ra,0x4
-    1c30:	ab8080e7          	jalr	-1352(ra) # 56e4 <printf>
+    1c1a:	85e6                	mv	a1,s9
+    1c1c:	00005517          	auipc	a0,0x5
+    1c20:	a7c50513          	addi	a0,a0,-1412 # 6698 <malloc+0xa14>
+    1c24:	00004097          	auipc	ra,0x4
+    1c28:	fa8080e7          	jalr	-88(ra) # 5bcc <printf>
           exit(1);
-    1c34:	4505                	li	a0,1
-    1c36:	00003097          	auipc	ra,0x3
-    1c3a:	734080e7          	jalr	1844(ra) # 536a <exit>
+    1c2c:	4505                	li	a0,1
+    1c2e:	00004097          	auipc	ra,0x4
+    1c32:	c14080e7          	jalr	-1004(ra) # 5842 <exit>
       for(i = 0; i < N; i++){
-    1c3e:	2485                	addiw	s1,s1,1
-    1c40:	07248863          	beq	s1,s2,1cb0 <createdelete+0x122>
+    1c36:	2485                	addiw	s1,s1,1
+    1c38:	07248863          	beq	s1,s2,1ca8 <createdelete+0x122>
         name[1] = '0' + i;
-    1c44:	0304879b          	addiw	a5,s1,48
-    1c48:	f8f400a3          	sb	a5,-127(s0)
+    1c3c:	0304879b          	addiw	a5,s1,48
+    1c40:	f8f400a3          	sb	a5,-127(s0)
         fd = open(name, O_CREATE | O_RDWR);
-    1c4c:	20200593          	li	a1,514
-    1c50:	f8040513          	addi	a0,s0,-128
-    1c54:	00003097          	auipc	ra,0x3
-    1c58:	756080e7          	jalr	1878(ra) # 53aa <open>
+    1c44:	20200593          	li	a1,514
+    1c48:	f8040513          	addi	a0,s0,-128
+    1c4c:	00004097          	auipc	ra,0x4
+    1c50:	c36080e7          	jalr	-970(ra) # 5882 <open>
         if(fd < 0){
-    1c5c:	fc0543e3          	bltz	a0,1c22 <createdelete+0x94>
+    1c54:	fc0543e3          	bltz	a0,1c1a <createdelete+0x94>
         close(fd);
-    1c60:	00003097          	auipc	ra,0x3
-    1c64:	732080e7          	jalr	1842(ra) # 5392 <close>
+    1c58:	00004097          	auipc	ra,0x4
+    1c5c:	c12080e7          	jalr	-1006(ra) # 586a <close>
         if(i > 0 && (i % 2 ) == 0){
-    1c68:	fc905be3          	blez	s1,1c3e <createdelete+0xb0>
-    1c6c:	0014f793          	andi	a5,s1,1
-    1c70:	f7f9                	bnez	a5,1c3e <createdelete+0xb0>
+    1c60:	fc905be3          	blez	s1,1c36 <createdelete+0xb0>
+    1c64:	0014f793          	andi	a5,s1,1
+    1c68:	f7f9                	bnez	a5,1c36 <createdelete+0xb0>
           name[1] = '0' + (i / 2);
-    1c72:	01f4d79b          	srliw	a5,s1,0x1f
-    1c76:	9fa5                	addw	a5,a5,s1
-    1c78:	4017d79b          	sraiw	a5,a5,0x1
-    1c7c:	0307879b          	addiw	a5,a5,48
-    1c80:	f8f400a3          	sb	a5,-127(s0)
+    1c6a:	01f4d79b          	srliw	a5,s1,0x1f
+    1c6e:	9fa5                	addw	a5,a5,s1
+    1c70:	4017d79b          	sraiw	a5,a5,0x1
+    1c74:	0307879b          	addiw	a5,a5,48
+    1c78:	f8f400a3          	sb	a5,-127(s0)
           if(unlink(name) < 0){
-    1c84:	f8040513          	addi	a0,s0,-128
-    1c88:	00003097          	auipc	ra,0x3
-    1c8c:	732080e7          	jalr	1842(ra) # 53ba <unlink>
-    1c90:	fa0557e3          	bgez	a0,1c3e <createdelete+0xb0>
+    1c7c:	f8040513          	addi	a0,s0,-128
+    1c80:	00004097          	auipc	ra,0x4
+    1c84:	c12080e7          	jalr	-1006(ra) # 5892 <unlink>
+    1c88:	fa0557e3          	bgez	a0,1c36 <createdelete+0xb0>
             printf("%s: unlink failed\n", s);
-    1c94:	85e6                	mv	a1,s9
-    1c96:	00004517          	auipc	a0,0x4
-    1c9a:	67250513          	addi	a0,a0,1650 # 6308 <malloc+0xb6c>
-    1c9e:	00004097          	auipc	ra,0x4
-    1ca2:	a46080e7          	jalr	-1466(ra) # 56e4 <printf>
+    1c8c:	85e6                	mv	a1,s9
+    1c8e:	00005517          	auipc	a0,0x5
+    1c92:	b6250513          	addi	a0,a0,-1182 # 67f0 <malloc+0xb6c>
+    1c96:	00004097          	auipc	ra,0x4
+    1c9a:	f36080e7          	jalr	-202(ra) # 5bcc <printf>
             exit(1);
-    1ca6:	4505                	li	a0,1
-    1ca8:	00003097          	auipc	ra,0x3
-    1cac:	6c2080e7          	jalr	1730(ra) # 536a <exit>
+    1c9e:	4505                	li	a0,1
+    1ca0:	00004097          	auipc	ra,0x4
+    1ca4:	ba2080e7          	jalr	-1118(ra) # 5842 <exit>
       exit(0);
-    1cb0:	4501                	li	a0,0
-    1cb2:	00003097          	auipc	ra,0x3
-    1cb6:	6b8080e7          	jalr	1720(ra) # 536a <exit>
-      exit(1);
-    1cba:	4505                	li	a0,1
-    1cbc:	00003097          	auipc	ra,0x3
-    1cc0:	6ae080e7          	jalr	1710(ra) # 536a <exit>
+    1ca8:	4501                	li	a0,0
+    1caa:	00004097          	auipc	ra,0x4
+    1cae:	b98080e7          	jalr	-1128(ra) # 5842 <exit>
+      exit(1);
+    1cb2:	4505                	li	a0,1
+    1cb4:	00004097          	auipc	ra,0x4
+    1cb8:	b8e080e7          	jalr	-1138(ra) # 5842 <exit>
         printf("%s: oops createdelete %s didn't exist\n", s, name);
-    1cc4:	f8040613          	addi	a2,s0,-128
-    1cc8:	85e6                	mv	a1,s9
-    1cca:	00004517          	auipc	a0,0x4
-    1cce:	65650513          	addi	a0,a0,1622 # 6320 <malloc+0xb84>
-    1cd2:	00004097          	auipc	ra,0x4
-    1cd6:	a12080e7          	jalr	-1518(ra) # 56e4 <printf>
+    1cbc:	f8040613          	addi	a2,s0,-128
+    1cc0:	85e6                	mv	a1,s9
+    1cc2:	00005517          	auipc	a0,0x5
+    1cc6:	b4650513          	addi	a0,a0,-1210 # 6808 <malloc+0xb84>
+    1cca:	00004097          	auipc	ra,0x4
+    1cce:	f02080e7          	jalr	-254(ra) # 5bcc <printf>
         exit(1);
-    1cda:	4505                	li	a0,1
-    1cdc:	00003097          	auipc	ra,0x3
-    1ce0:	68e080e7          	jalr	1678(ra) # 536a <exit>
+    1cd2:	4505                	li	a0,1
+    1cd4:	00004097          	auipc	ra,0x4
+    1cd8:	b6e080e7          	jalr	-1170(ra) # 5842 <exit>
       } else if((i >= 1 && i < N/2) && fd >= 0){
-    1ce4:	054b7163          	bgeu	s6,s4,1d26 <createdelete+0x198>
+    1cdc:	054b7163          	bgeu	s6,s4,1d1e <createdelete+0x198>
       if(fd >= 0)
-    1ce8:	02055a63          	bgez	a0,1d1c <createdelete+0x18e>
+    1ce0:	02055a63          	bgez	a0,1d14 <createdelete+0x18e>
     for(pi = 0; pi < NCHILD; pi++){
-    1cec:	2485                	addiw	s1,s1,1
-    1cee:	0ff4f493          	zext.b	s1,s1
-    1cf2:	05548c63          	beq	s1,s5,1d4a <createdelete+0x1bc>
+    1ce4:	2485                	addiw	s1,s1,1
+    1ce6:	0ff4f493          	zext.b	s1,s1
+    1cea:	05548c63          	beq	s1,s5,1d42 <createdelete+0x1bc>
       name[0] = 'p' + pi;
-    1cf6:	f8940023          	sb	s1,-128(s0)
+    1cee:	f8940023          	sb	s1,-128(s0)
       name[1] = '0' + i;
-    1cfa:	f93400a3          	sb	s3,-127(s0)
+    1cf2:	f93400a3          	sb	s3,-127(s0)
       fd = open(name, 0);
-    1cfe:	4581                	li	a1,0
-    1d00:	f8040513          	addi	a0,s0,-128
-    1d04:	00003097          	auipc	ra,0x3
-    1d08:	6a6080e7          	jalr	1702(ra) # 53aa <open>
+    1cf6:	4581                	li	a1,0
+    1cf8:	f8040513          	addi	a0,s0,-128
+    1cfc:	00004097          	auipc	ra,0x4
+    1d00:	b86080e7          	jalr	-1146(ra) # 5882 <open>
       if((i == 0 || i >= N/2) && fd < 0){
-    1d0c:	00090463          	beqz	s2,1d14 <createdelete+0x186>
-    1d10:	fd2bdae3          	bge	s7,s2,1ce4 <createdelete+0x156>
-    1d14:	fa0548e3          	bltz	a0,1cc4 <createdelete+0x136>
+    1d04:	00090463          	beqz	s2,1d0c <createdelete+0x186>
+    1d08:	fd2bdae3          	bge	s7,s2,1cdc <createdelete+0x156>
+    1d0c:	fa0548e3          	bltz	a0,1cbc <createdelete+0x136>
       } else if((i >= 1 && i < N/2) && fd >= 0){
-    1d18:	014b7963          	bgeu	s6,s4,1d2a <createdelete+0x19c>
+    1d10:	014b7963          	bgeu	s6,s4,1d22 <createdelete+0x19c>
         close(fd);
-    1d1c:	00003097          	auipc	ra,0x3
-    1d20:	676080e7          	jalr	1654(ra) # 5392 <close>
-    1d24:	b7e1                	j	1cec <createdelete+0x15e>
+    1d14:	00004097          	auipc	ra,0x4
+    1d18:	b56080e7          	jalr	-1194(ra) # 586a <close>
+    1d1c:	b7e1                	j	1ce4 <createdelete+0x15e>
       } else if((i >= 1 && i < N/2) && fd >= 0){
-    1d26:	fc0543e3          	bltz	a0,1cec <createdelete+0x15e>
+    1d1e:	fc0543e3          	bltz	a0,1ce4 <createdelete+0x15e>
         printf("%s: oops createdelete %s did exist\n", s, name);
-    1d2a:	f8040613          	addi	a2,s0,-128
-    1d2e:	85e6                	mv	a1,s9
-    1d30:	00004517          	auipc	a0,0x4
-    1d34:	61850513          	addi	a0,a0,1560 # 6348 <malloc+0xbac>
-    1d38:	00004097          	auipc	ra,0x4
-    1d3c:	9ac080e7          	jalr	-1620(ra) # 56e4 <printf>
+    1d22:	f8040613          	addi	a2,s0,-128
+    1d26:	85e6                	mv	a1,s9
+    1d28:	00005517          	auipc	a0,0x5
+    1d2c:	b0850513          	addi	a0,a0,-1272 # 6830 <malloc+0xbac>
+    1d30:	00004097          	auipc	ra,0x4
+    1d34:	e9c080e7          	jalr	-356(ra) # 5bcc <printf>
         exit(1);
-    1d40:	4505                	li	a0,1
-    1d42:	00003097          	auipc	ra,0x3
-    1d46:	628080e7          	jalr	1576(ra) # 536a <exit>
+    1d38:	4505                	li	a0,1
+    1d3a:	00004097          	auipc	ra,0x4
+    1d3e:	b08080e7          	jalr	-1272(ra) # 5842 <exit>
   for(i = 0; i < N; i++){
-    1d4a:	2905                	addiw	s2,s2,1
-    1d4c:	2a05                	addiw	s4,s4,1
-    1d4e:	2985                	addiw	s3,s3,1
-    1d50:	0ff9f993          	zext.b	s3,s3
-    1d54:	47d1                	li	a5,20
-    1d56:	02f90a63          	beq	s2,a5,1d8a <createdelete+0x1fc>
+    1d42:	2905                	addiw	s2,s2,1
+    1d44:	2a05                	addiw	s4,s4,1
+    1d46:	2985                	addiw	s3,s3,1
+    1d48:	0ff9f993          	zext.b	s3,s3
+    1d4c:	47d1                	li	a5,20
+    1d4e:	02f90a63          	beq	s2,a5,1d82 <createdelete+0x1fc>
     for(pi = 0; pi < NCHILD; pi++){
-    1d5a:	84e2                	mv	s1,s8
-    1d5c:	bf69                	j	1cf6 <createdelete+0x168>
+    1d52:	84e2                	mv	s1,s8
+    1d54:	bf69                	j	1cee <createdelete+0x168>
   for(i = 0; i < N; i++){
-    1d5e:	2905                	addiw	s2,s2,1
-    1d60:	0ff97913          	zext.b	s2,s2
-    1d64:	2985                	addiw	s3,s3,1
-    1d66:	0ff9f993          	zext.b	s3,s3
-    1d6a:	03490863          	beq	s2,s4,1d9a <createdelete+0x20c>
+    1d56:	2905                	addiw	s2,s2,1
+    1d58:	0ff97913          	zext.b	s2,s2
+    1d5c:	2985                	addiw	s3,s3,1
+    1d5e:	0ff9f993          	zext.b	s3,s3
+    1d62:	03490863          	beq	s2,s4,1d92 <createdelete+0x20c>
   name[0] = name[1] = name[2] = 0;
-    1d6e:	84d6                	mv	s1,s5
+    1d66:	84d6                	mv	s1,s5
       name[0] = 'p' + i;
-    1d70:	f9240023          	sb	s2,-128(s0)
+    1d68:	f9240023          	sb	s2,-128(s0)
       name[1] = '0' + i;
-    1d74:	f93400a3          	sb	s3,-127(s0)
+    1d6c:	f93400a3          	sb	s3,-127(s0)
       unlink(name);
-    1d78:	f8040513          	addi	a0,s0,-128
-    1d7c:	00003097          	auipc	ra,0x3
-    1d80:	63e080e7          	jalr	1598(ra) # 53ba <unlink>
+    1d70:	f8040513          	addi	a0,s0,-128
+    1d74:	00004097          	auipc	ra,0x4
+    1d78:	b1e080e7          	jalr	-1250(ra) # 5892 <unlink>
     for(pi = 0; pi < NCHILD; pi++){
-    1d84:	34fd                	addiw	s1,s1,-1
-    1d86:	f4ed                	bnez	s1,1d70 <createdelete+0x1e2>
-    1d88:	bfd9                	j	1d5e <createdelete+0x1d0>
-    1d8a:	03000993          	li	s3,48
-    1d8e:	07000913          	li	s2,112
+    1d7c:	34fd                	addiw	s1,s1,-1
+    1d7e:	f4ed                	bnez	s1,1d68 <createdelete+0x1e2>
+    1d80:	bfd9                	j	1d56 <createdelete+0x1d0>
+    1d82:	03000993          	li	s3,48
+    1d86:	07000913          	li	s2,112
   name[0] = name[1] = name[2] = 0;
-    1d92:	4a91                	li	s5,4
+    1d8a:	4a91                	li	s5,4
   for(i = 0; i < N; i++){
-    1d94:	08400a13          	li	s4,132
-    1d98:	bfd9                	j	1d6e <createdelete+0x1e0>
+    1d8c:	08400a13          	li	s4,132
+    1d90:	bfd9                	j	1d66 <createdelete+0x1e0>
 }
-    1d9a:	60aa                	ld	ra,136(sp)
-    1d9c:	640a                	ld	s0,128(sp)
-    1d9e:	74e6                	ld	s1,120(sp)
-    1da0:	7946                	ld	s2,112(sp)
-    1da2:	79a6                	ld	s3,104(sp)
-    1da4:	7a06                	ld	s4,96(sp)
-    1da6:	6ae6                	ld	s5,88(sp)
-    1da8:	6b46                	ld	s6,80(sp)
-    1daa:	6ba6                	ld	s7,72(sp)
-    1dac:	6c06                	ld	s8,64(sp)
-    1dae:	7ce2                	ld	s9,56(sp)
-    1db0:	6149                	addi	sp,sp,144
-    1db2:	8082                	ret
-
-0000000000001db4 <linkunlink>:
-{
-    1db4:	711d                	addi	sp,sp,-96
-    1db6:	ec86                	sd	ra,88(sp)
-    1db8:	e8a2                	sd	s0,80(sp)
-    1dba:	e4a6                	sd	s1,72(sp)
-    1dbc:	e0ca                	sd	s2,64(sp)
-    1dbe:	fc4e                	sd	s3,56(sp)
-    1dc0:	f852                	sd	s4,48(sp)
-    1dc2:	f456                	sd	s5,40(sp)
-    1dc4:	f05a                	sd	s6,32(sp)
-    1dc6:	ec5e                	sd	s7,24(sp)
-    1dc8:	e862                	sd	s8,16(sp)
-    1dca:	e466                	sd	s9,8(sp)
-    1dcc:	1080                	addi	s0,sp,96
-    1dce:	84aa                	mv	s1,a0
+    1d92:	60aa                	ld	ra,136(sp)
+    1d94:	640a                	ld	s0,128(sp)
+    1d96:	74e6                	ld	s1,120(sp)
+    1d98:	7946                	ld	s2,112(sp)
+    1d9a:	79a6                	ld	s3,104(sp)
+    1d9c:	7a06                	ld	s4,96(sp)
+    1d9e:	6ae6                	ld	s5,88(sp)
+    1da0:	6b46                	ld	s6,80(sp)
+    1da2:	6ba6                	ld	s7,72(sp)
+    1da4:	6c06                	ld	s8,64(sp)
+    1da6:	7ce2                	ld	s9,56(sp)
+    1da8:	6149                	addi	sp,sp,144
+    1daa:	8082                	ret
+
+0000000000001dac <linkunlink>:
+{
+    1dac:	711d                	addi	sp,sp,-96
+    1dae:	ec86                	sd	ra,88(sp)
+    1db0:	e8a2                	sd	s0,80(sp)
+    1db2:	e4a6                	sd	s1,72(sp)
+    1db4:	e0ca                	sd	s2,64(sp)
+    1db6:	fc4e                	sd	s3,56(sp)
+    1db8:	f852                	sd	s4,48(sp)
+    1dba:	f456                	sd	s5,40(sp)
+    1dbc:	f05a                	sd	s6,32(sp)
+    1dbe:	ec5e                	sd	s7,24(sp)
+    1dc0:	e862                	sd	s8,16(sp)
+    1dc2:	e466                	sd	s9,8(sp)
+    1dc4:	1080                	addi	s0,sp,96
+    1dc6:	84aa                	mv	s1,a0
   unlink("x");
-    1dd0:	00004517          	auipc	a0,0x4
-    1dd4:	b6050513          	addi	a0,a0,-1184 # 5930 <malloc+0x194>
-    1dd8:	00003097          	auipc	ra,0x3
-    1ddc:	5e2080e7          	jalr	1506(ra) # 53ba <unlink>
+    1dc8:	00004517          	auipc	a0,0x4
+    1dcc:	05050513          	addi	a0,a0,80 # 5e18 <malloc+0x194>
+    1dd0:	00004097          	auipc	ra,0x4
+    1dd4:	ac2080e7          	jalr	-1342(ra) # 5892 <unlink>
   pid = fork();
-    1de0:	00003097          	auipc	ra,0x3
-    1de4:	582080e7          	jalr	1410(ra) # 5362 <fork>
+    1dd8:	00004097          	auipc	ra,0x4
+    1ddc:	a62080e7          	jalr	-1438(ra) # 583a <fork>
   if(pid < 0){
-    1de8:	02054b63          	bltz	a0,1e1e <linkunlink+0x6a>
-    1dec:	8c2a                	mv	s8,a0
+    1de0:	02054b63          	bltz	a0,1e16 <linkunlink+0x6a>
+    1de4:	8c2a                	mv	s8,a0
   unsigned int x = (pid ? 1 : 97);
-    1dee:	4c85                	li	s9,1
-    1df0:	e119                	bnez	a0,1df6 <linkunlink+0x42>
-    1df2:	06100c93          	li	s9,97
-    1df6:	06400493          	li	s1,100
+    1de6:	4c85                	li	s9,1
+    1de8:	e119                	bnez	a0,1dee <linkunlink+0x42>
+    1dea:	06100c93          	li	s9,97
+    1dee:	06400493          	li	s1,100
     x = x * 1103515245 + 12345;
-    1dfa:	41c659b7          	lui	s3,0x41c65
-    1dfe:	e6d9899b          	addiw	s3,s3,-403
-    1e02:	690d                	lui	s2,0x3
-    1e04:	0399091b          	addiw	s2,s2,57
+    1df2:	41c659b7          	lui	s3,0x41c65
+    1df6:	e6d9899b          	addiw	s3,s3,-403
+    1dfa:	690d                	lui	s2,0x3
+    1dfc:	0399091b          	addiw	s2,s2,57
     if((x % 3) == 0){
-    1e08:	4a0d                	li	s4,3
+    1e00:	4a0d                	li	s4,3
     } else if((x % 3) == 1){
-    1e0a:	4b05                	li	s6,1
+    1e02:	4b05                	li	s6,1
       unlink("x");
-    1e0c:	00004a97          	auipc	s5,0x4
-    1e10:	b24a8a93          	addi	s5,s5,-1244 # 5930 <malloc+0x194>
+    1e04:	00004a97          	auipc	s5,0x4
+    1e08:	014a8a93          	addi	s5,s5,20 # 5e18 <malloc+0x194>
       link("cat", "x");
-    1e14:	00004b97          	auipc	s7,0x4
-    1e18:	55cb8b93          	addi	s7,s7,1372 # 6370 <malloc+0xbd4>
-    1e1c:	a825                	j	1e54 <linkunlink+0xa0>
+    1e0c:	00005b97          	auipc	s7,0x5
+    1e10:	a4cb8b93          	addi	s7,s7,-1460 # 6858 <malloc+0xbd4>
+    1e14:	a825                	j	1e4c <linkunlink+0xa0>
     printf("%s: fork failed\n", s);
-    1e1e:	85a6                	mv	a1,s1
-    1e20:	00004517          	auipc	a0,0x4
-    1e24:	2f850513          	addi	a0,a0,760 # 6118 <malloc+0x97c>
-    1e28:	00004097          	auipc	ra,0x4
-    1e2c:	8bc080e7          	jalr	-1860(ra) # 56e4 <printf>
-    exit(1);
-    1e30:	4505                	li	a0,1
-    1e32:	00003097          	auipc	ra,0x3
-    1e36:	538080e7          	jalr	1336(ra) # 536a <exit>
+    1e16:	85a6                	mv	a1,s1
+    1e18:	00004517          	auipc	a0,0x4
+    1e1c:	7e850513          	addi	a0,a0,2024 # 6600 <malloc+0x97c>
+    1e20:	00004097          	auipc	ra,0x4
+    1e24:	dac080e7          	jalr	-596(ra) # 5bcc <printf>
+    exit(1);
+    1e28:	4505                	li	a0,1
+    1e2a:	00004097          	auipc	ra,0x4
+    1e2e:	a18080e7          	jalr	-1512(ra) # 5842 <exit>
       close(open("x", O_RDWR | O_CREATE));
-    1e3a:	20200593          	li	a1,514
-    1e3e:	8556                	mv	a0,s5
-    1e40:	00003097          	auipc	ra,0x3
-    1e44:	56a080e7          	jalr	1386(ra) # 53aa <open>
-    1e48:	00003097          	auipc	ra,0x3
-    1e4c:	54a080e7          	jalr	1354(ra) # 5392 <close>
+    1e32:	20200593          	li	a1,514
+    1e36:	8556                	mv	a0,s5
+    1e38:	00004097          	auipc	ra,0x4
+    1e3c:	a4a080e7          	jalr	-1462(ra) # 5882 <open>
+    1e40:	00004097          	auipc	ra,0x4
+    1e44:	a2a080e7          	jalr	-1494(ra) # 586a <close>
   for(i = 0; i < 100; i++){
-    1e50:	34fd                	addiw	s1,s1,-1
-    1e52:	c88d                	beqz	s1,1e84 <linkunlink+0xd0>
+    1e48:	34fd                	addiw	s1,s1,-1
+    1e4a:	c88d                	beqz	s1,1e7c <linkunlink+0xd0>
     x = x * 1103515245 + 12345;
-    1e54:	033c87bb          	mulw	a5,s9,s3
-    1e58:	012787bb          	addw	a5,a5,s2
-    1e5c:	00078c9b          	sext.w	s9,a5
+    1e4c:	033c87bb          	mulw	a5,s9,s3
+    1e50:	012787bb          	addw	a5,a5,s2
+    1e54:	00078c9b          	sext.w	s9,a5
     if((x % 3) == 0){
-    1e60:	0347f7bb          	remuw	a5,a5,s4
-    1e64:	dbf9                	beqz	a5,1e3a <linkunlink+0x86>
+    1e58:	0347f7bb          	remuw	a5,a5,s4
+    1e5c:	dbf9                	beqz	a5,1e32 <linkunlink+0x86>
     } else if((x % 3) == 1){
-    1e66:	01678863          	beq	a5,s6,1e76 <linkunlink+0xc2>
+    1e5e:	01678863          	beq	a5,s6,1e6e <linkunlink+0xc2>
       unlink("x");
-    1e6a:	8556                	mv	a0,s5
-    1e6c:	00003097          	auipc	ra,0x3
-    1e70:	54e080e7          	jalr	1358(ra) # 53ba <unlink>
-    1e74:	bff1                	j	1e50 <linkunlink+0x9c>
+    1e62:	8556                	mv	a0,s5
+    1e64:	00004097          	auipc	ra,0x4
+    1e68:	a2e080e7          	jalr	-1490(ra) # 5892 <unlink>
+    1e6c:	bff1                	j	1e48 <linkunlink+0x9c>
       link("cat", "x");
-    1e76:	85d6                	mv	a1,s5
-    1e78:	855e                	mv	a0,s7
-    1e7a:	00003097          	auipc	ra,0x3
-    1e7e:	550080e7          	jalr	1360(ra) # 53ca <link>
-    1e82:	b7f9                	j	1e50 <linkunlink+0x9c>
+    1e6e:	85d6                	mv	a1,s5
+    1e70:	855e                	mv	a0,s7
+    1e72:	00004097          	auipc	ra,0x4
+    1e76:	a30080e7          	jalr	-1488(ra) # 58a2 <link>
+    1e7a:	b7f9                	j	1e48 <linkunlink+0x9c>
   if(pid)
-    1e84:	020c0463          	beqz	s8,1eac <linkunlink+0xf8>
+    1e7c:	020c0463          	beqz	s8,1ea4 <linkunlink+0xf8>
     wait(0);
-    1e88:	4501                	li	a0,0
-    1e8a:	00003097          	auipc	ra,0x3
-    1e8e:	4e8080e7          	jalr	1256(ra) # 5372 <wait>
-}
-    1e92:	60e6                	ld	ra,88(sp)
-    1e94:	6446                	ld	s0,80(sp)
-    1e96:	64a6                	ld	s1,72(sp)
-    1e98:	6906                	ld	s2,64(sp)
-    1e9a:	79e2                	ld	s3,56(sp)
-    1e9c:	7a42                	ld	s4,48(sp)
-    1e9e:	7aa2                	ld	s5,40(sp)
-    1ea0:	7b02                	ld	s6,32(sp)
-    1ea2:	6be2                	ld	s7,24(sp)
-    1ea4:	6c42                	ld	s8,16(sp)
-    1ea6:	6ca2                	ld	s9,8(sp)
-    1ea8:	6125                	addi	sp,sp,96
-    1eaa:	8082                	ret
+    1e80:	4501                	li	a0,0
+    1e82:	00004097          	auipc	ra,0x4
+    1e86:	9c8080e7          	jalr	-1592(ra) # 584a <wait>
+}
+    1e8a:	60e6                	ld	ra,88(sp)
+    1e8c:	6446                	ld	s0,80(sp)
+    1e8e:	64a6                	ld	s1,72(sp)
+    1e90:	6906                	ld	s2,64(sp)
+    1e92:	79e2                	ld	s3,56(sp)
+    1e94:	7a42                	ld	s4,48(sp)
+    1e96:	7aa2                	ld	s5,40(sp)
+    1e98:	7b02                	ld	s6,32(sp)
+    1e9a:	6be2                	ld	s7,24(sp)
+    1e9c:	6c42                	ld	s8,16(sp)
+    1e9e:	6ca2                	ld	s9,8(sp)
+    1ea0:	6125                	addi	sp,sp,96
+    1ea2:	8082                	ret
     exit(0);
-    1eac:	4501                	li	a0,0
-    1eae:	00003097          	auipc	ra,0x3
-    1eb2:	4bc080e7          	jalr	1212(ra) # 536a <exit>
-
-0000000000001eb6 <forktest>:
-{
-    1eb6:	7179                	addi	sp,sp,-48
-    1eb8:	f406                	sd	ra,40(sp)
-    1eba:	f022                	sd	s0,32(sp)
-    1ebc:	ec26                	sd	s1,24(sp)
-    1ebe:	e84a                	sd	s2,16(sp)
-    1ec0:	e44e                	sd	s3,8(sp)
-    1ec2:	1800                	addi	s0,sp,48
-    1ec4:	89aa                	mv	s3,a0
+    1ea4:	4501                	li	a0,0
+    1ea6:	00004097          	auipc	ra,0x4
+    1eaa:	99c080e7          	jalr	-1636(ra) # 5842 <exit>
+
+0000000000001eae <manywrites>:
+{
+    1eae:	711d                	addi	sp,sp,-96
+    1eb0:	ec86                	sd	ra,88(sp)
+    1eb2:	e8a2                	sd	s0,80(sp)
+    1eb4:	e4a6                	sd	s1,72(sp)
+    1eb6:	e0ca                	sd	s2,64(sp)
+    1eb8:	fc4e                	sd	s3,56(sp)
+    1eba:	f852                	sd	s4,48(sp)
+    1ebc:	f456                	sd	s5,40(sp)
+    1ebe:	f05a                	sd	s6,32(sp)
+    1ec0:	ec5e                	sd	s7,24(sp)
+    1ec2:	1080                	addi	s0,sp,96
+    1ec4:	8aaa                	mv	s5,a0
+  for(int ci = 0; ci < nchildren; ci++){
+    1ec6:	4981                	li	s3,0
+    1ec8:	4911                	li	s2,4
+    int pid = fork();
+    1eca:	00004097          	auipc	ra,0x4
+    1ece:	970080e7          	jalr	-1680(ra) # 583a <fork>
+    1ed2:	84aa                	mv	s1,a0
+    if(pid < 0){
+    1ed4:	02054963          	bltz	a0,1f06 <manywrites+0x58>
+    if(pid == 0){
+    1ed8:	c521                	beqz	a0,1f20 <manywrites+0x72>
+  for(int ci = 0; ci < nchildren; ci++){
+    1eda:	2985                	addiw	s3,s3,1
+    1edc:	ff2997e3          	bne	s3,s2,1eca <manywrites+0x1c>
+    1ee0:	4491                	li	s1,4
+    int st = 0;
+    1ee2:	fa042423          	sw	zero,-88(s0)
+    wait(&st);
+    1ee6:	fa840513          	addi	a0,s0,-88
+    1eea:	00004097          	auipc	ra,0x4
+    1eee:	960080e7          	jalr	-1696(ra) # 584a <wait>
+    if(st != 0)
+    1ef2:	fa842503          	lw	a0,-88(s0)
+    1ef6:	ed6d                	bnez	a0,1ff0 <manywrites+0x142>
+  for(int ci = 0; ci < nchildren; ci++){
+    1ef8:	34fd                	addiw	s1,s1,-1
+    1efa:	f4e5                	bnez	s1,1ee2 <manywrites+0x34>
+  exit(0);
+    1efc:	4501                	li	a0,0
+    1efe:	00004097          	auipc	ra,0x4
+    1f02:	944080e7          	jalr	-1724(ra) # 5842 <exit>
+      printf("fork failed\n");
+    1f06:	00005517          	auipc	a0,0x5
+    1f0a:	b1a50513          	addi	a0,a0,-1254 # 6a20 <malloc+0xd9c>
+    1f0e:	00004097          	auipc	ra,0x4
+    1f12:	cbe080e7          	jalr	-834(ra) # 5bcc <printf>
+      exit(1);
+    1f16:	4505                	li	a0,1
+    1f18:	00004097          	auipc	ra,0x4
+    1f1c:	92a080e7          	jalr	-1750(ra) # 5842 <exit>
+      name[0] = 'b';
+    1f20:	06200793          	li	a5,98
+    1f24:	faf40423          	sb	a5,-88(s0)
+      name[1] = 'a' + ci;
+    1f28:	0619879b          	addiw	a5,s3,97
+    1f2c:	faf404a3          	sb	a5,-87(s0)
+      name[2] = '\0';
+    1f30:	fa040523          	sb	zero,-86(s0)
+      unlink(name);
+    1f34:	fa840513          	addi	a0,s0,-88
+    1f38:	00004097          	auipc	ra,0x4
+    1f3c:	95a080e7          	jalr	-1702(ra) # 5892 <unlink>
+    1f40:	4bf9                	li	s7,30
+          int cc = write(fd, buf, sz);
+    1f42:	0000ab17          	auipc	s6,0xa
+    1f46:	ea6b0b13          	addi	s6,s6,-346 # bde8 <buf>
+        for(int i = 0; i < ci+1; i++){
+    1f4a:	8a26                	mv	s4,s1
+    1f4c:	0209ce63          	bltz	s3,1f88 <manywrites+0xda>
+          int fd = open(name, O_CREATE | O_RDWR);
+    1f50:	20200593          	li	a1,514
+    1f54:	fa840513          	addi	a0,s0,-88
+    1f58:	00004097          	auipc	ra,0x4
+    1f5c:	92a080e7          	jalr	-1750(ra) # 5882 <open>
+    1f60:	892a                	mv	s2,a0
+          if(fd < 0){
+    1f62:	04054763          	bltz	a0,1fb0 <manywrites+0x102>
+          int cc = write(fd, buf, sz);
+    1f66:	660d                	lui	a2,0x3
+    1f68:	85da                	mv	a1,s6
+    1f6a:	00004097          	auipc	ra,0x4
+    1f6e:	8f8080e7          	jalr	-1800(ra) # 5862 <write>
+          if(cc != sz){
+    1f72:	678d                	lui	a5,0x3
+    1f74:	04f51e63          	bne	a0,a5,1fd0 <manywrites+0x122>
+          close(fd);
+    1f78:	854a                	mv	a0,s2
+    1f7a:	00004097          	auipc	ra,0x4
+    1f7e:	8f0080e7          	jalr	-1808(ra) # 586a <close>
+        for(int i = 0; i < ci+1; i++){
+    1f82:	2a05                	addiw	s4,s4,1
+    1f84:	fd49d6e3          	bge	s3,s4,1f50 <manywrites+0xa2>
+        unlink(name);
+    1f88:	fa840513          	addi	a0,s0,-88
+    1f8c:	00004097          	auipc	ra,0x4
+    1f90:	906080e7          	jalr	-1786(ra) # 5892 <unlink>
+      for(int iters = 0; iters < howmany; iters++){
+    1f94:	3bfd                	addiw	s7,s7,-1
+    1f96:	fa0b9ae3          	bnez	s7,1f4a <manywrites+0x9c>
+      unlink(name);
+    1f9a:	fa840513          	addi	a0,s0,-88
+    1f9e:	00004097          	auipc	ra,0x4
+    1fa2:	8f4080e7          	jalr	-1804(ra) # 5892 <unlink>
+      exit(0);
+    1fa6:	4501                	li	a0,0
+    1fa8:	00004097          	auipc	ra,0x4
+    1fac:	89a080e7          	jalr	-1894(ra) # 5842 <exit>
+            printf("%s: cannot create %s\n", s, name);
+    1fb0:	fa840613          	addi	a2,s0,-88
+    1fb4:	85d6                	mv	a1,s5
+    1fb6:	00005517          	auipc	a0,0x5
+    1fba:	8aa50513          	addi	a0,a0,-1878 # 6860 <malloc+0xbdc>
+    1fbe:	00004097          	auipc	ra,0x4
+    1fc2:	c0e080e7          	jalr	-1010(ra) # 5bcc <printf>
+            exit(1);
+    1fc6:	4505                	li	a0,1
+    1fc8:	00004097          	auipc	ra,0x4
+    1fcc:	87a080e7          	jalr	-1926(ra) # 5842 <exit>
+            printf("%s: write(%d) ret %d\n", s, sz, cc);
+    1fd0:	86aa                	mv	a3,a0
+    1fd2:	660d                	lui	a2,0x3
+    1fd4:	85d6                	mv	a1,s5
+    1fd6:	00004517          	auipc	a0,0x4
+    1fda:	ea250513          	addi	a0,a0,-350 # 5e78 <malloc+0x1f4>
+    1fde:	00004097          	auipc	ra,0x4
+    1fe2:	bee080e7          	jalr	-1042(ra) # 5bcc <printf>
+            exit(1);
+    1fe6:	4505                	li	a0,1
+    1fe8:	00004097          	auipc	ra,0x4
+    1fec:	85a080e7          	jalr	-1958(ra) # 5842 <exit>
+      exit(st);
+    1ff0:	00004097          	auipc	ra,0x4
+    1ff4:	852080e7          	jalr	-1966(ra) # 5842 <exit>
+
+0000000000001ff8 <forktest>:
+{
+    1ff8:	7179                	addi	sp,sp,-48
+    1ffa:	f406                	sd	ra,40(sp)
+    1ffc:	f022                	sd	s0,32(sp)
+    1ffe:	ec26                	sd	s1,24(sp)
+    2000:	e84a                	sd	s2,16(sp)
+    2002:	e44e                	sd	s3,8(sp)
+    2004:	1800                	addi	s0,sp,48
+    2006:	89aa                	mv	s3,a0
   for(n=0; n<N; n++){
-    1ec6:	4481                	li	s1,0
-    1ec8:	3e800913          	li	s2,1000
+    2008:	4481                	li	s1,0
+    200a:	3e800913          	li	s2,1000
     pid = fork();
-    1ecc:	00003097          	auipc	ra,0x3
-    1ed0:	496080e7          	jalr	1174(ra) # 5362 <fork>
+    200e:	00004097          	auipc	ra,0x4
+    2012:	82c080e7          	jalr	-2004(ra) # 583a <fork>
     if(pid < 0)
-    1ed4:	02054863          	bltz	a0,1f04 <forktest+0x4e>
+    2016:	02054863          	bltz	a0,2046 <forktest+0x4e>
     if(pid == 0)
-    1ed8:	c115                	beqz	a0,1efc <forktest+0x46>
+    201a:	c115                	beqz	a0,203e <forktest+0x46>
   for(n=0; n<N; n++){
-    1eda:	2485                	addiw	s1,s1,1
-    1edc:	ff2498e3          	bne	s1,s2,1ecc <forktest+0x16>
+    201c:	2485                	addiw	s1,s1,1
+    201e:	ff2498e3          	bne	s1,s2,200e <forktest+0x16>
     printf("%s: fork claimed to work 1000 times!\n", s);
-    1ee0:	85ce                	mv	a1,s3
-    1ee2:	00004517          	auipc	a0,0x4
-    1ee6:	4ae50513          	addi	a0,a0,1198 # 6390 <malloc+0xbf4>
-    1eea:	00003097          	auipc	ra,0x3
-    1eee:	7fa080e7          	jalr	2042(ra) # 56e4 <printf>
-    exit(1);
-    1ef2:	4505                	li	a0,1
-    1ef4:	00003097          	auipc	ra,0x3
-    1ef8:	476080e7          	jalr	1142(ra) # 536a <exit>
+    2022:	85ce                	mv	a1,s3
+    2024:	00005517          	auipc	a0,0x5
+    2028:	86c50513          	addi	a0,a0,-1940 # 6890 <malloc+0xc0c>
+    202c:	00004097          	auipc	ra,0x4
+    2030:	ba0080e7          	jalr	-1120(ra) # 5bcc <printf>
+    exit(1);
+    2034:	4505                	li	a0,1
+    2036:	00004097          	auipc	ra,0x4
+    203a:	80c080e7          	jalr	-2036(ra) # 5842 <exit>
       exit(0);
-    1efc:	00003097          	auipc	ra,0x3
-    1f00:	46e080e7          	jalr	1134(ra) # 536a <exit>
+    203e:	00004097          	auipc	ra,0x4
+    2042:	804080e7          	jalr	-2044(ra) # 5842 <exit>
   if (n == 0) {
-    1f04:	cc9d                	beqz	s1,1f42 <forktest+0x8c>
+    2046:	cc9d                	beqz	s1,2084 <forktest+0x8c>
   if(n == N){
-    1f06:	3e800793          	li	a5,1000
-    1f0a:	fcf48be3          	beq	s1,a5,1ee0 <forktest+0x2a>
+    2048:	3e800793          	li	a5,1000
+    204c:	fcf48be3          	beq	s1,a5,2022 <forktest+0x2a>
   for(; n > 0; n--){
-    1f0e:	00905b63          	blez	s1,1f24 <forktest+0x6e>
+    2050:	00905b63          	blez	s1,2066 <forktest+0x6e>
     if(wait(0) < 0){
-    1f12:	4501                	li	a0,0
-    1f14:	00003097          	auipc	ra,0x3
-    1f18:	45e080e7          	jalr	1118(ra) # 5372 <wait>
-    1f1c:	04054163          	bltz	a0,1f5e <forktest+0xa8>
+    2054:	4501                	li	a0,0
+    2056:	00003097          	auipc	ra,0x3
+    205a:	7f4080e7          	jalr	2036(ra) # 584a <wait>
+    205e:	04054163          	bltz	a0,20a0 <forktest+0xa8>
   for(; n > 0; n--){
-    1f20:	34fd                	addiw	s1,s1,-1
-    1f22:	f8e5                	bnez	s1,1f12 <forktest+0x5c>
+    2062:	34fd                	addiw	s1,s1,-1
+    2064:	f8e5                	bnez	s1,2054 <forktest+0x5c>
   if(wait(0) != -1){
-    1f24:	4501                	li	a0,0
-    1f26:	00003097          	auipc	ra,0x3
-    1f2a:	44c080e7          	jalr	1100(ra) # 5372 <wait>
-    1f2e:	57fd                	li	a5,-1
-    1f30:	04f51563          	bne	a0,a5,1f7a <forktest+0xc4>
-}
-    1f34:	70a2                	ld	ra,40(sp)
-    1f36:	7402                	ld	s0,32(sp)
-    1f38:	64e2                	ld	s1,24(sp)
-    1f3a:	6942                	ld	s2,16(sp)
-    1f3c:	69a2                	ld	s3,8(sp)
-    1f3e:	6145                	addi	sp,sp,48
-    1f40:	8082                	ret
+    2066:	4501                	li	a0,0
+    2068:	00003097          	auipc	ra,0x3
+    206c:	7e2080e7          	jalr	2018(ra) # 584a <wait>
+    2070:	57fd                	li	a5,-1
+    2072:	04f51563          	bne	a0,a5,20bc <forktest+0xc4>
+}
+    2076:	70a2                	ld	ra,40(sp)
+    2078:	7402                	ld	s0,32(sp)
+    207a:	64e2                	ld	s1,24(sp)
+    207c:	6942                	ld	s2,16(sp)
+    207e:	69a2                	ld	s3,8(sp)
+    2080:	6145                	addi	sp,sp,48
+    2082:	8082                	ret
     printf("%s: no fork at all!\n", s);
-    1f42:	85ce                	mv	a1,s3
-    1f44:	00004517          	auipc	a0,0x4
-    1f48:	43450513          	addi	a0,a0,1076 # 6378 <malloc+0xbdc>
-    1f4c:	00003097          	auipc	ra,0x3
-    1f50:	798080e7          	jalr	1944(ra) # 56e4 <printf>
-    exit(1);
-    1f54:	4505                	li	a0,1
-    1f56:	00003097          	auipc	ra,0x3
-    1f5a:	414080e7          	jalr	1044(ra) # 536a <exit>
+    2084:	85ce                	mv	a1,s3
+    2086:	00004517          	auipc	a0,0x4
+    208a:	7f250513          	addi	a0,a0,2034 # 6878 <malloc+0xbf4>
+    208e:	00004097          	auipc	ra,0x4
+    2092:	b3e080e7          	jalr	-1218(ra) # 5bcc <printf>
+    exit(1);
+    2096:	4505                	li	a0,1
+    2098:	00003097          	auipc	ra,0x3
+    209c:	7aa080e7          	jalr	1962(ra) # 5842 <exit>
       printf("%s: wait stopped early\n", s);
-    1f5e:	85ce                	mv	a1,s3
-    1f60:	00004517          	auipc	a0,0x4
-    1f64:	45850513          	addi	a0,a0,1112 # 63b8 <malloc+0xc1c>
-    1f68:	00003097          	auipc	ra,0x3
-    1f6c:	77c080e7          	jalr	1916(ra) # 56e4 <printf>
-      exit(1);
-    1f70:	4505                	li	a0,1
-    1f72:	00003097          	auipc	ra,0x3
-    1f76:	3f8080e7          	jalr	1016(ra) # 536a <exit>
+    20a0:	85ce                	mv	a1,s3
+    20a2:	00005517          	auipc	a0,0x5
+    20a6:	81650513          	addi	a0,a0,-2026 # 68b8 <malloc+0xc34>
+    20aa:	00004097          	auipc	ra,0x4
+    20ae:	b22080e7          	jalr	-1246(ra) # 5bcc <printf>
+      exit(1);
+    20b2:	4505                	li	a0,1
+    20b4:	00003097          	auipc	ra,0x3
+    20b8:	78e080e7          	jalr	1934(ra) # 5842 <exit>
     printf("%s: wait got too many\n", s);
-    1f7a:	85ce                	mv	a1,s3
-    1f7c:	00004517          	auipc	a0,0x4
-    1f80:	45450513          	addi	a0,a0,1108 # 63d0 <malloc+0xc34>
-    1f84:	00003097          	auipc	ra,0x3
-    1f88:	760080e7          	jalr	1888(ra) # 56e4 <printf>
-    exit(1);
-    1f8c:	4505                	li	a0,1
-    1f8e:	00003097          	auipc	ra,0x3
-    1f92:	3dc080e7          	jalr	988(ra) # 536a <exit>
-
-0000000000001f96 <kernmem>:
-{
-    1f96:	715d                	addi	sp,sp,-80
-    1f98:	e486                	sd	ra,72(sp)
-    1f9a:	e0a2                	sd	s0,64(sp)
-    1f9c:	fc26                	sd	s1,56(sp)
-    1f9e:	f84a                	sd	s2,48(sp)
-    1fa0:	f44e                	sd	s3,40(sp)
-    1fa2:	f052                	sd	s4,32(sp)
-    1fa4:	ec56                	sd	s5,24(sp)
-    1fa6:	0880                	addi	s0,sp,80
-    1fa8:	8a2a                	mv	s4,a0
+    20bc:	85ce                	mv	a1,s3
+    20be:	00005517          	auipc	a0,0x5
+    20c2:	81250513          	addi	a0,a0,-2030 # 68d0 <malloc+0xc4c>
+    20c6:	00004097          	auipc	ra,0x4
+    20ca:	b06080e7          	jalr	-1274(ra) # 5bcc <printf>
+    exit(1);
+    20ce:	4505                	li	a0,1
+    20d0:	00003097          	auipc	ra,0x3
+    20d4:	772080e7          	jalr	1906(ra) # 5842 <exit>
+
+00000000000020d8 <kernmem>:
+{
+    20d8:	715d                	addi	sp,sp,-80
+    20da:	e486                	sd	ra,72(sp)
+    20dc:	e0a2                	sd	s0,64(sp)
+    20de:	fc26                	sd	s1,56(sp)
+    20e0:	f84a                	sd	s2,48(sp)
+    20e2:	f44e                	sd	s3,40(sp)
+    20e4:	f052                	sd	s4,32(sp)
+    20e6:	ec56                	sd	s5,24(sp)
+    20e8:	0880                	addi	s0,sp,80
+    20ea:	8a2a                	mv	s4,a0
   for(a = (char*)(KERNBASE); a < (char*) (KERNBASE+2000000); a += 50000){
-    1faa:	4485                	li	s1,1
-    1fac:	04fe                	slli	s1,s1,0x1f
+    20ec:	4485                	li	s1,1
+    20ee:	04fe                	slli	s1,s1,0x1f
     if(xstatus != -1)  // did kernel kill child?
-    1fae:	5afd                	li	s5,-1
+    20f0:	5afd                	li	s5,-1
   for(a = (char*)(KERNBASE); a < (char*) (KERNBASE+2000000); a += 50000){
-    1fb0:	69b1                	lui	s3,0xc
-    1fb2:	35098993          	addi	s3,s3,848 # c350 <buf+0xbd0>
-    1fb6:	1003d937          	lui	s2,0x1003d
-    1fba:	090e                	slli	s2,s2,0x3
-    1fbc:	48090913          	addi	s2,s2,1152 # 1003d480 <__BSS_END__+0x1002ecf0>
+    20f2:	69b1                	lui	s3,0xc
+    20f4:	35098993          	addi	s3,s3,848 # c350 <buf+0x568>
+    20f8:	1003d937          	lui	s2,0x1003d
+    20fc:	090e                	slli	s2,s2,0x3
+    20fe:	48090913          	addi	s2,s2,1152 # 1003d480 <__BSS_END__+0x1002e688>
     pid = fork();
-    1fc0:	00003097          	auipc	ra,0x3
-    1fc4:	3a2080e7          	jalr	930(ra) # 5362 <fork>
+    2102:	00003097          	auipc	ra,0x3
+    2106:	738080e7          	jalr	1848(ra) # 583a <fork>
     if(pid < 0){
-    1fc8:	02054963          	bltz	a0,1ffa <kernmem+0x64>
+    210a:	02054963          	bltz	a0,213c <kernmem+0x64>
     if(pid == 0){
-    1fcc:	c529                	beqz	a0,2016 <kernmem+0x80>
+    210e:	c529                	beqz	a0,2158 <kernmem+0x80>
     wait(&xstatus);
-    1fce:	fbc40513          	addi	a0,s0,-68
-    1fd2:	00003097          	auipc	ra,0x3
-    1fd6:	3a0080e7          	jalr	928(ra) # 5372 <wait>
+    2110:	fbc40513          	addi	a0,s0,-68
+    2114:	00003097          	auipc	ra,0x3
+    2118:	736080e7          	jalr	1846(ra) # 584a <wait>
     if(xstatus != -1)  // did kernel kill child?
-    1fda:	fbc42783          	lw	a5,-68(s0)
-    1fde:	05579c63          	bne	a5,s5,2036 <kernmem+0xa0>
+    211c:	fbc42783          	lw	a5,-68(s0)
+    2120:	05579d63          	bne	a5,s5,217a <kernmem+0xa2>
   for(a = (char*)(KERNBASE); a < (char*) (KERNBASE+2000000); a += 50000){
-    1fe2:	94ce                	add	s1,s1,s3
-    1fe4:	fd249ee3          	bne	s1,s2,1fc0 <kernmem+0x2a>
+    2124:	94ce                	add	s1,s1,s3
+    2126:	fd249ee3          	bne	s1,s2,2102 <kernmem+0x2a>
 }
-    1fe8:	60a6                	ld	ra,72(sp)
-    1fea:	6406                	ld	s0,64(sp)
-    1fec:	74e2                	ld	s1,56(sp)
-    1fee:	7942                	ld	s2,48(sp)
-    1ff0:	79a2                	ld	s3,40(sp)
-    1ff2:	7a02                	ld	s4,32(sp)
-    1ff4:	6ae2                	ld	s5,24(sp)
-    1ff6:	6161                	addi	sp,sp,80
-    1ff8:	8082                	ret
+    212a:	60a6                	ld	ra,72(sp)
+    212c:	6406                	ld	s0,64(sp)
+    212e:	74e2                	ld	s1,56(sp)
+    2130:	7942                	ld	s2,48(sp)
+    2132:	79a2                	ld	s3,40(sp)
+    2134:	7a02                	ld	s4,32(sp)
+    2136:	6ae2                	ld	s5,24(sp)
+    2138:	6161                	addi	sp,sp,80
+    213a:	8082                	ret
       printf("%s: fork failed\n", s);
-    1ffa:	85d2                	mv	a1,s4
-    1ffc:	00004517          	auipc	a0,0x4
-    2000:	11c50513          	addi	a0,a0,284 # 6118 <malloc+0x97c>
-    2004:	00003097          	auipc	ra,0x3
-    2008:	6e0080e7          	jalr	1760(ra) # 56e4 <printf>
-      exit(1);
-    200c:	4505                	li	a0,1
-    200e:	00003097          	auipc	ra,0x3
-    2012:	35c080e7          	jalr	860(ra) # 536a <exit>
-      printf("%s: oops could read %x = %x\n", a, *a);
-    2016:	0004c603          	lbu	a2,0(s1)
-    201a:	85a6                	mv	a1,s1
-    201c:	00004517          	auipc	a0,0x4
-    2020:	3cc50513          	addi	a0,a0,972 # 63e8 <malloc+0xc4c>
-    2024:	00003097          	auipc	ra,0x3
-    2028:	6c0080e7          	jalr	1728(ra) # 56e4 <printf>
-      exit(1);
-    202c:	4505                	li	a0,1
-    202e:	00003097          	auipc	ra,0x3
-    2032:	33c080e7          	jalr	828(ra) # 536a <exit>
-      exit(1);
-    2036:	4505                	li	a0,1
-    2038:	00003097          	auipc	ra,0x3
-    203c:	332080e7          	jalr	818(ra) # 536a <exit>
-
-0000000000002040 <bigargtest>:
-{
-    2040:	7179                	addi	sp,sp,-48
-    2042:	f406                	sd	ra,40(sp)
-    2044:	f022                	sd	s0,32(sp)
-    2046:	ec26                	sd	s1,24(sp)
-    2048:	1800                	addi	s0,sp,48
-    204a:	84aa                	mv	s1,a0
+    213c:	85d2                	mv	a1,s4
+    213e:	00004517          	auipc	a0,0x4
+    2142:	4c250513          	addi	a0,a0,1218 # 6600 <malloc+0x97c>
+    2146:	00004097          	auipc	ra,0x4
+    214a:	a86080e7          	jalr	-1402(ra) # 5bcc <printf>
+      exit(1);
+    214e:	4505                	li	a0,1
+    2150:	00003097          	auipc	ra,0x3
+    2154:	6f2080e7          	jalr	1778(ra) # 5842 <exit>
+      printf("%s: oops could read %x = %x\n", s, a, *a);
+    2158:	0004c683          	lbu	a3,0(s1)
+    215c:	8626                	mv	a2,s1
+    215e:	85d2                	mv	a1,s4
+    2160:	00004517          	auipc	a0,0x4
+    2164:	78850513          	addi	a0,a0,1928 # 68e8 <malloc+0xc64>
+    2168:	00004097          	auipc	ra,0x4
+    216c:	a64080e7          	jalr	-1436(ra) # 5bcc <printf>
+      exit(1);
+    2170:	4505                	li	a0,1
+    2172:	00003097          	auipc	ra,0x3
+    2176:	6d0080e7          	jalr	1744(ra) # 5842 <exit>
+      exit(1);
+    217a:	4505                	li	a0,1
+    217c:	00003097          	auipc	ra,0x3
+    2180:	6c6080e7          	jalr	1734(ra) # 5842 <exit>
+
+0000000000002184 <MAXVAplus>:
+{
+    2184:	7179                	addi	sp,sp,-48
+    2186:	f406                	sd	ra,40(sp)
+    2188:	f022                	sd	s0,32(sp)
+    218a:	ec26                	sd	s1,24(sp)
+    218c:	e84a                	sd	s2,16(sp)
+    218e:	1800                	addi	s0,sp,48
+  volatile uint64 a = MAXVA;
+    2190:	4785                	li	a5,1
+    2192:	179a                	slli	a5,a5,0x26
+    2194:	fcf43c23          	sd	a5,-40(s0)
+  for( ; a != 0; a <<= 1){
+    2198:	fd843783          	ld	a5,-40(s0)
+    219c:	cf85                	beqz	a5,21d4 <MAXVAplus+0x50>
+    219e:	892a                	mv	s2,a0
+    if(xstatus != -1)  // did kernel kill child?
+    21a0:	54fd                	li	s1,-1
+    pid = fork();
+    21a2:	00003097          	auipc	ra,0x3
+    21a6:	698080e7          	jalr	1688(ra) # 583a <fork>
+    if(pid < 0){
+    21aa:	02054b63          	bltz	a0,21e0 <MAXVAplus+0x5c>
+    if(pid == 0){
+    21ae:	c539                	beqz	a0,21fc <MAXVAplus+0x78>
+    wait(&xstatus);
+    21b0:	fd440513          	addi	a0,s0,-44
+    21b4:	00003097          	auipc	ra,0x3
+    21b8:	696080e7          	jalr	1686(ra) # 584a <wait>
+    if(xstatus != -1)  // did kernel kill child?
+    21bc:	fd442783          	lw	a5,-44(s0)
+    21c0:	06979463          	bne	a5,s1,2228 <MAXVAplus+0xa4>
+  for( ; a != 0; a <<= 1){
+    21c4:	fd843783          	ld	a5,-40(s0)
+    21c8:	0786                	slli	a5,a5,0x1
+    21ca:	fcf43c23          	sd	a5,-40(s0)
+    21ce:	fd843783          	ld	a5,-40(s0)
+    21d2:	fbe1                	bnez	a5,21a2 <MAXVAplus+0x1e>
+}
+    21d4:	70a2                	ld	ra,40(sp)
+    21d6:	7402                	ld	s0,32(sp)
+    21d8:	64e2                	ld	s1,24(sp)
+    21da:	6942                	ld	s2,16(sp)
+    21dc:	6145                	addi	sp,sp,48
+    21de:	8082                	ret
+      printf("%s: fork failed\n", s);
+    21e0:	85ca                	mv	a1,s2
+    21e2:	00004517          	auipc	a0,0x4
+    21e6:	41e50513          	addi	a0,a0,1054 # 6600 <malloc+0x97c>
+    21ea:	00004097          	auipc	ra,0x4
+    21ee:	9e2080e7          	jalr	-1566(ra) # 5bcc <printf>
+      exit(1);
+    21f2:	4505                	li	a0,1
+    21f4:	00003097          	auipc	ra,0x3
+    21f8:	64e080e7          	jalr	1614(ra) # 5842 <exit>
+      *(char*)a = 99;
+    21fc:	fd843783          	ld	a5,-40(s0)
+    2200:	06300713          	li	a4,99
+    2204:	00e78023          	sb	a4,0(a5) # 3000 <iputtest+0x8c>
+      printf("%s: oops wrote %x\n", s, a);
+    2208:	fd843603          	ld	a2,-40(s0)
+    220c:	85ca                	mv	a1,s2
+    220e:	00004517          	auipc	a0,0x4
+    2212:	6fa50513          	addi	a0,a0,1786 # 6908 <malloc+0xc84>
+    2216:	00004097          	auipc	ra,0x4
+    221a:	9b6080e7          	jalr	-1610(ra) # 5bcc <printf>
+      exit(1);
+    221e:	4505                	li	a0,1
+    2220:	00003097          	auipc	ra,0x3
+    2224:	622080e7          	jalr	1570(ra) # 5842 <exit>
+      exit(1);
+    2228:	4505                	li	a0,1
+    222a:	00003097          	auipc	ra,0x3
+    222e:	618080e7          	jalr	1560(ra) # 5842 <exit>
+
+0000000000002232 <bigargtest>:
+{
+    2232:	7179                	addi	sp,sp,-48
+    2234:	f406                	sd	ra,40(sp)
+    2236:	f022                	sd	s0,32(sp)
+    2238:	ec26                	sd	s1,24(sp)
+    223a:	1800                	addi	s0,sp,48
+    223c:	84aa                	mv	s1,a0
   unlink("bigarg-ok");
-    204c:	00004517          	auipc	a0,0x4
-    2050:	3bc50513          	addi	a0,a0,956 # 6408 <malloc+0xc6c>
-    2054:	00003097          	auipc	ra,0x3
-    2058:	366080e7          	jalr	870(ra) # 53ba <unlink>
+    223e:	00004517          	auipc	a0,0x4
+    2242:	6e250513          	addi	a0,a0,1762 # 6920 <malloc+0xc9c>
+    2246:	00003097          	auipc	ra,0x3
+    224a:	64c080e7          	jalr	1612(ra) # 5892 <unlink>
   pid = fork();
-    205c:	00003097          	auipc	ra,0x3
-    2060:	306080e7          	jalr	774(ra) # 5362 <fork>
+    224e:	00003097          	auipc	ra,0x3
+    2252:	5ec080e7          	jalr	1516(ra) # 583a <fork>
   if(pid == 0){
-    2064:	c121                	beqz	a0,20a4 <bigargtest+0x64>
+    2256:	c121                	beqz	a0,2296 <bigargtest+0x64>
   } else if(pid < 0){
-    2066:	0a054063          	bltz	a0,2106 <bigargtest+0xc6>
+    2258:	0a054063          	bltz	a0,22f8 <bigargtest+0xc6>
   wait(&xstatus);
-    206a:	fdc40513          	addi	a0,s0,-36
-    206e:	00003097          	auipc	ra,0x3
-    2072:	304080e7          	jalr	772(ra) # 5372 <wait>
+    225c:	fdc40513          	addi	a0,s0,-36
+    2260:	00003097          	auipc	ra,0x3
+    2264:	5ea080e7          	jalr	1514(ra) # 584a <wait>
   if(xstatus != 0)
-    2076:	fdc42503          	lw	a0,-36(s0)
-    207a:	e545                	bnez	a0,2122 <bigargtest+0xe2>
+    2268:	fdc42503          	lw	a0,-36(s0)
+    226c:	e545                	bnez	a0,2314 <bigargtest+0xe2>
   fd = open("bigarg-ok", 0);
-    207c:	4581                	li	a1,0
-    207e:	00004517          	auipc	a0,0x4
-    2082:	38a50513          	addi	a0,a0,906 # 6408 <malloc+0xc6c>
-    2086:	00003097          	auipc	ra,0x3
-    208a:	324080e7          	jalr	804(ra) # 53aa <open>
+    226e:	4581                	li	a1,0
+    2270:	00004517          	auipc	a0,0x4
+    2274:	6b050513          	addi	a0,a0,1712 # 6920 <malloc+0xc9c>
+    2278:	00003097          	auipc	ra,0x3
+    227c:	60a080e7          	jalr	1546(ra) # 5882 <open>
   if(fd < 0){
-    208e:	08054e63          	bltz	a0,212a <bigargtest+0xea>
+    2280:	08054e63          	bltz	a0,231c <bigargtest+0xea>
   close(fd);
-    2092:	00003097          	auipc	ra,0x3
-    2096:	300080e7          	jalr	768(ra) # 5392 <close>
+    2284:	00003097          	auipc	ra,0x3
+    2288:	5e6080e7          	jalr	1510(ra) # 586a <close>
 }
-    209a:	70a2                	ld	ra,40(sp)
-    209c:	7402                	ld	s0,32(sp)
-    209e:	64e2                	ld	s1,24(sp)
-    20a0:	6145                	addi	sp,sp,48
-    20a2:	8082                	ret
-    20a4:	00006797          	auipc	a5,0x6
-    20a8:	ec478793          	addi	a5,a5,-316 # 7f68 <args.1>
-    20ac:	00006697          	auipc	a3,0x6
-    20b0:	fb468693          	addi	a3,a3,-76 # 8060 <args.1+0xf8>
+    228c:	70a2                	ld	ra,40(sp)
+    228e:	7402                	ld	s0,32(sp)
+    2290:	64e2                	ld	s1,24(sp)
+    2292:	6145                	addi	sp,sp,48
+    2294:	8082                	ret
+    2296:	00006797          	auipc	a5,0x6
+    229a:	33a78793          	addi	a5,a5,826 # 85d0 <args.1>
+    229e:	00006697          	auipc	a3,0x6
+    22a2:	42a68693          	addi	a3,a3,1066 # 86c8 <args.1+0xf8>
       args[i] = "bigargs test: failed\n                                                                                                                                                                                                       ";
-    20b4:	00004717          	auipc	a4,0x4
-    20b8:	36470713          	addi	a4,a4,868 # 6418 <malloc+0xc7c>
-    20bc:	e398                	sd	a4,0(a5)
+    22a6:	00004717          	auipc	a4,0x4
+    22aa:	68a70713          	addi	a4,a4,1674 # 6930 <malloc+0xcac>
+    22ae:	e398                	sd	a4,0(a5)
     for(i = 0; i < MAXARG-1; i++)
-    20be:	07a1                	addi	a5,a5,8
-    20c0:	fed79ee3          	bne	a5,a3,20bc <bigargtest+0x7c>
+    22b0:	07a1                	addi	a5,a5,8
+    22b2:	fed79ee3          	bne	a5,a3,22ae <bigargtest+0x7c>
     args[MAXARG-1] = 0;
-    20c4:	00006597          	auipc	a1,0x6
-    20c8:	ea458593          	addi	a1,a1,-348 # 7f68 <args.1>
-    20cc:	0e05bc23          	sd	zero,248(a1)
+    22b6:	00006597          	auipc	a1,0x6
+    22ba:	31a58593          	addi	a1,a1,794 # 85d0 <args.1>
+    22be:	0e05bc23          	sd	zero,248(a1)
     exec("echo", args);
-    20d0:	00003517          	auipc	a0,0x3
-    20d4:	7f050513          	addi	a0,a0,2032 # 58c0 <malloc+0x124>
-    20d8:	00003097          	auipc	ra,0x3
-    20dc:	2ca080e7          	jalr	714(ra) # 53a2 <exec>
+    22c2:	00004517          	auipc	a0,0x4
+    22c6:	ae650513          	addi	a0,a0,-1306 # 5da8 <malloc+0x124>
+    22ca:	00003097          	auipc	ra,0x3
+    22ce:	5b0080e7          	jalr	1456(ra) # 587a <exec>
     fd = open("bigarg-ok", O_CREATE);
-    20e0:	20000593          	li	a1,512
-    20e4:	00004517          	auipc	a0,0x4
-    20e8:	32450513          	addi	a0,a0,804 # 6408 <malloc+0xc6c>
-    20ec:	00003097          	auipc	ra,0x3
-    20f0:	2be080e7          	jalr	702(ra) # 53aa <open>
+    22d2:	20000593          	li	a1,512
+    22d6:	00004517          	auipc	a0,0x4
+    22da:	64a50513          	addi	a0,a0,1610 # 6920 <malloc+0xc9c>
+    22de:	00003097          	auipc	ra,0x3
+    22e2:	5a4080e7          	jalr	1444(ra) # 5882 <open>
     close(fd);
-    20f4:	00003097          	auipc	ra,0x3
-    20f8:	29e080e7          	jalr	670(ra) # 5392 <close>
+    22e6:	00003097          	auipc	ra,0x3
+    22ea:	584080e7          	jalr	1412(ra) # 586a <close>
     exit(0);
-    20fc:	4501                	li	a0,0
-    20fe:	00003097          	auipc	ra,0x3
-    2102:	26c080e7          	jalr	620(ra) # 536a <exit>
+    22ee:	4501                	li	a0,0
+    22f0:	00003097          	auipc	ra,0x3
+    22f4:	552080e7          	jalr	1362(ra) # 5842 <exit>
     printf("%s: bigargtest: fork failed\n", s);
-    2106:	85a6                	mv	a1,s1
-    2108:	00004517          	auipc	a0,0x4
-    210c:	3f050513          	addi	a0,a0,1008 # 64f8 <malloc+0xd5c>
-    2110:	00003097          	auipc	ra,0x3
-    2114:	5d4080e7          	jalr	1492(ra) # 56e4 <printf>
-    exit(1);
-    2118:	4505                	li	a0,1
-    211a:	00003097          	auipc	ra,0x3
-    211e:	250080e7          	jalr	592(ra) # 536a <exit>
+    22f8:	85a6                	mv	a1,s1
+    22fa:	00004517          	auipc	a0,0x4
+    22fe:	71650513          	addi	a0,a0,1814 # 6a10 <malloc+0xd8c>
+    2302:	00004097          	auipc	ra,0x4
+    2306:	8ca080e7          	jalr	-1846(ra) # 5bcc <printf>
+    exit(1);
+    230a:	4505                	li	a0,1
+    230c:	00003097          	auipc	ra,0x3
+    2310:	536080e7          	jalr	1334(ra) # 5842 <exit>
     exit(xstatus);
-    2122:	00003097          	auipc	ra,0x3
-    2126:	248080e7          	jalr	584(ra) # 536a <exit>
+    2314:	00003097          	auipc	ra,0x3
+    2318:	52e080e7          	jalr	1326(ra) # 5842 <exit>
     printf("%s: bigarg test failed!\n", s);
-    212a:	85a6                	mv	a1,s1
-    212c:	00004517          	auipc	a0,0x4
-    2130:	3ec50513          	addi	a0,a0,1004 # 6518 <malloc+0xd7c>
-    2134:	00003097          	auipc	ra,0x3
-    2138:	5b0080e7          	jalr	1456(ra) # 56e4 <printf>
-    exit(1);
-    213c:	4505                	li	a0,1
-    213e:	00003097          	auipc	ra,0x3
-    2142:	22c080e7          	jalr	556(ra) # 536a <exit>
-
-0000000000002146 <stacktest>:
-{
-    2146:	7179                	addi	sp,sp,-48
-    2148:	f406                	sd	ra,40(sp)
-    214a:	f022                	sd	s0,32(sp)
-    214c:	ec26                	sd	s1,24(sp)
-    214e:	1800                	addi	s0,sp,48
-    2150:	84aa                	mv	s1,a0
+    231c:	85a6                	mv	a1,s1
+    231e:	00004517          	auipc	a0,0x4
+    2322:	71250513          	addi	a0,a0,1810 # 6a30 <malloc+0xdac>
+    2326:	00004097          	auipc	ra,0x4
+    232a:	8a6080e7          	jalr	-1882(ra) # 5bcc <printf>
+    exit(1);
+    232e:	4505                	li	a0,1
+    2330:	00003097          	auipc	ra,0x3
+    2334:	512080e7          	jalr	1298(ra) # 5842 <exit>
+
+0000000000002338 <stacktest>:
+{
+    2338:	7179                	addi	sp,sp,-48
+    233a:	f406                	sd	ra,40(sp)
+    233c:	f022                	sd	s0,32(sp)
+    233e:	ec26                	sd	s1,24(sp)
+    2340:	1800                	addi	s0,sp,48
+    2342:	84aa                	mv	s1,a0
   pid = fork();
-    2152:	00003097          	auipc	ra,0x3
-    2156:	210080e7          	jalr	528(ra) # 5362 <fork>
+    2344:	00003097          	auipc	ra,0x3
+    2348:	4f6080e7          	jalr	1270(ra) # 583a <fork>
   if(pid == 0) {
-    215a:	c115                	beqz	a0,217e <stacktest+0x38>
+    234c:	c115                	beqz	a0,2370 <stacktest+0x38>
   } else if(pid < 0){
-    215c:	04054363          	bltz	a0,21a2 <stacktest+0x5c>
+    234e:	04054463          	bltz	a0,2396 <stacktest+0x5e>
   wait(&xstatus);
-    2160:	fdc40513          	addi	a0,s0,-36
-    2164:	00003097          	auipc	ra,0x3
-    2168:	20e080e7          	jalr	526(ra) # 5372 <wait>
+    2352:	fdc40513          	addi	a0,s0,-36
+    2356:	00003097          	auipc	ra,0x3
+    235a:	4f4080e7          	jalr	1268(ra) # 584a <wait>
   if(xstatus == -1)  // kernel killed child?
-    216c:	fdc42503          	lw	a0,-36(s0)
-    2170:	57fd                	li	a5,-1
-    2172:	04f50663          	beq	a0,a5,21be <stacktest+0x78>
+    235e:	fdc42503          	lw	a0,-36(s0)
+    2362:	57fd                	li	a5,-1
+    2364:	04f50763          	beq	a0,a5,23b2 <stacktest+0x7a>
     exit(xstatus);
-    2176:	00003097          	auipc	ra,0x3
-    217a:	1f4080e7          	jalr	500(ra) # 536a <exit>
+    2368:	00003097          	auipc	ra,0x3
+    236c:	4da080e7          	jalr	1242(ra) # 5842 <exit>
 
 static inline uint64
 r_sp()
 {
   uint64 x;
   asm volatile("mv %0, sp" : "=r" (x) );
-    217e:	870a                	mv	a4,sp
-    printf("%s: stacktest: read below stack %p\n", *sp);
-    2180:	77fd                	lui	a5,0xfffff
-    2182:	97ba                	add	a5,a5,a4
-    2184:	0007c583          	lbu	a1,0(a5) # fffffffffffff000 <__BSS_END__+0xffffffffffff0870>
-    2188:	00004517          	auipc	a0,0x4
-    218c:	3b050513          	addi	a0,a0,944 # 6538 <malloc+0xd9c>
-    2190:	00003097          	auipc	ra,0x3
-    2194:	554080e7          	jalr	1364(ra) # 56e4 <printf>
-    exit(1);
-    2198:	4505                	li	a0,1
-    219a:	00003097          	auipc	ra,0x3
-    219e:	1d0080e7          	jalr	464(ra) # 536a <exit>
+    2370:	870a                	mv	a4,sp
+    printf("%s: stacktest: read below stack %p\n", s, *sp);
+    2372:	77fd                	lui	a5,0xfffff
+    2374:	97ba                	add	a5,a5,a4
+    2376:	0007c603          	lbu	a2,0(a5) # fffffffffffff000 <__BSS_END__+0xffffffffffff0208>
+    237a:	85a6                	mv	a1,s1
+    237c:	00004517          	auipc	a0,0x4
+    2380:	6d450513          	addi	a0,a0,1748 # 6a50 <malloc+0xdcc>
+    2384:	00004097          	auipc	ra,0x4
+    2388:	848080e7          	jalr	-1976(ra) # 5bcc <printf>
+    exit(1);
+    238c:	4505                	li	a0,1
+    238e:	00003097          	auipc	ra,0x3
+    2392:	4b4080e7          	jalr	1204(ra) # 5842 <exit>
     printf("%s: fork failed\n", s);
-    21a2:	85a6                	mv	a1,s1
-    21a4:	00004517          	auipc	a0,0x4
-    21a8:	f7450513          	addi	a0,a0,-140 # 6118 <malloc+0x97c>
-    21ac:	00003097          	auipc	ra,0x3
-    21b0:	538080e7          	jalr	1336(ra) # 56e4 <printf>
-    exit(1);
-    21b4:	4505                	li	a0,1
-    21b6:	00003097          	auipc	ra,0x3
-    21ba:	1b4080e7          	jalr	436(ra) # 536a <exit>
+    2396:	85a6                	mv	a1,s1
+    2398:	00004517          	auipc	a0,0x4
+    239c:	26850513          	addi	a0,a0,616 # 6600 <malloc+0x97c>
+    23a0:	00004097          	auipc	ra,0x4
+    23a4:	82c080e7          	jalr	-2004(ra) # 5bcc <printf>
+    exit(1);
+    23a8:	4505                	li	a0,1
+    23aa:	00003097          	auipc	ra,0x3
+    23ae:	498080e7          	jalr	1176(ra) # 5842 <exit>
     exit(0);
-    21be:	4501                	li	a0,0
-    21c0:	00003097          	auipc	ra,0x3
-    21c4:	1aa080e7          	jalr	426(ra) # 536a <exit>
-
-00000000000021c8 <copyinstr3>:
-{
-    21c8:	7179                	addi	sp,sp,-48
-    21ca:	f406                	sd	ra,40(sp)
-    21cc:	f022                	sd	s0,32(sp)
-    21ce:	ec26                	sd	s1,24(sp)
-    21d0:	1800                	addi	s0,sp,48
+    23b2:	4501                	li	a0,0
+    23b4:	00003097          	auipc	ra,0x3
+    23b8:	48e080e7          	jalr	1166(ra) # 5842 <exit>
+
+00000000000023bc <copyinstr3>:
+{
+    23bc:	7179                	addi	sp,sp,-48
+    23be:	f406                	sd	ra,40(sp)
+    23c0:	f022                	sd	s0,32(sp)
+    23c2:	ec26                	sd	s1,24(sp)
+    23c4:	1800                	addi	s0,sp,48
   sbrk(8192);
-    21d2:	6509                	lui	a0,0x2
-    21d4:	00003097          	auipc	ra,0x3
-    21d8:	21e080e7          	jalr	542(ra) # 53f2 <sbrk>
+    23c6:	6509                	lui	a0,0x2
+    23c8:	00003097          	auipc	ra,0x3
+    23cc:	502080e7          	jalr	1282(ra) # 58ca <sbrk>
   uint64 top = (uint64) sbrk(0);
-    21dc:	4501                	li	a0,0
-    21de:	00003097          	auipc	ra,0x3
-    21e2:	214080e7          	jalr	532(ra) # 53f2 <sbrk>
+    23d0:	4501                	li	a0,0
+    23d2:	00003097          	auipc	ra,0x3
+    23d6:	4f8080e7          	jalr	1272(ra) # 58ca <sbrk>
   if((top % PGSIZE) != 0){
-    21e6:	03451793          	slli	a5,a0,0x34
-    21ea:	e3c9                	bnez	a5,226c <copyinstr3+0xa4>
+    23da:	03451793          	slli	a5,a0,0x34
+    23de:	e3c9                	bnez	a5,2460 <copyinstr3+0xa4>
   top = (uint64) sbrk(0);
-    21ec:	4501                	li	a0,0
-    21ee:	00003097          	auipc	ra,0x3
-    21f2:	204080e7          	jalr	516(ra) # 53f2 <sbrk>
+    23e0:	4501                	li	a0,0
+    23e2:	00003097          	auipc	ra,0x3
+    23e6:	4e8080e7          	jalr	1256(ra) # 58ca <sbrk>
   if(top % PGSIZE){
-    21f6:	03451793          	slli	a5,a0,0x34
-    21fa:	e3d9                	bnez	a5,2280 <copyinstr3+0xb8>
+    23ea:	03451793          	slli	a5,a0,0x34
+    23ee:	e3d9                	bnez	a5,2474 <copyinstr3+0xb8>
   char *b = (char *) (top - 1);
-    21fc:	fff50493          	addi	s1,a0,-1 # 1fff <kernmem+0x69>
+    23f0:	fff50493          	addi	s1,a0,-1 # 1fff <forktest+0x7>
   *b = 'x';
-    2200:	07800793          	li	a5,120
-    2204:	fef50fa3          	sb	a5,-1(a0)
+    23f4:	07800793          	li	a5,120
+    23f8:	fef50fa3          	sb	a5,-1(a0)
   int ret = unlink(b);
-    2208:	8526                	mv	a0,s1
-    220a:	00003097          	auipc	ra,0x3
-    220e:	1b0080e7          	jalr	432(ra) # 53ba <unlink>
+    23fc:	8526                	mv	a0,s1
+    23fe:	00003097          	auipc	ra,0x3
+    2402:	494080e7          	jalr	1172(ra) # 5892 <unlink>
   if(ret != -1){
-    2212:	57fd                	li	a5,-1
-    2214:	08f51363          	bne	a0,a5,229a <copyinstr3+0xd2>
+    2406:	57fd                	li	a5,-1
+    2408:	08f51363          	bne	a0,a5,248e <copyinstr3+0xd2>
   int fd = open(b, O_CREATE | O_WRONLY);
-    2218:	20100593          	li	a1,513
-    221c:	8526                	mv	a0,s1
-    221e:	00003097          	auipc	ra,0x3
-    2222:	18c080e7          	jalr	396(ra) # 53aa <open>
+    240c:	20100593          	li	a1,513
+    2410:	8526                	mv	a0,s1
+    2412:	00003097          	auipc	ra,0x3
+    2416:	470080e7          	jalr	1136(ra) # 5882 <open>
   if(fd != -1){
-    2226:	57fd                	li	a5,-1
-    2228:	08f51863          	bne	a0,a5,22b8 <copyinstr3+0xf0>
+    241a:	57fd                	li	a5,-1
+    241c:	08f51863          	bne	a0,a5,24ac <copyinstr3+0xf0>
   ret = link(b, b);
-    222c:	85a6                	mv	a1,s1
-    222e:	8526                	mv	a0,s1
-    2230:	00003097          	auipc	ra,0x3
-    2234:	19a080e7          	jalr	410(ra) # 53ca <link>
+    2420:	85a6                	mv	a1,s1
+    2422:	8526                	mv	a0,s1
+    2424:	00003097          	auipc	ra,0x3
+    2428:	47e080e7          	jalr	1150(ra) # 58a2 <link>
   if(ret != -1){
-    2238:	57fd                	li	a5,-1
-    223a:	08f51e63          	bne	a0,a5,22d6 <copyinstr3+0x10e>
+    242c:	57fd                	li	a5,-1
+    242e:	08f51e63          	bne	a0,a5,24ca <copyinstr3+0x10e>
   char *args[] = { "xx", 0 };
-    223e:	00005797          	auipc	a5,0x5
-    2242:	ea278793          	addi	a5,a5,-350 # 70e0 <malloc+0x1944>
-    2246:	fcf43823          	sd	a5,-48(s0)
-    224a:	fc043c23          	sd	zero,-40(s0)
+    2432:	00005797          	auipc	a5,0x5
+    2436:	2c678793          	addi	a5,a5,710 # 76f8 <malloc+0x1a74>
+    243a:	fcf43823          	sd	a5,-48(s0)
+    243e:	fc043c23          	sd	zero,-40(s0)
   ret = exec(b, args);
-    224e:	fd040593          	addi	a1,s0,-48
-    2252:	8526                	mv	a0,s1
-    2254:	00003097          	auipc	ra,0x3
-    2258:	14e080e7          	jalr	334(ra) # 53a2 <exec>
+    2442:	fd040593          	addi	a1,s0,-48
+    2446:	8526                	mv	a0,s1
+    2448:	00003097          	auipc	ra,0x3
+    244c:	432080e7          	jalr	1074(ra) # 587a <exec>
   if(ret != -1){
-    225c:	57fd                	li	a5,-1
-    225e:	08f51c63          	bne	a0,a5,22f6 <copyinstr3+0x12e>
+    2450:	57fd                	li	a5,-1
+    2452:	08f51c63          	bne	a0,a5,24ea <copyinstr3+0x12e>
 }
-    2262:	70a2                	ld	ra,40(sp)
-    2264:	7402                	ld	s0,32(sp)
-    2266:	64e2                	ld	s1,24(sp)
-    2268:	6145                	addi	sp,sp,48
-    226a:	8082                	ret
+    2456:	70a2                	ld	ra,40(sp)
+    2458:	7402                	ld	s0,32(sp)
+    245a:	64e2                	ld	s1,24(sp)
+    245c:	6145                	addi	sp,sp,48
+    245e:	8082                	ret
     sbrk(PGSIZE - (top % PGSIZE));
-    226c:	0347d513          	srli	a0,a5,0x34
-    2270:	6785                	lui	a5,0x1
-    2272:	40a7853b          	subw	a0,a5,a0
-    2276:	00003097          	auipc	ra,0x3
-    227a:	17c080e7          	jalr	380(ra) # 53f2 <sbrk>
-    227e:	b7bd                	j	21ec <copyinstr3+0x24>
+    2460:	0347d513          	srli	a0,a5,0x34
+    2464:	6785                	lui	a5,0x1
+    2466:	40a7853b          	subw	a0,a5,a0
+    246a:	00003097          	auipc	ra,0x3
+    246e:	460080e7          	jalr	1120(ra) # 58ca <sbrk>
+    2472:	b7bd                	j	23e0 <copyinstr3+0x24>
     printf("oops\n");
-    2280:	00004517          	auipc	a0,0x4
-    2284:	2e050513          	addi	a0,a0,736 # 6560 <malloc+0xdc4>
-    2288:	00003097          	auipc	ra,0x3
-    228c:	45c080e7          	jalr	1116(ra) # 56e4 <printf>
-    exit(1);
-    2290:	4505                	li	a0,1
-    2292:	00003097          	auipc	ra,0x3
-    2296:	0d8080e7          	jalr	216(ra) # 536a <exit>
+    2474:	00004517          	auipc	a0,0x4
+    2478:	60450513          	addi	a0,a0,1540 # 6a78 <malloc+0xdf4>
+    247c:	00003097          	auipc	ra,0x3
+    2480:	750080e7          	jalr	1872(ra) # 5bcc <printf>
+    exit(1);
+    2484:	4505                	li	a0,1
+    2486:	00003097          	auipc	ra,0x3
+    248a:	3bc080e7          	jalr	956(ra) # 5842 <exit>
     printf("unlink(%s) returned %d, not -1\n", b, ret);
-    229a:	862a                	mv	a2,a0
-    229c:	85a6                	mv	a1,s1
-    229e:	00004517          	auipc	a0,0x4
-    22a2:	d9a50513          	addi	a0,a0,-614 # 6038 <malloc+0x89c>
-    22a6:	00003097          	auipc	ra,0x3
-    22aa:	43e080e7          	jalr	1086(ra) # 56e4 <printf>
-    exit(1);
-    22ae:	4505                	li	a0,1
-    22b0:	00003097          	auipc	ra,0x3
-    22b4:	0ba080e7          	jalr	186(ra) # 536a <exit>
+    248e:	862a                	mv	a2,a0
+    2490:	85a6                	mv	a1,s1
+    2492:	00004517          	auipc	a0,0x4
+    2496:	08e50513          	addi	a0,a0,142 # 6520 <malloc+0x89c>
+    249a:	00003097          	auipc	ra,0x3
+    249e:	732080e7          	jalr	1842(ra) # 5bcc <printf>
+    exit(1);
+    24a2:	4505                	li	a0,1
+    24a4:	00003097          	auipc	ra,0x3
+    24a8:	39e080e7          	jalr	926(ra) # 5842 <exit>
     printf("open(%s) returned %d, not -1\n", b, fd);
-    22b8:	862a                	mv	a2,a0
-    22ba:	85a6                	mv	a1,s1
-    22bc:	00004517          	auipc	a0,0x4
-    22c0:	d9c50513          	addi	a0,a0,-612 # 6058 <malloc+0x8bc>
-    22c4:	00003097          	auipc	ra,0x3
-    22c8:	420080e7          	jalr	1056(ra) # 56e4 <printf>
-    exit(1);
-    22cc:	4505                	li	a0,1
-    22ce:	00003097          	auipc	ra,0x3
-    22d2:	09c080e7          	jalr	156(ra) # 536a <exit>
+    24ac:	862a                	mv	a2,a0
+    24ae:	85a6                	mv	a1,s1
+    24b0:	00004517          	auipc	a0,0x4
+    24b4:	09050513          	addi	a0,a0,144 # 6540 <malloc+0x8bc>
+    24b8:	00003097          	auipc	ra,0x3
+    24bc:	714080e7          	jalr	1812(ra) # 5bcc <printf>
+    exit(1);
+    24c0:	4505                	li	a0,1
+    24c2:	00003097          	auipc	ra,0x3
+    24c6:	380080e7          	jalr	896(ra) # 5842 <exit>
     printf("link(%s, %s) returned %d, not -1\n", b, b, ret);
-    22d6:	86aa                	mv	a3,a0
-    22d8:	8626                	mv	a2,s1
-    22da:	85a6                	mv	a1,s1
-    22dc:	00004517          	auipc	a0,0x4
-    22e0:	d9c50513          	addi	a0,a0,-612 # 6078 <malloc+0x8dc>
-    22e4:	00003097          	auipc	ra,0x3
-    22e8:	400080e7          	jalr	1024(ra) # 56e4 <printf>
-    exit(1);
-    22ec:	4505                	li	a0,1
-    22ee:	00003097          	auipc	ra,0x3
-    22f2:	07c080e7          	jalr	124(ra) # 536a <exit>
+    24ca:	86aa                	mv	a3,a0
+    24cc:	8626                	mv	a2,s1
+    24ce:	85a6                	mv	a1,s1
+    24d0:	00004517          	auipc	a0,0x4
+    24d4:	09050513          	addi	a0,a0,144 # 6560 <malloc+0x8dc>
+    24d8:	00003097          	auipc	ra,0x3
+    24dc:	6f4080e7          	jalr	1780(ra) # 5bcc <printf>
+    exit(1);
+    24e0:	4505                	li	a0,1
+    24e2:	00003097          	auipc	ra,0x3
+    24e6:	360080e7          	jalr	864(ra) # 5842 <exit>
     printf("exec(%s) returned %d, not -1\n", b, fd);
-    22f6:	567d                	li	a2,-1
-    22f8:	85a6                	mv	a1,s1
-    22fa:	00004517          	auipc	a0,0x4
-    22fe:	da650513          	addi	a0,a0,-602 # 60a0 <malloc+0x904>
-    2302:	00003097          	auipc	ra,0x3
-    2306:	3e2080e7          	jalr	994(ra) # 56e4 <printf>
+    24ea:	567d                	li	a2,-1
+    24ec:	85a6                	mv	a1,s1
+    24ee:	00004517          	auipc	a0,0x4
+    24f2:	09a50513          	addi	a0,a0,154 # 6588 <malloc+0x904>
+    24f6:	00003097          	auipc	ra,0x3
+    24fa:	6d6080e7          	jalr	1750(ra) # 5bcc <printf>
     exit(1);
-    230a:	4505                	li	a0,1
-    230c:	00003097          	auipc	ra,0x3
-    2310:	05e080e7          	jalr	94(ra) # 536a <exit>
+    24fe:	4505                	li	a0,1
+    2500:	00003097          	auipc	ra,0x3
+    2504:	342080e7          	jalr	834(ra) # 5842 <exit>
 
-0000000000002314 <sbrkbasic>:
+0000000000002508 <rwsbrk>:
 {
-    2314:	7139                	addi	sp,sp,-64
-    2316:	fc06                	sd	ra,56(sp)
-    2318:	f822                	sd	s0,48(sp)
-    231a:	f426                	sd	s1,40(sp)
-    231c:	f04a                	sd	s2,32(sp)
-    231e:	ec4e                	sd	s3,24(sp)
-    2320:	e852                	sd	s4,16(sp)
-    2322:	0080                	addi	s0,sp,64
-    2324:	8a2a                	mv	s4,a0
+    2508:	1101                	addi	sp,sp,-32
+    250a:	ec06                	sd	ra,24(sp)
+    250c:	e822                	sd	s0,16(sp)
+    250e:	e426                	sd	s1,8(sp)
+    2510:	e04a                	sd	s2,0(sp)
+    2512:	1000                	addi	s0,sp,32
+  uint64 a = (uint64) sbrk(8192);
+    2514:	6509                	lui	a0,0x2
+    2516:	00003097          	auipc	ra,0x3
+    251a:	3b4080e7          	jalr	948(ra) # 58ca <sbrk>
+  if(a == 0xffffffffffffffffLL) {
+    251e:	57fd                	li	a5,-1
+    2520:	06f50263          	beq	a0,a5,2584 <rwsbrk+0x7c>
+    2524:	84aa                	mv	s1,a0
+  if ((uint64) sbrk(-8192) ==  0xffffffffffffffffLL) {
+    2526:	7579                	lui	a0,0xffffe
+    2528:	00003097          	auipc	ra,0x3
+    252c:	3a2080e7          	jalr	930(ra) # 58ca <sbrk>
+    2530:	57fd                	li	a5,-1
+    2532:	06f50663          	beq	a0,a5,259e <rwsbrk+0x96>
+  fd = open("rwsbrk", O_CREATE|O_WRONLY);
+    2536:	20100593          	li	a1,513
+    253a:	00004517          	auipc	a0,0x4
+    253e:	57e50513          	addi	a0,a0,1406 # 6ab8 <malloc+0xe34>
+    2542:	00003097          	auipc	ra,0x3
+    2546:	340080e7          	jalr	832(ra) # 5882 <open>
+    254a:	892a                	mv	s2,a0
+  if(fd < 0){
+    254c:	06054663          	bltz	a0,25b8 <rwsbrk+0xb0>
+  n = write(fd, (void*)(a+4096), 1024);
+    2550:	6785                	lui	a5,0x1
+    2552:	94be                	add	s1,s1,a5
+    2554:	40000613          	li	a2,1024
+    2558:	85a6                	mv	a1,s1
+    255a:	00003097          	auipc	ra,0x3
+    255e:	308080e7          	jalr	776(ra) # 5862 <write>
+    2562:	862a                	mv	a2,a0
+  if(n >= 0){
+    2564:	06054763          	bltz	a0,25d2 <rwsbrk+0xca>
+    printf("write(fd, %p, 1024) returned %d, not -1\n", a+4096, n);
+    2568:	85a6                	mv	a1,s1
+    256a:	00004517          	auipc	a0,0x4
+    256e:	56e50513          	addi	a0,a0,1390 # 6ad8 <malloc+0xe54>
+    2572:	00003097          	auipc	ra,0x3
+    2576:	65a080e7          	jalr	1626(ra) # 5bcc <printf>
+    exit(1);
+    257a:	4505                	li	a0,1
+    257c:	00003097          	auipc	ra,0x3
+    2580:	2c6080e7          	jalr	710(ra) # 5842 <exit>
+    printf("sbrk(rwsbrk) failed\n");
+    2584:	00004517          	auipc	a0,0x4
+    2588:	4fc50513          	addi	a0,a0,1276 # 6a80 <malloc+0xdfc>
+    258c:	00003097          	auipc	ra,0x3
+    2590:	640080e7          	jalr	1600(ra) # 5bcc <printf>
+    exit(1);
+    2594:	4505                	li	a0,1
+    2596:	00003097          	auipc	ra,0x3
+    259a:	2ac080e7          	jalr	684(ra) # 5842 <exit>
+    printf("sbrk(rwsbrk) shrink failed\n");
+    259e:	00004517          	auipc	a0,0x4
+    25a2:	4fa50513          	addi	a0,a0,1274 # 6a98 <malloc+0xe14>
+    25a6:	00003097          	auipc	ra,0x3
+    25aa:	626080e7          	jalr	1574(ra) # 5bcc <printf>
+    exit(1);
+    25ae:	4505                	li	a0,1
+    25b0:	00003097          	auipc	ra,0x3
+    25b4:	292080e7          	jalr	658(ra) # 5842 <exit>
+    printf("open(rwsbrk) failed\n");
+    25b8:	00004517          	auipc	a0,0x4
+    25bc:	50850513          	addi	a0,a0,1288 # 6ac0 <malloc+0xe3c>
+    25c0:	00003097          	auipc	ra,0x3
+    25c4:	60c080e7          	jalr	1548(ra) # 5bcc <printf>
+    exit(1);
+    25c8:	4505                	li	a0,1
+    25ca:	00003097          	auipc	ra,0x3
+    25ce:	278080e7          	jalr	632(ra) # 5842 <exit>
+  close(fd);
+    25d2:	854a                	mv	a0,s2
+    25d4:	00003097          	auipc	ra,0x3
+    25d8:	296080e7          	jalr	662(ra) # 586a <close>
+  unlink("rwsbrk");
+    25dc:	00004517          	auipc	a0,0x4
+    25e0:	4dc50513          	addi	a0,a0,1244 # 6ab8 <malloc+0xe34>
+    25e4:	00003097          	auipc	ra,0x3
+    25e8:	2ae080e7          	jalr	686(ra) # 5892 <unlink>
+  fd = open("README", O_RDONLY);
+    25ec:	4581                	li	a1,0
+    25ee:	00004517          	auipc	a0,0x4
+    25f2:	96250513          	addi	a0,a0,-1694 # 5f50 <malloc+0x2cc>
+    25f6:	00003097          	auipc	ra,0x3
+    25fa:	28c080e7          	jalr	652(ra) # 5882 <open>
+    25fe:	892a                	mv	s2,a0
+  if(fd < 0){
+    2600:	02054963          	bltz	a0,2632 <rwsbrk+0x12a>
+  n = read(fd, (void*)(a+4096), 10);
+    2604:	4629                	li	a2,10
+    2606:	85a6                	mv	a1,s1
+    2608:	00003097          	auipc	ra,0x3
+    260c:	252080e7          	jalr	594(ra) # 585a <read>
+    2610:	862a                	mv	a2,a0
+  if(n >= 0){
+    2612:	02054d63          	bltz	a0,264c <rwsbrk+0x144>
+    printf("read(fd, %p, 10) returned %d, not -1\n", a+4096, n);
+    2616:	85a6                	mv	a1,s1
+    2618:	00004517          	auipc	a0,0x4
+    261c:	4f050513          	addi	a0,a0,1264 # 6b08 <malloc+0xe84>
+    2620:	00003097          	auipc	ra,0x3
+    2624:	5ac080e7          	jalr	1452(ra) # 5bcc <printf>
+    exit(1);
+    2628:	4505                	li	a0,1
+    262a:	00003097          	auipc	ra,0x3
+    262e:	218080e7          	jalr	536(ra) # 5842 <exit>
+    printf("open(rwsbrk) failed\n");
+    2632:	00004517          	auipc	a0,0x4
+    2636:	48e50513          	addi	a0,a0,1166 # 6ac0 <malloc+0xe3c>
+    263a:	00003097          	auipc	ra,0x3
+    263e:	592080e7          	jalr	1426(ra) # 5bcc <printf>
+    exit(1);
+    2642:	4505                	li	a0,1
+    2644:	00003097          	auipc	ra,0x3
+    2648:	1fe080e7          	jalr	510(ra) # 5842 <exit>
+  close(fd);
+    264c:	854a                	mv	a0,s2
+    264e:	00003097          	auipc	ra,0x3
+    2652:	21c080e7          	jalr	540(ra) # 586a <close>
+  exit(0);
+    2656:	4501                	li	a0,0
+    2658:	00003097          	auipc	ra,0x3
+    265c:	1ea080e7          	jalr	490(ra) # 5842 <exit>
+
+0000000000002660 <sbrkbasic>:
+{
+    2660:	7139                	addi	sp,sp,-64
+    2662:	fc06                	sd	ra,56(sp)
+    2664:	f822                	sd	s0,48(sp)
+    2666:	f426                	sd	s1,40(sp)
+    2668:	f04a                	sd	s2,32(sp)
+    266a:	ec4e                	sd	s3,24(sp)
+    266c:	e852                	sd	s4,16(sp)
+    266e:	0080                	addi	s0,sp,64
+    2670:	8a2a                	mv	s4,a0
   pid = fork();
-    2326:	00003097          	auipc	ra,0x3
-    232a:	03c080e7          	jalr	60(ra) # 5362 <fork>
+    2672:	00003097          	auipc	ra,0x3
+    2676:	1c8080e7          	jalr	456(ra) # 583a <fork>
   if(pid < 0){
-    232e:	02054c63          	bltz	a0,2366 <sbrkbasic+0x52>
+    267a:	02054c63          	bltz	a0,26b2 <sbrkbasic+0x52>
   if(pid == 0){
-    2332:	ed21                	bnez	a0,238a <sbrkbasic+0x76>
+    267e:	ed21                	bnez	a0,26d6 <sbrkbasic+0x76>
     a = sbrk(TOOMUCH);
-    2334:	40000537          	lui	a0,0x40000
-    2338:	00003097          	auipc	ra,0x3
-    233c:	0ba080e7          	jalr	186(ra) # 53f2 <sbrk>
+    2680:	40000537          	lui	a0,0x40000
+    2684:	00003097          	auipc	ra,0x3
+    2688:	246080e7          	jalr	582(ra) # 58ca <sbrk>
     if(a == (char*)0xffffffffffffffffL){
-    2340:	57fd                	li	a5,-1
-    2342:	02f50f63          	beq	a0,a5,2380 <sbrkbasic+0x6c>
+    268c:	57fd                	li	a5,-1
+    268e:	02f50f63          	beq	a0,a5,26cc <sbrkbasic+0x6c>
     for(b = a; b < a+TOOMUCH; b += 4096){
-    2346:	400007b7          	lui	a5,0x40000
-    234a:	97aa                	add	a5,a5,a0
+    2692:	400007b7          	lui	a5,0x40000
+    2696:	97aa                	add	a5,a5,a0
       *b = 99;
-    234c:	06300693          	li	a3,99
+    2698:	06300693          	li	a3,99
     for(b = a; b < a+TOOMUCH; b += 4096){
-    2350:	6705                	lui	a4,0x1
+    269c:	6705                	lui	a4,0x1
       *b = 99;
-    2352:	00d50023          	sb	a3,0(a0) # 40000000 <__BSS_END__+0x3fff1870>
+    269e:	00d50023          	sb	a3,0(a0) # 40000000 <__BSS_END__+0x3fff1208>
     for(b = a; b < a+TOOMUCH; b += 4096){
-    2356:	953a                	add	a0,a0,a4
-    2358:	fef51de3          	bne	a0,a5,2352 <sbrkbasic+0x3e>
+    26a2:	953a                	add	a0,a0,a4
+    26a4:	fef51de3          	bne	a0,a5,269e <sbrkbasic+0x3e>
     exit(1);
-    235c:	4505                	li	a0,1
-    235e:	00003097          	auipc	ra,0x3
-    2362:	00c080e7          	jalr	12(ra) # 536a <exit>
+    26a8:	4505                	li	a0,1
+    26aa:	00003097          	auipc	ra,0x3
+    26ae:	198080e7          	jalr	408(ra) # 5842 <exit>
     printf("fork failed in sbrkbasic\n");
-    2366:	00004517          	auipc	a0,0x4
-    236a:	20250513          	addi	a0,a0,514 # 6568 <malloc+0xdcc>
-    236e:	00003097          	auipc	ra,0x3
-    2372:	376080e7          	jalr	886(ra) # 56e4 <printf>
-    exit(1);
-    2376:	4505                	li	a0,1
-    2378:	00003097          	auipc	ra,0x3
-    237c:	ff2080e7          	jalr	-14(ra) # 536a <exit>
+    26b2:	00004517          	auipc	a0,0x4
+    26b6:	47e50513          	addi	a0,a0,1150 # 6b30 <malloc+0xeac>
+    26ba:	00003097          	auipc	ra,0x3
+    26be:	512080e7          	jalr	1298(ra) # 5bcc <printf>
+    exit(1);
+    26c2:	4505                	li	a0,1
+    26c4:	00003097          	auipc	ra,0x3
+    26c8:	17e080e7          	jalr	382(ra) # 5842 <exit>
       exit(0);
-    2380:	4501                	li	a0,0
-    2382:	00003097          	auipc	ra,0x3
-    2386:	fe8080e7          	jalr	-24(ra) # 536a <exit>
+    26cc:	4501                	li	a0,0
+    26ce:	00003097          	auipc	ra,0x3
+    26d2:	174080e7          	jalr	372(ra) # 5842 <exit>
   wait(&xstatus);
-    238a:	fcc40513          	addi	a0,s0,-52
-    238e:	00003097          	auipc	ra,0x3
-    2392:	fe4080e7          	jalr	-28(ra) # 5372 <wait>
+    26d6:	fcc40513          	addi	a0,s0,-52
+    26da:	00003097          	auipc	ra,0x3
+    26de:	170080e7          	jalr	368(ra) # 584a <wait>
   if(xstatus == 1){
-    2396:	fcc42703          	lw	a4,-52(s0)
-    239a:	4785                	li	a5,1
-    239c:	00f70d63          	beq	a4,a5,23b6 <sbrkbasic+0xa2>
+    26e2:	fcc42703          	lw	a4,-52(s0)
+    26e6:	4785                	li	a5,1
+    26e8:	00f70d63          	beq	a4,a5,2702 <sbrkbasic+0xa2>
   a = sbrk(0);
-    23a0:	4501                	li	a0,0
-    23a2:	00003097          	auipc	ra,0x3
-    23a6:	050080e7          	jalr	80(ra) # 53f2 <sbrk>
-    23aa:	84aa                	mv	s1,a0
+    26ec:	4501                	li	a0,0
+    26ee:	00003097          	auipc	ra,0x3
+    26f2:	1dc080e7          	jalr	476(ra) # 58ca <sbrk>
+    26f6:	84aa                	mv	s1,a0
   for(i = 0; i < 5000; i++){
-    23ac:	4901                	li	s2,0
-    23ae:	6985                	lui	s3,0x1
-    23b0:	38898993          	addi	s3,s3,904 # 1388 <copyinstr2+0x1d0>
-    23b4:	a005                	j	23d4 <sbrkbasic+0xc0>
+    26f8:	4901                	li	s2,0
+    26fa:	6985                	lui	s3,0x1
+    26fc:	38898993          	addi	s3,s3,904 # 1388 <copyinstr2+0x1d8>
+    2700:	a005                	j	2720 <sbrkbasic+0xc0>
     printf("%s: too much memory allocated!\n", s);
-    23b6:	85d2                	mv	a1,s4
-    23b8:	00004517          	auipc	a0,0x4
-    23bc:	1d050513          	addi	a0,a0,464 # 6588 <malloc+0xdec>
-    23c0:	00003097          	auipc	ra,0x3
-    23c4:	324080e7          	jalr	804(ra) # 56e4 <printf>
-    exit(1);
-    23c8:	4505                	li	a0,1
-    23ca:	00003097          	auipc	ra,0x3
-    23ce:	fa0080e7          	jalr	-96(ra) # 536a <exit>
+    2702:	85d2                	mv	a1,s4
+    2704:	00004517          	auipc	a0,0x4
+    2708:	44c50513          	addi	a0,a0,1100 # 6b50 <malloc+0xecc>
+    270c:	00003097          	auipc	ra,0x3
+    2710:	4c0080e7          	jalr	1216(ra) # 5bcc <printf>
+    exit(1);
+    2714:	4505                	li	a0,1
+    2716:	00003097          	auipc	ra,0x3
+    271a:	12c080e7          	jalr	300(ra) # 5842 <exit>
     a = b + 1;
-    23d2:	84be                	mv	s1,a5
+    271e:	84be                	mv	s1,a5
     b = sbrk(1);
-    23d4:	4505                	li	a0,1
-    23d6:	00003097          	auipc	ra,0x3
-    23da:	01c080e7          	jalr	28(ra) # 53f2 <sbrk>
+    2720:	4505                	li	a0,1
+    2722:	00003097          	auipc	ra,0x3
+    2726:	1a8080e7          	jalr	424(ra) # 58ca <sbrk>
     if(b != a){
-    23de:	04951c63          	bne	a0,s1,2436 <sbrkbasic+0x122>
+    272a:	04951c63          	bne	a0,s1,2782 <sbrkbasic+0x122>
     *b = 1;
-    23e2:	4785                	li	a5,1
-    23e4:	00f48023          	sb	a5,0(s1)
+    272e:	4785                	li	a5,1
+    2730:	00f48023          	sb	a5,0(s1)
     a = b + 1;
-    23e8:	00148793          	addi	a5,s1,1
+    2734:	00148793          	addi	a5,s1,1
   for(i = 0; i < 5000; i++){
-    23ec:	2905                	addiw	s2,s2,1
-    23ee:	ff3912e3          	bne	s2,s3,23d2 <sbrkbasic+0xbe>
+    2738:	2905                	addiw	s2,s2,1
+    273a:	ff3912e3          	bne	s2,s3,271e <sbrkbasic+0xbe>
   pid = fork();
-    23f2:	00003097          	auipc	ra,0x3
-    23f6:	f70080e7          	jalr	-144(ra) # 5362 <fork>
-    23fa:	892a                	mv	s2,a0
+    273e:	00003097          	auipc	ra,0x3
+    2742:	0fc080e7          	jalr	252(ra) # 583a <fork>
+    2746:	892a                	mv	s2,a0
   if(pid < 0){
-    23fc:	04054d63          	bltz	a0,2456 <sbrkbasic+0x142>
+    2748:	04054e63          	bltz	a0,27a4 <sbrkbasic+0x144>
   c = sbrk(1);
-    2400:	4505                	li	a0,1
-    2402:	00003097          	auipc	ra,0x3
-    2406:	ff0080e7          	jalr	-16(ra) # 53f2 <sbrk>
+    274c:	4505                	li	a0,1
+    274e:	00003097          	auipc	ra,0x3
+    2752:	17c080e7          	jalr	380(ra) # 58ca <sbrk>
   c = sbrk(1);
-    240a:	4505                	li	a0,1
-    240c:	00003097          	auipc	ra,0x3
-    2410:	fe6080e7          	jalr	-26(ra) # 53f2 <sbrk>
+    2756:	4505                	li	a0,1
+    2758:	00003097          	auipc	ra,0x3
+    275c:	172080e7          	jalr	370(ra) # 58ca <sbrk>
   if(c != a + 1){
-    2414:	0489                	addi	s1,s1,2
-    2416:	04a48e63          	beq	s1,a0,2472 <sbrkbasic+0x15e>
+    2760:	0489                	addi	s1,s1,2
+    2762:	04a48f63          	beq	s1,a0,27c0 <sbrkbasic+0x160>
     printf("%s: sbrk test failed post-fork\n", s);
-    241a:	85d2                	mv	a1,s4
-    241c:	00004517          	auipc	a0,0x4
-    2420:	1cc50513          	addi	a0,a0,460 # 65e8 <malloc+0xe4c>
-    2424:	00003097          	auipc	ra,0x3
-    2428:	2c0080e7          	jalr	704(ra) # 56e4 <printf>
-    exit(1);
-    242c:	4505                	li	a0,1
-    242e:	00003097          	auipc	ra,0x3
-    2432:	f3c080e7          	jalr	-196(ra) # 536a <exit>
-      printf("%s: sbrk test failed %d %x %x\n", i, a, b);
-    2436:	86aa                	mv	a3,a0
-    2438:	8626                	mv	a2,s1
-    243a:	85ca                	mv	a1,s2
-    243c:	00004517          	auipc	a0,0x4
-    2440:	16c50513          	addi	a0,a0,364 # 65a8 <malloc+0xe0c>
-    2444:	00003097          	auipc	ra,0x3
-    2448:	2a0080e7          	jalr	672(ra) # 56e4 <printf>
-      exit(1);
-    244c:	4505                	li	a0,1
-    244e:	00003097          	auipc	ra,0x3
-    2452:	f1c080e7          	jalr	-228(ra) # 536a <exit>
+    2766:	85d2                	mv	a1,s4
+    2768:	00004517          	auipc	a0,0x4
+    276c:	44850513          	addi	a0,a0,1096 # 6bb0 <malloc+0xf2c>
+    2770:	00003097          	auipc	ra,0x3
+    2774:	45c080e7          	jalr	1116(ra) # 5bcc <printf>
+    exit(1);
+    2778:	4505                	li	a0,1
+    277a:	00003097          	auipc	ra,0x3
+    277e:	0c8080e7          	jalr	200(ra) # 5842 <exit>
+      printf("%s: sbrk test failed %d %x %x\n", s, i, a, b);
+    2782:	872a                	mv	a4,a0
+    2784:	86a6                	mv	a3,s1
+    2786:	864a                	mv	a2,s2
+    2788:	85d2                	mv	a1,s4
+    278a:	00004517          	auipc	a0,0x4
+    278e:	3e650513          	addi	a0,a0,998 # 6b70 <malloc+0xeec>
+    2792:	00003097          	auipc	ra,0x3
+    2796:	43a080e7          	jalr	1082(ra) # 5bcc <printf>
+      exit(1);
+    279a:	4505                	li	a0,1
+    279c:	00003097          	auipc	ra,0x3
+    27a0:	0a6080e7          	jalr	166(ra) # 5842 <exit>
     printf("%s: sbrk test fork failed\n", s);
-    2456:	85d2                	mv	a1,s4
-    2458:	00004517          	auipc	a0,0x4
-    245c:	17050513          	addi	a0,a0,368 # 65c8 <malloc+0xe2c>
-    2460:	00003097          	auipc	ra,0x3
-    2464:	284080e7          	jalr	644(ra) # 56e4 <printf>
+    27a4:	85d2                	mv	a1,s4
+    27a6:	00004517          	auipc	a0,0x4
+    27aa:	3ea50513          	addi	a0,a0,1002 # 6b90 <malloc+0xf0c>
+    27ae:	00003097          	auipc	ra,0x3
+    27b2:	41e080e7          	jalr	1054(ra) # 5bcc <printf>
     exit(1);
-    2468:	4505                	li	a0,1
-    246a:	00003097          	auipc	ra,0x3
-    246e:	f00080e7          	jalr	-256(ra) # 536a <exit>
+    27b6:	4505                	li	a0,1
+    27b8:	00003097          	auipc	ra,0x3
+    27bc:	08a080e7          	jalr	138(ra) # 5842 <exit>
   if(pid == 0)
-    2472:	00091763          	bnez	s2,2480 <sbrkbasic+0x16c>
+    27c0:	00091763          	bnez	s2,27ce <sbrkbasic+0x16e>
     exit(0);
-    2476:	4501                	li	a0,0
-    2478:	00003097          	auipc	ra,0x3
-    247c:	ef2080e7          	jalr	-270(ra) # 536a <exit>
+    27c4:	4501                	li	a0,0
+    27c6:	00003097          	auipc	ra,0x3
+    27ca:	07c080e7          	jalr	124(ra) # 5842 <exit>
   wait(&xstatus);
-    2480:	fcc40513          	addi	a0,s0,-52
-    2484:	00003097          	auipc	ra,0x3
-    2488:	eee080e7          	jalr	-274(ra) # 5372 <wait>
+    27ce:	fcc40513          	addi	a0,s0,-52
+    27d2:	00003097          	auipc	ra,0x3
+    27d6:	078080e7          	jalr	120(ra) # 584a <wait>
   exit(xstatus);
-    248c:	fcc42503          	lw	a0,-52(s0)
-    2490:	00003097          	auipc	ra,0x3
-    2494:	eda080e7          	jalr	-294(ra) # 536a <exit>
-
-0000000000002498 <sbrkmuch>:
-{
-    2498:	7179                	addi	sp,sp,-48
-    249a:	f406                	sd	ra,40(sp)
-    249c:	f022                	sd	s0,32(sp)
-    249e:	ec26                	sd	s1,24(sp)
-    24a0:	e84a                	sd	s2,16(sp)
-    24a2:	e44e                	sd	s3,8(sp)
-    24a4:	e052                	sd	s4,0(sp)
-    24a6:	1800                	addi	s0,sp,48
-    24a8:	89aa                	mv	s3,a0
+    27da:	fcc42503          	lw	a0,-52(s0)
+    27de:	00003097          	auipc	ra,0x3
+    27e2:	064080e7          	jalr	100(ra) # 5842 <exit>
+
+00000000000027e6 <sbrkmuch>:
+{
+    27e6:	7179                	addi	sp,sp,-48
+    27e8:	f406                	sd	ra,40(sp)
+    27ea:	f022                	sd	s0,32(sp)
+    27ec:	ec26                	sd	s1,24(sp)
+    27ee:	e84a                	sd	s2,16(sp)
+    27f0:	e44e                	sd	s3,8(sp)
+    27f2:	e052                	sd	s4,0(sp)
+    27f4:	1800                	addi	s0,sp,48
+    27f6:	89aa                	mv	s3,a0
   oldbrk = sbrk(0);
-    24aa:	4501                	li	a0,0
-    24ac:	00003097          	auipc	ra,0x3
-    24b0:	f46080e7          	jalr	-186(ra) # 53f2 <sbrk>
-    24b4:	892a                	mv	s2,a0
+    27f8:	4501                	li	a0,0
+    27fa:	00003097          	auipc	ra,0x3
+    27fe:	0d0080e7          	jalr	208(ra) # 58ca <sbrk>
+    2802:	892a                	mv	s2,a0
   a = sbrk(0);
-    24b6:	4501                	li	a0,0
-    24b8:	00003097          	auipc	ra,0x3
-    24bc:	f3a080e7          	jalr	-198(ra) # 53f2 <sbrk>
-    24c0:	84aa                	mv	s1,a0
+    2804:	4501                	li	a0,0
+    2806:	00003097          	auipc	ra,0x3
+    280a:	0c4080e7          	jalr	196(ra) # 58ca <sbrk>
+    280e:	84aa                	mv	s1,a0
   p = sbrk(amt);
-    24c2:	06400537          	lui	a0,0x6400
-    24c6:	9d05                	subw	a0,a0,s1
-    24c8:	00003097          	auipc	ra,0x3
-    24cc:	f2a080e7          	jalr	-214(ra) # 53f2 <sbrk>
+    2810:	06400537          	lui	a0,0x6400
+    2814:	9d05                	subw	a0,a0,s1
+    2816:	00003097          	auipc	ra,0x3
+    281a:	0b4080e7          	jalr	180(ra) # 58ca <sbrk>
   if (p != a) {
-    24d0:	0ca49863          	bne	s1,a0,25a0 <sbrkmuch+0x108>
+    281e:	0ca49863          	bne	s1,a0,28ee <sbrkmuch+0x108>
   char *eee = sbrk(0);
-    24d4:	4501                	li	a0,0
-    24d6:	00003097          	auipc	ra,0x3
-    24da:	f1c080e7          	jalr	-228(ra) # 53f2 <sbrk>
-    24de:	87aa                	mv	a5,a0
+    2822:	4501                	li	a0,0
+    2824:	00003097          	auipc	ra,0x3
+    2828:	0a6080e7          	jalr	166(ra) # 58ca <sbrk>
+    282c:	87aa                	mv	a5,a0
   for(char *pp = a; pp < eee; pp += 4096)
-    24e0:	00a4f963          	bgeu	s1,a0,24f2 <sbrkmuch+0x5a>
+    282e:	00a4f963          	bgeu	s1,a0,2840 <sbrkmuch+0x5a>
     *pp = 1;
-    24e4:	4685                	li	a3,1
+    2832:	4685                	li	a3,1
   for(char *pp = a; pp < eee; pp += 4096)
-    24e6:	6705                	lui	a4,0x1
+    2834:	6705                	lui	a4,0x1
     *pp = 1;
-    24e8:	00d48023          	sb	a3,0(s1)
+    2836:	00d48023          	sb	a3,0(s1)
   for(char *pp = a; pp < eee; pp += 4096)
-    24ec:	94ba                	add	s1,s1,a4
-    24ee:	fef4ede3          	bltu	s1,a5,24e8 <sbrkmuch+0x50>
+    283a:	94ba                	add	s1,s1,a4
+    283c:	fef4ede3          	bltu	s1,a5,2836 <sbrkmuch+0x50>
   *lastaddr = 99;
-    24f2:	064007b7          	lui	a5,0x6400
-    24f6:	06300713          	li	a4,99
-    24fa:	fee78fa3          	sb	a4,-1(a5) # 63fffff <__BSS_END__+0x63f186f>
+    2840:	064007b7          	lui	a5,0x6400
+    2844:	06300713          	li	a4,99
+    2848:	fee78fa3          	sb	a4,-1(a5) # 63fffff <__BSS_END__+0x63f1207>
   a = sbrk(0);
-    24fe:	4501                	li	a0,0
-    2500:	00003097          	auipc	ra,0x3
-    2504:	ef2080e7          	jalr	-270(ra) # 53f2 <sbrk>
-    2508:	84aa                	mv	s1,a0
+    284c:	4501                	li	a0,0
+    284e:	00003097          	auipc	ra,0x3
+    2852:	07c080e7          	jalr	124(ra) # 58ca <sbrk>
+    2856:	84aa                	mv	s1,a0
   c = sbrk(-PGSIZE);
-    250a:	757d                	lui	a0,0xfffff
-    250c:	00003097          	auipc	ra,0x3
-    2510:	ee6080e7          	jalr	-282(ra) # 53f2 <sbrk>
+    2858:	757d                	lui	a0,0xfffff
+    285a:	00003097          	auipc	ra,0x3
+    285e:	070080e7          	jalr	112(ra) # 58ca <sbrk>
   if(c == (char*)0xffffffffffffffffL){
-    2514:	57fd                	li	a5,-1
-    2516:	0af50363          	beq	a0,a5,25bc <sbrkmuch+0x124>
+    2862:	57fd                	li	a5,-1
+    2864:	0af50363          	beq	a0,a5,290a <sbrkmuch+0x124>
   c = sbrk(0);
-    251a:	4501                	li	a0,0
-    251c:	00003097          	auipc	ra,0x3
-    2520:	ed6080e7          	jalr	-298(ra) # 53f2 <sbrk>
+    2868:	4501                	li	a0,0
+    286a:	00003097          	auipc	ra,0x3
+    286e:	060080e7          	jalr	96(ra) # 58ca <sbrk>
   if(c != a - PGSIZE){
-    2524:	77fd                	lui	a5,0xfffff
-    2526:	97a6                	add	a5,a5,s1
-    2528:	0af51863          	bne	a0,a5,25d8 <sbrkmuch+0x140>
+    2872:	77fd                	lui	a5,0xfffff
+    2874:	97a6                	add	a5,a5,s1
+    2876:	0af51863          	bne	a0,a5,2926 <sbrkmuch+0x140>
   a = sbrk(0);
-    252c:	4501                	li	a0,0
-    252e:	00003097          	auipc	ra,0x3
-    2532:	ec4080e7          	jalr	-316(ra) # 53f2 <sbrk>
-    2536:	84aa                	mv	s1,a0
+    287a:	4501                	li	a0,0
+    287c:	00003097          	auipc	ra,0x3
+    2880:	04e080e7          	jalr	78(ra) # 58ca <sbrk>
+    2884:	84aa                	mv	s1,a0
   c = sbrk(PGSIZE);
-    2538:	6505                	lui	a0,0x1
-    253a:	00003097          	auipc	ra,0x3
-    253e:	eb8080e7          	jalr	-328(ra) # 53f2 <sbrk>
-    2542:	8a2a                	mv	s4,a0
+    2886:	6505                	lui	a0,0x1
+    2888:	00003097          	auipc	ra,0x3
+    288c:	042080e7          	jalr	66(ra) # 58ca <sbrk>
+    2890:	8a2a                	mv	s4,a0
   if(c != a || sbrk(0) != a + PGSIZE){
-    2544:	0aa49963          	bne	s1,a0,25f6 <sbrkmuch+0x15e>
-    2548:	4501                	li	a0,0
-    254a:	00003097          	auipc	ra,0x3
-    254e:	ea8080e7          	jalr	-344(ra) # 53f2 <sbrk>
-    2552:	6785                	lui	a5,0x1
-    2554:	97a6                	add	a5,a5,s1
-    2556:	0af51063          	bne	a0,a5,25f6 <sbrkmuch+0x15e>
+    2892:	0aa49a63          	bne	s1,a0,2946 <sbrkmuch+0x160>
+    2896:	4501                	li	a0,0
+    2898:	00003097          	auipc	ra,0x3
+    289c:	032080e7          	jalr	50(ra) # 58ca <sbrk>
+    28a0:	6785                	lui	a5,0x1
+    28a2:	97a6                	add	a5,a5,s1
+    28a4:	0af51163          	bne	a0,a5,2946 <sbrkmuch+0x160>
   if(*lastaddr == 99){
-    255a:	064007b7          	lui	a5,0x6400
-    255e:	fff7c703          	lbu	a4,-1(a5) # 63fffff <__BSS_END__+0x63f186f>
-    2562:	06300793          	li	a5,99
-    2566:	0af70763          	beq	a4,a5,2614 <sbrkmuch+0x17c>
+    28a8:	064007b7          	lui	a5,0x6400
+    28ac:	fff7c703          	lbu	a4,-1(a5) # 63fffff <__BSS_END__+0x63f1207>
+    28b0:	06300793          	li	a5,99
+    28b4:	0af70963          	beq	a4,a5,2966 <sbrkmuch+0x180>
   a = sbrk(0);
-    256a:	4501                	li	a0,0
-    256c:	00003097          	auipc	ra,0x3
-    2570:	e86080e7          	jalr	-378(ra) # 53f2 <sbrk>
-    2574:	84aa                	mv	s1,a0
+    28b8:	4501                	li	a0,0
+    28ba:	00003097          	auipc	ra,0x3
+    28be:	010080e7          	jalr	16(ra) # 58ca <sbrk>
+    28c2:	84aa                	mv	s1,a0
   c = sbrk(-(sbrk(0) - oldbrk));
-    2576:	4501                	li	a0,0
-    2578:	00003097          	auipc	ra,0x3
-    257c:	e7a080e7          	jalr	-390(ra) # 53f2 <sbrk>
-    2580:	40a9053b          	subw	a0,s2,a0
-    2584:	00003097          	auipc	ra,0x3
-    2588:	e6e080e7          	jalr	-402(ra) # 53f2 <sbrk>
+    28c4:	4501                	li	a0,0
+    28c6:	00003097          	auipc	ra,0x3
+    28ca:	004080e7          	jalr	4(ra) # 58ca <sbrk>
+    28ce:	40a9053b          	subw	a0,s2,a0
+    28d2:	00003097          	auipc	ra,0x3
+    28d6:	ff8080e7          	jalr	-8(ra) # 58ca <sbrk>
   if(c != a){
-    258c:	0aa49263          	bne	s1,a0,2630 <sbrkmuch+0x198>
+    28da:	0aa49463          	bne	s1,a0,2982 <sbrkmuch+0x19c>
 }
-    2590:	70a2                	ld	ra,40(sp)
-    2592:	7402                	ld	s0,32(sp)
-    2594:	64e2                	ld	s1,24(sp)
-    2596:	6942                	ld	s2,16(sp)
-    2598:	69a2                	ld	s3,8(sp)
-    259a:	6a02                	ld	s4,0(sp)
-    259c:	6145                	addi	sp,sp,48
-    259e:	8082                	ret
+    28de:	70a2                	ld	ra,40(sp)
+    28e0:	7402                	ld	s0,32(sp)
+    28e2:	64e2                	ld	s1,24(sp)
+    28e4:	6942                	ld	s2,16(sp)
+    28e6:	69a2                	ld	s3,8(sp)
+    28e8:	6a02                	ld	s4,0(sp)
+    28ea:	6145                	addi	sp,sp,48
+    28ec:	8082                	ret
     printf("%s: sbrk test failed to grow big address space; enough phys mem?\n", s);
-    25a0:	85ce                	mv	a1,s3
-    25a2:	00004517          	auipc	a0,0x4
-    25a6:	06650513          	addi	a0,a0,102 # 6608 <malloc+0xe6c>
-    25aa:	00003097          	auipc	ra,0x3
-    25ae:	13a080e7          	jalr	314(ra) # 56e4 <printf>
-    exit(1);
-    25b2:	4505                	li	a0,1
-    25b4:	00003097          	auipc	ra,0x3
-    25b8:	db6080e7          	jalr	-586(ra) # 536a <exit>
+    28ee:	85ce                	mv	a1,s3
+    28f0:	00004517          	auipc	a0,0x4
+    28f4:	2e050513          	addi	a0,a0,736 # 6bd0 <malloc+0xf4c>
+    28f8:	00003097          	auipc	ra,0x3
+    28fc:	2d4080e7          	jalr	724(ra) # 5bcc <printf>
+    exit(1);
+    2900:	4505                	li	a0,1
+    2902:	00003097          	auipc	ra,0x3
+    2906:	f40080e7          	jalr	-192(ra) # 5842 <exit>
     printf("%s: sbrk could not deallocate\n", s);
-    25bc:	85ce                	mv	a1,s3
-    25be:	00004517          	auipc	a0,0x4
-    25c2:	09250513          	addi	a0,a0,146 # 6650 <malloc+0xeb4>
-    25c6:	00003097          	auipc	ra,0x3
-    25ca:	11e080e7          	jalr	286(ra) # 56e4 <printf>
-    exit(1);
-    25ce:	4505                	li	a0,1
-    25d0:	00003097          	auipc	ra,0x3
-    25d4:	d9a080e7          	jalr	-614(ra) # 536a <exit>
-    printf("%s: sbrk deallocation produced wrong address, a %x c %x\n", a, c);
-    25d8:	862a                	mv	a2,a0
-    25da:	85a6                	mv	a1,s1
-    25dc:	00004517          	auipc	a0,0x4
-    25e0:	09450513          	addi	a0,a0,148 # 6670 <malloc+0xed4>
-    25e4:	00003097          	auipc	ra,0x3
-    25e8:	100080e7          	jalr	256(ra) # 56e4 <printf>
-    exit(1);
-    25ec:	4505                	li	a0,1
-    25ee:	00003097          	auipc	ra,0x3
-    25f2:	d7c080e7          	jalr	-644(ra) # 536a <exit>
-    printf("%s: sbrk re-allocation failed, a %x c %x\n", a, c);
-    25f6:	8652                	mv	a2,s4
-    25f8:	85a6                	mv	a1,s1
-    25fa:	00004517          	auipc	a0,0x4
-    25fe:	0b650513          	addi	a0,a0,182 # 66b0 <malloc+0xf14>
-    2602:	00003097          	auipc	ra,0x3
-    2606:	0e2080e7          	jalr	226(ra) # 56e4 <printf>
-    exit(1);
-    260a:	4505                	li	a0,1
-    260c:	00003097          	auipc	ra,0x3
-    2610:	d5e080e7          	jalr	-674(ra) # 536a <exit>
+    290a:	85ce                	mv	a1,s3
+    290c:	00004517          	auipc	a0,0x4
+    2910:	30c50513          	addi	a0,a0,780 # 6c18 <malloc+0xf94>
+    2914:	00003097          	auipc	ra,0x3
+    2918:	2b8080e7          	jalr	696(ra) # 5bcc <printf>
+    exit(1);
+    291c:	4505                	li	a0,1
+    291e:	00003097          	auipc	ra,0x3
+    2922:	f24080e7          	jalr	-220(ra) # 5842 <exit>
+    printf("%s: sbrk deallocation produced wrong address, a %x c %x\n", s, a, c);
+    2926:	86aa                	mv	a3,a0
+    2928:	8626                	mv	a2,s1
+    292a:	85ce                	mv	a1,s3
+    292c:	00004517          	auipc	a0,0x4
+    2930:	30c50513          	addi	a0,a0,780 # 6c38 <malloc+0xfb4>
+    2934:	00003097          	auipc	ra,0x3
+    2938:	298080e7          	jalr	664(ra) # 5bcc <printf>
+    exit(1);
+    293c:	4505                	li	a0,1
+    293e:	00003097          	auipc	ra,0x3
+    2942:	f04080e7          	jalr	-252(ra) # 5842 <exit>
+    printf("%s: sbrk re-allocation failed, a %x c %x\n", s, a, c);
+    2946:	86d2                	mv	a3,s4
+    2948:	8626                	mv	a2,s1
+    294a:	85ce                	mv	a1,s3
+    294c:	00004517          	auipc	a0,0x4
+    2950:	32c50513          	addi	a0,a0,812 # 6c78 <malloc+0xff4>
+    2954:	00003097          	auipc	ra,0x3
+    2958:	278080e7          	jalr	632(ra) # 5bcc <printf>
+    exit(1);
+    295c:	4505                	li	a0,1
+    295e:	00003097          	auipc	ra,0x3
+    2962:	ee4080e7          	jalr	-284(ra) # 5842 <exit>
     printf("%s: sbrk de-allocation didn't really deallocate\n", s);
-    2614:	85ce                	mv	a1,s3
-    2616:	00004517          	auipc	a0,0x4
-    261a:	0ca50513          	addi	a0,a0,202 # 66e0 <malloc+0xf44>
-    261e:	00003097          	auipc	ra,0x3
-    2622:	0c6080e7          	jalr	198(ra) # 56e4 <printf>
-    exit(1);
-    2626:	4505                	li	a0,1
-    2628:	00003097          	auipc	ra,0x3
-    262c:	d42080e7          	jalr	-702(ra) # 536a <exit>
-    printf("%s: sbrk downsize failed, a %x c %x\n", a, c);
-    2630:	862a                	mv	a2,a0
-    2632:	85a6                	mv	a1,s1
-    2634:	00004517          	auipc	a0,0x4
-    2638:	0e450513          	addi	a0,a0,228 # 6718 <malloc+0xf7c>
-    263c:	00003097          	auipc	ra,0x3
-    2640:	0a8080e7          	jalr	168(ra) # 56e4 <printf>
-    exit(1);
-    2644:	4505                	li	a0,1
-    2646:	00003097          	auipc	ra,0x3
-    264a:	d24080e7          	jalr	-732(ra) # 536a <exit>
-
-000000000000264e <sbrkarg>:
-{
-    264e:	7179                	addi	sp,sp,-48
-    2650:	f406                	sd	ra,40(sp)
-    2652:	f022                	sd	s0,32(sp)
-    2654:	ec26                	sd	s1,24(sp)
-    2656:	e84a                	sd	s2,16(sp)
-    2658:	e44e                	sd	s3,8(sp)
-    265a:	1800                	addi	s0,sp,48
-    265c:	89aa                	mv	s3,a0
+    2966:	85ce                	mv	a1,s3
+    2968:	00004517          	auipc	a0,0x4
+    296c:	34050513          	addi	a0,a0,832 # 6ca8 <malloc+0x1024>
+    2970:	00003097          	auipc	ra,0x3
+    2974:	25c080e7          	jalr	604(ra) # 5bcc <printf>
+    exit(1);
+    2978:	4505                	li	a0,1
+    297a:	00003097          	auipc	ra,0x3
+    297e:	ec8080e7          	jalr	-312(ra) # 5842 <exit>
+    printf("%s: sbrk downsize failed, a %x c %x\n", s, a, c);
+    2982:	86aa                	mv	a3,a0
+    2984:	8626                	mv	a2,s1
+    2986:	85ce                	mv	a1,s3
+    2988:	00004517          	auipc	a0,0x4
+    298c:	35850513          	addi	a0,a0,856 # 6ce0 <malloc+0x105c>
+    2990:	00003097          	auipc	ra,0x3
+    2994:	23c080e7          	jalr	572(ra) # 5bcc <printf>
+    exit(1);
+    2998:	4505                	li	a0,1
+    299a:	00003097          	auipc	ra,0x3
+    299e:	ea8080e7          	jalr	-344(ra) # 5842 <exit>
+
+00000000000029a2 <sbrkarg>:
+{
+    29a2:	7179                	addi	sp,sp,-48
+    29a4:	f406                	sd	ra,40(sp)
+    29a6:	f022                	sd	s0,32(sp)
+    29a8:	ec26                	sd	s1,24(sp)
+    29aa:	e84a                	sd	s2,16(sp)
+    29ac:	e44e                	sd	s3,8(sp)
+    29ae:	1800                	addi	s0,sp,48
+    29b0:	89aa                	mv	s3,a0
   a = sbrk(PGSIZE);
-    265e:	6505                	lui	a0,0x1
-    2660:	00003097          	auipc	ra,0x3
-    2664:	d92080e7          	jalr	-622(ra) # 53f2 <sbrk>
-    2668:	892a                	mv	s2,a0
+    29b2:	6505                	lui	a0,0x1
+    29b4:	00003097          	auipc	ra,0x3
+    29b8:	f16080e7          	jalr	-234(ra) # 58ca <sbrk>
+    29bc:	892a                	mv	s2,a0
   fd = open("sbrk", O_CREATE|O_WRONLY);
-    266a:	20100593          	li	a1,513
-    266e:	00004517          	auipc	a0,0x4
-    2672:	0d250513          	addi	a0,a0,210 # 6740 <malloc+0xfa4>
-    2676:	00003097          	auipc	ra,0x3
-    267a:	d34080e7          	jalr	-716(ra) # 53aa <open>
-    267e:	84aa                	mv	s1,a0
+    29be:	20100593          	li	a1,513
+    29c2:	00004517          	auipc	a0,0x4
+    29c6:	34650513          	addi	a0,a0,838 # 6d08 <malloc+0x1084>
+    29ca:	00003097          	auipc	ra,0x3
+    29ce:	eb8080e7          	jalr	-328(ra) # 5882 <open>
+    29d2:	84aa                	mv	s1,a0
   unlink("sbrk");
-    2680:	00004517          	auipc	a0,0x4
-    2684:	0c050513          	addi	a0,a0,192 # 6740 <malloc+0xfa4>
-    2688:	00003097          	auipc	ra,0x3
-    268c:	d32080e7          	jalr	-718(ra) # 53ba <unlink>
+    29d4:	00004517          	auipc	a0,0x4
+    29d8:	33450513          	addi	a0,a0,820 # 6d08 <malloc+0x1084>
+    29dc:	00003097          	auipc	ra,0x3
+    29e0:	eb6080e7          	jalr	-330(ra) # 5892 <unlink>
   if(fd < 0)  {
-    2690:	0404c163          	bltz	s1,26d2 <sbrkarg+0x84>
+    29e4:	0404c163          	bltz	s1,2a26 <sbrkarg+0x84>
   if ((n = write(fd, a, PGSIZE)) < 0) {
-    2694:	6605                	lui	a2,0x1
-    2696:	85ca                	mv	a1,s2
-    2698:	8526                	mv	a0,s1
-    269a:	00003097          	auipc	ra,0x3
-    269e:	cf0080e7          	jalr	-784(ra) # 538a <write>
-    26a2:	04054663          	bltz	a0,26ee <sbrkarg+0xa0>
+    29e8:	6605                	lui	a2,0x1
+    29ea:	85ca                	mv	a1,s2
+    29ec:	8526                	mv	a0,s1
+    29ee:	00003097          	auipc	ra,0x3
+    29f2:	e74080e7          	jalr	-396(ra) # 5862 <write>
+    29f6:	04054663          	bltz	a0,2a42 <sbrkarg+0xa0>
   close(fd);
-    26a6:	8526                	mv	a0,s1
-    26a8:	00003097          	auipc	ra,0x3
-    26ac:	cea080e7          	jalr	-790(ra) # 5392 <close>
+    29fa:	8526                	mv	a0,s1
+    29fc:	00003097          	auipc	ra,0x3
+    2a00:	e6e080e7          	jalr	-402(ra) # 586a <close>
   a = sbrk(PGSIZE);
-    26b0:	6505                	lui	a0,0x1
-    26b2:	00003097          	auipc	ra,0x3
-    26b6:	d40080e7          	jalr	-704(ra) # 53f2 <sbrk>
+    2a04:	6505                	lui	a0,0x1
+    2a06:	00003097          	auipc	ra,0x3
+    2a0a:	ec4080e7          	jalr	-316(ra) # 58ca <sbrk>
   if(pipe((int *) a) != 0){
-    26ba:	00003097          	auipc	ra,0x3
-    26be:	cc0080e7          	jalr	-832(ra) # 537a <pipe>
-    26c2:	e521                	bnez	a0,270a <sbrkarg+0xbc>
+    2a0e:	00003097          	auipc	ra,0x3
+    2a12:	e44080e7          	jalr	-444(ra) # 5852 <pipe>
+    2a16:	e521                	bnez	a0,2a5e <sbrkarg+0xbc>
 }
-    26c4:	70a2                	ld	ra,40(sp)
-    26c6:	7402                	ld	s0,32(sp)
-    26c8:	64e2                	ld	s1,24(sp)
-    26ca:	6942                	ld	s2,16(sp)
-    26cc:	69a2                	ld	s3,8(sp)
-    26ce:	6145                	addi	sp,sp,48
-    26d0:	8082                	ret
+    2a18:	70a2                	ld	ra,40(sp)
+    2a1a:	7402                	ld	s0,32(sp)
+    2a1c:	64e2                	ld	s1,24(sp)
+    2a1e:	6942                	ld	s2,16(sp)
+    2a20:	69a2                	ld	s3,8(sp)
+    2a22:	6145                	addi	sp,sp,48
+    2a24:	8082                	ret
     printf("%s: open sbrk failed\n", s);
-    26d2:	85ce                	mv	a1,s3
-    26d4:	00004517          	auipc	a0,0x4
-    26d8:	07450513          	addi	a0,a0,116 # 6748 <malloc+0xfac>
-    26dc:	00003097          	auipc	ra,0x3
-    26e0:	008080e7          	jalr	8(ra) # 56e4 <printf>
-    exit(1);
-    26e4:	4505                	li	a0,1
-    26e6:	00003097          	auipc	ra,0x3
-    26ea:	c84080e7          	jalr	-892(ra) # 536a <exit>
+    2a26:	85ce                	mv	a1,s3
+    2a28:	00004517          	auipc	a0,0x4
+    2a2c:	2e850513          	addi	a0,a0,744 # 6d10 <malloc+0x108c>
+    2a30:	00003097          	auipc	ra,0x3
+    2a34:	19c080e7          	jalr	412(ra) # 5bcc <printf>
+    exit(1);
+    2a38:	4505                	li	a0,1
+    2a3a:	00003097          	auipc	ra,0x3
+    2a3e:	e08080e7          	jalr	-504(ra) # 5842 <exit>
     printf("%s: write sbrk failed\n", s);
-    26ee:	85ce                	mv	a1,s3
-    26f0:	00004517          	auipc	a0,0x4
-    26f4:	07050513          	addi	a0,a0,112 # 6760 <malloc+0xfc4>
-    26f8:	00003097          	auipc	ra,0x3
-    26fc:	fec080e7          	jalr	-20(ra) # 56e4 <printf>
-    exit(1);
-    2700:	4505                	li	a0,1
-    2702:	00003097          	auipc	ra,0x3
-    2706:	c68080e7          	jalr	-920(ra) # 536a <exit>
+    2a42:	85ce                	mv	a1,s3
+    2a44:	00004517          	auipc	a0,0x4
+    2a48:	2e450513          	addi	a0,a0,740 # 6d28 <malloc+0x10a4>
+    2a4c:	00003097          	auipc	ra,0x3
+    2a50:	180080e7          	jalr	384(ra) # 5bcc <printf>
+    exit(1);
+    2a54:	4505                	li	a0,1
+    2a56:	00003097          	auipc	ra,0x3
+    2a5a:	dec080e7          	jalr	-532(ra) # 5842 <exit>
     printf("%s: pipe() failed\n", s);
-    270a:	85ce                	mv	a1,s3
-    270c:	00004517          	auipc	a0,0x4
-    2710:	b1450513          	addi	a0,a0,-1260 # 6220 <malloc+0xa84>
-    2714:	00003097          	auipc	ra,0x3
-    2718:	fd0080e7          	jalr	-48(ra) # 56e4 <printf>
-    exit(1);
-    271c:	4505                	li	a0,1
-    271e:	00003097          	auipc	ra,0x3
-    2722:	c4c080e7          	jalr	-948(ra) # 536a <exit>
-
-0000000000002726 <argptest>:
-{
-    2726:	1101                	addi	sp,sp,-32
-    2728:	ec06                	sd	ra,24(sp)
-    272a:	e822                	sd	s0,16(sp)
-    272c:	e426                	sd	s1,8(sp)
-    272e:	e04a                	sd	s2,0(sp)
-    2730:	1000                	addi	s0,sp,32
-    2732:	892a                	mv	s2,a0
+    2a5e:	85ce                	mv	a1,s3
+    2a60:	00004517          	auipc	a0,0x4
+    2a64:	ca850513          	addi	a0,a0,-856 # 6708 <malloc+0xa84>
+    2a68:	00003097          	auipc	ra,0x3
+    2a6c:	164080e7          	jalr	356(ra) # 5bcc <printf>
+    exit(1);
+    2a70:	4505                	li	a0,1
+    2a72:	00003097          	auipc	ra,0x3
+    2a76:	dd0080e7          	jalr	-560(ra) # 5842 <exit>
+
+0000000000002a7a <argptest>:
+{
+    2a7a:	1101                	addi	sp,sp,-32
+    2a7c:	ec06                	sd	ra,24(sp)
+    2a7e:	e822                	sd	s0,16(sp)
+    2a80:	e426                	sd	s1,8(sp)
+    2a82:	e04a                	sd	s2,0(sp)
+    2a84:	1000                	addi	s0,sp,32
+    2a86:	892a                	mv	s2,a0
   fd = open("init", O_RDONLY);
-    2734:	4581                	li	a1,0
-    2736:	00004517          	auipc	a0,0x4
-    273a:	04250513          	addi	a0,a0,66 # 6778 <malloc+0xfdc>
-    273e:	00003097          	auipc	ra,0x3
-    2742:	c6c080e7          	jalr	-916(ra) # 53aa <open>
+    2a88:	4581                	li	a1,0
+    2a8a:	00004517          	auipc	a0,0x4
+    2a8e:	2b650513          	addi	a0,a0,694 # 6d40 <malloc+0x10bc>
+    2a92:	00003097          	auipc	ra,0x3
+    2a96:	df0080e7          	jalr	-528(ra) # 5882 <open>
   if (fd < 0) {
-    2746:	02054b63          	bltz	a0,277c <argptest+0x56>
-    274a:	84aa                	mv	s1,a0
+    2a9a:	02054b63          	bltz	a0,2ad0 <argptest+0x56>
+    2a9e:	84aa                	mv	s1,a0
   read(fd, sbrk(0) - 1, -1);
-    274c:	4501                	li	a0,0
-    274e:	00003097          	auipc	ra,0x3
-    2752:	ca4080e7          	jalr	-860(ra) # 53f2 <sbrk>
-    2756:	567d                	li	a2,-1
-    2758:	fff50593          	addi	a1,a0,-1
-    275c:	8526                	mv	a0,s1
-    275e:	00003097          	auipc	ra,0x3
-    2762:	c24080e7          	jalr	-988(ra) # 5382 <read>
+    2aa0:	4501                	li	a0,0
+    2aa2:	00003097          	auipc	ra,0x3
+    2aa6:	e28080e7          	jalr	-472(ra) # 58ca <sbrk>
+    2aaa:	567d                	li	a2,-1
+    2aac:	fff50593          	addi	a1,a0,-1
+    2ab0:	8526                	mv	a0,s1
+    2ab2:	00003097          	auipc	ra,0x3
+    2ab6:	da8080e7          	jalr	-600(ra) # 585a <read>
   close(fd);
-    2766:	8526                	mv	a0,s1
-    2768:	00003097          	auipc	ra,0x3
-    276c:	c2a080e7          	jalr	-982(ra) # 5392 <close>
-}
-    2770:	60e2                	ld	ra,24(sp)
-    2772:	6442                	ld	s0,16(sp)
-    2774:	64a2                	ld	s1,8(sp)
-    2776:	6902                	ld	s2,0(sp)
-    2778:	6105                	addi	sp,sp,32
-    277a:	8082                	ret
+    2aba:	8526                	mv	a0,s1
+    2abc:	00003097          	auipc	ra,0x3
+    2ac0:	dae080e7          	jalr	-594(ra) # 586a <close>
+}
+    2ac4:	60e2                	ld	ra,24(sp)
+    2ac6:	6442                	ld	s0,16(sp)
+    2ac8:	64a2                	ld	s1,8(sp)
+    2aca:	6902                	ld	s2,0(sp)
+    2acc:	6105                	addi	sp,sp,32
+    2ace:	8082                	ret
     printf("%s: open failed\n", s);
-    277c:	85ca                	mv	a1,s2
-    277e:	00004517          	auipc	a0,0x4
-    2782:	9b250513          	addi	a0,a0,-1614 # 6130 <malloc+0x994>
-    2786:	00003097          	auipc	ra,0x3
-    278a:	f5e080e7          	jalr	-162(ra) # 56e4 <printf>
-    exit(1);
-    278e:	4505                	li	a0,1
-    2790:	00003097          	auipc	ra,0x3
-    2794:	bda080e7          	jalr	-1062(ra) # 536a <exit>
-
-0000000000002798 <sbrkbugs>:
-{
-    2798:	1141                	addi	sp,sp,-16
-    279a:	e406                	sd	ra,8(sp)
-    279c:	e022                	sd	s0,0(sp)
-    279e:	0800                	addi	s0,sp,16
+    2ad0:	85ca                	mv	a1,s2
+    2ad2:	00004517          	auipc	a0,0x4
+    2ad6:	b4650513          	addi	a0,a0,-1210 # 6618 <malloc+0x994>
+    2ada:	00003097          	auipc	ra,0x3
+    2ade:	0f2080e7          	jalr	242(ra) # 5bcc <printf>
+    exit(1);
+    2ae2:	4505                	li	a0,1
+    2ae4:	00003097          	auipc	ra,0x3
+    2ae8:	d5e080e7          	jalr	-674(ra) # 5842 <exit>
+
+0000000000002aec <sbrkbugs>:
+{
+    2aec:	1141                	addi	sp,sp,-16
+    2aee:	e406                	sd	ra,8(sp)
+    2af0:	e022                	sd	s0,0(sp)
+    2af2:	0800                	addi	s0,sp,16
   int pid = fork();
-    27a0:	00003097          	auipc	ra,0x3
-    27a4:	bc2080e7          	jalr	-1086(ra) # 5362 <fork>
+    2af4:	00003097          	auipc	ra,0x3
+    2af8:	d46080e7          	jalr	-698(ra) # 583a <fork>
   if(pid < 0){
-    27a8:	02054263          	bltz	a0,27cc <sbrkbugs+0x34>
+    2afc:	02054263          	bltz	a0,2b20 <sbrkbugs+0x34>
   if(pid == 0){
-    27ac:	ed0d                	bnez	a0,27e6 <sbrkbugs+0x4e>
+    2b00:	ed0d                	bnez	a0,2b3a <sbrkbugs+0x4e>
     int sz = (uint64) sbrk(0);
-    27ae:	00003097          	auipc	ra,0x3
-    27b2:	c44080e7          	jalr	-956(ra) # 53f2 <sbrk>
+    2b02:	00003097          	auipc	ra,0x3
+    2b06:	dc8080e7          	jalr	-568(ra) # 58ca <sbrk>
     sbrk(-sz);
-    27b6:	40a0053b          	negw	a0,a0
-    27ba:	00003097          	auipc	ra,0x3
-    27be:	c38080e7          	jalr	-968(ra) # 53f2 <sbrk>
+    2b0a:	40a0053b          	negw	a0,a0
+    2b0e:	00003097          	auipc	ra,0x3
+    2b12:	dbc080e7          	jalr	-580(ra) # 58ca <sbrk>
     exit(0);
-    27c2:	4501                	li	a0,0
-    27c4:	00003097          	auipc	ra,0x3
-    27c8:	ba6080e7          	jalr	-1114(ra) # 536a <exit>
+    2b16:	4501                	li	a0,0
+    2b18:	00003097          	auipc	ra,0x3
+    2b1c:	d2a080e7          	jalr	-726(ra) # 5842 <exit>
     printf("fork failed\n");
-    27cc:	00004517          	auipc	a0,0x4
-    27d0:	d3c50513          	addi	a0,a0,-708 # 6508 <malloc+0xd6c>
-    27d4:	00003097          	auipc	ra,0x3
-    27d8:	f10080e7          	jalr	-240(ra) # 56e4 <printf>
-    exit(1);
-    27dc:	4505                	li	a0,1
-    27de:	00003097          	auipc	ra,0x3
-    27e2:	b8c080e7          	jalr	-1140(ra) # 536a <exit>
+    2b20:	00004517          	auipc	a0,0x4
+    2b24:	f0050513          	addi	a0,a0,-256 # 6a20 <malloc+0xd9c>
+    2b28:	00003097          	auipc	ra,0x3
+    2b2c:	0a4080e7          	jalr	164(ra) # 5bcc <printf>
+    exit(1);
+    2b30:	4505                	li	a0,1
+    2b32:	00003097          	auipc	ra,0x3
+    2b36:	d10080e7          	jalr	-752(ra) # 5842 <exit>
   wait(0);
-    27e6:	4501                	li	a0,0
-    27e8:	00003097          	auipc	ra,0x3
-    27ec:	b8a080e7          	jalr	-1142(ra) # 5372 <wait>
+    2b3a:	4501                	li	a0,0
+    2b3c:	00003097          	auipc	ra,0x3
+    2b40:	d0e080e7          	jalr	-754(ra) # 584a <wait>
   pid = fork();
-    27f0:	00003097          	auipc	ra,0x3
-    27f4:	b72080e7          	jalr	-1166(ra) # 5362 <fork>
+    2b44:	00003097          	auipc	ra,0x3
+    2b48:	cf6080e7          	jalr	-778(ra) # 583a <fork>
   if(pid < 0){
-    27f8:	02054563          	bltz	a0,2822 <sbrkbugs+0x8a>
+    2b4c:	02054563          	bltz	a0,2b76 <sbrkbugs+0x8a>
   if(pid == 0){
-    27fc:	e121                	bnez	a0,283c <sbrkbugs+0xa4>
+    2b50:	e121                	bnez	a0,2b90 <sbrkbugs+0xa4>
     int sz = (uint64) sbrk(0);
-    27fe:	00003097          	auipc	ra,0x3
-    2802:	bf4080e7          	jalr	-1036(ra) # 53f2 <sbrk>
+    2b52:	00003097          	auipc	ra,0x3
+    2b56:	d78080e7          	jalr	-648(ra) # 58ca <sbrk>
     sbrk(-(sz - 3500));
-    2806:	6785                	lui	a5,0x1
-    2808:	dac7879b          	addiw	a5,a5,-596
-    280c:	40a7853b          	subw	a0,a5,a0
-    2810:	00003097          	auipc	ra,0x3
-    2814:	be2080e7          	jalr	-1054(ra) # 53f2 <sbrk>
+    2b5a:	6785                	lui	a5,0x1
+    2b5c:	dac7879b          	addiw	a5,a5,-596
+    2b60:	40a7853b          	subw	a0,a5,a0
+    2b64:	00003097          	auipc	ra,0x3
+    2b68:	d66080e7          	jalr	-666(ra) # 58ca <sbrk>
     exit(0);
-    2818:	4501                	li	a0,0
-    281a:	00003097          	auipc	ra,0x3
-    281e:	b50080e7          	jalr	-1200(ra) # 536a <exit>
+    2b6c:	4501                	li	a0,0
+    2b6e:	00003097          	auipc	ra,0x3
+    2b72:	cd4080e7          	jalr	-812(ra) # 5842 <exit>
     printf("fork failed\n");
-    2822:	00004517          	auipc	a0,0x4
-    2826:	ce650513          	addi	a0,a0,-794 # 6508 <malloc+0xd6c>
-    282a:	00003097          	auipc	ra,0x3
-    282e:	eba080e7          	jalr	-326(ra) # 56e4 <printf>
-    exit(1);
-    2832:	4505                	li	a0,1
-    2834:	00003097          	auipc	ra,0x3
-    2838:	b36080e7          	jalr	-1226(ra) # 536a <exit>
+    2b76:	00004517          	auipc	a0,0x4
+    2b7a:	eaa50513          	addi	a0,a0,-342 # 6a20 <malloc+0xd9c>
+    2b7e:	00003097          	auipc	ra,0x3
+    2b82:	04e080e7          	jalr	78(ra) # 5bcc <printf>
+    exit(1);
+    2b86:	4505                	li	a0,1
+    2b88:	00003097          	auipc	ra,0x3
+    2b8c:	cba080e7          	jalr	-838(ra) # 5842 <exit>
   wait(0);
-    283c:	4501                	li	a0,0
-    283e:	00003097          	auipc	ra,0x3
-    2842:	b34080e7          	jalr	-1228(ra) # 5372 <wait>
+    2b90:	4501                	li	a0,0
+    2b92:	00003097          	auipc	ra,0x3
+    2b96:	cb8080e7          	jalr	-840(ra) # 584a <wait>
   pid = fork();
-    2846:	00003097          	auipc	ra,0x3
-    284a:	b1c080e7          	jalr	-1252(ra) # 5362 <fork>
+    2b9a:	00003097          	auipc	ra,0x3
+    2b9e:	ca0080e7          	jalr	-864(ra) # 583a <fork>
   if(pid < 0){
-    284e:	02054a63          	bltz	a0,2882 <sbrkbugs+0xea>
+    2ba2:	02054a63          	bltz	a0,2bd6 <sbrkbugs+0xea>
   if(pid == 0){
-    2852:	e529                	bnez	a0,289c <sbrkbugs+0x104>
+    2ba6:	e529                	bnez	a0,2bf0 <sbrkbugs+0x104>
     sbrk((10*4096 + 2048) - (uint64)sbrk(0));
-    2854:	00003097          	auipc	ra,0x3
-    2858:	b9e080e7          	jalr	-1122(ra) # 53f2 <sbrk>
-    285c:	67ad                	lui	a5,0xb
-    285e:	8007879b          	addiw	a5,a5,-2048
-    2862:	40a7853b          	subw	a0,a5,a0
-    2866:	00003097          	auipc	ra,0x3
-    286a:	b8c080e7          	jalr	-1140(ra) # 53f2 <sbrk>
+    2ba8:	00003097          	auipc	ra,0x3
+    2bac:	d22080e7          	jalr	-734(ra) # 58ca <sbrk>
+    2bb0:	67ad                	lui	a5,0xb
+    2bb2:	8007879b          	addiw	a5,a5,-2048
+    2bb6:	40a7853b          	subw	a0,a5,a0
+    2bba:	00003097          	auipc	ra,0x3
+    2bbe:	d10080e7          	jalr	-752(ra) # 58ca <sbrk>
     sbrk(-10);
-    286e:	5559                	li	a0,-10
-    2870:	00003097          	auipc	ra,0x3
-    2874:	b82080e7          	jalr	-1150(ra) # 53f2 <sbrk>
+    2bc2:	5559                	li	a0,-10
+    2bc4:	00003097          	auipc	ra,0x3
+    2bc8:	d06080e7          	jalr	-762(ra) # 58ca <sbrk>
     exit(0);
-    2878:	4501                	li	a0,0
-    287a:	00003097          	auipc	ra,0x3
-    287e:	af0080e7          	jalr	-1296(ra) # 536a <exit>
+    2bcc:	4501                	li	a0,0
+    2bce:	00003097          	auipc	ra,0x3
+    2bd2:	c74080e7          	jalr	-908(ra) # 5842 <exit>
     printf("fork failed\n");
-    2882:	00004517          	auipc	a0,0x4
-    2886:	c8650513          	addi	a0,a0,-890 # 6508 <malloc+0xd6c>
-    288a:	00003097          	auipc	ra,0x3
-    288e:	e5a080e7          	jalr	-422(ra) # 56e4 <printf>
-    exit(1);
-    2892:	4505                	li	a0,1
-    2894:	00003097          	auipc	ra,0x3
-    2898:	ad6080e7          	jalr	-1322(ra) # 536a <exit>
+    2bd6:	00004517          	auipc	a0,0x4
+    2bda:	e4a50513          	addi	a0,a0,-438 # 6a20 <malloc+0xd9c>
+    2bde:	00003097          	auipc	ra,0x3
+    2be2:	fee080e7          	jalr	-18(ra) # 5bcc <printf>
+    exit(1);
+    2be6:	4505                	li	a0,1
+    2be8:	00003097          	auipc	ra,0x3
+    2bec:	c5a080e7          	jalr	-934(ra) # 5842 <exit>
   wait(0);
-    289c:	4501                	li	a0,0
-    289e:	00003097          	auipc	ra,0x3
-    28a2:	ad4080e7          	jalr	-1324(ra) # 5372 <wait>
+    2bf0:	4501                	li	a0,0
+    2bf2:	00003097          	auipc	ra,0x3
+    2bf6:	c58080e7          	jalr	-936(ra) # 584a <wait>
   exit(0);
-    28a6:	4501                	li	a0,0
-    28a8:	00003097          	auipc	ra,0x3
-    28ac:	ac2080e7          	jalr	-1342(ra) # 536a <exit>
+    2bfa:	4501                	li	a0,0
+    2bfc:	00003097          	auipc	ra,0x3
+    2c00:	c46080e7          	jalr	-954(ra) # 5842 <exit>
+
+0000000000002c04 <sbrklast>:
+{
+    2c04:	7179                	addi	sp,sp,-48
+    2c06:	f406                	sd	ra,40(sp)
+    2c08:	f022                	sd	s0,32(sp)
+    2c0a:	ec26                	sd	s1,24(sp)
+    2c0c:	e84a                	sd	s2,16(sp)
+    2c0e:	e44e                	sd	s3,8(sp)
+    2c10:	e052                	sd	s4,0(sp)
+    2c12:	1800                	addi	s0,sp,48
+  uint64 top = (uint64) sbrk(0);
+    2c14:	4501                	li	a0,0
+    2c16:	00003097          	auipc	ra,0x3
+    2c1a:	cb4080e7          	jalr	-844(ra) # 58ca <sbrk>
+  if((top % 4096) != 0)
+    2c1e:	03451793          	slli	a5,a0,0x34
+    2c22:	ebd9                	bnez	a5,2cb8 <sbrklast+0xb4>
+  sbrk(4096);
+    2c24:	6505                	lui	a0,0x1
+    2c26:	00003097          	auipc	ra,0x3
+    2c2a:	ca4080e7          	jalr	-860(ra) # 58ca <sbrk>
+  sbrk(10);
+    2c2e:	4529                	li	a0,10
+    2c30:	00003097          	auipc	ra,0x3
+    2c34:	c9a080e7          	jalr	-870(ra) # 58ca <sbrk>
+  sbrk(-20);
+    2c38:	5531                	li	a0,-20
+    2c3a:	00003097          	auipc	ra,0x3
+    2c3e:	c90080e7          	jalr	-880(ra) # 58ca <sbrk>
+  top = (uint64) sbrk(0);
+    2c42:	4501                	li	a0,0
+    2c44:	00003097          	auipc	ra,0x3
+    2c48:	c86080e7          	jalr	-890(ra) # 58ca <sbrk>
+    2c4c:	84aa                	mv	s1,a0
+  char *p = (char *) (top - 64);
+    2c4e:	fc050913          	addi	s2,a0,-64 # fc0 <bigdir+0x60>
+  p[0] = 'x';
+    2c52:	07800a13          	li	s4,120
+    2c56:	fd450023          	sb	s4,-64(a0)
+  p[1] = '\0';
+    2c5a:	fc0500a3          	sb	zero,-63(a0)
+  int fd = open(p, O_RDWR|O_CREATE);
+    2c5e:	20200593          	li	a1,514
+    2c62:	854a                	mv	a0,s2
+    2c64:	00003097          	auipc	ra,0x3
+    2c68:	c1e080e7          	jalr	-994(ra) # 5882 <open>
+    2c6c:	89aa                	mv	s3,a0
+  write(fd, p, 1);
+    2c6e:	4605                	li	a2,1
+    2c70:	85ca                	mv	a1,s2
+    2c72:	00003097          	auipc	ra,0x3
+    2c76:	bf0080e7          	jalr	-1040(ra) # 5862 <write>
+  close(fd);
+    2c7a:	854e                	mv	a0,s3
+    2c7c:	00003097          	auipc	ra,0x3
+    2c80:	bee080e7          	jalr	-1042(ra) # 586a <close>
+  fd = open(p, O_RDWR);
+    2c84:	4589                	li	a1,2
+    2c86:	854a                	mv	a0,s2
+    2c88:	00003097          	auipc	ra,0x3
+    2c8c:	bfa080e7          	jalr	-1030(ra) # 5882 <open>
+  p[0] = '\0';
+    2c90:	fc048023          	sb	zero,-64(s1)
+  read(fd, p, 1);
+    2c94:	4605                	li	a2,1
+    2c96:	85ca                	mv	a1,s2
+    2c98:	00003097          	auipc	ra,0x3
+    2c9c:	bc2080e7          	jalr	-1086(ra) # 585a <read>
+  if(p[0] != 'x')
+    2ca0:	fc04c783          	lbu	a5,-64(s1)
+    2ca4:	03479463          	bne	a5,s4,2ccc <sbrklast+0xc8>
+}
+    2ca8:	70a2                	ld	ra,40(sp)
+    2caa:	7402                	ld	s0,32(sp)
+    2cac:	64e2                	ld	s1,24(sp)
+    2cae:	6942                	ld	s2,16(sp)
+    2cb0:	69a2                	ld	s3,8(sp)
+    2cb2:	6a02                	ld	s4,0(sp)
+    2cb4:	6145                	addi	sp,sp,48
+    2cb6:	8082                	ret
+    sbrk(4096 - (top % 4096));
+    2cb8:	0347d513          	srli	a0,a5,0x34
+    2cbc:	6785                	lui	a5,0x1
+    2cbe:	40a7853b          	subw	a0,a5,a0
+    2cc2:	00003097          	auipc	ra,0x3
+    2cc6:	c08080e7          	jalr	-1016(ra) # 58ca <sbrk>
+    2cca:	bfa9                	j	2c24 <sbrklast+0x20>
+    exit(1);
+    2ccc:	4505                	li	a0,1
+    2cce:	00003097          	auipc	ra,0x3
+    2cd2:	b74080e7          	jalr	-1164(ra) # 5842 <exit>
+
+0000000000002cd6 <sbrk8000>:
+{
+    2cd6:	1141                	addi	sp,sp,-16
+    2cd8:	e406                	sd	ra,8(sp)
+    2cda:	e022                	sd	s0,0(sp)
+    2cdc:	0800                	addi	s0,sp,16
+  sbrk(0x80000004);
+    2cde:	80000537          	lui	a0,0x80000
+    2ce2:	0511                	addi	a0,a0,4
+    2ce4:	00003097          	auipc	ra,0x3
+    2ce8:	be6080e7          	jalr	-1050(ra) # 58ca <sbrk>
+  volatile char *top = sbrk(0);
+    2cec:	4501                	li	a0,0
+    2cee:	00003097          	auipc	ra,0x3
+    2cf2:	bdc080e7          	jalr	-1060(ra) # 58ca <sbrk>
+  *(top-1) = *(top-1) + 1;
+    2cf6:	fff54783          	lbu	a5,-1(a0) # ffffffff7fffffff <__BSS_END__+0xffffffff7fff1207>
+    2cfa:	2785                	addiw	a5,a5,1
+    2cfc:	0ff7f793          	zext.b	a5,a5
+    2d00:	fef50fa3          	sb	a5,-1(a0)
+}
+    2d04:	60a2                	ld	ra,8(sp)
+    2d06:	6402                	ld	s0,0(sp)
+    2d08:	0141                	addi	sp,sp,16
+    2d0a:	8082                	ret
 
-00000000000028b0 <execout>:
+0000000000002d0c <execout>:
 // test the exec() code that cleans up if it runs out
 // of memory. it's really a test that such a condition
 // doesn't cause a panic.
 void
 execout(char *s)
 {
-    28b0:	715d                	addi	sp,sp,-80
-    28b2:	e486                	sd	ra,72(sp)
-    28b4:	e0a2                	sd	s0,64(sp)
-    28b6:	fc26                	sd	s1,56(sp)
-    28b8:	f84a                	sd	s2,48(sp)
-    28ba:	f44e                	sd	s3,40(sp)
-    28bc:	f052                	sd	s4,32(sp)
-    28be:	0880                	addi	s0,sp,80
+    2d0c:	715d                	addi	sp,sp,-80
+    2d0e:	e486                	sd	ra,72(sp)
+    2d10:	e0a2                	sd	s0,64(sp)
+    2d12:	fc26                	sd	s1,56(sp)
+    2d14:	f84a                	sd	s2,48(sp)
+    2d16:	f44e                	sd	s3,40(sp)
+    2d18:	f052                	sd	s4,32(sp)
+    2d1a:	0880                	addi	s0,sp,80
   for(int avail = 0; avail < 15; avail++){
-    28c0:	4901                	li	s2,0
-    28c2:	49bd                	li	s3,15
+    2d1c:	4901                	li	s2,0
+    2d1e:	49bd                	li	s3,15
     int pid = fork();
-    28c4:	00003097          	auipc	ra,0x3
-    28c8:	a9e080e7          	jalr	-1378(ra) # 5362 <fork>
-    28cc:	84aa                	mv	s1,a0
+    2d20:	00003097          	auipc	ra,0x3
+    2d24:	b1a080e7          	jalr	-1254(ra) # 583a <fork>
+    2d28:	84aa                	mv	s1,a0
     if(pid < 0){
-    28ce:	02054063          	bltz	a0,28ee <execout+0x3e>
+    2d2a:	02054063          	bltz	a0,2d4a <execout+0x3e>
       printf("fork failed\n");
       exit(1);
     } else if(pid == 0){
-    28d2:	c91d                	beqz	a0,2908 <execout+0x58>
+    2d2e:	c91d                	beqz	a0,2d64 <execout+0x58>
       close(1);
       char *args[] = { "echo", "x", 0 };
       exec("echo", args);
       exit(0);
     } else {
       wait((int*)0);
-    28d4:	4501                	li	a0,0
-    28d6:	00003097          	auipc	ra,0x3
-    28da:	a9c080e7          	jalr	-1380(ra) # 5372 <wait>
+    2d30:	4501                	li	a0,0
+    2d32:	00003097          	auipc	ra,0x3
+    2d36:	b18080e7          	jalr	-1256(ra) # 584a <wait>
   for(int avail = 0; avail < 15; avail++){
-    28de:	2905                	addiw	s2,s2,1
-    28e0:	ff3912e3          	bne	s2,s3,28c4 <execout+0x14>
+    2d3a:	2905                	addiw	s2,s2,1
+    2d3c:	ff3912e3          	bne	s2,s3,2d20 <execout+0x14>
     }
   }
 
   exit(0);
-    28e4:	4501                	li	a0,0
-    28e6:	00003097          	auipc	ra,0x3
-    28ea:	a84080e7          	jalr	-1404(ra) # 536a <exit>
+    2d40:	4501                	li	a0,0
+    2d42:	00003097          	auipc	ra,0x3
+    2d46:	b00080e7          	jalr	-1280(ra) # 5842 <exit>
       printf("fork failed\n");
-    28ee:	00004517          	auipc	a0,0x4
-    28f2:	c1a50513          	addi	a0,a0,-998 # 6508 <malloc+0xd6c>
-    28f6:	00003097          	auipc	ra,0x3
-    28fa:	dee080e7          	jalr	-530(ra) # 56e4 <printf>
-      exit(1);
-    28fe:	4505                	li	a0,1
-    2900:	00003097          	auipc	ra,0x3
-    2904:	a6a080e7          	jalr	-1430(ra) # 536a <exit>
+    2d4a:	00004517          	auipc	a0,0x4
+    2d4e:	cd650513          	addi	a0,a0,-810 # 6a20 <malloc+0xd9c>
+    2d52:	00003097          	auipc	ra,0x3
+    2d56:	e7a080e7          	jalr	-390(ra) # 5bcc <printf>
+      exit(1);
+    2d5a:	4505                	li	a0,1
+    2d5c:	00003097          	auipc	ra,0x3
+    2d60:	ae6080e7          	jalr	-1306(ra) # 5842 <exit>
         if(a == 0xffffffffffffffffLL)
-    2908:	59fd                	li	s3,-1
+    2d64:	59fd                	li	s3,-1
         *(char*)(a + 4096 - 1) = 1;
-    290a:	4a05                	li	s4,1
+    2d66:	4a05                	li	s4,1
         uint64 a = (uint64) sbrk(4096);
-    290c:	6505                	lui	a0,0x1
-    290e:	00003097          	auipc	ra,0x3
-    2912:	ae4080e7          	jalr	-1308(ra) # 53f2 <sbrk>
+    2d68:	6505                	lui	a0,0x1
+    2d6a:	00003097          	auipc	ra,0x3
+    2d6e:	b60080e7          	jalr	-1184(ra) # 58ca <sbrk>
         if(a == 0xffffffffffffffffLL)
-    2916:	01350763          	beq	a0,s3,2924 <execout+0x74>
+    2d72:	01350763          	beq	a0,s3,2d80 <execout+0x74>
         *(char*)(a + 4096 - 1) = 1;
-    291a:	6785                	lui	a5,0x1
-    291c:	97aa                	add	a5,a5,a0
-    291e:	ff478fa3          	sb	s4,-1(a5) # fff <bigdir+0x97>
+    2d76:	6785                	lui	a5,0x1
+    2d78:	97aa                	add	a5,a5,a0
+    2d7a:	ff478fa3          	sb	s4,-1(a5) # fff <bigdir+0x9f>
       while(1){
-    2922:	b7ed                	j	290c <execout+0x5c>
+    2d7e:	b7ed                	j	2d68 <execout+0x5c>
       for(int i = 0; i < avail; i++)
-    2924:	01205a63          	blez	s2,2938 <execout+0x88>
+    2d80:	01205a63          	blez	s2,2d94 <execout+0x88>
         sbrk(-4096);
-    2928:	757d                	lui	a0,0xfffff
-    292a:	00003097          	auipc	ra,0x3
-    292e:	ac8080e7          	jalr	-1336(ra) # 53f2 <sbrk>
+    2d84:	757d                	lui	a0,0xfffff
+    2d86:	00003097          	auipc	ra,0x3
+    2d8a:	b44080e7          	jalr	-1212(ra) # 58ca <sbrk>
       for(int i = 0; i < avail; i++)
-    2932:	2485                	addiw	s1,s1,1
-    2934:	ff249ae3          	bne	s1,s2,2928 <execout+0x78>
+    2d8e:	2485                	addiw	s1,s1,1
+    2d90:	ff249ae3          	bne	s1,s2,2d84 <execout+0x78>
       close(1);
-    2938:	4505                	li	a0,1
-    293a:	00003097          	auipc	ra,0x3
-    293e:	a58080e7          	jalr	-1448(ra) # 5392 <close>
+    2d94:	4505                	li	a0,1
+    2d96:	00003097          	auipc	ra,0x3
+    2d9a:	ad4080e7          	jalr	-1324(ra) # 586a <close>
       char *args[] = { "echo", "x", 0 };
-    2942:	00003517          	auipc	a0,0x3
-    2946:	f7e50513          	addi	a0,a0,-130 # 58c0 <malloc+0x124>
-    294a:	faa43c23          	sd	a0,-72(s0)
-    294e:	00003797          	auipc	a5,0x3
-    2952:	fe278793          	addi	a5,a5,-30 # 5930 <malloc+0x194>
-    2956:	fcf43023          	sd	a5,-64(s0)
-    295a:	fc043423          	sd	zero,-56(s0)
+    2d9e:	00003517          	auipc	a0,0x3
+    2da2:	00a50513          	addi	a0,a0,10 # 5da8 <malloc+0x124>
+    2da6:	faa43c23          	sd	a0,-72(s0)
+    2daa:	00003797          	auipc	a5,0x3
+    2dae:	06e78793          	addi	a5,a5,110 # 5e18 <malloc+0x194>
+    2db2:	fcf43023          	sd	a5,-64(s0)
+    2db6:	fc043423          	sd	zero,-56(s0)
       exec("echo", args);
-    295e:	fb840593          	addi	a1,s0,-72
-    2962:	00003097          	auipc	ra,0x3
-    2966:	a40080e7          	jalr	-1472(ra) # 53a2 <exec>
+    2dba:	fb840593          	addi	a1,s0,-72
+    2dbe:	00003097          	auipc	ra,0x3
+    2dc2:	abc080e7          	jalr	-1348(ra) # 587a <exec>
       exit(0);
-    296a:	4501                	li	a0,0
-    296c:	00003097          	auipc	ra,0x3
-    2970:	9fe080e7          	jalr	-1538(ra) # 536a <exit>
-
-0000000000002974 <fourteen>:
-{
-    2974:	1101                	addi	sp,sp,-32
-    2976:	ec06                	sd	ra,24(sp)
-    2978:	e822                	sd	s0,16(sp)
-    297a:	e426                	sd	s1,8(sp)
-    297c:	1000                	addi	s0,sp,32
-    297e:	84aa                	mv	s1,a0
+    2dc6:	4501                	li	a0,0
+    2dc8:	00003097          	auipc	ra,0x3
+    2dcc:	a7a080e7          	jalr	-1414(ra) # 5842 <exit>
+
+0000000000002dd0 <fourteen>:
+{
+    2dd0:	1101                	addi	sp,sp,-32
+    2dd2:	ec06                	sd	ra,24(sp)
+    2dd4:	e822                	sd	s0,16(sp)
+    2dd6:	e426                	sd	s1,8(sp)
+    2dd8:	1000                	addi	s0,sp,32
+    2dda:	84aa                	mv	s1,a0
   if(mkdir("12345678901234") != 0){
-    2980:	00004517          	auipc	a0,0x4
-    2984:	fd050513          	addi	a0,a0,-48 # 6950 <malloc+0x11b4>
-    2988:	00003097          	auipc	ra,0x3
-    298c:	a4a080e7          	jalr	-1462(ra) # 53d2 <mkdir>
-    2990:	e165                	bnez	a0,2a70 <fourteen+0xfc>
+    2ddc:	00004517          	auipc	a0,0x4
+    2de0:	13c50513          	addi	a0,a0,316 # 6f18 <malloc+0x1294>
+    2de4:	00003097          	auipc	ra,0x3
+    2de8:	ac6080e7          	jalr	-1338(ra) # 58aa <mkdir>
+    2dec:	e165                	bnez	a0,2ecc <fourteen+0xfc>
   if(mkdir("12345678901234/123456789012345") != 0){
-    2992:	00004517          	auipc	a0,0x4
-    2996:	e1650513          	addi	a0,a0,-490 # 67a8 <malloc+0x100c>
-    299a:	00003097          	auipc	ra,0x3
-    299e:	a38080e7          	jalr	-1480(ra) # 53d2 <mkdir>
-    29a2:	e56d                	bnez	a0,2a8c <fourteen+0x118>
+    2dee:	00004517          	auipc	a0,0x4
+    2df2:	f8250513          	addi	a0,a0,-126 # 6d70 <malloc+0x10ec>
+    2df6:	00003097          	auipc	ra,0x3
+    2dfa:	ab4080e7          	jalr	-1356(ra) # 58aa <mkdir>
+    2dfe:	e56d                	bnez	a0,2ee8 <fourteen+0x118>
   fd = open("123456789012345/123456789012345/123456789012345", O_CREATE);
-    29a4:	20000593          	li	a1,512
-    29a8:	00004517          	auipc	a0,0x4
-    29ac:	e5850513          	addi	a0,a0,-424 # 6800 <malloc+0x1064>
-    29b0:	00003097          	auipc	ra,0x3
-    29b4:	9fa080e7          	jalr	-1542(ra) # 53aa <open>
+    2e00:	20000593          	li	a1,512
+    2e04:	00004517          	auipc	a0,0x4
+    2e08:	fc450513          	addi	a0,a0,-60 # 6dc8 <malloc+0x1144>
+    2e0c:	00003097          	auipc	ra,0x3
+    2e10:	a76080e7          	jalr	-1418(ra) # 5882 <open>
   if(fd < 0){
-    29b8:	0e054863          	bltz	a0,2aa8 <fourteen+0x134>
+    2e14:	0e054863          	bltz	a0,2f04 <fourteen+0x134>
   close(fd);
-    29bc:	00003097          	auipc	ra,0x3
-    29c0:	9d6080e7          	jalr	-1578(ra) # 5392 <close>
+    2e18:	00003097          	auipc	ra,0x3
+    2e1c:	a52080e7          	jalr	-1454(ra) # 586a <close>
   fd = open("12345678901234/12345678901234/12345678901234", 0);
-    29c4:	4581                	li	a1,0
-    29c6:	00004517          	auipc	a0,0x4
-    29ca:	eb250513          	addi	a0,a0,-334 # 6878 <malloc+0x10dc>
-    29ce:	00003097          	auipc	ra,0x3
-    29d2:	9dc080e7          	jalr	-1572(ra) # 53aa <open>
+    2e20:	4581                	li	a1,0
+    2e22:	00004517          	auipc	a0,0x4
+    2e26:	01e50513          	addi	a0,a0,30 # 6e40 <malloc+0x11bc>
+    2e2a:	00003097          	auipc	ra,0x3
+    2e2e:	a58080e7          	jalr	-1448(ra) # 5882 <open>
   if(fd < 0){
-    29d6:	0e054763          	bltz	a0,2ac4 <fourteen+0x150>
+    2e32:	0e054763          	bltz	a0,2f20 <fourteen+0x150>
   close(fd);
-    29da:	00003097          	auipc	ra,0x3
-    29de:	9b8080e7          	jalr	-1608(ra) # 5392 <close>
+    2e36:	00003097          	auipc	ra,0x3
+    2e3a:	a34080e7          	jalr	-1484(ra) # 586a <close>
   if(mkdir("12345678901234/12345678901234") == 0){
-    29e2:	00004517          	auipc	a0,0x4
-    29e6:	f0650513          	addi	a0,a0,-250 # 68e8 <malloc+0x114c>
-    29ea:	00003097          	auipc	ra,0x3
-    29ee:	9e8080e7          	jalr	-1560(ra) # 53d2 <mkdir>
-    29f2:	c57d                	beqz	a0,2ae0 <fourteen+0x16c>
+    2e3e:	00004517          	auipc	a0,0x4
+    2e42:	07250513          	addi	a0,a0,114 # 6eb0 <malloc+0x122c>
+    2e46:	00003097          	auipc	ra,0x3
+    2e4a:	a64080e7          	jalr	-1436(ra) # 58aa <mkdir>
+    2e4e:	c57d                	beqz	a0,2f3c <fourteen+0x16c>
   if(mkdir("123456789012345/12345678901234") == 0){
-    29f4:	00004517          	auipc	a0,0x4
-    29f8:	f4c50513          	addi	a0,a0,-180 # 6940 <malloc+0x11a4>
-    29fc:	00003097          	auipc	ra,0x3
-    2a00:	9d6080e7          	jalr	-1578(ra) # 53d2 <mkdir>
-    2a04:	cd65                	beqz	a0,2afc <fourteen+0x188>
+    2e50:	00004517          	auipc	a0,0x4
+    2e54:	0b850513          	addi	a0,a0,184 # 6f08 <malloc+0x1284>
+    2e58:	00003097          	auipc	ra,0x3
+    2e5c:	a52080e7          	jalr	-1454(ra) # 58aa <mkdir>
+    2e60:	cd65                	beqz	a0,2f58 <fourteen+0x188>
   unlink("123456789012345/12345678901234");
-    2a06:	00004517          	auipc	a0,0x4
-    2a0a:	f3a50513          	addi	a0,a0,-198 # 6940 <malloc+0x11a4>
-    2a0e:	00003097          	auipc	ra,0x3
-    2a12:	9ac080e7          	jalr	-1620(ra) # 53ba <unlink>
+    2e62:	00004517          	auipc	a0,0x4
+    2e66:	0a650513          	addi	a0,a0,166 # 6f08 <malloc+0x1284>
+    2e6a:	00003097          	auipc	ra,0x3
+    2e6e:	a28080e7          	jalr	-1496(ra) # 5892 <unlink>
   unlink("12345678901234/12345678901234");
-    2a16:	00004517          	auipc	a0,0x4
-    2a1a:	ed250513          	addi	a0,a0,-302 # 68e8 <malloc+0x114c>
-    2a1e:	00003097          	auipc	ra,0x3
-    2a22:	99c080e7          	jalr	-1636(ra) # 53ba <unlink>
+    2e72:	00004517          	auipc	a0,0x4
+    2e76:	03e50513          	addi	a0,a0,62 # 6eb0 <malloc+0x122c>
+    2e7a:	00003097          	auipc	ra,0x3
+    2e7e:	a18080e7          	jalr	-1512(ra) # 5892 <unlink>
   unlink("12345678901234/12345678901234/12345678901234");
-    2a26:	00004517          	auipc	a0,0x4
-    2a2a:	e5250513          	addi	a0,a0,-430 # 6878 <malloc+0x10dc>
-    2a2e:	00003097          	auipc	ra,0x3
-    2a32:	98c080e7          	jalr	-1652(ra) # 53ba <unlink>
+    2e82:	00004517          	auipc	a0,0x4
+    2e86:	fbe50513          	addi	a0,a0,-66 # 6e40 <malloc+0x11bc>
+    2e8a:	00003097          	auipc	ra,0x3
+    2e8e:	a08080e7          	jalr	-1528(ra) # 5892 <unlink>
   unlink("123456789012345/123456789012345/123456789012345");
-    2a36:	00004517          	auipc	a0,0x4
-    2a3a:	dca50513          	addi	a0,a0,-566 # 6800 <malloc+0x1064>
-    2a3e:	00003097          	auipc	ra,0x3
-    2a42:	97c080e7          	jalr	-1668(ra) # 53ba <unlink>
+    2e92:	00004517          	auipc	a0,0x4
+    2e96:	f3650513          	addi	a0,a0,-202 # 6dc8 <malloc+0x1144>
+    2e9a:	00003097          	auipc	ra,0x3
+    2e9e:	9f8080e7          	jalr	-1544(ra) # 5892 <unlink>
   unlink("12345678901234/123456789012345");
-    2a46:	00004517          	auipc	a0,0x4
-    2a4a:	d6250513          	addi	a0,a0,-670 # 67a8 <malloc+0x100c>
-    2a4e:	00003097          	auipc	ra,0x3
-    2a52:	96c080e7          	jalr	-1684(ra) # 53ba <unlink>
+    2ea2:	00004517          	auipc	a0,0x4
+    2ea6:	ece50513          	addi	a0,a0,-306 # 6d70 <malloc+0x10ec>
+    2eaa:	00003097          	auipc	ra,0x3
+    2eae:	9e8080e7          	jalr	-1560(ra) # 5892 <unlink>
   unlink("12345678901234");
-    2a56:	00004517          	auipc	a0,0x4
-    2a5a:	efa50513          	addi	a0,a0,-262 # 6950 <malloc+0x11b4>
-    2a5e:	00003097          	auipc	ra,0x3
-    2a62:	95c080e7          	jalr	-1700(ra) # 53ba <unlink>
-}
-    2a66:	60e2                	ld	ra,24(sp)
-    2a68:	6442                	ld	s0,16(sp)
-    2a6a:	64a2                	ld	s1,8(sp)
-    2a6c:	6105                	addi	sp,sp,32
-    2a6e:	8082                	ret
+    2eb2:	00004517          	auipc	a0,0x4
+    2eb6:	06650513          	addi	a0,a0,102 # 6f18 <malloc+0x1294>
+    2eba:	00003097          	auipc	ra,0x3
+    2ebe:	9d8080e7          	jalr	-1576(ra) # 5892 <unlink>
+}
+    2ec2:	60e2                	ld	ra,24(sp)
+    2ec4:	6442                	ld	s0,16(sp)
+    2ec6:	64a2                	ld	s1,8(sp)
+    2ec8:	6105                	addi	sp,sp,32
+    2eca:	8082                	ret
     printf("%s: mkdir 12345678901234 failed\n", s);
-    2a70:	85a6                	mv	a1,s1
-    2a72:	00004517          	auipc	a0,0x4
-    2a76:	d0e50513          	addi	a0,a0,-754 # 6780 <malloc+0xfe4>
-    2a7a:	00003097          	auipc	ra,0x3
-    2a7e:	c6a080e7          	jalr	-918(ra) # 56e4 <printf>
-    exit(1);
-    2a82:	4505                	li	a0,1
-    2a84:	00003097          	auipc	ra,0x3
-    2a88:	8e6080e7          	jalr	-1818(ra) # 536a <exit>
+    2ecc:	85a6                	mv	a1,s1
+    2ece:	00004517          	auipc	a0,0x4
+    2ed2:	e7a50513          	addi	a0,a0,-390 # 6d48 <malloc+0x10c4>
+    2ed6:	00003097          	auipc	ra,0x3
+    2eda:	cf6080e7          	jalr	-778(ra) # 5bcc <printf>
+    exit(1);
+    2ede:	4505                	li	a0,1
+    2ee0:	00003097          	auipc	ra,0x3
+    2ee4:	962080e7          	jalr	-1694(ra) # 5842 <exit>
     printf("%s: mkdir 12345678901234/123456789012345 failed\n", s);
-    2a8c:	85a6                	mv	a1,s1
-    2a8e:	00004517          	auipc	a0,0x4
-    2a92:	d3a50513          	addi	a0,a0,-710 # 67c8 <malloc+0x102c>
-    2a96:	00003097          	auipc	ra,0x3
-    2a9a:	c4e080e7          	jalr	-946(ra) # 56e4 <printf>
-    exit(1);
-    2a9e:	4505                	li	a0,1
-    2aa0:	00003097          	auipc	ra,0x3
-    2aa4:	8ca080e7          	jalr	-1846(ra) # 536a <exit>
+    2ee8:	85a6                	mv	a1,s1
+    2eea:	00004517          	auipc	a0,0x4
+    2eee:	ea650513          	addi	a0,a0,-346 # 6d90 <malloc+0x110c>
+    2ef2:	00003097          	auipc	ra,0x3
+    2ef6:	cda080e7          	jalr	-806(ra) # 5bcc <printf>
+    exit(1);
+    2efa:	4505                	li	a0,1
+    2efc:	00003097          	auipc	ra,0x3
+    2f00:	946080e7          	jalr	-1722(ra) # 5842 <exit>
     printf("%s: create 123456789012345/123456789012345/123456789012345 failed\n", s);
-    2aa8:	85a6                	mv	a1,s1
-    2aaa:	00004517          	auipc	a0,0x4
-    2aae:	d8650513          	addi	a0,a0,-634 # 6830 <malloc+0x1094>
-    2ab2:	00003097          	auipc	ra,0x3
-    2ab6:	c32080e7          	jalr	-974(ra) # 56e4 <printf>
-    exit(1);
-    2aba:	4505                	li	a0,1
-    2abc:	00003097          	auipc	ra,0x3
-    2ac0:	8ae080e7          	jalr	-1874(ra) # 536a <exit>
+    2f04:	85a6                	mv	a1,s1
+    2f06:	00004517          	auipc	a0,0x4
+    2f0a:	ef250513          	addi	a0,a0,-270 # 6df8 <malloc+0x1174>
+    2f0e:	00003097          	auipc	ra,0x3
+    2f12:	cbe080e7          	jalr	-834(ra) # 5bcc <printf>
+    exit(1);
+    2f16:	4505                	li	a0,1
+    2f18:	00003097          	auipc	ra,0x3
+    2f1c:	92a080e7          	jalr	-1750(ra) # 5842 <exit>
     printf("%s: open 12345678901234/12345678901234/12345678901234 failed\n", s);
-    2ac4:	85a6                	mv	a1,s1
-    2ac6:	00004517          	auipc	a0,0x4
-    2aca:	de250513          	addi	a0,a0,-542 # 68a8 <malloc+0x110c>
-    2ace:	00003097          	auipc	ra,0x3
-    2ad2:	c16080e7          	jalr	-1002(ra) # 56e4 <printf>
-    exit(1);
-    2ad6:	4505                	li	a0,1
-    2ad8:	00003097          	auipc	ra,0x3
-    2adc:	892080e7          	jalr	-1902(ra) # 536a <exit>
+    2f20:	85a6                	mv	a1,s1
+    2f22:	00004517          	auipc	a0,0x4
+    2f26:	f4e50513          	addi	a0,a0,-178 # 6e70 <malloc+0x11ec>
+    2f2a:	00003097          	auipc	ra,0x3
+    2f2e:	ca2080e7          	jalr	-862(ra) # 5bcc <printf>
+    exit(1);
+    2f32:	4505                	li	a0,1
+    2f34:	00003097          	auipc	ra,0x3
+    2f38:	90e080e7          	jalr	-1778(ra) # 5842 <exit>
     printf("%s: mkdir 12345678901234/12345678901234 succeeded!\n", s);
-    2ae0:	85a6                	mv	a1,s1
-    2ae2:	00004517          	auipc	a0,0x4
-    2ae6:	e2650513          	addi	a0,a0,-474 # 6908 <malloc+0x116c>
-    2aea:	00003097          	auipc	ra,0x3
-    2aee:	bfa080e7          	jalr	-1030(ra) # 56e4 <printf>
-    exit(1);
-    2af2:	4505                	li	a0,1
-    2af4:	00003097          	auipc	ra,0x3
-    2af8:	876080e7          	jalr	-1930(ra) # 536a <exit>
+    2f3c:	85a6                	mv	a1,s1
+    2f3e:	00004517          	auipc	a0,0x4
+    2f42:	f9250513          	addi	a0,a0,-110 # 6ed0 <malloc+0x124c>
+    2f46:	00003097          	auipc	ra,0x3
+    2f4a:	c86080e7          	jalr	-890(ra) # 5bcc <printf>
+    exit(1);
+    2f4e:	4505                	li	a0,1
+    2f50:	00003097          	auipc	ra,0x3
+    2f54:	8f2080e7          	jalr	-1806(ra) # 5842 <exit>
     printf("%s: mkdir 12345678901234/123456789012345 succeeded!\n", s);
-    2afc:	85a6                	mv	a1,s1
-    2afe:	00004517          	auipc	a0,0x4
-    2b02:	e6250513          	addi	a0,a0,-414 # 6960 <malloc+0x11c4>
-    2b06:	00003097          	auipc	ra,0x3
-    2b0a:	bde080e7          	jalr	-1058(ra) # 56e4 <printf>
-    exit(1);
-    2b0e:	4505                	li	a0,1
-    2b10:	00003097          	auipc	ra,0x3
-    2b14:	85a080e7          	jalr	-1958(ra) # 536a <exit>
-
-0000000000002b18 <iputtest>:
-{
-    2b18:	1101                	addi	sp,sp,-32
-    2b1a:	ec06                	sd	ra,24(sp)
-    2b1c:	e822                	sd	s0,16(sp)
-    2b1e:	e426                	sd	s1,8(sp)
-    2b20:	1000                	addi	s0,sp,32
-    2b22:	84aa                	mv	s1,a0
+    2f58:	85a6                	mv	a1,s1
+    2f5a:	00004517          	auipc	a0,0x4
+    2f5e:	fce50513          	addi	a0,a0,-50 # 6f28 <malloc+0x12a4>
+    2f62:	00003097          	auipc	ra,0x3
+    2f66:	c6a080e7          	jalr	-918(ra) # 5bcc <printf>
+    exit(1);
+    2f6a:	4505                	li	a0,1
+    2f6c:	00003097          	auipc	ra,0x3
+    2f70:	8d6080e7          	jalr	-1834(ra) # 5842 <exit>
+
+0000000000002f74 <iputtest>:
+{
+    2f74:	1101                	addi	sp,sp,-32
+    2f76:	ec06                	sd	ra,24(sp)
+    2f78:	e822                	sd	s0,16(sp)
+    2f7a:	e426                	sd	s1,8(sp)
+    2f7c:	1000                	addi	s0,sp,32
+    2f7e:	84aa                	mv	s1,a0
   if(mkdir("iputdir") < 0){
-    2b24:	00004517          	auipc	a0,0x4
-    2b28:	e7450513          	addi	a0,a0,-396 # 6998 <malloc+0x11fc>
-    2b2c:	00003097          	auipc	ra,0x3
-    2b30:	8a6080e7          	jalr	-1882(ra) # 53d2 <mkdir>
-    2b34:	04054563          	bltz	a0,2b7e <iputtest+0x66>
+    2f80:	00004517          	auipc	a0,0x4
+    2f84:	fe050513          	addi	a0,a0,-32 # 6f60 <malloc+0x12dc>
+    2f88:	00003097          	auipc	ra,0x3
+    2f8c:	922080e7          	jalr	-1758(ra) # 58aa <mkdir>
+    2f90:	04054563          	bltz	a0,2fda <iputtest+0x66>
   if(chdir("iputdir") < 0){
-    2b38:	00004517          	auipc	a0,0x4
-    2b3c:	e6050513          	addi	a0,a0,-416 # 6998 <malloc+0x11fc>
-    2b40:	00003097          	auipc	ra,0x3
-    2b44:	89a080e7          	jalr	-1894(ra) # 53da <chdir>
-    2b48:	04054963          	bltz	a0,2b9a <iputtest+0x82>
+    2f94:	00004517          	auipc	a0,0x4
+    2f98:	fcc50513          	addi	a0,a0,-52 # 6f60 <malloc+0x12dc>
+    2f9c:	00003097          	auipc	ra,0x3
+    2fa0:	916080e7          	jalr	-1770(ra) # 58b2 <chdir>
+    2fa4:	04054963          	bltz	a0,2ff6 <iputtest+0x82>
   if(unlink("../iputdir") < 0){
-    2b4c:	00004517          	auipc	a0,0x4
-    2b50:	e8c50513          	addi	a0,a0,-372 # 69d8 <malloc+0x123c>
-    2b54:	00003097          	auipc	ra,0x3
-    2b58:	866080e7          	jalr	-1946(ra) # 53ba <unlink>
-    2b5c:	04054d63          	bltz	a0,2bb6 <iputtest+0x9e>
+    2fa8:	00004517          	auipc	a0,0x4
+    2fac:	ff850513          	addi	a0,a0,-8 # 6fa0 <malloc+0x131c>
+    2fb0:	00003097          	auipc	ra,0x3
+    2fb4:	8e2080e7          	jalr	-1822(ra) # 5892 <unlink>
+    2fb8:	04054d63          	bltz	a0,3012 <iputtest+0x9e>
   if(chdir("/") < 0){
-    2b60:	00004517          	auipc	a0,0x4
-    2b64:	ea850513          	addi	a0,a0,-344 # 6a08 <malloc+0x126c>
-    2b68:	00003097          	auipc	ra,0x3
-    2b6c:	872080e7          	jalr	-1934(ra) # 53da <chdir>
-    2b70:	06054163          	bltz	a0,2bd2 <iputtest+0xba>
-}
-    2b74:	60e2                	ld	ra,24(sp)
-    2b76:	6442                	ld	s0,16(sp)
-    2b78:	64a2                	ld	s1,8(sp)
-    2b7a:	6105                	addi	sp,sp,32
-    2b7c:	8082                	ret
+    2fbc:	00004517          	auipc	a0,0x4
+    2fc0:	01450513          	addi	a0,a0,20 # 6fd0 <malloc+0x134c>
+    2fc4:	00003097          	auipc	ra,0x3
+    2fc8:	8ee080e7          	jalr	-1810(ra) # 58b2 <chdir>
+    2fcc:	06054163          	bltz	a0,302e <iputtest+0xba>
+}
+    2fd0:	60e2                	ld	ra,24(sp)
+    2fd2:	6442                	ld	s0,16(sp)
+    2fd4:	64a2                	ld	s1,8(sp)
+    2fd6:	6105                	addi	sp,sp,32
+    2fd8:	8082                	ret
     printf("%s: mkdir failed\n", s);
-    2b7e:	85a6                	mv	a1,s1
-    2b80:	00004517          	auipc	a0,0x4
-    2b84:	e2050513          	addi	a0,a0,-480 # 69a0 <malloc+0x1204>
-    2b88:	00003097          	auipc	ra,0x3
-    2b8c:	b5c080e7          	jalr	-1188(ra) # 56e4 <printf>
-    exit(1);
-    2b90:	4505                	li	a0,1
-    2b92:	00002097          	auipc	ra,0x2
-    2b96:	7d8080e7          	jalr	2008(ra) # 536a <exit>
+    2fda:	85a6                	mv	a1,s1
+    2fdc:	00004517          	auipc	a0,0x4
+    2fe0:	f8c50513          	addi	a0,a0,-116 # 6f68 <malloc+0x12e4>
+    2fe4:	00003097          	auipc	ra,0x3
+    2fe8:	be8080e7          	jalr	-1048(ra) # 5bcc <printf>
+    exit(1);
+    2fec:	4505                	li	a0,1
+    2fee:	00003097          	auipc	ra,0x3
+    2ff2:	854080e7          	jalr	-1964(ra) # 5842 <exit>
     printf("%s: chdir iputdir failed\n", s);
-    2b9a:	85a6                	mv	a1,s1
-    2b9c:	00004517          	auipc	a0,0x4
-    2ba0:	e1c50513          	addi	a0,a0,-484 # 69b8 <malloc+0x121c>
-    2ba4:	00003097          	auipc	ra,0x3
-    2ba8:	b40080e7          	jalr	-1216(ra) # 56e4 <printf>
-    exit(1);
-    2bac:	4505                	li	a0,1
-    2bae:	00002097          	auipc	ra,0x2
-    2bb2:	7bc080e7          	jalr	1980(ra) # 536a <exit>
+    2ff6:	85a6                	mv	a1,s1
+    2ff8:	00004517          	auipc	a0,0x4
+    2ffc:	f8850513          	addi	a0,a0,-120 # 6f80 <malloc+0x12fc>
+    3000:	00003097          	auipc	ra,0x3
+    3004:	bcc080e7          	jalr	-1076(ra) # 5bcc <printf>
+    exit(1);
+    3008:	4505                	li	a0,1
+    300a:	00003097          	auipc	ra,0x3
+    300e:	838080e7          	jalr	-1992(ra) # 5842 <exit>
     printf("%s: unlink ../iputdir failed\n", s);
-    2bb6:	85a6                	mv	a1,s1
-    2bb8:	00004517          	auipc	a0,0x4
-    2bbc:	e3050513          	addi	a0,a0,-464 # 69e8 <malloc+0x124c>
-    2bc0:	00003097          	auipc	ra,0x3
-    2bc4:	b24080e7          	jalr	-1244(ra) # 56e4 <printf>
-    exit(1);
-    2bc8:	4505                	li	a0,1
-    2bca:	00002097          	auipc	ra,0x2
-    2bce:	7a0080e7          	jalr	1952(ra) # 536a <exit>
+    3012:	85a6                	mv	a1,s1
+    3014:	00004517          	auipc	a0,0x4
+    3018:	f9c50513          	addi	a0,a0,-100 # 6fb0 <malloc+0x132c>
+    301c:	00003097          	auipc	ra,0x3
+    3020:	bb0080e7          	jalr	-1104(ra) # 5bcc <printf>
+    exit(1);
+    3024:	4505                	li	a0,1
+    3026:	00003097          	auipc	ra,0x3
+    302a:	81c080e7          	jalr	-2020(ra) # 5842 <exit>
     printf("%s: chdir / failed\n", s);
-    2bd2:	85a6                	mv	a1,s1
-    2bd4:	00004517          	auipc	a0,0x4
-    2bd8:	e3c50513          	addi	a0,a0,-452 # 6a10 <malloc+0x1274>
-    2bdc:	00003097          	auipc	ra,0x3
-    2be0:	b08080e7          	jalr	-1272(ra) # 56e4 <printf>
-    exit(1);
-    2be4:	4505                	li	a0,1
-    2be6:	00002097          	auipc	ra,0x2
-    2bea:	784080e7          	jalr	1924(ra) # 536a <exit>
-
-0000000000002bee <exitiputtest>:
-{
-    2bee:	7179                	addi	sp,sp,-48
-    2bf0:	f406                	sd	ra,40(sp)
-    2bf2:	f022                	sd	s0,32(sp)
-    2bf4:	ec26                	sd	s1,24(sp)
-    2bf6:	1800                	addi	s0,sp,48
-    2bf8:	84aa                	mv	s1,a0
+    302e:	85a6                	mv	a1,s1
+    3030:	00004517          	auipc	a0,0x4
+    3034:	fa850513          	addi	a0,a0,-88 # 6fd8 <malloc+0x1354>
+    3038:	00003097          	auipc	ra,0x3
+    303c:	b94080e7          	jalr	-1132(ra) # 5bcc <printf>
+    exit(1);
+    3040:	4505                	li	a0,1
+    3042:	00003097          	auipc	ra,0x3
+    3046:	800080e7          	jalr	-2048(ra) # 5842 <exit>
+
+000000000000304a <exitiputtest>:
+{
+    304a:	7179                	addi	sp,sp,-48
+    304c:	f406                	sd	ra,40(sp)
+    304e:	f022                	sd	s0,32(sp)
+    3050:	ec26                	sd	s1,24(sp)
+    3052:	1800                	addi	s0,sp,48
+    3054:	84aa                	mv	s1,a0
   pid = fork();
-    2bfa:	00002097          	auipc	ra,0x2
-    2bfe:	768080e7          	jalr	1896(ra) # 5362 <fork>
+    3056:	00002097          	auipc	ra,0x2
+    305a:	7e4080e7          	jalr	2020(ra) # 583a <fork>
   if(pid < 0){
-    2c02:	04054663          	bltz	a0,2c4e <exitiputtest+0x60>
+    305e:	04054663          	bltz	a0,30aa <exitiputtest+0x60>
   if(pid == 0){
-    2c06:	ed45                	bnez	a0,2cbe <exitiputtest+0xd0>
+    3062:	ed45                	bnez	a0,311a <exitiputtest+0xd0>
     if(mkdir("iputdir") < 0){
-    2c08:	00004517          	auipc	a0,0x4
-    2c0c:	d9050513          	addi	a0,a0,-624 # 6998 <malloc+0x11fc>
-    2c10:	00002097          	auipc	ra,0x2
-    2c14:	7c2080e7          	jalr	1986(ra) # 53d2 <mkdir>
-    2c18:	04054963          	bltz	a0,2c6a <exitiputtest+0x7c>
+    3064:	00004517          	auipc	a0,0x4
+    3068:	efc50513          	addi	a0,a0,-260 # 6f60 <malloc+0x12dc>
+    306c:	00003097          	auipc	ra,0x3
+    3070:	83e080e7          	jalr	-1986(ra) # 58aa <mkdir>
+    3074:	04054963          	bltz	a0,30c6 <exitiputtest+0x7c>
     if(chdir("iputdir") < 0){
-    2c1c:	00004517          	auipc	a0,0x4
-    2c20:	d7c50513          	addi	a0,a0,-644 # 6998 <malloc+0x11fc>
-    2c24:	00002097          	auipc	ra,0x2
-    2c28:	7b6080e7          	jalr	1974(ra) # 53da <chdir>
-    2c2c:	04054d63          	bltz	a0,2c86 <exitiputtest+0x98>
+    3078:	00004517          	auipc	a0,0x4
+    307c:	ee850513          	addi	a0,a0,-280 # 6f60 <malloc+0x12dc>
+    3080:	00003097          	auipc	ra,0x3
+    3084:	832080e7          	jalr	-1998(ra) # 58b2 <chdir>
+    3088:	04054d63          	bltz	a0,30e2 <exitiputtest+0x98>
     if(unlink("../iputdir") < 0){
-    2c30:	00004517          	auipc	a0,0x4
-    2c34:	da850513          	addi	a0,a0,-600 # 69d8 <malloc+0x123c>
-    2c38:	00002097          	auipc	ra,0x2
-    2c3c:	782080e7          	jalr	1922(ra) # 53ba <unlink>
-    2c40:	06054163          	bltz	a0,2ca2 <exitiputtest+0xb4>
+    308c:	00004517          	auipc	a0,0x4
+    3090:	f1450513          	addi	a0,a0,-236 # 6fa0 <malloc+0x131c>
+    3094:	00002097          	auipc	ra,0x2
+    3098:	7fe080e7          	jalr	2046(ra) # 5892 <unlink>
+    309c:	06054163          	bltz	a0,30fe <exitiputtest+0xb4>
     exit(0);
-    2c44:	4501                	li	a0,0
-    2c46:	00002097          	auipc	ra,0x2
-    2c4a:	724080e7          	jalr	1828(ra) # 536a <exit>
+    30a0:	4501                	li	a0,0
+    30a2:	00002097          	auipc	ra,0x2
+    30a6:	7a0080e7          	jalr	1952(ra) # 5842 <exit>
     printf("%s: fork failed\n", s);
-    2c4e:	85a6                	mv	a1,s1
-    2c50:	00003517          	auipc	a0,0x3
-    2c54:	4c850513          	addi	a0,a0,1224 # 6118 <malloc+0x97c>
-    2c58:	00003097          	auipc	ra,0x3
-    2c5c:	a8c080e7          	jalr	-1396(ra) # 56e4 <printf>
-    exit(1);
-    2c60:	4505                	li	a0,1
-    2c62:	00002097          	auipc	ra,0x2
-    2c66:	708080e7          	jalr	1800(ra) # 536a <exit>
+    30aa:	85a6                	mv	a1,s1
+    30ac:	00003517          	auipc	a0,0x3
+    30b0:	55450513          	addi	a0,a0,1364 # 6600 <malloc+0x97c>
+    30b4:	00003097          	auipc	ra,0x3
+    30b8:	b18080e7          	jalr	-1256(ra) # 5bcc <printf>
+    exit(1);
+    30bc:	4505                	li	a0,1
+    30be:	00002097          	auipc	ra,0x2
+    30c2:	784080e7          	jalr	1924(ra) # 5842 <exit>
       printf("%s: mkdir failed\n", s);
-    2c6a:	85a6                	mv	a1,s1
-    2c6c:	00004517          	auipc	a0,0x4
-    2c70:	d3450513          	addi	a0,a0,-716 # 69a0 <malloc+0x1204>
-    2c74:	00003097          	auipc	ra,0x3
-    2c78:	a70080e7          	jalr	-1424(ra) # 56e4 <printf>
-      exit(1);
-    2c7c:	4505                	li	a0,1
-    2c7e:	00002097          	auipc	ra,0x2
-    2c82:	6ec080e7          	jalr	1772(ra) # 536a <exit>
+    30c6:	85a6                	mv	a1,s1
+    30c8:	00004517          	auipc	a0,0x4
+    30cc:	ea050513          	addi	a0,a0,-352 # 6f68 <malloc+0x12e4>
+    30d0:	00003097          	auipc	ra,0x3
+    30d4:	afc080e7          	jalr	-1284(ra) # 5bcc <printf>
+      exit(1);
+    30d8:	4505                	li	a0,1
+    30da:	00002097          	auipc	ra,0x2
+    30de:	768080e7          	jalr	1896(ra) # 5842 <exit>
       printf("%s: child chdir failed\n", s);
-    2c86:	85a6                	mv	a1,s1
-    2c88:	00004517          	auipc	a0,0x4
-    2c8c:	da050513          	addi	a0,a0,-608 # 6a28 <malloc+0x128c>
-    2c90:	00003097          	auipc	ra,0x3
-    2c94:	a54080e7          	jalr	-1452(ra) # 56e4 <printf>
-      exit(1);
-    2c98:	4505                	li	a0,1
-    2c9a:	00002097          	auipc	ra,0x2
-    2c9e:	6d0080e7          	jalr	1744(ra) # 536a <exit>
+    30e2:	85a6                	mv	a1,s1
+    30e4:	00004517          	auipc	a0,0x4
+    30e8:	f0c50513          	addi	a0,a0,-244 # 6ff0 <malloc+0x136c>
+    30ec:	00003097          	auipc	ra,0x3
+    30f0:	ae0080e7          	jalr	-1312(ra) # 5bcc <printf>
+      exit(1);
+    30f4:	4505                	li	a0,1
+    30f6:	00002097          	auipc	ra,0x2
+    30fa:	74c080e7          	jalr	1868(ra) # 5842 <exit>
       printf("%s: unlink ../iputdir failed\n", s);
-    2ca2:	85a6                	mv	a1,s1
-    2ca4:	00004517          	auipc	a0,0x4
-    2ca8:	d4450513          	addi	a0,a0,-700 # 69e8 <malloc+0x124c>
-    2cac:	00003097          	auipc	ra,0x3
-    2cb0:	a38080e7          	jalr	-1480(ra) # 56e4 <printf>
-      exit(1);
-    2cb4:	4505                	li	a0,1
-    2cb6:	00002097          	auipc	ra,0x2
-    2cba:	6b4080e7          	jalr	1716(ra) # 536a <exit>
+    30fe:	85a6                	mv	a1,s1
+    3100:	00004517          	auipc	a0,0x4
+    3104:	eb050513          	addi	a0,a0,-336 # 6fb0 <malloc+0x132c>
+    3108:	00003097          	auipc	ra,0x3
+    310c:	ac4080e7          	jalr	-1340(ra) # 5bcc <printf>
+      exit(1);
+    3110:	4505                	li	a0,1
+    3112:	00002097          	auipc	ra,0x2
+    3116:	730080e7          	jalr	1840(ra) # 5842 <exit>
   wait(&xstatus);
-    2cbe:	fdc40513          	addi	a0,s0,-36
-    2cc2:	00002097          	auipc	ra,0x2
-    2cc6:	6b0080e7          	jalr	1712(ra) # 5372 <wait>
+    311a:	fdc40513          	addi	a0,s0,-36
+    311e:	00002097          	auipc	ra,0x2
+    3122:	72c080e7          	jalr	1836(ra) # 584a <wait>
   exit(xstatus);
-    2cca:	fdc42503          	lw	a0,-36(s0)
-    2cce:	00002097          	auipc	ra,0x2
-    2cd2:	69c080e7          	jalr	1692(ra) # 536a <exit>
-
-0000000000002cd6 <subdir>:
-{
-    2cd6:	1101                	addi	sp,sp,-32
-    2cd8:	ec06                	sd	ra,24(sp)
-    2cda:	e822                	sd	s0,16(sp)
-    2cdc:	e426                	sd	s1,8(sp)
-    2cde:	e04a                	sd	s2,0(sp)
-    2ce0:	1000                	addi	s0,sp,32
-    2ce2:	892a                	mv	s2,a0
+    3126:	fdc42503          	lw	a0,-36(s0)
+    312a:	00002097          	auipc	ra,0x2
+    312e:	718080e7          	jalr	1816(ra) # 5842 <exit>
+
+0000000000003132 <dirtest>:
+{
+    3132:	1101                	addi	sp,sp,-32
+    3134:	ec06                	sd	ra,24(sp)
+    3136:	e822                	sd	s0,16(sp)
+    3138:	e426                	sd	s1,8(sp)
+    313a:	1000                	addi	s0,sp,32
+    313c:	84aa                	mv	s1,a0
+  if(mkdir("dir0") < 0){
+    313e:	00004517          	auipc	a0,0x4
+    3142:	eca50513          	addi	a0,a0,-310 # 7008 <malloc+0x1384>
+    3146:	00002097          	auipc	ra,0x2
+    314a:	764080e7          	jalr	1892(ra) # 58aa <mkdir>
+    314e:	04054563          	bltz	a0,3198 <dirtest+0x66>
+  if(chdir("dir0") < 0){
+    3152:	00004517          	auipc	a0,0x4
+    3156:	eb650513          	addi	a0,a0,-330 # 7008 <malloc+0x1384>
+    315a:	00002097          	auipc	ra,0x2
+    315e:	758080e7          	jalr	1880(ra) # 58b2 <chdir>
+    3162:	04054963          	bltz	a0,31b4 <dirtest+0x82>
+  if(chdir("..") < 0){
+    3166:	00004517          	auipc	a0,0x4
+    316a:	ec250513          	addi	a0,a0,-318 # 7028 <malloc+0x13a4>
+    316e:	00002097          	auipc	ra,0x2
+    3172:	744080e7          	jalr	1860(ra) # 58b2 <chdir>
+    3176:	04054d63          	bltz	a0,31d0 <dirtest+0x9e>
+  if(unlink("dir0") < 0){
+    317a:	00004517          	auipc	a0,0x4
+    317e:	e8e50513          	addi	a0,a0,-370 # 7008 <malloc+0x1384>
+    3182:	00002097          	auipc	ra,0x2
+    3186:	710080e7          	jalr	1808(ra) # 5892 <unlink>
+    318a:	06054163          	bltz	a0,31ec <dirtest+0xba>
+}
+    318e:	60e2                	ld	ra,24(sp)
+    3190:	6442                	ld	s0,16(sp)
+    3192:	64a2                	ld	s1,8(sp)
+    3194:	6105                	addi	sp,sp,32
+    3196:	8082                	ret
+    printf("%s: mkdir failed\n", s);
+    3198:	85a6                	mv	a1,s1
+    319a:	00004517          	auipc	a0,0x4
+    319e:	dce50513          	addi	a0,a0,-562 # 6f68 <malloc+0x12e4>
+    31a2:	00003097          	auipc	ra,0x3
+    31a6:	a2a080e7          	jalr	-1494(ra) # 5bcc <printf>
+    exit(1);
+    31aa:	4505                	li	a0,1
+    31ac:	00002097          	auipc	ra,0x2
+    31b0:	696080e7          	jalr	1686(ra) # 5842 <exit>
+    printf("%s: chdir dir0 failed\n", s);
+    31b4:	85a6                	mv	a1,s1
+    31b6:	00004517          	auipc	a0,0x4
+    31ba:	e5a50513          	addi	a0,a0,-422 # 7010 <malloc+0x138c>
+    31be:	00003097          	auipc	ra,0x3
+    31c2:	a0e080e7          	jalr	-1522(ra) # 5bcc <printf>
+    exit(1);
+    31c6:	4505                	li	a0,1
+    31c8:	00002097          	auipc	ra,0x2
+    31cc:	67a080e7          	jalr	1658(ra) # 5842 <exit>
+    printf("%s: chdir .. failed\n", s);
+    31d0:	85a6                	mv	a1,s1
+    31d2:	00004517          	auipc	a0,0x4
+    31d6:	e5e50513          	addi	a0,a0,-418 # 7030 <malloc+0x13ac>
+    31da:	00003097          	auipc	ra,0x3
+    31de:	9f2080e7          	jalr	-1550(ra) # 5bcc <printf>
+    exit(1);
+    31e2:	4505                	li	a0,1
+    31e4:	00002097          	auipc	ra,0x2
+    31e8:	65e080e7          	jalr	1630(ra) # 5842 <exit>
+    printf("%s: unlink dir0 failed\n", s);
+    31ec:	85a6                	mv	a1,s1
+    31ee:	00004517          	auipc	a0,0x4
+    31f2:	e5a50513          	addi	a0,a0,-422 # 7048 <malloc+0x13c4>
+    31f6:	00003097          	auipc	ra,0x3
+    31fa:	9d6080e7          	jalr	-1578(ra) # 5bcc <printf>
+    exit(1);
+    31fe:	4505                	li	a0,1
+    3200:	00002097          	auipc	ra,0x2
+    3204:	642080e7          	jalr	1602(ra) # 5842 <exit>
+
+0000000000003208 <subdir>:
+{
+    3208:	1101                	addi	sp,sp,-32
+    320a:	ec06                	sd	ra,24(sp)
+    320c:	e822                	sd	s0,16(sp)
+    320e:	e426                	sd	s1,8(sp)
+    3210:	e04a                	sd	s2,0(sp)
+    3212:	1000                	addi	s0,sp,32
+    3214:	892a                	mv	s2,a0
   unlink("ff");
-    2ce4:	00004517          	auipc	a0,0x4
-    2ce8:	e8c50513          	addi	a0,a0,-372 # 6b70 <malloc+0x13d4>
-    2cec:	00002097          	auipc	ra,0x2
-    2cf0:	6ce080e7          	jalr	1742(ra) # 53ba <unlink>
+    3216:	00004517          	auipc	a0,0x4
+    321a:	f7a50513          	addi	a0,a0,-134 # 7190 <malloc+0x150c>
+    321e:	00002097          	auipc	ra,0x2
+    3222:	674080e7          	jalr	1652(ra) # 5892 <unlink>
   if(mkdir("dd") != 0){
-    2cf4:	00004517          	auipc	a0,0x4
-    2cf8:	d4c50513          	addi	a0,a0,-692 # 6a40 <malloc+0x12a4>
-    2cfc:	00002097          	auipc	ra,0x2
-    2d00:	6d6080e7          	jalr	1750(ra) # 53d2 <mkdir>
-    2d04:	38051663          	bnez	a0,3090 <subdir+0x3ba>
+    3226:	00004517          	auipc	a0,0x4
+    322a:	e3a50513          	addi	a0,a0,-454 # 7060 <malloc+0x13dc>
+    322e:	00002097          	auipc	ra,0x2
+    3232:	67c080e7          	jalr	1660(ra) # 58aa <mkdir>
+    3236:	38051663          	bnez	a0,35c2 <subdir+0x3ba>
   fd = open("dd/ff", O_CREATE | O_RDWR);
-    2d08:	20200593          	li	a1,514
-    2d0c:	00004517          	auipc	a0,0x4
-    2d10:	d5450513          	addi	a0,a0,-684 # 6a60 <malloc+0x12c4>
-    2d14:	00002097          	auipc	ra,0x2
-    2d18:	696080e7          	jalr	1686(ra) # 53aa <open>
-    2d1c:	84aa                	mv	s1,a0
+    323a:	20200593          	li	a1,514
+    323e:	00004517          	auipc	a0,0x4
+    3242:	e4250513          	addi	a0,a0,-446 # 7080 <malloc+0x13fc>
+    3246:	00002097          	auipc	ra,0x2
+    324a:	63c080e7          	jalr	1596(ra) # 5882 <open>
+    324e:	84aa                	mv	s1,a0
   if(fd < 0){
-    2d1e:	38054763          	bltz	a0,30ac <subdir+0x3d6>
+    3250:	38054763          	bltz	a0,35de <subdir+0x3d6>
   write(fd, "ff", 2);
-    2d22:	4609                	li	a2,2
-    2d24:	00004597          	auipc	a1,0x4
-    2d28:	e4c58593          	addi	a1,a1,-436 # 6b70 <malloc+0x13d4>
-    2d2c:	00002097          	auipc	ra,0x2
-    2d30:	65e080e7          	jalr	1630(ra) # 538a <write>
+    3254:	4609                	li	a2,2
+    3256:	00004597          	auipc	a1,0x4
+    325a:	f3a58593          	addi	a1,a1,-198 # 7190 <malloc+0x150c>
+    325e:	00002097          	auipc	ra,0x2
+    3262:	604080e7          	jalr	1540(ra) # 5862 <write>
   close(fd);
-    2d34:	8526                	mv	a0,s1
-    2d36:	00002097          	auipc	ra,0x2
-    2d3a:	65c080e7          	jalr	1628(ra) # 5392 <close>
+    3266:	8526                	mv	a0,s1
+    3268:	00002097          	auipc	ra,0x2
+    326c:	602080e7          	jalr	1538(ra) # 586a <close>
   if(unlink("dd") >= 0){
-    2d3e:	00004517          	auipc	a0,0x4
-    2d42:	d0250513          	addi	a0,a0,-766 # 6a40 <malloc+0x12a4>
-    2d46:	00002097          	auipc	ra,0x2
-    2d4a:	674080e7          	jalr	1652(ra) # 53ba <unlink>
-    2d4e:	36055d63          	bgez	a0,30c8 <subdir+0x3f2>
+    3270:	00004517          	auipc	a0,0x4
+    3274:	df050513          	addi	a0,a0,-528 # 7060 <malloc+0x13dc>
+    3278:	00002097          	auipc	ra,0x2
+    327c:	61a080e7          	jalr	1562(ra) # 5892 <unlink>
+    3280:	36055d63          	bgez	a0,35fa <subdir+0x3f2>
   if(mkdir("/dd/dd") != 0){
-    2d52:	00004517          	auipc	a0,0x4
-    2d56:	d6650513          	addi	a0,a0,-666 # 6ab8 <malloc+0x131c>
-    2d5a:	00002097          	auipc	ra,0x2
-    2d5e:	678080e7          	jalr	1656(ra) # 53d2 <mkdir>
-    2d62:	38051163          	bnez	a0,30e4 <subdir+0x40e>
+    3284:	00004517          	auipc	a0,0x4
+    3288:	e5450513          	addi	a0,a0,-428 # 70d8 <malloc+0x1454>
+    328c:	00002097          	auipc	ra,0x2
+    3290:	61e080e7          	jalr	1566(ra) # 58aa <mkdir>
+    3294:	38051163          	bnez	a0,3616 <subdir+0x40e>
   fd = open("dd/dd/ff", O_CREATE | O_RDWR);
-    2d66:	20200593          	li	a1,514
-    2d6a:	00004517          	auipc	a0,0x4
-    2d6e:	d7650513          	addi	a0,a0,-650 # 6ae0 <malloc+0x1344>
-    2d72:	00002097          	auipc	ra,0x2
-    2d76:	638080e7          	jalr	1592(ra) # 53aa <open>
-    2d7a:	84aa                	mv	s1,a0
+    3298:	20200593          	li	a1,514
+    329c:	00004517          	auipc	a0,0x4
+    32a0:	e6450513          	addi	a0,a0,-412 # 7100 <malloc+0x147c>
+    32a4:	00002097          	auipc	ra,0x2
+    32a8:	5de080e7          	jalr	1502(ra) # 5882 <open>
+    32ac:	84aa                	mv	s1,a0
   if(fd < 0){
-    2d7c:	38054263          	bltz	a0,3100 <subdir+0x42a>
+    32ae:	38054263          	bltz	a0,3632 <subdir+0x42a>
   write(fd, "FF", 2);
-    2d80:	4609                	li	a2,2
-    2d82:	00004597          	auipc	a1,0x4
-    2d86:	d8e58593          	addi	a1,a1,-626 # 6b10 <malloc+0x1374>
-    2d8a:	00002097          	auipc	ra,0x2
-    2d8e:	600080e7          	jalr	1536(ra) # 538a <write>
+    32b2:	4609                	li	a2,2
+    32b4:	00004597          	auipc	a1,0x4
+    32b8:	e7c58593          	addi	a1,a1,-388 # 7130 <malloc+0x14ac>
+    32bc:	00002097          	auipc	ra,0x2
+    32c0:	5a6080e7          	jalr	1446(ra) # 5862 <write>
   close(fd);
-    2d92:	8526                	mv	a0,s1
-    2d94:	00002097          	auipc	ra,0x2
-    2d98:	5fe080e7          	jalr	1534(ra) # 5392 <close>
+    32c4:	8526                	mv	a0,s1
+    32c6:	00002097          	auipc	ra,0x2
+    32ca:	5a4080e7          	jalr	1444(ra) # 586a <close>
   fd = open("dd/dd/../ff", 0);
-    2d9c:	4581                	li	a1,0
-    2d9e:	00004517          	auipc	a0,0x4
-    2da2:	d7a50513          	addi	a0,a0,-646 # 6b18 <malloc+0x137c>
-    2da6:	00002097          	auipc	ra,0x2
-    2daa:	604080e7          	jalr	1540(ra) # 53aa <open>
-    2dae:	84aa                	mv	s1,a0
+    32ce:	4581                	li	a1,0
+    32d0:	00004517          	auipc	a0,0x4
+    32d4:	e6850513          	addi	a0,a0,-408 # 7138 <malloc+0x14b4>
+    32d8:	00002097          	auipc	ra,0x2
+    32dc:	5aa080e7          	jalr	1450(ra) # 5882 <open>
+    32e0:	84aa                	mv	s1,a0
   if(fd < 0){
-    2db0:	36054663          	bltz	a0,311c <subdir+0x446>
+    32e2:	36054663          	bltz	a0,364e <subdir+0x446>
   cc = read(fd, buf, sizeof(buf));
-    2db4:	660d                	lui	a2,0x3
-    2db6:	00009597          	auipc	a1,0x9
-    2dba:	9ca58593          	addi	a1,a1,-1590 # b780 <buf>
-    2dbe:	00002097          	auipc	ra,0x2
-    2dc2:	5c4080e7          	jalr	1476(ra) # 5382 <read>
+    32e6:	660d                	lui	a2,0x3
+    32e8:	00009597          	auipc	a1,0x9
+    32ec:	b0058593          	addi	a1,a1,-1280 # bde8 <buf>
+    32f0:	00002097          	auipc	ra,0x2
+    32f4:	56a080e7          	jalr	1386(ra) # 585a <read>
   if(cc != 2 || buf[0] != 'f'){
-    2dc6:	4789                	li	a5,2
-    2dc8:	36f51863          	bne	a0,a5,3138 <subdir+0x462>
-    2dcc:	00009717          	auipc	a4,0x9
-    2dd0:	9b474703          	lbu	a4,-1612(a4) # b780 <buf>
-    2dd4:	06600793          	li	a5,102
-    2dd8:	36f71063          	bne	a4,a5,3138 <subdir+0x462>
+    32f8:	4789                	li	a5,2
+    32fa:	36f51863          	bne	a0,a5,366a <subdir+0x462>
+    32fe:	00009717          	auipc	a4,0x9
+    3302:	aea74703          	lbu	a4,-1302(a4) # bde8 <buf>
+    3306:	06600793          	li	a5,102
+    330a:	36f71063          	bne	a4,a5,366a <subdir+0x462>
   close(fd);
-    2ddc:	8526                	mv	a0,s1
-    2dde:	00002097          	auipc	ra,0x2
-    2de2:	5b4080e7          	jalr	1460(ra) # 5392 <close>
+    330e:	8526                	mv	a0,s1
+    3310:	00002097          	auipc	ra,0x2
+    3314:	55a080e7          	jalr	1370(ra) # 586a <close>
   if(link("dd/dd/ff", "dd/dd/ffff") != 0){
-    2de6:	00004597          	auipc	a1,0x4
-    2dea:	d8258593          	addi	a1,a1,-638 # 6b68 <malloc+0x13cc>
-    2dee:	00004517          	auipc	a0,0x4
-    2df2:	cf250513          	addi	a0,a0,-782 # 6ae0 <malloc+0x1344>
-    2df6:	00002097          	auipc	ra,0x2
-    2dfa:	5d4080e7          	jalr	1492(ra) # 53ca <link>
-    2dfe:	34051b63          	bnez	a0,3154 <subdir+0x47e>
+    3318:	00004597          	auipc	a1,0x4
+    331c:	e7058593          	addi	a1,a1,-400 # 7188 <malloc+0x1504>
+    3320:	00004517          	auipc	a0,0x4
+    3324:	de050513          	addi	a0,a0,-544 # 7100 <malloc+0x147c>
+    3328:	00002097          	auipc	ra,0x2
+    332c:	57a080e7          	jalr	1402(ra) # 58a2 <link>
+    3330:	34051b63          	bnez	a0,3686 <subdir+0x47e>
   if(unlink("dd/dd/ff") != 0){
-    2e02:	00004517          	auipc	a0,0x4
-    2e06:	cde50513          	addi	a0,a0,-802 # 6ae0 <malloc+0x1344>
-    2e0a:	00002097          	auipc	ra,0x2
-    2e0e:	5b0080e7          	jalr	1456(ra) # 53ba <unlink>
-    2e12:	34051f63          	bnez	a0,3170 <subdir+0x49a>
+    3334:	00004517          	auipc	a0,0x4
+    3338:	dcc50513          	addi	a0,a0,-564 # 7100 <malloc+0x147c>
+    333c:	00002097          	auipc	ra,0x2
+    3340:	556080e7          	jalr	1366(ra) # 5892 <unlink>
+    3344:	34051f63          	bnez	a0,36a2 <subdir+0x49a>
   if(open("dd/dd/ff", O_RDONLY) >= 0){
-    2e16:	4581                	li	a1,0
-    2e18:	00004517          	auipc	a0,0x4
-    2e1c:	cc850513          	addi	a0,a0,-824 # 6ae0 <malloc+0x1344>
-    2e20:	00002097          	auipc	ra,0x2
-    2e24:	58a080e7          	jalr	1418(ra) # 53aa <open>
-    2e28:	36055263          	bgez	a0,318c <subdir+0x4b6>
+    3348:	4581                	li	a1,0
+    334a:	00004517          	auipc	a0,0x4
+    334e:	db650513          	addi	a0,a0,-586 # 7100 <malloc+0x147c>
+    3352:	00002097          	auipc	ra,0x2
+    3356:	530080e7          	jalr	1328(ra) # 5882 <open>
+    335a:	36055263          	bgez	a0,36be <subdir+0x4b6>
   if(chdir("dd") != 0){
-    2e2c:	00004517          	auipc	a0,0x4
-    2e30:	c1450513          	addi	a0,a0,-1004 # 6a40 <malloc+0x12a4>
-    2e34:	00002097          	auipc	ra,0x2
-    2e38:	5a6080e7          	jalr	1446(ra) # 53da <chdir>
-    2e3c:	36051663          	bnez	a0,31a8 <subdir+0x4d2>
+    335e:	00004517          	auipc	a0,0x4
+    3362:	d0250513          	addi	a0,a0,-766 # 7060 <malloc+0x13dc>
+    3366:	00002097          	auipc	ra,0x2
+    336a:	54c080e7          	jalr	1356(ra) # 58b2 <chdir>
+    336e:	36051663          	bnez	a0,36da <subdir+0x4d2>
   if(chdir("dd/../../dd") != 0){
-    2e40:	00004517          	auipc	a0,0x4
-    2e44:	dc050513          	addi	a0,a0,-576 # 6c00 <malloc+0x1464>
-    2e48:	00002097          	auipc	ra,0x2
-    2e4c:	592080e7          	jalr	1426(ra) # 53da <chdir>
-    2e50:	36051a63          	bnez	a0,31c4 <subdir+0x4ee>
+    3372:	00004517          	auipc	a0,0x4
+    3376:	eae50513          	addi	a0,a0,-338 # 7220 <malloc+0x159c>
+    337a:	00002097          	auipc	ra,0x2
+    337e:	538080e7          	jalr	1336(ra) # 58b2 <chdir>
+    3382:	36051a63          	bnez	a0,36f6 <subdir+0x4ee>
   if(chdir("dd/../../../dd") != 0){
-    2e54:	00004517          	auipc	a0,0x4
-    2e58:	ddc50513          	addi	a0,a0,-548 # 6c30 <malloc+0x1494>
-    2e5c:	00002097          	auipc	ra,0x2
-    2e60:	57e080e7          	jalr	1406(ra) # 53da <chdir>
-    2e64:	36051e63          	bnez	a0,31e0 <subdir+0x50a>
+    3386:	00004517          	auipc	a0,0x4
+    338a:	eca50513          	addi	a0,a0,-310 # 7250 <malloc+0x15cc>
+    338e:	00002097          	auipc	ra,0x2
+    3392:	524080e7          	jalr	1316(ra) # 58b2 <chdir>
+    3396:	36051e63          	bnez	a0,3712 <subdir+0x50a>
   if(chdir("./..") != 0){
-    2e68:	00004517          	auipc	a0,0x4
-    2e6c:	df850513          	addi	a0,a0,-520 # 6c60 <malloc+0x14c4>
-    2e70:	00002097          	auipc	ra,0x2
-    2e74:	56a080e7          	jalr	1386(ra) # 53da <chdir>
-    2e78:	38051263          	bnez	a0,31fc <subdir+0x526>
+    339a:	00004517          	auipc	a0,0x4
+    339e:	ee650513          	addi	a0,a0,-282 # 7280 <malloc+0x15fc>
+    33a2:	00002097          	auipc	ra,0x2
+    33a6:	510080e7          	jalr	1296(ra) # 58b2 <chdir>
+    33aa:	38051263          	bnez	a0,372e <subdir+0x526>
   fd = open("dd/dd/ffff", 0);
-    2e7c:	4581                	li	a1,0
-    2e7e:	00004517          	auipc	a0,0x4
-    2e82:	cea50513          	addi	a0,a0,-790 # 6b68 <malloc+0x13cc>
-    2e86:	00002097          	auipc	ra,0x2
-    2e8a:	524080e7          	jalr	1316(ra) # 53aa <open>
-    2e8e:	84aa                	mv	s1,a0
+    33ae:	4581                	li	a1,0
+    33b0:	00004517          	auipc	a0,0x4
+    33b4:	dd850513          	addi	a0,a0,-552 # 7188 <malloc+0x1504>
+    33b8:	00002097          	auipc	ra,0x2
+    33bc:	4ca080e7          	jalr	1226(ra) # 5882 <open>
+    33c0:	84aa                	mv	s1,a0
   if(fd < 0){
-    2e90:	38054463          	bltz	a0,3218 <subdir+0x542>
+    33c2:	38054463          	bltz	a0,374a <subdir+0x542>
   if(read(fd, buf, sizeof(buf)) != 2){
-    2e94:	660d                	lui	a2,0x3
-    2e96:	00009597          	auipc	a1,0x9
-    2e9a:	8ea58593          	addi	a1,a1,-1814 # b780 <buf>
-    2e9e:	00002097          	auipc	ra,0x2
-    2ea2:	4e4080e7          	jalr	1252(ra) # 5382 <read>
-    2ea6:	4789                	li	a5,2
-    2ea8:	38f51663          	bne	a0,a5,3234 <subdir+0x55e>
+    33c6:	660d                	lui	a2,0x3
+    33c8:	00009597          	auipc	a1,0x9
+    33cc:	a2058593          	addi	a1,a1,-1504 # bde8 <buf>
+    33d0:	00002097          	auipc	ra,0x2
+    33d4:	48a080e7          	jalr	1162(ra) # 585a <read>
+    33d8:	4789                	li	a5,2
+    33da:	38f51663          	bne	a0,a5,3766 <subdir+0x55e>
   close(fd);
-    2eac:	8526                	mv	a0,s1
-    2eae:	00002097          	auipc	ra,0x2
-    2eb2:	4e4080e7          	jalr	1252(ra) # 5392 <close>
+    33de:	8526                	mv	a0,s1
+    33e0:	00002097          	auipc	ra,0x2
+    33e4:	48a080e7          	jalr	1162(ra) # 586a <close>
   if(open("dd/dd/ff", O_RDONLY) >= 0){
-    2eb6:	4581                	li	a1,0
-    2eb8:	00004517          	auipc	a0,0x4
-    2ebc:	c2850513          	addi	a0,a0,-984 # 6ae0 <malloc+0x1344>
-    2ec0:	00002097          	auipc	ra,0x2
-    2ec4:	4ea080e7          	jalr	1258(ra) # 53aa <open>
-    2ec8:	38055463          	bgez	a0,3250 <subdir+0x57a>
+    33e8:	4581                	li	a1,0
+    33ea:	00004517          	auipc	a0,0x4
+    33ee:	d1650513          	addi	a0,a0,-746 # 7100 <malloc+0x147c>
+    33f2:	00002097          	auipc	ra,0x2
+    33f6:	490080e7          	jalr	1168(ra) # 5882 <open>
+    33fa:	38055463          	bgez	a0,3782 <subdir+0x57a>
   if(open("dd/ff/ff", O_CREATE|O_RDWR) >= 0){
-    2ecc:	20200593          	li	a1,514
-    2ed0:	00004517          	auipc	a0,0x4
-    2ed4:	e2050513          	addi	a0,a0,-480 # 6cf0 <malloc+0x1554>
-    2ed8:	00002097          	auipc	ra,0x2
-    2edc:	4d2080e7          	jalr	1234(ra) # 53aa <open>
-    2ee0:	38055663          	bgez	a0,326c <subdir+0x596>
+    33fe:	20200593          	li	a1,514
+    3402:	00004517          	auipc	a0,0x4
+    3406:	f0e50513          	addi	a0,a0,-242 # 7310 <malloc+0x168c>
+    340a:	00002097          	auipc	ra,0x2
+    340e:	478080e7          	jalr	1144(ra) # 5882 <open>
+    3412:	38055663          	bgez	a0,379e <subdir+0x596>
   if(open("dd/xx/ff", O_CREATE|O_RDWR) >= 0){
-    2ee4:	20200593          	li	a1,514
-    2ee8:	00004517          	auipc	a0,0x4
-    2eec:	e3850513          	addi	a0,a0,-456 # 6d20 <malloc+0x1584>
-    2ef0:	00002097          	auipc	ra,0x2
-    2ef4:	4ba080e7          	jalr	1210(ra) # 53aa <open>
-    2ef8:	38055863          	bgez	a0,3288 <subdir+0x5b2>
+    3416:	20200593          	li	a1,514
+    341a:	00004517          	auipc	a0,0x4
+    341e:	f2650513          	addi	a0,a0,-218 # 7340 <malloc+0x16bc>
+    3422:	00002097          	auipc	ra,0x2
+    3426:	460080e7          	jalr	1120(ra) # 5882 <open>
+    342a:	38055863          	bgez	a0,37ba <subdir+0x5b2>
   if(open("dd", O_CREATE) >= 0){
-    2efc:	20000593          	li	a1,512
-    2f00:	00004517          	auipc	a0,0x4
-    2f04:	b4050513          	addi	a0,a0,-1216 # 6a40 <malloc+0x12a4>
-    2f08:	00002097          	auipc	ra,0x2
-    2f0c:	4a2080e7          	jalr	1186(ra) # 53aa <open>
-    2f10:	38055a63          	bgez	a0,32a4 <subdir+0x5ce>
+    342e:	20000593          	li	a1,512
+    3432:	00004517          	auipc	a0,0x4
+    3436:	c2e50513          	addi	a0,a0,-978 # 7060 <malloc+0x13dc>
+    343a:	00002097          	auipc	ra,0x2
+    343e:	448080e7          	jalr	1096(ra) # 5882 <open>
+    3442:	38055a63          	bgez	a0,37d6 <subdir+0x5ce>
   if(open("dd", O_RDWR) >= 0){
-    2f14:	4589                	li	a1,2
-    2f16:	00004517          	auipc	a0,0x4
-    2f1a:	b2a50513          	addi	a0,a0,-1238 # 6a40 <malloc+0x12a4>
-    2f1e:	00002097          	auipc	ra,0x2
-    2f22:	48c080e7          	jalr	1164(ra) # 53aa <open>
-    2f26:	38055d63          	bgez	a0,32c0 <subdir+0x5ea>
+    3446:	4589                	li	a1,2
+    3448:	00004517          	auipc	a0,0x4
+    344c:	c1850513          	addi	a0,a0,-1000 # 7060 <malloc+0x13dc>
+    3450:	00002097          	auipc	ra,0x2
+    3454:	432080e7          	jalr	1074(ra) # 5882 <open>
+    3458:	38055d63          	bgez	a0,37f2 <subdir+0x5ea>
   if(open("dd", O_WRONLY) >= 0){
-    2f2a:	4585                	li	a1,1
-    2f2c:	00004517          	auipc	a0,0x4
-    2f30:	b1450513          	addi	a0,a0,-1260 # 6a40 <malloc+0x12a4>
-    2f34:	00002097          	auipc	ra,0x2
-    2f38:	476080e7          	jalr	1142(ra) # 53aa <open>
-    2f3c:	3a055063          	bgez	a0,32dc <subdir+0x606>
+    345c:	4585                	li	a1,1
+    345e:	00004517          	auipc	a0,0x4
+    3462:	c0250513          	addi	a0,a0,-1022 # 7060 <malloc+0x13dc>
+    3466:	00002097          	auipc	ra,0x2
+    346a:	41c080e7          	jalr	1052(ra) # 5882 <open>
+    346e:	3a055063          	bgez	a0,380e <subdir+0x606>
   if(link("dd/ff/ff", "dd/dd/xx") == 0){
-    2f40:	00004597          	auipc	a1,0x4
-    2f44:	e7058593          	addi	a1,a1,-400 # 6db0 <malloc+0x1614>
-    2f48:	00004517          	auipc	a0,0x4
-    2f4c:	da850513          	addi	a0,a0,-600 # 6cf0 <malloc+0x1554>
-    2f50:	00002097          	auipc	ra,0x2
-    2f54:	47a080e7          	jalr	1146(ra) # 53ca <link>
-    2f58:	3a050063          	beqz	a0,32f8 <subdir+0x622>
+    3472:	00004597          	auipc	a1,0x4
+    3476:	f5e58593          	addi	a1,a1,-162 # 73d0 <malloc+0x174c>
+    347a:	00004517          	auipc	a0,0x4
+    347e:	e9650513          	addi	a0,a0,-362 # 7310 <malloc+0x168c>
+    3482:	00002097          	auipc	ra,0x2
+    3486:	420080e7          	jalr	1056(ra) # 58a2 <link>
+    348a:	3a050063          	beqz	a0,382a <subdir+0x622>
   if(link("dd/xx/ff", "dd/dd/xx") == 0){
-    2f5c:	00004597          	auipc	a1,0x4
-    2f60:	e5458593          	addi	a1,a1,-428 # 6db0 <malloc+0x1614>
-    2f64:	00004517          	auipc	a0,0x4
-    2f68:	dbc50513          	addi	a0,a0,-580 # 6d20 <malloc+0x1584>
-    2f6c:	00002097          	auipc	ra,0x2
-    2f70:	45e080e7          	jalr	1118(ra) # 53ca <link>
-    2f74:	3a050063          	beqz	a0,3314 <subdir+0x63e>
+    348e:	00004597          	auipc	a1,0x4
+    3492:	f4258593          	addi	a1,a1,-190 # 73d0 <malloc+0x174c>
+    3496:	00004517          	auipc	a0,0x4
+    349a:	eaa50513          	addi	a0,a0,-342 # 7340 <malloc+0x16bc>
+    349e:	00002097          	auipc	ra,0x2
+    34a2:	404080e7          	jalr	1028(ra) # 58a2 <link>
+    34a6:	3a050063          	beqz	a0,3846 <subdir+0x63e>
   if(link("dd/ff", "dd/dd/ffff") == 0){
-    2f78:	00004597          	auipc	a1,0x4
-    2f7c:	bf058593          	addi	a1,a1,-1040 # 6b68 <malloc+0x13cc>
-    2f80:	00004517          	auipc	a0,0x4
-    2f84:	ae050513          	addi	a0,a0,-1312 # 6a60 <malloc+0x12c4>
-    2f88:	00002097          	auipc	ra,0x2
-    2f8c:	442080e7          	jalr	1090(ra) # 53ca <link>
-    2f90:	3a050063          	beqz	a0,3330 <subdir+0x65a>
+    34aa:	00004597          	auipc	a1,0x4
+    34ae:	cde58593          	addi	a1,a1,-802 # 7188 <malloc+0x1504>
+    34b2:	00004517          	auipc	a0,0x4
+    34b6:	bce50513          	addi	a0,a0,-1074 # 7080 <malloc+0x13fc>
+    34ba:	00002097          	auipc	ra,0x2
+    34be:	3e8080e7          	jalr	1000(ra) # 58a2 <link>
+    34c2:	3a050063          	beqz	a0,3862 <subdir+0x65a>
   if(mkdir("dd/ff/ff") == 0){
-    2f94:	00004517          	auipc	a0,0x4
-    2f98:	d5c50513          	addi	a0,a0,-676 # 6cf0 <malloc+0x1554>
-    2f9c:	00002097          	auipc	ra,0x2
-    2fa0:	436080e7          	jalr	1078(ra) # 53d2 <mkdir>
-    2fa4:	3a050463          	beqz	a0,334c <subdir+0x676>
+    34c6:	00004517          	auipc	a0,0x4
+    34ca:	e4a50513          	addi	a0,a0,-438 # 7310 <malloc+0x168c>
+    34ce:	00002097          	auipc	ra,0x2
+    34d2:	3dc080e7          	jalr	988(ra) # 58aa <mkdir>
+    34d6:	3a050463          	beqz	a0,387e <subdir+0x676>
   if(mkdir("dd/xx/ff") == 0){
-    2fa8:	00004517          	auipc	a0,0x4
-    2fac:	d7850513          	addi	a0,a0,-648 # 6d20 <malloc+0x1584>
-    2fb0:	00002097          	auipc	ra,0x2
-    2fb4:	422080e7          	jalr	1058(ra) # 53d2 <mkdir>
-    2fb8:	3a050863          	beqz	a0,3368 <subdir+0x692>
+    34da:	00004517          	auipc	a0,0x4
+    34de:	e6650513          	addi	a0,a0,-410 # 7340 <malloc+0x16bc>
+    34e2:	00002097          	auipc	ra,0x2
+    34e6:	3c8080e7          	jalr	968(ra) # 58aa <mkdir>
+    34ea:	3a050863          	beqz	a0,389a <subdir+0x692>
   if(mkdir("dd/dd/ffff") == 0){
-    2fbc:	00004517          	auipc	a0,0x4
-    2fc0:	bac50513          	addi	a0,a0,-1108 # 6b68 <malloc+0x13cc>
-    2fc4:	00002097          	auipc	ra,0x2
-    2fc8:	40e080e7          	jalr	1038(ra) # 53d2 <mkdir>
-    2fcc:	3a050c63          	beqz	a0,3384 <subdir+0x6ae>
+    34ee:	00004517          	auipc	a0,0x4
+    34f2:	c9a50513          	addi	a0,a0,-870 # 7188 <malloc+0x1504>
+    34f6:	00002097          	auipc	ra,0x2
+    34fa:	3b4080e7          	jalr	948(ra) # 58aa <mkdir>
+    34fe:	3a050c63          	beqz	a0,38b6 <subdir+0x6ae>
   if(unlink("dd/xx/ff") == 0){
-    2fd0:	00004517          	auipc	a0,0x4
-    2fd4:	d5050513          	addi	a0,a0,-688 # 6d20 <malloc+0x1584>
-    2fd8:	00002097          	auipc	ra,0x2
-    2fdc:	3e2080e7          	jalr	994(ra) # 53ba <unlink>
-    2fe0:	3c050063          	beqz	a0,33a0 <subdir+0x6ca>
+    3502:	00004517          	auipc	a0,0x4
+    3506:	e3e50513          	addi	a0,a0,-450 # 7340 <malloc+0x16bc>
+    350a:	00002097          	auipc	ra,0x2
+    350e:	388080e7          	jalr	904(ra) # 5892 <unlink>
+    3512:	3c050063          	beqz	a0,38d2 <subdir+0x6ca>
   if(unlink("dd/ff/ff") == 0){
-    2fe4:	00004517          	auipc	a0,0x4
-    2fe8:	d0c50513          	addi	a0,a0,-756 # 6cf0 <malloc+0x1554>
-    2fec:	00002097          	auipc	ra,0x2
-    2ff0:	3ce080e7          	jalr	974(ra) # 53ba <unlink>
-    2ff4:	3c050463          	beqz	a0,33bc <subdir+0x6e6>
+    3516:	00004517          	auipc	a0,0x4
+    351a:	dfa50513          	addi	a0,a0,-518 # 7310 <malloc+0x168c>
+    351e:	00002097          	auipc	ra,0x2
+    3522:	374080e7          	jalr	884(ra) # 5892 <unlink>
+    3526:	3c050463          	beqz	a0,38ee <subdir+0x6e6>
   if(chdir("dd/ff") == 0){
-    2ff8:	00004517          	auipc	a0,0x4
-    2ffc:	a6850513          	addi	a0,a0,-1432 # 6a60 <malloc+0x12c4>
-    3000:	00002097          	auipc	ra,0x2
-    3004:	3da080e7          	jalr	986(ra) # 53da <chdir>
-    3008:	3c050863          	beqz	a0,33d8 <subdir+0x702>
+    352a:	00004517          	auipc	a0,0x4
+    352e:	b5650513          	addi	a0,a0,-1194 # 7080 <malloc+0x13fc>
+    3532:	00002097          	auipc	ra,0x2
+    3536:	380080e7          	jalr	896(ra) # 58b2 <chdir>
+    353a:	3c050863          	beqz	a0,390a <subdir+0x702>
   if(chdir("dd/xx") == 0){
-    300c:	00004517          	auipc	a0,0x4
-    3010:	ef450513          	addi	a0,a0,-268 # 6f00 <malloc+0x1764>
-    3014:	00002097          	auipc	ra,0x2
-    3018:	3c6080e7          	jalr	966(ra) # 53da <chdir>
-    301c:	3c050c63          	beqz	a0,33f4 <subdir+0x71e>
+    353e:	00004517          	auipc	a0,0x4
+    3542:	fe250513          	addi	a0,a0,-30 # 7520 <malloc+0x189c>
+    3546:	00002097          	auipc	ra,0x2
+    354a:	36c080e7          	jalr	876(ra) # 58b2 <chdir>
+    354e:	3c050c63          	beqz	a0,3926 <subdir+0x71e>
   if(unlink("dd/dd/ffff") != 0){
-    3020:	00004517          	auipc	a0,0x4
-    3024:	b4850513          	addi	a0,a0,-1208 # 6b68 <malloc+0x13cc>
-    3028:	00002097          	auipc	ra,0x2
-    302c:	392080e7          	jalr	914(ra) # 53ba <unlink>
-    3030:	3e051063          	bnez	a0,3410 <subdir+0x73a>
+    3552:	00004517          	auipc	a0,0x4
+    3556:	c3650513          	addi	a0,a0,-970 # 7188 <malloc+0x1504>
+    355a:	00002097          	auipc	ra,0x2
+    355e:	338080e7          	jalr	824(ra) # 5892 <unlink>
+    3562:	3e051063          	bnez	a0,3942 <subdir+0x73a>
   if(unlink("dd/ff") != 0){
-    3034:	00004517          	auipc	a0,0x4
-    3038:	a2c50513          	addi	a0,a0,-1492 # 6a60 <malloc+0x12c4>
-    303c:	00002097          	auipc	ra,0x2
-    3040:	37e080e7          	jalr	894(ra) # 53ba <unlink>
-    3044:	3e051463          	bnez	a0,342c <subdir+0x756>
+    3566:	00004517          	auipc	a0,0x4
+    356a:	b1a50513          	addi	a0,a0,-1254 # 7080 <malloc+0x13fc>
+    356e:	00002097          	auipc	ra,0x2
+    3572:	324080e7          	jalr	804(ra) # 5892 <unlink>
+    3576:	3e051463          	bnez	a0,395e <subdir+0x756>
   if(unlink("dd") == 0){
-    3048:	00004517          	auipc	a0,0x4
-    304c:	9f850513          	addi	a0,a0,-1544 # 6a40 <malloc+0x12a4>
-    3050:	00002097          	auipc	ra,0x2
-    3054:	36a080e7          	jalr	874(ra) # 53ba <unlink>
-    3058:	3e050863          	beqz	a0,3448 <subdir+0x772>
+    357a:	00004517          	auipc	a0,0x4
+    357e:	ae650513          	addi	a0,a0,-1306 # 7060 <malloc+0x13dc>
+    3582:	00002097          	auipc	ra,0x2
+    3586:	310080e7          	jalr	784(ra) # 5892 <unlink>
+    358a:	3e050863          	beqz	a0,397a <subdir+0x772>
   if(unlink("dd/dd") < 0){
-    305c:	00004517          	auipc	a0,0x4
-    3060:	f1450513          	addi	a0,a0,-236 # 6f70 <malloc+0x17d4>
-    3064:	00002097          	auipc	ra,0x2
-    3068:	356080e7          	jalr	854(ra) # 53ba <unlink>
-    306c:	3e054c63          	bltz	a0,3464 <subdir+0x78e>
+    358e:	00004517          	auipc	a0,0x4
+    3592:	00250513          	addi	a0,a0,2 # 7590 <malloc+0x190c>
+    3596:	00002097          	auipc	ra,0x2
+    359a:	2fc080e7          	jalr	764(ra) # 5892 <unlink>
+    359e:	3e054c63          	bltz	a0,3996 <subdir+0x78e>
   if(unlink("dd") < 0){
-    3070:	00004517          	auipc	a0,0x4
-    3074:	9d050513          	addi	a0,a0,-1584 # 6a40 <malloc+0x12a4>
-    3078:	00002097          	auipc	ra,0x2
-    307c:	342080e7          	jalr	834(ra) # 53ba <unlink>
-    3080:	40054063          	bltz	a0,3480 <subdir+0x7aa>
-}
-    3084:	60e2                	ld	ra,24(sp)
-    3086:	6442                	ld	s0,16(sp)
-    3088:	64a2                	ld	s1,8(sp)
-    308a:	6902                	ld	s2,0(sp)
-    308c:	6105                	addi	sp,sp,32
-    308e:	8082                	ret
+    35a2:	00004517          	auipc	a0,0x4
+    35a6:	abe50513          	addi	a0,a0,-1346 # 7060 <malloc+0x13dc>
+    35aa:	00002097          	auipc	ra,0x2
+    35ae:	2e8080e7          	jalr	744(ra) # 5892 <unlink>
+    35b2:	40054063          	bltz	a0,39b2 <subdir+0x7aa>
+}
+    35b6:	60e2                	ld	ra,24(sp)
+    35b8:	6442                	ld	s0,16(sp)
+    35ba:	64a2                	ld	s1,8(sp)
+    35bc:	6902                	ld	s2,0(sp)
+    35be:	6105                	addi	sp,sp,32
+    35c0:	8082                	ret
     printf("%s: mkdir dd failed\n", s);
-    3090:	85ca                	mv	a1,s2
-    3092:	00004517          	auipc	a0,0x4
-    3096:	9b650513          	addi	a0,a0,-1610 # 6a48 <malloc+0x12ac>
-    309a:	00002097          	auipc	ra,0x2
-    309e:	64a080e7          	jalr	1610(ra) # 56e4 <printf>
-    exit(1);
-    30a2:	4505                	li	a0,1
-    30a4:	00002097          	auipc	ra,0x2
-    30a8:	2c6080e7          	jalr	710(ra) # 536a <exit>
+    35c2:	85ca                	mv	a1,s2
+    35c4:	00004517          	auipc	a0,0x4
+    35c8:	aa450513          	addi	a0,a0,-1372 # 7068 <malloc+0x13e4>
+    35cc:	00002097          	auipc	ra,0x2
+    35d0:	600080e7          	jalr	1536(ra) # 5bcc <printf>
+    exit(1);
+    35d4:	4505                	li	a0,1
+    35d6:	00002097          	auipc	ra,0x2
+    35da:	26c080e7          	jalr	620(ra) # 5842 <exit>
     printf("%s: create dd/ff failed\n", s);
-    30ac:	85ca                	mv	a1,s2
-    30ae:	00004517          	auipc	a0,0x4
-    30b2:	9ba50513          	addi	a0,a0,-1606 # 6a68 <malloc+0x12cc>
-    30b6:	00002097          	auipc	ra,0x2
-    30ba:	62e080e7          	jalr	1582(ra) # 56e4 <printf>
-    exit(1);
-    30be:	4505                	li	a0,1
-    30c0:	00002097          	auipc	ra,0x2
-    30c4:	2aa080e7          	jalr	682(ra) # 536a <exit>
+    35de:	85ca                	mv	a1,s2
+    35e0:	00004517          	auipc	a0,0x4
+    35e4:	aa850513          	addi	a0,a0,-1368 # 7088 <malloc+0x1404>
+    35e8:	00002097          	auipc	ra,0x2
+    35ec:	5e4080e7          	jalr	1508(ra) # 5bcc <printf>
+    exit(1);
+    35f0:	4505                	li	a0,1
+    35f2:	00002097          	auipc	ra,0x2
+    35f6:	250080e7          	jalr	592(ra) # 5842 <exit>
     printf("%s: unlink dd (non-empty dir) succeeded!\n", s);
-    30c8:	85ca                	mv	a1,s2
-    30ca:	00004517          	auipc	a0,0x4
-    30ce:	9be50513          	addi	a0,a0,-1602 # 6a88 <malloc+0x12ec>
-    30d2:	00002097          	auipc	ra,0x2
-    30d6:	612080e7          	jalr	1554(ra) # 56e4 <printf>
-    exit(1);
-    30da:	4505                	li	a0,1
-    30dc:	00002097          	auipc	ra,0x2
-    30e0:	28e080e7          	jalr	654(ra) # 536a <exit>
+    35fa:	85ca                	mv	a1,s2
+    35fc:	00004517          	auipc	a0,0x4
+    3600:	aac50513          	addi	a0,a0,-1364 # 70a8 <malloc+0x1424>
+    3604:	00002097          	auipc	ra,0x2
+    3608:	5c8080e7          	jalr	1480(ra) # 5bcc <printf>
+    exit(1);
+    360c:	4505                	li	a0,1
+    360e:	00002097          	auipc	ra,0x2
+    3612:	234080e7          	jalr	564(ra) # 5842 <exit>
     printf("subdir mkdir dd/dd failed\n", s);
-    30e4:	85ca                	mv	a1,s2
-    30e6:	00004517          	auipc	a0,0x4
-    30ea:	9da50513          	addi	a0,a0,-1574 # 6ac0 <malloc+0x1324>
-    30ee:	00002097          	auipc	ra,0x2
-    30f2:	5f6080e7          	jalr	1526(ra) # 56e4 <printf>
-    exit(1);
-    30f6:	4505                	li	a0,1
-    30f8:	00002097          	auipc	ra,0x2
-    30fc:	272080e7          	jalr	626(ra) # 536a <exit>
+    3616:	85ca                	mv	a1,s2
+    3618:	00004517          	auipc	a0,0x4
+    361c:	ac850513          	addi	a0,a0,-1336 # 70e0 <malloc+0x145c>
+    3620:	00002097          	auipc	ra,0x2
+    3624:	5ac080e7          	jalr	1452(ra) # 5bcc <printf>
+    exit(1);
+    3628:	4505                	li	a0,1
+    362a:	00002097          	auipc	ra,0x2
+    362e:	218080e7          	jalr	536(ra) # 5842 <exit>
     printf("%s: create dd/dd/ff failed\n", s);
-    3100:	85ca                	mv	a1,s2
-    3102:	00004517          	auipc	a0,0x4
-    3106:	9ee50513          	addi	a0,a0,-1554 # 6af0 <malloc+0x1354>
-    310a:	00002097          	auipc	ra,0x2
-    310e:	5da080e7          	jalr	1498(ra) # 56e4 <printf>
-    exit(1);
-    3112:	4505                	li	a0,1
-    3114:	00002097          	auipc	ra,0x2
-    3118:	256080e7          	jalr	598(ra) # 536a <exit>
+    3632:	85ca                	mv	a1,s2
+    3634:	00004517          	auipc	a0,0x4
+    3638:	adc50513          	addi	a0,a0,-1316 # 7110 <malloc+0x148c>
+    363c:	00002097          	auipc	ra,0x2
+    3640:	590080e7          	jalr	1424(ra) # 5bcc <printf>
+    exit(1);
+    3644:	4505                	li	a0,1
+    3646:	00002097          	auipc	ra,0x2
+    364a:	1fc080e7          	jalr	508(ra) # 5842 <exit>
     printf("%s: open dd/dd/../ff failed\n", s);
-    311c:	85ca                	mv	a1,s2
-    311e:	00004517          	auipc	a0,0x4
-    3122:	a0a50513          	addi	a0,a0,-1526 # 6b28 <malloc+0x138c>
-    3126:	00002097          	auipc	ra,0x2
-    312a:	5be080e7          	jalr	1470(ra) # 56e4 <printf>
-    exit(1);
-    312e:	4505                	li	a0,1
-    3130:	00002097          	auipc	ra,0x2
-    3134:	23a080e7          	jalr	570(ra) # 536a <exit>
+    364e:	85ca                	mv	a1,s2
+    3650:	00004517          	auipc	a0,0x4
+    3654:	af850513          	addi	a0,a0,-1288 # 7148 <malloc+0x14c4>
+    3658:	00002097          	auipc	ra,0x2
+    365c:	574080e7          	jalr	1396(ra) # 5bcc <printf>
+    exit(1);
+    3660:	4505                	li	a0,1
+    3662:	00002097          	auipc	ra,0x2
+    3666:	1e0080e7          	jalr	480(ra) # 5842 <exit>
     printf("%s: dd/dd/../ff wrong content\n", s);
-    3138:	85ca                	mv	a1,s2
-    313a:	00004517          	auipc	a0,0x4
-    313e:	a0e50513          	addi	a0,a0,-1522 # 6b48 <malloc+0x13ac>
-    3142:	00002097          	auipc	ra,0x2
-    3146:	5a2080e7          	jalr	1442(ra) # 56e4 <printf>
-    exit(1);
-    314a:	4505                	li	a0,1
-    314c:	00002097          	auipc	ra,0x2
-    3150:	21e080e7          	jalr	542(ra) # 536a <exit>
+    366a:	85ca                	mv	a1,s2
+    366c:	00004517          	auipc	a0,0x4
+    3670:	afc50513          	addi	a0,a0,-1284 # 7168 <malloc+0x14e4>
+    3674:	00002097          	auipc	ra,0x2
+    3678:	558080e7          	jalr	1368(ra) # 5bcc <printf>
+    exit(1);
+    367c:	4505                	li	a0,1
+    367e:	00002097          	auipc	ra,0x2
+    3682:	1c4080e7          	jalr	452(ra) # 5842 <exit>
     printf("link dd/dd/ff dd/dd/ffff failed\n", s);
-    3154:	85ca                	mv	a1,s2
-    3156:	00004517          	auipc	a0,0x4
-    315a:	a2250513          	addi	a0,a0,-1502 # 6b78 <malloc+0x13dc>
-    315e:	00002097          	auipc	ra,0x2
-    3162:	586080e7          	jalr	1414(ra) # 56e4 <printf>
-    exit(1);
-    3166:	4505                	li	a0,1
-    3168:	00002097          	auipc	ra,0x2
-    316c:	202080e7          	jalr	514(ra) # 536a <exit>
+    3686:	85ca                	mv	a1,s2
+    3688:	00004517          	auipc	a0,0x4
+    368c:	b1050513          	addi	a0,a0,-1264 # 7198 <malloc+0x1514>
+    3690:	00002097          	auipc	ra,0x2
+    3694:	53c080e7          	jalr	1340(ra) # 5bcc <printf>
+    exit(1);
+    3698:	4505                	li	a0,1
+    369a:	00002097          	auipc	ra,0x2
+    369e:	1a8080e7          	jalr	424(ra) # 5842 <exit>
     printf("%s: unlink dd/dd/ff failed\n", s);
-    3170:	85ca                	mv	a1,s2
-    3172:	00004517          	auipc	a0,0x4
-    3176:	a2e50513          	addi	a0,a0,-1490 # 6ba0 <malloc+0x1404>
-    317a:	00002097          	auipc	ra,0x2
-    317e:	56a080e7          	jalr	1386(ra) # 56e4 <printf>
-    exit(1);
-    3182:	4505                	li	a0,1
-    3184:	00002097          	auipc	ra,0x2
-    3188:	1e6080e7          	jalr	486(ra) # 536a <exit>
+    36a2:	85ca                	mv	a1,s2
+    36a4:	00004517          	auipc	a0,0x4
+    36a8:	b1c50513          	addi	a0,a0,-1252 # 71c0 <malloc+0x153c>
+    36ac:	00002097          	auipc	ra,0x2
+    36b0:	520080e7          	jalr	1312(ra) # 5bcc <printf>
+    exit(1);
+    36b4:	4505                	li	a0,1
+    36b6:	00002097          	auipc	ra,0x2
+    36ba:	18c080e7          	jalr	396(ra) # 5842 <exit>
     printf("%s: open (unlinked) dd/dd/ff succeeded\n", s);
-    318c:	85ca                	mv	a1,s2
-    318e:	00004517          	auipc	a0,0x4
-    3192:	a3250513          	addi	a0,a0,-1486 # 6bc0 <malloc+0x1424>
-    3196:	00002097          	auipc	ra,0x2
-    319a:	54e080e7          	jalr	1358(ra) # 56e4 <printf>
-    exit(1);
-    319e:	4505                	li	a0,1
-    31a0:	00002097          	auipc	ra,0x2
-    31a4:	1ca080e7          	jalr	458(ra) # 536a <exit>
+    36be:	85ca                	mv	a1,s2
+    36c0:	00004517          	auipc	a0,0x4
+    36c4:	b2050513          	addi	a0,a0,-1248 # 71e0 <malloc+0x155c>
+    36c8:	00002097          	auipc	ra,0x2
+    36cc:	504080e7          	jalr	1284(ra) # 5bcc <printf>
+    exit(1);
+    36d0:	4505                	li	a0,1
+    36d2:	00002097          	auipc	ra,0x2
+    36d6:	170080e7          	jalr	368(ra) # 5842 <exit>
     printf("%s: chdir dd failed\n", s);
-    31a8:	85ca                	mv	a1,s2
-    31aa:	00004517          	auipc	a0,0x4
-    31ae:	a3e50513          	addi	a0,a0,-1474 # 6be8 <malloc+0x144c>
-    31b2:	00002097          	auipc	ra,0x2
-    31b6:	532080e7          	jalr	1330(ra) # 56e4 <printf>
-    exit(1);
-    31ba:	4505                	li	a0,1
-    31bc:	00002097          	auipc	ra,0x2
-    31c0:	1ae080e7          	jalr	430(ra) # 536a <exit>
+    36da:	85ca                	mv	a1,s2
+    36dc:	00004517          	auipc	a0,0x4
+    36e0:	b2c50513          	addi	a0,a0,-1236 # 7208 <malloc+0x1584>
+    36e4:	00002097          	auipc	ra,0x2
+    36e8:	4e8080e7          	jalr	1256(ra) # 5bcc <printf>
+    exit(1);
+    36ec:	4505                	li	a0,1
+    36ee:	00002097          	auipc	ra,0x2
+    36f2:	154080e7          	jalr	340(ra) # 5842 <exit>
     printf("%s: chdir dd/../../dd failed\n", s);
-    31c4:	85ca                	mv	a1,s2
-    31c6:	00004517          	auipc	a0,0x4
-    31ca:	a4a50513          	addi	a0,a0,-1462 # 6c10 <malloc+0x1474>
-    31ce:	00002097          	auipc	ra,0x2
-    31d2:	516080e7          	jalr	1302(ra) # 56e4 <printf>
-    exit(1);
-    31d6:	4505                	li	a0,1
-    31d8:	00002097          	auipc	ra,0x2
-    31dc:	192080e7          	jalr	402(ra) # 536a <exit>
+    36f6:	85ca                	mv	a1,s2
+    36f8:	00004517          	auipc	a0,0x4
+    36fc:	b3850513          	addi	a0,a0,-1224 # 7230 <malloc+0x15ac>
+    3700:	00002097          	auipc	ra,0x2
+    3704:	4cc080e7          	jalr	1228(ra) # 5bcc <printf>
+    exit(1);
+    3708:	4505                	li	a0,1
+    370a:	00002097          	auipc	ra,0x2
+    370e:	138080e7          	jalr	312(ra) # 5842 <exit>
     printf("chdir dd/../../dd failed\n", s);
-    31e0:	85ca                	mv	a1,s2
-    31e2:	00004517          	auipc	a0,0x4
-    31e6:	a5e50513          	addi	a0,a0,-1442 # 6c40 <malloc+0x14a4>
-    31ea:	00002097          	auipc	ra,0x2
-    31ee:	4fa080e7          	jalr	1274(ra) # 56e4 <printf>
-    exit(1);
-    31f2:	4505                	li	a0,1
-    31f4:	00002097          	auipc	ra,0x2
-    31f8:	176080e7          	jalr	374(ra) # 536a <exit>
+    3712:	85ca                	mv	a1,s2
+    3714:	00004517          	auipc	a0,0x4
+    3718:	b4c50513          	addi	a0,a0,-1204 # 7260 <malloc+0x15dc>
+    371c:	00002097          	auipc	ra,0x2
+    3720:	4b0080e7          	jalr	1200(ra) # 5bcc <printf>
+    exit(1);
+    3724:	4505                	li	a0,1
+    3726:	00002097          	auipc	ra,0x2
+    372a:	11c080e7          	jalr	284(ra) # 5842 <exit>
     printf("%s: chdir ./.. failed\n", s);
-    31fc:	85ca                	mv	a1,s2
-    31fe:	00004517          	auipc	a0,0x4
-    3202:	a6a50513          	addi	a0,a0,-1430 # 6c68 <malloc+0x14cc>
-    3206:	00002097          	auipc	ra,0x2
-    320a:	4de080e7          	jalr	1246(ra) # 56e4 <printf>
-    exit(1);
-    320e:	4505                	li	a0,1
-    3210:	00002097          	auipc	ra,0x2
-    3214:	15a080e7          	jalr	346(ra) # 536a <exit>
+    372e:	85ca                	mv	a1,s2
+    3730:	00004517          	auipc	a0,0x4
+    3734:	b5850513          	addi	a0,a0,-1192 # 7288 <malloc+0x1604>
+    3738:	00002097          	auipc	ra,0x2
+    373c:	494080e7          	jalr	1172(ra) # 5bcc <printf>
+    exit(1);
+    3740:	4505                	li	a0,1
+    3742:	00002097          	auipc	ra,0x2
+    3746:	100080e7          	jalr	256(ra) # 5842 <exit>
     printf("%s: open dd/dd/ffff failed\n", s);
-    3218:	85ca                	mv	a1,s2
-    321a:	00004517          	auipc	a0,0x4
-    321e:	a6650513          	addi	a0,a0,-1434 # 6c80 <malloc+0x14e4>
-    3222:	00002097          	auipc	ra,0x2
-    3226:	4c2080e7          	jalr	1218(ra) # 56e4 <printf>
-    exit(1);
-    322a:	4505                	li	a0,1
-    322c:	00002097          	auipc	ra,0x2
-    3230:	13e080e7          	jalr	318(ra) # 536a <exit>
+    374a:	85ca                	mv	a1,s2
+    374c:	00004517          	auipc	a0,0x4
+    3750:	b5450513          	addi	a0,a0,-1196 # 72a0 <malloc+0x161c>
+    3754:	00002097          	auipc	ra,0x2
+    3758:	478080e7          	jalr	1144(ra) # 5bcc <printf>
+    exit(1);
+    375c:	4505                	li	a0,1
+    375e:	00002097          	auipc	ra,0x2
+    3762:	0e4080e7          	jalr	228(ra) # 5842 <exit>
     printf("%s: read dd/dd/ffff wrong len\n", s);
-    3234:	85ca                	mv	a1,s2
-    3236:	00004517          	auipc	a0,0x4
-    323a:	a6a50513          	addi	a0,a0,-1430 # 6ca0 <malloc+0x1504>
-    323e:	00002097          	auipc	ra,0x2
-    3242:	4a6080e7          	jalr	1190(ra) # 56e4 <printf>
-    exit(1);
-    3246:	4505                	li	a0,1
-    3248:	00002097          	auipc	ra,0x2
-    324c:	122080e7          	jalr	290(ra) # 536a <exit>
+    3766:	85ca                	mv	a1,s2
+    3768:	00004517          	auipc	a0,0x4
+    376c:	b5850513          	addi	a0,a0,-1192 # 72c0 <malloc+0x163c>
+    3770:	00002097          	auipc	ra,0x2
+    3774:	45c080e7          	jalr	1116(ra) # 5bcc <printf>
+    exit(1);
+    3778:	4505                	li	a0,1
+    377a:	00002097          	auipc	ra,0x2
+    377e:	0c8080e7          	jalr	200(ra) # 5842 <exit>
     printf("%s: open (unlinked) dd/dd/ff succeeded!\n", s);
-    3250:	85ca                	mv	a1,s2
-    3252:	00004517          	auipc	a0,0x4
-    3256:	a6e50513          	addi	a0,a0,-1426 # 6cc0 <malloc+0x1524>
-    325a:	00002097          	auipc	ra,0x2
-    325e:	48a080e7          	jalr	1162(ra) # 56e4 <printf>
-    exit(1);
-    3262:	4505                	li	a0,1
-    3264:	00002097          	auipc	ra,0x2
-    3268:	106080e7          	jalr	262(ra) # 536a <exit>
+    3782:	85ca                	mv	a1,s2
+    3784:	00004517          	auipc	a0,0x4
+    3788:	b5c50513          	addi	a0,a0,-1188 # 72e0 <malloc+0x165c>
+    378c:	00002097          	auipc	ra,0x2
+    3790:	440080e7          	jalr	1088(ra) # 5bcc <printf>
+    exit(1);
+    3794:	4505                	li	a0,1
+    3796:	00002097          	auipc	ra,0x2
+    379a:	0ac080e7          	jalr	172(ra) # 5842 <exit>
     printf("%s: create dd/ff/ff succeeded!\n", s);
-    326c:	85ca                	mv	a1,s2
-    326e:	00004517          	auipc	a0,0x4
-    3272:	a9250513          	addi	a0,a0,-1390 # 6d00 <malloc+0x1564>
-    3276:	00002097          	auipc	ra,0x2
-    327a:	46e080e7          	jalr	1134(ra) # 56e4 <printf>
-    exit(1);
-    327e:	4505                	li	a0,1
-    3280:	00002097          	auipc	ra,0x2
-    3284:	0ea080e7          	jalr	234(ra) # 536a <exit>
+    379e:	85ca                	mv	a1,s2
+    37a0:	00004517          	auipc	a0,0x4
+    37a4:	b8050513          	addi	a0,a0,-1152 # 7320 <malloc+0x169c>
+    37a8:	00002097          	auipc	ra,0x2
+    37ac:	424080e7          	jalr	1060(ra) # 5bcc <printf>
+    exit(1);
+    37b0:	4505                	li	a0,1
+    37b2:	00002097          	auipc	ra,0x2
+    37b6:	090080e7          	jalr	144(ra) # 5842 <exit>
     printf("%s: create dd/xx/ff succeeded!\n", s);
-    3288:	85ca                	mv	a1,s2
-    328a:	00004517          	auipc	a0,0x4
-    328e:	aa650513          	addi	a0,a0,-1370 # 6d30 <malloc+0x1594>
-    3292:	00002097          	auipc	ra,0x2
-    3296:	452080e7          	jalr	1106(ra) # 56e4 <printf>
-    exit(1);
-    329a:	4505                	li	a0,1
-    329c:	00002097          	auipc	ra,0x2
-    32a0:	0ce080e7          	jalr	206(ra) # 536a <exit>
+    37ba:	85ca                	mv	a1,s2
+    37bc:	00004517          	auipc	a0,0x4
+    37c0:	b9450513          	addi	a0,a0,-1132 # 7350 <malloc+0x16cc>
+    37c4:	00002097          	auipc	ra,0x2
+    37c8:	408080e7          	jalr	1032(ra) # 5bcc <printf>
+    exit(1);
+    37cc:	4505                	li	a0,1
+    37ce:	00002097          	auipc	ra,0x2
+    37d2:	074080e7          	jalr	116(ra) # 5842 <exit>
     printf("%s: create dd succeeded!\n", s);
-    32a4:	85ca                	mv	a1,s2
-    32a6:	00004517          	auipc	a0,0x4
-    32aa:	aaa50513          	addi	a0,a0,-1366 # 6d50 <malloc+0x15b4>
-    32ae:	00002097          	auipc	ra,0x2
-    32b2:	436080e7          	jalr	1078(ra) # 56e4 <printf>
-    exit(1);
-    32b6:	4505                	li	a0,1
-    32b8:	00002097          	auipc	ra,0x2
-    32bc:	0b2080e7          	jalr	178(ra) # 536a <exit>
+    37d6:	85ca                	mv	a1,s2
+    37d8:	00004517          	auipc	a0,0x4
+    37dc:	b9850513          	addi	a0,a0,-1128 # 7370 <malloc+0x16ec>
+    37e0:	00002097          	auipc	ra,0x2
+    37e4:	3ec080e7          	jalr	1004(ra) # 5bcc <printf>
+    exit(1);
+    37e8:	4505                	li	a0,1
+    37ea:	00002097          	auipc	ra,0x2
+    37ee:	058080e7          	jalr	88(ra) # 5842 <exit>
     printf("%s: open dd rdwr succeeded!\n", s);
-    32c0:	85ca                	mv	a1,s2
-    32c2:	00004517          	auipc	a0,0x4
-    32c6:	aae50513          	addi	a0,a0,-1362 # 6d70 <malloc+0x15d4>
-    32ca:	00002097          	auipc	ra,0x2
-    32ce:	41a080e7          	jalr	1050(ra) # 56e4 <printf>
-    exit(1);
-    32d2:	4505                	li	a0,1
-    32d4:	00002097          	auipc	ra,0x2
-    32d8:	096080e7          	jalr	150(ra) # 536a <exit>
+    37f2:	85ca                	mv	a1,s2
+    37f4:	00004517          	auipc	a0,0x4
+    37f8:	b9c50513          	addi	a0,a0,-1124 # 7390 <malloc+0x170c>
+    37fc:	00002097          	auipc	ra,0x2
+    3800:	3d0080e7          	jalr	976(ra) # 5bcc <printf>
+    exit(1);
+    3804:	4505                	li	a0,1
+    3806:	00002097          	auipc	ra,0x2
+    380a:	03c080e7          	jalr	60(ra) # 5842 <exit>
     printf("%s: open dd wronly succeeded!\n", s);
-    32dc:	85ca                	mv	a1,s2
-    32de:	00004517          	auipc	a0,0x4
-    32e2:	ab250513          	addi	a0,a0,-1358 # 6d90 <malloc+0x15f4>
-    32e6:	00002097          	auipc	ra,0x2
-    32ea:	3fe080e7          	jalr	1022(ra) # 56e4 <printf>
-    exit(1);
-    32ee:	4505                	li	a0,1
-    32f0:	00002097          	auipc	ra,0x2
-    32f4:	07a080e7          	jalr	122(ra) # 536a <exit>
+    380e:	85ca                	mv	a1,s2
+    3810:	00004517          	auipc	a0,0x4
+    3814:	ba050513          	addi	a0,a0,-1120 # 73b0 <malloc+0x172c>
+    3818:	00002097          	auipc	ra,0x2
+    381c:	3b4080e7          	jalr	948(ra) # 5bcc <printf>
+    exit(1);
+    3820:	4505                	li	a0,1
+    3822:	00002097          	auipc	ra,0x2
+    3826:	020080e7          	jalr	32(ra) # 5842 <exit>
     printf("%s: link dd/ff/ff dd/dd/xx succeeded!\n", s);
-    32f8:	85ca                	mv	a1,s2
-    32fa:	00004517          	auipc	a0,0x4
-    32fe:	ac650513          	addi	a0,a0,-1338 # 6dc0 <malloc+0x1624>
-    3302:	00002097          	auipc	ra,0x2
-    3306:	3e2080e7          	jalr	994(ra) # 56e4 <printf>
-    exit(1);
-    330a:	4505                	li	a0,1
-    330c:	00002097          	auipc	ra,0x2
-    3310:	05e080e7          	jalr	94(ra) # 536a <exit>
+    382a:	85ca                	mv	a1,s2
+    382c:	00004517          	auipc	a0,0x4
+    3830:	bb450513          	addi	a0,a0,-1100 # 73e0 <malloc+0x175c>
+    3834:	00002097          	auipc	ra,0x2
+    3838:	398080e7          	jalr	920(ra) # 5bcc <printf>
+    exit(1);
+    383c:	4505                	li	a0,1
+    383e:	00002097          	auipc	ra,0x2
+    3842:	004080e7          	jalr	4(ra) # 5842 <exit>
     printf("%s: link dd/xx/ff dd/dd/xx succeeded!\n", s);
-    3314:	85ca                	mv	a1,s2
-    3316:	00004517          	auipc	a0,0x4
-    331a:	ad250513          	addi	a0,a0,-1326 # 6de8 <malloc+0x164c>
-    331e:	00002097          	auipc	ra,0x2
-    3322:	3c6080e7          	jalr	966(ra) # 56e4 <printf>
-    exit(1);
-    3326:	4505                	li	a0,1
-    3328:	00002097          	auipc	ra,0x2
-    332c:	042080e7          	jalr	66(ra) # 536a <exit>
+    3846:	85ca                	mv	a1,s2
+    3848:	00004517          	auipc	a0,0x4
+    384c:	bc050513          	addi	a0,a0,-1088 # 7408 <malloc+0x1784>
+    3850:	00002097          	auipc	ra,0x2
+    3854:	37c080e7          	jalr	892(ra) # 5bcc <printf>
+    exit(1);
+    3858:	4505                	li	a0,1
+    385a:	00002097          	auipc	ra,0x2
+    385e:	fe8080e7          	jalr	-24(ra) # 5842 <exit>
     printf("%s: link dd/ff dd/dd/ffff succeeded!\n", s);
-    3330:	85ca                	mv	a1,s2
-    3332:	00004517          	auipc	a0,0x4
-    3336:	ade50513          	addi	a0,a0,-1314 # 6e10 <malloc+0x1674>
-    333a:	00002097          	auipc	ra,0x2
-    333e:	3aa080e7          	jalr	938(ra) # 56e4 <printf>
-    exit(1);
-    3342:	4505                	li	a0,1
-    3344:	00002097          	auipc	ra,0x2
-    3348:	026080e7          	jalr	38(ra) # 536a <exit>
+    3862:	85ca                	mv	a1,s2
+    3864:	00004517          	auipc	a0,0x4
+    3868:	bcc50513          	addi	a0,a0,-1076 # 7430 <malloc+0x17ac>
+    386c:	00002097          	auipc	ra,0x2
+    3870:	360080e7          	jalr	864(ra) # 5bcc <printf>
+    exit(1);
+    3874:	4505                	li	a0,1
+    3876:	00002097          	auipc	ra,0x2
+    387a:	fcc080e7          	jalr	-52(ra) # 5842 <exit>
     printf("%s: mkdir dd/ff/ff succeeded!\n", s);
-    334c:	85ca                	mv	a1,s2
-    334e:	00004517          	auipc	a0,0x4
-    3352:	aea50513          	addi	a0,a0,-1302 # 6e38 <malloc+0x169c>
-    3356:	00002097          	auipc	ra,0x2
-    335a:	38e080e7          	jalr	910(ra) # 56e4 <printf>
-    exit(1);
-    335e:	4505                	li	a0,1
-    3360:	00002097          	auipc	ra,0x2
-    3364:	00a080e7          	jalr	10(ra) # 536a <exit>
+    387e:	85ca                	mv	a1,s2
+    3880:	00004517          	auipc	a0,0x4
+    3884:	bd850513          	addi	a0,a0,-1064 # 7458 <malloc+0x17d4>
+    3888:	00002097          	auipc	ra,0x2
+    388c:	344080e7          	jalr	836(ra) # 5bcc <printf>
+    exit(1);
+    3890:	4505                	li	a0,1
+    3892:	00002097          	auipc	ra,0x2
+    3896:	fb0080e7          	jalr	-80(ra) # 5842 <exit>
     printf("%s: mkdir dd/xx/ff succeeded!\n", s);
-    3368:	85ca                	mv	a1,s2
-    336a:	00004517          	auipc	a0,0x4
-    336e:	aee50513          	addi	a0,a0,-1298 # 6e58 <malloc+0x16bc>
-    3372:	00002097          	auipc	ra,0x2
-    3376:	372080e7          	jalr	882(ra) # 56e4 <printf>
-    exit(1);
-    337a:	4505                	li	a0,1
-    337c:	00002097          	auipc	ra,0x2
-    3380:	fee080e7          	jalr	-18(ra) # 536a <exit>
+    389a:	85ca                	mv	a1,s2
+    389c:	00004517          	auipc	a0,0x4
+    38a0:	bdc50513          	addi	a0,a0,-1060 # 7478 <malloc+0x17f4>
+    38a4:	00002097          	auipc	ra,0x2
+    38a8:	328080e7          	jalr	808(ra) # 5bcc <printf>
+    exit(1);
+    38ac:	4505                	li	a0,1
+    38ae:	00002097          	auipc	ra,0x2
+    38b2:	f94080e7          	jalr	-108(ra) # 5842 <exit>
     printf("%s: mkdir dd/dd/ffff succeeded!\n", s);
-    3384:	85ca                	mv	a1,s2
-    3386:	00004517          	auipc	a0,0x4
-    338a:	af250513          	addi	a0,a0,-1294 # 6e78 <malloc+0x16dc>
-    338e:	00002097          	auipc	ra,0x2
-    3392:	356080e7          	jalr	854(ra) # 56e4 <printf>
+    38b6:	85ca                	mv	a1,s2
+    38b8:	00004517          	auipc	a0,0x4
+    38bc:	be050513          	addi	a0,a0,-1056 # 7498 <malloc+0x1814>
+    38c0:	00002097          	auipc	ra,0x2
+    38c4:	30c080e7          	jalr	780(ra) # 5bcc <printf>
     exit(1);
-    3396:	4505                	li	a0,1
-    3398:	00002097          	auipc	ra,0x2
-    339c:	fd2080e7          	jalr	-46(ra) # 536a <exit>
+    38c8:	4505                	li	a0,1
+    38ca:	00002097          	auipc	ra,0x2
+    38ce:	f78080e7          	jalr	-136(ra) # 5842 <exit>
     printf("%s: unlink dd/xx/ff succeeded!\n", s);
-    33a0:	85ca                	mv	a1,s2
-    33a2:	00004517          	auipc	a0,0x4
-    33a6:	afe50513          	addi	a0,a0,-1282 # 6ea0 <malloc+0x1704>
-    33aa:	00002097          	auipc	ra,0x2
-    33ae:	33a080e7          	jalr	826(ra) # 56e4 <printf>
-    exit(1);
-    33b2:	4505                	li	a0,1
-    33b4:	00002097          	auipc	ra,0x2
-    33b8:	fb6080e7          	jalr	-74(ra) # 536a <exit>
-    printf("%s: unlink dd/ff/ff succeeded!\n", s);
-    33bc:	85ca                	mv	a1,s2
-    33be:	00004517          	auipc	a0,0x4
-    33c2:	b0250513          	addi	a0,a0,-1278 # 6ec0 <malloc+0x1724>
-    33c6:	00002097          	auipc	ra,0x2
-    33ca:	31e080e7          	jalr	798(ra) # 56e4 <printf>
+    38d2:	85ca                	mv	a1,s2
+    38d4:	00004517          	auipc	a0,0x4
+    38d8:	bec50513          	addi	a0,a0,-1044 # 74c0 <malloc+0x183c>
+    38dc:	00002097          	auipc	ra,0x2
+    38e0:	2f0080e7          	jalr	752(ra) # 5bcc <printf>
     exit(1);
-    33ce:	4505                	li	a0,1
-    33d0:	00002097          	auipc	ra,0x2
-    33d4:	f9a080e7          	jalr	-102(ra) # 536a <exit>
+    38e4:	4505                	li	a0,1
+    38e6:	00002097          	auipc	ra,0x2
+    38ea:	f5c080e7          	jalr	-164(ra) # 5842 <exit>
+    printf("%s: unlink dd/ff/ff succeeded!\n", s);
+    38ee:	85ca                	mv	a1,s2
+    38f0:	00004517          	auipc	a0,0x4
+    38f4:	bf050513          	addi	a0,a0,-1040 # 74e0 <malloc+0x185c>
+    38f8:	00002097          	auipc	ra,0x2
+    38fc:	2d4080e7          	jalr	724(ra) # 5bcc <printf>
+    exit(1);
+    3900:	4505                	li	a0,1
+    3902:	00002097          	auipc	ra,0x2
+    3906:	f40080e7          	jalr	-192(ra) # 5842 <exit>
     printf("%s: chdir dd/ff succeeded!\n", s);
-    33d8:	85ca                	mv	a1,s2
-    33da:	00004517          	auipc	a0,0x4
-    33de:	b0650513          	addi	a0,a0,-1274 # 6ee0 <malloc+0x1744>
-    33e2:	00002097          	auipc	ra,0x2
-    33e6:	302080e7          	jalr	770(ra) # 56e4 <printf>
-    exit(1);
-    33ea:	4505                	li	a0,1
-    33ec:	00002097          	auipc	ra,0x2
-    33f0:	f7e080e7          	jalr	-130(ra) # 536a <exit>
+    390a:	85ca                	mv	a1,s2
+    390c:	00004517          	auipc	a0,0x4
+    3910:	bf450513          	addi	a0,a0,-1036 # 7500 <malloc+0x187c>
+    3914:	00002097          	auipc	ra,0x2
+    3918:	2b8080e7          	jalr	696(ra) # 5bcc <printf>
+    exit(1);
+    391c:	4505                	li	a0,1
+    391e:	00002097          	auipc	ra,0x2
+    3922:	f24080e7          	jalr	-220(ra) # 5842 <exit>
     printf("%s: chdir dd/xx succeeded!\n", s);
-    33f4:	85ca                	mv	a1,s2
-    33f6:	00004517          	auipc	a0,0x4
-    33fa:	b1250513          	addi	a0,a0,-1262 # 6f08 <malloc+0x176c>
-    33fe:	00002097          	auipc	ra,0x2
-    3402:	2e6080e7          	jalr	742(ra) # 56e4 <printf>
-    exit(1);
-    3406:	4505                	li	a0,1
-    3408:	00002097          	auipc	ra,0x2
-    340c:	f62080e7          	jalr	-158(ra) # 536a <exit>
+    3926:	85ca                	mv	a1,s2
+    3928:	00004517          	auipc	a0,0x4
+    392c:	c0050513          	addi	a0,a0,-1024 # 7528 <malloc+0x18a4>
+    3930:	00002097          	auipc	ra,0x2
+    3934:	29c080e7          	jalr	668(ra) # 5bcc <printf>
+    exit(1);
+    3938:	4505                	li	a0,1
+    393a:	00002097          	auipc	ra,0x2
+    393e:	f08080e7          	jalr	-248(ra) # 5842 <exit>
     printf("%s: unlink dd/dd/ff failed\n", s);
-    3410:	85ca                	mv	a1,s2
-    3412:	00003517          	auipc	a0,0x3
-    3416:	78e50513          	addi	a0,a0,1934 # 6ba0 <malloc+0x1404>
-    341a:	00002097          	auipc	ra,0x2
-    341e:	2ca080e7          	jalr	714(ra) # 56e4 <printf>
-    exit(1);
-    3422:	4505                	li	a0,1
-    3424:	00002097          	auipc	ra,0x2
-    3428:	f46080e7          	jalr	-186(ra) # 536a <exit>
+    3942:	85ca                	mv	a1,s2
+    3944:	00004517          	auipc	a0,0x4
+    3948:	87c50513          	addi	a0,a0,-1924 # 71c0 <malloc+0x153c>
+    394c:	00002097          	auipc	ra,0x2
+    3950:	280080e7          	jalr	640(ra) # 5bcc <printf>
+    exit(1);
+    3954:	4505                	li	a0,1
+    3956:	00002097          	auipc	ra,0x2
+    395a:	eec080e7          	jalr	-276(ra) # 5842 <exit>
     printf("%s: unlink dd/ff failed\n", s);
-    342c:	85ca                	mv	a1,s2
-    342e:	00004517          	auipc	a0,0x4
-    3432:	afa50513          	addi	a0,a0,-1286 # 6f28 <malloc+0x178c>
-    3436:	00002097          	auipc	ra,0x2
-    343a:	2ae080e7          	jalr	686(ra) # 56e4 <printf>
-    exit(1);
-    343e:	4505                	li	a0,1
-    3440:	00002097          	auipc	ra,0x2
-    3444:	f2a080e7          	jalr	-214(ra) # 536a <exit>
+    395e:	85ca                	mv	a1,s2
+    3960:	00004517          	auipc	a0,0x4
+    3964:	be850513          	addi	a0,a0,-1048 # 7548 <malloc+0x18c4>
+    3968:	00002097          	auipc	ra,0x2
+    396c:	264080e7          	jalr	612(ra) # 5bcc <printf>
+    exit(1);
+    3970:	4505                	li	a0,1
+    3972:	00002097          	auipc	ra,0x2
+    3976:	ed0080e7          	jalr	-304(ra) # 5842 <exit>
     printf("%s: unlink non-empty dd succeeded!\n", s);
-    3448:	85ca                	mv	a1,s2
-    344a:	00004517          	auipc	a0,0x4
-    344e:	afe50513          	addi	a0,a0,-1282 # 6f48 <malloc+0x17ac>
-    3452:	00002097          	auipc	ra,0x2
-    3456:	292080e7          	jalr	658(ra) # 56e4 <printf>
-    exit(1);
-    345a:	4505                	li	a0,1
-    345c:	00002097          	auipc	ra,0x2
-    3460:	f0e080e7          	jalr	-242(ra) # 536a <exit>
+    397a:	85ca                	mv	a1,s2
+    397c:	00004517          	auipc	a0,0x4
+    3980:	bec50513          	addi	a0,a0,-1044 # 7568 <malloc+0x18e4>
+    3984:	00002097          	auipc	ra,0x2
+    3988:	248080e7          	jalr	584(ra) # 5bcc <printf>
+    exit(1);
+    398c:	4505                	li	a0,1
+    398e:	00002097          	auipc	ra,0x2
+    3992:	eb4080e7          	jalr	-332(ra) # 5842 <exit>
     printf("%s: unlink dd/dd failed\n", s);
-    3464:	85ca                	mv	a1,s2
-    3466:	00004517          	auipc	a0,0x4
-    346a:	b1250513          	addi	a0,a0,-1262 # 6f78 <malloc+0x17dc>
-    346e:	00002097          	auipc	ra,0x2
-    3472:	276080e7          	jalr	630(ra) # 56e4 <printf>
-    exit(1);
-    3476:	4505                	li	a0,1
-    3478:	00002097          	auipc	ra,0x2
-    347c:	ef2080e7          	jalr	-270(ra) # 536a <exit>
+    3996:	85ca                	mv	a1,s2
+    3998:	00004517          	auipc	a0,0x4
+    399c:	c0050513          	addi	a0,a0,-1024 # 7598 <malloc+0x1914>
+    39a0:	00002097          	auipc	ra,0x2
+    39a4:	22c080e7          	jalr	556(ra) # 5bcc <printf>
+    exit(1);
+    39a8:	4505                	li	a0,1
+    39aa:	00002097          	auipc	ra,0x2
+    39ae:	e98080e7          	jalr	-360(ra) # 5842 <exit>
     printf("%s: unlink dd failed\n", s);
-    3480:	85ca                	mv	a1,s2
-    3482:	00004517          	auipc	a0,0x4
-    3486:	b1650513          	addi	a0,a0,-1258 # 6f98 <malloc+0x17fc>
-    348a:	00002097          	auipc	ra,0x2
-    348e:	25a080e7          	jalr	602(ra) # 56e4 <printf>
-    exit(1);
-    3492:	4505                	li	a0,1
-    3494:	00002097          	auipc	ra,0x2
-    3498:	ed6080e7          	jalr	-298(ra) # 536a <exit>
-
-000000000000349c <rmdot>:
-{
-    349c:	1101                	addi	sp,sp,-32
-    349e:	ec06                	sd	ra,24(sp)
-    34a0:	e822                	sd	s0,16(sp)
-    34a2:	e426                	sd	s1,8(sp)
-    34a4:	1000                	addi	s0,sp,32
-    34a6:	84aa                	mv	s1,a0
+    39b2:	85ca                	mv	a1,s2
+    39b4:	00004517          	auipc	a0,0x4
+    39b8:	c0450513          	addi	a0,a0,-1020 # 75b8 <malloc+0x1934>
+    39bc:	00002097          	auipc	ra,0x2
+    39c0:	210080e7          	jalr	528(ra) # 5bcc <printf>
+    exit(1);
+    39c4:	4505                	li	a0,1
+    39c6:	00002097          	auipc	ra,0x2
+    39ca:	e7c080e7          	jalr	-388(ra) # 5842 <exit>
+
+00000000000039ce <rmdot>:
+{
+    39ce:	1101                	addi	sp,sp,-32
+    39d0:	ec06                	sd	ra,24(sp)
+    39d2:	e822                	sd	s0,16(sp)
+    39d4:	e426                	sd	s1,8(sp)
+    39d6:	1000                	addi	s0,sp,32
+    39d8:	84aa                	mv	s1,a0
   if(mkdir("dots") != 0){
-    34a8:	00004517          	auipc	a0,0x4
-    34ac:	b0850513          	addi	a0,a0,-1272 # 6fb0 <malloc+0x1814>
-    34b0:	00002097          	auipc	ra,0x2
-    34b4:	f22080e7          	jalr	-222(ra) # 53d2 <mkdir>
-    34b8:	e549                	bnez	a0,3542 <rmdot+0xa6>
+    39da:	00004517          	auipc	a0,0x4
+    39de:	bf650513          	addi	a0,a0,-1034 # 75d0 <malloc+0x194c>
+    39e2:	00002097          	auipc	ra,0x2
+    39e6:	ec8080e7          	jalr	-312(ra) # 58aa <mkdir>
+    39ea:	e549                	bnez	a0,3a74 <rmdot+0xa6>
   if(chdir("dots") != 0){
-    34ba:	00004517          	auipc	a0,0x4
-    34be:	af650513          	addi	a0,a0,-1290 # 6fb0 <malloc+0x1814>
-    34c2:	00002097          	auipc	ra,0x2
-    34c6:	f18080e7          	jalr	-232(ra) # 53da <chdir>
-    34ca:	e951                	bnez	a0,355e <rmdot+0xc2>
+    39ec:	00004517          	auipc	a0,0x4
+    39f0:	be450513          	addi	a0,a0,-1052 # 75d0 <malloc+0x194c>
+    39f4:	00002097          	auipc	ra,0x2
+    39f8:	ebe080e7          	jalr	-322(ra) # 58b2 <chdir>
+    39fc:	e951                	bnez	a0,3a90 <rmdot+0xc2>
   if(unlink(".") == 0){
-    34cc:	00003517          	auipc	a0,0x3
-    34d0:	aac50513          	addi	a0,a0,-1364 # 5f78 <malloc+0x7dc>
-    34d4:	00002097          	auipc	ra,0x2
-    34d8:	ee6080e7          	jalr	-282(ra) # 53ba <unlink>
-    34dc:	cd59                	beqz	a0,357a <rmdot+0xde>
+    39fe:	00003517          	auipc	a0,0x3
+    3a02:	a6250513          	addi	a0,a0,-1438 # 6460 <malloc+0x7dc>
+    3a06:	00002097          	auipc	ra,0x2
+    3a0a:	e8c080e7          	jalr	-372(ra) # 5892 <unlink>
+    3a0e:	cd59                	beqz	a0,3aac <rmdot+0xde>
   if(unlink("..") == 0){
-    34de:	00004517          	auipc	a0,0x4
-    34e2:	b2250513          	addi	a0,a0,-1246 # 7000 <malloc+0x1864>
-    34e6:	00002097          	auipc	ra,0x2
-    34ea:	ed4080e7          	jalr	-300(ra) # 53ba <unlink>
-    34ee:	c545                	beqz	a0,3596 <rmdot+0xfa>
+    3a10:	00003517          	auipc	a0,0x3
+    3a14:	61850513          	addi	a0,a0,1560 # 7028 <malloc+0x13a4>
+    3a18:	00002097          	auipc	ra,0x2
+    3a1c:	e7a080e7          	jalr	-390(ra) # 5892 <unlink>
+    3a20:	c545                	beqz	a0,3ac8 <rmdot+0xfa>
   if(chdir("/") != 0){
-    34f0:	00003517          	auipc	a0,0x3
-    34f4:	51850513          	addi	a0,a0,1304 # 6a08 <malloc+0x126c>
-    34f8:	00002097          	auipc	ra,0x2
-    34fc:	ee2080e7          	jalr	-286(ra) # 53da <chdir>
-    3500:	e94d                	bnez	a0,35b2 <rmdot+0x116>
+    3a22:	00003517          	auipc	a0,0x3
+    3a26:	5ae50513          	addi	a0,a0,1454 # 6fd0 <malloc+0x134c>
+    3a2a:	00002097          	auipc	ra,0x2
+    3a2e:	e88080e7          	jalr	-376(ra) # 58b2 <chdir>
+    3a32:	e94d                	bnez	a0,3ae4 <rmdot+0x116>
   if(unlink("dots/.") == 0){
-    3502:	00004517          	auipc	a0,0x4
-    3506:	b1e50513          	addi	a0,a0,-1250 # 7020 <malloc+0x1884>
-    350a:	00002097          	auipc	ra,0x2
-    350e:	eb0080e7          	jalr	-336(ra) # 53ba <unlink>
-    3512:	cd55                	beqz	a0,35ce <rmdot+0x132>
+    3a34:	00004517          	auipc	a0,0x4
+    3a38:	c0450513          	addi	a0,a0,-1020 # 7638 <malloc+0x19b4>
+    3a3c:	00002097          	auipc	ra,0x2
+    3a40:	e56080e7          	jalr	-426(ra) # 5892 <unlink>
+    3a44:	cd55                	beqz	a0,3b00 <rmdot+0x132>
   if(unlink("dots/..") == 0){
-    3514:	00004517          	auipc	a0,0x4
-    3518:	b3450513          	addi	a0,a0,-1228 # 7048 <malloc+0x18ac>
-    351c:	00002097          	auipc	ra,0x2
-    3520:	e9e080e7          	jalr	-354(ra) # 53ba <unlink>
-    3524:	c179                	beqz	a0,35ea <rmdot+0x14e>
+    3a46:	00004517          	auipc	a0,0x4
+    3a4a:	c1a50513          	addi	a0,a0,-998 # 7660 <malloc+0x19dc>
+    3a4e:	00002097          	auipc	ra,0x2
+    3a52:	e44080e7          	jalr	-444(ra) # 5892 <unlink>
+    3a56:	c179                	beqz	a0,3b1c <rmdot+0x14e>
   if(unlink("dots") != 0){
-    3526:	00004517          	auipc	a0,0x4
-    352a:	a8a50513          	addi	a0,a0,-1398 # 6fb0 <malloc+0x1814>
-    352e:	00002097          	auipc	ra,0x2
-    3532:	e8c080e7          	jalr	-372(ra) # 53ba <unlink>
-    3536:	e961                	bnez	a0,3606 <rmdot+0x16a>
-}
-    3538:	60e2                	ld	ra,24(sp)
-    353a:	6442                	ld	s0,16(sp)
-    353c:	64a2                	ld	s1,8(sp)
-    353e:	6105                	addi	sp,sp,32
-    3540:	8082                	ret
+    3a58:	00004517          	auipc	a0,0x4
+    3a5c:	b7850513          	addi	a0,a0,-1160 # 75d0 <malloc+0x194c>
+    3a60:	00002097          	auipc	ra,0x2
+    3a64:	e32080e7          	jalr	-462(ra) # 5892 <unlink>
+    3a68:	e961                	bnez	a0,3b38 <rmdot+0x16a>
+}
+    3a6a:	60e2                	ld	ra,24(sp)
+    3a6c:	6442                	ld	s0,16(sp)
+    3a6e:	64a2                	ld	s1,8(sp)
+    3a70:	6105                	addi	sp,sp,32
+    3a72:	8082                	ret
     printf("%s: mkdir dots failed\n", s);
-    3542:	85a6                	mv	a1,s1
-    3544:	00004517          	auipc	a0,0x4
-    3548:	a7450513          	addi	a0,a0,-1420 # 6fb8 <malloc+0x181c>
-    354c:	00002097          	auipc	ra,0x2
-    3550:	198080e7          	jalr	408(ra) # 56e4 <printf>
-    exit(1);
-    3554:	4505                	li	a0,1
-    3556:	00002097          	auipc	ra,0x2
-    355a:	e14080e7          	jalr	-492(ra) # 536a <exit>
+    3a74:	85a6                	mv	a1,s1
+    3a76:	00004517          	auipc	a0,0x4
+    3a7a:	b6250513          	addi	a0,a0,-1182 # 75d8 <malloc+0x1954>
+    3a7e:	00002097          	auipc	ra,0x2
+    3a82:	14e080e7          	jalr	334(ra) # 5bcc <printf>
+    exit(1);
+    3a86:	4505                	li	a0,1
+    3a88:	00002097          	auipc	ra,0x2
+    3a8c:	dba080e7          	jalr	-582(ra) # 5842 <exit>
     printf("%s: chdir dots failed\n", s);
-    355e:	85a6                	mv	a1,s1
-    3560:	00004517          	auipc	a0,0x4
-    3564:	a7050513          	addi	a0,a0,-1424 # 6fd0 <malloc+0x1834>
-    3568:	00002097          	auipc	ra,0x2
-    356c:	17c080e7          	jalr	380(ra) # 56e4 <printf>
-    exit(1);
-    3570:	4505                	li	a0,1
-    3572:	00002097          	auipc	ra,0x2
-    3576:	df8080e7          	jalr	-520(ra) # 536a <exit>
+    3a90:	85a6                	mv	a1,s1
+    3a92:	00004517          	auipc	a0,0x4
+    3a96:	b5e50513          	addi	a0,a0,-1186 # 75f0 <malloc+0x196c>
+    3a9a:	00002097          	auipc	ra,0x2
+    3a9e:	132080e7          	jalr	306(ra) # 5bcc <printf>
+    exit(1);
+    3aa2:	4505                	li	a0,1
+    3aa4:	00002097          	auipc	ra,0x2
+    3aa8:	d9e080e7          	jalr	-610(ra) # 5842 <exit>
     printf("%s: rm . worked!\n", s);
-    357a:	85a6                	mv	a1,s1
-    357c:	00004517          	auipc	a0,0x4
-    3580:	a6c50513          	addi	a0,a0,-1428 # 6fe8 <malloc+0x184c>
-    3584:	00002097          	auipc	ra,0x2
-    3588:	160080e7          	jalr	352(ra) # 56e4 <printf>
-    exit(1);
-    358c:	4505                	li	a0,1
-    358e:	00002097          	auipc	ra,0x2
-    3592:	ddc080e7          	jalr	-548(ra) # 536a <exit>
+    3aac:	85a6                	mv	a1,s1
+    3aae:	00004517          	auipc	a0,0x4
+    3ab2:	b5a50513          	addi	a0,a0,-1190 # 7608 <malloc+0x1984>
+    3ab6:	00002097          	auipc	ra,0x2
+    3aba:	116080e7          	jalr	278(ra) # 5bcc <printf>
+    exit(1);
+    3abe:	4505                	li	a0,1
+    3ac0:	00002097          	auipc	ra,0x2
+    3ac4:	d82080e7          	jalr	-638(ra) # 5842 <exit>
     printf("%s: rm .. worked!\n", s);
-    3596:	85a6                	mv	a1,s1
-    3598:	00004517          	auipc	a0,0x4
-    359c:	a7050513          	addi	a0,a0,-1424 # 7008 <malloc+0x186c>
-    35a0:	00002097          	auipc	ra,0x2
-    35a4:	144080e7          	jalr	324(ra) # 56e4 <printf>
-    exit(1);
-    35a8:	4505                	li	a0,1
-    35aa:	00002097          	auipc	ra,0x2
-    35ae:	dc0080e7          	jalr	-576(ra) # 536a <exit>
+    3ac8:	85a6                	mv	a1,s1
+    3aca:	00004517          	auipc	a0,0x4
+    3ace:	b5650513          	addi	a0,a0,-1194 # 7620 <malloc+0x199c>
+    3ad2:	00002097          	auipc	ra,0x2
+    3ad6:	0fa080e7          	jalr	250(ra) # 5bcc <printf>
+    exit(1);
+    3ada:	4505                	li	a0,1
+    3adc:	00002097          	auipc	ra,0x2
+    3ae0:	d66080e7          	jalr	-666(ra) # 5842 <exit>
     printf("%s: chdir / failed\n", s);
-    35b2:	85a6                	mv	a1,s1
-    35b4:	00003517          	auipc	a0,0x3
-    35b8:	45c50513          	addi	a0,a0,1116 # 6a10 <malloc+0x1274>
-    35bc:	00002097          	auipc	ra,0x2
-    35c0:	128080e7          	jalr	296(ra) # 56e4 <printf>
-    exit(1);
-    35c4:	4505                	li	a0,1
-    35c6:	00002097          	auipc	ra,0x2
-    35ca:	da4080e7          	jalr	-604(ra) # 536a <exit>
+    3ae4:	85a6                	mv	a1,s1
+    3ae6:	00003517          	auipc	a0,0x3
+    3aea:	4f250513          	addi	a0,a0,1266 # 6fd8 <malloc+0x1354>
+    3aee:	00002097          	auipc	ra,0x2
+    3af2:	0de080e7          	jalr	222(ra) # 5bcc <printf>
+    exit(1);
+    3af6:	4505                	li	a0,1
+    3af8:	00002097          	auipc	ra,0x2
+    3afc:	d4a080e7          	jalr	-694(ra) # 5842 <exit>
     printf("%s: unlink dots/. worked!\n", s);
-    35ce:	85a6                	mv	a1,s1
-    35d0:	00004517          	auipc	a0,0x4
-    35d4:	a5850513          	addi	a0,a0,-1448 # 7028 <malloc+0x188c>
-    35d8:	00002097          	auipc	ra,0x2
-    35dc:	10c080e7          	jalr	268(ra) # 56e4 <printf>
-    exit(1);
-    35e0:	4505                	li	a0,1
-    35e2:	00002097          	auipc	ra,0x2
-    35e6:	d88080e7          	jalr	-632(ra) # 536a <exit>
+    3b00:	85a6                	mv	a1,s1
+    3b02:	00004517          	auipc	a0,0x4
+    3b06:	b3e50513          	addi	a0,a0,-1218 # 7640 <malloc+0x19bc>
+    3b0a:	00002097          	auipc	ra,0x2
+    3b0e:	0c2080e7          	jalr	194(ra) # 5bcc <printf>
+    exit(1);
+    3b12:	4505                	li	a0,1
+    3b14:	00002097          	auipc	ra,0x2
+    3b18:	d2e080e7          	jalr	-722(ra) # 5842 <exit>
     printf("%s: unlink dots/.. worked!\n", s);
-    35ea:	85a6                	mv	a1,s1
-    35ec:	00004517          	auipc	a0,0x4
-    35f0:	a6450513          	addi	a0,a0,-1436 # 7050 <malloc+0x18b4>
-    35f4:	00002097          	auipc	ra,0x2
-    35f8:	0f0080e7          	jalr	240(ra) # 56e4 <printf>
-    exit(1);
-    35fc:	4505                	li	a0,1
-    35fe:	00002097          	auipc	ra,0x2
-    3602:	d6c080e7          	jalr	-660(ra) # 536a <exit>
+    3b1c:	85a6                	mv	a1,s1
+    3b1e:	00004517          	auipc	a0,0x4
+    3b22:	b4a50513          	addi	a0,a0,-1206 # 7668 <malloc+0x19e4>
+    3b26:	00002097          	auipc	ra,0x2
+    3b2a:	0a6080e7          	jalr	166(ra) # 5bcc <printf>
+    exit(1);
+    3b2e:	4505                	li	a0,1
+    3b30:	00002097          	auipc	ra,0x2
+    3b34:	d12080e7          	jalr	-750(ra) # 5842 <exit>
     printf("%s: unlink dots failed!\n", s);
-    3606:	85a6                	mv	a1,s1
-    3608:	00004517          	auipc	a0,0x4
-    360c:	a6850513          	addi	a0,a0,-1432 # 7070 <malloc+0x18d4>
-    3610:	00002097          	auipc	ra,0x2
-    3614:	0d4080e7          	jalr	212(ra) # 56e4 <printf>
-    exit(1);
-    3618:	4505                	li	a0,1
-    361a:	00002097          	auipc	ra,0x2
-    361e:	d50080e7          	jalr	-688(ra) # 536a <exit>
-
-0000000000003622 <dirfile>:
-{
-    3622:	1101                	addi	sp,sp,-32
-    3624:	ec06                	sd	ra,24(sp)
-    3626:	e822                	sd	s0,16(sp)
-    3628:	e426                	sd	s1,8(sp)
-    362a:	e04a                	sd	s2,0(sp)
-    362c:	1000                	addi	s0,sp,32
-    362e:	892a                	mv	s2,a0
+    3b38:	85a6                	mv	a1,s1
+    3b3a:	00004517          	auipc	a0,0x4
+    3b3e:	b4e50513          	addi	a0,a0,-1202 # 7688 <malloc+0x1a04>
+    3b42:	00002097          	auipc	ra,0x2
+    3b46:	08a080e7          	jalr	138(ra) # 5bcc <printf>
+    exit(1);
+    3b4a:	4505                	li	a0,1
+    3b4c:	00002097          	auipc	ra,0x2
+    3b50:	cf6080e7          	jalr	-778(ra) # 5842 <exit>
+
+0000000000003b54 <dirfile>:
+{
+    3b54:	1101                	addi	sp,sp,-32
+    3b56:	ec06                	sd	ra,24(sp)
+    3b58:	e822                	sd	s0,16(sp)
+    3b5a:	e426                	sd	s1,8(sp)
+    3b5c:	e04a                	sd	s2,0(sp)
+    3b5e:	1000                	addi	s0,sp,32
+    3b60:	892a                	mv	s2,a0
   fd = open("dirfile", O_CREATE);
-    3630:	20000593          	li	a1,512
-    3634:	00004517          	auipc	a0,0x4
-    3638:	a5c50513          	addi	a0,a0,-1444 # 7090 <malloc+0x18f4>
-    363c:	00002097          	auipc	ra,0x2
-    3640:	d6e080e7          	jalr	-658(ra) # 53aa <open>
+    3b62:	20000593          	li	a1,512
+    3b66:	00004517          	auipc	a0,0x4
+    3b6a:	b4250513          	addi	a0,a0,-1214 # 76a8 <malloc+0x1a24>
+    3b6e:	00002097          	auipc	ra,0x2
+    3b72:	d14080e7          	jalr	-748(ra) # 5882 <open>
   if(fd < 0){
-    3644:	0e054d63          	bltz	a0,373e <dirfile+0x11c>
+    3b76:	0e054d63          	bltz	a0,3c70 <dirfile+0x11c>
   close(fd);
-    3648:	00002097          	auipc	ra,0x2
-    364c:	d4a080e7          	jalr	-694(ra) # 5392 <close>
+    3b7a:	00002097          	auipc	ra,0x2
+    3b7e:	cf0080e7          	jalr	-784(ra) # 586a <close>
   if(chdir("dirfile") == 0){
-    3650:	00004517          	auipc	a0,0x4
-    3654:	a4050513          	addi	a0,a0,-1472 # 7090 <malloc+0x18f4>
-    3658:	00002097          	auipc	ra,0x2
-    365c:	d82080e7          	jalr	-638(ra) # 53da <chdir>
-    3660:	cd6d                	beqz	a0,375a <dirfile+0x138>
+    3b82:	00004517          	auipc	a0,0x4
+    3b86:	b2650513          	addi	a0,a0,-1242 # 76a8 <malloc+0x1a24>
+    3b8a:	00002097          	auipc	ra,0x2
+    3b8e:	d28080e7          	jalr	-728(ra) # 58b2 <chdir>
+    3b92:	cd6d                	beqz	a0,3c8c <dirfile+0x138>
   fd = open("dirfile/xx", 0);
-    3662:	4581                	li	a1,0
-    3664:	00004517          	auipc	a0,0x4
-    3668:	a7450513          	addi	a0,a0,-1420 # 70d8 <malloc+0x193c>
-    366c:	00002097          	auipc	ra,0x2
-    3670:	d3e080e7          	jalr	-706(ra) # 53aa <open>
+    3b94:	4581                	li	a1,0
+    3b96:	00004517          	auipc	a0,0x4
+    3b9a:	b5a50513          	addi	a0,a0,-1190 # 76f0 <malloc+0x1a6c>
+    3b9e:	00002097          	auipc	ra,0x2
+    3ba2:	ce4080e7          	jalr	-796(ra) # 5882 <open>
   if(fd >= 0){
-    3674:	10055163          	bgez	a0,3776 <dirfile+0x154>
+    3ba6:	10055163          	bgez	a0,3ca8 <dirfile+0x154>
   fd = open("dirfile/xx", O_CREATE);
-    3678:	20000593          	li	a1,512
-    367c:	00004517          	auipc	a0,0x4
-    3680:	a5c50513          	addi	a0,a0,-1444 # 70d8 <malloc+0x193c>
-    3684:	00002097          	auipc	ra,0x2
-    3688:	d26080e7          	jalr	-730(ra) # 53aa <open>
+    3baa:	20000593          	li	a1,512
+    3bae:	00004517          	auipc	a0,0x4
+    3bb2:	b4250513          	addi	a0,a0,-1214 # 76f0 <malloc+0x1a6c>
+    3bb6:	00002097          	auipc	ra,0x2
+    3bba:	ccc080e7          	jalr	-820(ra) # 5882 <open>
   if(fd >= 0){
-    368c:	10055363          	bgez	a0,3792 <dirfile+0x170>
+    3bbe:	10055363          	bgez	a0,3cc4 <dirfile+0x170>
   if(mkdir("dirfile/xx") == 0){
-    3690:	00004517          	auipc	a0,0x4
-    3694:	a4850513          	addi	a0,a0,-1464 # 70d8 <malloc+0x193c>
-    3698:	00002097          	auipc	ra,0x2
-    369c:	d3a080e7          	jalr	-710(ra) # 53d2 <mkdir>
-    36a0:	10050763          	beqz	a0,37ae <dirfile+0x18c>
+    3bc2:	00004517          	auipc	a0,0x4
+    3bc6:	b2e50513          	addi	a0,a0,-1234 # 76f0 <malloc+0x1a6c>
+    3bca:	00002097          	auipc	ra,0x2
+    3bce:	ce0080e7          	jalr	-800(ra) # 58aa <mkdir>
+    3bd2:	10050763          	beqz	a0,3ce0 <dirfile+0x18c>
   if(unlink("dirfile/xx") == 0){
-    36a4:	00004517          	auipc	a0,0x4
-    36a8:	a3450513          	addi	a0,a0,-1484 # 70d8 <malloc+0x193c>
-    36ac:	00002097          	auipc	ra,0x2
-    36b0:	d0e080e7          	jalr	-754(ra) # 53ba <unlink>
-    36b4:	10050b63          	beqz	a0,37ca <dirfile+0x1a8>
+    3bd6:	00004517          	auipc	a0,0x4
+    3bda:	b1a50513          	addi	a0,a0,-1254 # 76f0 <malloc+0x1a6c>
+    3bde:	00002097          	auipc	ra,0x2
+    3be2:	cb4080e7          	jalr	-844(ra) # 5892 <unlink>
+    3be6:	10050b63          	beqz	a0,3cfc <dirfile+0x1a8>
   if(link("README", "dirfile/xx") == 0){
-    36b8:	00004597          	auipc	a1,0x4
-    36bc:	a2058593          	addi	a1,a1,-1504 # 70d8 <malloc+0x193c>
-    36c0:	00002517          	auipc	a0,0x2
-    36c4:	3a850513          	addi	a0,a0,936 # 5a68 <malloc+0x2cc>
-    36c8:	00002097          	auipc	ra,0x2
-    36cc:	d02080e7          	jalr	-766(ra) # 53ca <link>
-    36d0:	10050b63          	beqz	a0,37e6 <dirfile+0x1c4>
+    3bea:	00004597          	auipc	a1,0x4
+    3bee:	b0658593          	addi	a1,a1,-1274 # 76f0 <malloc+0x1a6c>
+    3bf2:	00002517          	auipc	a0,0x2
+    3bf6:	35e50513          	addi	a0,a0,862 # 5f50 <malloc+0x2cc>
+    3bfa:	00002097          	auipc	ra,0x2
+    3bfe:	ca8080e7          	jalr	-856(ra) # 58a2 <link>
+    3c02:	10050b63          	beqz	a0,3d18 <dirfile+0x1c4>
   if(unlink("dirfile") != 0){
-    36d4:	00004517          	auipc	a0,0x4
-    36d8:	9bc50513          	addi	a0,a0,-1604 # 7090 <malloc+0x18f4>
-    36dc:	00002097          	auipc	ra,0x2
-    36e0:	cde080e7          	jalr	-802(ra) # 53ba <unlink>
-    36e4:	10051f63          	bnez	a0,3802 <dirfile+0x1e0>
+    3c06:	00004517          	auipc	a0,0x4
+    3c0a:	aa250513          	addi	a0,a0,-1374 # 76a8 <malloc+0x1a24>
+    3c0e:	00002097          	auipc	ra,0x2
+    3c12:	c84080e7          	jalr	-892(ra) # 5892 <unlink>
+    3c16:	10051f63          	bnez	a0,3d34 <dirfile+0x1e0>
   fd = open(".", O_RDWR);
-    36e8:	4589                	li	a1,2
-    36ea:	00003517          	auipc	a0,0x3
-    36ee:	88e50513          	addi	a0,a0,-1906 # 5f78 <malloc+0x7dc>
-    36f2:	00002097          	auipc	ra,0x2
-    36f6:	cb8080e7          	jalr	-840(ra) # 53aa <open>
+    3c1a:	4589                	li	a1,2
+    3c1c:	00003517          	auipc	a0,0x3
+    3c20:	84450513          	addi	a0,a0,-1980 # 6460 <malloc+0x7dc>
+    3c24:	00002097          	auipc	ra,0x2
+    3c28:	c5e080e7          	jalr	-930(ra) # 5882 <open>
   if(fd >= 0){
-    36fa:	12055263          	bgez	a0,381e <dirfile+0x1fc>
+    3c2c:	12055263          	bgez	a0,3d50 <dirfile+0x1fc>
   fd = open(".", 0);
-    36fe:	4581                	li	a1,0
-    3700:	00003517          	auipc	a0,0x3
-    3704:	87850513          	addi	a0,a0,-1928 # 5f78 <malloc+0x7dc>
-    3708:	00002097          	auipc	ra,0x2
-    370c:	ca2080e7          	jalr	-862(ra) # 53aa <open>
-    3710:	84aa                	mv	s1,a0
+    3c30:	4581                	li	a1,0
+    3c32:	00003517          	auipc	a0,0x3
+    3c36:	82e50513          	addi	a0,a0,-2002 # 6460 <malloc+0x7dc>
+    3c3a:	00002097          	auipc	ra,0x2
+    3c3e:	c48080e7          	jalr	-952(ra) # 5882 <open>
+    3c42:	84aa                	mv	s1,a0
   if(write(fd, "x", 1) > 0){
-    3712:	4605                	li	a2,1
-    3714:	00002597          	auipc	a1,0x2
-    3718:	21c58593          	addi	a1,a1,540 # 5930 <malloc+0x194>
-    371c:	00002097          	auipc	ra,0x2
-    3720:	c6e080e7          	jalr	-914(ra) # 538a <write>
-    3724:	10a04b63          	bgtz	a0,383a <dirfile+0x218>
+    3c44:	4605                	li	a2,1
+    3c46:	00002597          	auipc	a1,0x2
+    3c4a:	1d258593          	addi	a1,a1,466 # 5e18 <malloc+0x194>
+    3c4e:	00002097          	auipc	ra,0x2
+    3c52:	c14080e7          	jalr	-1004(ra) # 5862 <write>
+    3c56:	10a04b63          	bgtz	a0,3d6c <dirfile+0x218>
   close(fd);
-    3728:	8526                	mv	a0,s1
-    372a:	00002097          	auipc	ra,0x2
-    372e:	c68080e7          	jalr	-920(ra) # 5392 <close>
-}
-    3732:	60e2                	ld	ra,24(sp)
-    3734:	6442                	ld	s0,16(sp)
-    3736:	64a2                	ld	s1,8(sp)
-    3738:	6902                	ld	s2,0(sp)
-    373a:	6105                	addi	sp,sp,32
-    373c:	8082                	ret
+    3c5a:	8526                	mv	a0,s1
+    3c5c:	00002097          	auipc	ra,0x2
+    3c60:	c0e080e7          	jalr	-1010(ra) # 586a <close>
+}
+    3c64:	60e2                	ld	ra,24(sp)
+    3c66:	6442                	ld	s0,16(sp)
+    3c68:	64a2                	ld	s1,8(sp)
+    3c6a:	6902                	ld	s2,0(sp)
+    3c6c:	6105                	addi	sp,sp,32
+    3c6e:	8082                	ret
     printf("%s: create dirfile failed\n", s);
-    373e:	85ca                	mv	a1,s2
-    3740:	00004517          	auipc	a0,0x4
-    3744:	95850513          	addi	a0,a0,-1704 # 7098 <malloc+0x18fc>
-    3748:	00002097          	auipc	ra,0x2
-    374c:	f9c080e7          	jalr	-100(ra) # 56e4 <printf>
-    exit(1);
-    3750:	4505                	li	a0,1
-    3752:	00002097          	auipc	ra,0x2
-    3756:	c18080e7          	jalr	-1000(ra) # 536a <exit>
+    3c70:	85ca                	mv	a1,s2
+    3c72:	00004517          	auipc	a0,0x4
+    3c76:	a3e50513          	addi	a0,a0,-1474 # 76b0 <malloc+0x1a2c>
+    3c7a:	00002097          	auipc	ra,0x2
+    3c7e:	f52080e7          	jalr	-174(ra) # 5bcc <printf>
+    exit(1);
+    3c82:	4505                	li	a0,1
+    3c84:	00002097          	auipc	ra,0x2
+    3c88:	bbe080e7          	jalr	-1090(ra) # 5842 <exit>
     printf("%s: chdir dirfile succeeded!\n", s);
-    375a:	85ca                	mv	a1,s2
-    375c:	00004517          	auipc	a0,0x4
-    3760:	95c50513          	addi	a0,a0,-1700 # 70b8 <malloc+0x191c>
-    3764:	00002097          	auipc	ra,0x2
-    3768:	f80080e7          	jalr	-128(ra) # 56e4 <printf>
-    exit(1);
-    376c:	4505                	li	a0,1
-    376e:	00002097          	auipc	ra,0x2
-    3772:	bfc080e7          	jalr	-1028(ra) # 536a <exit>
+    3c8c:	85ca                	mv	a1,s2
+    3c8e:	00004517          	auipc	a0,0x4
+    3c92:	a4250513          	addi	a0,a0,-1470 # 76d0 <malloc+0x1a4c>
+    3c96:	00002097          	auipc	ra,0x2
+    3c9a:	f36080e7          	jalr	-202(ra) # 5bcc <printf>
+    exit(1);
+    3c9e:	4505                	li	a0,1
+    3ca0:	00002097          	auipc	ra,0x2
+    3ca4:	ba2080e7          	jalr	-1118(ra) # 5842 <exit>
     printf("%s: create dirfile/xx succeeded!\n", s);
-    3776:	85ca                	mv	a1,s2
-    3778:	00004517          	auipc	a0,0x4
-    377c:	97050513          	addi	a0,a0,-1680 # 70e8 <malloc+0x194c>
-    3780:	00002097          	auipc	ra,0x2
-    3784:	f64080e7          	jalr	-156(ra) # 56e4 <printf>
-    exit(1);
-    3788:	4505                	li	a0,1
-    378a:	00002097          	auipc	ra,0x2
-    378e:	be0080e7          	jalr	-1056(ra) # 536a <exit>
+    3ca8:	85ca                	mv	a1,s2
+    3caa:	00004517          	auipc	a0,0x4
+    3cae:	a5650513          	addi	a0,a0,-1450 # 7700 <malloc+0x1a7c>
+    3cb2:	00002097          	auipc	ra,0x2
+    3cb6:	f1a080e7          	jalr	-230(ra) # 5bcc <printf>
+    exit(1);
+    3cba:	4505                	li	a0,1
+    3cbc:	00002097          	auipc	ra,0x2
+    3cc0:	b86080e7          	jalr	-1146(ra) # 5842 <exit>
     printf("%s: create dirfile/xx succeeded!\n", s);
-    3792:	85ca                	mv	a1,s2
-    3794:	00004517          	auipc	a0,0x4
-    3798:	95450513          	addi	a0,a0,-1708 # 70e8 <malloc+0x194c>
-    379c:	00002097          	auipc	ra,0x2
-    37a0:	f48080e7          	jalr	-184(ra) # 56e4 <printf>
-    exit(1);
-    37a4:	4505                	li	a0,1
-    37a6:	00002097          	auipc	ra,0x2
-    37aa:	bc4080e7          	jalr	-1084(ra) # 536a <exit>
+    3cc4:	85ca                	mv	a1,s2
+    3cc6:	00004517          	auipc	a0,0x4
+    3cca:	a3a50513          	addi	a0,a0,-1478 # 7700 <malloc+0x1a7c>
+    3cce:	00002097          	auipc	ra,0x2
+    3cd2:	efe080e7          	jalr	-258(ra) # 5bcc <printf>
+    exit(1);
+    3cd6:	4505                	li	a0,1
+    3cd8:	00002097          	auipc	ra,0x2
+    3cdc:	b6a080e7          	jalr	-1174(ra) # 5842 <exit>
     printf("%s: mkdir dirfile/xx succeeded!\n", s);
-    37ae:	85ca                	mv	a1,s2
-    37b0:	00004517          	auipc	a0,0x4
-    37b4:	96050513          	addi	a0,a0,-1696 # 7110 <malloc+0x1974>
-    37b8:	00002097          	auipc	ra,0x2
-    37bc:	f2c080e7          	jalr	-212(ra) # 56e4 <printf>
-    exit(1);
-    37c0:	4505                	li	a0,1
-    37c2:	00002097          	auipc	ra,0x2
-    37c6:	ba8080e7          	jalr	-1112(ra) # 536a <exit>
+    3ce0:	85ca                	mv	a1,s2
+    3ce2:	00004517          	auipc	a0,0x4
+    3ce6:	a4650513          	addi	a0,a0,-1466 # 7728 <malloc+0x1aa4>
+    3cea:	00002097          	auipc	ra,0x2
+    3cee:	ee2080e7          	jalr	-286(ra) # 5bcc <printf>
+    exit(1);
+    3cf2:	4505                	li	a0,1
+    3cf4:	00002097          	auipc	ra,0x2
+    3cf8:	b4e080e7          	jalr	-1202(ra) # 5842 <exit>
     printf("%s: unlink dirfile/xx succeeded!\n", s);
-    37ca:	85ca                	mv	a1,s2
-    37cc:	00004517          	auipc	a0,0x4
-    37d0:	96c50513          	addi	a0,a0,-1684 # 7138 <malloc+0x199c>
-    37d4:	00002097          	auipc	ra,0x2
-    37d8:	f10080e7          	jalr	-240(ra) # 56e4 <printf>
-    exit(1);
-    37dc:	4505                	li	a0,1
-    37de:	00002097          	auipc	ra,0x2
-    37e2:	b8c080e7          	jalr	-1140(ra) # 536a <exit>
+    3cfc:	85ca                	mv	a1,s2
+    3cfe:	00004517          	auipc	a0,0x4
+    3d02:	a5250513          	addi	a0,a0,-1454 # 7750 <malloc+0x1acc>
+    3d06:	00002097          	auipc	ra,0x2
+    3d0a:	ec6080e7          	jalr	-314(ra) # 5bcc <printf>
+    exit(1);
+    3d0e:	4505                	li	a0,1
+    3d10:	00002097          	auipc	ra,0x2
+    3d14:	b32080e7          	jalr	-1230(ra) # 5842 <exit>
     printf("%s: link to dirfile/xx succeeded!\n", s);
-    37e6:	85ca                	mv	a1,s2
-    37e8:	00004517          	auipc	a0,0x4
-    37ec:	97850513          	addi	a0,a0,-1672 # 7160 <malloc+0x19c4>
-    37f0:	00002097          	auipc	ra,0x2
-    37f4:	ef4080e7          	jalr	-268(ra) # 56e4 <printf>
-    exit(1);
-    37f8:	4505                	li	a0,1
-    37fa:	00002097          	auipc	ra,0x2
-    37fe:	b70080e7          	jalr	-1168(ra) # 536a <exit>
+    3d18:	85ca                	mv	a1,s2
+    3d1a:	00004517          	auipc	a0,0x4
+    3d1e:	a5e50513          	addi	a0,a0,-1442 # 7778 <malloc+0x1af4>
+    3d22:	00002097          	auipc	ra,0x2
+    3d26:	eaa080e7          	jalr	-342(ra) # 5bcc <printf>
+    exit(1);
+    3d2a:	4505                	li	a0,1
+    3d2c:	00002097          	auipc	ra,0x2
+    3d30:	b16080e7          	jalr	-1258(ra) # 5842 <exit>
     printf("%s: unlink dirfile failed!\n", s);
-    3802:	85ca                	mv	a1,s2
-    3804:	00004517          	auipc	a0,0x4
-    3808:	98450513          	addi	a0,a0,-1660 # 7188 <malloc+0x19ec>
-    380c:	00002097          	auipc	ra,0x2
-    3810:	ed8080e7          	jalr	-296(ra) # 56e4 <printf>
-    exit(1);
-    3814:	4505                	li	a0,1
-    3816:	00002097          	auipc	ra,0x2
-    381a:	b54080e7          	jalr	-1196(ra) # 536a <exit>
+    3d34:	85ca                	mv	a1,s2
+    3d36:	00004517          	auipc	a0,0x4
+    3d3a:	a6a50513          	addi	a0,a0,-1430 # 77a0 <malloc+0x1b1c>
+    3d3e:	00002097          	auipc	ra,0x2
+    3d42:	e8e080e7          	jalr	-370(ra) # 5bcc <printf>
+    exit(1);
+    3d46:	4505                	li	a0,1
+    3d48:	00002097          	auipc	ra,0x2
+    3d4c:	afa080e7          	jalr	-1286(ra) # 5842 <exit>
     printf("%s: open . for writing succeeded!\n", s);
-    381e:	85ca                	mv	a1,s2
-    3820:	00004517          	auipc	a0,0x4
-    3824:	98850513          	addi	a0,a0,-1656 # 71a8 <malloc+0x1a0c>
-    3828:	00002097          	auipc	ra,0x2
-    382c:	ebc080e7          	jalr	-324(ra) # 56e4 <printf>
-    exit(1);
-    3830:	4505                	li	a0,1
-    3832:	00002097          	auipc	ra,0x2
-    3836:	b38080e7          	jalr	-1224(ra) # 536a <exit>
+    3d50:	85ca                	mv	a1,s2
+    3d52:	00004517          	auipc	a0,0x4
+    3d56:	a6e50513          	addi	a0,a0,-1426 # 77c0 <malloc+0x1b3c>
+    3d5a:	00002097          	auipc	ra,0x2
+    3d5e:	e72080e7          	jalr	-398(ra) # 5bcc <printf>
+    exit(1);
+    3d62:	4505                	li	a0,1
+    3d64:	00002097          	auipc	ra,0x2
+    3d68:	ade080e7          	jalr	-1314(ra) # 5842 <exit>
     printf("%s: write . succeeded!\n", s);
-    383a:	85ca                	mv	a1,s2
-    383c:	00004517          	auipc	a0,0x4
-    3840:	99450513          	addi	a0,a0,-1644 # 71d0 <malloc+0x1a34>
-    3844:	00002097          	auipc	ra,0x2
-    3848:	ea0080e7          	jalr	-352(ra) # 56e4 <printf>
-    exit(1);
-    384c:	4505                	li	a0,1
-    384e:	00002097          	auipc	ra,0x2
-    3852:	b1c080e7          	jalr	-1252(ra) # 536a <exit>
-
-0000000000003856 <iref>:
-{
-    3856:	7139                	addi	sp,sp,-64
-    3858:	fc06                	sd	ra,56(sp)
-    385a:	f822                	sd	s0,48(sp)
-    385c:	f426                	sd	s1,40(sp)
-    385e:	f04a                	sd	s2,32(sp)
-    3860:	ec4e                	sd	s3,24(sp)
-    3862:	e852                	sd	s4,16(sp)
-    3864:	e456                	sd	s5,8(sp)
-    3866:	e05a                	sd	s6,0(sp)
-    3868:	0080                	addi	s0,sp,64
-    386a:	8b2a                	mv	s6,a0
-    386c:	03300913          	li	s2,51
+    3d6c:	85ca                	mv	a1,s2
+    3d6e:	00004517          	auipc	a0,0x4
+    3d72:	a7a50513          	addi	a0,a0,-1414 # 77e8 <malloc+0x1b64>
+    3d76:	00002097          	auipc	ra,0x2
+    3d7a:	e56080e7          	jalr	-426(ra) # 5bcc <printf>
+    exit(1);
+    3d7e:	4505                	li	a0,1
+    3d80:	00002097          	auipc	ra,0x2
+    3d84:	ac2080e7          	jalr	-1342(ra) # 5842 <exit>
+
+0000000000003d88 <iref>:
+{
+    3d88:	7139                	addi	sp,sp,-64
+    3d8a:	fc06                	sd	ra,56(sp)
+    3d8c:	f822                	sd	s0,48(sp)
+    3d8e:	f426                	sd	s1,40(sp)
+    3d90:	f04a                	sd	s2,32(sp)
+    3d92:	ec4e                	sd	s3,24(sp)
+    3d94:	e852                	sd	s4,16(sp)
+    3d96:	e456                	sd	s5,8(sp)
+    3d98:	e05a                	sd	s6,0(sp)
+    3d9a:	0080                	addi	s0,sp,64
+    3d9c:	8b2a                	mv	s6,a0
+    3d9e:	03300913          	li	s2,51
     if(mkdir("irefd") != 0){
-    3870:	00004a17          	auipc	s4,0x4
-    3874:	978a0a13          	addi	s4,s4,-1672 # 71e8 <malloc+0x1a4c>
+    3da2:	00004a17          	auipc	s4,0x4
+    3da6:	a5ea0a13          	addi	s4,s4,-1442 # 7800 <malloc+0x1b7c>
     mkdir("");
-    3878:	00003497          	auipc	s1,0x3
-    387c:	47048493          	addi	s1,s1,1136 # 6ce8 <malloc+0x154c>
+    3daa:	00003497          	auipc	s1,0x3
+    3dae:	55e48493          	addi	s1,s1,1374 # 7308 <malloc+0x1684>
     link("README", "");
-    3880:	00002a97          	auipc	s5,0x2
-    3884:	1e8a8a93          	addi	s5,s5,488 # 5a68 <malloc+0x2cc>
+    3db2:	00002a97          	auipc	s5,0x2
+    3db6:	19ea8a93          	addi	s5,s5,414 # 5f50 <malloc+0x2cc>
     fd = open("xx", O_CREATE);
-    3888:	00004997          	auipc	s3,0x4
-    388c:	85898993          	addi	s3,s3,-1960 # 70e0 <malloc+0x1944>
-    3890:	a891                	j	38e4 <iref+0x8e>
+    3dba:	00004997          	auipc	s3,0x4
+    3dbe:	93e98993          	addi	s3,s3,-1730 # 76f8 <malloc+0x1a74>
+    3dc2:	a891                	j	3e16 <iref+0x8e>
       printf("%s: mkdir irefd failed\n", s);
-    3892:	85da                	mv	a1,s6
-    3894:	00004517          	auipc	a0,0x4
-    3898:	95c50513          	addi	a0,a0,-1700 # 71f0 <malloc+0x1a54>
-    389c:	00002097          	auipc	ra,0x2
-    38a0:	e48080e7          	jalr	-440(ra) # 56e4 <printf>
-      exit(1);
-    38a4:	4505                	li	a0,1
-    38a6:	00002097          	auipc	ra,0x2
-    38aa:	ac4080e7          	jalr	-1340(ra) # 536a <exit>
+    3dc4:	85da                	mv	a1,s6
+    3dc6:	00004517          	auipc	a0,0x4
+    3dca:	a4250513          	addi	a0,a0,-1470 # 7808 <malloc+0x1b84>
+    3dce:	00002097          	auipc	ra,0x2
+    3dd2:	dfe080e7          	jalr	-514(ra) # 5bcc <printf>
+      exit(1);
+    3dd6:	4505                	li	a0,1
+    3dd8:	00002097          	auipc	ra,0x2
+    3ddc:	a6a080e7          	jalr	-1430(ra) # 5842 <exit>
       printf("%s: chdir irefd failed\n", s);
-    38ae:	85da                	mv	a1,s6
-    38b0:	00004517          	auipc	a0,0x4
-    38b4:	95850513          	addi	a0,a0,-1704 # 7208 <malloc+0x1a6c>
-    38b8:	00002097          	auipc	ra,0x2
-    38bc:	e2c080e7          	jalr	-468(ra) # 56e4 <printf>
-      exit(1);
-    38c0:	4505                	li	a0,1
-    38c2:	00002097          	auipc	ra,0x2
-    38c6:	aa8080e7          	jalr	-1368(ra) # 536a <exit>
+    3de0:	85da                	mv	a1,s6
+    3de2:	00004517          	auipc	a0,0x4
+    3de6:	a3e50513          	addi	a0,a0,-1474 # 7820 <malloc+0x1b9c>
+    3dea:	00002097          	auipc	ra,0x2
+    3dee:	de2080e7          	jalr	-542(ra) # 5bcc <printf>
+      exit(1);
+    3df2:	4505                	li	a0,1
+    3df4:	00002097          	auipc	ra,0x2
+    3df8:	a4e080e7          	jalr	-1458(ra) # 5842 <exit>
       close(fd);
-    38ca:	00002097          	auipc	ra,0x2
-    38ce:	ac8080e7          	jalr	-1336(ra) # 5392 <close>
-    38d2:	a889                	j	3924 <iref+0xce>
+    3dfc:	00002097          	auipc	ra,0x2
+    3e00:	a6e080e7          	jalr	-1426(ra) # 586a <close>
+    3e04:	a889                	j	3e56 <iref+0xce>
     unlink("xx");
-    38d4:	854e                	mv	a0,s3
-    38d6:	00002097          	auipc	ra,0x2
-    38da:	ae4080e7          	jalr	-1308(ra) # 53ba <unlink>
+    3e06:	854e                	mv	a0,s3
+    3e08:	00002097          	auipc	ra,0x2
+    3e0c:	a8a080e7          	jalr	-1398(ra) # 5892 <unlink>
   for(i = 0; i < NINODE + 1; i++){
-    38de:	397d                	addiw	s2,s2,-1
-    38e0:	06090063          	beqz	s2,3940 <iref+0xea>
+    3e10:	397d                	addiw	s2,s2,-1
+    3e12:	06090063          	beqz	s2,3e72 <iref+0xea>
     if(mkdir("irefd") != 0){
-    38e4:	8552                	mv	a0,s4
-    38e6:	00002097          	auipc	ra,0x2
-    38ea:	aec080e7          	jalr	-1300(ra) # 53d2 <mkdir>
-    38ee:	f155                	bnez	a0,3892 <iref+0x3c>
+    3e16:	8552                	mv	a0,s4
+    3e18:	00002097          	auipc	ra,0x2
+    3e1c:	a92080e7          	jalr	-1390(ra) # 58aa <mkdir>
+    3e20:	f155                	bnez	a0,3dc4 <iref+0x3c>
     if(chdir("irefd") != 0){
-    38f0:	8552                	mv	a0,s4
-    38f2:	00002097          	auipc	ra,0x2
-    38f6:	ae8080e7          	jalr	-1304(ra) # 53da <chdir>
-    38fa:	f955                	bnez	a0,38ae <iref+0x58>
+    3e22:	8552                	mv	a0,s4
+    3e24:	00002097          	auipc	ra,0x2
+    3e28:	a8e080e7          	jalr	-1394(ra) # 58b2 <chdir>
+    3e2c:	f955                	bnez	a0,3de0 <iref+0x58>
     mkdir("");
-    38fc:	8526                	mv	a0,s1
-    38fe:	00002097          	auipc	ra,0x2
-    3902:	ad4080e7          	jalr	-1324(ra) # 53d2 <mkdir>
+    3e2e:	8526                	mv	a0,s1
+    3e30:	00002097          	auipc	ra,0x2
+    3e34:	a7a080e7          	jalr	-1414(ra) # 58aa <mkdir>
     link("README", "");
-    3906:	85a6                	mv	a1,s1
-    3908:	8556                	mv	a0,s5
-    390a:	00002097          	auipc	ra,0x2
-    390e:	ac0080e7          	jalr	-1344(ra) # 53ca <link>
+    3e38:	85a6                	mv	a1,s1
+    3e3a:	8556                	mv	a0,s5
+    3e3c:	00002097          	auipc	ra,0x2
+    3e40:	a66080e7          	jalr	-1434(ra) # 58a2 <link>
     fd = open("", O_CREATE);
-    3912:	20000593          	li	a1,512
-    3916:	8526                	mv	a0,s1
-    3918:	00002097          	auipc	ra,0x2
-    391c:	a92080e7          	jalr	-1390(ra) # 53aa <open>
+    3e44:	20000593          	li	a1,512
+    3e48:	8526                	mv	a0,s1
+    3e4a:	00002097          	auipc	ra,0x2
+    3e4e:	a38080e7          	jalr	-1480(ra) # 5882 <open>
     if(fd >= 0)
-    3920:	fa0555e3          	bgez	a0,38ca <iref+0x74>
+    3e52:	fa0555e3          	bgez	a0,3dfc <iref+0x74>
     fd = open("xx", O_CREATE);
-    3924:	20000593          	li	a1,512
-    3928:	854e                	mv	a0,s3
-    392a:	00002097          	auipc	ra,0x2
-    392e:	a80080e7          	jalr	-1408(ra) # 53aa <open>
+    3e56:	20000593          	li	a1,512
+    3e5a:	854e                	mv	a0,s3
+    3e5c:	00002097          	auipc	ra,0x2
+    3e60:	a26080e7          	jalr	-1498(ra) # 5882 <open>
     if(fd >= 0)
-    3932:	fa0541e3          	bltz	a0,38d4 <iref+0x7e>
+    3e64:	fa0541e3          	bltz	a0,3e06 <iref+0x7e>
       close(fd);
-    3936:	00002097          	auipc	ra,0x2
-    393a:	a5c080e7          	jalr	-1444(ra) # 5392 <close>
-    393e:	bf59                	j	38d4 <iref+0x7e>
-    3940:	03300493          	li	s1,51
+    3e68:	00002097          	auipc	ra,0x2
+    3e6c:	a02080e7          	jalr	-1534(ra) # 586a <close>
+    3e70:	bf59                	j	3e06 <iref+0x7e>
+    3e72:	03300493          	li	s1,51
     chdir("..");
-    3944:	00003997          	auipc	s3,0x3
-    3948:	6bc98993          	addi	s3,s3,1724 # 7000 <malloc+0x1864>
+    3e76:	00003997          	auipc	s3,0x3
+    3e7a:	1b298993          	addi	s3,s3,434 # 7028 <malloc+0x13a4>
     unlink("irefd");
-    394c:	00004917          	auipc	s2,0x4
-    3950:	89c90913          	addi	s2,s2,-1892 # 71e8 <malloc+0x1a4c>
+    3e7e:	00004917          	auipc	s2,0x4
+    3e82:	98290913          	addi	s2,s2,-1662 # 7800 <malloc+0x1b7c>
     chdir("..");
-    3954:	854e                	mv	a0,s3
-    3956:	00002097          	auipc	ra,0x2
-    395a:	a84080e7          	jalr	-1404(ra) # 53da <chdir>
+    3e86:	854e                	mv	a0,s3
+    3e88:	00002097          	auipc	ra,0x2
+    3e8c:	a2a080e7          	jalr	-1494(ra) # 58b2 <chdir>
     unlink("irefd");
-    395e:	854a                	mv	a0,s2
-    3960:	00002097          	auipc	ra,0x2
-    3964:	a5a080e7          	jalr	-1446(ra) # 53ba <unlink>
+    3e90:	854a                	mv	a0,s2
+    3e92:	00002097          	auipc	ra,0x2
+    3e96:	a00080e7          	jalr	-1536(ra) # 5892 <unlink>
   for(i = 0; i < NINODE + 1; i++){
-    3968:	34fd                	addiw	s1,s1,-1
-    396a:	f4ed                	bnez	s1,3954 <iref+0xfe>
+    3e9a:	34fd                	addiw	s1,s1,-1
+    3e9c:	f4ed                	bnez	s1,3e86 <iref+0xfe>
   chdir("/");
-    396c:	00003517          	auipc	a0,0x3
-    3970:	09c50513          	addi	a0,a0,156 # 6a08 <malloc+0x126c>
-    3974:	00002097          	auipc	ra,0x2
-    3978:	a66080e7          	jalr	-1434(ra) # 53da <chdir>
-}
-    397c:	70e2                	ld	ra,56(sp)
-    397e:	7442                	ld	s0,48(sp)
-    3980:	74a2                	ld	s1,40(sp)
-    3982:	7902                	ld	s2,32(sp)
-    3984:	69e2                	ld	s3,24(sp)
-    3986:	6a42                	ld	s4,16(sp)
-    3988:	6aa2                	ld	s5,8(sp)
-    398a:	6b02                	ld	s6,0(sp)
-    398c:	6121                	addi	sp,sp,64
-    398e:	8082                	ret
-
-0000000000003990 <openiputtest>:
-{
-    3990:	7179                	addi	sp,sp,-48
-    3992:	f406                	sd	ra,40(sp)
-    3994:	f022                	sd	s0,32(sp)
-    3996:	ec26                	sd	s1,24(sp)
-    3998:	1800                	addi	s0,sp,48
-    399a:	84aa                	mv	s1,a0
+    3e9e:	00003517          	auipc	a0,0x3
+    3ea2:	13250513          	addi	a0,a0,306 # 6fd0 <malloc+0x134c>
+    3ea6:	00002097          	auipc	ra,0x2
+    3eaa:	a0c080e7          	jalr	-1524(ra) # 58b2 <chdir>
+}
+    3eae:	70e2                	ld	ra,56(sp)
+    3eb0:	7442                	ld	s0,48(sp)
+    3eb2:	74a2                	ld	s1,40(sp)
+    3eb4:	7902                	ld	s2,32(sp)
+    3eb6:	69e2                	ld	s3,24(sp)
+    3eb8:	6a42                	ld	s4,16(sp)
+    3eba:	6aa2                	ld	s5,8(sp)
+    3ebc:	6b02                	ld	s6,0(sp)
+    3ebe:	6121                	addi	sp,sp,64
+    3ec0:	8082                	ret
+
+0000000000003ec2 <openiputtest>:
+{
+    3ec2:	7179                	addi	sp,sp,-48
+    3ec4:	f406                	sd	ra,40(sp)
+    3ec6:	f022                	sd	s0,32(sp)
+    3ec8:	ec26                	sd	s1,24(sp)
+    3eca:	1800                	addi	s0,sp,48
+    3ecc:	84aa                	mv	s1,a0
   if(mkdir("oidir") < 0){
-    399c:	00004517          	auipc	a0,0x4
-    39a0:	88450513          	addi	a0,a0,-1916 # 7220 <malloc+0x1a84>
-    39a4:	00002097          	auipc	ra,0x2
-    39a8:	a2e080e7          	jalr	-1490(ra) # 53d2 <mkdir>
-    39ac:	04054263          	bltz	a0,39f0 <openiputtest+0x60>
+    3ece:	00004517          	auipc	a0,0x4
+    3ed2:	96a50513          	addi	a0,a0,-1686 # 7838 <malloc+0x1bb4>
+    3ed6:	00002097          	auipc	ra,0x2
+    3eda:	9d4080e7          	jalr	-1580(ra) # 58aa <mkdir>
+    3ede:	04054263          	bltz	a0,3f22 <openiputtest+0x60>
   pid = fork();
-    39b0:	00002097          	auipc	ra,0x2
-    39b4:	9b2080e7          	jalr	-1614(ra) # 5362 <fork>
+    3ee2:	00002097          	auipc	ra,0x2
+    3ee6:	958080e7          	jalr	-1704(ra) # 583a <fork>
   if(pid < 0){
-    39b8:	04054a63          	bltz	a0,3a0c <openiputtest+0x7c>
+    3eea:	04054a63          	bltz	a0,3f3e <openiputtest+0x7c>
   if(pid == 0){
-    39bc:	e93d                	bnez	a0,3a32 <openiputtest+0xa2>
+    3eee:	e93d                	bnez	a0,3f64 <openiputtest+0xa2>
     int fd = open("oidir", O_RDWR);
-    39be:	4589                	li	a1,2
-    39c0:	00004517          	auipc	a0,0x4
-    39c4:	86050513          	addi	a0,a0,-1952 # 7220 <malloc+0x1a84>
-    39c8:	00002097          	auipc	ra,0x2
-    39cc:	9e2080e7          	jalr	-1566(ra) # 53aa <open>
+    3ef0:	4589                	li	a1,2
+    3ef2:	00004517          	auipc	a0,0x4
+    3ef6:	94650513          	addi	a0,a0,-1722 # 7838 <malloc+0x1bb4>
+    3efa:	00002097          	auipc	ra,0x2
+    3efe:	988080e7          	jalr	-1656(ra) # 5882 <open>
     if(fd >= 0){
-    39d0:	04054c63          	bltz	a0,3a28 <openiputtest+0x98>
+    3f02:	04054c63          	bltz	a0,3f5a <openiputtest+0x98>
       printf("%s: open directory for write succeeded\n", s);
-    39d4:	85a6                	mv	a1,s1
-    39d6:	00004517          	auipc	a0,0x4
-    39da:	86a50513          	addi	a0,a0,-1942 # 7240 <malloc+0x1aa4>
-    39de:	00002097          	auipc	ra,0x2
-    39e2:	d06080e7          	jalr	-762(ra) # 56e4 <printf>
-      exit(1);
-    39e6:	4505                	li	a0,1
-    39e8:	00002097          	auipc	ra,0x2
-    39ec:	982080e7          	jalr	-1662(ra) # 536a <exit>
+    3f06:	85a6                	mv	a1,s1
+    3f08:	00004517          	auipc	a0,0x4
+    3f0c:	95050513          	addi	a0,a0,-1712 # 7858 <malloc+0x1bd4>
+    3f10:	00002097          	auipc	ra,0x2
+    3f14:	cbc080e7          	jalr	-836(ra) # 5bcc <printf>
+      exit(1);
+    3f18:	4505                	li	a0,1
+    3f1a:	00002097          	auipc	ra,0x2
+    3f1e:	928080e7          	jalr	-1752(ra) # 5842 <exit>
     printf("%s: mkdir oidir failed\n", s);
-    39f0:	85a6                	mv	a1,s1
-    39f2:	00004517          	auipc	a0,0x4
-    39f6:	83650513          	addi	a0,a0,-1994 # 7228 <malloc+0x1a8c>
-    39fa:	00002097          	auipc	ra,0x2
-    39fe:	cea080e7          	jalr	-790(ra) # 56e4 <printf>
-    exit(1);
-    3a02:	4505                	li	a0,1
-    3a04:	00002097          	auipc	ra,0x2
-    3a08:	966080e7          	jalr	-1690(ra) # 536a <exit>
+    3f22:	85a6                	mv	a1,s1
+    3f24:	00004517          	auipc	a0,0x4
+    3f28:	91c50513          	addi	a0,a0,-1764 # 7840 <malloc+0x1bbc>
+    3f2c:	00002097          	auipc	ra,0x2
+    3f30:	ca0080e7          	jalr	-864(ra) # 5bcc <printf>
+    exit(1);
+    3f34:	4505                	li	a0,1
+    3f36:	00002097          	auipc	ra,0x2
+    3f3a:	90c080e7          	jalr	-1780(ra) # 5842 <exit>
     printf("%s: fork failed\n", s);
-    3a0c:	85a6                	mv	a1,s1
-    3a0e:	00002517          	auipc	a0,0x2
-    3a12:	70a50513          	addi	a0,a0,1802 # 6118 <malloc+0x97c>
-    3a16:	00002097          	auipc	ra,0x2
-    3a1a:	cce080e7          	jalr	-818(ra) # 56e4 <printf>
-    exit(1);
-    3a1e:	4505                	li	a0,1
-    3a20:	00002097          	auipc	ra,0x2
-    3a24:	94a080e7          	jalr	-1718(ra) # 536a <exit>
+    3f3e:	85a6                	mv	a1,s1
+    3f40:	00002517          	auipc	a0,0x2
+    3f44:	6c050513          	addi	a0,a0,1728 # 6600 <malloc+0x97c>
+    3f48:	00002097          	auipc	ra,0x2
+    3f4c:	c84080e7          	jalr	-892(ra) # 5bcc <printf>
+    exit(1);
+    3f50:	4505                	li	a0,1
+    3f52:	00002097          	auipc	ra,0x2
+    3f56:	8f0080e7          	jalr	-1808(ra) # 5842 <exit>
     exit(0);
-    3a28:	4501                	li	a0,0
-    3a2a:	00002097          	auipc	ra,0x2
-    3a2e:	940080e7          	jalr	-1728(ra) # 536a <exit>
+    3f5a:	4501                	li	a0,0
+    3f5c:	00002097          	auipc	ra,0x2
+    3f60:	8e6080e7          	jalr	-1818(ra) # 5842 <exit>
   sleep(1);
-    3a32:	4505                	li	a0,1
-    3a34:	00002097          	auipc	ra,0x2
-    3a38:	9c6080e7          	jalr	-1594(ra) # 53fa <sleep>
+    3f64:	4505                	li	a0,1
+    3f66:	00002097          	auipc	ra,0x2
+    3f6a:	96c080e7          	jalr	-1684(ra) # 58d2 <sleep>
   if(unlink("oidir") != 0){
-    3a3c:	00003517          	auipc	a0,0x3
-    3a40:	7e450513          	addi	a0,a0,2020 # 7220 <malloc+0x1a84>
-    3a44:	00002097          	auipc	ra,0x2
-    3a48:	976080e7          	jalr	-1674(ra) # 53ba <unlink>
-    3a4c:	cd19                	beqz	a0,3a6a <openiputtest+0xda>
+    3f6e:	00004517          	auipc	a0,0x4
+    3f72:	8ca50513          	addi	a0,a0,-1846 # 7838 <malloc+0x1bb4>
+    3f76:	00002097          	auipc	ra,0x2
+    3f7a:	91c080e7          	jalr	-1764(ra) # 5892 <unlink>
+    3f7e:	cd19                	beqz	a0,3f9c <openiputtest+0xda>
     printf("%s: unlink failed\n", s);
-    3a4e:	85a6                	mv	a1,s1
-    3a50:	00003517          	auipc	a0,0x3
-    3a54:	8b850513          	addi	a0,a0,-1864 # 6308 <malloc+0xb6c>
-    3a58:	00002097          	auipc	ra,0x2
-    3a5c:	c8c080e7          	jalr	-884(ra) # 56e4 <printf>
-    exit(1);
-    3a60:	4505                	li	a0,1
-    3a62:	00002097          	auipc	ra,0x2
-    3a66:	908080e7          	jalr	-1784(ra) # 536a <exit>
+    3f80:	85a6                	mv	a1,s1
+    3f82:	00003517          	auipc	a0,0x3
+    3f86:	86e50513          	addi	a0,a0,-1938 # 67f0 <malloc+0xb6c>
+    3f8a:	00002097          	auipc	ra,0x2
+    3f8e:	c42080e7          	jalr	-958(ra) # 5bcc <printf>
+    exit(1);
+    3f92:	4505                	li	a0,1
+    3f94:	00002097          	auipc	ra,0x2
+    3f98:	8ae080e7          	jalr	-1874(ra) # 5842 <exit>
   wait(&xstatus);
-    3a6a:	fdc40513          	addi	a0,s0,-36
-    3a6e:	00002097          	auipc	ra,0x2
-    3a72:	904080e7          	jalr	-1788(ra) # 5372 <wait>
+    3f9c:	fdc40513          	addi	a0,s0,-36
+    3fa0:	00002097          	auipc	ra,0x2
+    3fa4:	8aa080e7          	jalr	-1878(ra) # 584a <wait>
   exit(xstatus);
-    3a76:	fdc42503          	lw	a0,-36(s0)
-    3a7a:	00002097          	auipc	ra,0x2
-    3a7e:	8f0080e7          	jalr	-1808(ra) # 536a <exit>
-
-0000000000003a82 <forkforkfork>:
-{
-    3a82:	1101                	addi	sp,sp,-32
-    3a84:	ec06                	sd	ra,24(sp)
-    3a86:	e822                	sd	s0,16(sp)
-    3a88:	e426                	sd	s1,8(sp)
-    3a8a:	1000                	addi	s0,sp,32
-    3a8c:	84aa                	mv	s1,a0
+    3fa8:	fdc42503          	lw	a0,-36(s0)
+    3fac:	00002097          	auipc	ra,0x2
+    3fb0:	896080e7          	jalr	-1898(ra) # 5842 <exit>
+
+0000000000003fb4 <forkforkfork>:
+{
+    3fb4:	1101                	addi	sp,sp,-32
+    3fb6:	ec06                	sd	ra,24(sp)
+    3fb8:	e822                	sd	s0,16(sp)
+    3fba:	e426                	sd	s1,8(sp)
+    3fbc:	1000                	addi	s0,sp,32
+    3fbe:	84aa                	mv	s1,a0
   unlink("stopforking");
-    3a8e:	00003517          	auipc	a0,0x3
-    3a92:	7da50513          	addi	a0,a0,2010 # 7268 <malloc+0x1acc>
-    3a96:	00002097          	auipc	ra,0x2
-    3a9a:	924080e7          	jalr	-1756(ra) # 53ba <unlink>
+    3fc0:	00004517          	auipc	a0,0x4
+    3fc4:	8c050513          	addi	a0,a0,-1856 # 7880 <malloc+0x1bfc>
+    3fc8:	00002097          	auipc	ra,0x2
+    3fcc:	8ca080e7          	jalr	-1846(ra) # 5892 <unlink>
   int pid = fork();
-    3a9e:	00002097          	auipc	ra,0x2
-    3aa2:	8c4080e7          	jalr	-1852(ra) # 5362 <fork>
+    3fd0:	00002097          	auipc	ra,0x2
+    3fd4:	86a080e7          	jalr	-1942(ra) # 583a <fork>
   if(pid < 0){
-    3aa6:	04054563          	bltz	a0,3af0 <forkforkfork+0x6e>
+    3fd8:	04054563          	bltz	a0,4022 <forkforkfork+0x6e>
   if(pid == 0){
-    3aaa:	c12d                	beqz	a0,3b0c <forkforkfork+0x8a>
+    3fdc:	c12d                	beqz	a0,403e <forkforkfork+0x8a>
   sleep(20); // two seconds
-    3aac:	4551                	li	a0,20
-    3aae:	00002097          	auipc	ra,0x2
-    3ab2:	94c080e7          	jalr	-1716(ra) # 53fa <sleep>
+    3fde:	4551                	li	a0,20
+    3fe0:	00002097          	auipc	ra,0x2
+    3fe4:	8f2080e7          	jalr	-1806(ra) # 58d2 <sleep>
   close(open("stopforking", O_CREATE|O_RDWR));
-    3ab6:	20200593          	li	a1,514
-    3aba:	00003517          	auipc	a0,0x3
-    3abe:	7ae50513          	addi	a0,a0,1966 # 7268 <malloc+0x1acc>
-    3ac2:	00002097          	auipc	ra,0x2
-    3ac6:	8e8080e7          	jalr	-1816(ra) # 53aa <open>
-    3aca:	00002097          	auipc	ra,0x2
-    3ace:	8c8080e7          	jalr	-1848(ra) # 5392 <close>
+    3fe8:	20200593          	li	a1,514
+    3fec:	00004517          	auipc	a0,0x4
+    3ff0:	89450513          	addi	a0,a0,-1900 # 7880 <malloc+0x1bfc>
+    3ff4:	00002097          	auipc	ra,0x2
+    3ff8:	88e080e7          	jalr	-1906(ra) # 5882 <open>
+    3ffc:	00002097          	auipc	ra,0x2
+    4000:	86e080e7          	jalr	-1938(ra) # 586a <close>
   wait(0);
-    3ad2:	4501                	li	a0,0
-    3ad4:	00002097          	auipc	ra,0x2
-    3ad8:	89e080e7          	jalr	-1890(ra) # 5372 <wait>
+    4004:	4501                	li	a0,0
+    4006:	00002097          	auipc	ra,0x2
+    400a:	844080e7          	jalr	-1980(ra) # 584a <wait>
   sleep(10); // one second
-    3adc:	4529                	li	a0,10
-    3ade:	00002097          	auipc	ra,0x2
-    3ae2:	91c080e7          	jalr	-1764(ra) # 53fa <sleep>
-}
-    3ae6:	60e2                	ld	ra,24(sp)
-    3ae8:	6442                	ld	s0,16(sp)
-    3aea:	64a2                	ld	s1,8(sp)
-    3aec:	6105                	addi	sp,sp,32
-    3aee:	8082                	ret
+    400e:	4529                	li	a0,10
+    4010:	00002097          	auipc	ra,0x2
+    4014:	8c2080e7          	jalr	-1854(ra) # 58d2 <sleep>
+}
+    4018:	60e2                	ld	ra,24(sp)
+    401a:	6442                	ld	s0,16(sp)
+    401c:	64a2                	ld	s1,8(sp)
+    401e:	6105                	addi	sp,sp,32
+    4020:	8082                	ret
     printf("%s: fork failed", s);
-    3af0:	85a6                	mv	a1,s1
-    3af2:	00002517          	auipc	a0,0x2
-    3af6:	7e650513          	addi	a0,a0,2022 # 62d8 <malloc+0xb3c>
-    3afa:	00002097          	auipc	ra,0x2
-    3afe:	bea080e7          	jalr	-1046(ra) # 56e4 <printf>
-    exit(1);
-    3b02:	4505                	li	a0,1
-    3b04:	00002097          	auipc	ra,0x2
-    3b08:	866080e7          	jalr	-1946(ra) # 536a <exit>
+    4022:	85a6                	mv	a1,s1
+    4024:	00002517          	auipc	a0,0x2
+    4028:	79c50513          	addi	a0,a0,1948 # 67c0 <malloc+0xb3c>
+    402c:	00002097          	auipc	ra,0x2
+    4030:	ba0080e7          	jalr	-1120(ra) # 5bcc <printf>
+    exit(1);
+    4034:	4505                	li	a0,1
+    4036:	00002097          	auipc	ra,0x2
+    403a:	80c080e7          	jalr	-2036(ra) # 5842 <exit>
       int fd = open("stopforking", 0);
-    3b0c:	00003497          	auipc	s1,0x3
-    3b10:	75c48493          	addi	s1,s1,1884 # 7268 <malloc+0x1acc>
-    3b14:	4581                	li	a1,0
-    3b16:	8526                	mv	a0,s1
-    3b18:	00002097          	auipc	ra,0x2
-    3b1c:	892080e7          	jalr	-1902(ra) # 53aa <open>
+    403e:	00004497          	auipc	s1,0x4
+    4042:	84248493          	addi	s1,s1,-1982 # 7880 <malloc+0x1bfc>
+    4046:	4581                	li	a1,0
+    4048:	8526                	mv	a0,s1
+    404a:	00002097          	auipc	ra,0x2
+    404e:	838080e7          	jalr	-1992(ra) # 5882 <open>
       if(fd >= 0){
-    3b20:	02055463          	bgez	a0,3b48 <forkforkfork+0xc6>
+    4052:	02055463          	bgez	a0,407a <forkforkfork+0xc6>
       if(fork() < 0){
-    3b24:	00002097          	auipc	ra,0x2
-    3b28:	83e080e7          	jalr	-1986(ra) # 5362 <fork>
-    3b2c:	fe0554e3          	bgez	a0,3b14 <forkforkfork+0x92>
+    4056:	00001097          	auipc	ra,0x1
+    405a:	7e4080e7          	jalr	2020(ra) # 583a <fork>
+    405e:	fe0554e3          	bgez	a0,4046 <forkforkfork+0x92>
         close(open("stopforking", O_CREATE|O_RDWR));
-    3b30:	20200593          	li	a1,514
-    3b34:	8526                	mv	a0,s1
-    3b36:	00002097          	auipc	ra,0x2
-    3b3a:	874080e7          	jalr	-1932(ra) # 53aa <open>
-    3b3e:	00002097          	auipc	ra,0x2
-    3b42:	854080e7          	jalr	-1964(ra) # 5392 <close>
-    3b46:	b7f9                	j	3b14 <forkforkfork+0x92>
+    4062:	20200593          	li	a1,514
+    4066:	8526                	mv	a0,s1
+    4068:	00002097          	auipc	ra,0x2
+    406c:	81a080e7          	jalr	-2022(ra) # 5882 <open>
+    4070:	00001097          	auipc	ra,0x1
+    4074:	7fa080e7          	jalr	2042(ra) # 586a <close>
+    4078:	b7f9                	j	4046 <forkforkfork+0x92>
         exit(0);
-    3b48:	4501                	li	a0,0
-    3b4a:	00002097          	auipc	ra,0x2
-    3b4e:	820080e7          	jalr	-2016(ra) # 536a <exit>
-
-0000000000003b52 <preempt>:
-{
-    3b52:	7139                	addi	sp,sp,-64
-    3b54:	fc06                	sd	ra,56(sp)
-    3b56:	f822                	sd	s0,48(sp)
-    3b58:	f426                	sd	s1,40(sp)
-    3b5a:	f04a                	sd	s2,32(sp)
-    3b5c:	ec4e                	sd	s3,24(sp)
-    3b5e:	e852                	sd	s4,16(sp)
-    3b60:	0080                	addi	s0,sp,64
-    3b62:	892a                	mv	s2,a0
+    407a:	4501                	li	a0,0
+    407c:	00001097          	auipc	ra,0x1
+    4080:	7c6080e7          	jalr	1990(ra) # 5842 <exit>
+
+0000000000004084 <killstatus>:
+{
+    4084:	7139                	addi	sp,sp,-64
+    4086:	fc06                	sd	ra,56(sp)
+    4088:	f822                	sd	s0,48(sp)
+    408a:	f426                	sd	s1,40(sp)
+    408c:	f04a                	sd	s2,32(sp)
+    408e:	ec4e                	sd	s3,24(sp)
+    4090:	e852                	sd	s4,16(sp)
+    4092:	0080                	addi	s0,sp,64
+    4094:	8a2a                	mv	s4,a0
+    4096:	06400913          	li	s2,100
+    if(xst != -1) {
+    409a:	59fd                	li	s3,-1
+    int pid1 = fork();
+    409c:	00001097          	auipc	ra,0x1
+    40a0:	79e080e7          	jalr	1950(ra) # 583a <fork>
+    40a4:	84aa                	mv	s1,a0
+    if(pid1 < 0){
+    40a6:	02054f63          	bltz	a0,40e4 <killstatus+0x60>
+    if(pid1 == 0){
+    40aa:	c939                	beqz	a0,4100 <killstatus+0x7c>
+    sleep(1);
+    40ac:	4505                	li	a0,1
+    40ae:	00002097          	auipc	ra,0x2
+    40b2:	824080e7          	jalr	-2012(ra) # 58d2 <sleep>
+    kill(pid1);
+    40b6:	8526                	mv	a0,s1
+    40b8:	00001097          	auipc	ra,0x1
+    40bc:	7ba080e7          	jalr	1978(ra) # 5872 <kill>
+    wait(&xst);
+    40c0:	fcc40513          	addi	a0,s0,-52
+    40c4:	00001097          	auipc	ra,0x1
+    40c8:	786080e7          	jalr	1926(ra) # 584a <wait>
+    if(xst != -1) {
+    40cc:	fcc42783          	lw	a5,-52(s0)
+    40d0:	03379d63          	bne	a5,s3,410a <killstatus+0x86>
+  for(int i = 0; i < 100; i++){
+    40d4:	397d                	addiw	s2,s2,-1
+    40d6:	fc0913e3          	bnez	s2,409c <killstatus+0x18>
+  exit(0);
+    40da:	4501                	li	a0,0
+    40dc:	00001097          	auipc	ra,0x1
+    40e0:	766080e7          	jalr	1894(ra) # 5842 <exit>
+      printf("%s: fork failed\n", s);
+    40e4:	85d2                	mv	a1,s4
+    40e6:	00002517          	auipc	a0,0x2
+    40ea:	51a50513          	addi	a0,a0,1306 # 6600 <malloc+0x97c>
+    40ee:	00002097          	auipc	ra,0x2
+    40f2:	ade080e7          	jalr	-1314(ra) # 5bcc <printf>
+      exit(1);
+    40f6:	4505                	li	a0,1
+    40f8:	00001097          	auipc	ra,0x1
+    40fc:	74a080e7          	jalr	1866(ra) # 5842 <exit>
+        getpid();
+    4100:	00001097          	auipc	ra,0x1
+    4104:	7c2080e7          	jalr	1986(ra) # 58c2 <getpid>
+      while(1) {
+    4108:	bfe5                	j	4100 <killstatus+0x7c>
+       printf("%s: status should be -1\n", s);
+    410a:	85d2                	mv	a1,s4
+    410c:	00003517          	auipc	a0,0x3
+    4110:	78450513          	addi	a0,a0,1924 # 7890 <malloc+0x1c0c>
+    4114:	00002097          	auipc	ra,0x2
+    4118:	ab8080e7          	jalr	-1352(ra) # 5bcc <printf>
+       exit(1);
+    411c:	4505                	li	a0,1
+    411e:	00001097          	auipc	ra,0x1
+    4122:	724080e7          	jalr	1828(ra) # 5842 <exit>
+
+0000000000004126 <preempt>:
+{
+    4126:	7139                	addi	sp,sp,-64
+    4128:	fc06                	sd	ra,56(sp)
+    412a:	f822                	sd	s0,48(sp)
+    412c:	f426                	sd	s1,40(sp)
+    412e:	f04a                	sd	s2,32(sp)
+    4130:	ec4e                	sd	s3,24(sp)
+    4132:	e852                	sd	s4,16(sp)
+    4134:	0080                	addi	s0,sp,64
+    4136:	892a                	mv	s2,a0
   pid1 = fork();
-    3b64:	00001097          	auipc	ra,0x1
-    3b68:	7fe080e7          	jalr	2046(ra) # 5362 <fork>
+    4138:	00001097          	auipc	ra,0x1
+    413c:	702080e7          	jalr	1794(ra) # 583a <fork>
   if(pid1 < 0) {
-    3b6c:	00054563          	bltz	a0,3b76 <preempt+0x24>
-    3b70:	84aa                	mv	s1,a0
+    4140:	00054563          	bltz	a0,414a <preempt+0x24>
+    4144:	84aa                	mv	s1,a0
   if(pid1 == 0)
-    3b72:	ed19                	bnez	a0,3b90 <preempt+0x3e>
+    4146:	e105                	bnez	a0,4166 <preempt+0x40>
     for(;;)
-    3b74:	a001                	j	3b74 <preempt+0x22>
-    printf("%s: fork failed");
-    3b76:	00002517          	auipc	a0,0x2
-    3b7a:	76250513          	addi	a0,a0,1890 # 62d8 <malloc+0xb3c>
-    3b7e:	00002097          	auipc	ra,0x2
-    3b82:	b66080e7          	jalr	-1178(ra) # 56e4 <printf>
-    exit(1);
-    3b86:	4505                	li	a0,1
-    3b88:	00001097          	auipc	ra,0x1
-    3b8c:	7e2080e7          	jalr	2018(ra) # 536a <exit>
+    4148:	a001                	j	4148 <preempt+0x22>
+    printf("%s: fork failed", s);
+    414a:	85ca                	mv	a1,s2
+    414c:	00002517          	auipc	a0,0x2
+    4150:	67450513          	addi	a0,a0,1652 # 67c0 <malloc+0xb3c>
+    4154:	00002097          	auipc	ra,0x2
+    4158:	a78080e7          	jalr	-1416(ra) # 5bcc <printf>
+    exit(1);
+    415c:	4505                	li	a0,1
+    415e:	00001097          	auipc	ra,0x1
+    4162:	6e4080e7          	jalr	1764(ra) # 5842 <exit>
   pid2 = fork();
-    3b90:	00001097          	auipc	ra,0x1
-    3b94:	7d2080e7          	jalr	2002(ra) # 5362 <fork>
-    3b98:	89aa                	mv	s3,a0
+    4166:	00001097          	auipc	ra,0x1
+    416a:	6d4080e7          	jalr	1748(ra) # 583a <fork>
+    416e:	89aa                	mv	s3,a0
   if(pid2 < 0) {
-    3b9a:	00054463          	bltz	a0,3ba2 <preempt+0x50>
+    4170:	00054463          	bltz	a0,4178 <preempt+0x52>
   if(pid2 == 0)
-    3b9e:	e105                	bnez	a0,3bbe <preempt+0x6c>
+    4174:	e105                	bnez	a0,4194 <preempt+0x6e>
     for(;;)
-    3ba0:	a001                	j	3ba0 <preempt+0x4e>
+    4176:	a001                	j	4176 <preempt+0x50>
     printf("%s: fork failed\n", s);
-    3ba2:	85ca                	mv	a1,s2
-    3ba4:	00002517          	auipc	a0,0x2
-    3ba8:	57450513          	addi	a0,a0,1396 # 6118 <malloc+0x97c>
-    3bac:	00002097          	auipc	ra,0x2
-    3bb0:	b38080e7          	jalr	-1224(ra) # 56e4 <printf>
-    exit(1);
-    3bb4:	4505                	li	a0,1
-    3bb6:	00001097          	auipc	ra,0x1
-    3bba:	7b4080e7          	jalr	1972(ra) # 536a <exit>
+    4178:	85ca                	mv	a1,s2
+    417a:	00002517          	auipc	a0,0x2
+    417e:	48650513          	addi	a0,a0,1158 # 6600 <malloc+0x97c>
+    4182:	00002097          	auipc	ra,0x2
+    4186:	a4a080e7          	jalr	-1462(ra) # 5bcc <printf>
+    exit(1);
+    418a:	4505                	li	a0,1
+    418c:	00001097          	auipc	ra,0x1
+    4190:	6b6080e7          	jalr	1718(ra) # 5842 <exit>
   pipe(pfds);
-    3bbe:	fc840513          	addi	a0,s0,-56
-    3bc2:	00001097          	auipc	ra,0x1
-    3bc6:	7b8080e7          	jalr	1976(ra) # 537a <pipe>
+    4194:	fc840513          	addi	a0,s0,-56
+    4198:	00001097          	auipc	ra,0x1
+    419c:	6ba080e7          	jalr	1722(ra) # 5852 <pipe>
   pid3 = fork();
-    3bca:	00001097          	auipc	ra,0x1
-    3bce:	798080e7          	jalr	1944(ra) # 5362 <fork>
-    3bd2:	8a2a                	mv	s4,a0
+    41a0:	00001097          	auipc	ra,0x1
+    41a4:	69a080e7          	jalr	1690(ra) # 583a <fork>
+    41a8:	8a2a                	mv	s4,a0
   if(pid3 < 0) {
-    3bd4:	02054e63          	bltz	a0,3c10 <preempt+0xbe>
+    41aa:	02054e63          	bltz	a0,41e6 <preempt+0xc0>
   if(pid3 == 0){
-    3bd8:	e13d                	bnez	a0,3c3e <preempt+0xec>
+    41ae:	e525                	bnez	a0,4216 <preempt+0xf0>
     close(pfds[0]);
-    3bda:	fc842503          	lw	a0,-56(s0)
-    3bde:	00001097          	auipc	ra,0x1
-    3be2:	7b4080e7          	jalr	1972(ra) # 5392 <close>
+    41b0:	fc842503          	lw	a0,-56(s0)
+    41b4:	00001097          	auipc	ra,0x1
+    41b8:	6b6080e7          	jalr	1718(ra) # 586a <close>
     if(write(pfds[1], "x", 1) != 1)
-    3be6:	4605                	li	a2,1
-    3be8:	00002597          	auipc	a1,0x2
-    3bec:	d4858593          	addi	a1,a1,-696 # 5930 <malloc+0x194>
-    3bf0:	fcc42503          	lw	a0,-52(s0)
-    3bf4:	00001097          	auipc	ra,0x1
-    3bf8:	796080e7          	jalr	1942(ra) # 538a <write>
-    3bfc:	4785                	li	a5,1
-    3bfe:	02f51763          	bne	a0,a5,3c2c <preempt+0xda>
+    41bc:	4605                	li	a2,1
+    41be:	00002597          	auipc	a1,0x2
+    41c2:	c5a58593          	addi	a1,a1,-934 # 5e18 <malloc+0x194>
+    41c6:	fcc42503          	lw	a0,-52(s0)
+    41ca:	00001097          	auipc	ra,0x1
+    41ce:	698080e7          	jalr	1688(ra) # 5862 <write>
+    41d2:	4785                	li	a5,1
+    41d4:	02f51763          	bne	a0,a5,4202 <preempt+0xdc>
     close(pfds[1]);
-    3c02:	fcc42503          	lw	a0,-52(s0)
-    3c06:	00001097          	auipc	ra,0x1
-    3c0a:	78c080e7          	jalr	1932(ra) # 5392 <close>
+    41d8:	fcc42503          	lw	a0,-52(s0)
+    41dc:	00001097          	auipc	ra,0x1
+    41e0:	68e080e7          	jalr	1678(ra) # 586a <close>
     for(;;)
-    3c0e:	a001                	j	3c0e <preempt+0xbc>
+    41e4:	a001                	j	41e4 <preempt+0xbe>
      printf("%s: fork failed\n", s);
-    3c10:	85ca                	mv	a1,s2
-    3c12:	00002517          	auipc	a0,0x2
-    3c16:	50650513          	addi	a0,a0,1286 # 6118 <malloc+0x97c>
-    3c1a:	00002097          	auipc	ra,0x2
-    3c1e:	aca080e7          	jalr	-1334(ra) # 56e4 <printf>
+    41e6:	85ca                	mv	a1,s2
+    41e8:	00002517          	auipc	a0,0x2
+    41ec:	41850513          	addi	a0,a0,1048 # 6600 <malloc+0x97c>
+    41f0:	00002097          	auipc	ra,0x2
+    41f4:	9dc080e7          	jalr	-1572(ra) # 5bcc <printf>
      exit(1);
-    3c22:	4505                	li	a0,1
-    3c24:	00001097          	auipc	ra,0x1
-    3c28:	746080e7          	jalr	1862(ra) # 536a <exit>
-      printf("%s: preempt write error");
-    3c2c:	00003517          	auipc	a0,0x3
-    3c30:	64c50513          	addi	a0,a0,1612 # 7278 <malloc+0x1adc>
-    3c34:	00002097          	auipc	ra,0x2
-    3c38:	ab0080e7          	jalr	-1360(ra) # 56e4 <printf>
-    3c3c:	b7d9                	j	3c02 <preempt+0xb0>
+    41f8:	4505                	li	a0,1
+    41fa:	00001097          	auipc	ra,0x1
+    41fe:	648080e7          	jalr	1608(ra) # 5842 <exit>
+      printf("%s: preempt write error", s);
+    4202:	85ca                	mv	a1,s2
+    4204:	00003517          	auipc	a0,0x3
+    4208:	6ac50513          	addi	a0,a0,1708 # 78b0 <malloc+0x1c2c>
+    420c:	00002097          	auipc	ra,0x2
+    4210:	9c0080e7          	jalr	-1600(ra) # 5bcc <printf>
+    4214:	b7d1                	j	41d8 <preempt+0xb2>
   close(pfds[1]);
-    3c3e:	fcc42503          	lw	a0,-52(s0)
-    3c42:	00001097          	auipc	ra,0x1
-    3c46:	750080e7          	jalr	1872(ra) # 5392 <close>
+    4216:	fcc42503          	lw	a0,-52(s0)
+    421a:	00001097          	auipc	ra,0x1
+    421e:	650080e7          	jalr	1616(ra) # 586a <close>
   if(read(pfds[0], buf, sizeof(buf)) != 1){
-    3c4a:	660d                	lui	a2,0x3
-    3c4c:	00008597          	auipc	a1,0x8
-    3c50:	b3458593          	addi	a1,a1,-1228 # b780 <buf>
-    3c54:	fc842503          	lw	a0,-56(s0)
-    3c58:	00001097          	auipc	ra,0x1
-    3c5c:	72a080e7          	jalr	1834(ra) # 5382 <read>
-    3c60:	4785                	li	a5,1
-    3c62:	02f50263          	beq	a0,a5,3c86 <preempt+0x134>
-    printf("%s: preempt read error");
-    3c66:	00003517          	auipc	a0,0x3
-    3c6a:	62a50513          	addi	a0,a0,1578 # 7290 <malloc+0x1af4>
-    3c6e:	00002097          	auipc	ra,0x2
-    3c72:	a76080e7          	jalr	-1418(ra) # 56e4 <printf>
-}
-    3c76:	70e2                	ld	ra,56(sp)
-    3c78:	7442                	ld	s0,48(sp)
-    3c7a:	74a2                	ld	s1,40(sp)
-    3c7c:	7902                	ld	s2,32(sp)
-    3c7e:	69e2                	ld	s3,24(sp)
-    3c80:	6a42                	ld	s4,16(sp)
-    3c82:	6121                	addi	sp,sp,64
-    3c84:	8082                	ret
+    4222:	660d                	lui	a2,0x3
+    4224:	00008597          	auipc	a1,0x8
+    4228:	bc458593          	addi	a1,a1,-1084 # bde8 <buf>
+    422c:	fc842503          	lw	a0,-56(s0)
+    4230:	00001097          	auipc	ra,0x1
+    4234:	62a080e7          	jalr	1578(ra) # 585a <read>
+    4238:	4785                	li	a5,1
+    423a:	02f50363          	beq	a0,a5,4260 <preempt+0x13a>
+    printf("%s: preempt read error", s);
+    423e:	85ca                	mv	a1,s2
+    4240:	00003517          	auipc	a0,0x3
+    4244:	68850513          	addi	a0,a0,1672 # 78c8 <malloc+0x1c44>
+    4248:	00002097          	auipc	ra,0x2
+    424c:	984080e7          	jalr	-1660(ra) # 5bcc <printf>
+}
+    4250:	70e2                	ld	ra,56(sp)
+    4252:	7442                	ld	s0,48(sp)
+    4254:	74a2                	ld	s1,40(sp)
+    4256:	7902                	ld	s2,32(sp)
+    4258:	69e2                	ld	s3,24(sp)
+    425a:	6a42                	ld	s4,16(sp)
+    425c:	6121                	addi	sp,sp,64
+    425e:	8082                	ret
   close(pfds[0]);
-    3c86:	fc842503          	lw	a0,-56(s0)
-    3c8a:	00001097          	auipc	ra,0x1
-    3c8e:	708080e7          	jalr	1800(ra) # 5392 <close>
+    4260:	fc842503          	lw	a0,-56(s0)
+    4264:	00001097          	auipc	ra,0x1
+    4268:	606080e7          	jalr	1542(ra) # 586a <close>
   printf("kill... ");
-    3c92:	00003517          	auipc	a0,0x3
-    3c96:	61650513          	addi	a0,a0,1558 # 72a8 <malloc+0x1b0c>
-    3c9a:	00002097          	auipc	ra,0x2
-    3c9e:	a4a080e7          	jalr	-1462(ra) # 56e4 <printf>
+    426c:	00003517          	auipc	a0,0x3
+    4270:	67450513          	addi	a0,a0,1652 # 78e0 <malloc+0x1c5c>
+    4274:	00002097          	auipc	ra,0x2
+    4278:	958080e7          	jalr	-1704(ra) # 5bcc <printf>
   kill(pid1);
-    3ca2:	8526                	mv	a0,s1
-    3ca4:	00001097          	auipc	ra,0x1
-    3ca8:	6f6080e7          	jalr	1782(ra) # 539a <kill>
+    427c:	8526                	mv	a0,s1
+    427e:	00001097          	auipc	ra,0x1
+    4282:	5f4080e7          	jalr	1524(ra) # 5872 <kill>
   kill(pid2);
-    3cac:	854e                	mv	a0,s3
-    3cae:	00001097          	auipc	ra,0x1
-    3cb2:	6ec080e7          	jalr	1772(ra) # 539a <kill>
+    4286:	854e                	mv	a0,s3
+    4288:	00001097          	auipc	ra,0x1
+    428c:	5ea080e7          	jalr	1514(ra) # 5872 <kill>
   kill(pid3);
-    3cb6:	8552                	mv	a0,s4
-    3cb8:	00001097          	auipc	ra,0x1
-    3cbc:	6e2080e7          	jalr	1762(ra) # 539a <kill>
+    4290:	8552                	mv	a0,s4
+    4292:	00001097          	auipc	ra,0x1
+    4296:	5e0080e7          	jalr	1504(ra) # 5872 <kill>
   printf("wait... ");
-    3cc0:	00003517          	auipc	a0,0x3
-    3cc4:	5f850513          	addi	a0,a0,1528 # 72b8 <malloc+0x1b1c>
-    3cc8:	00002097          	auipc	ra,0x2
-    3ccc:	a1c080e7          	jalr	-1508(ra) # 56e4 <printf>
+    429a:	00003517          	auipc	a0,0x3
+    429e:	65650513          	addi	a0,a0,1622 # 78f0 <malloc+0x1c6c>
+    42a2:	00002097          	auipc	ra,0x2
+    42a6:	92a080e7          	jalr	-1750(ra) # 5bcc <printf>
   wait(0);
-    3cd0:	4501                	li	a0,0
-    3cd2:	00001097          	auipc	ra,0x1
-    3cd6:	6a0080e7          	jalr	1696(ra) # 5372 <wait>
+    42aa:	4501                	li	a0,0
+    42ac:	00001097          	auipc	ra,0x1
+    42b0:	59e080e7          	jalr	1438(ra) # 584a <wait>
   wait(0);
-    3cda:	4501                	li	a0,0
-    3cdc:	00001097          	auipc	ra,0x1
-    3ce0:	696080e7          	jalr	1686(ra) # 5372 <wait>
+    42b4:	4501                	li	a0,0
+    42b6:	00001097          	auipc	ra,0x1
+    42ba:	594080e7          	jalr	1428(ra) # 584a <wait>
   wait(0);
-    3ce4:	4501                	li	a0,0
-    3ce6:	00001097          	auipc	ra,0x1
-    3cea:	68c080e7          	jalr	1676(ra) # 5372 <wait>
-    3cee:	b761                	j	3c76 <preempt+0x124>
-
-0000000000003cf0 <sbrkfail>:
-{
-    3cf0:	7119                	addi	sp,sp,-128
-    3cf2:	fc86                	sd	ra,120(sp)
-    3cf4:	f8a2                	sd	s0,112(sp)
-    3cf6:	f4a6                	sd	s1,104(sp)
-    3cf8:	f0ca                	sd	s2,96(sp)
-    3cfa:	ecce                	sd	s3,88(sp)
-    3cfc:	e8d2                	sd	s4,80(sp)
-    3cfe:	e4d6                	sd	s5,72(sp)
-    3d00:	0100                	addi	s0,sp,128
-    3d02:	8aaa                	mv	s5,a0
+    42be:	4501                	li	a0,0
+    42c0:	00001097          	auipc	ra,0x1
+    42c4:	58a080e7          	jalr	1418(ra) # 584a <wait>
+    42c8:	b761                	j	4250 <preempt+0x12a>
+
+00000000000042ca <reparent>:
+{
+    42ca:	7179                	addi	sp,sp,-48
+    42cc:	f406                	sd	ra,40(sp)
+    42ce:	f022                	sd	s0,32(sp)
+    42d0:	ec26                	sd	s1,24(sp)
+    42d2:	e84a                	sd	s2,16(sp)
+    42d4:	e44e                	sd	s3,8(sp)
+    42d6:	e052                	sd	s4,0(sp)
+    42d8:	1800                	addi	s0,sp,48
+    42da:	89aa                	mv	s3,a0
+  int master_pid = getpid();
+    42dc:	00001097          	auipc	ra,0x1
+    42e0:	5e6080e7          	jalr	1510(ra) # 58c2 <getpid>
+    42e4:	8a2a                	mv	s4,a0
+    42e6:	0c800913          	li	s2,200
+    int pid = fork();
+    42ea:	00001097          	auipc	ra,0x1
+    42ee:	550080e7          	jalr	1360(ra) # 583a <fork>
+    42f2:	84aa                	mv	s1,a0
+    if(pid < 0){
+    42f4:	02054263          	bltz	a0,4318 <reparent+0x4e>
+    if(pid){
+    42f8:	cd21                	beqz	a0,4350 <reparent+0x86>
+      if(wait(0) != pid){
+    42fa:	4501                	li	a0,0
+    42fc:	00001097          	auipc	ra,0x1
+    4300:	54e080e7          	jalr	1358(ra) # 584a <wait>
+    4304:	02951863          	bne	a0,s1,4334 <reparent+0x6a>
+  for(int i = 0; i < 200; i++){
+    4308:	397d                	addiw	s2,s2,-1
+    430a:	fe0910e3          	bnez	s2,42ea <reparent+0x20>
+  exit(0);
+    430e:	4501                	li	a0,0
+    4310:	00001097          	auipc	ra,0x1
+    4314:	532080e7          	jalr	1330(ra) # 5842 <exit>
+      printf("%s: fork failed\n", s);
+    4318:	85ce                	mv	a1,s3
+    431a:	00002517          	auipc	a0,0x2
+    431e:	2e650513          	addi	a0,a0,742 # 6600 <malloc+0x97c>
+    4322:	00002097          	auipc	ra,0x2
+    4326:	8aa080e7          	jalr	-1878(ra) # 5bcc <printf>
+      exit(1);
+    432a:	4505                	li	a0,1
+    432c:	00001097          	auipc	ra,0x1
+    4330:	516080e7          	jalr	1302(ra) # 5842 <exit>
+        printf("%s: wait wrong pid\n", s);
+    4334:	85ce                	mv	a1,s3
+    4336:	00002517          	auipc	a0,0x2
+    433a:	45250513          	addi	a0,a0,1106 # 6788 <malloc+0xb04>
+    433e:	00002097          	auipc	ra,0x2
+    4342:	88e080e7          	jalr	-1906(ra) # 5bcc <printf>
+        exit(1);
+    4346:	4505                	li	a0,1
+    4348:	00001097          	auipc	ra,0x1
+    434c:	4fa080e7          	jalr	1274(ra) # 5842 <exit>
+      int pid2 = fork();
+    4350:	00001097          	auipc	ra,0x1
+    4354:	4ea080e7          	jalr	1258(ra) # 583a <fork>
+      if(pid2 < 0){
+    4358:	00054763          	bltz	a0,4366 <reparent+0x9c>
+      exit(0);
+    435c:	4501                	li	a0,0
+    435e:	00001097          	auipc	ra,0x1
+    4362:	4e4080e7          	jalr	1252(ra) # 5842 <exit>
+        kill(master_pid);
+    4366:	8552                	mv	a0,s4
+    4368:	00001097          	auipc	ra,0x1
+    436c:	50a080e7          	jalr	1290(ra) # 5872 <kill>
+        exit(1);
+    4370:	4505                	li	a0,1
+    4372:	00001097          	auipc	ra,0x1
+    4376:	4d0080e7          	jalr	1232(ra) # 5842 <exit>
+
+000000000000437a <sbrkfail>:
+{
+    437a:	7119                	addi	sp,sp,-128
+    437c:	fc86                	sd	ra,120(sp)
+    437e:	f8a2                	sd	s0,112(sp)
+    4380:	f4a6                	sd	s1,104(sp)
+    4382:	f0ca                	sd	s2,96(sp)
+    4384:	ecce                	sd	s3,88(sp)
+    4386:	e8d2                	sd	s4,80(sp)
+    4388:	e4d6                	sd	s5,72(sp)
+    438a:	0100                	addi	s0,sp,128
+    438c:	8aaa                	mv	s5,a0
   if(pipe(fds) != 0){
-    3d04:	fb040513          	addi	a0,s0,-80
-    3d08:	00001097          	auipc	ra,0x1
-    3d0c:	672080e7          	jalr	1650(ra) # 537a <pipe>
-    3d10:	e901                	bnez	a0,3d20 <sbrkfail+0x30>
-    3d12:	f8040493          	addi	s1,s0,-128
-    3d16:	fa840993          	addi	s3,s0,-88
-    3d1a:	8926                	mv	s2,s1
+    438e:	fb040513          	addi	a0,s0,-80
+    4392:	00001097          	auipc	ra,0x1
+    4396:	4c0080e7          	jalr	1216(ra) # 5852 <pipe>
+    439a:	e901                	bnez	a0,43aa <sbrkfail+0x30>
+    439c:	f8040493          	addi	s1,s0,-128
+    43a0:	fa840993          	addi	s3,s0,-88
+    43a4:	8926                	mv	s2,s1
     if(pids[i] != -1)
-    3d1c:	5a7d                	li	s4,-1
-    3d1e:	a085                	j	3d7e <sbrkfail+0x8e>
+    43a6:	5a7d                	li	s4,-1
+    43a8:	a085                	j	4408 <sbrkfail+0x8e>
     printf("%s: pipe() failed\n", s);
-    3d20:	85d6                	mv	a1,s5
-    3d22:	00002517          	auipc	a0,0x2
-    3d26:	4fe50513          	addi	a0,a0,1278 # 6220 <malloc+0xa84>
-    3d2a:	00002097          	auipc	ra,0x2
-    3d2e:	9ba080e7          	jalr	-1606(ra) # 56e4 <printf>
-    exit(1);
-    3d32:	4505                	li	a0,1
-    3d34:	00001097          	auipc	ra,0x1
-    3d38:	636080e7          	jalr	1590(ra) # 536a <exit>
+    43aa:	85d6                	mv	a1,s5
+    43ac:	00002517          	auipc	a0,0x2
+    43b0:	35c50513          	addi	a0,a0,860 # 6708 <malloc+0xa84>
+    43b4:	00002097          	auipc	ra,0x2
+    43b8:	818080e7          	jalr	-2024(ra) # 5bcc <printf>
+    exit(1);
+    43bc:	4505                	li	a0,1
+    43be:	00001097          	auipc	ra,0x1
+    43c2:	484080e7          	jalr	1156(ra) # 5842 <exit>
       sbrk(BIG - (uint64)sbrk(0));
-    3d3c:	00001097          	auipc	ra,0x1
-    3d40:	6b6080e7          	jalr	1718(ra) # 53f2 <sbrk>
-    3d44:	064007b7          	lui	a5,0x6400
-    3d48:	40a7853b          	subw	a0,a5,a0
-    3d4c:	00001097          	auipc	ra,0x1
-    3d50:	6a6080e7          	jalr	1702(ra) # 53f2 <sbrk>
+    43c6:	00001097          	auipc	ra,0x1
+    43ca:	504080e7          	jalr	1284(ra) # 58ca <sbrk>
+    43ce:	064007b7          	lui	a5,0x6400
+    43d2:	40a7853b          	subw	a0,a5,a0
+    43d6:	00001097          	auipc	ra,0x1
+    43da:	4f4080e7          	jalr	1268(ra) # 58ca <sbrk>
       write(fds[1], "x", 1);
-    3d54:	4605                	li	a2,1
-    3d56:	00002597          	auipc	a1,0x2
-    3d5a:	bda58593          	addi	a1,a1,-1062 # 5930 <malloc+0x194>
-    3d5e:	fb442503          	lw	a0,-76(s0)
-    3d62:	00001097          	auipc	ra,0x1
-    3d66:	628080e7          	jalr	1576(ra) # 538a <write>
+    43de:	4605                	li	a2,1
+    43e0:	00002597          	auipc	a1,0x2
+    43e4:	a3858593          	addi	a1,a1,-1480 # 5e18 <malloc+0x194>
+    43e8:	fb442503          	lw	a0,-76(s0)
+    43ec:	00001097          	auipc	ra,0x1
+    43f0:	476080e7          	jalr	1142(ra) # 5862 <write>
       for(;;) sleep(1000);
-    3d6a:	3e800513          	li	a0,1000
-    3d6e:	00001097          	auipc	ra,0x1
-    3d72:	68c080e7          	jalr	1676(ra) # 53fa <sleep>
-    3d76:	bfd5                	j	3d6a <sbrkfail+0x7a>
+    43f4:	3e800513          	li	a0,1000
+    43f8:	00001097          	auipc	ra,0x1
+    43fc:	4da080e7          	jalr	1242(ra) # 58d2 <sleep>
+    4400:	bfd5                	j	43f4 <sbrkfail+0x7a>
   for(i = 0; i < sizeof(pids)/sizeof(pids[0]); i++){
-    3d78:	0911                	addi	s2,s2,4
-    3d7a:	03390563          	beq	s2,s3,3da4 <sbrkfail+0xb4>
+    4402:	0911                	addi	s2,s2,4
+    4404:	03390563          	beq	s2,s3,442e <sbrkfail+0xb4>
     if((pids[i] = fork()) == 0){
-    3d7e:	00001097          	auipc	ra,0x1
-    3d82:	5e4080e7          	jalr	1508(ra) # 5362 <fork>
-    3d86:	00a92023          	sw	a0,0(s2)
-    3d8a:	d94d                	beqz	a0,3d3c <sbrkfail+0x4c>
+    4408:	00001097          	auipc	ra,0x1
+    440c:	432080e7          	jalr	1074(ra) # 583a <fork>
+    4410:	00a92023          	sw	a0,0(s2)
+    4414:	d94d                	beqz	a0,43c6 <sbrkfail+0x4c>
     if(pids[i] != -1)
-    3d8c:	ff4506e3          	beq	a0,s4,3d78 <sbrkfail+0x88>
+    4416:	ff4506e3          	beq	a0,s4,4402 <sbrkfail+0x88>
       read(fds[0], &scratch, 1);
-    3d90:	4605                	li	a2,1
-    3d92:	faf40593          	addi	a1,s0,-81
-    3d96:	fb042503          	lw	a0,-80(s0)
-    3d9a:	00001097          	auipc	ra,0x1
-    3d9e:	5e8080e7          	jalr	1512(ra) # 5382 <read>
-    3da2:	bfd9                	j	3d78 <sbrkfail+0x88>
+    441a:	4605                	li	a2,1
+    441c:	faf40593          	addi	a1,s0,-81
+    4420:	fb042503          	lw	a0,-80(s0)
+    4424:	00001097          	auipc	ra,0x1
+    4428:	436080e7          	jalr	1078(ra) # 585a <read>
+    442c:	bfd9                	j	4402 <sbrkfail+0x88>
   c = sbrk(PGSIZE);
-    3da4:	6505                	lui	a0,0x1
-    3da6:	00001097          	auipc	ra,0x1
-    3daa:	64c080e7          	jalr	1612(ra) # 53f2 <sbrk>
-    3dae:	8a2a                	mv	s4,a0
+    442e:	6505                	lui	a0,0x1
+    4430:	00001097          	auipc	ra,0x1
+    4434:	49a080e7          	jalr	1178(ra) # 58ca <sbrk>
+    4438:	8a2a                	mv	s4,a0
     if(pids[i] == -1)
-    3db0:	597d                	li	s2,-1
-    3db2:	a021                	j	3dba <sbrkfail+0xca>
+    443a:	597d                	li	s2,-1
+    443c:	a021                	j	4444 <sbrkfail+0xca>
   for(i = 0; i < sizeof(pids)/sizeof(pids[0]); i++){
-    3db4:	0491                	addi	s1,s1,4
-    3db6:	01348f63          	beq	s1,s3,3dd4 <sbrkfail+0xe4>
+    443e:	0491                	addi	s1,s1,4
+    4440:	01348f63          	beq	s1,s3,445e <sbrkfail+0xe4>
     if(pids[i] == -1)
-    3dba:	4088                	lw	a0,0(s1)
-    3dbc:	ff250ce3          	beq	a0,s2,3db4 <sbrkfail+0xc4>
+    4444:	4088                	lw	a0,0(s1)
+    4446:	ff250ce3          	beq	a0,s2,443e <sbrkfail+0xc4>
     kill(pids[i]);
-    3dc0:	00001097          	auipc	ra,0x1
-    3dc4:	5da080e7          	jalr	1498(ra) # 539a <kill>
+    444a:	00001097          	auipc	ra,0x1
+    444e:	428080e7          	jalr	1064(ra) # 5872 <kill>
     wait(0);
-    3dc8:	4501                	li	a0,0
-    3dca:	00001097          	auipc	ra,0x1
-    3dce:	5a8080e7          	jalr	1448(ra) # 5372 <wait>
-    3dd2:	b7cd                	j	3db4 <sbrkfail+0xc4>
+    4452:	4501                	li	a0,0
+    4454:	00001097          	auipc	ra,0x1
+    4458:	3f6080e7          	jalr	1014(ra) # 584a <wait>
+    445c:	b7cd                	j	443e <sbrkfail+0xc4>
   if(c == (char*)0xffffffffffffffffL){
-    3dd4:	57fd                	li	a5,-1
-    3dd6:	04fa0163          	beq	s4,a5,3e18 <sbrkfail+0x128>
+    445e:	57fd                	li	a5,-1
+    4460:	04fa0163          	beq	s4,a5,44a2 <sbrkfail+0x128>
   pid = fork();
-    3dda:	00001097          	auipc	ra,0x1
-    3dde:	588080e7          	jalr	1416(ra) # 5362 <fork>
-    3de2:	84aa                	mv	s1,a0
+    4464:	00001097          	auipc	ra,0x1
+    4468:	3d6080e7          	jalr	982(ra) # 583a <fork>
+    446c:	84aa                	mv	s1,a0
   if(pid < 0){
-    3de4:	04054863          	bltz	a0,3e34 <sbrkfail+0x144>
+    446e:	04054863          	bltz	a0,44be <sbrkfail+0x144>
   if(pid == 0){
-    3de8:	c525                	beqz	a0,3e50 <sbrkfail+0x160>
+    4472:	c525                	beqz	a0,44da <sbrkfail+0x160>
   wait(&xstatus);
-    3dea:	fbc40513          	addi	a0,s0,-68
-    3dee:	00001097          	auipc	ra,0x1
-    3df2:	584080e7          	jalr	1412(ra) # 5372 <wait>
+    4474:	fbc40513          	addi	a0,s0,-68
+    4478:	00001097          	auipc	ra,0x1
+    447c:	3d2080e7          	jalr	978(ra) # 584a <wait>
   if(xstatus != -1 && xstatus != 2)
-    3df6:	fbc42783          	lw	a5,-68(s0)
-    3dfa:	577d                	li	a4,-1
-    3dfc:	00e78563          	beq	a5,a4,3e06 <sbrkfail+0x116>
-    3e00:	4709                	li	a4,2
-    3e02:	08e79c63          	bne	a5,a4,3e9a <sbrkfail+0x1aa>
-}
-    3e06:	70e6                	ld	ra,120(sp)
-    3e08:	7446                	ld	s0,112(sp)
-    3e0a:	74a6                	ld	s1,104(sp)
-    3e0c:	7906                	ld	s2,96(sp)
-    3e0e:	69e6                	ld	s3,88(sp)
-    3e10:	6a46                	ld	s4,80(sp)
-    3e12:	6aa6                	ld	s5,72(sp)
-    3e14:	6109                	addi	sp,sp,128
-    3e16:	8082                	ret
+    4480:	fbc42783          	lw	a5,-68(s0)
+    4484:	577d                	li	a4,-1
+    4486:	00e78563          	beq	a5,a4,4490 <sbrkfail+0x116>
+    448a:	4709                	li	a4,2
+    448c:	08e79d63          	bne	a5,a4,4526 <sbrkfail+0x1ac>
+}
+    4490:	70e6                	ld	ra,120(sp)
+    4492:	7446                	ld	s0,112(sp)
+    4494:	74a6                	ld	s1,104(sp)
+    4496:	7906                	ld	s2,96(sp)
+    4498:	69e6                	ld	s3,88(sp)
+    449a:	6a46                	ld	s4,80(sp)
+    449c:	6aa6                	ld	s5,72(sp)
+    449e:	6109                	addi	sp,sp,128
+    44a0:	8082                	ret
     printf("%s: failed sbrk leaked memory\n", s);
-    3e18:	85d6                	mv	a1,s5
-    3e1a:	00003517          	auipc	a0,0x3
-    3e1e:	4ae50513          	addi	a0,a0,1198 # 72c8 <malloc+0x1b2c>
-    3e22:	00002097          	auipc	ra,0x2
-    3e26:	8c2080e7          	jalr	-1854(ra) # 56e4 <printf>
-    exit(1);
-    3e2a:	4505                	li	a0,1
-    3e2c:	00001097          	auipc	ra,0x1
-    3e30:	53e080e7          	jalr	1342(ra) # 536a <exit>
+    44a2:	85d6                	mv	a1,s5
+    44a4:	00003517          	auipc	a0,0x3
+    44a8:	45c50513          	addi	a0,a0,1116 # 7900 <malloc+0x1c7c>
+    44ac:	00001097          	auipc	ra,0x1
+    44b0:	720080e7          	jalr	1824(ra) # 5bcc <printf>
+    exit(1);
+    44b4:	4505                	li	a0,1
+    44b6:	00001097          	auipc	ra,0x1
+    44ba:	38c080e7          	jalr	908(ra) # 5842 <exit>
     printf("%s: fork failed\n", s);
-    3e34:	85d6                	mv	a1,s5
-    3e36:	00002517          	auipc	a0,0x2
-    3e3a:	2e250513          	addi	a0,a0,738 # 6118 <malloc+0x97c>
-    3e3e:	00002097          	auipc	ra,0x2
-    3e42:	8a6080e7          	jalr	-1882(ra) # 56e4 <printf>
-    exit(1);
-    3e46:	4505                	li	a0,1
-    3e48:	00001097          	auipc	ra,0x1
-    3e4c:	522080e7          	jalr	1314(ra) # 536a <exit>
+    44be:	85d6                	mv	a1,s5
+    44c0:	00002517          	auipc	a0,0x2
+    44c4:	14050513          	addi	a0,a0,320 # 6600 <malloc+0x97c>
+    44c8:	00001097          	auipc	ra,0x1
+    44cc:	704080e7          	jalr	1796(ra) # 5bcc <printf>
+    exit(1);
+    44d0:	4505                	li	a0,1
+    44d2:	00001097          	auipc	ra,0x1
+    44d6:	370080e7          	jalr	880(ra) # 5842 <exit>
     a = sbrk(0);
-    3e50:	4501                	li	a0,0
-    3e52:	00001097          	auipc	ra,0x1
-    3e56:	5a0080e7          	jalr	1440(ra) # 53f2 <sbrk>
-    3e5a:	892a                	mv	s2,a0
+    44da:	4501                	li	a0,0
+    44dc:	00001097          	auipc	ra,0x1
+    44e0:	3ee080e7          	jalr	1006(ra) # 58ca <sbrk>
+    44e4:	892a                	mv	s2,a0
     sbrk(10*BIG);
-    3e5c:	3e800537          	lui	a0,0x3e800
-    3e60:	00001097          	auipc	ra,0x1
-    3e64:	592080e7          	jalr	1426(ra) # 53f2 <sbrk>
+    44e6:	3e800537          	lui	a0,0x3e800
+    44ea:	00001097          	auipc	ra,0x1
+    44ee:	3e0080e7          	jalr	992(ra) # 58ca <sbrk>
     for (i = 0; i < 10*BIG; i += PGSIZE) {
-    3e68:	87ca                	mv	a5,s2
-    3e6a:	3e800737          	lui	a4,0x3e800
-    3e6e:	993a                	add	s2,s2,a4
-    3e70:	6705                	lui	a4,0x1
+    44f2:	87ca                	mv	a5,s2
+    44f4:	3e800737          	lui	a4,0x3e800
+    44f8:	993a                	add	s2,s2,a4
+    44fa:	6705                	lui	a4,0x1
       n += *(a+i);
-    3e72:	0007c683          	lbu	a3,0(a5) # 6400000 <__BSS_END__+0x63f1870>
-    3e76:	9cb5                	addw	s1,s1,a3
+    44fc:	0007c683          	lbu	a3,0(a5) # 6400000 <__BSS_END__+0x63f1208>
+    4500:	9cb5                	addw	s1,s1,a3
     for (i = 0; i < 10*BIG; i += PGSIZE) {
-    3e78:	97ba                	add	a5,a5,a4
-    3e7a:	ff279ce3          	bne	a5,s2,3e72 <sbrkfail+0x182>
-    printf("%s: allocate a lot of memory succeeded %d\n", n);
-    3e7e:	85a6                	mv	a1,s1
-    3e80:	00003517          	auipc	a0,0x3
-    3e84:	46850513          	addi	a0,a0,1128 # 72e8 <malloc+0x1b4c>
-    3e88:	00002097          	auipc	ra,0x2
-    3e8c:	85c080e7          	jalr	-1956(ra) # 56e4 <printf>
-    exit(1);
-    3e90:	4505                	li	a0,1
-    3e92:	00001097          	auipc	ra,0x1
-    3e96:	4d8080e7          	jalr	1240(ra) # 536a <exit>
-    exit(1);
-    3e9a:	4505                	li	a0,1
-    3e9c:	00001097          	auipc	ra,0x1
-    3ea0:	4ce080e7          	jalr	1230(ra) # 536a <exit>
-
-0000000000003ea4 <reparent>:
-{
-    3ea4:	7179                	addi	sp,sp,-48
-    3ea6:	f406                	sd	ra,40(sp)
-    3ea8:	f022                	sd	s0,32(sp)
-    3eaa:	ec26                	sd	s1,24(sp)
-    3eac:	e84a                	sd	s2,16(sp)
-    3eae:	e44e                	sd	s3,8(sp)
-    3eb0:	e052                	sd	s4,0(sp)
-    3eb2:	1800                	addi	s0,sp,48
-    3eb4:	89aa                	mv	s3,a0
-  int master_pid = getpid();
-    3eb6:	00001097          	auipc	ra,0x1
-    3eba:	534080e7          	jalr	1332(ra) # 53ea <getpid>
-    3ebe:	8a2a                	mv	s4,a0
-    3ec0:	0c800913          	li	s2,200
-    int pid = fork();
-    3ec4:	00001097          	auipc	ra,0x1
-    3ec8:	49e080e7          	jalr	1182(ra) # 5362 <fork>
-    3ecc:	84aa                	mv	s1,a0
-    if(pid < 0){
-    3ece:	02054263          	bltz	a0,3ef2 <reparent+0x4e>
-    if(pid){
-    3ed2:	cd21                	beqz	a0,3f2a <reparent+0x86>
-      if(wait(0) != pid){
-    3ed4:	4501                	li	a0,0
-    3ed6:	00001097          	auipc	ra,0x1
-    3eda:	49c080e7          	jalr	1180(ra) # 5372 <wait>
-    3ede:	02951863          	bne	a0,s1,3f0e <reparent+0x6a>
-  for(int i = 0; i < 200; i++){
-    3ee2:	397d                	addiw	s2,s2,-1
-    3ee4:	fe0910e3          	bnez	s2,3ec4 <reparent+0x20>
-  exit(0);
-    3ee8:	4501                	li	a0,0
-    3eea:	00001097          	auipc	ra,0x1
-    3eee:	480080e7          	jalr	1152(ra) # 536a <exit>
-      printf("%s: fork failed\n", s);
-    3ef2:	85ce                	mv	a1,s3
-    3ef4:	00002517          	auipc	a0,0x2
-    3ef8:	22450513          	addi	a0,a0,548 # 6118 <malloc+0x97c>
-    3efc:	00001097          	auipc	ra,0x1
-    3f00:	7e8080e7          	jalr	2024(ra) # 56e4 <printf>
-      exit(1);
-    3f04:	4505                	li	a0,1
-    3f06:	00001097          	auipc	ra,0x1
-    3f0a:	464080e7          	jalr	1124(ra) # 536a <exit>
-        printf("%s: wait wrong pid\n", s);
-    3f0e:	85ce                	mv	a1,s3
-    3f10:	00002517          	auipc	a0,0x2
-    3f14:	39050513          	addi	a0,a0,912 # 62a0 <malloc+0xb04>
-    3f18:	00001097          	auipc	ra,0x1
-    3f1c:	7cc080e7          	jalr	1996(ra) # 56e4 <printf>
-        exit(1);
-    3f20:	4505                	li	a0,1
-    3f22:	00001097          	auipc	ra,0x1
-    3f26:	448080e7          	jalr	1096(ra) # 536a <exit>
-      int pid2 = fork();
-    3f2a:	00001097          	auipc	ra,0x1
-    3f2e:	438080e7          	jalr	1080(ra) # 5362 <fork>
-      if(pid2 < 0){
-    3f32:	00054763          	bltz	a0,3f40 <reparent+0x9c>
-      exit(0);
-    3f36:	4501                	li	a0,0
-    3f38:	00001097          	auipc	ra,0x1
-    3f3c:	432080e7          	jalr	1074(ra) # 536a <exit>
-        kill(master_pid);
-    3f40:	8552                	mv	a0,s4
-    3f42:	00001097          	auipc	ra,0x1
-    3f46:	458080e7          	jalr	1112(ra) # 539a <kill>
-        exit(1);
-    3f4a:	4505                	li	a0,1
-    3f4c:	00001097          	auipc	ra,0x1
-    3f50:	41e080e7          	jalr	1054(ra) # 536a <exit>
-
-0000000000003f54 <mem>:
-{
-    3f54:	7139                	addi	sp,sp,-64
-    3f56:	fc06                	sd	ra,56(sp)
-    3f58:	f822                	sd	s0,48(sp)
-    3f5a:	f426                	sd	s1,40(sp)
-    3f5c:	f04a                	sd	s2,32(sp)
-    3f5e:	ec4e                	sd	s3,24(sp)
-    3f60:	0080                	addi	s0,sp,64
-    3f62:	89aa                	mv	s3,a0
+    4502:	97ba                	add	a5,a5,a4
+    4504:	ff279ce3          	bne	a5,s2,44fc <sbrkfail+0x182>
+    printf("%s: allocate a lot of memory succeeded %d\n", s, n);
+    4508:	8626                	mv	a2,s1
+    450a:	85d6                	mv	a1,s5
+    450c:	00003517          	auipc	a0,0x3
+    4510:	41450513          	addi	a0,a0,1044 # 7920 <malloc+0x1c9c>
+    4514:	00001097          	auipc	ra,0x1
+    4518:	6b8080e7          	jalr	1720(ra) # 5bcc <printf>
+    exit(1);
+    451c:	4505                	li	a0,1
+    451e:	00001097          	auipc	ra,0x1
+    4522:	324080e7          	jalr	804(ra) # 5842 <exit>
+    exit(1);
+    4526:	4505                	li	a0,1
+    4528:	00001097          	auipc	ra,0x1
+    452c:	31a080e7          	jalr	794(ra) # 5842 <exit>
+
+0000000000004530 <mem>:
+{
+    4530:	7139                	addi	sp,sp,-64
+    4532:	fc06                	sd	ra,56(sp)
+    4534:	f822                	sd	s0,48(sp)
+    4536:	f426                	sd	s1,40(sp)
+    4538:	f04a                	sd	s2,32(sp)
+    453a:	ec4e                	sd	s3,24(sp)
+    453c:	0080                	addi	s0,sp,64
+    453e:	89aa                	mv	s3,a0
   if((pid = fork()) == 0){
-    3f64:	00001097          	auipc	ra,0x1
-    3f68:	3fe080e7          	jalr	1022(ra) # 5362 <fork>
+    4540:	00001097          	auipc	ra,0x1
+    4544:	2fa080e7          	jalr	762(ra) # 583a <fork>
     m1 = 0;
-    3f6c:	4481                	li	s1,0
+    4548:	4481                	li	s1,0
     while((m2 = malloc(10001)) != 0){
-    3f6e:	6909                	lui	s2,0x2
-    3f70:	71190913          	addi	s2,s2,1809 # 2711 <sbrkarg+0xc3>
+    454a:	6909                	lui	s2,0x2
+    454c:	71190913          	addi	s2,s2,1809 # 2711 <sbrkbasic+0xb1>
   if((pid = fork()) == 0){
-    3f74:	c115                	beqz	a0,3f98 <mem+0x44>
+    4550:	c115                	beqz	a0,4574 <mem+0x44>
     wait(&xstatus);
-    3f76:	fcc40513          	addi	a0,s0,-52
-    3f7a:	00001097          	auipc	ra,0x1
-    3f7e:	3f8080e7          	jalr	1016(ra) # 5372 <wait>
+    4552:	fcc40513          	addi	a0,s0,-52
+    4556:	00001097          	auipc	ra,0x1
+    455a:	2f4080e7          	jalr	756(ra) # 584a <wait>
     if(xstatus == -1){
-    3f82:	fcc42503          	lw	a0,-52(s0)
-    3f86:	57fd                	li	a5,-1
-    3f88:	06f50363          	beq	a0,a5,3fee <mem+0x9a>
+    455e:	fcc42503          	lw	a0,-52(s0)
+    4562:	57fd                	li	a5,-1
+    4564:	06f50363          	beq	a0,a5,45ca <mem+0x9a>
     exit(xstatus);
-    3f8c:	00001097          	auipc	ra,0x1
-    3f90:	3de080e7          	jalr	990(ra) # 536a <exit>
+    4568:	00001097          	auipc	ra,0x1
+    456c:	2da080e7          	jalr	730(ra) # 5842 <exit>
       *(char**)m2 = m1;
-    3f94:	e104                	sd	s1,0(a0)
+    4570:	e104                	sd	s1,0(a0)
       m1 = m2;
-    3f96:	84aa                	mv	s1,a0
+    4572:	84aa                	mv	s1,a0
     while((m2 = malloc(10001)) != 0){
-    3f98:	854a                	mv	a0,s2
-    3f9a:	00002097          	auipc	ra,0x2
-    3f9e:	802080e7          	jalr	-2046(ra) # 579c <malloc>
-    3fa2:	f96d                	bnez	a0,3f94 <mem+0x40>
+    4574:	854a                	mv	a0,s2
+    4576:	00001097          	auipc	ra,0x1
+    457a:	70e080e7          	jalr	1806(ra) # 5c84 <malloc>
+    457e:	f96d                	bnez	a0,4570 <mem+0x40>
     while(m1){
-    3fa4:	c881                	beqz	s1,3fb4 <mem+0x60>
+    4580:	c881                	beqz	s1,4590 <mem+0x60>
       m2 = *(char**)m1;
-    3fa6:	8526                	mv	a0,s1
-    3fa8:	6084                	ld	s1,0(s1)
+    4582:	8526                	mv	a0,s1
+    4584:	6084                	ld	s1,0(s1)
       free(m1);
-    3faa:	00001097          	auipc	ra,0x1
-    3fae:	770080e7          	jalr	1904(ra) # 571a <free>
+    4586:	00001097          	auipc	ra,0x1
+    458a:	67c080e7          	jalr	1660(ra) # 5c02 <free>
     while(m1){
-    3fb2:	f8f5                	bnez	s1,3fa6 <mem+0x52>
+    458e:	f8f5                	bnez	s1,4582 <mem+0x52>
     m1 = malloc(1024*20);
-    3fb4:	6515                	lui	a0,0x5
-    3fb6:	00001097          	auipc	ra,0x1
-    3fba:	7e6080e7          	jalr	2022(ra) # 579c <malloc>
+    4590:	6515                	lui	a0,0x5
+    4592:	00001097          	auipc	ra,0x1
+    4596:	6f2080e7          	jalr	1778(ra) # 5c84 <malloc>
     if(m1 == 0){
-    3fbe:	c911                	beqz	a0,3fd2 <mem+0x7e>
+    459a:	c911                	beqz	a0,45ae <mem+0x7e>
     free(m1);
-    3fc0:	00001097          	auipc	ra,0x1
-    3fc4:	75a080e7          	jalr	1882(ra) # 571a <free>
+    459c:	00001097          	auipc	ra,0x1
+    45a0:	666080e7          	jalr	1638(ra) # 5c02 <free>
     exit(0);
-    3fc8:	4501                	li	a0,0
-    3fca:	00001097          	auipc	ra,0x1
-    3fce:	3a0080e7          	jalr	928(ra) # 536a <exit>
+    45a4:	4501                	li	a0,0
+    45a6:	00001097          	auipc	ra,0x1
+    45aa:	29c080e7          	jalr	668(ra) # 5842 <exit>
       printf("couldn't allocate mem?!!\n", s);
-    3fd2:	85ce                	mv	a1,s3
-    3fd4:	00003517          	auipc	a0,0x3
-    3fd8:	34450513          	addi	a0,a0,836 # 7318 <malloc+0x1b7c>
-    3fdc:	00001097          	auipc	ra,0x1
-    3fe0:	708080e7          	jalr	1800(ra) # 56e4 <printf>
-      exit(1);
-    3fe4:	4505                	li	a0,1
-    3fe6:	00001097          	auipc	ra,0x1
-    3fea:	384080e7          	jalr	900(ra) # 536a <exit>
+    45ae:	85ce                	mv	a1,s3
+    45b0:	00003517          	auipc	a0,0x3
+    45b4:	3a050513          	addi	a0,a0,928 # 7950 <malloc+0x1ccc>
+    45b8:	00001097          	auipc	ra,0x1
+    45bc:	614080e7          	jalr	1556(ra) # 5bcc <printf>
+      exit(1);
+    45c0:	4505                	li	a0,1
+    45c2:	00001097          	auipc	ra,0x1
+    45c6:	280080e7          	jalr	640(ra) # 5842 <exit>
       exit(0);
-    3fee:	4501                	li	a0,0
-    3ff0:	00001097          	auipc	ra,0x1
-    3ff4:	37a080e7          	jalr	890(ra) # 536a <exit>
-
-0000000000003ff8 <sharedfd>:
-{
-    3ff8:	7159                	addi	sp,sp,-112
-    3ffa:	f486                	sd	ra,104(sp)
-    3ffc:	f0a2                	sd	s0,96(sp)
-    3ffe:	eca6                	sd	s1,88(sp)
-    4000:	e8ca                	sd	s2,80(sp)
-    4002:	e4ce                	sd	s3,72(sp)
-    4004:	e0d2                	sd	s4,64(sp)
-    4006:	fc56                	sd	s5,56(sp)
-    4008:	f85a                	sd	s6,48(sp)
-    400a:	f45e                	sd	s7,40(sp)
-    400c:	1880                	addi	s0,sp,112
-    400e:	8a2a                	mv	s4,a0
+    45ca:	4501                	li	a0,0
+    45cc:	00001097          	auipc	ra,0x1
+    45d0:	276080e7          	jalr	630(ra) # 5842 <exit>
+
+00000000000045d4 <sharedfd>:
+{
+    45d4:	7159                	addi	sp,sp,-112
+    45d6:	f486                	sd	ra,104(sp)
+    45d8:	f0a2                	sd	s0,96(sp)
+    45da:	eca6                	sd	s1,88(sp)
+    45dc:	e8ca                	sd	s2,80(sp)
+    45de:	e4ce                	sd	s3,72(sp)
+    45e0:	e0d2                	sd	s4,64(sp)
+    45e2:	fc56                	sd	s5,56(sp)
+    45e4:	f85a                	sd	s6,48(sp)
+    45e6:	f45e                	sd	s7,40(sp)
+    45e8:	1880                	addi	s0,sp,112
+    45ea:	8a2a                	mv	s4,a0
   unlink("sharedfd");
-    4010:	00003517          	auipc	a0,0x3
-    4014:	32850513          	addi	a0,a0,808 # 7338 <malloc+0x1b9c>
-    4018:	00001097          	auipc	ra,0x1
-    401c:	3a2080e7          	jalr	930(ra) # 53ba <unlink>
+    45ec:	00003517          	auipc	a0,0x3
+    45f0:	38450513          	addi	a0,a0,900 # 7970 <malloc+0x1cec>
+    45f4:	00001097          	auipc	ra,0x1
+    45f8:	29e080e7          	jalr	670(ra) # 5892 <unlink>
   fd = open("sharedfd", O_CREATE|O_RDWR);
-    4020:	20200593          	li	a1,514
-    4024:	00003517          	auipc	a0,0x3
-    4028:	31450513          	addi	a0,a0,788 # 7338 <malloc+0x1b9c>
-    402c:	00001097          	auipc	ra,0x1
-    4030:	37e080e7          	jalr	894(ra) # 53aa <open>
+    45fc:	20200593          	li	a1,514
+    4600:	00003517          	auipc	a0,0x3
+    4604:	37050513          	addi	a0,a0,880 # 7970 <malloc+0x1cec>
+    4608:	00001097          	auipc	ra,0x1
+    460c:	27a080e7          	jalr	634(ra) # 5882 <open>
   if(fd < 0){
-    4034:	04054a63          	bltz	a0,4088 <sharedfd+0x90>
-    4038:	892a                	mv	s2,a0
+    4610:	04054a63          	bltz	a0,4664 <sharedfd+0x90>
+    4614:	892a                	mv	s2,a0
   pid = fork();
-    403a:	00001097          	auipc	ra,0x1
-    403e:	328080e7          	jalr	808(ra) # 5362 <fork>
-    4042:	89aa                	mv	s3,a0
+    4616:	00001097          	auipc	ra,0x1
+    461a:	224080e7          	jalr	548(ra) # 583a <fork>
+    461e:	89aa                	mv	s3,a0
   memset(buf, pid==0?'c':'p', sizeof(buf));
-    4044:	06300593          	li	a1,99
-    4048:	c119                	beqz	a0,404e <sharedfd+0x56>
-    404a:	07000593          	li	a1,112
-    404e:	4629                	li	a2,10
-    4050:	fa040513          	addi	a0,s0,-96
-    4054:	00001097          	auipc	ra,0x1
-    4058:	11c080e7          	jalr	284(ra) # 5170 <memset>
-    405c:	3e800493          	li	s1,1000
+    4620:	06300593          	li	a1,99
+    4624:	c119                	beqz	a0,462a <sharedfd+0x56>
+    4626:	07000593          	li	a1,112
+    462a:	4629                	li	a2,10
+    462c:	fa040513          	addi	a0,s0,-96
+    4630:	00001097          	auipc	ra,0x1
+    4634:	018080e7          	jalr	24(ra) # 5648 <memset>
+    4638:	3e800493          	li	s1,1000
     if(write(fd, buf, sizeof(buf)) != sizeof(buf)){
-    4060:	4629                	li	a2,10
-    4062:	fa040593          	addi	a1,s0,-96
-    4066:	854a                	mv	a0,s2
-    4068:	00001097          	auipc	ra,0x1
-    406c:	322080e7          	jalr	802(ra) # 538a <write>
-    4070:	47a9                	li	a5,10
-    4072:	02f51963          	bne	a0,a5,40a4 <sharedfd+0xac>
+    463c:	4629                	li	a2,10
+    463e:	fa040593          	addi	a1,s0,-96
+    4642:	854a                	mv	a0,s2
+    4644:	00001097          	auipc	ra,0x1
+    4648:	21e080e7          	jalr	542(ra) # 5862 <write>
+    464c:	47a9                	li	a5,10
+    464e:	02f51963          	bne	a0,a5,4680 <sharedfd+0xac>
   for(i = 0; i < N; i++){
-    4076:	34fd                	addiw	s1,s1,-1
-    4078:	f4e5                	bnez	s1,4060 <sharedfd+0x68>
+    4652:	34fd                	addiw	s1,s1,-1
+    4654:	f4e5                	bnez	s1,463c <sharedfd+0x68>
   if(pid == 0) {
-    407a:	04099363          	bnez	s3,40c0 <sharedfd+0xc8>
+    4656:	04099363          	bnez	s3,469c <sharedfd+0xc8>
     exit(0);
-    407e:	4501                	li	a0,0
-    4080:	00001097          	auipc	ra,0x1
-    4084:	2ea080e7          	jalr	746(ra) # 536a <exit>
+    465a:	4501                	li	a0,0
+    465c:	00001097          	auipc	ra,0x1
+    4660:	1e6080e7          	jalr	486(ra) # 5842 <exit>
     printf("%s: cannot open sharedfd for writing", s);
-    4088:	85d2                	mv	a1,s4
-    408a:	00003517          	auipc	a0,0x3
-    408e:	2be50513          	addi	a0,a0,702 # 7348 <malloc+0x1bac>
-    4092:	00001097          	auipc	ra,0x1
-    4096:	652080e7          	jalr	1618(ra) # 56e4 <printf>
-    exit(1);
-    409a:	4505                	li	a0,1
-    409c:	00001097          	auipc	ra,0x1
-    40a0:	2ce080e7          	jalr	718(ra) # 536a <exit>
+    4664:	85d2                	mv	a1,s4
+    4666:	00003517          	auipc	a0,0x3
+    466a:	31a50513          	addi	a0,a0,794 # 7980 <malloc+0x1cfc>
+    466e:	00001097          	auipc	ra,0x1
+    4672:	55e080e7          	jalr	1374(ra) # 5bcc <printf>
+    exit(1);
+    4676:	4505                	li	a0,1
+    4678:	00001097          	auipc	ra,0x1
+    467c:	1ca080e7          	jalr	458(ra) # 5842 <exit>
       printf("%s: write sharedfd failed\n", s);
-    40a4:	85d2                	mv	a1,s4
-    40a6:	00003517          	auipc	a0,0x3
-    40aa:	2ca50513          	addi	a0,a0,714 # 7370 <malloc+0x1bd4>
-    40ae:	00001097          	auipc	ra,0x1
-    40b2:	636080e7          	jalr	1590(ra) # 56e4 <printf>
+    4680:	85d2                	mv	a1,s4
+    4682:	00003517          	auipc	a0,0x3
+    4686:	32650513          	addi	a0,a0,806 # 79a8 <malloc+0x1d24>
+    468a:	00001097          	auipc	ra,0x1
+    468e:	542080e7          	jalr	1346(ra) # 5bcc <printf>
       exit(1);
-    40b6:	4505                	li	a0,1
-    40b8:	00001097          	auipc	ra,0x1
-    40bc:	2b2080e7          	jalr	690(ra) # 536a <exit>
+    4692:	4505                	li	a0,1
+    4694:	00001097          	auipc	ra,0x1
+    4698:	1ae080e7          	jalr	430(ra) # 5842 <exit>
     wait(&xstatus);
-    40c0:	f9c40513          	addi	a0,s0,-100
-    40c4:	00001097          	auipc	ra,0x1
-    40c8:	2ae080e7          	jalr	686(ra) # 5372 <wait>
+    469c:	f9c40513          	addi	a0,s0,-100
+    46a0:	00001097          	auipc	ra,0x1
+    46a4:	1aa080e7          	jalr	426(ra) # 584a <wait>
     if(xstatus != 0)
-    40cc:	f9c42983          	lw	s3,-100(s0)
-    40d0:	00098763          	beqz	s3,40de <sharedfd+0xe6>
+    46a8:	f9c42983          	lw	s3,-100(s0)
+    46ac:	00098763          	beqz	s3,46ba <sharedfd+0xe6>
       exit(xstatus);
-    40d4:	854e                	mv	a0,s3
-    40d6:	00001097          	auipc	ra,0x1
-    40da:	294080e7          	jalr	660(ra) # 536a <exit>
+    46b0:	854e                	mv	a0,s3
+    46b2:	00001097          	auipc	ra,0x1
+    46b6:	190080e7          	jalr	400(ra) # 5842 <exit>
   close(fd);
-    40de:	854a                	mv	a0,s2
-    40e0:	00001097          	auipc	ra,0x1
-    40e4:	2b2080e7          	jalr	690(ra) # 5392 <close>
+    46ba:	854a                	mv	a0,s2
+    46bc:	00001097          	auipc	ra,0x1
+    46c0:	1ae080e7          	jalr	430(ra) # 586a <close>
   fd = open("sharedfd", 0);
-    40e8:	4581                	li	a1,0
-    40ea:	00003517          	auipc	a0,0x3
-    40ee:	24e50513          	addi	a0,a0,590 # 7338 <malloc+0x1b9c>
-    40f2:	00001097          	auipc	ra,0x1
-    40f6:	2b8080e7          	jalr	696(ra) # 53aa <open>
-    40fa:	8baa                	mv	s7,a0
+    46c4:	4581                	li	a1,0
+    46c6:	00003517          	auipc	a0,0x3
+    46ca:	2aa50513          	addi	a0,a0,682 # 7970 <malloc+0x1cec>
+    46ce:	00001097          	auipc	ra,0x1
+    46d2:	1b4080e7          	jalr	436(ra) # 5882 <open>
+    46d6:	8baa                	mv	s7,a0
   nc = np = 0;
-    40fc:	8ace                	mv	s5,s3
+    46d8:	8ace                	mv	s5,s3
   if(fd < 0){
-    40fe:	02054563          	bltz	a0,4128 <sharedfd+0x130>
-    4102:	faa40913          	addi	s2,s0,-86
+    46da:	02054563          	bltz	a0,4704 <sharedfd+0x130>
+    46de:	faa40913          	addi	s2,s0,-86
       if(buf[i] == 'c')
-    4106:	06300493          	li	s1,99
+    46e2:	06300493          	li	s1,99
       if(buf[i] == 'p')
-    410a:	07000b13          	li	s6,112
+    46e6:	07000b13          	li	s6,112
   while((n = read(fd, buf, sizeof(buf))) > 0){
-    410e:	4629                	li	a2,10
-    4110:	fa040593          	addi	a1,s0,-96
-    4114:	855e                	mv	a0,s7
-    4116:	00001097          	auipc	ra,0x1
-    411a:	26c080e7          	jalr	620(ra) # 5382 <read>
-    411e:	02a05f63          	blez	a0,415c <sharedfd+0x164>
-    4122:	fa040793          	addi	a5,s0,-96
-    4126:	a01d                	j	414c <sharedfd+0x154>
+    46ea:	4629                	li	a2,10
+    46ec:	fa040593          	addi	a1,s0,-96
+    46f0:	855e                	mv	a0,s7
+    46f2:	00001097          	auipc	ra,0x1
+    46f6:	168080e7          	jalr	360(ra) # 585a <read>
+    46fa:	02a05f63          	blez	a0,4738 <sharedfd+0x164>
+    46fe:	fa040793          	addi	a5,s0,-96
+    4702:	a01d                	j	4728 <sharedfd+0x154>
     printf("%s: cannot open sharedfd for reading\n", s);
-    4128:	85d2                	mv	a1,s4
-    412a:	00003517          	auipc	a0,0x3
-    412e:	26650513          	addi	a0,a0,614 # 7390 <malloc+0x1bf4>
-    4132:	00001097          	auipc	ra,0x1
-    4136:	5b2080e7          	jalr	1458(ra) # 56e4 <printf>
-    exit(1);
-    413a:	4505                	li	a0,1
-    413c:	00001097          	auipc	ra,0x1
-    4140:	22e080e7          	jalr	558(ra) # 536a <exit>
+    4704:	85d2                	mv	a1,s4
+    4706:	00003517          	auipc	a0,0x3
+    470a:	2c250513          	addi	a0,a0,706 # 79c8 <malloc+0x1d44>
+    470e:	00001097          	auipc	ra,0x1
+    4712:	4be080e7          	jalr	1214(ra) # 5bcc <printf>
+    exit(1);
+    4716:	4505                	li	a0,1
+    4718:	00001097          	auipc	ra,0x1
+    471c:	12a080e7          	jalr	298(ra) # 5842 <exit>
         nc++;
-    4144:	2985                	addiw	s3,s3,1
+    4720:	2985                	addiw	s3,s3,1
     for(i = 0; i < sizeof(buf); i++){
-    4146:	0785                	addi	a5,a5,1
-    4148:	fd2783e3          	beq	a5,s2,410e <sharedfd+0x116>
+    4722:	0785                	addi	a5,a5,1
+    4724:	fd2783e3          	beq	a5,s2,46ea <sharedfd+0x116>
       if(buf[i] == 'c')
-    414c:	0007c703          	lbu	a4,0(a5)
-    4150:	fe970ae3          	beq	a4,s1,4144 <sharedfd+0x14c>
+    4728:	0007c703          	lbu	a4,0(a5)
+    472c:	fe970ae3          	beq	a4,s1,4720 <sharedfd+0x14c>
       if(buf[i] == 'p')
-    4154:	ff6719e3          	bne	a4,s6,4146 <sharedfd+0x14e>
+    4730:	ff6719e3          	bne	a4,s6,4722 <sharedfd+0x14e>
         np++;
-    4158:	2a85                	addiw	s5,s5,1
-    415a:	b7f5                	j	4146 <sharedfd+0x14e>
+    4734:	2a85                	addiw	s5,s5,1
+    4736:	b7f5                	j	4722 <sharedfd+0x14e>
   close(fd);
-    415c:	855e                	mv	a0,s7
-    415e:	00001097          	auipc	ra,0x1
-    4162:	234080e7          	jalr	564(ra) # 5392 <close>
+    4738:	855e                	mv	a0,s7
+    473a:	00001097          	auipc	ra,0x1
+    473e:	130080e7          	jalr	304(ra) # 586a <close>
   unlink("sharedfd");
-    4166:	00003517          	auipc	a0,0x3
-    416a:	1d250513          	addi	a0,a0,466 # 7338 <malloc+0x1b9c>
-    416e:	00001097          	auipc	ra,0x1
-    4172:	24c080e7          	jalr	588(ra) # 53ba <unlink>
+    4742:	00003517          	auipc	a0,0x3
+    4746:	22e50513          	addi	a0,a0,558 # 7970 <malloc+0x1cec>
+    474a:	00001097          	auipc	ra,0x1
+    474e:	148080e7          	jalr	328(ra) # 5892 <unlink>
   if(nc == N*SZ && np == N*SZ){
-    4176:	6789                	lui	a5,0x2
-    4178:	71078793          	addi	a5,a5,1808 # 2710 <sbrkarg+0xc2>
-    417c:	00f99763          	bne	s3,a5,418a <sharedfd+0x192>
-    4180:	6789                	lui	a5,0x2
-    4182:	71078793          	addi	a5,a5,1808 # 2710 <sbrkarg+0xc2>
-    4186:	02fa8063          	beq	s5,a5,41a6 <sharedfd+0x1ae>
+    4752:	6789                	lui	a5,0x2
+    4754:	71078793          	addi	a5,a5,1808 # 2710 <sbrkbasic+0xb0>
+    4758:	00f99763          	bne	s3,a5,4766 <sharedfd+0x192>
+    475c:	6789                	lui	a5,0x2
+    475e:	71078793          	addi	a5,a5,1808 # 2710 <sbrkbasic+0xb0>
+    4762:	02fa8063          	beq	s5,a5,4782 <sharedfd+0x1ae>
     printf("%s: nc/np test fails\n", s);
-    418a:	85d2                	mv	a1,s4
-    418c:	00003517          	auipc	a0,0x3
-    4190:	22c50513          	addi	a0,a0,556 # 73b8 <malloc+0x1c1c>
-    4194:	00001097          	auipc	ra,0x1
-    4198:	550080e7          	jalr	1360(ra) # 56e4 <printf>
-    exit(1);
-    419c:	4505                	li	a0,1
-    419e:	00001097          	auipc	ra,0x1
-    41a2:	1cc080e7          	jalr	460(ra) # 536a <exit>
+    4766:	85d2                	mv	a1,s4
+    4768:	00003517          	auipc	a0,0x3
+    476c:	28850513          	addi	a0,a0,648 # 79f0 <malloc+0x1d6c>
+    4770:	00001097          	auipc	ra,0x1
+    4774:	45c080e7          	jalr	1116(ra) # 5bcc <printf>
+    exit(1);
+    4778:	4505                	li	a0,1
+    477a:	00001097          	auipc	ra,0x1
+    477e:	0c8080e7          	jalr	200(ra) # 5842 <exit>
     exit(0);
-    41a6:	4501                	li	a0,0
-    41a8:	00001097          	auipc	ra,0x1
-    41ac:	1c2080e7          	jalr	450(ra) # 536a <exit>
-
-00000000000041b0 <fourfiles>:
-{
-    41b0:	7171                	addi	sp,sp,-176
-    41b2:	f506                	sd	ra,168(sp)
-    41b4:	f122                	sd	s0,160(sp)
-    41b6:	ed26                	sd	s1,152(sp)
-    41b8:	e94a                	sd	s2,144(sp)
-    41ba:	e54e                	sd	s3,136(sp)
-    41bc:	e152                	sd	s4,128(sp)
-    41be:	fcd6                	sd	s5,120(sp)
-    41c0:	f8da                	sd	s6,112(sp)
-    41c2:	f4de                	sd	s7,104(sp)
-    41c4:	f0e2                	sd	s8,96(sp)
-    41c6:	ece6                	sd	s9,88(sp)
-    41c8:	e8ea                	sd	s10,80(sp)
-    41ca:	e4ee                	sd	s11,72(sp)
-    41cc:	1900                	addi	s0,sp,176
-    41ce:	f4a43c23          	sd	a0,-168(s0)
+    4782:	4501                	li	a0,0
+    4784:	00001097          	auipc	ra,0x1
+    4788:	0be080e7          	jalr	190(ra) # 5842 <exit>
+
+000000000000478c <fourfiles>:
+{
+    478c:	7171                	addi	sp,sp,-176
+    478e:	f506                	sd	ra,168(sp)
+    4790:	f122                	sd	s0,160(sp)
+    4792:	ed26                	sd	s1,152(sp)
+    4794:	e94a                	sd	s2,144(sp)
+    4796:	e54e                	sd	s3,136(sp)
+    4798:	e152                	sd	s4,128(sp)
+    479a:	fcd6                	sd	s5,120(sp)
+    479c:	f8da                	sd	s6,112(sp)
+    479e:	f4de                	sd	s7,104(sp)
+    47a0:	f0e2                	sd	s8,96(sp)
+    47a2:	ece6                	sd	s9,88(sp)
+    47a4:	e8ea                	sd	s10,80(sp)
+    47a6:	e4ee                	sd	s11,72(sp)
+    47a8:	1900                	addi	s0,sp,176
+    47aa:	f4a43c23          	sd	a0,-168(s0)
   char *names[] = { "f0", "f1", "f2", "f3" };
-    41d2:	00003797          	auipc	a5,0x3
-    41d6:	1fe78793          	addi	a5,a5,510 # 73d0 <malloc+0x1c34>
-    41da:	f6f43823          	sd	a5,-144(s0)
-    41de:	00003797          	auipc	a5,0x3
-    41e2:	1fa78793          	addi	a5,a5,506 # 73d8 <malloc+0x1c3c>
-    41e6:	f6f43c23          	sd	a5,-136(s0)
-    41ea:	00003797          	auipc	a5,0x3
-    41ee:	1f678793          	addi	a5,a5,502 # 73e0 <malloc+0x1c44>
-    41f2:	f8f43023          	sd	a5,-128(s0)
-    41f6:	00003797          	auipc	a5,0x3
-    41fa:	1f278793          	addi	a5,a5,498 # 73e8 <malloc+0x1c4c>
-    41fe:	f8f43423          	sd	a5,-120(s0)
+    47ae:	00003797          	auipc	a5,0x3
+    47b2:	25a78793          	addi	a5,a5,602 # 7a08 <malloc+0x1d84>
+    47b6:	f6f43823          	sd	a5,-144(s0)
+    47ba:	00003797          	auipc	a5,0x3
+    47be:	25678793          	addi	a5,a5,598 # 7a10 <malloc+0x1d8c>
+    47c2:	f6f43c23          	sd	a5,-136(s0)
+    47c6:	00003797          	auipc	a5,0x3
+    47ca:	25278793          	addi	a5,a5,594 # 7a18 <malloc+0x1d94>
+    47ce:	f8f43023          	sd	a5,-128(s0)
+    47d2:	00003797          	auipc	a5,0x3
+    47d6:	24e78793          	addi	a5,a5,590 # 7a20 <malloc+0x1d9c>
+    47da:	f8f43423          	sd	a5,-120(s0)
   for(pi = 0; pi < NCHILD; pi++){
-    4202:	f7040c13          	addi	s8,s0,-144
+    47de:	f7040c13          	addi	s8,s0,-144
   char *names[] = { "f0", "f1", "f2", "f3" };
-    4206:	8962                	mv	s2,s8
+    47e2:	8962                	mv	s2,s8
   for(pi = 0; pi < NCHILD; pi++){
-    4208:	4481                	li	s1,0
-    420a:	4a11                	li	s4,4
+    47e4:	4481                	li	s1,0
+    47e6:	4a11                	li	s4,4
     fname = names[pi];
-    420c:	00093983          	ld	s3,0(s2)
+    47e8:	00093983          	ld	s3,0(s2)
     unlink(fname);
-    4210:	854e                	mv	a0,s3
-    4212:	00001097          	auipc	ra,0x1
-    4216:	1a8080e7          	jalr	424(ra) # 53ba <unlink>
+    47ec:	854e                	mv	a0,s3
+    47ee:	00001097          	auipc	ra,0x1
+    47f2:	0a4080e7          	jalr	164(ra) # 5892 <unlink>
     pid = fork();
-    421a:	00001097          	auipc	ra,0x1
-    421e:	148080e7          	jalr	328(ra) # 5362 <fork>
+    47f6:	00001097          	auipc	ra,0x1
+    47fa:	044080e7          	jalr	68(ra) # 583a <fork>
     if(pid < 0){
-    4222:	04054463          	bltz	a0,426a <fourfiles+0xba>
+    47fe:	04054463          	bltz	a0,4846 <fourfiles+0xba>
     if(pid == 0){
-    4226:	c12d                	beqz	a0,4288 <fourfiles+0xd8>
+    4802:	c12d                	beqz	a0,4864 <fourfiles+0xd8>
   for(pi = 0; pi < NCHILD; pi++){
-    4228:	2485                	addiw	s1,s1,1
-    422a:	0921                	addi	s2,s2,8
-    422c:	ff4490e3          	bne	s1,s4,420c <fourfiles+0x5c>
-    4230:	4491                	li	s1,4
+    4804:	2485                	addiw	s1,s1,1
+    4806:	0921                	addi	s2,s2,8
+    4808:	ff4490e3          	bne	s1,s4,47e8 <fourfiles+0x5c>
+    480c:	4491                	li	s1,4
     wait(&xstatus);
-    4232:	f6c40513          	addi	a0,s0,-148
-    4236:	00001097          	auipc	ra,0x1
-    423a:	13c080e7          	jalr	316(ra) # 5372 <wait>
+    480e:	f6c40513          	addi	a0,s0,-148
+    4812:	00001097          	auipc	ra,0x1
+    4816:	038080e7          	jalr	56(ra) # 584a <wait>
     if(xstatus != 0)
-    423e:	f6c42b03          	lw	s6,-148(s0)
-    4242:	0c0b1e63          	bnez	s6,431e <fourfiles+0x16e>
+    481a:	f6c42b03          	lw	s6,-148(s0)
+    481e:	0c0b1e63          	bnez	s6,48fa <fourfiles+0x16e>
   for(pi = 0; pi < NCHILD; pi++){
-    4246:	34fd                	addiw	s1,s1,-1
-    4248:	f4ed                	bnez	s1,4232 <fourfiles+0x82>
-    424a:	03000b93          	li	s7,48
+    4822:	34fd                	addiw	s1,s1,-1
+    4824:	f4ed                	bnez	s1,480e <fourfiles+0x82>
+    4826:	03000b93          	li	s7,48
     while((n = read(fd, buf, sizeof(buf))) > 0){
-    424e:	00007a17          	auipc	s4,0x7
-    4252:	532a0a13          	addi	s4,s4,1330 # b780 <buf>
-    4256:	00007a97          	auipc	s5,0x7
-    425a:	52ba8a93          	addi	s5,s5,1323 # b781 <buf+0x1>
+    482a:	00007a17          	auipc	s4,0x7
+    482e:	5bea0a13          	addi	s4,s4,1470 # bde8 <buf>
+    4832:	00007a97          	auipc	s5,0x7
+    4836:	5b7a8a93          	addi	s5,s5,1463 # bde9 <buf+0x1>
     if(total != N*SZ){
-    425e:	6d85                	lui	s11,0x1
-    4260:	770d8d93          	addi	s11,s11,1904 # 1770 <pipe1+0x2c>
+    483a:	6d85                	lui	s11,0x1
+    483c:	770d8d93          	addi	s11,s11,1904 # 1770 <pipe1+0x34>
   for(i = 0; i < NCHILD; i++){
-    4264:	03400d13          	li	s10,52
-    4268:	aa1d                	j	439e <fourfiles+0x1ee>
+    4840:	03400d13          	li	s10,52
+    4844:	aa1d                	j	497a <fourfiles+0x1ee>
       printf("fork failed\n", s);
-    426a:	f5843583          	ld	a1,-168(s0)
-    426e:	00002517          	auipc	a0,0x2
-    4272:	29a50513          	addi	a0,a0,666 # 6508 <malloc+0xd6c>
-    4276:	00001097          	auipc	ra,0x1
-    427a:	46e080e7          	jalr	1134(ra) # 56e4 <printf>
-      exit(1);
-    427e:	4505                	li	a0,1
-    4280:	00001097          	auipc	ra,0x1
-    4284:	0ea080e7          	jalr	234(ra) # 536a <exit>
+    4846:	f5843583          	ld	a1,-168(s0)
+    484a:	00002517          	auipc	a0,0x2
+    484e:	1d650513          	addi	a0,a0,470 # 6a20 <malloc+0xd9c>
+    4852:	00001097          	auipc	ra,0x1
+    4856:	37a080e7          	jalr	890(ra) # 5bcc <printf>
+      exit(1);
+    485a:	4505                	li	a0,1
+    485c:	00001097          	auipc	ra,0x1
+    4860:	fe6080e7          	jalr	-26(ra) # 5842 <exit>
       fd = open(fname, O_CREATE | O_RDWR);
-    4288:	20200593          	li	a1,514
-    428c:	854e                	mv	a0,s3
-    428e:	00001097          	auipc	ra,0x1
-    4292:	11c080e7          	jalr	284(ra) # 53aa <open>
-    4296:	892a                	mv	s2,a0
+    4864:	20200593          	li	a1,514
+    4868:	854e                	mv	a0,s3
+    486a:	00001097          	auipc	ra,0x1
+    486e:	018080e7          	jalr	24(ra) # 5882 <open>
+    4872:	892a                	mv	s2,a0
       if(fd < 0){
-    4298:	04054763          	bltz	a0,42e6 <fourfiles+0x136>
+    4874:	04054763          	bltz	a0,48c2 <fourfiles+0x136>
       memset(buf, '0'+pi, SZ);
-    429c:	1f400613          	li	a2,500
-    42a0:	0304859b          	addiw	a1,s1,48
-    42a4:	00007517          	auipc	a0,0x7
-    42a8:	4dc50513          	addi	a0,a0,1244 # b780 <buf>
-    42ac:	00001097          	auipc	ra,0x1
-    42b0:	ec4080e7          	jalr	-316(ra) # 5170 <memset>
-    42b4:	44b1                	li	s1,12
+    4878:	1f400613          	li	a2,500
+    487c:	0304859b          	addiw	a1,s1,48
+    4880:	00007517          	auipc	a0,0x7
+    4884:	56850513          	addi	a0,a0,1384 # bde8 <buf>
+    4888:	00001097          	auipc	ra,0x1
+    488c:	dc0080e7          	jalr	-576(ra) # 5648 <memset>
+    4890:	44b1                	li	s1,12
         if((n = write(fd, buf, SZ)) != SZ){
-    42b6:	00007997          	auipc	s3,0x7
-    42ba:	4ca98993          	addi	s3,s3,1226 # b780 <buf>
-    42be:	1f400613          	li	a2,500
-    42c2:	85ce                	mv	a1,s3
-    42c4:	854a                	mv	a0,s2
-    42c6:	00001097          	auipc	ra,0x1
-    42ca:	0c4080e7          	jalr	196(ra) # 538a <write>
-    42ce:	85aa                	mv	a1,a0
-    42d0:	1f400793          	li	a5,500
-    42d4:	02f51863          	bne	a0,a5,4304 <fourfiles+0x154>
+    4892:	00007997          	auipc	s3,0x7
+    4896:	55698993          	addi	s3,s3,1366 # bde8 <buf>
+    489a:	1f400613          	li	a2,500
+    489e:	85ce                	mv	a1,s3
+    48a0:	854a                	mv	a0,s2
+    48a2:	00001097          	auipc	ra,0x1
+    48a6:	fc0080e7          	jalr	-64(ra) # 5862 <write>
+    48aa:	85aa                	mv	a1,a0
+    48ac:	1f400793          	li	a5,500
+    48b0:	02f51863          	bne	a0,a5,48e0 <fourfiles+0x154>
       for(i = 0; i < N; i++){
-    42d8:	34fd                	addiw	s1,s1,-1
-    42da:	f0f5                	bnez	s1,42be <fourfiles+0x10e>
+    48b4:	34fd                	addiw	s1,s1,-1
+    48b6:	f0f5                	bnez	s1,489a <fourfiles+0x10e>
       exit(0);
-    42dc:	4501                	li	a0,0
-    42de:	00001097          	auipc	ra,0x1
-    42e2:	08c080e7          	jalr	140(ra) # 536a <exit>
+    48b8:	4501                	li	a0,0
+    48ba:	00001097          	auipc	ra,0x1
+    48be:	f88080e7          	jalr	-120(ra) # 5842 <exit>
         printf("create failed\n", s);
-    42e6:	f5843583          	ld	a1,-168(s0)
-    42ea:	00003517          	auipc	a0,0x3
-    42ee:	10650513          	addi	a0,a0,262 # 73f0 <malloc+0x1c54>
-    42f2:	00001097          	auipc	ra,0x1
-    42f6:	3f2080e7          	jalr	1010(ra) # 56e4 <printf>
+    48c2:	f5843583          	ld	a1,-168(s0)
+    48c6:	00003517          	auipc	a0,0x3
+    48ca:	16250513          	addi	a0,a0,354 # 7a28 <malloc+0x1da4>
+    48ce:	00001097          	auipc	ra,0x1
+    48d2:	2fe080e7          	jalr	766(ra) # 5bcc <printf>
         exit(1);
-    42fa:	4505                	li	a0,1
-    42fc:	00001097          	auipc	ra,0x1
-    4300:	06e080e7          	jalr	110(ra) # 536a <exit>
+    48d6:	4505                	li	a0,1
+    48d8:	00001097          	auipc	ra,0x1
+    48dc:	f6a080e7          	jalr	-150(ra) # 5842 <exit>
           printf("write failed %d\n", n);
-    4304:	00003517          	auipc	a0,0x3
-    4308:	0fc50513          	addi	a0,a0,252 # 7400 <malloc+0x1c64>
-    430c:	00001097          	auipc	ra,0x1
-    4310:	3d8080e7          	jalr	984(ra) # 56e4 <printf>
+    48e0:	00003517          	auipc	a0,0x3
+    48e4:	15850513          	addi	a0,a0,344 # 7a38 <malloc+0x1db4>
+    48e8:	00001097          	auipc	ra,0x1
+    48ec:	2e4080e7          	jalr	740(ra) # 5bcc <printf>
           exit(1);
-    4314:	4505                	li	a0,1
-    4316:	00001097          	auipc	ra,0x1
-    431a:	054080e7          	jalr	84(ra) # 536a <exit>
+    48f0:	4505                	li	a0,1
+    48f2:	00001097          	auipc	ra,0x1
+    48f6:	f50080e7          	jalr	-176(ra) # 5842 <exit>
       exit(xstatus);
-    431e:	855a                	mv	a0,s6
-    4320:	00001097          	auipc	ra,0x1
-    4324:	04a080e7          	jalr	74(ra) # 536a <exit>
+    48fa:	855a                	mv	a0,s6
+    48fc:	00001097          	auipc	ra,0x1
+    4900:	f46080e7          	jalr	-186(ra) # 5842 <exit>
           printf("wrong char\n", s);
-    4328:	f5843583          	ld	a1,-168(s0)
-    432c:	00003517          	auipc	a0,0x3
-    4330:	0ec50513          	addi	a0,a0,236 # 7418 <malloc+0x1c7c>
-    4334:	00001097          	auipc	ra,0x1
-    4338:	3b0080e7          	jalr	944(ra) # 56e4 <printf>
+    4904:	f5843583          	ld	a1,-168(s0)
+    4908:	00003517          	auipc	a0,0x3
+    490c:	14850513          	addi	a0,a0,328 # 7a50 <malloc+0x1dcc>
+    4910:	00001097          	auipc	ra,0x1
+    4914:	2bc080e7          	jalr	700(ra) # 5bcc <printf>
           exit(1);
-    433c:	4505                	li	a0,1
-    433e:	00001097          	auipc	ra,0x1
-    4342:	02c080e7          	jalr	44(ra) # 536a <exit>
+    4918:	4505                	li	a0,1
+    491a:	00001097          	auipc	ra,0x1
+    491e:	f28080e7          	jalr	-216(ra) # 5842 <exit>
       total += n;
-    4346:	00a9093b          	addw	s2,s2,a0
+    4922:	00a9093b          	addw	s2,s2,a0
     while((n = read(fd, buf, sizeof(buf))) > 0){
-    434a:	660d                	lui	a2,0x3
-    434c:	85d2                	mv	a1,s4
-    434e:	854e                	mv	a0,s3
-    4350:	00001097          	auipc	ra,0x1
-    4354:	032080e7          	jalr	50(ra) # 5382 <read>
-    4358:	02a05363          	blez	a0,437e <fourfiles+0x1ce>
-    435c:	00007797          	auipc	a5,0x7
-    4360:	42478793          	addi	a5,a5,1060 # b780 <buf>
-    4364:	fff5069b          	addiw	a3,a0,-1
-    4368:	1682                	slli	a3,a3,0x20
-    436a:	9281                	srli	a3,a3,0x20
-    436c:	96d6                	add	a3,a3,s5
+    4926:	660d                	lui	a2,0x3
+    4928:	85d2                	mv	a1,s4
+    492a:	854e                	mv	a0,s3
+    492c:	00001097          	auipc	ra,0x1
+    4930:	f2e080e7          	jalr	-210(ra) # 585a <read>
+    4934:	02a05363          	blez	a0,495a <fourfiles+0x1ce>
+    4938:	00007797          	auipc	a5,0x7
+    493c:	4b078793          	addi	a5,a5,1200 # bde8 <buf>
+    4940:	fff5069b          	addiw	a3,a0,-1
+    4944:	1682                	slli	a3,a3,0x20
+    4946:	9281                	srli	a3,a3,0x20
+    4948:	96d6                	add	a3,a3,s5
         if(buf[j] != '0'+i){
-    436e:	0007c703          	lbu	a4,0(a5)
-    4372:	fa971be3          	bne	a4,s1,4328 <fourfiles+0x178>
+    494a:	0007c703          	lbu	a4,0(a5)
+    494e:	fa971be3          	bne	a4,s1,4904 <fourfiles+0x178>
       for(j = 0; j < n; j++){
-    4376:	0785                	addi	a5,a5,1
-    4378:	fed79be3          	bne	a5,a3,436e <fourfiles+0x1be>
-    437c:	b7e9                	j	4346 <fourfiles+0x196>
+    4952:	0785                	addi	a5,a5,1
+    4954:	fed79be3          	bne	a5,a3,494a <fourfiles+0x1be>
+    4958:	b7e9                	j	4922 <fourfiles+0x196>
     close(fd);
-    437e:	854e                	mv	a0,s3
-    4380:	00001097          	auipc	ra,0x1
-    4384:	012080e7          	jalr	18(ra) # 5392 <close>
+    495a:	854e                	mv	a0,s3
+    495c:	00001097          	auipc	ra,0x1
+    4960:	f0e080e7          	jalr	-242(ra) # 586a <close>
     if(total != N*SZ){
-    4388:	03b91863          	bne	s2,s11,43b8 <fourfiles+0x208>
+    4964:	03b91863          	bne	s2,s11,4994 <fourfiles+0x208>
     unlink(fname);
-    438c:	8566                	mv	a0,s9
-    438e:	00001097          	auipc	ra,0x1
-    4392:	02c080e7          	jalr	44(ra) # 53ba <unlink>
+    4968:	8566                	mv	a0,s9
+    496a:	00001097          	auipc	ra,0x1
+    496e:	f28080e7          	jalr	-216(ra) # 5892 <unlink>
   for(i = 0; i < NCHILD; i++){
-    4396:	0c21                	addi	s8,s8,8
-    4398:	2b85                	addiw	s7,s7,1
-    439a:	03ab8d63          	beq	s7,s10,43d4 <fourfiles+0x224>
+    4972:	0c21                	addi	s8,s8,8
+    4974:	2b85                	addiw	s7,s7,1
+    4976:	03ab8d63          	beq	s7,s10,49b0 <fourfiles+0x224>
     fname = names[i];
-    439e:	000c3c83          	ld	s9,0(s8)
+    497a:	000c3c83          	ld	s9,0(s8)
     fd = open(fname, 0);
-    43a2:	4581                	li	a1,0
-    43a4:	8566                	mv	a0,s9
-    43a6:	00001097          	auipc	ra,0x1
-    43aa:	004080e7          	jalr	4(ra) # 53aa <open>
-    43ae:	89aa                	mv	s3,a0
+    497e:	4581                	li	a1,0
+    4980:	8566                	mv	a0,s9
+    4982:	00001097          	auipc	ra,0x1
+    4986:	f00080e7          	jalr	-256(ra) # 5882 <open>
+    498a:	89aa                	mv	s3,a0
     total = 0;
-    43b0:	895a                	mv	s2,s6
+    498c:	895a                	mv	s2,s6
         if(buf[j] != '0'+i){
-    43b2:	000b849b          	sext.w	s1,s7
+    498e:	000b849b          	sext.w	s1,s7
     while((n = read(fd, buf, sizeof(buf))) > 0){
-    43b6:	bf51                	j	434a <fourfiles+0x19a>
+    4992:	bf51                	j	4926 <fourfiles+0x19a>
       printf("wrong length %d\n", total);
-    43b8:	85ca                	mv	a1,s2
-    43ba:	00003517          	auipc	a0,0x3
-    43be:	06e50513          	addi	a0,a0,110 # 7428 <malloc+0x1c8c>
-    43c2:	00001097          	auipc	ra,0x1
-    43c6:	322080e7          	jalr	802(ra) # 56e4 <printf>
-      exit(1);
-    43ca:	4505                	li	a0,1
-    43cc:	00001097          	auipc	ra,0x1
-    43d0:	f9e080e7          	jalr	-98(ra) # 536a <exit>
-}
-    43d4:	70aa                	ld	ra,168(sp)
-    43d6:	740a                	ld	s0,160(sp)
-    43d8:	64ea                	ld	s1,152(sp)
-    43da:	694a                	ld	s2,144(sp)
-    43dc:	69aa                	ld	s3,136(sp)
-    43de:	6a0a                	ld	s4,128(sp)
-    43e0:	7ae6                	ld	s5,120(sp)
-    43e2:	7b46                	ld	s6,112(sp)
-    43e4:	7ba6                	ld	s7,104(sp)
-    43e6:	7c06                	ld	s8,96(sp)
-    43e8:	6ce6                	ld	s9,88(sp)
-    43ea:	6d46                	ld	s10,80(sp)
-    43ec:	6da6                	ld	s11,72(sp)
-    43ee:	614d                	addi	sp,sp,176
-    43f0:	8082                	ret
-
-00000000000043f2 <concreate>:
-{
-    43f2:	7135                	addi	sp,sp,-160
-    43f4:	ed06                	sd	ra,152(sp)
-    43f6:	e922                	sd	s0,144(sp)
-    43f8:	e526                	sd	s1,136(sp)
-    43fa:	e14a                	sd	s2,128(sp)
-    43fc:	fcce                	sd	s3,120(sp)
-    43fe:	f8d2                	sd	s4,112(sp)
-    4400:	f4d6                	sd	s5,104(sp)
-    4402:	f0da                	sd	s6,96(sp)
-    4404:	ecde                	sd	s7,88(sp)
-    4406:	1100                	addi	s0,sp,160
-    4408:	89aa                	mv	s3,a0
+    4994:	85ca                	mv	a1,s2
+    4996:	00003517          	auipc	a0,0x3
+    499a:	0ca50513          	addi	a0,a0,202 # 7a60 <malloc+0x1ddc>
+    499e:	00001097          	auipc	ra,0x1
+    49a2:	22e080e7          	jalr	558(ra) # 5bcc <printf>
+      exit(1);
+    49a6:	4505                	li	a0,1
+    49a8:	00001097          	auipc	ra,0x1
+    49ac:	e9a080e7          	jalr	-358(ra) # 5842 <exit>
+}
+    49b0:	70aa                	ld	ra,168(sp)
+    49b2:	740a                	ld	s0,160(sp)
+    49b4:	64ea                	ld	s1,152(sp)
+    49b6:	694a                	ld	s2,144(sp)
+    49b8:	69aa                	ld	s3,136(sp)
+    49ba:	6a0a                	ld	s4,128(sp)
+    49bc:	7ae6                	ld	s5,120(sp)
+    49be:	7b46                	ld	s6,112(sp)
+    49c0:	7ba6                	ld	s7,104(sp)
+    49c2:	7c06                	ld	s8,96(sp)
+    49c4:	6ce6                	ld	s9,88(sp)
+    49c6:	6d46                	ld	s10,80(sp)
+    49c8:	6da6                	ld	s11,72(sp)
+    49ca:	614d                	addi	sp,sp,176
+    49cc:	8082                	ret
+
+00000000000049ce <concreate>:
+{
+    49ce:	7135                	addi	sp,sp,-160
+    49d0:	ed06                	sd	ra,152(sp)
+    49d2:	e922                	sd	s0,144(sp)
+    49d4:	e526                	sd	s1,136(sp)
+    49d6:	e14a                	sd	s2,128(sp)
+    49d8:	fcce                	sd	s3,120(sp)
+    49da:	f8d2                	sd	s4,112(sp)
+    49dc:	f4d6                	sd	s5,104(sp)
+    49de:	f0da                	sd	s6,96(sp)
+    49e0:	ecde                	sd	s7,88(sp)
+    49e2:	1100                	addi	s0,sp,160
+    49e4:	89aa                	mv	s3,a0
   file[0] = 'C';
-    440a:	04300793          	li	a5,67
-    440e:	faf40423          	sb	a5,-88(s0)
+    49e6:	04300793          	li	a5,67
+    49ea:	faf40423          	sb	a5,-88(s0)
   file[2] = '\0';
-    4412:	fa040523          	sb	zero,-86(s0)
+    49ee:	fa040523          	sb	zero,-86(s0)
   for(i = 0; i < N; i++){
-    4416:	4901                	li	s2,0
+    49f2:	4901                	li	s2,0
     if(pid && (i % 3) == 1){
-    4418:	4b0d                	li	s6,3
-    441a:	4a85                	li	s5,1
+    49f4:	4b0d                	li	s6,3
+    49f6:	4a85                	li	s5,1
       link("C0", file);
-    441c:	00003b97          	auipc	s7,0x3
-    4420:	024b8b93          	addi	s7,s7,36 # 7440 <malloc+0x1ca4>
+    49f8:	00003b97          	auipc	s7,0x3
+    49fc:	080b8b93          	addi	s7,s7,128 # 7a78 <malloc+0x1df4>
   for(i = 0; i < N; i++){
-    4424:	02800a13          	li	s4,40
-    4428:	acc9                	j	46fa <concreate+0x308>
+    4a00:	02800a13          	li	s4,40
+    4a04:	acc9                	j	4cd6 <concreate+0x308>
       link("C0", file);
-    442a:	fa840593          	addi	a1,s0,-88
-    442e:	855e                	mv	a0,s7
-    4430:	00001097          	auipc	ra,0x1
-    4434:	f9a080e7          	jalr	-102(ra) # 53ca <link>
+    4a06:	fa840593          	addi	a1,s0,-88
+    4a0a:	855e                	mv	a0,s7
+    4a0c:	00001097          	auipc	ra,0x1
+    4a10:	e96080e7          	jalr	-362(ra) # 58a2 <link>
     if(pid == 0) {
-    4438:	a465                	j	46e0 <concreate+0x2ee>
+    4a14:	a465                	j	4cbc <concreate+0x2ee>
     } else if(pid == 0 && (i % 5) == 1){
-    443a:	4795                	li	a5,5
-    443c:	02f9693b          	remw	s2,s2,a5
-    4440:	4785                	li	a5,1
-    4442:	02f90b63          	beq	s2,a5,4478 <concreate+0x86>
+    4a16:	4795                	li	a5,5
+    4a18:	02f9693b          	remw	s2,s2,a5
+    4a1c:	4785                	li	a5,1
+    4a1e:	02f90b63          	beq	s2,a5,4a54 <concreate+0x86>
       fd = open(file, O_CREATE | O_RDWR);
-    4446:	20200593          	li	a1,514
-    444a:	fa840513          	addi	a0,s0,-88
-    444e:	00001097          	auipc	ra,0x1
-    4452:	f5c080e7          	jalr	-164(ra) # 53aa <open>
+    4a22:	20200593          	li	a1,514
+    4a26:	fa840513          	addi	a0,s0,-88
+    4a2a:	00001097          	auipc	ra,0x1
+    4a2e:	e58080e7          	jalr	-424(ra) # 5882 <open>
       if(fd < 0){
-    4456:	26055c63          	bgez	a0,46ce <concreate+0x2dc>
+    4a32:	26055c63          	bgez	a0,4caa <concreate+0x2dc>
         printf("concreate create %s failed\n", file);
-    445a:	fa840593          	addi	a1,s0,-88
-    445e:	00003517          	auipc	a0,0x3
-    4462:	fea50513          	addi	a0,a0,-22 # 7448 <malloc+0x1cac>
-    4466:	00001097          	auipc	ra,0x1
-    446a:	27e080e7          	jalr	638(ra) # 56e4 <printf>
+    4a36:	fa840593          	addi	a1,s0,-88
+    4a3a:	00003517          	auipc	a0,0x3
+    4a3e:	04650513          	addi	a0,a0,70 # 7a80 <malloc+0x1dfc>
+    4a42:	00001097          	auipc	ra,0x1
+    4a46:	18a080e7          	jalr	394(ra) # 5bcc <printf>
         exit(1);
-    446e:	4505                	li	a0,1
-    4470:	00001097          	auipc	ra,0x1
-    4474:	efa080e7          	jalr	-262(ra) # 536a <exit>
+    4a4a:	4505                	li	a0,1
+    4a4c:	00001097          	auipc	ra,0x1
+    4a50:	df6080e7          	jalr	-522(ra) # 5842 <exit>
       link("C0", file);
-    4478:	fa840593          	addi	a1,s0,-88
-    447c:	00003517          	auipc	a0,0x3
-    4480:	fc450513          	addi	a0,a0,-60 # 7440 <malloc+0x1ca4>
-    4484:	00001097          	auipc	ra,0x1
-    4488:	f46080e7          	jalr	-186(ra) # 53ca <link>
+    4a54:	fa840593          	addi	a1,s0,-88
+    4a58:	00003517          	auipc	a0,0x3
+    4a5c:	02050513          	addi	a0,a0,32 # 7a78 <malloc+0x1df4>
+    4a60:	00001097          	auipc	ra,0x1
+    4a64:	e42080e7          	jalr	-446(ra) # 58a2 <link>
       exit(0);
-    448c:	4501                	li	a0,0
-    448e:	00001097          	auipc	ra,0x1
-    4492:	edc080e7          	jalr	-292(ra) # 536a <exit>
+    4a68:	4501                	li	a0,0
+    4a6a:	00001097          	auipc	ra,0x1
+    4a6e:	dd8080e7          	jalr	-552(ra) # 5842 <exit>
         exit(1);
-    4496:	4505                	li	a0,1
-    4498:	00001097          	auipc	ra,0x1
-    449c:	ed2080e7          	jalr	-302(ra) # 536a <exit>
+    4a72:	4505                	li	a0,1
+    4a74:	00001097          	auipc	ra,0x1
+    4a78:	dce080e7          	jalr	-562(ra) # 5842 <exit>
   memset(fa, 0, sizeof(fa));
-    44a0:	02800613          	li	a2,40
-    44a4:	4581                	li	a1,0
-    44a6:	f8040513          	addi	a0,s0,-128
-    44aa:	00001097          	auipc	ra,0x1
-    44ae:	cc6080e7          	jalr	-826(ra) # 5170 <memset>
+    4a7c:	02800613          	li	a2,40
+    4a80:	4581                	li	a1,0
+    4a82:	f8040513          	addi	a0,s0,-128
+    4a86:	00001097          	auipc	ra,0x1
+    4a8a:	bc2080e7          	jalr	-1086(ra) # 5648 <memset>
   fd = open(".", 0);
-    44b2:	4581                	li	a1,0
-    44b4:	00002517          	auipc	a0,0x2
-    44b8:	ac450513          	addi	a0,a0,-1340 # 5f78 <malloc+0x7dc>
-    44bc:	00001097          	auipc	ra,0x1
-    44c0:	eee080e7          	jalr	-274(ra) # 53aa <open>
-    44c4:	892a                	mv	s2,a0
+    4a8e:	4581                	li	a1,0
+    4a90:	00002517          	auipc	a0,0x2
+    4a94:	9d050513          	addi	a0,a0,-1584 # 6460 <malloc+0x7dc>
+    4a98:	00001097          	auipc	ra,0x1
+    4a9c:	dea080e7          	jalr	-534(ra) # 5882 <open>
+    4aa0:	892a                	mv	s2,a0
   n = 0;
-    44c6:	8aa6                	mv	s5,s1
+    4aa2:	8aa6                	mv	s5,s1
     if(de.name[0] == 'C' && de.name[2] == '\0'){
-    44c8:	04300a13          	li	s4,67
+    4aa4:	04300a13          	li	s4,67
       if(i < 0 || i >= sizeof(fa)){
-    44cc:	02700b13          	li	s6,39
+    4aa8:	02700b13          	li	s6,39
       fa[i] = 1;
-    44d0:	4b85                	li	s7,1
+    4aac:	4b85                	li	s7,1
   while(read(fd, &de, sizeof(de)) > 0){
-    44d2:	4641                	li	a2,16
-    44d4:	f7040593          	addi	a1,s0,-144
-    44d8:	854a                	mv	a0,s2
-    44da:	00001097          	auipc	ra,0x1
-    44de:	ea8080e7          	jalr	-344(ra) # 5382 <read>
-    44e2:	08a05263          	blez	a0,4566 <concreate+0x174>
+    4aae:	4641                	li	a2,16
+    4ab0:	f7040593          	addi	a1,s0,-144
+    4ab4:	854a                	mv	a0,s2
+    4ab6:	00001097          	auipc	ra,0x1
+    4aba:	da4080e7          	jalr	-604(ra) # 585a <read>
+    4abe:	08a05263          	blez	a0,4b42 <concreate+0x174>
     if(de.inum == 0)
-    44e6:	f7045783          	lhu	a5,-144(s0)
-    44ea:	d7e5                	beqz	a5,44d2 <concreate+0xe0>
+    4ac2:	f7045783          	lhu	a5,-144(s0)
+    4ac6:	d7e5                	beqz	a5,4aae <concreate+0xe0>
     if(de.name[0] == 'C' && de.name[2] == '\0'){
-    44ec:	f7244783          	lbu	a5,-142(s0)
-    44f0:	ff4791e3          	bne	a5,s4,44d2 <concreate+0xe0>
-    44f4:	f7444783          	lbu	a5,-140(s0)
-    44f8:	ffe9                	bnez	a5,44d2 <concreate+0xe0>
+    4ac8:	f7244783          	lbu	a5,-142(s0)
+    4acc:	ff4791e3          	bne	a5,s4,4aae <concreate+0xe0>
+    4ad0:	f7444783          	lbu	a5,-140(s0)
+    4ad4:	ffe9                	bnez	a5,4aae <concreate+0xe0>
       i = de.name[1] - '0';
-    44fa:	f7344783          	lbu	a5,-141(s0)
-    44fe:	fd07879b          	addiw	a5,a5,-48
-    4502:	0007871b          	sext.w	a4,a5
+    4ad6:	f7344783          	lbu	a5,-141(s0)
+    4ada:	fd07879b          	addiw	a5,a5,-48
+    4ade:	0007871b          	sext.w	a4,a5
       if(i < 0 || i >= sizeof(fa)){
-    4506:	02eb6063          	bltu	s6,a4,4526 <concreate+0x134>
+    4ae2:	02eb6063          	bltu	s6,a4,4b02 <concreate+0x134>
       if(fa[i]){
-    450a:	fb070793          	addi	a5,a4,-80 # fb0 <bigdir+0x48>
-    450e:	97a2                	add	a5,a5,s0
-    4510:	fd07c783          	lbu	a5,-48(a5)
-    4514:	eb8d                	bnez	a5,4546 <concreate+0x154>
+    4ae6:	fb070793          	addi	a5,a4,-80 # fb0 <bigdir+0x50>
+    4aea:	97a2                	add	a5,a5,s0
+    4aec:	fd07c783          	lbu	a5,-48(a5)
+    4af0:	eb8d                	bnez	a5,4b22 <concreate+0x154>
       fa[i] = 1;
-    4516:	fb070793          	addi	a5,a4,-80
-    451a:	00878733          	add	a4,a5,s0
-    451e:	fd770823          	sb	s7,-48(a4)
+    4af2:	fb070793          	addi	a5,a4,-80
+    4af6:	00878733          	add	a4,a5,s0
+    4afa:	fd770823          	sb	s7,-48(a4)
       n++;
-    4522:	2a85                	addiw	s5,s5,1
-    4524:	b77d                	j	44d2 <concreate+0xe0>
+    4afe:	2a85                	addiw	s5,s5,1
+    4b00:	b77d                	j	4aae <concreate+0xe0>
         printf("%s: concreate weird file %s\n", s, de.name);
-    4526:	f7240613          	addi	a2,s0,-142
-    452a:	85ce                	mv	a1,s3
-    452c:	00003517          	auipc	a0,0x3
-    4530:	f3c50513          	addi	a0,a0,-196 # 7468 <malloc+0x1ccc>
-    4534:	00001097          	auipc	ra,0x1
-    4538:	1b0080e7          	jalr	432(ra) # 56e4 <printf>
+    4b02:	f7240613          	addi	a2,s0,-142
+    4b06:	85ce                	mv	a1,s3
+    4b08:	00003517          	auipc	a0,0x3
+    4b0c:	f9850513          	addi	a0,a0,-104 # 7aa0 <malloc+0x1e1c>
+    4b10:	00001097          	auipc	ra,0x1
+    4b14:	0bc080e7          	jalr	188(ra) # 5bcc <printf>
         exit(1);
-    453c:	4505                	li	a0,1
-    453e:	00001097          	auipc	ra,0x1
-    4542:	e2c080e7          	jalr	-468(ra) # 536a <exit>
+    4b18:	4505                	li	a0,1
+    4b1a:	00001097          	auipc	ra,0x1
+    4b1e:	d28080e7          	jalr	-728(ra) # 5842 <exit>
         printf("%s: concreate duplicate file %s\n", s, de.name);
-    4546:	f7240613          	addi	a2,s0,-142
-    454a:	85ce                	mv	a1,s3
-    454c:	00003517          	auipc	a0,0x3
-    4550:	f3c50513          	addi	a0,a0,-196 # 7488 <malloc+0x1cec>
-    4554:	00001097          	auipc	ra,0x1
-    4558:	190080e7          	jalr	400(ra) # 56e4 <printf>
+    4b22:	f7240613          	addi	a2,s0,-142
+    4b26:	85ce                	mv	a1,s3
+    4b28:	00003517          	auipc	a0,0x3
+    4b2c:	f9850513          	addi	a0,a0,-104 # 7ac0 <malloc+0x1e3c>
+    4b30:	00001097          	auipc	ra,0x1
+    4b34:	09c080e7          	jalr	156(ra) # 5bcc <printf>
         exit(1);
-    455c:	4505                	li	a0,1
-    455e:	00001097          	auipc	ra,0x1
-    4562:	e0c080e7          	jalr	-500(ra) # 536a <exit>
+    4b38:	4505                	li	a0,1
+    4b3a:	00001097          	auipc	ra,0x1
+    4b3e:	d08080e7          	jalr	-760(ra) # 5842 <exit>
   close(fd);
-    4566:	854a                	mv	a0,s2
-    4568:	00001097          	auipc	ra,0x1
-    456c:	e2a080e7          	jalr	-470(ra) # 5392 <close>
+    4b42:	854a                	mv	a0,s2
+    4b44:	00001097          	auipc	ra,0x1
+    4b48:	d26080e7          	jalr	-730(ra) # 586a <close>
   if(n != N){
-    4570:	02800793          	li	a5,40
-    4574:	00fa9763          	bne	s5,a5,4582 <concreate+0x190>
+    4b4c:	02800793          	li	a5,40
+    4b50:	00fa9763          	bne	s5,a5,4b5e <concreate+0x190>
     if(((i % 3) == 0 && pid == 0) ||
-    4578:	4a8d                	li	s5,3
-    457a:	4b05                	li	s6,1
+    4b54:	4a8d                	li	s5,3
+    4b56:	4b05                	li	s6,1
   for(i = 0; i < N; i++){
-    457c:	02800a13          	li	s4,40
-    4580:	a8c9                	j	4652 <concreate+0x260>
+    4b58:	02800a13          	li	s4,40
+    4b5c:	a8c9                	j	4c2e <concreate+0x260>
     printf("%s: concreate not enough files in directory listing\n", s);
-    4582:	85ce                	mv	a1,s3
-    4584:	00003517          	auipc	a0,0x3
-    4588:	f2c50513          	addi	a0,a0,-212 # 74b0 <malloc+0x1d14>
-    458c:	00001097          	auipc	ra,0x1
-    4590:	158080e7          	jalr	344(ra) # 56e4 <printf>
-    exit(1);
-    4594:	4505                	li	a0,1
-    4596:	00001097          	auipc	ra,0x1
-    459a:	dd4080e7          	jalr	-556(ra) # 536a <exit>
+    4b5e:	85ce                	mv	a1,s3
+    4b60:	00003517          	auipc	a0,0x3
+    4b64:	f8850513          	addi	a0,a0,-120 # 7ae8 <malloc+0x1e64>
+    4b68:	00001097          	auipc	ra,0x1
+    4b6c:	064080e7          	jalr	100(ra) # 5bcc <printf>
+    exit(1);
+    4b70:	4505                	li	a0,1
+    4b72:	00001097          	auipc	ra,0x1
+    4b76:	cd0080e7          	jalr	-816(ra) # 5842 <exit>
       printf("%s: fork failed\n", s);
-    459e:	85ce                	mv	a1,s3
-    45a0:	00002517          	auipc	a0,0x2
-    45a4:	b7850513          	addi	a0,a0,-1160 # 6118 <malloc+0x97c>
-    45a8:	00001097          	auipc	ra,0x1
-    45ac:	13c080e7          	jalr	316(ra) # 56e4 <printf>
-      exit(1);
-    45b0:	4505                	li	a0,1
-    45b2:	00001097          	auipc	ra,0x1
-    45b6:	db8080e7          	jalr	-584(ra) # 536a <exit>
+    4b7a:	85ce                	mv	a1,s3
+    4b7c:	00002517          	auipc	a0,0x2
+    4b80:	a8450513          	addi	a0,a0,-1404 # 6600 <malloc+0x97c>
+    4b84:	00001097          	auipc	ra,0x1
+    4b88:	048080e7          	jalr	72(ra) # 5bcc <printf>
+      exit(1);
+    4b8c:	4505                	li	a0,1
+    4b8e:	00001097          	auipc	ra,0x1
+    4b92:	cb4080e7          	jalr	-844(ra) # 5842 <exit>
       close(open(file, 0));
-    45ba:	4581                	li	a1,0
-    45bc:	fa840513          	addi	a0,s0,-88
-    45c0:	00001097          	auipc	ra,0x1
-    45c4:	dea080e7          	jalr	-534(ra) # 53aa <open>
-    45c8:	00001097          	auipc	ra,0x1
-    45cc:	dca080e7          	jalr	-566(ra) # 5392 <close>
+    4b96:	4581                	li	a1,0
+    4b98:	fa840513          	addi	a0,s0,-88
+    4b9c:	00001097          	auipc	ra,0x1
+    4ba0:	ce6080e7          	jalr	-794(ra) # 5882 <open>
+    4ba4:	00001097          	auipc	ra,0x1
+    4ba8:	cc6080e7          	jalr	-826(ra) # 586a <close>
       close(open(file, 0));
-    45d0:	4581                	li	a1,0
-    45d2:	fa840513          	addi	a0,s0,-88
-    45d6:	00001097          	auipc	ra,0x1
-    45da:	dd4080e7          	jalr	-556(ra) # 53aa <open>
-    45de:	00001097          	auipc	ra,0x1
-    45e2:	db4080e7          	jalr	-588(ra) # 5392 <close>
+    4bac:	4581                	li	a1,0
+    4bae:	fa840513          	addi	a0,s0,-88
+    4bb2:	00001097          	auipc	ra,0x1
+    4bb6:	cd0080e7          	jalr	-816(ra) # 5882 <open>
+    4bba:	00001097          	auipc	ra,0x1
+    4bbe:	cb0080e7          	jalr	-848(ra) # 586a <close>
       close(open(file, 0));
-    45e6:	4581                	li	a1,0
-    45e8:	fa840513          	addi	a0,s0,-88
-    45ec:	00001097          	auipc	ra,0x1
-    45f0:	dbe080e7          	jalr	-578(ra) # 53aa <open>
-    45f4:	00001097          	auipc	ra,0x1
-    45f8:	d9e080e7          	jalr	-610(ra) # 5392 <close>
+    4bc2:	4581                	li	a1,0
+    4bc4:	fa840513          	addi	a0,s0,-88
+    4bc8:	00001097          	auipc	ra,0x1
+    4bcc:	cba080e7          	jalr	-838(ra) # 5882 <open>
+    4bd0:	00001097          	auipc	ra,0x1
+    4bd4:	c9a080e7          	jalr	-870(ra) # 586a <close>
       close(open(file, 0));
-    45fc:	4581                	li	a1,0
-    45fe:	fa840513          	addi	a0,s0,-88
-    4602:	00001097          	auipc	ra,0x1
-    4606:	da8080e7          	jalr	-600(ra) # 53aa <open>
-    460a:	00001097          	auipc	ra,0x1
-    460e:	d88080e7          	jalr	-632(ra) # 5392 <close>
+    4bd8:	4581                	li	a1,0
+    4bda:	fa840513          	addi	a0,s0,-88
+    4bde:	00001097          	auipc	ra,0x1
+    4be2:	ca4080e7          	jalr	-860(ra) # 5882 <open>
+    4be6:	00001097          	auipc	ra,0x1
+    4bea:	c84080e7          	jalr	-892(ra) # 586a <close>
       close(open(file, 0));
-    4612:	4581                	li	a1,0
-    4614:	fa840513          	addi	a0,s0,-88
-    4618:	00001097          	auipc	ra,0x1
-    461c:	d92080e7          	jalr	-622(ra) # 53aa <open>
-    4620:	00001097          	auipc	ra,0x1
-    4624:	d72080e7          	jalr	-654(ra) # 5392 <close>
+    4bee:	4581                	li	a1,0
+    4bf0:	fa840513          	addi	a0,s0,-88
+    4bf4:	00001097          	auipc	ra,0x1
+    4bf8:	c8e080e7          	jalr	-882(ra) # 5882 <open>
+    4bfc:	00001097          	auipc	ra,0x1
+    4c00:	c6e080e7          	jalr	-914(ra) # 586a <close>
       close(open(file, 0));
-    4628:	4581                	li	a1,0
-    462a:	fa840513          	addi	a0,s0,-88
-    462e:	00001097          	auipc	ra,0x1
-    4632:	d7c080e7          	jalr	-644(ra) # 53aa <open>
-    4636:	00001097          	auipc	ra,0x1
-    463a:	d5c080e7          	jalr	-676(ra) # 5392 <close>
+    4c04:	4581                	li	a1,0
+    4c06:	fa840513          	addi	a0,s0,-88
+    4c0a:	00001097          	auipc	ra,0x1
+    4c0e:	c78080e7          	jalr	-904(ra) # 5882 <open>
+    4c12:	00001097          	auipc	ra,0x1
+    4c16:	c58080e7          	jalr	-936(ra) # 586a <close>
     if(pid == 0)
-    463e:	08090363          	beqz	s2,46c4 <concreate+0x2d2>
+    4c1a:	08090363          	beqz	s2,4ca0 <concreate+0x2d2>
       wait(0);
-    4642:	4501                	li	a0,0
-    4644:	00001097          	auipc	ra,0x1
-    4648:	d2e080e7          	jalr	-722(ra) # 5372 <wait>
+    4c1e:	4501                	li	a0,0
+    4c20:	00001097          	auipc	ra,0x1
+    4c24:	c2a080e7          	jalr	-982(ra) # 584a <wait>
   for(i = 0; i < N; i++){
-    464c:	2485                	addiw	s1,s1,1
-    464e:	0f448563          	beq	s1,s4,4738 <concreate+0x346>
+    4c28:	2485                	addiw	s1,s1,1
+    4c2a:	0f448563          	beq	s1,s4,4d14 <concreate+0x346>
     file[1] = '0' + i;
-    4652:	0304879b          	addiw	a5,s1,48
-    4656:	faf404a3          	sb	a5,-87(s0)
+    4c2e:	0304879b          	addiw	a5,s1,48
+    4c32:	faf404a3          	sb	a5,-87(s0)
     pid = fork();
-    465a:	00001097          	auipc	ra,0x1
-    465e:	d08080e7          	jalr	-760(ra) # 5362 <fork>
-    4662:	892a                	mv	s2,a0
+    4c36:	00001097          	auipc	ra,0x1
+    4c3a:	c04080e7          	jalr	-1020(ra) # 583a <fork>
+    4c3e:	892a                	mv	s2,a0
     if(pid < 0){
-    4664:	f2054de3          	bltz	a0,459e <concreate+0x1ac>
+    4c40:	f2054de3          	bltz	a0,4b7a <concreate+0x1ac>
     if(((i % 3) == 0 && pid == 0) ||
-    4668:	0354e73b          	remw	a4,s1,s5
-    466c:	00a767b3          	or	a5,a4,a0
-    4670:	2781                	sext.w	a5,a5
-    4672:	d7a1                	beqz	a5,45ba <concreate+0x1c8>
-    4674:	01671363          	bne	a4,s6,467a <concreate+0x288>
+    4c44:	0354e73b          	remw	a4,s1,s5
+    4c48:	00a767b3          	or	a5,a4,a0
+    4c4c:	2781                	sext.w	a5,a5
+    4c4e:	d7a1                	beqz	a5,4b96 <concreate+0x1c8>
+    4c50:	01671363          	bne	a4,s6,4c56 <concreate+0x288>
        ((i % 3) == 1 && pid != 0)){
-    4678:	f129                	bnez	a0,45ba <concreate+0x1c8>
+    4c54:	f129                	bnez	a0,4b96 <concreate+0x1c8>
       unlink(file);
-    467a:	fa840513          	addi	a0,s0,-88
-    467e:	00001097          	auipc	ra,0x1
-    4682:	d3c080e7          	jalr	-708(ra) # 53ba <unlink>
+    4c56:	fa840513          	addi	a0,s0,-88
+    4c5a:	00001097          	auipc	ra,0x1
+    4c5e:	c38080e7          	jalr	-968(ra) # 5892 <unlink>
       unlink(file);
-    4686:	fa840513          	addi	a0,s0,-88
-    468a:	00001097          	auipc	ra,0x1
-    468e:	d30080e7          	jalr	-720(ra) # 53ba <unlink>
+    4c62:	fa840513          	addi	a0,s0,-88
+    4c66:	00001097          	auipc	ra,0x1
+    4c6a:	c2c080e7          	jalr	-980(ra) # 5892 <unlink>
       unlink(file);
-    4692:	fa840513          	addi	a0,s0,-88
-    4696:	00001097          	auipc	ra,0x1
-    469a:	d24080e7          	jalr	-732(ra) # 53ba <unlink>
+    4c6e:	fa840513          	addi	a0,s0,-88
+    4c72:	00001097          	auipc	ra,0x1
+    4c76:	c20080e7          	jalr	-992(ra) # 5892 <unlink>
       unlink(file);
-    469e:	fa840513          	addi	a0,s0,-88
-    46a2:	00001097          	auipc	ra,0x1
-    46a6:	d18080e7          	jalr	-744(ra) # 53ba <unlink>
+    4c7a:	fa840513          	addi	a0,s0,-88
+    4c7e:	00001097          	auipc	ra,0x1
+    4c82:	c14080e7          	jalr	-1004(ra) # 5892 <unlink>
       unlink(file);
-    46aa:	fa840513          	addi	a0,s0,-88
-    46ae:	00001097          	auipc	ra,0x1
-    46b2:	d0c080e7          	jalr	-756(ra) # 53ba <unlink>
+    4c86:	fa840513          	addi	a0,s0,-88
+    4c8a:	00001097          	auipc	ra,0x1
+    4c8e:	c08080e7          	jalr	-1016(ra) # 5892 <unlink>
       unlink(file);
-    46b6:	fa840513          	addi	a0,s0,-88
-    46ba:	00001097          	auipc	ra,0x1
-    46be:	d00080e7          	jalr	-768(ra) # 53ba <unlink>
-    46c2:	bfb5                	j	463e <concreate+0x24c>
+    4c92:	fa840513          	addi	a0,s0,-88
+    4c96:	00001097          	auipc	ra,0x1
+    4c9a:	bfc080e7          	jalr	-1028(ra) # 5892 <unlink>
+    4c9e:	bfb5                	j	4c1a <concreate+0x24c>
       exit(0);
-    46c4:	4501                	li	a0,0
-    46c6:	00001097          	auipc	ra,0x1
-    46ca:	ca4080e7          	jalr	-860(ra) # 536a <exit>
+    4ca0:	4501                	li	a0,0
+    4ca2:	00001097          	auipc	ra,0x1
+    4ca6:	ba0080e7          	jalr	-1120(ra) # 5842 <exit>
       close(fd);
-    46ce:	00001097          	auipc	ra,0x1
-    46d2:	cc4080e7          	jalr	-828(ra) # 5392 <close>
+    4caa:	00001097          	auipc	ra,0x1
+    4cae:	bc0080e7          	jalr	-1088(ra) # 586a <close>
     if(pid == 0) {
-    46d6:	bb5d                	j	448c <concreate+0x9a>
+    4cb2:	bb5d                	j	4a68 <concreate+0x9a>
       close(fd);
-    46d8:	00001097          	auipc	ra,0x1
-    46dc:	cba080e7          	jalr	-838(ra) # 5392 <close>
+    4cb4:	00001097          	auipc	ra,0x1
+    4cb8:	bb6080e7          	jalr	-1098(ra) # 586a <close>
       wait(&xstatus);
-    46e0:	f6c40513          	addi	a0,s0,-148
-    46e4:	00001097          	auipc	ra,0x1
-    46e8:	c8e080e7          	jalr	-882(ra) # 5372 <wait>
+    4cbc:	f6c40513          	addi	a0,s0,-148
+    4cc0:	00001097          	auipc	ra,0x1
+    4cc4:	b8a080e7          	jalr	-1142(ra) # 584a <wait>
       if(xstatus != 0)
-    46ec:	f6c42483          	lw	s1,-148(s0)
-    46f0:	da0493e3          	bnez	s1,4496 <concreate+0xa4>
+    4cc8:	f6c42483          	lw	s1,-148(s0)
+    4ccc:	da0493e3          	bnez	s1,4a72 <concreate+0xa4>
   for(i = 0; i < N; i++){
-    46f4:	2905                	addiw	s2,s2,1
-    46f6:	db4905e3          	beq	s2,s4,44a0 <concreate+0xae>
+    4cd0:	2905                	addiw	s2,s2,1
+    4cd2:	db4905e3          	beq	s2,s4,4a7c <concreate+0xae>
     file[1] = '0' + i;
-    46fa:	0309079b          	addiw	a5,s2,48
-    46fe:	faf404a3          	sb	a5,-87(s0)
+    4cd6:	0309079b          	addiw	a5,s2,48
+    4cda:	faf404a3          	sb	a5,-87(s0)
     unlink(file);
-    4702:	fa840513          	addi	a0,s0,-88
-    4706:	00001097          	auipc	ra,0x1
-    470a:	cb4080e7          	jalr	-844(ra) # 53ba <unlink>
+    4cde:	fa840513          	addi	a0,s0,-88
+    4ce2:	00001097          	auipc	ra,0x1
+    4ce6:	bb0080e7          	jalr	-1104(ra) # 5892 <unlink>
     pid = fork();
-    470e:	00001097          	auipc	ra,0x1
-    4712:	c54080e7          	jalr	-940(ra) # 5362 <fork>
+    4cea:	00001097          	auipc	ra,0x1
+    4cee:	b50080e7          	jalr	-1200(ra) # 583a <fork>
     if(pid && (i % 3) == 1){
-    4716:	d20502e3          	beqz	a0,443a <concreate+0x48>
-    471a:	036967bb          	remw	a5,s2,s6
-    471e:	d15786e3          	beq	a5,s5,442a <concreate+0x38>
+    4cf2:	d20502e3          	beqz	a0,4a16 <concreate+0x48>
+    4cf6:	036967bb          	remw	a5,s2,s6
+    4cfa:	d15786e3          	beq	a5,s5,4a06 <concreate+0x38>
       fd = open(file, O_CREATE | O_RDWR);
-    4722:	20200593          	li	a1,514
-    4726:	fa840513          	addi	a0,s0,-88
-    472a:	00001097          	auipc	ra,0x1
-    472e:	c80080e7          	jalr	-896(ra) # 53aa <open>
+    4cfe:	20200593          	li	a1,514
+    4d02:	fa840513          	addi	a0,s0,-88
+    4d06:	00001097          	auipc	ra,0x1
+    4d0a:	b7c080e7          	jalr	-1156(ra) # 5882 <open>
       if(fd < 0){
-    4732:	fa0553e3          	bgez	a0,46d8 <concreate+0x2e6>
-    4736:	b315                	j	445a <concreate+0x68>
+    4d0e:	fa0553e3          	bgez	a0,4cb4 <concreate+0x2e6>
+    4d12:	b315                	j	4a36 <concreate+0x68>
 }
-    4738:	60ea                	ld	ra,152(sp)
-    473a:	644a                	ld	s0,144(sp)
-    473c:	64aa                	ld	s1,136(sp)
-    473e:	690a                	ld	s2,128(sp)
-    4740:	79e6                	ld	s3,120(sp)
-    4742:	7a46                	ld	s4,112(sp)
-    4744:	7aa6                	ld	s5,104(sp)
-    4746:	7b06                	ld	s6,96(sp)
-    4748:	6be6                	ld	s7,88(sp)
-    474a:	610d                	addi	sp,sp,160
-    474c:	8082                	ret
-
-000000000000474e <bigfile>:
-{
-    474e:	7139                	addi	sp,sp,-64
-    4750:	fc06                	sd	ra,56(sp)
-    4752:	f822                	sd	s0,48(sp)
-    4754:	f426                	sd	s1,40(sp)
-    4756:	f04a                	sd	s2,32(sp)
-    4758:	ec4e                	sd	s3,24(sp)
-    475a:	e852                	sd	s4,16(sp)
-    475c:	e456                	sd	s5,8(sp)
-    475e:	0080                	addi	s0,sp,64
-    4760:	8aaa                	mv	s5,a0
+    4d14:	60ea                	ld	ra,152(sp)
+    4d16:	644a                	ld	s0,144(sp)
+    4d18:	64aa                	ld	s1,136(sp)
+    4d1a:	690a                	ld	s2,128(sp)
+    4d1c:	79e6                	ld	s3,120(sp)
+    4d1e:	7a46                	ld	s4,112(sp)
+    4d20:	7aa6                	ld	s5,104(sp)
+    4d22:	7b06                	ld	s6,96(sp)
+    4d24:	6be6                	ld	s7,88(sp)
+    4d26:	610d                	addi	sp,sp,160
+    4d28:	8082                	ret
+
+0000000000004d2a <bigfile>:
+{
+    4d2a:	7139                	addi	sp,sp,-64
+    4d2c:	fc06                	sd	ra,56(sp)
+    4d2e:	f822                	sd	s0,48(sp)
+    4d30:	f426                	sd	s1,40(sp)
+    4d32:	f04a                	sd	s2,32(sp)
+    4d34:	ec4e                	sd	s3,24(sp)
+    4d36:	e852                	sd	s4,16(sp)
+    4d38:	e456                	sd	s5,8(sp)
+    4d3a:	0080                	addi	s0,sp,64
+    4d3c:	8aaa                	mv	s5,a0
   unlink("bigfile.dat");
-    4762:	00003517          	auipc	a0,0x3
-    4766:	d8650513          	addi	a0,a0,-634 # 74e8 <malloc+0x1d4c>
-    476a:	00001097          	auipc	ra,0x1
-    476e:	c50080e7          	jalr	-944(ra) # 53ba <unlink>
+    4d3e:	00003517          	auipc	a0,0x3
+    4d42:	de250513          	addi	a0,a0,-542 # 7b20 <malloc+0x1e9c>
+    4d46:	00001097          	auipc	ra,0x1
+    4d4a:	b4c080e7          	jalr	-1204(ra) # 5892 <unlink>
   fd = open("bigfile.dat", O_CREATE | O_RDWR);
-    4772:	20200593          	li	a1,514
-    4776:	00003517          	auipc	a0,0x3
-    477a:	d7250513          	addi	a0,a0,-654 # 74e8 <malloc+0x1d4c>
-    477e:	00001097          	auipc	ra,0x1
-    4782:	c2c080e7          	jalr	-980(ra) # 53aa <open>
-    4786:	89aa                	mv	s3,a0
+    4d4e:	20200593          	li	a1,514
+    4d52:	00003517          	auipc	a0,0x3
+    4d56:	dce50513          	addi	a0,a0,-562 # 7b20 <malloc+0x1e9c>
+    4d5a:	00001097          	auipc	ra,0x1
+    4d5e:	b28080e7          	jalr	-1240(ra) # 5882 <open>
+    4d62:	89aa                	mv	s3,a0
   for(i = 0; i < N; i++){
-    4788:	4481                	li	s1,0
+    4d64:	4481                	li	s1,0
     memset(buf, i, SZ);
-    478a:	00007917          	auipc	s2,0x7
-    478e:	ff690913          	addi	s2,s2,-10 # b780 <buf>
+    4d66:	00007917          	auipc	s2,0x7
+    4d6a:	08290913          	addi	s2,s2,130 # bde8 <buf>
   for(i = 0; i < N; i++){
-    4792:	4a51                	li	s4,20
+    4d6e:	4a51                	li	s4,20
   if(fd < 0){
-    4794:	0a054063          	bltz	a0,4834 <bigfile+0xe6>
+    4d70:	0a054063          	bltz	a0,4e10 <bigfile+0xe6>
     memset(buf, i, SZ);
-    4798:	25800613          	li	a2,600
-    479c:	85a6                	mv	a1,s1
-    479e:	854a                	mv	a0,s2
-    47a0:	00001097          	auipc	ra,0x1
-    47a4:	9d0080e7          	jalr	-1584(ra) # 5170 <memset>
+    4d74:	25800613          	li	a2,600
+    4d78:	85a6                	mv	a1,s1
+    4d7a:	854a                	mv	a0,s2
+    4d7c:	00001097          	auipc	ra,0x1
+    4d80:	8cc080e7          	jalr	-1844(ra) # 5648 <memset>
     if(write(fd, buf, SZ) != SZ){
-    47a8:	25800613          	li	a2,600
-    47ac:	85ca                	mv	a1,s2
-    47ae:	854e                	mv	a0,s3
-    47b0:	00001097          	auipc	ra,0x1
-    47b4:	bda080e7          	jalr	-1062(ra) # 538a <write>
-    47b8:	25800793          	li	a5,600
-    47bc:	08f51a63          	bne	a0,a5,4850 <bigfile+0x102>
+    4d84:	25800613          	li	a2,600
+    4d88:	85ca                	mv	a1,s2
+    4d8a:	854e                	mv	a0,s3
+    4d8c:	00001097          	auipc	ra,0x1
+    4d90:	ad6080e7          	jalr	-1322(ra) # 5862 <write>
+    4d94:	25800793          	li	a5,600
+    4d98:	08f51a63          	bne	a0,a5,4e2c <bigfile+0x102>
   for(i = 0; i < N; i++){
-    47c0:	2485                	addiw	s1,s1,1
-    47c2:	fd449be3          	bne	s1,s4,4798 <bigfile+0x4a>
+    4d9c:	2485                	addiw	s1,s1,1
+    4d9e:	fd449be3          	bne	s1,s4,4d74 <bigfile+0x4a>
   close(fd);
-    47c6:	854e                	mv	a0,s3
-    47c8:	00001097          	auipc	ra,0x1
-    47cc:	bca080e7          	jalr	-1078(ra) # 5392 <close>
+    4da2:	854e                	mv	a0,s3
+    4da4:	00001097          	auipc	ra,0x1
+    4da8:	ac6080e7          	jalr	-1338(ra) # 586a <close>
   fd = open("bigfile.dat", 0);
-    47d0:	4581                	li	a1,0
-    47d2:	00003517          	auipc	a0,0x3
-    47d6:	d1650513          	addi	a0,a0,-746 # 74e8 <malloc+0x1d4c>
-    47da:	00001097          	auipc	ra,0x1
-    47de:	bd0080e7          	jalr	-1072(ra) # 53aa <open>
-    47e2:	8a2a                	mv	s4,a0
+    4dac:	4581                	li	a1,0
+    4dae:	00003517          	auipc	a0,0x3
+    4db2:	d7250513          	addi	a0,a0,-654 # 7b20 <malloc+0x1e9c>
+    4db6:	00001097          	auipc	ra,0x1
+    4dba:	acc080e7          	jalr	-1332(ra) # 5882 <open>
+    4dbe:	8a2a                	mv	s4,a0
   total = 0;
-    47e4:	4981                	li	s3,0
+    4dc0:	4981                	li	s3,0
   for(i = 0; ; i++){
-    47e6:	4481                	li	s1,0
+    4dc2:	4481                	li	s1,0
     cc = read(fd, buf, SZ/2);
-    47e8:	00007917          	auipc	s2,0x7
-    47ec:	f9890913          	addi	s2,s2,-104 # b780 <buf>
+    4dc4:	00007917          	auipc	s2,0x7
+    4dc8:	02490913          	addi	s2,s2,36 # bde8 <buf>
   if(fd < 0){
-    47f0:	06054e63          	bltz	a0,486c <bigfile+0x11e>
+    4dcc:	06054e63          	bltz	a0,4e48 <bigfile+0x11e>
     cc = read(fd, buf, SZ/2);
-    47f4:	12c00613          	li	a2,300
-    47f8:	85ca                	mv	a1,s2
-    47fa:	8552                	mv	a0,s4
-    47fc:	00001097          	auipc	ra,0x1
-    4800:	b86080e7          	jalr	-1146(ra) # 5382 <read>
+    4dd0:	12c00613          	li	a2,300
+    4dd4:	85ca                	mv	a1,s2
+    4dd6:	8552                	mv	a0,s4
+    4dd8:	00001097          	auipc	ra,0x1
+    4ddc:	a82080e7          	jalr	-1406(ra) # 585a <read>
     if(cc < 0){
-    4804:	08054263          	bltz	a0,4888 <bigfile+0x13a>
+    4de0:	08054263          	bltz	a0,4e64 <bigfile+0x13a>
     if(cc == 0)
-    4808:	c971                	beqz	a0,48dc <bigfile+0x18e>
+    4de4:	c971                	beqz	a0,4eb8 <bigfile+0x18e>
     if(cc != SZ/2){
-    480a:	12c00793          	li	a5,300
-    480e:	08f51b63          	bne	a0,a5,48a4 <bigfile+0x156>
+    4de6:	12c00793          	li	a5,300
+    4dea:	08f51b63          	bne	a0,a5,4e80 <bigfile+0x156>
     if(buf[0] != i/2 || buf[SZ/2-1] != i/2){
-    4812:	01f4d79b          	srliw	a5,s1,0x1f
-    4816:	9fa5                	addw	a5,a5,s1
-    4818:	4017d79b          	sraiw	a5,a5,0x1
-    481c:	00094703          	lbu	a4,0(s2)
-    4820:	0af71063          	bne	a4,a5,48c0 <bigfile+0x172>
-    4824:	12b94703          	lbu	a4,299(s2)
-    4828:	08f71c63          	bne	a4,a5,48c0 <bigfile+0x172>
+    4dee:	01f4d79b          	srliw	a5,s1,0x1f
+    4df2:	9fa5                	addw	a5,a5,s1
+    4df4:	4017d79b          	sraiw	a5,a5,0x1
+    4df8:	00094703          	lbu	a4,0(s2)
+    4dfc:	0af71063          	bne	a4,a5,4e9c <bigfile+0x172>
+    4e00:	12b94703          	lbu	a4,299(s2)
+    4e04:	08f71c63          	bne	a4,a5,4e9c <bigfile+0x172>
     total += cc;
-    482c:	12c9899b          	addiw	s3,s3,300
+    4e08:	12c9899b          	addiw	s3,s3,300
   for(i = 0; ; i++){
-    4830:	2485                	addiw	s1,s1,1
+    4e0c:	2485                	addiw	s1,s1,1
     cc = read(fd, buf, SZ/2);
-    4832:	b7c9                	j	47f4 <bigfile+0xa6>
+    4e0e:	b7c9                	j	4dd0 <bigfile+0xa6>
     printf("%s: cannot create bigfile", s);
-    4834:	85d6                	mv	a1,s5
-    4836:	00003517          	auipc	a0,0x3
-    483a:	cc250513          	addi	a0,a0,-830 # 74f8 <malloc+0x1d5c>
-    483e:	00001097          	auipc	ra,0x1
-    4842:	ea6080e7          	jalr	-346(ra) # 56e4 <printf>
-    exit(1);
-    4846:	4505                	li	a0,1
-    4848:	00001097          	auipc	ra,0x1
-    484c:	b22080e7          	jalr	-1246(ra) # 536a <exit>
+    4e10:	85d6                	mv	a1,s5
+    4e12:	00003517          	auipc	a0,0x3
+    4e16:	d1e50513          	addi	a0,a0,-738 # 7b30 <malloc+0x1eac>
+    4e1a:	00001097          	auipc	ra,0x1
+    4e1e:	db2080e7          	jalr	-590(ra) # 5bcc <printf>
+    exit(1);
+    4e22:	4505                	li	a0,1
+    4e24:	00001097          	auipc	ra,0x1
+    4e28:	a1e080e7          	jalr	-1506(ra) # 5842 <exit>
       printf("%s: write bigfile failed\n", s);
-    4850:	85d6                	mv	a1,s5
-    4852:	00003517          	auipc	a0,0x3
-    4856:	cc650513          	addi	a0,a0,-826 # 7518 <malloc+0x1d7c>
-    485a:	00001097          	auipc	ra,0x1
-    485e:	e8a080e7          	jalr	-374(ra) # 56e4 <printf>
-      exit(1);
-    4862:	4505                	li	a0,1
-    4864:	00001097          	auipc	ra,0x1
-    4868:	b06080e7          	jalr	-1274(ra) # 536a <exit>
+    4e2c:	85d6                	mv	a1,s5
+    4e2e:	00003517          	auipc	a0,0x3
+    4e32:	d2250513          	addi	a0,a0,-734 # 7b50 <malloc+0x1ecc>
+    4e36:	00001097          	auipc	ra,0x1
+    4e3a:	d96080e7          	jalr	-618(ra) # 5bcc <printf>
+      exit(1);
+    4e3e:	4505                	li	a0,1
+    4e40:	00001097          	auipc	ra,0x1
+    4e44:	a02080e7          	jalr	-1534(ra) # 5842 <exit>
     printf("%s: cannot open bigfile\n", s);
-    486c:	85d6                	mv	a1,s5
-    486e:	00003517          	auipc	a0,0x3
-    4872:	cca50513          	addi	a0,a0,-822 # 7538 <malloc+0x1d9c>
-    4876:	00001097          	auipc	ra,0x1
-    487a:	e6e080e7          	jalr	-402(ra) # 56e4 <printf>
-    exit(1);
-    487e:	4505                	li	a0,1
-    4880:	00001097          	auipc	ra,0x1
-    4884:	aea080e7          	jalr	-1302(ra) # 536a <exit>
+    4e48:	85d6                	mv	a1,s5
+    4e4a:	00003517          	auipc	a0,0x3
+    4e4e:	d2650513          	addi	a0,a0,-730 # 7b70 <malloc+0x1eec>
+    4e52:	00001097          	auipc	ra,0x1
+    4e56:	d7a080e7          	jalr	-646(ra) # 5bcc <printf>
+    exit(1);
+    4e5a:	4505                	li	a0,1
+    4e5c:	00001097          	auipc	ra,0x1
+    4e60:	9e6080e7          	jalr	-1562(ra) # 5842 <exit>
       printf("%s: read bigfile failed\n", s);
-    4888:	85d6                	mv	a1,s5
-    488a:	00003517          	auipc	a0,0x3
-    488e:	cce50513          	addi	a0,a0,-818 # 7558 <malloc+0x1dbc>
-    4892:	00001097          	auipc	ra,0x1
-    4896:	e52080e7          	jalr	-430(ra) # 56e4 <printf>
-      exit(1);
-    489a:	4505                	li	a0,1
-    489c:	00001097          	auipc	ra,0x1
-    48a0:	ace080e7          	jalr	-1330(ra) # 536a <exit>
+    4e64:	85d6                	mv	a1,s5
+    4e66:	00003517          	auipc	a0,0x3
+    4e6a:	d2a50513          	addi	a0,a0,-726 # 7b90 <malloc+0x1f0c>
+    4e6e:	00001097          	auipc	ra,0x1
+    4e72:	d5e080e7          	jalr	-674(ra) # 5bcc <printf>
+      exit(1);
+    4e76:	4505                	li	a0,1
+    4e78:	00001097          	auipc	ra,0x1
+    4e7c:	9ca080e7          	jalr	-1590(ra) # 5842 <exit>
       printf("%s: short read bigfile\n", s);
-    48a4:	85d6                	mv	a1,s5
-    48a6:	00003517          	auipc	a0,0x3
-    48aa:	cd250513          	addi	a0,a0,-814 # 7578 <malloc+0x1ddc>
-    48ae:	00001097          	auipc	ra,0x1
-    48b2:	e36080e7          	jalr	-458(ra) # 56e4 <printf>
-      exit(1);
-    48b6:	4505                	li	a0,1
-    48b8:	00001097          	auipc	ra,0x1
-    48bc:	ab2080e7          	jalr	-1358(ra) # 536a <exit>
+    4e80:	85d6                	mv	a1,s5
+    4e82:	00003517          	auipc	a0,0x3
+    4e86:	d2e50513          	addi	a0,a0,-722 # 7bb0 <malloc+0x1f2c>
+    4e8a:	00001097          	auipc	ra,0x1
+    4e8e:	d42080e7          	jalr	-702(ra) # 5bcc <printf>
+      exit(1);
+    4e92:	4505                	li	a0,1
+    4e94:	00001097          	auipc	ra,0x1
+    4e98:	9ae080e7          	jalr	-1618(ra) # 5842 <exit>
       printf("%s: read bigfile wrong data\n", s);
-    48c0:	85d6                	mv	a1,s5
-    48c2:	00003517          	auipc	a0,0x3
-    48c6:	cce50513          	addi	a0,a0,-818 # 7590 <malloc+0x1df4>
-    48ca:	00001097          	auipc	ra,0x1
-    48ce:	e1a080e7          	jalr	-486(ra) # 56e4 <printf>
-      exit(1);
-    48d2:	4505                	li	a0,1
-    48d4:	00001097          	auipc	ra,0x1
-    48d8:	a96080e7          	jalr	-1386(ra) # 536a <exit>
+    4e9c:	85d6                	mv	a1,s5
+    4e9e:	00003517          	auipc	a0,0x3
+    4ea2:	d2a50513          	addi	a0,a0,-726 # 7bc8 <malloc+0x1f44>
+    4ea6:	00001097          	auipc	ra,0x1
+    4eaa:	d26080e7          	jalr	-730(ra) # 5bcc <printf>
+      exit(1);
+    4eae:	4505                	li	a0,1
+    4eb0:	00001097          	auipc	ra,0x1
+    4eb4:	992080e7          	jalr	-1646(ra) # 5842 <exit>
   close(fd);
-    48dc:	8552                	mv	a0,s4
-    48de:	00001097          	auipc	ra,0x1
-    48e2:	ab4080e7          	jalr	-1356(ra) # 5392 <close>
+    4eb8:	8552                	mv	a0,s4
+    4eba:	00001097          	auipc	ra,0x1
+    4ebe:	9b0080e7          	jalr	-1616(ra) # 586a <close>
   if(total != N*SZ){
-    48e6:	678d                	lui	a5,0x3
-    48e8:	ee078793          	addi	a5,a5,-288 # 2ee0 <subdir+0x20a>
-    48ec:	02f99363          	bne	s3,a5,4912 <bigfile+0x1c4>
+    4ec2:	678d                	lui	a5,0x3
+    4ec4:	ee078793          	addi	a5,a5,-288 # 2ee0 <fourteen+0x110>
+    4ec8:	02f99363          	bne	s3,a5,4eee <bigfile+0x1c4>
   unlink("bigfile.dat");
-    48f0:	00003517          	auipc	a0,0x3
-    48f4:	bf850513          	addi	a0,a0,-1032 # 74e8 <malloc+0x1d4c>
-    48f8:	00001097          	auipc	ra,0x1
-    48fc:	ac2080e7          	jalr	-1342(ra) # 53ba <unlink>
-}
-    4900:	70e2                	ld	ra,56(sp)
-    4902:	7442                	ld	s0,48(sp)
-    4904:	74a2                	ld	s1,40(sp)
-    4906:	7902                	ld	s2,32(sp)
-    4908:	69e2                	ld	s3,24(sp)
-    490a:	6a42                	ld	s4,16(sp)
-    490c:	6aa2                	ld	s5,8(sp)
-    490e:	6121                	addi	sp,sp,64
-    4910:	8082                	ret
+    4ecc:	00003517          	auipc	a0,0x3
+    4ed0:	c5450513          	addi	a0,a0,-940 # 7b20 <malloc+0x1e9c>
+    4ed4:	00001097          	auipc	ra,0x1
+    4ed8:	9be080e7          	jalr	-1602(ra) # 5892 <unlink>
+}
+    4edc:	70e2                	ld	ra,56(sp)
+    4ede:	7442                	ld	s0,48(sp)
+    4ee0:	74a2                	ld	s1,40(sp)
+    4ee2:	7902                	ld	s2,32(sp)
+    4ee4:	69e2                	ld	s3,24(sp)
+    4ee6:	6a42                	ld	s4,16(sp)
+    4ee8:	6aa2                	ld	s5,8(sp)
+    4eea:	6121                	addi	sp,sp,64
+    4eec:	8082                	ret
     printf("%s: read bigfile wrong total\n", s);
-    4912:	85d6                	mv	a1,s5
-    4914:	00003517          	auipc	a0,0x3
-    4918:	c9c50513          	addi	a0,a0,-868 # 75b0 <malloc+0x1e14>
-    491c:	00001097          	auipc	ra,0x1
-    4920:	dc8080e7          	jalr	-568(ra) # 56e4 <printf>
-    exit(1);
-    4924:	4505                	li	a0,1
-    4926:	00001097          	auipc	ra,0x1
-    492a:	a44080e7          	jalr	-1468(ra) # 536a <exit>
-
-000000000000492e <dirtest>:
-{
-    492e:	1101                	addi	sp,sp,-32
-    4930:	ec06                	sd	ra,24(sp)
-    4932:	e822                	sd	s0,16(sp)
-    4934:	e426                	sd	s1,8(sp)
-    4936:	1000                	addi	s0,sp,32
-    4938:	84aa                	mv	s1,a0
-  printf("mkdir test\n");
-    493a:	00003517          	auipc	a0,0x3
-    493e:	c9650513          	addi	a0,a0,-874 # 75d0 <malloc+0x1e34>
-    4942:	00001097          	auipc	ra,0x1
-    4946:	da2080e7          	jalr	-606(ra) # 56e4 <printf>
-  if(mkdir("dir0") < 0){
-    494a:	00003517          	auipc	a0,0x3
-    494e:	c9650513          	addi	a0,a0,-874 # 75e0 <malloc+0x1e44>
-    4952:	00001097          	auipc	ra,0x1
-    4956:	a80080e7          	jalr	-1408(ra) # 53d2 <mkdir>
-    495a:	04054d63          	bltz	a0,49b4 <dirtest+0x86>
-  if(chdir("dir0") < 0){
-    495e:	00003517          	auipc	a0,0x3
-    4962:	c8250513          	addi	a0,a0,-894 # 75e0 <malloc+0x1e44>
-    4966:	00001097          	auipc	ra,0x1
-    496a:	a74080e7          	jalr	-1420(ra) # 53da <chdir>
-    496e:	06054163          	bltz	a0,49d0 <dirtest+0xa2>
-  if(chdir("..") < 0){
-    4972:	00002517          	auipc	a0,0x2
-    4976:	68e50513          	addi	a0,a0,1678 # 7000 <malloc+0x1864>
-    497a:	00001097          	auipc	ra,0x1
-    497e:	a60080e7          	jalr	-1440(ra) # 53da <chdir>
-    4982:	06054563          	bltz	a0,49ec <dirtest+0xbe>
-  if(unlink("dir0") < 0){
-    4986:	00003517          	auipc	a0,0x3
-    498a:	c5a50513          	addi	a0,a0,-934 # 75e0 <malloc+0x1e44>
-    498e:	00001097          	auipc	ra,0x1
-    4992:	a2c080e7          	jalr	-1492(ra) # 53ba <unlink>
-    4996:	06054963          	bltz	a0,4a08 <dirtest+0xda>
-  printf("%s: mkdir test ok\n");
-    499a:	00003517          	auipc	a0,0x3
-    499e:	c9650513          	addi	a0,a0,-874 # 7630 <malloc+0x1e94>
-    49a2:	00001097          	auipc	ra,0x1
-    49a6:	d42080e7          	jalr	-702(ra) # 56e4 <printf>
-}
-    49aa:	60e2                	ld	ra,24(sp)
-    49ac:	6442                	ld	s0,16(sp)
-    49ae:	64a2                	ld	s1,8(sp)
-    49b0:	6105                	addi	sp,sp,32
-    49b2:	8082                	ret
-    printf("%s: mkdir failed\n", s);
-    49b4:	85a6                	mv	a1,s1
-    49b6:	00002517          	auipc	a0,0x2
-    49ba:	fea50513          	addi	a0,a0,-22 # 69a0 <malloc+0x1204>
-    49be:	00001097          	auipc	ra,0x1
-    49c2:	d26080e7          	jalr	-730(ra) # 56e4 <printf>
-    exit(1);
-    49c6:	4505                	li	a0,1
-    49c8:	00001097          	auipc	ra,0x1
-    49cc:	9a2080e7          	jalr	-1630(ra) # 536a <exit>
-    printf("%s: chdir dir0 failed\n", s);
-    49d0:	85a6                	mv	a1,s1
-    49d2:	00003517          	auipc	a0,0x3
-    49d6:	c1650513          	addi	a0,a0,-1002 # 75e8 <malloc+0x1e4c>
-    49da:	00001097          	auipc	ra,0x1
-    49de:	d0a080e7          	jalr	-758(ra) # 56e4 <printf>
-    exit(1);
-    49e2:	4505                	li	a0,1
-    49e4:	00001097          	auipc	ra,0x1
-    49e8:	986080e7          	jalr	-1658(ra) # 536a <exit>
-    printf("%s: chdir .. failed\n", s);
-    49ec:	85a6                	mv	a1,s1
-    49ee:	00003517          	auipc	a0,0x3
-    49f2:	c1250513          	addi	a0,a0,-1006 # 7600 <malloc+0x1e64>
-    49f6:	00001097          	auipc	ra,0x1
-    49fa:	cee080e7          	jalr	-786(ra) # 56e4 <printf>
-    exit(1);
-    49fe:	4505                	li	a0,1
-    4a00:	00001097          	auipc	ra,0x1
-    4a04:	96a080e7          	jalr	-1686(ra) # 536a <exit>
-    printf("%s: unlink dir0 failed\n", s);
-    4a08:	85a6                	mv	a1,s1
-    4a0a:	00003517          	auipc	a0,0x3
-    4a0e:	c0e50513          	addi	a0,a0,-1010 # 7618 <malloc+0x1e7c>
-    4a12:	00001097          	auipc	ra,0x1
-    4a16:	cd2080e7          	jalr	-814(ra) # 56e4 <printf>
-    exit(1);
-    4a1a:	4505                	li	a0,1
-    4a1c:	00001097          	auipc	ra,0x1
-    4a20:	94e080e7          	jalr	-1714(ra) # 536a <exit>
-
-0000000000004a24 <fsfull>:
-{
-    4a24:	7171                	addi	sp,sp,-176
-    4a26:	f506                	sd	ra,168(sp)
-    4a28:	f122                	sd	s0,160(sp)
-    4a2a:	ed26                	sd	s1,152(sp)
-    4a2c:	e94a                	sd	s2,144(sp)
-    4a2e:	e54e                	sd	s3,136(sp)
-    4a30:	e152                	sd	s4,128(sp)
-    4a32:	fcd6                	sd	s5,120(sp)
-    4a34:	f8da                	sd	s6,112(sp)
-    4a36:	f4de                	sd	s7,104(sp)
-    4a38:	f0e2                	sd	s8,96(sp)
-    4a3a:	ece6                	sd	s9,88(sp)
-    4a3c:	e8ea                	sd	s10,80(sp)
-    4a3e:	e4ee                	sd	s11,72(sp)
-    4a40:	1900                	addi	s0,sp,176
+    4eee:	85d6                	mv	a1,s5
+    4ef0:	00003517          	auipc	a0,0x3
+    4ef4:	cf850513          	addi	a0,a0,-776 # 7be8 <malloc+0x1f64>
+    4ef8:	00001097          	auipc	ra,0x1
+    4efc:	cd4080e7          	jalr	-812(ra) # 5bcc <printf>
+    exit(1);
+    4f00:	4505                	li	a0,1
+    4f02:	00001097          	auipc	ra,0x1
+    4f06:	940080e7          	jalr	-1728(ra) # 5842 <exit>
+
+0000000000004f0a <fsfull>:
+{
+    4f0a:	7171                	addi	sp,sp,-176
+    4f0c:	f506                	sd	ra,168(sp)
+    4f0e:	f122                	sd	s0,160(sp)
+    4f10:	ed26                	sd	s1,152(sp)
+    4f12:	e94a                	sd	s2,144(sp)
+    4f14:	e54e                	sd	s3,136(sp)
+    4f16:	e152                	sd	s4,128(sp)
+    4f18:	fcd6                	sd	s5,120(sp)
+    4f1a:	f8da                	sd	s6,112(sp)
+    4f1c:	f4de                	sd	s7,104(sp)
+    4f1e:	f0e2                	sd	s8,96(sp)
+    4f20:	ece6                	sd	s9,88(sp)
+    4f22:	e8ea                	sd	s10,80(sp)
+    4f24:	e4ee                	sd	s11,72(sp)
+    4f26:	1900                	addi	s0,sp,176
   printf("fsfull test\n");
-    4a42:	00003517          	auipc	a0,0x3
-    4a46:	c0650513          	addi	a0,a0,-1018 # 7648 <malloc+0x1eac>
-    4a4a:	00001097          	auipc	ra,0x1
-    4a4e:	c9a080e7          	jalr	-870(ra) # 56e4 <printf>
+    4f28:	00003517          	auipc	a0,0x3
+    4f2c:	ce050513          	addi	a0,a0,-800 # 7c08 <malloc+0x1f84>
+    4f30:	00001097          	auipc	ra,0x1
+    4f34:	c9c080e7          	jalr	-868(ra) # 5bcc <printf>
   for(nfiles = 0; ; nfiles++){
-    4a52:	4481                	li	s1,0
+    4f38:	4481                	li	s1,0
     name[0] = 'f';
-    4a54:	06600d13          	li	s10,102
+    4f3a:	06600d13          	li	s10,102
     name[1] = '0' + nfiles / 1000;
-    4a58:	3e800c13          	li	s8,1000
+    4f3e:	3e800c13          	li	s8,1000
     name[2] = '0' + (nfiles % 1000) / 100;
-    4a5c:	06400b93          	li	s7,100
+    4f42:	06400b93          	li	s7,100
     name[3] = '0' + (nfiles % 100) / 10;
-    4a60:	4b29                	li	s6,10
-    printf("%s: writing %s\n", name);
-    4a62:	00003c97          	auipc	s9,0x3
-    4a66:	bf6c8c93          	addi	s9,s9,-1034 # 7658 <malloc+0x1ebc>
+    4f46:	4b29                	li	s6,10
+    printf("writing %s\n", name);
+    4f48:	00003c97          	auipc	s9,0x3
+    4f4c:	cd0c8c93          	addi	s9,s9,-816 # 7c18 <malloc+0x1f94>
     int total = 0;
-    4a6a:	4d81                	li	s11,0
+    4f50:	4d81                	li	s11,0
       int cc = write(fd, buf, BSIZE);
-    4a6c:	00007a17          	auipc	s4,0x7
-    4a70:	d14a0a13          	addi	s4,s4,-748 # b780 <buf>
+    4f52:	00007a17          	auipc	s4,0x7
+    4f56:	e96a0a13          	addi	s4,s4,-362 # bde8 <buf>
     name[0] = 'f';
-    4a74:	f5a40823          	sb	s10,-176(s0)
+    4f5a:	f5a40823          	sb	s10,-176(s0)
     name[1] = '0' + nfiles / 1000;
-    4a78:	0384c7bb          	divw	a5,s1,s8
-    4a7c:	0307879b          	addiw	a5,a5,48
-    4a80:	f4f408a3          	sb	a5,-175(s0)
+    4f5e:	0384c7bb          	divw	a5,s1,s8
+    4f62:	0307879b          	addiw	a5,a5,48
+    4f66:	f4f408a3          	sb	a5,-175(s0)
     name[2] = '0' + (nfiles % 1000) / 100;
-    4a84:	0384e7bb          	remw	a5,s1,s8
-    4a88:	0377c7bb          	divw	a5,a5,s7
-    4a8c:	0307879b          	addiw	a5,a5,48
-    4a90:	f4f40923          	sb	a5,-174(s0)
+    4f6a:	0384e7bb          	remw	a5,s1,s8
+    4f6e:	0377c7bb          	divw	a5,a5,s7
+    4f72:	0307879b          	addiw	a5,a5,48
+    4f76:	f4f40923          	sb	a5,-174(s0)
     name[3] = '0' + (nfiles % 100) / 10;
-    4a94:	0374e7bb          	remw	a5,s1,s7
-    4a98:	0367c7bb          	divw	a5,a5,s6
-    4a9c:	0307879b          	addiw	a5,a5,48
-    4aa0:	f4f409a3          	sb	a5,-173(s0)
+    4f7a:	0374e7bb          	remw	a5,s1,s7
+    4f7e:	0367c7bb          	divw	a5,a5,s6
+    4f82:	0307879b          	addiw	a5,a5,48
+    4f86:	f4f409a3          	sb	a5,-173(s0)
     name[4] = '0' + (nfiles % 10);
-    4aa4:	0364e7bb          	remw	a5,s1,s6
-    4aa8:	0307879b          	addiw	a5,a5,48
-    4aac:	f4f40a23          	sb	a5,-172(s0)
+    4f8a:	0364e7bb          	remw	a5,s1,s6
+    4f8e:	0307879b          	addiw	a5,a5,48
+    4f92:	f4f40a23          	sb	a5,-172(s0)
     name[5] = '\0';
-    4ab0:	f4040aa3          	sb	zero,-171(s0)
-    printf("%s: writing %s\n", name);
-    4ab4:	f5040593          	addi	a1,s0,-176
-    4ab8:	8566                	mv	a0,s9
-    4aba:	00001097          	auipc	ra,0x1
-    4abe:	c2a080e7          	jalr	-982(ra) # 56e4 <printf>
+    4f96:	f4040aa3          	sb	zero,-171(s0)
+    printf("writing %s\n", name);
+    4f9a:	f5040593          	addi	a1,s0,-176
+    4f9e:	8566                	mv	a0,s9
+    4fa0:	00001097          	auipc	ra,0x1
+    4fa4:	c2c080e7          	jalr	-980(ra) # 5bcc <printf>
     int fd = open(name, O_CREATE|O_RDWR);
-    4ac2:	20200593          	li	a1,514
-    4ac6:	f5040513          	addi	a0,s0,-176
-    4aca:	00001097          	auipc	ra,0x1
-    4ace:	8e0080e7          	jalr	-1824(ra) # 53aa <open>
-    4ad2:	892a                	mv	s2,a0
+    4fa8:	20200593          	li	a1,514
+    4fac:	f5040513          	addi	a0,s0,-176
+    4fb0:	00001097          	auipc	ra,0x1
+    4fb4:	8d2080e7          	jalr	-1838(ra) # 5882 <open>
+    4fb8:	892a                	mv	s2,a0
     if(fd < 0){
-    4ad4:	0a055663          	bgez	a0,4b80 <fsfull+0x15c>
-      printf("%s: open %s failed\n", name);
-    4ad8:	f5040593          	addi	a1,s0,-176
-    4adc:	00003517          	auipc	a0,0x3
-    4ae0:	b8c50513          	addi	a0,a0,-1140 # 7668 <malloc+0x1ecc>
-    4ae4:	00001097          	auipc	ra,0x1
-    4ae8:	c00080e7          	jalr	-1024(ra) # 56e4 <printf>
+    4fba:	0a055663          	bgez	a0,5066 <fsfull+0x15c>
+      printf("open %s failed\n", name);
+    4fbe:	f5040593          	addi	a1,s0,-176
+    4fc2:	00003517          	auipc	a0,0x3
+    4fc6:	c6650513          	addi	a0,a0,-922 # 7c28 <malloc+0x1fa4>
+    4fca:	00001097          	auipc	ra,0x1
+    4fce:	c02080e7          	jalr	-1022(ra) # 5bcc <printf>
   while(nfiles >= 0){
-    4aec:	0604c363          	bltz	s1,4b52 <fsfull+0x12e>
+    4fd2:	0604c363          	bltz	s1,5038 <fsfull+0x12e>
     name[0] = 'f';
-    4af0:	06600b13          	li	s6,102
+    4fd6:	06600b13          	li	s6,102
     name[1] = '0' + nfiles / 1000;
-    4af4:	3e800a13          	li	s4,1000
+    4fda:	3e800a13          	li	s4,1000
     name[2] = '0' + (nfiles % 1000) / 100;
-    4af8:	06400993          	li	s3,100
+    4fde:	06400993          	li	s3,100
     name[3] = '0' + (nfiles % 100) / 10;
-    4afc:	4929                	li	s2,10
+    4fe2:	4929                	li	s2,10
   while(nfiles >= 0){
-    4afe:	5afd                	li	s5,-1
+    4fe4:	5afd                	li	s5,-1
     name[0] = 'f';
-    4b00:	f5640823          	sb	s6,-176(s0)
+    4fe6:	f5640823          	sb	s6,-176(s0)
     name[1] = '0' + nfiles / 1000;
-    4b04:	0344c7bb          	divw	a5,s1,s4
-    4b08:	0307879b          	addiw	a5,a5,48
-    4b0c:	f4f408a3          	sb	a5,-175(s0)
+    4fea:	0344c7bb          	divw	a5,s1,s4
+    4fee:	0307879b          	addiw	a5,a5,48
+    4ff2:	f4f408a3          	sb	a5,-175(s0)
     name[2] = '0' + (nfiles % 1000) / 100;
-    4b10:	0344e7bb          	remw	a5,s1,s4
-    4b14:	0337c7bb          	divw	a5,a5,s3
-    4b18:	0307879b          	addiw	a5,a5,48
-    4b1c:	f4f40923          	sb	a5,-174(s0)
+    4ff6:	0344e7bb          	remw	a5,s1,s4
+    4ffa:	0337c7bb          	divw	a5,a5,s3
+    4ffe:	0307879b          	addiw	a5,a5,48
+    5002:	f4f40923          	sb	a5,-174(s0)
     name[3] = '0' + (nfiles % 100) / 10;
-    4b20:	0334e7bb          	remw	a5,s1,s3
-    4b24:	0327c7bb          	divw	a5,a5,s2
-    4b28:	0307879b          	addiw	a5,a5,48
-    4b2c:	f4f409a3          	sb	a5,-173(s0)
+    5006:	0334e7bb          	remw	a5,s1,s3
+    500a:	0327c7bb          	divw	a5,a5,s2
+    500e:	0307879b          	addiw	a5,a5,48
+    5012:	f4f409a3          	sb	a5,-173(s0)
     name[4] = '0' + (nfiles % 10);
-    4b30:	0324e7bb          	remw	a5,s1,s2
-    4b34:	0307879b          	addiw	a5,a5,48
-    4b38:	f4f40a23          	sb	a5,-172(s0)
+    5016:	0324e7bb          	remw	a5,s1,s2
+    501a:	0307879b          	addiw	a5,a5,48
+    501e:	f4f40a23          	sb	a5,-172(s0)
     name[5] = '\0';
-    4b3c:	f4040aa3          	sb	zero,-171(s0)
+    5022:	f4040aa3          	sb	zero,-171(s0)
     unlink(name);
-    4b40:	f5040513          	addi	a0,s0,-176
-    4b44:	00001097          	auipc	ra,0x1
-    4b48:	876080e7          	jalr	-1930(ra) # 53ba <unlink>
+    5026:	f5040513          	addi	a0,s0,-176
+    502a:	00001097          	auipc	ra,0x1
+    502e:	868080e7          	jalr	-1944(ra) # 5892 <unlink>
     nfiles--;
-    4b4c:	34fd                	addiw	s1,s1,-1
+    5032:	34fd                	addiw	s1,s1,-1
   while(nfiles >= 0){
-    4b4e:	fb5499e3          	bne	s1,s5,4b00 <fsfull+0xdc>
+    5034:	fb5499e3          	bne	s1,s5,4fe6 <fsfull+0xdc>
   printf("fsfull test finished\n");
-    4b52:	00003517          	auipc	a0,0x3
-    4b56:	b4650513          	addi	a0,a0,-1210 # 7698 <malloc+0x1efc>
-    4b5a:	00001097          	auipc	ra,0x1
-    4b5e:	b8a080e7          	jalr	-1142(ra) # 56e4 <printf>
-}
-    4b62:	70aa                	ld	ra,168(sp)
-    4b64:	740a                	ld	s0,160(sp)
-    4b66:	64ea                	ld	s1,152(sp)
-    4b68:	694a                	ld	s2,144(sp)
-    4b6a:	69aa                	ld	s3,136(sp)
-    4b6c:	6a0a                	ld	s4,128(sp)
-    4b6e:	7ae6                	ld	s5,120(sp)
-    4b70:	7b46                	ld	s6,112(sp)
-    4b72:	7ba6                	ld	s7,104(sp)
-    4b74:	7c06                	ld	s8,96(sp)
-    4b76:	6ce6                	ld	s9,88(sp)
-    4b78:	6d46                	ld	s10,80(sp)
-    4b7a:	6da6                	ld	s11,72(sp)
-    4b7c:	614d                	addi	sp,sp,176
-    4b7e:	8082                	ret
+    5038:	00003517          	auipc	a0,0x3
+    503c:	c1050513          	addi	a0,a0,-1008 # 7c48 <malloc+0x1fc4>
+    5040:	00001097          	auipc	ra,0x1
+    5044:	b8c080e7          	jalr	-1140(ra) # 5bcc <printf>
+}
+    5048:	70aa                	ld	ra,168(sp)
+    504a:	740a                	ld	s0,160(sp)
+    504c:	64ea                	ld	s1,152(sp)
+    504e:	694a                	ld	s2,144(sp)
+    5050:	69aa                	ld	s3,136(sp)
+    5052:	6a0a                	ld	s4,128(sp)
+    5054:	7ae6                	ld	s5,120(sp)
+    5056:	7b46                	ld	s6,112(sp)
+    5058:	7ba6                	ld	s7,104(sp)
+    505a:	7c06                	ld	s8,96(sp)
+    505c:	6ce6                	ld	s9,88(sp)
+    505e:	6d46                	ld	s10,80(sp)
+    5060:	6da6                	ld	s11,72(sp)
+    5062:	614d                	addi	sp,sp,176
+    5064:	8082                	ret
     int total = 0;
-    4b80:	89ee                	mv	s3,s11
+    5066:	89ee                	mv	s3,s11
       if(cc < BSIZE)
-    4b82:	3ff00a93          	li	s5,1023
+    5068:	3ff00a93          	li	s5,1023
       int cc = write(fd, buf, BSIZE);
-    4b86:	40000613          	li	a2,1024
-    4b8a:	85d2                	mv	a1,s4
-    4b8c:	854a                	mv	a0,s2
-    4b8e:	00000097          	auipc	ra,0x0
-    4b92:	7fc080e7          	jalr	2044(ra) # 538a <write>
+    506c:	40000613          	li	a2,1024
+    5070:	85d2                	mv	a1,s4
+    5072:	854a                	mv	a0,s2
+    5074:	00000097          	auipc	ra,0x0
+    5078:	7ee080e7          	jalr	2030(ra) # 5862 <write>
       if(cc < BSIZE)
-    4b96:	00aad563          	bge	s5,a0,4ba0 <fsfull+0x17c>
+    507c:	00aad563          	bge	s5,a0,5086 <fsfull+0x17c>
       total += cc;
-    4b9a:	00a989bb          	addw	s3,s3,a0
+    5080:	00a989bb          	addw	s3,s3,a0
     while(1){
-    4b9e:	b7e5                	j	4b86 <fsfull+0x162>
-    printf("%s: wrote %d bytes\n", total);
-    4ba0:	85ce                	mv	a1,s3
-    4ba2:	00003517          	auipc	a0,0x3
-    4ba6:	ade50513          	addi	a0,a0,-1314 # 7680 <malloc+0x1ee4>
-    4baa:	00001097          	auipc	ra,0x1
-    4bae:	b3a080e7          	jalr	-1222(ra) # 56e4 <printf>
+    5084:	b7e5                	j	506c <fsfull+0x162>
+    printf("wrote %d bytes\n", total);
+    5086:	85ce                	mv	a1,s3
+    5088:	00003517          	auipc	a0,0x3
+    508c:	bb050513          	addi	a0,a0,-1104 # 7c38 <malloc+0x1fb4>
+    5090:	00001097          	auipc	ra,0x1
+    5094:	b3c080e7          	jalr	-1220(ra) # 5bcc <printf>
     close(fd);
-    4bb2:	854a                	mv	a0,s2
-    4bb4:	00000097          	auipc	ra,0x0
-    4bb8:	7de080e7          	jalr	2014(ra) # 5392 <close>
+    5098:	854a                	mv	a0,s2
+    509a:	00000097          	auipc	ra,0x0
+    509e:	7d0080e7          	jalr	2000(ra) # 586a <close>
     if(total == 0)
-    4bbc:	f20988e3          	beqz	s3,4aec <fsfull+0xc8>
+    50a2:	f20988e3          	beqz	s3,4fd2 <fsfull+0xc8>
   for(nfiles = 0; ; nfiles++){
-    4bc0:	2485                	addiw	s1,s1,1
-    4bc2:	bd4d                	j	4a74 <fsfull+0x50>
+    50a6:	2485                	addiw	s1,s1,1
+    50a8:	bd4d                	j	4f5a <fsfull+0x50>
 
-0000000000004bc4 <rand>:
+00000000000050aa <badwrite>:
 {
-    4bc4:	1141                	addi	sp,sp,-16
-    4bc6:	e422                	sd	s0,8(sp)
-    4bc8:	0800                	addi	s0,sp,16
-  randstate = randstate * 1664525 + 1013904223;
-    4bca:	00003717          	auipc	a4,0x3
-    4bce:	38670713          	addi	a4,a4,902 # 7f50 <randstate>
-    4bd2:	6308                	ld	a0,0(a4)
-    4bd4:	001967b7          	lui	a5,0x196
-    4bd8:	60d78793          	addi	a5,a5,1549 # 19660d <__BSS_END__+0x187e7d>
-    4bdc:	02f50533          	mul	a0,a0,a5
-    4be0:	3c6ef7b7          	lui	a5,0x3c6ef
-    4be4:	35f78793          	addi	a5,a5,863 # 3c6ef35f <__BSS_END__+0x3c6e0bcf>
-    4be8:	953e                	add	a0,a0,a5
-    4bea:	e308                	sd	a0,0(a4)
-}
-    4bec:	2501                	sext.w	a0,a0
-    4bee:	6422                	ld	s0,8(sp)
-    4bf0:	0141                	addi	sp,sp,16
-    4bf2:	8082                	ret
-
-0000000000004bf4 <badwrite>:
-{
-    4bf4:	7179                	addi	sp,sp,-48
-    4bf6:	f406                	sd	ra,40(sp)
-    4bf8:	f022                	sd	s0,32(sp)
-    4bfa:	ec26                	sd	s1,24(sp)
-    4bfc:	e84a                	sd	s2,16(sp)
-    4bfe:	e44e                	sd	s3,8(sp)
-    4c00:	e052                	sd	s4,0(sp)
-    4c02:	1800                	addi	s0,sp,48
+    50aa:	7179                	addi	sp,sp,-48
+    50ac:	f406                	sd	ra,40(sp)
+    50ae:	f022                	sd	s0,32(sp)
+    50b0:	ec26                	sd	s1,24(sp)
+    50b2:	e84a                	sd	s2,16(sp)
+    50b4:	e44e                	sd	s3,8(sp)
+    50b6:	e052                	sd	s4,0(sp)
+    50b8:	1800                	addi	s0,sp,48
   unlink("junk");
-    4c04:	00003517          	auipc	a0,0x3
-    4c08:	aac50513          	addi	a0,a0,-1364 # 76b0 <malloc+0x1f14>
-    4c0c:	00000097          	auipc	ra,0x0
-    4c10:	7ae080e7          	jalr	1966(ra) # 53ba <unlink>
-    4c14:	25800913          	li	s2,600
+    50ba:	00003517          	auipc	a0,0x3
+    50be:	ba650513          	addi	a0,a0,-1114 # 7c60 <malloc+0x1fdc>
+    50c2:	00000097          	auipc	ra,0x0
+    50c6:	7d0080e7          	jalr	2000(ra) # 5892 <unlink>
+    50ca:	25800913          	li	s2,600
     int fd = open("junk", O_CREATE|O_WRONLY);
-    4c18:	00003997          	auipc	s3,0x3
-    4c1c:	a9898993          	addi	s3,s3,-1384 # 76b0 <malloc+0x1f14>
+    50ce:	00003997          	auipc	s3,0x3
+    50d2:	b9298993          	addi	s3,s3,-1134 # 7c60 <malloc+0x1fdc>
     write(fd, (char*)0xffffffffffL, 1);
-    4c20:	5a7d                	li	s4,-1
-    4c22:	018a5a13          	srli	s4,s4,0x18
+    50d6:	5a7d                	li	s4,-1
+    50d8:	018a5a13          	srli	s4,s4,0x18
     int fd = open("junk", O_CREATE|O_WRONLY);
-    4c26:	20100593          	li	a1,513
-    4c2a:	854e                	mv	a0,s3
-    4c2c:	00000097          	auipc	ra,0x0
-    4c30:	77e080e7          	jalr	1918(ra) # 53aa <open>
-    4c34:	84aa                	mv	s1,a0
+    50dc:	20100593          	li	a1,513
+    50e0:	854e                	mv	a0,s3
+    50e2:	00000097          	auipc	ra,0x0
+    50e6:	7a0080e7          	jalr	1952(ra) # 5882 <open>
+    50ea:	84aa                	mv	s1,a0
     if(fd < 0){
-    4c36:	06054b63          	bltz	a0,4cac <badwrite+0xb8>
+    50ec:	06054b63          	bltz	a0,5162 <badwrite+0xb8>
     write(fd, (char*)0xffffffffffL, 1);
-    4c3a:	4605                	li	a2,1
-    4c3c:	85d2                	mv	a1,s4
-    4c3e:	00000097          	auipc	ra,0x0
-    4c42:	74c080e7          	jalr	1868(ra) # 538a <write>
+    50f0:	4605                	li	a2,1
+    50f2:	85d2                	mv	a1,s4
+    50f4:	00000097          	auipc	ra,0x0
+    50f8:	76e080e7          	jalr	1902(ra) # 5862 <write>
     close(fd);
-    4c46:	8526                	mv	a0,s1
-    4c48:	00000097          	auipc	ra,0x0
-    4c4c:	74a080e7          	jalr	1866(ra) # 5392 <close>
+    50fc:	8526                	mv	a0,s1
+    50fe:	00000097          	auipc	ra,0x0
+    5102:	76c080e7          	jalr	1900(ra) # 586a <close>
     unlink("junk");
-    4c50:	854e                	mv	a0,s3
-    4c52:	00000097          	auipc	ra,0x0
-    4c56:	768080e7          	jalr	1896(ra) # 53ba <unlink>
+    5106:	854e                	mv	a0,s3
+    5108:	00000097          	auipc	ra,0x0
+    510c:	78a080e7          	jalr	1930(ra) # 5892 <unlink>
   for(int i = 0; i < assumed_free; i++){
-    4c5a:	397d                	addiw	s2,s2,-1
-    4c5c:	fc0915e3          	bnez	s2,4c26 <badwrite+0x32>
+    5110:	397d                	addiw	s2,s2,-1
+    5112:	fc0915e3          	bnez	s2,50dc <badwrite+0x32>
   int fd = open("junk", O_CREATE|O_WRONLY);
-    4c60:	20100593          	li	a1,513
-    4c64:	00003517          	auipc	a0,0x3
-    4c68:	a4c50513          	addi	a0,a0,-1460 # 76b0 <malloc+0x1f14>
-    4c6c:	00000097          	auipc	ra,0x0
-    4c70:	73e080e7          	jalr	1854(ra) # 53aa <open>
-    4c74:	84aa                	mv	s1,a0
+    5116:	20100593          	li	a1,513
+    511a:	00003517          	auipc	a0,0x3
+    511e:	b4650513          	addi	a0,a0,-1210 # 7c60 <malloc+0x1fdc>
+    5122:	00000097          	auipc	ra,0x0
+    5126:	760080e7          	jalr	1888(ra) # 5882 <open>
+    512a:	84aa                	mv	s1,a0
   if(fd < 0){
-    4c76:	04054863          	bltz	a0,4cc6 <badwrite+0xd2>
+    512c:	04054863          	bltz	a0,517c <badwrite+0xd2>
   if(write(fd, "x", 1) != 1){
-    4c7a:	4605                	li	a2,1
-    4c7c:	00001597          	auipc	a1,0x1
-    4c80:	cb458593          	addi	a1,a1,-844 # 5930 <malloc+0x194>
-    4c84:	00000097          	auipc	ra,0x0
-    4c88:	706080e7          	jalr	1798(ra) # 538a <write>
-    4c8c:	4785                	li	a5,1
-    4c8e:	04f50963          	beq	a0,a5,4ce0 <badwrite+0xec>
+    5130:	4605                	li	a2,1
+    5132:	00001597          	auipc	a1,0x1
+    5136:	ce658593          	addi	a1,a1,-794 # 5e18 <malloc+0x194>
+    513a:	00000097          	auipc	ra,0x0
+    513e:	728080e7          	jalr	1832(ra) # 5862 <write>
+    5142:	4785                	li	a5,1
+    5144:	04f50963          	beq	a0,a5,5196 <badwrite+0xec>
     printf("write failed\n");
-    4c92:	00003517          	auipc	a0,0x3
-    4c96:	a3e50513          	addi	a0,a0,-1474 # 76d0 <malloc+0x1f34>
-    4c9a:	00001097          	auipc	ra,0x1
-    4c9e:	a4a080e7          	jalr	-1462(ra) # 56e4 <printf>
-    exit(1);
-    4ca2:	4505                	li	a0,1
-    4ca4:	00000097          	auipc	ra,0x0
-    4ca8:	6c6080e7          	jalr	1734(ra) # 536a <exit>
+    5148:	00003517          	auipc	a0,0x3
+    514c:	b3850513          	addi	a0,a0,-1224 # 7c80 <malloc+0x1ffc>
+    5150:	00001097          	auipc	ra,0x1
+    5154:	a7c080e7          	jalr	-1412(ra) # 5bcc <printf>
+    exit(1);
+    5158:	4505                	li	a0,1
+    515a:	00000097          	auipc	ra,0x0
+    515e:	6e8080e7          	jalr	1768(ra) # 5842 <exit>
       printf("open junk failed\n");
-    4cac:	00003517          	auipc	a0,0x3
-    4cb0:	a0c50513          	addi	a0,a0,-1524 # 76b8 <malloc+0x1f1c>
-    4cb4:	00001097          	auipc	ra,0x1
-    4cb8:	a30080e7          	jalr	-1488(ra) # 56e4 <printf>
-      exit(1);
-    4cbc:	4505                	li	a0,1
-    4cbe:	00000097          	auipc	ra,0x0
-    4cc2:	6ac080e7          	jalr	1708(ra) # 536a <exit>
+    5162:	00003517          	auipc	a0,0x3
+    5166:	b0650513          	addi	a0,a0,-1274 # 7c68 <malloc+0x1fe4>
+    516a:	00001097          	auipc	ra,0x1
+    516e:	a62080e7          	jalr	-1438(ra) # 5bcc <printf>
+      exit(1);
+    5172:	4505                	li	a0,1
+    5174:	00000097          	auipc	ra,0x0
+    5178:	6ce080e7          	jalr	1742(ra) # 5842 <exit>
     printf("open junk failed\n");
-    4cc6:	00003517          	auipc	a0,0x3
-    4cca:	9f250513          	addi	a0,a0,-1550 # 76b8 <malloc+0x1f1c>
-    4cce:	00001097          	auipc	ra,0x1
-    4cd2:	a16080e7          	jalr	-1514(ra) # 56e4 <printf>
-    exit(1);
-    4cd6:	4505                	li	a0,1
-    4cd8:	00000097          	auipc	ra,0x0
-    4cdc:	692080e7          	jalr	1682(ra) # 536a <exit>
+    517c:	00003517          	auipc	a0,0x3
+    5180:	aec50513          	addi	a0,a0,-1300 # 7c68 <malloc+0x1fe4>
+    5184:	00001097          	auipc	ra,0x1
+    5188:	a48080e7          	jalr	-1464(ra) # 5bcc <printf>
+    exit(1);
+    518c:	4505                	li	a0,1
+    518e:	00000097          	auipc	ra,0x0
+    5192:	6b4080e7          	jalr	1716(ra) # 5842 <exit>
   close(fd);
-    4ce0:	8526                	mv	a0,s1
-    4ce2:	00000097          	auipc	ra,0x0
-    4ce6:	6b0080e7          	jalr	1712(ra) # 5392 <close>
+    5196:	8526                	mv	a0,s1
+    5198:	00000097          	auipc	ra,0x0
+    519c:	6d2080e7          	jalr	1746(ra) # 586a <close>
   unlink("junk");
-    4cea:	00003517          	auipc	a0,0x3
-    4cee:	9c650513          	addi	a0,a0,-1594 # 76b0 <malloc+0x1f14>
-    4cf2:	00000097          	auipc	ra,0x0
-    4cf6:	6c8080e7          	jalr	1736(ra) # 53ba <unlink>
+    51a0:	00003517          	auipc	a0,0x3
+    51a4:	ac050513          	addi	a0,a0,-1344 # 7c60 <malloc+0x1fdc>
+    51a8:	00000097          	auipc	ra,0x0
+    51ac:	6ea080e7          	jalr	1770(ra) # 5892 <unlink>
   exit(0);
-    4cfa:	4501                	li	a0,0
-    4cfc:	00000097          	auipc	ra,0x0
-    4d00:	66e080e7          	jalr	1646(ra) # 536a <exit>
+    51b0:	4501                	li	a0,0
+    51b2:	00000097          	auipc	ra,0x0
+    51b6:	690080e7          	jalr	1680(ra) # 5842 <exit>
 
-0000000000004d04 <countfree>:
+00000000000051ba <countfree>:
 // because out of memory with lazy allocation results in the process
 // taking a fault and being killed, fork and report back.
 //
 int
 countfree()
 {
-    4d04:	7139                	addi	sp,sp,-64
-    4d06:	fc06                	sd	ra,56(sp)
-    4d08:	f822                	sd	s0,48(sp)
-    4d0a:	f426                	sd	s1,40(sp)
-    4d0c:	f04a                	sd	s2,32(sp)
-    4d0e:	ec4e                	sd	s3,24(sp)
-    4d10:	0080                	addi	s0,sp,64
+    51ba:	7139                	addi	sp,sp,-64
+    51bc:	fc06                	sd	ra,56(sp)
+    51be:	f822                	sd	s0,48(sp)
+    51c0:	f426                	sd	s1,40(sp)
+    51c2:	f04a                	sd	s2,32(sp)
+    51c4:	ec4e                	sd	s3,24(sp)
+    51c6:	0080                	addi	s0,sp,64
   int fds[2];
 
   if(pipe(fds) < 0){
-    4d12:	fc840513          	addi	a0,s0,-56
-    4d16:	00000097          	auipc	ra,0x0
-    4d1a:	664080e7          	jalr	1636(ra) # 537a <pipe>
-    4d1e:	06054763          	bltz	a0,4d8c <countfree+0x88>
+    51c8:	fc840513          	addi	a0,s0,-56
+    51cc:	00000097          	auipc	ra,0x0
+    51d0:	686080e7          	jalr	1670(ra) # 5852 <pipe>
+    51d4:	06054763          	bltz	a0,5242 <countfree+0x88>
     printf("pipe() failed in countfree()\n");
     exit(1);
   }
   
   int pid = fork();
-    4d22:	00000097          	auipc	ra,0x0
-    4d26:	640080e7          	jalr	1600(ra) # 5362 <fork>
+    51d8:	00000097          	auipc	ra,0x0
+    51dc:	662080e7          	jalr	1634(ra) # 583a <fork>
 
   if(pid < 0){
-    4d2a:	06054e63          	bltz	a0,4da6 <countfree+0xa2>
+    51e0:	06054e63          	bltz	a0,525c <countfree+0xa2>
     printf("fork failed in countfree()\n");
     exit(1);
   }
 
   if(pid == 0){
-    4d2e:	ed51                	bnez	a0,4dca <countfree+0xc6>
+    51e4:	ed51                	bnez	a0,5280 <countfree+0xc6>
     close(fds[0]);
-    4d30:	fc842503          	lw	a0,-56(s0)
-    4d34:	00000097          	auipc	ra,0x0
-    4d38:	65e080e7          	jalr	1630(ra) # 5392 <close>
+    51e6:	fc842503          	lw	a0,-56(s0)
+    51ea:	00000097          	auipc	ra,0x0
+    51ee:	680080e7          	jalr	1664(ra) # 586a <close>
     
     while(1){
       uint64 a = (uint64) sbrk(4096);
       if(a == 0xffffffffffffffff){
-    4d3c:	597d                	li	s2,-1
+    51f2:	597d                	li	s2,-1
         break;
       }
 
       // modify the memory to make sure it's really allocated.
       *(char *)(a + 4096 - 1) = 1;
-    4d3e:	4485                	li	s1,1
+    51f4:	4485                	li	s1,1
 
       // report back one more page.
       if(write(fds[1], "x", 1) != 1){
-    4d40:	00001997          	auipc	s3,0x1
-    4d44:	bf098993          	addi	s3,s3,-1040 # 5930 <malloc+0x194>
+    51f6:	00001997          	auipc	s3,0x1
+    51fa:	c2298993          	addi	s3,s3,-990 # 5e18 <malloc+0x194>
       uint64 a = (uint64) sbrk(4096);
-    4d48:	6505                	lui	a0,0x1
-    4d4a:	00000097          	auipc	ra,0x0
-    4d4e:	6a8080e7          	jalr	1704(ra) # 53f2 <sbrk>
+    51fe:	6505                	lui	a0,0x1
+    5200:	00000097          	auipc	ra,0x0
+    5204:	6ca080e7          	jalr	1738(ra) # 58ca <sbrk>
       if(a == 0xffffffffffffffff){
-    4d52:	07250763          	beq	a0,s2,4dc0 <countfree+0xbc>
+    5208:	07250763          	beq	a0,s2,5276 <countfree+0xbc>
       *(char *)(a + 4096 - 1) = 1;
-    4d56:	6785                	lui	a5,0x1
-    4d58:	97aa                	add	a5,a5,a0
-    4d5a:	fe978fa3          	sb	s1,-1(a5) # fff <bigdir+0x97>
+    520c:	6785                	lui	a5,0x1
+    520e:	97aa                	add	a5,a5,a0
+    5210:	fe978fa3          	sb	s1,-1(a5) # fff <bigdir+0x9f>
       if(write(fds[1], "x", 1) != 1){
-    4d5e:	8626                	mv	a2,s1
-    4d60:	85ce                	mv	a1,s3
-    4d62:	fcc42503          	lw	a0,-52(s0)
-    4d66:	00000097          	auipc	ra,0x0
-    4d6a:	624080e7          	jalr	1572(ra) # 538a <write>
-    4d6e:	fc950de3          	beq	a0,s1,4d48 <countfree+0x44>
+    5214:	8626                	mv	a2,s1
+    5216:	85ce                	mv	a1,s3
+    5218:	fcc42503          	lw	a0,-52(s0)
+    521c:	00000097          	auipc	ra,0x0
+    5220:	646080e7          	jalr	1606(ra) # 5862 <write>
+    5224:	fc950de3          	beq	a0,s1,51fe <countfree+0x44>
         printf("write() failed in countfree()\n");
-    4d72:	00003517          	auipc	a0,0x3
-    4d76:	9ae50513          	addi	a0,a0,-1618 # 7720 <malloc+0x1f84>
-    4d7a:	00001097          	auipc	ra,0x1
-    4d7e:	96a080e7          	jalr	-1686(ra) # 56e4 <printf>
+    5228:	00003517          	auipc	a0,0x3
+    522c:	aa850513          	addi	a0,a0,-1368 # 7cd0 <malloc+0x204c>
+    5230:	00001097          	auipc	ra,0x1
+    5234:	99c080e7          	jalr	-1636(ra) # 5bcc <printf>
         exit(1);
-    4d82:	4505                	li	a0,1
-    4d84:	00000097          	auipc	ra,0x0
-    4d88:	5e6080e7          	jalr	1510(ra) # 536a <exit>
+    5238:	4505                	li	a0,1
+    523a:	00000097          	auipc	ra,0x0
+    523e:	608080e7          	jalr	1544(ra) # 5842 <exit>
     printf("pipe() failed in countfree()\n");
-    4d8c:	00003517          	auipc	a0,0x3
-    4d90:	95450513          	addi	a0,a0,-1708 # 76e0 <malloc+0x1f44>
-    4d94:	00001097          	auipc	ra,0x1
-    4d98:	950080e7          	jalr	-1712(ra) # 56e4 <printf>
-    exit(1);
-    4d9c:	4505                	li	a0,1
-    4d9e:	00000097          	auipc	ra,0x0
-    4da2:	5cc080e7          	jalr	1484(ra) # 536a <exit>
+    5242:	00003517          	auipc	a0,0x3
+    5246:	a4e50513          	addi	a0,a0,-1458 # 7c90 <malloc+0x200c>
+    524a:	00001097          	auipc	ra,0x1
+    524e:	982080e7          	jalr	-1662(ra) # 5bcc <printf>
+    exit(1);
+    5252:	4505                	li	a0,1
+    5254:	00000097          	auipc	ra,0x0
+    5258:	5ee080e7          	jalr	1518(ra) # 5842 <exit>
     printf("fork failed in countfree()\n");
-    4da6:	00003517          	auipc	a0,0x3
-    4daa:	95a50513          	addi	a0,a0,-1702 # 7700 <malloc+0x1f64>
-    4dae:	00001097          	auipc	ra,0x1
-    4db2:	936080e7          	jalr	-1738(ra) # 56e4 <printf>
-    exit(1);
-    4db6:	4505                	li	a0,1
-    4db8:	00000097          	auipc	ra,0x0
-    4dbc:	5b2080e7          	jalr	1458(ra) # 536a <exit>
+    525c:	00003517          	auipc	a0,0x3
+    5260:	a5450513          	addi	a0,a0,-1452 # 7cb0 <malloc+0x202c>
+    5264:	00001097          	auipc	ra,0x1
+    5268:	968080e7          	jalr	-1688(ra) # 5bcc <printf>
+    exit(1);
+    526c:	4505                	li	a0,1
+    526e:	00000097          	auipc	ra,0x0
+    5272:	5d4080e7          	jalr	1492(ra) # 5842 <exit>
       }
     }
 
     exit(0);
-    4dc0:	4501                	li	a0,0
-    4dc2:	00000097          	auipc	ra,0x0
-    4dc6:	5a8080e7          	jalr	1448(ra) # 536a <exit>
+    5276:	4501                	li	a0,0
+    5278:	00000097          	auipc	ra,0x0
+    527c:	5ca080e7          	jalr	1482(ra) # 5842 <exit>
   }
 
   close(fds[1]);
-    4dca:	fcc42503          	lw	a0,-52(s0)
-    4dce:	00000097          	auipc	ra,0x0
-    4dd2:	5c4080e7          	jalr	1476(ra) # 5392 <close>
+    5280:	fcc42503          	lw	a0,-52(s0)
+    5284:	00000097          	auipc	ra,0x0
+    5288:	5e6080e7          	jalr	1510(ra) # 586a <close>
 
   int n = 0;
-    4dd6:	4481                	li	s1,0
+    528c:	4481                	li	s1,0
   while(1){
     char c;
     int cc = read(fds[0], &c, 1);
-    4dd8:	4605                	li	a2,1
-    4dda:	fc740593          	addi	a1,s0,-57
-    4dde:	fc842503          	lw	a0,-56(s0)
-    4de2:	00000097          	auipc	ra,0x0
-    4de6:	5a0080e7          	jalr	1440(ra) # 5382 <read>
+    528e:	4605                	li	a2,1
+    5290:	fc740593          	addi	a1,s0,-57
+    5294:	fc842503          	lw	a0,-56(s0)
+    5298:	00000097          	auipc	ra,0x0
+    529c:	5c2080e7          	jalr	1474(ra) # 585a <read>
     if(cc < 0){
-    4dea:	00054563          	bltz	a0,4df4 <countfree+0xf0>
+    52a0:	00054563          	bltz	a0,52aa <countfree+0xf0>
       printf("read() failed in countfree()\n");
       exit(1);
     }
     if(cc == 0)
-    4dee:	c105                	beqz	a0,4e0e <countfree+0x10a>
+    52a4:	c105                	beqz	a0,52c4 <countfree+0x10a>
       break;
     n += 1;
-    4df0:	2485                	addiw	s1,s1,1
+    52a6:	2485                	addiw	s1,s1,1
   while(1){
-    4df2:	b7dd                	j	4dd8 <countfree+0xd4>
+    52a8:	b7dd                	j	528e <countfree+0xd4>
       printf("read() failed in countfree()\n");
-    4df4:	00003517          	auipc	a0,0x3
-    4df8:	94c50513          	addi	a0,a0,-1716 # 7740 <malloc+0x1fa4>
-    4dfc:	00001097          	auipc	ra,0x1
-    4e00:	8e8080e7          	jalr	-1816(ra) # 56e4 <printf>
-      exit(1);
-    4e04:	4505                	li	a0,1
-    4e06:	00000097          	auipc	ra,0x0
-    4e0a:	564080e7          	jalr	1380(ra) # 536a <exit>
+    52aa:	00003517          	auipc	a0,0x3
+    52ae:	a4650513          	addi	a0,a0,-1466 # 7cf0 <malloc+0x206c>
+    52b2:	00001097          	auipc	ra,0x1
+    52b6:	91a080e7          	jalr	-1766(ra) # 5bcc <printf>
+      exit(1);
+    52ba:	4505                	li	a0,1
+    52bc:	00000097          	auipc	ra,0x0
+    52c0:	586080e7          	jalr	1414(ra) # 5842 <exit>
   }
 
   close(fds[0]);
-    4e0e:	fc842503          	lw	a0,-56(s0)
-    4e12:	00000097          	auipc	ra,0x0
-    4e16:	580080e7          	jalr	1408(ra) # 5392 <close>
+    52c4:	fc842503          	lw	a0,-56(s0)
+    52c8:	00000097          	auipc	ra,0x0
+    52cc:	5a2080e7          	jalr	1442(ra) # 586a <close>
   wait((int*)0);
-    4e1a:	4501                	li	a0,0
-    4e1c:	00000097          	auipc	ra,0x0
-    4e20:	556080e7          	jalr	1366(ra) # 5372 <wait>
+    52d0:	4501                	li	a0,0
+    52d2:	00000097          	auipc	ra,0x0
+    52d6:	578080e7          	jalr	1400(ra) # 584a <wait>
   
   return n;
 }
-    4e24:	8526                	mv	a0,s1
-    4e26:	70e2                	ld	ra,56(sp)
-    4e28:	7442                	ld	s0,48(sp)
-    4e2a:	74a2                	ld	s1,40(sp)
-    4e2c:	7902                	ld	s2,32(sp)
-    4e2e:	69e2                	ld	s3,24(sp)
-    4e30:	6121                	addi	sp,sp,64
-    4e32:	8082                	ret
+    52da:	8526                	mv	a0,s1
+    52dc:	70e2                	ld	ra,56(sp)
+    52de:	7442                	ld	s0,48(sp)
+    52e0:	74a2                	ld	s1,40(sp)
+    52e2:	7902                	ld	s2,32(sp)
+    52e4:	69e2                	ld	s3,24(sp)
+    52e6:	6121                	addi	sp,sp,64
+    52e8:	8082                	ret
 
-0000000000004e34 <run>:
+00000000000052ea <run>:
 
 // run each test in its own process. run returns 1 if child's exit()
 // indicates success.
 int
 run(void f(char *), char *s) {
-    4e34:	7179                	addi	sp,sp,-48
-    4e36:	f406                	sd	ra,40(sp)
-    4e38:	f022                	sd	s0,32(sp)
-    4e3a:	ec26                	sd	s1,24(sp)
-    4e3c:	e84a                	sd	s2,16(sp)
-    4e3e:	1800                	addi	s0,sp,48
-    4e40:	84aa                	mv	s1,a0
-    4e42:	892e                	mv	s2,a1
+    52ea:	7179                	addi	sp,sp,-48
+    52ec:	f406                	sd	ra,40(sp)
+    52ee:	f022                	sd	s0,32(sp)
+    52f0:	ec26                	sd	s1,24(sp)
+    52f2:	e84a                	sd	s2,16(sp)
+    52f4:	1800                	addi	s0,sp,48
+    52f6:	84aa                	mv	s1,a0
+    52f8:	892e                	mv	s2,a1
   int pid;
   int xstatus;
 
   printf("test %s: ", s);
-    4e44:	00003517          	auipc	a0,0x3
-    4e48:	91c50513          	addi	a0,a0,-1764 # 7760 <malloc+0x1fc4>
-    4e4c:	00001097          	auipc	ra,0x1
-    4e50:	898080e7          	jalr	-1896(ra) # 56e4 <printf>
+    52fa:	00003517          	auipc	a0,0x3
+    52fe:	a1650513          	addi	a0,a0,-1514 # 7d10 <malloc+0x208c>
+    5302:	00001097          	auipc	ra,0x1
+    5306:	8ca080e7          	jalr	-1846(ra) # 5bcc <printf>
   if((pid = fork()) < 0) {
-    4e54:	00000097          	auipc	ra,0x0
-    4e58:	50e080e7          	jalr	1294(ra) # 5362 <fork>
-    4e5c:	02054e63          	bltz	a0,4e98 <run+0x64>
+    530a:	00000097          	auipc	ra,0x0
+    530e:	530080e7          	jalr	1328(ra) # 583a <fork>
+    5312:	02054e63          	bltz	a0,534e <run+0x64>
     printf("runtest: fork error\n");
     exit(1);
   }
   if(pid == 0) {
-    4e60:	c929                	beqz	a0,4eb2 <run+0x7e>
+    5316:	c929                	beqz	a0,5368 <run+0x7e>
     f(s);
     exit(0);
   } else {
     wait(&xstatus);
-    4e62:	fdc40513          	addi	a0,s0,-36
-    4e66:	00000097          	auipc	ra,0x0
-    4e6a:	50c080e7          	jalr	1292(ra) # 5372 <wait>
+    5318:	fdc40513          	addi	a0,s0,-36
+    531c:	00000097          	auipc	ra,0x0
+    5320:	52e080e7          	jalr	1326(ra) # 584a <wait>
     if(xstatus != 0) 
-    4e6e:	fdc42783          	lw	a5,-36(s0)
-    4e72:	c7b9                	beqz	a5,4ec0 <run+0x8c>
+    5324:	fdc42783          	lw	a5,-36(s0)
+    5328:	c7b9                	beqz	a5,5376 <run+0x8c>
       printf("FAILED\n");
-    4e74:	00003517          	auipc	a0,0x3
-    4e78:	91450513          	addi	a0,a0,-1772 # 7788 <malloc+0x1fec>
-    4e7c:	00001097          	auipc	ra,0x1
-    4e80:	868080e7          	jalr	-1944(ra) # 56e4 <printf>
+    532a:	00003517          	auipc	a0,0x3
+    532e:	a0e50513          	addi	a0,a0,-1522 # 7d38 <malloc+0x20b4>
+    5332:	00001097          	auipc	ra,0x1
+    5336:	89a080e7          	jalr	-1894(ra) # 5bcc <printf>
     else
       printf("OK\n");
     return xstatus == 0;
-    4e84:	fdc42503          	lw	a0,-36(s0)
+    533a:	fdc42503          	lw	a0,-36(s0)
   }
 }
-    4e88:	00153513          	seqz	a0,a0
-    4e8c:	70a2                	ld	ra,40(sp)
-    4e8e:	7402                	ld	s0,32(sp)
-    4e90:	64e2                	ld	s1,24(sp)
-    4e92:	6942                	ld	s2,16(sp)
-    4e94:	6145                	addi	sp,sp,48
-    4e96:	8082                	ret
+    533e:	00153513          	seqz	a0,a0
+    5342:	70a2                	ld	ra,40(sp)
+    5344:	7402                	ld	s0,32(sp)
+    5346:	64e2                	ld	s1,24(sp)
+    5348:	6942                	ld	s2,16(sp)
+    534a:	6145                	addi	sp,sp,48
+    534c:	8082                	ret
     printf("runtest: fork error\n");
-    4e98:	00003517          	auipc	a0,0x3
-    4e9c:	8d850513          	addi	a0,a0,-1832 # 7770 <malloc+0x1fd4>
-    4ea0:	00001097          	auipc	ra,0x1
-    4ea4:	844080e7          	jalr	-1980(ra) # 56e4 <printf>
-    exit(1);
-    4ea8:	4505                	li	a0,1
-    4eaa:	00000097          	auipc	ra,0x0
-    4eae:	4c0080e7          	jalr	1216(ra) # 536a <exit>
+    534e:	00003517          	auipc	a0,0x3
+    5352:	9d250513          	addi	a0,a0,-1582 # 7d20 <malloc+0x209c>
+    5356:	00001097          	auipc	ra,0x1
+    535a:	876080e7          	jalr	-1930(ra) # 5bcc <printf>
+    exit(1);
+    535e:	4505                	li	a0,1
+    5360:	00000097          	auipc	ra,0x0
+    5364:	4e2080e7          	jalr	1250(ra) # 5842 <exit>
     f(s);
-    4eb2:	854a                	mv	a0,s2
-    4eb4:	9482                	jalr	s1
+    5368:	854a                	mv	a0,s2
+    536a:	9482                	jalr	s1
     exit(0);
-    4eb6:	4501                	li	a0,0
-    4eb8:	00000097          	auipc	ra,0x0
-    4ebc:	4b2080e7          	jalr	1202(ra) # 536a <exit>
+    536c:	4501                	li	a0,0
+    536e:	00000097          	auipc	ra,0x0
+    5372:	4d4080e7          	jalr	1236(ra) # 5842 <exit>
       printf("OK\n");
-    4ec0:	00003517          	auipc	a0,0x3
-    4ec4:	8d050513          	addi	a0,a0,-1840 # 7790 <malloc+0x1ff4>
-    4ec8:	00001097          	auipc	ra,0x1
-    4ecc:	81c080e7          	jalr	-2020(ra) # 56e4 <printf>
-    4ed0:	bf55                	j	4e84 <run+0x50>
+    5376:	00003517          	auipc	a0,0x3
+    537a:	9ca50513          	addi	a0,a0,-1590 # 7d40 <malloc+0x20bc>
+    537e:	00001097          	auipc	ra,0x1
+    5382:	84e080e7          	jalr	-1970(ra) # 5bcc <printf>
+    5386:	bf55                	j	533a <run+0x50>
 
-0000000000004ed2 <main>:
+0000000000005388 <main>:
 
 int
 main(int argc, char *argv[])
 {
-    4ed2:	c4010113          	addi	sp,sp,-960
-    4ed6:	3a113c23          	sd	ra,952(sp)
-    4eda:	3a813823          	sd	s0,944(sp)
-    4ede:	3a913423          	sd	s1,936(sp)
-    4ee2:	3b213023          	sd	s2,928(sp)
-    4ee6:	39313c23          	sd	s3,920(sp)
-    4eea:	39413823          	sd	s4,912(sp)
-    4eee:	39513423          	sd	s5,904(sp)
-    4ef2:	39613023          	sd	s6,896(sp)
-    4ef6:	0780                	addi	s0,sp,960
-    4ef8:	89aa                	mv	s3,a0
+    5388:	bd010113          	addi	sp,sp,-1072
+    538c:	42113423          	sd	ra,1064(sp)
+    5390:	42813023          	sd	s0,1056(sp)
+    5394:	40913c23          	sd	s1,1048(sp)
+    5398:	41213823          	sd	s2,1040(sp)
+    539c:	41313423          	sd	s3,1032(sp)
+    53a0:	41413023          	sd	s4,1024(sp)
+    53a4:	3f513c23          	sd	s5,1016(sp)
+    53a8:	3f613823          	sd	s6,1008(sp)
+    53ac:	43010413          	addi	s0,sp,1072
+    53b0:	89aa                	mv	s3,a0
   int continuous = 0;
   char *justone = 0;
 
   if(argc == 2 && strcmp(argv[1], "-c") == 0){
-    4efa:	4789                	li	a5,2
-    4efc:	08f50763          	beq	a0,a5,4f8a <main+0xb8>
+    53b2:	4789                	li	a5,2
+    53b4:	08f50f63          	beq	a0,a5,5452 <main+0xca>
     continuous = 1;
   } else if(argc == 2 && strcmp(argv[1], "-C") == 0){
     continuous = 2;
   } else if(argc == 2 && argv[1][0] != '-'){
     justone = argv[1];
   } else if(argc > 1){
-    4f00:	4785                	li	a5,1
+    53b8:	4785                	li	a5,1
   char *justone = 0;
-    4f02:	4901                	li	s2,0
+    53ba:	4901                	li	s2,0
   } else if(argc > 1){
-    4f04:	0ca7c163          	blt	a5,a0,4fc6 <main+0xf4>
+    53bc:	0ca7c963          	blt	a5,a0,548e <main+0x106>
   }
   
   struct test {
     void (*f)(char *);
     char *s;
   } tests[] = {
-    4f08:	00003797          	auipc	a5,0x3
-    4f0c:	c4878793          	addi	a5,a5,-952 # 7b50 <malloc+0x23b4>
-    4f10:	c4040713          	addi	a4,s0,-960
-    4f14:	00003817          	auipc	a6,0x3
-    4f18:	fbc80813          	addi	a6,a6,-68 # 7ed0 <malloc+0x2734>
-    4f1c:	6388                	ld	a0,0(a5)
-    4f1e:	678c                	ld	a1,8(a5)
-    4f20:	6b90                	ld	a2,16(a5)
-    4f22:	6f94                	ld	a3,24(a5)
-    4f24:	e308                	sd	a0,0(a4)
-    4f26:	e70c                	sd	a1,8(a4)
-    4f28:	eb10                	sd	a2,16(a4)
-    4f2a:	ef14                	sd	a3,24(a4)
-    4f2c:	02078793          	addi	a5,a5,32
-    4f30:	02070713          	addi	a4,a4,32
-    4f34:	ff0794e3          	bne	a5,a6,4f1c <main+0x4a>
+    53c0:	00003797          	auipc	a5,0x3
+    53c4:	d9878793          	addi	a5,a5,-616 # 8158 <malloc+0x24d4>
+    53c8:	bd040713          	addi	a4,s0,-1072
+    53cc:	00003317          	auipc	t1,0x3
+    53d0:	17c30313          	addi	t1,t1,380 # 8548 <malloc+0x28c4>
+    53d4:	0007b883          	ld	a7,0(a5)
+    53d8:	0087b803          	ld	a6,8(a5)
+    53dc:	6b88                	ld	a0,16(a5)
+    53de:	6f8c                	ld	a1,24(a5)
+    53e0:	7390                	ld	a2,32(a5)
+    53e2:	7794                	ld	a3,40(a5)
+    53e4:	01173023          	sd	a7,0(a4)
+    53e8:	01073423          	sd	a6,8(a4)
+    53ec:	eb08                	sd	a0,16(a4)
+    53ee:	ef0c                	sd	a1,24(a4)
+    53f0:	f310                	sd	a2,32(a4)
+    53f2:	f714                	sd	a3,40(a4)
+    53f4:	03078793          	addi	a5,a5,48
+    53f8:	03070713          	addi	a4,a4,48
+    53fc:	fc679ce3          	bne	a5,t1,53d4 <main+0x4c>
           exit(1);
       }
     }
   }
 
   printf("usertests starting\n");
-    4f38:	00003517          	auipc	a0,0x3
-    4f3c:	91050513          	addi	a0,a0,-1776 # 7848 <malloc+0x20ac>
-    4f40:	00000097          	auipc	ra,0x0
-    4f44:	7a4080e7          	jalr	1956(ra) # 56e4 <printf>
+    5400:	00003517          	auipc	a0,0x3
+    5404:	9f850513          	addi	a0,a0,-1544 # 7df8 <malloc+0x2174>
+    5408:	00000097          	auipc	ra,0x0
+    540c:	7c4080e7          	jalr	1988(ra) # 5bcc <printf>
   int free0 = countfree();
-    4f48:	00000097          	auipc	ra,0x0
-    4f4c:	dbc080e7          	jalr	-580(ra) # 4d04 <countfree>
-    4f50:	8a2a                	mv	s4,a0
+    5410:	00000097          	auipc	ra,0x0
+    5414:	daa080e7          	jalr	-598(ra) # 51ba <countfree>
+    5418:	8a2a                	mv	s4,a0
   int free1 = 0;
   int fail = 0;
   for (struct test *t = tests; t->s != 0; t++) {
-    4f52:	c4843503          	ld	a0,-952(s0)
-    4f56:	c4040493          	addi	s1,s0,-960
+    541a:	bd843503          	ld	a0,-1064(s0)
+    541e:	bd040493          	addi	s1,s0,-1072
   int fail = 0;
-    4f5a:	4981                	li	s3,0
+    5422:	4981                	li	s3,0
     if((justone == 0) || strcmp(t->s, justone) == 0) {
       if(!run(t->f, t->s))
         fail = 1;
-    4f5c:	4a85                	li	s5,1
+    5424:	4a85                	li	s5,1
   for (struct test *t = tests; t->s != 0; t++) {
-    4f5e:	e55d                	bnez	a0,500c <main+0x13a>
+    5426:	e55d                	bnez	a0,54d4 <main+0x14c>
   }
 
   if(fail){
     printf("SOME TESTS FAILED\n");
     exit(1);
   } else if((free1 = countfree()) < free0){
-    4f60:	00000097          	auipc	ra,0x0
-    4f64:	da4080e7          	jalr	-604(ra) # 4d04 <countfree>
-    4f68:	85aa                	mv	a1,a0
-    4f6a:	0f455163          	bge	a0,s4,504c <main+0x17a>
+    5428:	00000097          	auipc	ra,0x0
+    542c:	d92080e7          	jalr	-622(ra) # 51ba <countfree>
+    5430:	85aa                	mv	a1,a0
+    5432:	0f455163          	bge	a0,s4,5514 <main+0x18c>
     printf("FAILED -- lost some free pages %d (out of %d)\n", free1, free0);
-    4f6e:	8652                	mv	a2,s4
-    4f70:	00003517          	auipc	a0,0x3
-    4f74:	89050513          	addi	a0,a0,-1904 # 7800 <malloc+0x2064>
-    4f78:	00000097          	auipc	ra,0x0
-    4f7c:	76c080e7          	jalr	1900(ra) # 56e4 <printf>
-    exit(1);
-    4f80:	4505                	li	a0,1
-    4f82:	00000097          	auipc	ra,0x0
-    4f86:	3e8080e7          	jalr	1000(ra) # 536a <exit>
-    4f8a:	84ae                	mv	s1,a1
+    5436:	8652                	mv	a2,s4
+    5438:	00003517          	auipc	a0,0x3
+    543c:	97850513          	addi	a0,a0,-1672 # 7db0 <malloc+0x212c>
+    5440:	00000097          	auipc	ra,0x0
+    5444:	78c080e7          	jalr	1932(ra) # 5bcc <printf>
+    exit(1);
+    5448:	4505                	li	a0,1
+    544a:	00000097          	auipc	ra,0x0
+    544e:	3f8080e7          	jalr	1016(ra) # 5842 <exit>
+    5452:	84ae                	mv	s1,a1
   if(argc == 2 && strcmp(argv[1], "-c") == 0){
-    4f8c:	00003597          	auipc	a1,0x3
-    4f90:	80c58593          	addi	a1,a1,-2036 # 7798 <malloc+0x1ffc>
-    4f94:	6488                	ld	a0,8(s1)
-    4f96:	00000097          	auipc	ra,0x0
-    4f9a:	184080e7          	jalr	388(ra) # 511a <strcmp>
-    4f9e:	10050563          	beqz	a0,50a8 <main+0x1d6>
+    5454:	00003597          	auipc	a1,0x3
+    5458:	8f458593          	addi	a1,a1,-1804 # 7d48 <malloc+0x20c4>
+    545c:	6488                	ld	a0,8(s1)
+    545e:	00000097          	auipc	ra,0x0
+    5462:	194080e7          	jalr	404(ra) # 55f2 <strcmp>
+    5466:	10050563          	beqz	a0,5570 <main+0x1e8>
   } else if(argc == 2 && strcmp(argv[1], "-C") == 0){
-    4fa2:	00003597          	auipc	a1,0x3
-    4fa6:	8de58593          	addi	a1,a1,-1826 # 7880 <malloc+0x20e4>
-    4faa:	6488                	ld	a0,8(s1)
-    4fac:	00000097          	auipc	ra,0x0
-    4fb0:	16e080e7          	jalr	366(ra) # 511a <strcmp>
-    4fb4:	c97d                	beqz	a0,50aa <main+0x1d8>
+    546a:	00003597          	auipc	a1,0x3
+    546e:	9c658593          	addi	a1,a1,-1594 # 7e30 <malloc+0x21ac>
+    5472:	6488                	ld	a0,8(s1)
+    5474:	00000097          	auipc	ra,0x0
+    5478:	17e080e7          	jalr	382(ra) # 55f2 <strcmp>
+    547c:	c97d                	beqz	a0,5572 <main+0x1ea>
   } else if(argc == 2 && argv[1][0] != '-'){
-    4fb6:	0084b903          	ld	s2,8(s1)
-    4fba:	00094703          	lbu	a4,0(s2)
-    4fbe:	02d00793          	li	a5,45
-    4fc2:	f4f713e3          	bne	a4,a5,4f08 <main+0x36>
+    547e:	0084b903          	ld	s2,8(s1)
+    5482:	00094703          	lbu	a4,0(s2)
+    5486:	02d00793          	li	a5,45
+    548a:	f2f71be3          	bne	a4,a5,53c0 <main+0x38>
     printf("Usage: usertests [-c] [testname]\n");
-    4fc6:	00002517          	auipc	a0,0x2
-    4fca:	7da50513          	addi	a0,a0,2010 # 77a0 <malloc+0x2004>
-    4fce:	00000097          	auipc	ra,0x0
-    4fd2:	716080e7          	jalr	1814(ra) # 56e4 <printf>
-    exit(1);
-    4fd6:	4505                	li	a0,1
-    4fd8:	00000097          	auipc	ra,0x0
-    4fdc:	392080e7          	jalr	914(ra) # 536a <exit>
+    548e:	00003517          	auipc	a0,0x3
+    5492:	8c250513          	addi	a0,a0,-1854 # 7d50 <malloc+0x20cc>
+    5496:	00000097          	auipc	ra,0x0
+    549a:	736080e7          	jalr	1846(ra) # 5bcc <printf>
+    exit(1);
+    549e:	4505                	li	a0,1
+    54a0:	00000097          	auipc	ra,0x0
+    54a4:	3a2080e7          	jalr	930(ra) # 5842 <exit>
           exit(1);
-    4fe0:	4505                	li	a0,1
-    4fe2:	00000097          	auipc	ra,0x0
-    4fe6:	388080e7          	jalr	904(ra) # 536a <exit>
+    54a8:	4505                	li	a0,1
+    54aa:	00000097          	auipc	ra,0x0
+    54ae:	398080e7          	jalr	920(ra) # 5842 <exit>
         printf("FAILED -- lost %d free pages\n", free0 - free1);
-    4fea:	40a905bb          	subw	a1,s2,a0
-    4fee:	855a                	mv	a0,s6
-    4ff0:	00000097          	auipc	ra,0x0
-    4ff4:	6f4080e7          	jalr	1780(ra) # 56e4 <printf>
+    54b2:	40a905bb          	subw	a1,s2,a0
+    54b6:	855a                	mv	a0,s6
+    54b8:	00000097          	auipc	ra,0x0
+    54bc:	714080e7          	jalr	1812(ra) # 5bcc <printf>
         if(continuous != 2)
-    4ff8:	09498463          	beq	s3,s4,5080 <main+0x1ae>
+    54c0:	09498463          	beq	s3,s4,5548 <main+0x1c0>
           exit(1);
-    4ffc:	4505                	li	a0,1
-    4ffe:	00000097          	auipc	ra,0x0
-    5002:	36c080e7          	jalr	876(ra) # 536a <exit>
+    54c4:	4505                	li	a0,1
+    54c6:	00000097          	auipc	ra,0x0
+    54ca:	37c080e7          	jalr	892(ra) # 5842 <exit>
   for (struct test *t = tests; t->s != 0; t++) {
-    5006:	04c1                	addi	s1,s1,16
-    5008:	6488                	ld	a0,8(s1)
-    500a:	c115                	beqz	a0,502e <main+0x15c>
+    54ce:	04c1                	addi	s1,s1,16
+    54d0:	6488                	ld	a0,8(s1)
+    54d2:	c115                	beqz	a0,54f6 <main+0x16e>
     if((justone == 0) || strcmp(t->s, justone) == 0) {
-    500c:	00090863          	beqz	s2,501c <main+0x14a>
-    5010:	85ca                	mv	a1,s2
-    5012:	00000097          	auipc	ra,0x0
-    5016:	108080e7          	jalr	264(ra) # 511a <strcmp>
-    501a:	f575                	bnez	a0,5006 <main+0x134>
+    54d4:	00090863          	beqz	s2,54e4 <main+0x15c>
+    54d8:	85ca                	mv	a1,s2
+    54da:	00000097          	auipc	ra,0x0
+    54de:	118080e7          	jalr	280(ra) # 55f2 <strcmp>
+    54e2:	f575                	bnez	a0,54ce <main+0x146>
       if(!run(t->f, t->s))
-    501c:	648c                	ld	a1,8(s1)
-    501e:	6088                	ld	a0,0(s1)
-    5020:	00000097          	auipc	ra,0x0
-    5024:	e14080e7          	jalr	-492(ra) # 4e34 <run>
-    5028:	fd79                	bnez	a0,5006 <main+0x134>
+    54e4:	648c                	ld	a1,8(s1)
+    54e6:	6088                	ld	a0,0(s1)
+    54e8:	00000097          	auipc	ra,0x0
+    54ec:	e02080e7          	jalr	-510(ra) # 52ea <run>
+    54f0:	fd79                	bnez	a0,54ce <main+0x146>
         fail = 1;
-    502a:	89d6                	mv	s3,s5
-    502c:	bfe9                	j	5006 <main+0x134>
+    54f2:	89d6                	mv	s3,s5
+    54f4:	bfe9                	j	54ce <main+0x146>
   if(fail){
-    502e:	f20989e3          	beqz	s3,4f60 <main+0x8e>
+    54f6:	f20989e3          	beqz	s3,5428 <main+0xa0>
     printf("SOME TESTS FAILED\n");
-    5032:	00002517          	auipc	a0,0x2
-    5036:	7b650513          	addi	a0,a0,1974 # 77e8 <malloc+0x204c>
-    503a:	00000097          	auipc	ra,0x0
-    503e:	6aa080e7          	jalr	1706(ra) # 56e4 <printf>
-    exit(1);
-    5042:	4505                	li	a0,1
-    5044:	00000097          	auipc	ra,0x0
-    5048:	326080e7          	jalr	806(ra) # 536a <exit>
+    54fa:	00003517          	auipc	a0,0x3
+    54fe:	89e50513          	addi	a0,a0,-1890 # 7d98 <malloc+0x2114>
+    5502:	00000097          	auipc	ra,0x0
+    5506:	6ca080e7          	jalr	1738(ra) # 5bcc <printf>
+    exit(1);
+    550a:	4505                	li	a0,1
+    550c:	00000097          	auipc	ra,0x0
+    5510:	336080e7          	jalr	822(ra) # 5842 <exit>
   } else {
     printf("ALL TESTS PASSED\n");
-    504c:	00002517          	auipc	a0,0x2
-    5050:	7e450513          	addi	a0,a0,2020 # 7830 <malloc+0x2094>
-    5054:	00000097          	auipc	ra,0x0
-    5058:	690080e7          	jalr	1680(ra) # 56e4 <printf>
+    5514:	00003517          	auipc	a0,0x3
+    5518:	8cc50513          	addi	a0,a0,-1844 # 7de0 <malloc+0x215c>
+    551c:	00000097          	auipc	ra,0x0
+    5520:	6b0080e7          	jalr	1712(ra) # 5bcc <printf>
     exit(0);
-    505c:	4501                	li	a0,0
-    505e:	00000097          	auipc	ra,0x0
-    5062:	30c080e7          	jalr	780(ra) # 536a <exit>
+    5524:	4501                	li	a0,0
+    5526:	00000097          	auipc	ra,0x0
+    552a:	31c080e7          	jalr	796(ra) # 5842 <exit>
         printf("SOME TESTS FAILED\n");
-    5066:	8556                	mv	a0,s5
-    5068:	00000097          	auipc	ra,0x0
-    506c:	67c080e7          	jalr	1660(ra) # 56e4 <printf>
+    552e:	8556                	mv	a0,s5
+    5530:	00000097          	auipc	ra,0x0
+    5534:	69c080e7          	jalr	1692(ra) # 5bcc <printf>
         if(continuous != 2)
-    5070:	f74998e3          	bne	s3,s4,4fe0 <main+0x10e>
+    5538:	f74998e3          	bne	s3,s4,54a8 <main+0x120>
       int free1 = countfree();
-    5074:	00000097          	auipc	ra,0x0
-    5078:	c90080e7          	jalr	-880(ra) # 4d04 <countfree>
+    553c:	00000097          	auipc	ra,0x0
+    5540:	c7e080e7          	jalr	-898(ra) # 51ba <countfree>
       if(free1 < free0){
-    507c:	f72547e3          	blt	a0,s2,4fea <main+0x118>
+    5544:	f72547e3          	blt	a0,s2,54b2 <main+0x12a>
       int free0 = countfree();
-    5080:	00000097          	auipc	ra,0x0
-    5084:	c84080e7          	jalr	-892(ra) # 4d04 <countfree>
-    5088:	892a                	mv	s2,a0
+    5548:	00000097          	auipc	ra,0x0
+    554c:	c72080e7          	jalr	-910(ra) # 51ba <countfree>
+    5550:	892a                	mv	s2,a0
       for (struct test *t = tests; t->s != 0; t++) {
-    508a:	c4843583          	ld	a1,-952(s0)
-    508e:	d1fd                	beqz	a1,5074 <main+0x1a2>
-    5090:	c4040493          	addi	s1,s0,-960
+    5552:	bd843583          	ld	a1,-1064(s0)
+    5556:	d1fd                	beqz	a1,553c <main+0x1b4>
+    5558:	bd040493          	addi	s1,s0,-1072
         if(!run(t->f, t->s)){
-    5094:	6088                	ld	a0,0(s1)
-    5096:	00000097          	auipc	ra,0x0
-    509a:	d9e080e7          	jalr	-610(ra) # 4e34 <run>
-    509e:	d561                	beqz	a0,5066 <main+0x194>
+    555c:	6088                	ld	a0,0(s1)
+    555e:	00000097          	auipc	ra,0x0
+    5562:	d8c080e7          	jalr	-628(ra) # 52ea <run>
+    5566:	d561                	beqz	a0,552e <main+0x1a6>
       for (struct test *t = tests; t->s != 0; t++) {
-    50a0:	04c1                	addi	s1,s1,16
-    50a2:	648c                	ld	a1,8(s1)
-    50a4:	f9e5                	bnez	a1,5094 <main+0x1c2>
-    50a6:	b7f9                	j	5074 <main+0x1a2>
+    5568:	04c1                	addi	s1,s1,16
+    556a:	648c                	ld	a1,8(s1)
+    556c:	f9e5                	bnez	a1,555c <main+0x1d4>
+    556e:	b7f9                	j	553c <main+0x1b4>
     continuous = 1;
-    50a8:	4985                	li	s3,1
+    5570:	4985                	li	s3,1
   } tests[] = {
-    50aa:	00003797          	auipc	a5,0x3
-    50ae:	aa678793          	addi	a5,a5,-1370 # 7b50 <malloc+0x23b4>
-    50b2:	c4040713          	addi	a4,s0,-960
-    50b6:	00003817          	auipc	a6,0x3
-    50ba:	e1a80813          	addi	a6,a6,-486 # 7ed0 <malloc+0x2734>
-    50be:	6388                	ld	a0,0(a5)
-    50c0:	678c                	ld	a1,8(a5)
-    50c2:	6b90                	ld	a2,16(a5)
-    50c4:	6f94                	ld	a3,24(a5)
-    50c6:	e308                	sd	a0,0(a4)
-    50c8:	e70c                	sd	a1,8(a4)
-    50ca:	eb10                	sd	a2,16(a4)
-    50cc:	ef14                	sd	a3,24(a4)
-    50ce:	02078793          	addi	a5,a5,32
-    50d2:	02070713          	addi	a4,a4,32
-    50d6:	ff0794e3          	bne	a5,a6,50be <main+0x1ec>
+    5572:	00003797          	auipc	a5,0x3
+    5576:	be678793          	addi	a5,a5,-1050 # 8158 <malloc+0x24d4>
+    557a:	bd040713          	addi	a4,s0,-1072
+    557e:	00003317          	auipc	t1,0x3
+    5582:	fca30313          	addi	t1,t1,-54 # 8548 <malloc+0x28c4>
+    5586:	0007b883          	ld	a7,0(a5)
+    558a:	0087b803          	ld	a6,8(a5)
+    558e:	6b88                	ld	a0,16(a5)
+    5590:	6f8c                	ld	a1,24(a5)
+    5592:	7390                	ld	a2,32(a5)
+    5594:	7794                	ld	a3,40(a5)
+    5596:	01173023          	sd	a7,0(a4)
+    559a:	01073423          	sd	a6,8(a4)
+    559e:	eb08                	sd	a0,16(a4)
+    55a0:	ef0c                	sd	a1,24(a4)
+    55a2:	f310                	sd	a2,32(a4)
+    55a4:	f714                	sd	a3,40(a4)
+    55a6:	03078793          	addi	a5,a5,48
+    55aa:	03070713          	addi	a4,a4,48
+    55ae:	fc679ce3          	bne	a5,t1,5586 <main+0x1fe>
     printf("continuous usertests starting\n");
-    50da:	00002517          	auipc	a0,0x2
-    50de:	78650513          	addi	a0,a0,1926 # 7860 <malloc+0x20c4>
-    50e2:	00000097          	auipc	ra,0x0
-    50e6:	602080e7          	jalr	1538(ra) # 56e4 <printf>
+    55b2:	00003517          	auipc	a0,0x3
+    55b6:	85e50513          	addi	a0,a0,-1954 # 7e10 <malloc+0x218c>
+    55ba:	00000097          	auipc	ra,0x0
+    55be:	612080e7          	jalr	1554(ra) # 5bcc <printf>
         printf("SOME TESTS FAILED\n");
-    50ea:	00002a97          	auipc	s5,0x2
-    50ee:	6fea8a93          	addi	s5,s5,1790 # 77e8 <malloc+0x204c>
+    55c2:	00002a97          	auipc	s5,0x2
+    55c6:	7d6a8a93          	addi	s5,s5,2006 # 7d98 <malloc+0x2114>
         if(continuous != 2)
-    50f2:	4a09                	li	s4,2
+    55ca:	4a09                	li	s4,2
         printf("FAILED -- lost %d free pages\n", free0 - free1);
-    50f4:	00002b17          	auipc	s6,0x2
-    50f8:	6d4b0b13          	addi	s6,s6,1748 # 77c8 <malloc+0x202c>
-    50fc:	b751                	j	5080 <main+0x1ae>
+    55cc:	00002b17          	auipc	s6,0x2
+    55d0:	7acb0b13          	addi	s6,s6,1964 # 7d78 <malloc+0x20f4>
+    55d4:	bf95                	j	5548 <main+0x1c0>
 
-00000000000050fe <strcpy>:
+00000000000055d6 <strcpy>:
 #include "kernel/fcntl.h"
 #include "user/user.h"
 
 char*
 strcpy(char *s, const char *t)
 {
-    50fe:	1141                	addi	sp,sp,-16
-    5100:	e422                	sd	s0,8(sp)
-    5102:	0800                	addi	s0,sp,16
+    55d6:	1141                	addi	sp,sp,-16
+    55d8:	e422                	sd	s0,8(sp)
+    55da:	0800                	addi	s0,sp,16
   char *os;
 
   os = s;
   while((*s++ = *t++) != 0)
-    5104:	87aa                	mv	a5,a0
-    5106:	0585                	addi	a1,a1,1
-    5108:	0785                	addi	a5,a5,1
-    510a:	fff5c703          	lbu	a4,-1(a1)
-    510e:	fee78fa3          	sb	a4,-1(a5)
-    5112:	fb75                	bnez	a4,5106 <strcpy+0x8>
+    55dc:	87aa                	mv	a5,a0
+    55de:	0585                	addi	a1,a1,1
+    55e0:	0785                	addi	a5,a5,1
+    55e2:	fff5c703          	lbu	a4,-1(a1)
+    55e6:	fee78fa3          	sb	a4,-1(a5)
+    55ea:	fb75                	bnez	a4,55de <strcpy+0x8>
     ;
   return os;
 }
-    5114:	6422                	ld	s0,8(sp)
-    5116:	0141                	addi	sp,sp,16
-    5118:	8082                	ret
+    55ec:	6422                	ld	s0,8(sp)
+    55ee:	0141                	addi	sp,sp,16
+    55f0:	8082                	ret
 
-000000000000511a <strcmp>:
+00000000000055f2 <strcmp>:
 
 int
 strcmp(const char *p, const char *q)
 {
-    511a:	1141                	addi	sp,sp,-16
-    511c:	e422                	sd	s0,8(sp)
-    511e:	0800                	addi	s0,sp,16
+    55f2:	1141                	addi	sp,sp,-16
+    55f4:	e422                	sd	s0,8(sp)
+    55f6:	0800                	addi	s0,sp,16
   while(*p && *p == *q)
-    5120:	00054783          	lbu	a5,0(a0)
-    5124:	cb91                	beqz	a5,5138 <strcmp+0x1e>
-    5126:	0005c703          	lbu	a4,0(a1)
-    512a:	00f71763          	bne	a4,a5,5138 <strcmp+0x1e>
+    55f8:	00054783          	lbu	a5,0(a0)
+    55fc:	cb91                	beqz	a5,5610 <strcmp+0x1e>
+    55fe:	0005c703          	lbu	a4,0(a1)
+    5602:	00f71763          	bne	a4,a5,5610 <strcmp+0x1e>
     p++, q++;
-    512e:	0505                	addi	a0,a0,1
-    5130:	0585                	addi	a1,a1,1
+    5606:	0505                	addi	a0,a0,1
+    5608:	0585                	addi	a1,a1,1
   while(*p && *p == *q)
-    5132:	00054783          	lbu	a5,0(a0)
-    5136:	fbe5                	bnez	a5,5126 <strcmp+0xc>
+    560a:	00054783          	lbu	a5,0(a0)
+    560e:	fbe5                	bnez	a5,55fe <strcmp+0xc>
   return (uchar)*p - (uchar)*q;
-    5138:	0005c503          	lbu	a0,0(a1)
+    5610:	0005c503          	lbu	a0,0(a1)
 }
-    513c:	40a7853b          	subw	a0,a5,a0
-    5140:	6422                	ld	s0,8(sp)
-    5142:	0141                	addi	sp,sp,16
-    5144:	8082                	ret
+    5614:	40a7853b          	subw	a0,a5,a0
+    5618:	6422                	ld	s0,8(sp)
+    561a:	0141                	addi	sp,sp,16
+    561c:	8082                	ret
 
-0000000000005146 <strlen>:
+000000000000561e <strlen>:
 
 uint
 strlen(const char *s)
 {
-    5146:	1141                	addi	sp,sp,-16
-    5148:	e422                	sd	s0,8(sp)
-    514a:	0800                	addi	s0,sp,16
+    561e:	1141                	addi	sp,sp,-16
+    5620:	e422                	sd	s0,8(sp)
+    5622:	0800                	addi	s0,sp,16
   int n;
 
   for(n = 0; s[n]; n++)
-    514c:	00054783          	lbu	a5,0(a0)
-    5150:	cf91                	beqz	a5,516c <strlen+0x26>
-    5152:	0505                	addi	a0,a0,1
-    5154:	87aa                	mv	a5,a0
-    5156:	4685                	li	a3,1
-    5158:	9e89                	subw	a3,a3,a0
-    515a:	00f6853b          	addw	a0,a3,a5
-    515e:	0785                	addi	a5,a5,1
-    5160:	fff7c703          	lbu	a4,-1(a5)
-    5164:	fb7d                	bnez	a4,515a <strlen+0x14>
+    5624:	00054783          	lbu	a5,0(a0)
+    5628:	cf91                	beqz	a5,5644 <strlen+0x26>
+    562a:	0505                	addi	a0,a0,1
+    562c:	87aa                	mv	a5,a0
+    562e:	4685                	li	a3,1
+    5630:	9e89                	subw	a3,a3,a0
+    5632:	00f6853b          	addw	a0,a3,a5
+    5636:	0785                	addi	a5,a5,1
+    5638:	fff7c703          	lbu	a4,-1(a5)
+    563c:	fb7d                	bnez	a4,5632 <strlen+0x14>
     ;
   return n;
 }
-    5166:	6422                	ld	s0,8(sp)
-    5168:	0141                	addi	sp,sp,16
-    516a:	8082                	ret
+    563e:	6422                	ld	s0,8(sp)
+    5640:	0141                	addi	sp,sp,16
+    5642:	8082                	ret
   for(n = 0; s[n]; n++)
-    516c:	4501                	li	a0,0
-    516e:	bfe5                	j	5166 <strlen+0x20>
+    5644:	4501                	li	a0,0
+    5646:	bfe5                	j	563e <strlen+0x20>
 
-0000000000005170 <memset>:
+0000000000005648 <memset>:
 
 void*
 memset(void *dst, int c, uint n)
 {
-    5170:	1141                	addi	sp,sp,-16
-    5172:	e422                	sd	s0,8(sp)
-    5174:	0800                	addi	s0,sp,16
+    5648:	1141                	addi	sp,sp,-16
+    564a:	e422                	sd	s0,8(sp)
+    564c:	0800                	addi	s0,sp,16
   char *cdst = (char *) dst;
   int i;
   for(i = 0; i < n; i++){
-    5176:	ca19                	beqz	a2,518c <memset+0x1c>
-    5178:	87aa                	mv	a5,a0
-    517a:	1602                	slli	a2,a2,0x20
-    517c:	9201                	srli	a2,a2,0x20
-    517e:	00a60733          	add	a4,a2,a0
+    564e:	ca19                	beqz	a2,5664 <memset+0x1c>
+    5650:	87aa                	mv	a5,a0
+    5652:	1602                	slli	a2,a2,0x20
+    5654:	9201                	srli	a2,a2,0x20
+    5656:	00a60733          	add	a4,a2,a0
     cdst[i] = c;
-    5182:	00b78023          	sb	a1,0(a5)
+    565a:	00b78023          	sb	a1,0(a5)
   for(i = 0; i < n; i++){
-    5186:	0785                	addi	a5,a5,1
-    5188:	fee79de3          	bne	a5,a4,5182 <memset+0x12>
+    565e:	0785                	addi	a5,a5,1
+    5660:	fee79de3          	bne	a5,a4,565a <memset+0x12>
   }
   return dst;
 }
-    518c:	6422                	ld	s0,8(sp)
-    518e:	0141                	addi	sp,sp,16
-    5190:	8082                	ret
+    5664:	6422                	ld	s0,8(sp)
+    5666:	0141                	addi	sp,sp,16
+    5668:	8082                	ret
 
-0000000000005192 <strchr>:
+000000000000566a <strchr>:
 
 char*
 strchr(const char *s, char c)
 {
-    5192:	1141                	addi	sp,sp,-16
-    5194:	e422                	sd	s0,8(sp)
-    5196:	0800                	addi	s0,sp,16
+    566a:	1141                	addi	sp,sp,-16
+    566c:	e422                	sd	s0,8(sp)
+    566e:	0800                	addi	s0,sp,16
   for(; *s; s++)
-    5198:	00054783          	lbu	a5,0(a0)
-    519c:	cb99                	beqz	a5,51b2 <strchr+0x20>
+    5670:	00054783          	lbu	a5,0(a0)
+    5674:	cb99                	beqz	a5,568a <strchr+0x20>
     if(*s == c)
-    519e:	00f58763          	beq	a1,a5,51ac <strchr+0x1a>
+    5676:	00f58763          	beq	a1,a5,5684 <strchr+0x1a>
   for(; *s; s++)
-    51a2:	0505                	addi	a0,a0,1
-    51a4:	00054783          	lbu	a5,0(a0)
-    51a8:	fbfd                	bnez	a5,519e <strchr+0xc>
+    567a:	0505                	addi	a0,a0,1
+    567c:	00054783          	lbu	a5,0(a0)
+    5680:	fbfd                	bnez	a5,5676 <strchr+0xc>
       return (char*)s;
   return 0;
-    51aa:	4501                	li	a0,0
+    5682:	4501                	li	a0,0
 }
-    51ac:	6422                	ld	s0,8(sp)
-    51ae:	0141                	addi	sp,sp,16
-    51b0:	8082                	ret
+    5684:	6422                	ld	s0,8(sp)
+    5686:	0141                	addi	sp,sp,16
+    5688:	8082                	ret
   return 0;
-    51b2:	4501                	li	a0,0
-    51b4:	bfe5                	j	51ac <strchr+0x1a>
+    568a:	4501                	li	a0,0
+    568c:	bfe5                	j	5684 <strchr+0x1a>
 
-00000000000051b6 <gets>:
+000000000000568e <gets>:
 
 char*
 gets(char *buf, int max)
 {
-    51b6:	711d                	addi	sp,sp,-96
-    51b8:	ec86                	sd	ra,88(sp)
-    51ba:	e8a2                	sd	s0,80(sp)
-    51bc:	e4a6                	sd	s1,72(sp)
-    51be:	e0ca                	sd	s2,64(sp)
-    51c0:	fc4e                	sd	s3,56(sp)
-    51c2:	f852                	sd	s4,48(sp)
-    51c4:	f456                	sd	s5,40(sp)
-    51c6:	f05a                	sd	s6,32(sp)
-    51c8:	ec5e                	sd	s7,24(sp)
-    51ca:	1080                	addi	s0,sp,96
-    51cc:	8baa                	mv	s7,a0
-    51ce:	8a2e                	mv	s4,a1
+    568e:	711d                	addi	sp,sp,-96
+    5690:	ec86                	sd	ra,88(sp)
+    5692:	e8a2                	sd	s0,80(sp)
+    5694:	e4a6                	sd	s1,72(sp)
+    5696:	e0ca                	sd	s2,64(sp)
+    5698:	fc4e                	sd	s3,56(sp)
+    569a:	f852                	sd	s4,48(sp)
+    569c:	f456                	sd	s5,40(sp)
+    569e:	f05a                	sd	s6,32(sp)
+    56a0:	ec5e                	sd	s7,24(sp)
+    56a2:	1080                	addi	s0,sp,96
+    56a4:	8baa                	mv	s7,a0
+    56a6:	8a2e                	mv	s4,a1
   int i, cc;
   char c;
 
   for(i=0; i+1 < max; ){
-    51d0:	892a                	mv	s2,a0
-    51d2:	4481                	li	s1,0
+    56a8:	892a                	mv	s2,a0
+    56aa:	4481                	li	s1,0
     cc = read(0, &c, 1);
     if(cc < 1)
       break;
     buf[i++] = c;
     if(c == '\n' || c == '\r')
-    51d4:	4aa9                	li	s5,10
-    51d6:	4b35                	li	s6,13
+    56ac:	4aa9                	li	s5,10
+    56ae:	4b35                	li	s6,13
   for(i=0; i+1 < max; ){
-    51d8:	89a6                	mv	s3,s1
-    51da:	2485                	addiw	s1,s1,1
-    51dc:	0344d863          	bge	s1,s4,520c <gets+0x56>
+    56b0:	89a6                	mv	s3,s1
+    56b2:	2485                	addiw	s1,s1,1
+    56b4:	0344d863          	bge	s1,s4,56e4 <gets+0x56>
     cc = read(0, &c, 1);
-    51e0:	4605                	li	a2,1
-    51e2:	faf40593          	addi	a1,s0,-81
-    51e6:	4501                	li	a0,0
-    51e8:	00000097          	auipc	ra,0x0
-    51ec:	19a080e7          	jalr	410(ra) # 5382 <read>
+    56b8:	4605                	li	a2,1
+    56ba:	faf40593          	addi	a1,s0,-81
+    56be:	4501                	li	a0,0
+    56c0:	00000097          	auipc	ra,0x0
+    56c4:	19a080e7          	jalr	410(ra) # 585a <read>
     if(cc < 1)
-    51f0:	00a05e63          	blez	a0,520c <gets+0x56>
+    56c8:	00a05e63          	blez	a0,56e4 <gets+0x56>
     buf[i++] = c;
-    51f4:	faf44783          	lbu	a5,-81(s0)
-    51f8:	00f90023          	sb	a5,0(s2)
+    56cc:	faf44783          	lbu	a5,-81(s0)
+    56d0:	00f90023          	sb	a5,0(s2)
     if(c == '\n' || c == '\r')
-    51fc:	01578763          	beq	a5,s5,520a <gets+0x54>
-    5200:	0905                	addi	s2,s2,1
-    5202:	fd679be3          	bne	a5,s6,51d8 <gets+0x22>
+    56d4:	01578763          	beq	a5,s5,56e2 <gets+0x54>
+    56d8:	0905                	addi	s2,s2,1
+    56da:	fd679be3          	bne	a5,s6,56b0 <gets+0x22>
   for(i=0; i+1 < max; ){
-    5206:	89a6                	mv	s3,s1
-    5208:	a011                	j	520c <gets+0x56>
-    520a:	89a6                	mv	s3,s1
+    56de:	89a6                	mv	s3,s1
+    56e0:	a011                	j	56e4 <gets+0x56>
+    56e2:	89a6                	mv	s3,s1
       break;
   }
   buf[i] = '\0';
-    520c:	99de                	add	s3,s3,s7
-    520e:	00098023          	sb	zero,0(s3)
+    56e4:	99de                	add	s3,s3,s7
+    56e6:	00098023          	sb	zero,0(s3)
   return buf;
 }
-    5212:	855e                	mv	a0,s7
-    5214:	60e6                	ld	ra,88(sp)
-    5216:	6446                	ld	s0,80(sp)
-    5218:	64a6                	ld	s1,72(sp)
-    521a:	6906                	ld	s2,64(sp)
-    521c:	79e2                	ld	s3,56(sp)
-    521e:	7a42                	ld	s4,48(sp)
-    5220:	7aa2                	ld	s5,40(sp)
-    5222:	7b02                	ld	s6,32(sp)
-    5224:	6be2                	ld	s7,24(sp)
-    5226:	6125                	addi	sp,sp,96
-    5228:	8082                	ret
+    56ea:	855e                	mv	a0,s7
+    56ec:	60e6                	ld	ra,88(sp)
+    56ee:	6446                	ld	s0,80(sp)
+    56f0:	64a6                	ld	s1,72(sp)
+    56f2:	6906                	ld	s2,64(sp)
+    56f4:	79e2                	ld	s3,56(sp)
+    56f6:	7a42                	ld	s4,48(sp)
+    56f8:	7aa2                	ld	s5,40(sp)
+    56fa:	7b02                	ld	s6,32(sp)
+    56fc:	6be2                	ld	s7,24(sp)
+    56fe:	6125                	addi	sp,sp,96
+    5700:	8082                	ret
 
-000000000000522a <stat>:
+0000000000005702 <stat>:
 
 int
 stat(const char *n, struct stat *st)
 {
-    522a:	1101                	addi	sp,sp,-32
-    522c:	ec06                	sd	ra,24(sp)
-    522e:	e822                	sd	s0,16(sp)
-    5230:	e426                	sd	s1,8(sp)
-    5232:	e04a                	sd	s2,0(sp)
-    5234:	1000                	addi	s0,sp,32
-    5236:	892e                	mv	s2,a1
+    5702:	1101                	addi	sp,sp,-32
+    5704:	ec06                	sd	ra,24(sp)
+    5706:	e822                	sd	s0,16(sp)
+    5708:	e426                	sd	s1,8(sp)
+    570a:	e04a                	sd	s2,0(sp)
+    570c:	1000                	addi	s0,sp,32
+    570e:	892e                	mv	s2,a1
   int fd;
   int r;
 
   fd = open(n, O_RDONLY);
-    5238:	4581                	li	a1,0
-    523a:	00000097          	auipc	ra,0x0
-    523e:	170080e7          	jalr	368(ra) # 53aa <open>
+    5710:	4581                	li	a1,0
+    5712:	00000097          	auipc	ra,0x0
+    5716:	170080e7          	jalr	368(ra) # 5882 <open>
   if(fd < 0)
-    5242:	02054563          	bltz	a0,526c <stat+0x42>
-    5246:	84aa                	mv	s1,a0
+    571a:	02054563          	bltz	a0,5744 <stat+0x42>
+    571e:	84aa                	mv	s1,a0
     return -1;
   r = fstat(fd, st);
-    5248:	85ca                	mv	a1,s2
-    524a:	00000097          	auipc	ra,0x0
-    524e:	178080e7          	jalr	376(ra) # 53c2 <fstat>
-    5252:	892a                	mv	s2,a0
+    5720:	85ca                	mv	a1,s2
+    5722:	00000097          	auipc	ra,0x0
+    5726:	178080e7          	jalr	376(ra) # 589a <fstat>
+    572a:	892a                	mv	s2,a0
   close(fd);
-    5254:	8526                	mv	a0,s1
-    5256:	00000097          	auipc	ra,0x0
-    525a:	13c080e7          	jalr	316(ra) # 5392 <close>
+    572c:	8526                	mv	a0,s1
+    572e:	00000097          	auipc	ra,0x0
+    5732:	13c080e7          	jalr	316(ra) # 586a <close>
   return r;
 }
-    525e:	854a                	mv	a0,s2
-    5260:	60e2                	ld	ra,24(sp)
-    5262:	6442                	ld	s0,16(sp)
-    5264:	64a2                	ld	s1,8(sp)
-    5266:	6902                	ld	s2,0(sp)
-    5268:	6105                	addi	sp,sp,32
-    526a:	8082                	ret
+    5736:	854a                	mv	a0,s2
+    5738:	60e2                	ld	ra,24(sp)
+    573a:	6442                	ld	s0,16(sp)
+    573c:	64a2                	ld	s1,8(sp)
+    573e:	6902                	ld	s2,0(sp)
+    5740:	6105                	addi	sp,sp,32
+    5742:	8082                	ret
     return -1;
-    526c:	597d                	li	s2,-1
-    526e:	bfc5                	j	525e <stat+0x34>
+    5744:	597d                	li	s2,-1
+    5746:	bfc5                	j	5736 <stat+0x34>
 
-0000000000005270 <atoi>:
+0000000000005748 <atoi>:
 
 int
 atoi(const char *s)
 {
-    5270:	1141                	addi	sp,sp,-16
-    5272:	e422                	sd	s0,8(sp)
-    5274:	0800                	addi	s0,sp,16
+    5748:	1141                	addi	sp,sp,-16
+    574a:	e422                	sd	s0,8(sp)
+    574c:	0800                	addi	s0,sp,16
   int n;
 
   n = 0;
   while('0' <= *s && *s <= '9')
-    5276:	00054683          	lbu	a3,0(a0)
-    527a:	fd06879b          	addiw	a5,a3,-48
-    527e:	0ff7f793          	zext.b	a5,a5
-    5282:	4625                	li	a2,9
-    5284:	02f66863          	bltu	a2,a5,52b4 <atoi+0x44>
-    5288:	872a                	mv	a4,a0
+    574e:	00054683          	lbu	a3,0(a0)
+    5752:	fd06879b          	addiw	a5,a3,-48
+    5756:	0ff7f793          	zext.b	a5,a5
+    575a:	4625                	li	a2,9
+    575c:	02f66863          	bltu	a2,a5,578c <atoi+0x44>
+    5760:	872a                	mv	a4,a0
   n = 0;
-    528a:	4501                	li	a0,0
+    5762:	4501                	li	a0,0
     n = n*10 + *s++ - '0';
-    528c:	0705                	addi	a4,a4,1
-    528e:	0025179b          	slliw	a5,a0,0x2
-    5292:	9fa9                	addw	a5,a5,a0
-    5294:	0017979b          	slliw	a5,a5,0x1
-    5298:	9fb5                	addw	a5,a5,a3
-    529a:	fd07851b          	addiw	a0,a5,-48
+    5764:	0705                	addi	a4,a4,1
+    5766:	0025179b          	slliw	a5,a0,0x2
+    576a:	9fa9                	addw	a5,a5,a0
+    576c:	0017979b          	slliw	a5,a5,0x1
+    5770:	9fb5                	addw	a5,a5,a3
+    5772:	fd07851b          	addiw	a0,a5,-48
   while('0' <= *s && *s <= '9')
-    529e:	00074683          	lbu	a3,0(a4)
-    52a2:	fd06879b          	addiw	a5,a3,-48
-    52a6:	0ff7f793          	zext.b	a5,a5
-    52aa:	fef671e3          	bgeu	a2,a5,528c <atoi+0x1c>
+    5776:	00074683          	lbu	a3,0(a4)
+    577a:	fd06879b          	addiw	a5,a3,-48
+    577e:	0ff7f793          	zext.b	a5,a5
+    5782:	fef671e3          	bgeu	a2,a5,5764 <atoi+0x1c>
   return n;
 }
-    52ae:	6422                	ld	s0,8(sp)
-    52b0:	0141                	addi	sp,sp,16
-    52b2:	8082                	ret
+    5786:	6422                	ld	s0,8(sp)
+    5788:	0141                	addi	sp,sp,16
+    578a:	8082                	ret
   n = 0;
-    52b4:	4501                	li	a0,0
-    52b6:	bfe5                	j	52ae <atoi+0x3e>
+    578c:	4501                	li	a0,0
+    578e:	bfe5                	j	5786 <atoi+0x3e>
 
-00000000000052b8 <memmove>:
+0000000000005790 <memmove>:
 
 void*
 memmove(void *vdst, const void *vsrc, int n)
 {
-    52b8:	1141                	addi	sp,sp,-16
-    52ba:	e422                	sd	s0,8(sp)
-    52bc:	0800                	addi	s0,sp,16
+    5790:	1141                	addi	sp,sp,-16
+    5792:	e422                	sd	s0,8(sp)
+    5794:	0800                	addi	s0,sp,16
   char *dst;
   const char *src;
 
   dst = vdst;
   src = vsrc;
   if (src > dst) {
-    52be:	02b57463          	bgeu	a0,a1,52e6 <memmove+0x2e>
+    5796:	02b57463          	bgeu	a0,a1,57be <memmove+0x2e>
     while(n-- > 0)
-    52c2:	00c05f63          	blez	a2,52e0 <memmove+0x28>
-    52c6:	1602                	slli	a2,a2,0x20
-    52c8:	9201                	srli	a2,a2,0x20
-    52ca:	00c507b3          	add	a5,a0,a2
+    579a:	00c05f63          	blez	a2,57b8 <memmove+0x28>
+    579e:	1602                	slli	a2,a2,0x20
+    57a0:	9201                	srli	a2,a2,0x20
+    57a2:	00c507b3          	add	a5,a0,a2
   dst = vdst;
-    52ce:	872a                	mv	a4,a0
+    57a6:	872a                	mv	a4,a0
       *dst++ = *src++;
-    52d0:	0585                	addi	a1,a1,1
-    52d2:	0705                	addi	a4,a4,1
-    52d4:	fff5c683          	lbu	a3,-1(a1)
-    52d8:	fed70fa3          	sb	a3,-1(a4)
+    57a8:	0585                	addi	a1,a1,1
+    57aa:	0705                	addi	a4,a4,1
+    57ac:	fff5c683          	lbu	a3,-1(a1)
+    57b0:	fed70fa3          	sb	a3,-1(a4)
     while(n-- > 0)
-    52dc:	fee79ae3          	bne	a5,a4,52d0 <memmove+0x18>
+    57b4:	fee79ae3          	bne	a5,a4,57a8 <memmove+0x18>
     src += n;
     while(n-- > 0)
       *--dst = *--src;
   }
   return vdst;
 }
-    52e0:	6422                	ld	s0,8(sp)
-    52e2:	0141                	addi	sp,sp,16
-    52e4:	8082                	ret
+    57b8:	6422                	ld	s0,8(sp)
+    57ba:	0141                	addi	sp,sp,16
+    57bc:	8082                	ret
     dst += n;
-    52e6:	00c50733          	add	a4,a0,a2
+    57be:	00c50733          	add	a4,a0,a2
     src += n;
-    52ea:	95b2                	add	a1,a1,a2
+    57c2:	95b2                	add	a1,a1,a2
     while(n-- > 0)
-    52ec:	fec05ae3          	blez	a2,52e0 <memmove+0x28>
-    52f0:	fff6079b          	addiw	a5,a2,-1
-    52f4:	1782                	slli	a5,a5,0x20
-    52f6:	9381                	srli	a5,a5,0x20
-    52f8:	fff7c793          	not	a5,a5
-    52fc:	97ba                	add	a5,a5,a4
+    57c4:	fec05ae3          	blez	a2,57b8 <memmove+0x28>
+    57c8:	fff6079b          	addiw	a5,a2,-1
+    57cc:	1782                	slli	a5,a5,0x20
+    57ce:	9381                	srli	a5,a5,0x20
+    57d0:	fff7c793          	not	a5,a5
+    57d4:	97ba                	add	a5,a5,a4
       *--dst = *--src;
-    52fe:	15fd                	addi	a1,a1,-1
-    5300:	177d                	addi	a4,a4,-1
-    5302:	0005c683          	lbu	a3,0(a1)
-    5306:	00d70023          	sb	a3,0(a4)
+    57d6:	15fd                	addi	a1,a1,-1
+    57d8:	177d                	addi	a4,a4,-1
+    57da:	0005c683          	lbu	a3,0(a1)
+    57de:	00d70023          	sb	a3,0(a4)
     while(n-- > 0)
-    530a:	fee79ae3          	bne	a5,a4,52fe <memmove+0x46>
-    530e:	bfc9                	j	52e0 <memmove+0x28>
+    57e2:	fee79ae3          	bne	a5,a4,57d6 <memmove+0x46>
+    57e6:	bfc9                	j	57b8 <memmove+0x28>
 
-0000000000005310 <memcmp>:
+00000000000057e8 <memcmp>:
 
 int
 memcmp(const void *s1, const void *s2, uint n)
 {
-    5310:	1141                	addi	sp,sp,-16
-    5312:	e422                	sd	s0,8(sp)
-    5314:	0800                	addi	s0,sp,16
+    57e8:	1141                	addi	sp,sp,-16
+    57ea:	e422                	sd	s0,8(sp)
+    57ec:	0800                	addi	s0,sp,16
   const char *p1 = s1, *p2 = s2;
   while (n-- > 0) {
-    5316:	ca05                	beqz	a2,5346 <memcmp+0x36>
-    5318:	fff6069b          	addiw	a3,a2,-1
-    531c:	1682                	slli	a3,a3,0x20
-    531e:	9281                	srli	a3,a3,0x20
-    5320:	0685                	addi	a3,a3,1
-    5322:	96aa                	add	a3,a3,a0
+    57ee:	ca05                	beqz	a2,581e <memcmp+0x36>
+    57f0:	fff6069b          	addiw	a3,a2,-1
+    57f4:	1682                	slli	a3,a3,0x20
+    57f6:	9281                	srli	a3,a3,0x20
+    57f8:	0685                	addi	a3,a3,1
+    57fa:	96aa                	add	a3,a3,a0
     if (*p1 != *p2) {
-    5324:	00054783          	lbu	a5,0(a0)
-    5328:	0005c703          	lbu	a4,0(a1)
-    532c:	00e79863          	bne	a5,a4,533c <memcmp+0x2c>
+    57fc:	00054783          	lbu	a5,0(a0)
+    5800:	0005c703          	lbu	a4,0(a1)
+    5804:	00e79863          	bne	a5,a4,5814 <memcmp+0x2c>
       return *p1 - *p2;
     }
     p1++;
-    5330:	0505                	addi	a0,a0,1
+    5808:	0505                	addi	a0,a0,1
     p2++;
-    5332:	0585                	addi	a1,a1,1
+    580a:	0585                	addi	a1,a1,1
   while (n-- > 0) {
-    5334:	fed518e3          	bne	a0,a3,5324 <memcmp+0x14>
+    580c:	fed518e3          	bne	a0,a3,57fc <memcmp+0x14>
   }
   return 0;
-    5338:	4501                	li	a0,0
-    533a:	a019                	j	5340 <memcmp+0x30>
+    5810:	4501                	li	a0,0
+    5812:	a019                	j	5818 <memcmp+0x30>
       return *p1 - *p2;
-    533c:	40e7853b          	subw	a0,a5,a4
+    5814:	40e7853b          	subw	a0,a5,a4
 }
-    5340:	6422                	ld	s0,8(sp)
-    5342:	0141                	addi	sp,sp,16
-    5344:	8082                	ret
+    5818:	6422                	ld	s0,8(sp)
+    581a:	0141                	addi	sp,sp,16
+    581c:	8082                	ret
   return 0;
-    5346:	4501                	li	a0,0
-    5348:	bfe5                	j	5340 <memcmp+0x30>
+    581e:	4501                	li	a0,0
+    5820:	bfe5                	j	5818 <memcmp+0x30>
 
-000000000000534a <memcpy>:
+0000000000005822 <memcpy>:
 
 void *
 memcpy(void *dst, const void *src, uint n)
 {
-    534a:	1141                	addi	sp,sp,-16
-    534c:	e406                	sd	ra,8(sp)
-    534e:	e022                	sd	s0,0(sp)
-    5350:	0800                	addi	s0,sp,16
+    5822:	1141                	addi	sp,sp,-16
+    5824:	e406                	sd	ra,8(sp)
+    5826:	e022                	sd	s0,0(sp)
+    5828:	0800                	addi	s0,sp,16
   return memmove(dst, src, n);
-    5352:	00000097          	auipc	ra,0x0
-    5356:	f66080e7          	jalr	-154(ra) # 52b8 <memmove>
+    582a:	00000097          	auipc	ra,0x0
+    582e:	f66080e7          	jalr	-154(ra) # 5790 <memmove>
 }
-    535a:	60a2                	ld	ra,8(sp)
-    535c:	6402                	ld	s0,0(sp)
-    535e:	0141                	addi	sp,sp,16
-    5360:	8082                	ret
+    5832:	60a2                	ld	ra,8(sp)
+    5834:	6402                	ld	s0,0(sp)
+    5836:	0141                	addi	sp,sp,16
+    5838:	8082                	ret
 
-0000000000005362 <fork>:
+000000000000583a <fork>:
 # generated by usys.pl - do not edit
 #include "kernel/syscall.h"
 .global fork
 fork:
  li a7, SYS_fork
-    5362:	4885                	li	a7,1
+    583a:	4885                	li	a7,1
  ecall
-    5364:	00000073          	ecall
+    583c:	00000073          	ecall
  ret
-    5368:	8082                	ret
+    5840:	8082                	ret
 
-000000000000536a <exit>:
+0000000000005842 <exit>:
 .global exit
 exit:
  li a7, SYS_exit
-    536a:	4889                	li	a7,2
+    5842:	4889                	li	a7,2
  ecall
-    536c:	00000073          	ecall
+    5844:	00000073          	ecall
  ret
-    5370:	8082                	ret
+    5848:	8082                	ret
 
-0000000000005372 <wait>:
+000000000000584a <wait>:
 .global wait
 wait:
  li a7, SYS_wait
-    5372:	488d                	li	a7,3
+    584a:	488d                	li	a7,3
  ecall
-    5374:	00000073          	ecall
+    584c:	00000073          	ecall
  ret
-    5378:	8082                	ret
+    5850:	8082                	ret
 
-000000000000537a <pipe>:
+0000000000005852 <pipe>:
 .global pipe
 pipe:
  li a7, SYS_pipe
-    537a:	4891                	li	a7,4
+    5852:	4891                	li	a7,4
  ecall
-    537c:	00000073          	ecall
+    5854:	00000073          	ecall
  ret
-    5380:	8082                	ret
+    5858:	8082                	ret
 
-0000000000005382 <read>:
+000000000000585a <read>:
 .global read
 read:
  li a7, SYS_read
-    5382:	4895                	li	a7,5
+    585a:	4895                	li	a7,5
  ecall
-    5384:	00000073          	ecall
+    585c:	00000073          	ecall
  ret
-    5388:	8082                	ret
+    5860:	8082                	ret
 
-000000000000538a <write>:
+0000000000005862 <write>:
 .global write
 write:
  li a7, SYS_write
-    538a:	48c1                	li	a7,16
+    5862:	48c1                	li	a7,16
  ecall
-    538c:	00000073          	ecall
+    5864:	00000073          	ecall
  ret
-    5390:	8082                	ret
+    5868:	8082                	ret
 
-0000000000005392 <close>:
+000000000000586a <close>:
 .global close
 close:
  li a7, SYS_close
-    5392:	48d5                	li	a7,21
+    586a:	48d5                	li	a7,21
  ecall
-    5394:	00000073          	ecall
+    586c:	00000073          	ecall
  ret
-    5398:	8082                	ret
+    5870:	8082                	ret
 
-000000000000539a <kill>:
+0000000000005872 <kill>:
 .global kill
 kill:
  li a7, SYS_kill
-    539a:	4899                	li	a7,6
+    5872:	4899                	li	a7,6
  ecall
-    539c:	00000073          	ecall
+    5874:	00000073          	ecall
  ret
-    53a0:	8082                	ret
+    5878:	8082                	ret
 
-00000000000053a2 <exec>:
+000000000000587a <exec>:
 .global exec
 exec:
  li a7, SYS_exec
-    53a2:	489d                	li	a7,7
+    587a:	489d                	li	a7,7
  ecall
-    53a4:	00000073          	ecall
+    587c:	00000073          	ecall
  ret
-    53a8:	8082                	ret
+    5880:	8082                	ret
 
-00000000000053aa <open>:
+0000000000005882 <open>:
 .global open
 open:
  li a7, SYS_open
-    53aa:	48bd                	li	a7,15
+    5882:	48bd                	li	a7,15
  ecall
-    53ac:	00000073          	ecall
+    5884:	00000073          	ecall
  ret
-    53b0:	8082                	ret
+    5888:	8082                	ret
 
-00000000000053b2 <mknod>:
+000000000000588a <mknod>:
 .global mknod
 mknod:
  li a7, SYS_mknod
-    53b2:	48c5                	li	a7,17
+    588a:	48c5                	li	a7,17
  ecall
-    53b4:	00000073          	ecall
+    588c:	00000073          	ecall
  ret
-    53b8:	8082                	ret
+    5890:	8082                	ret
 
-00000000000053ba <unlink>:
+0000000000005892 <unlink>:
 .global unlink
 unlink:
  li a7, SYS_unlink
-    53ba:	48c9                	li	a7,18
+    5892:	48c9                	li	a7,18
  ecall
-    53bc:	00000073          	ecall
+    5894:	00000073          	ecall
  ret
-    53c0:	8082                	ret
+    5898:	8082                	ret
 
-00000000000053c2 <fstat>:
+000000000000589a <fstat>:
 .global fstat
 fstat:
  li a7, SYS_fstat
-    53c2:	48a1                	li	a7,8
+    589a:	48a1                	li	a7,8
  ecall
-    53c4:	00000073          	ecall
+    589c:	00000073          	ecall
  ret
-    53c8:	8082                	ret
+    58a0:	8082                	ret
 
-00000000000053ca <link>:
+00000000000058a2 <link>:
 .global link
 link:
  li a7, SYS_link
-    53ca:	48cd                	li	a7,19
+    58a2:	48cd                	li	a7,19
  ecall
-    53cc:	00000073          	ecall
+    58a4:	00000073          	ecall
  ret
-    53d0:	8082                	ret
+    58a8:	8082                	ret
 
-00000000000053d2 <mkdir>:
+00000000000058aa <mkdir>:
 .global mkdir
 mkdir:
  li a7, SYS_mkdir
-    53d2:	48d1                	li	a7,20
+    58aa:	48d1                	li	a7,20
  ecall
-    53d4:	00000073          	ecall
+    58ac:	00000073          	ecall
  ret
-    53d8:	8082                	ret
+    58b0:	8082                	ret
 
-00000000000053da <chdir>:
+00000000000058b2 <chdir>:
 .global chdir
 chdir:
  li a7, SYS_chdir
-    53da:	48a5                	li	a7,9
+    58b2:	48a5                	li	a7,9
  ecall
-    53dc:	00000073          	ecall
+    58b4:	00000073          	ecall
  ret
-    53e0:	8082                	ret
+    58b8:	8082                	ret
 
-00000000000053e2 <dup>:
+00000000000058ba <dup>:
 .global dup
 dup:
  li a7, SYS_dup
-    53e2:	48a9                	li	a7,10
+    58ba:	48a9                	li	a7,10
  ecall
-    53e4:	00000073          	ecall
+    58bc:	00000073          	ecall
  ret
-    53e8:	8082                	ret
+    58c0:	8082                	ret
 
-00000000000053ea <getpid>:
+00000000000058c2 <getpid>:
 .global getpid
 getpid:
  li a7, SYS_getpid
-    53ea:	48ad                	li	a7,11
+    58c2:	48ad                	li	a7,11
  ecall
-    53ec:	00000073          	ecall
+    58c4:	00000073          	ecall
  ret
-    53f0:	8082                	ret
+    58c8:	8082                	ret
 
-00000000000053f2 <sbrk>:
+00000000000058ca <sbrk>:
 .global sbrk
 sbrk:
  li a7, SYS_sbrk
-    53f2:	48b1                	li	a7,12
+    58ca:	48b1                	li	a7,12
  ecall
-    53f4:	00000073          	ecall
+    58cc:	00000073          	ecall
  ret
-    53f8:	8082                	ret
+    58d0:	8082                	ret
 
-00000000000053fa <sleep>:
+00000000000058d2 <sleep>:
 .global sleep
 sleep:
  li a7, SYS_sleep
-    53fa:	48b5                	li	a7,13
+    58d2:	48b5                	li	a7,13
  ecall
-    53fc:	00000073          	ecall
+    58d4:	00000073          	ecall
  ret
-    5400:	8082                	ret
+    58d8:	8082                	ret
 
-0000000000005402 <uptime>:
+00000000000058da <uptime>:
 .global uptime
 uptime:
  li a7, SYS_uptime
-    5402:	48b9                	li	a7,14
+    58da:	48b9                	li	a7,14
+ ecall
+    58dc:	00000073          	ecall
+ ret
+    58e0:	8082                	ret
+
+00000000000058e2 <trace>:
+.global trace
+trace:
+ li a7, SYS_trace
+    58e2:	48d9                	li	a7,22
  ecall
-    5404:	00000073          	ecall
+    58e4:	00000073          	ecall
  ret
-    5408:	8082                	ret
+    58e8:	8082                	ret
 
-000000000000540a <putc>:
+00000000000058ea <sysinfo>:
+.global sysinfo
+sysinfo:
+ li a7, SYS_sysinfo
+    58ea:	48dd                	li	a7,23
+ ecall
+    58ec:	00000073          	ecall
+ ret
+    58f0:	8082                	ret
+
+00000000000058f2 <putc>:
 
 static char digits[] = "0123456789ABCDEF";
 
 static void
 putc(int fd, char c)
 {
-    540a:	1101                	addi	sp,sp,-32
-    540c:	ec06                	sd	ra,24(sp)
-    540e:	e822                	sd	s0,16(sp)
-    5410:	1000                	addi	s0,sp,32
-    5412:	feb407a3          	sb	a1,-17(s0)
+    58f2:	1101                	addi	sp,sp,-32
+    58f4:	ec06                	sd	ra,24(sp)
+    58f6:	e822                	sd	s0,16(sp)
+    58f8:	1000                	addi	s0,sp,32
+    58fa:	feb407a3          	sb	a1,-17(s0)
   write(fd, &c, 1);
-    5416:	4605                	li	a2,1
-    5418:	fef40593          	addi	a1,s0,-17
-    541c:	00000097          	auipc	ra,0x0
-    5420:	f6e080e7          	jalr	-146(ra) # 538a <write>
-}
-    5424:	60e2                	ld	ra,24(sp)
-    5426:	6442                	ld	s0,16(sp)
-    5428:	6105                	addi	sp,sp,32
-    542a:	8082                	ret
+    58fe:	4605                	li	a2,1
+    5900:	fef40593          	addi	a1,s0,-17
+    5904:	00000097          	auipc	ra,0x0
+    5908:	f5e080e7          	jalr	-162(ra) # 5862 <write>
+}
+    590c:	60e2                	ld	ra,24(sp)
+    590e:	6442                	ld	s0,16(sp)
+    5910:	6105                	addi	sp,sp,32
+    5912:	8082                	ret
 
-000000000000542c <printint>:
+0000000000005914 <printint>:
 
 static void
 printint(int fd, int xx, int base, int sgn)
 {
-    542c:	7139                	addi	sp,sp,-64
-    542e:	fc06                	sd	ra,56(sp)
-    5430:	f822                	sd	s0,48(sp)
-    5432:	f426                	sd	s1,40(sp)
-    5434:	f04a                	sd	s2,32(sp)
-    5436:	ec4e                	sd	s3,24(sp)
-    5438:	0080                	addi	s0,sp,64
-    543a:	84aa                	mv	s1,a0
+    5914:	7139                	addi	sp,sp,-64
+    5916:	fc06                	sd	ra,56(sp)
+    5918:	f822                	sd	s0,48(sp)
+    591a:	f426                	sd	s1,40(sp)
+    591c:	f04a                	sd	s2,32(sp)
+    591e:	ec4e                	sd	s3,24(sp)
+    5920:	0080                	addi	s0,sp,64
+    5922:	84aa                	mv	s1,a0
   char buf[16];
   int i, neg;
   uint x;
 
   neg = 0;
   if(sgn && xx < 0){
-    543c:	c299                	beqz	a3,5442 <printint+0x16>
-    543e:	0805c963          	bltz	a1,54d0 <printint+0xa4>
+    5924:	c299                	beqz	a3,592a <printint+0x16>
+    5926:	0805c963          	bltz	a1,59b8 <printint+0xa4>
     neg = 1;
     x = -xx;
   } else {
     x = xx;
-    5442:	2581                	sext.w	a1,a1
+    592a:	2581                	sext.w	a1,a1
   neg = 0;
-    5444:	4881                	li	a7,0
-    5446:	fc040693          	addi	a3,s0,-64
+    592c:	4881                	li	a7,0
+    592e:	fc040693          	addi	a3,s0,-64
   }
 
   i = 0;
-    544a:	4701                	li	a4,0
+    5932:	4701                	li	a4,0
   do{
     buf[i++] = digits[x % base];
-    544c:	2601                	sext.w	a2,a2
-    544e:	00003517          	auipc	a0,0x3
-    5452:	ae250513          	addi	a0,a0,-1310 # 7f30 <digits>
-    5456:	883a                	mv	a6,a4
-    5458:	2705                	addiw	a4,a4,1
-    545a:	02c5f7bb          	remuw	a5,a1,a2
-    545e:	1782                	slli	a5,a5,0x20
-    5460:	9381                	srli	a5,a5,0x20
-    5462:	97aa                	add	a5,a5,a0
-    5464:	0007c783          	lbu	a5,0(a5)
-    5468:	00f68023          	sb	a5,0(a3)
+    5934:	2601                	sext.w	a2,a2
+    5936:	00003517          	auipc	a0,0x3
+    593a:	c7250513          	addi	a0,a0,-910 # 85a8 <digits>
+    593e:	883a                	mv	a6,a4
+    5940:	2705                	addiw	a4,a4,1
+    5942:	02c5f7bb          	remuw	a5,a1,a2
+    5946:	1782                	slli	a5,a5,0x20
+    5948:	9381                	srli	a5,a5,0x20
+    594a:	97aa                	add	a5,a5,a0
+    594c:	0007c783          	lbu	a5,0(a5)
+    5950:	00f68023          	sb	a5,0(a3)
   }while((x /= base) != 0);
-    546c:	0005879b          	sext.w	a5,a1
-    5470:	02c5d5bb          	divuw	a1,a1,a2
-    5474:	0685                	addi	a3,a3,1
-    5476:	fec7f0e3          	bgeu	a5,a2,5456 <printint+0x2a>
+    5954:	0005879b          	sext.w	a5,a1
+    5958:	02c5d5bb          	divuw	a1,a1,a2
+    595c:	0685                	addi	a3,a3,1
+    595e:	fec7f0e3          	bgeu	a5,a2,593e <printint+0x2a>
   if(neg)
-    547a:	00088c63          	beqz	a7,5492 <printint+0x66>
+    5962:	00088c63          	beqz	a7,597a <printint+0x66>
     buf[i++] = '-';
-    547e:	fd070793          	addi	a5,a4,-48
-    5482:	00878733          	add	a4,a5,s0
-    5486:	02d00793          	li	a5,45
-    548a:	fef70823          	sb	a5,-16(a4)
-    548e:	0028071b          	addiw	a4,a6,2
+    5966:	fd070793          	addi	a5,a4,-48
+    596a:	00878733          	add	a4,a5,s0
+    596e:	02d00793          	li	a5,45
+    5972:	fef70823          	sb	a5,-16(a4)
+    5976:	0028071b          	addiw	a4,a6,2
 
   while(--i >= 0)
-    5492:	02e05863          	blez	a4,54c2 <printint+0x96>
-    5496:	fc040793          	addi	a5,s0,-64
-    549a:	00e78933          	add	s2,a5,a4
-    549e:	fff78993          	addi	s3,a5,-1
-    54a2:	99ba                	add	s3,s3,a4
-    54a4:	377d                	addiw	a4,a4,-1
-    54a6:	1702                	slli	a4,a4,0x20
-    54a8:	9301                	srli	a4,a4,0x20
-    54aa:	40e989b3          	sub	s3,s3,a4
+    597a:	02e05863          	blez	a4,59aa <printint+0x96>
+    597e:	fc040793          	addi	a5,s0,-64
+    5982:	00e78933          	add	s2,a5,a4
+    5986:	fff78993          	addi	s3,a5,-1
+    598a:	99ba                	add	s3,s3,a4
+    598c:	377d                	addiw	a4,a4,-1
+    598e:	1702                	slli	a4,a4,0x20
+    5990:	9301                	srli	a4,a4,0x20
+    5992:	40e989b3          	sub	s3,s3,a4
     putc(fd, buf[i]);
-    54ae:	fff94583          	lbu	a1,-1(s2)
-    54b2:	8526                	mv	a0,s1
-    54b4:	00000097          	auipc	ra,0x0
-    54b8:	f56080e7          	jalr	-170(ra) # 540a <putc>
+    5996:	fff94583          	lbu	a1,-1(s2)
+    599a:	8526                	mv	a0,s1
+    599c:	00000097          	auipc	ra,0x0
+    59a0:	f56080e7          	jalr	-170(ra) # 58f2 <putc>
   while(--i >= 0)
-    54bc:	197d                	addi	s2,s2,-1
-    54be:	ff3918e3          	bne	s2,s3,54ae <printint+0x82>
+    59a4:	197d                	addi	s2,s2,-1
+    59a6:	ff3918e3          	bne	s2,s3,5996 <printint+0x82>
 }
-    54c2:	70e2                	ld	ra,56(sp)
-    54c4:	7442                	ld	s0,48(sp)
-    54c6:	74a2                	ld	s1,40(sp)
-    54c8:	7902                	ld	s2,32(sp)
-    54ca:	69e2                	ld	s3,24(sp)
-    54cc:	6121                	addi	sp,sp,64
-    54ce:	8082                	ret
+    59aa:	70e2                	ld	ra,56(sp)
+    59ac:	7442                	ld	s0,48(sp)
+    59ae:	74a2                	ld	s1,40(sp)
+    59b0:	7902                	ld	s2,32(sp)
+    59b2:	69e2                	ld	s3,24(sp)
+    59b4:	6121                	addi	sp,sp,64
+    59b6:	8082                	ret
     x = -xx;
-    54d0:	40b005bb          	negw	a1,a1
+    59b8:	40b005bb          	negw	a1,a1
     neg = 1;
-    54d4:	4885                	li	a7,1
+    59bc:	4885                	li	a7,1
     x = -xx;
-    54d6:	bf85                	j	5446 <printint+0x1a>
+    59be:	bf85                	j	592e <printint+0x1a>
 
-00000000000054d8 <vprintf>:
+00000000000059c0 <vprintf>:
 }
 
 // Print to the given fd. Only understands %d, %x, %p, %s.
 void
 vprintf(int fd, const char *fmt, va_list ap)
 {
-    54d8:	7119                	addi	sp,sp,-128
-    54da:	fc86                	sd	ra,120(sp)
-    54dc:	f8a2                	sd	s0,112(sp)
-    54de:	f4a6                	sd	s1,104(sp)
-    54e0:	f0ca                	sd	s2,96(sp)
-    54e2:	ecce                	sd	s3,88(sp)
-    54e4:	e8d2                	sd	s4,80(sp)
-    54e6:	e4d6                	sd	s5,72(sp)
-    54e8:	e0da                	sd	s6,64(sp)
-    54ea:	fc5e                	sd	s7,56(sp)
-    54ec:	f862                	sd	s8,48(sp)
-    54ee:	f466                	sd	s9,40(sp)
-    54f0:	f06a                	sd	s10,32(sp)
-    54f2:	ec6e                	sd	s11,24(sp)
-    54f4:	0100                	addi	s0,sp,128
+    59c0:	7119                	addi	sp,sp,-128
+    59c2:	fc86                	sd	ra,120(sp)
+    59c4:	f8a2                	sd	s0,112(sp)
+    59c6:	f4a6                	sd	s1,104(sp)
+    59c8:	f0ca                	sd	s2,96(sp)
+    59ca:	ecce                	sd	s3,88(sp)
+    59cc:	e8d2                	sd	s4,80(sp)
+    59ce:	e4d6                	sd	s5,72(sp)
+    59d0:	e0da                	sd	s6,64(sp)
+    59d2:	fc5e                	sd	s7,56(sp)
+    59d4:	f862                	sd	s8,48(sp)
+    59d6:	f466                	sd	s9,40(sp)
+    59d8:	f06a                	sd	s10,32(sp)
+    59da:	ec6e                	sd	s11,24(sp)
+    59dc:	0100                	addi	s0,sp,128
   char *s;
   int c, i, state;
 
   state = 0;
   for(i = 0; fmt[i]; i++){
-    54f6:	0005c903          	lbu	s2,0(a1)
-    54fa:	18090f63          	beqz	s2,5698 <vprintf+0x1c0>
-    54fe:	8aaa                	mv	s5,a0
-    5500:	8b32                	mv	s6,a2
-    5502:	00158493          	addi	s1,a1,1
+    59de:	0005c903          	lbu	s2,0(a1)
+    59e2:	18090f63          	beqz	s2,5b80 <vprintf+0x1c0>
+    59e6:	8aaa                	mv	s5,a0
+    59e8:	8b32                	mv	s6,a2
+    59ea:	00158493          	addi	s1,a1,1
   state = 0;
-    5506:	4981                	li	s3,0
+    59ee:	4981                	li	s3,0
       if(c == '%'){
         state = '%';
       } else {
         putc(fd, c);
       }
     } else if(state == '%'){
-    5508:	02500a13          	li	s4,37
-    550c:	4c55                	li	s8,21
-    550e:	00003c97          	auipc	s9,0x3
-    5512:	9cac8c93          	addi	s9,s9,-1590 # 7ed8 <malloc+0x273c>
+    59f0:	02500a13          	li	s4,37
+    59f4:	4c55                	li	s8,21
+    59f6:	00003c97          	auipc	s9,0x3
+    59fa:	b5ac8c93          	addi	s9,s9,-1190 # 8550 <malloc+0x28cc>
         printptr(fd, va_arg(ap, uint64));
       } else if(c == 's'){
         s = va_arg(ap, char*);
         if(s == 0)
           s = "(null)";
         while(*s != 0){
-    5516:	02800d93          	li	s11,40
+    59fe:	02800d93          	li	s11,40
   putc(fd, 'x');
-    551a:	4d41                	li	s10,16
+    5a02:	4d41                	li	s10,16
     putc(fd, digits[x >> (sizeof(uint64) * 8 - 4)]);
-    551c:	00003b97          	auipc	s7,0x3
-    5520:	a14b8b93          	addi	s7,s7,-1516 # 7f30 <digits>
-    5524:	a839                	j	5542 <vprintf+0x6a>
+    5a04:	00003b97          	auipc	s7,0x3
+    5a08:	ba4b8b93          	addi	s7,s7,-1116 # 85a8 <digits>
+    5a0c:	a839                	j	5a2a <vprintf+0x6a>
         putc(fd, c);
-    5526:	85ca                	mv	a1,s2
-    5528:	8556                	mv	a0,s5
-    552a:	00000097          	auipc	ra,0x0
-    552e:	ee0080e7          	jalr	-288(ra) # 540a <putc>
-    5532:	a019                	j	5538 <vprintf+0x60>
+    5a0e:	85ca                	mv	a1,s2
+    5a10:	8556                	mv	a0,s5
+    5a12:	00000097          	auipc	ra,0x0
+    5a16:	ee0080e7          	jalr	-288(ra) # 58f2 <putc>
+    5a1a:	a019                	j	5a20 <vprintf+0x60>
     } else if(state == '%'){
-    5534:	01498d63          	beq	s3,s4,554e <vprintf+0x76>
+    5a1c:	01498d63          	beq	s3,s4,5a36 <vprintf+0x76>
   for(i = 0; fmt[i]; i++){
-    5538:	0485                	addi	s1,s1,1
-    553a:	fff4c903          	lbu	s2,-1(s1)
-    553e:	14090d63          	beqz	s2,5698 <vprintf+0x1c0>
+    5a20:	0485                	addi	s1,s1,1
+    5a22:	fff4c903          	lbu	s2,-1(s1)
+    5a26:	14090d63          	beqz	s2,5b80 <vprintf+0x1c0>
     if(state == 0){
-    5542:	fe0999e3          	bnez	s3,5534 <vprintf+0x5c>
+    5a2a:	fe0999e3          	bnez	s3,5a1c <vprintf+0x5c>
       if(c == '%'){
-    5546:	ff4910e3          	bne	s2,s4,5526 <vprintf+0x4e>
+    5a2e:	ff4910e3          	bne	s2,s4,5a0e <vprintf+0x4e>
         state = '%';
-    554a:	89d2                	mv	s3,s4
-    554c:	b7f5                	j	5538 <vprintf+0x60>
+    5a32:	89d2                	mv	s3,s4
+    5a34:	b7f5                	j	5a20 <vprintf+0x60>
       if(c == 'd'){
-    554e:	11490c63          	beq	s2,s4,5666 <vprintf+0x18e>
-    5552:	f9d9079b          	addiw	a5,s2,-99
-    5556:	0ff7f793          	zext.b	a5,a5
-    555a:	10fc6e63          	bltu	s8,a5,5676 <vprintf+0x19e>
-    555e:	f9d9079b          	addiw	a5,s2,-99
-    5562:	0ff7f713          	zext.b	a4,a5
-    5566:	10ec6863          	bltu	s8,a4,5676 <vprintf+0x19e>
-    556a:	00271793          	slli	a5,a4,0x2
-    556e:	97e6                	add	a5,a5,s9
-    5570:	439c                	lw	a5,0(a5)
-    5572:	97e6                	add	a5,a5,s9
-    5574:	8782                	jr	a5
+    5a36:	11490c63          	beq	s2,s4,5b4e <vprintf+0x18e>
+    5a3a:	f9d9079b          	addiw	a5,s2,-99
+    5a3e:	0ff7f793          	zext.b	a5,a5
+    5a42:	10fc6e63          	bltu	s8,a5,5b5e <vprintf+0x19e>
+    5a46:	f9d9079b          	addiw	a5,s2,-99
+    5a4a:	0ff7f713          	zext.b	a4,a5
+    5a4e:	10ec6863          	bltu	s8,a4,5b5e <vprintf+0x19e>
+    5a52:	00271793          	slli	a5,a4,0x2
+    5a56:	97e6                	add	a5,a5,s9
+    5a58:	439c                	lw	a5,0(a5)
+    5a5a:	97e6                	add	a5,a5,s9
+    5a5c:	8782                	jr	a5
         printint(fd, va_arg(ap, int), 10, 1);
-    5576:	008b0913          	addi	s2,s6,8
-    557a:	4685                	li	a3,1
-    557c:	4629                	li	a2,10
-    557e:	000b2583          	lw	a1,0(s6)
-    5582:	8556                	mv	a0,s5
-    5584:	00000097          	auipc	ra,0x0
-    5588:	ea8080e7          	jalr	-344(ra) # 542c <printint>
-    558c:	8b4a                	mv	s6,s2
+    5a5e:	008b0913          	addi	s2,s6,8
+    5a62:	4685                	li	a3,1
+    5a64:	4629                	li	a2,10
+    5a66:	000b2583          	lw	a1,0(s6)
+    5a6a:	8556                	mv	a0,s5
+    5a6c:	00000097          	auipc	ra,0x0
+    5a70:	ea8080e7          	jalr	-344(ra) # 5914 <printint>
+    5a74:	8b4a                	mv	s6,s2
       } else {
         // Unknown % sequence.  Print it to draw attention.
         putc(fd, '%');
         putc(fd, c);
       }
       state = 0;
-    558e:	4981                	li	s3,0
-    5590:	b765                	j	5538 <vprintf+0x60>
+    5a76:	4981                	li	s3,0
+    5a78:	b765                	j	5a20 <vprintf+0x60>
         printint(fd, va_arg(ap, uint64), 10, 0);
-    5592:	008b0913          	addi	s2,s6,8
-    5596:	4681                	li	a3,0
-    5598:	4629                	li	a2,10
-    559a:	000b2583          	lw	a1,0(s6)
-    559e:	8556                	mv	a0,s5
-    55a0:	00000097          	auipc	ra,0x0
-    55a4:	e8c080e7          	jalr	-372(ra) # 542c <printint>
-    55a8:	8b4a                	mv	s6,s2
+    5a7a:	008b0913          	addi	s2,s6,8
+    5a7e:	4681                	li	a3,0
+    5a80:	4629                	li	a2,10
+    5a82:	000b2583          	lw	a1,0(s6)
+    5a86:	8556                	mv	a0,s5
+    5a88:	00000097          	auipc	ra,0x0
+    5a8c:	e8c080e7          	jalr	-372(ra) # 5914 <printint>
+    5a90:	8b4a                	mv	s6,s2
       state = 0;
-    55aa:	4981                	li	s3,0
-    55ac:	b771                	j	5538 <vprintf+0x60>
+    5a92:	4981                	li	s3,0
+    5a94:	b771                	j	5a20 <vprintf+0x60>
         printint(fd, va_arg(ap, int), 16, 0);
-    55ae:	008b0913          	addi	s2,s6,8
-    55b2:	4681                	li	a3,0
-    55b4:	866a                	mv	a2,s10
-    55b6:	000b2583          	lw	a1,0(s6)
-    55ba:	8556                	mv	a0,s5
-    55bc:	00000097          	auipc	ra,0x0
-    55c0:	e70080e7          	jalr	-400(ra) # 542c <printint>
-    55c4:	8b4a                	mv	s6,s2
+    5a96:	008b0913          	addi	s2,s6,8
+    5a9a:	4681                	li	a3,0
+    5a9c:	866a                	mv	a2,s10
+    5a9e:	000b2583          	lw	a1,0(s6)
+    5aa2:	8556                	mv	a0,s5
+    5aa4:	00000097          	auipc	ra,0x0
+    5aa8:	e70080e7          	jalr	-400(ra) # 5914 <printint>
+    5aac:	8b4a                	mv	s6,s2
       state = 0;
-    55c6:	4981                	li	s3,0
-    55c8:	bf85                	j	5538 <vprintf+0x60>
+    5aae:	4981                	li	s3,0
+    5ab0:	bf85                	j	5a20 <vprintf+0x60>
         printptr(fd, va_arg(ap, uint64));
-    55ca:	008b0793          	addi	a5,s6,8
-    55ce:	f8f43423          	sd	a5,-120(s0)
-    55d2:	000b3983          	ld	s3,0(s6)
+    5ab2:	008b0793          	addi	a5,s6,8
+    5ab6:	f8f43423          	sd	a5,-120(s0)
+    5aba:	000b3983          	ld	s3,0(s6)
   putc(fd, '0');
-    55d6:	03000593          	li	a1,48
-    55da:	8556                	mv	a0,s5
-    55dc:	00000097          	auipc	ra,0x0
-    55e0:	e2e080e7          	jalr	-466(ra) # 540a <putc>
+    5abe:	03000593          	li	a1,48
+    5ac2:	8556                	mv	a0,s5
+    5ac4:	00000097          	auipc	ra,0x0
+    5ac8:	e2e080e7          	jalr	-466(ra) # 58f2 <putc>
   putc(fd, 'x');
-    55e4:	07800593          	li	a1,120
-    55e8:	8556                	mv	a0,s5
-    55ea:	00000097          	auipc	ra,0x0
-    55ee:	e20080e7          	jalr	-480(ra) # 540a <putc>
-    55f2:	896a                	mv	s2,s10
+    5acc:	07800593          	li	a1,120
+    5ad0:	8556                	mv	a0,s5
+    5ad2:	00000097          	auipc	ra,0x0
+    5ad6:	e20080e7          	jalr	-480(ra) # 58f2 <putc>
+    5ada:	896a                	mv	s2,s10
     putc(fd, digits[x >> (sizeof(uint64) * 8 - 4)]);
-    55f4:	03c9d793          	srli	a5,s3,0x3c
-    55f8:	97de                	add	a5,a5,s7
-    55fa:	0007c583          	lbu	a1,0(a5)
-    55fe:	8556                	mv	a0,s5
-    5600:	00000097          	auipc	ra,0x0
-    5604:	e0a080e7          	jalr	-502(ra) # 540a <putc>
+    5adc:	03c9d793          	srli	a5,s3,0x3c
+    5ae0:	97de                	add	a5,a5,s7
+    5ae2:	0007c583          	lbu	a1,0(a5)
+    5ae6:	8556                	mv	a0,s5
+    5ae8:	00000097          	auipc	ra,0x0
+    5aec:	e0a080e7          	jalr	-502(ra) # 58f2 <putc>
   for (i = 0; i < (sizeof(uint64) * 2); i++, x <<= 4)
-    5608:	0992                	slli	s3,s3,0x4
-    560a:	397d                	addiw	s2,s2,-1
-    560c:	fe0914e3          	bnez	s2,55f4 <vprintf+0x11c>
+    5af0:	0992                	slli	s3,s3,0x4
+    5af2:	397d                	addiw	s2,s2,-1
+    5af4:	fe0914e3          	bnez	s2,5adc <vprintf+0x11c>
         printptr(fd, va_arg(ap, uint64));
-    5610:	f8843b03          	ld	s6,-120(s0)
+    5af8:	f8843b03          	ld	s6,-120(s0)
       state = 0;
-    5614:	4981                	li	s3,0
-    5616:	b70d                	j	5538 <vprintf+0x60>
+    5afc:	4981                	li	s3,0
+    5afe:	b70d                	j	5a20 <vprintf+0x60>
         s = va_arg(ap, char*);
-    5618:	008b0913          	addi	s2,s6,8
-    561c:	000b3983          	ld	s3,0(s6)
+    5b00:	008b0913          	addi	s2,s6,8
+    5b04:	000b3983          	ld	s3,0(s6)
         if(s == 0)
-    5620:	02098163          	beqz	s3,5642 <vprintf+0x16a>
+    5b08:	02098163          	beqz	s3,5b2a <vprintf+0x16a>
         while(*s != 0){
-    5624:	0009c583          	lbu	a1,0(s3)
-    5628:	c5ad                	beqz	a1,5692 <vprintf+0x1ba>
+    5b0c:	0009c583          	lbu	a1,0(s3)
+    5b10:	c5ad                	beqz	a1,5b7a <vprintf+0x1ba>
           putc(fd, *s);
-    562a:	8556                	mv	a0,s5
-    562c:	00000097          	auipc	ra,0x0
-    5630:	dde080e7          	jalr	-546(ra) # 540a <putc>
+    5b12:	8556                	mv	a0,s5
+    5b14:	00000097          	auipc	ra,0x0
+    5b18:	dde080e7          	jalr	-546(ra) # 58f2 <putc>
           s++;
-    5634:	0985                	addi	s3,s3,1
+    5b1c:	0985                	addi	s3,s3,1
         while(*s != 0){
-    5636:	0009c583          	lbu	a1,0(s3)
-    563a:	f9e5                	bnez	a1,562a <vprintf+0x152>
+    5b1e:	0009c583          	lbu	a1,0(s3)
+    5b22:	f9e5                	bnez	a1,5b12 <vprintf+0x152>
         s = va_arg(ap, char*);
-    563c:	8b4a                	mv	s6,s2
+    5b24:	8b4a                	mv	s6,s2
       state = 0;
-    563e:	4981                	li	s3,0
-    5640:	bde5                	j	5538 <vprintf+0x60>
+    5b26:	4981                	li	s3,0
+    5b28:	bde5                	j	5a20 <vprintf+0x60>
           s = "(null)";
-    5642:	00003997          	auipc	s3,0x3
-    5646:	88e98993          	addi	s3,s3,-1906 # 7ed0 <malloc+0x2734>
+    5b2a:	00003997          	auipc	s3,0x3
+    5b2e:	a1e98993          	addi	s3,s3,-1506 # 8548 <malloc+0x28c4>
         while(*s != 0){
-    564a:	85ee                	mv	a1,s11
-    564c:	bff9                	j	562a <vprintf+0x152>
+    5b32:	85ee                	mv	a1,s11
+    5b34:	bff9                	j	5b12 <vprintf+0x152>
         putc(fd, va_arg(ap, uint));
-    564e:	008b0913          	addi	s2,s6,8
-    5652:	000b4583          	lbu	a1,0(s6)
-    5656:	8556                	mv	a0,s5
-    5658:	00000097          	auipc	ra,0x0
-    565c:	db2080e7          	jalr	-590(ra) # 540a <putc>
-    5660:	8b4a                	mv	s6,s2
+    5b36:	008b0913          	addi	s2,s6,8
+    5b3a:	000b4583          	lbu	a1,0(s6)
+    5b3e:	8556                	mv	a0,s5
+    5b40:	00000097          	auipc	ra,0x0
+    5b44:	db2080e7          	jalr	-590(ra) # 58f2 <putc>
+    5b48:	8b4a                	mv	s6,s2
       state = 0;
-    5662:	4981                	li	s3,0
-    5664:	bdd1                	j	5538 <vprintf+0x60>
+    5b4a:	4981                	li	s3,0
+    5b4c:	bdd1                	j	5a20 <vprintf+0x60>
         putc(fd, c);
-    5666:	85d2                	mv	a1,s4
-    5668:	8556                	mv	a0,s5
-    566a:	00000097          	auipc	ra,0x0
-    566e:	da0080e7          	jalr	-608(ra) # 540a <putc>
+    5b4e:	85d2                	mv	a1,s4
+    5b50:	8556                	mv	a0,s5
+    5b52:	00000097          	auipc	ra,0x0
+    5b56:	da0080e7          	jalr	-608(ra) # 58f2 <putc>
       state = 0;
-    5672:	4981                	li	s3,0
-    5674:	b5d1                	j	5538 <vprintf+0x60>
+    5b5a:	4981                	li	s3,0
+    5b5c:	b5d1                	j	5a20 <vprintf+0x60>
         putc(fd, '%');
-    5676:	85d2                	mv	a1,s4
-    5678:	8556                	mv	a0,s5
-    567a:	00000097          	auipc	ra,0x0
-    567e:	d90080e7          	jalr	-624(ra) # 540a <putc>
+    5b5e:	85d2                	mv	a1,s4
+    5b60:	8556                	mv	a0,s5
+    5b62:	00000097          	auipc	ra,0x0
+    5b66:	d90080e7          	jalr	-624(ra) # 58f2 <putc>
         putc(fd, c);
-    5682:	85ca                	mv	a1,s2
-    5684:	8556                	mv	a0,s5
-    5686:	00000097          	auipc	ra,0x0
-    568a:	d84080e7          	jalr	-636(ra) # 540a <putc>
+    5b6a:	85ca                	mv	a1,s2
+    5b6c:	8556                	mv	a0,s5
+    5b6e:	00000097          	auipc	ra,0x0
+    5b72:	d84080e7          	jalr	-636(ra) # 58f2 <putc>
       state = 0;
-    568e:	4981                	li	s3,0
-    5690:	b565                	j	5538 <vprintf+0x60>
+    5b76:	4981                	li	s3,0
+    5b78:	b565                	j	5a20 <vprintf+0x60>
         s = va_arg(ap, char*);
-    5692:	8b4a                	mv	s6,s2
+    5b7a:	8b4a                	mv	s6,s2
       state = 0;
-    5694:	4981                	li	s3,0
-    5696:	b54d                	j	5538 <vprintf+0x60>
+    5b7c:	4981                	li	s3,0
+    5b7e:	b54d                	j	5a20 <vprintf+0x60>
     }
   }
 }
-    5698:	70e6                	ld	ra,120(sp)
-    569a:	7446                	ld	s0,112(sp)
-    569c:	74a6                	ld	s1,104(sp)
-    569e:	7906                	ld	s2,96(sp)
-    56a0:	69e6                	ld	s3,88(sp)
-    56a2:	6a46                	ld	s4,80(sp)
-    56a4:	6aa6                	ld	s5,72(sp)
-    56a6:	6b06                	ld	s6,64(sp)
-    56a8:	7be2                	ld	s7,56(sp)
-    56aa:	7c42                	ld	s8,48(sp)
-    56ac:	7ca2                	ld	s9,40(sp)
-    56ae:	7d02                	ld	s10,32(sp)
-    56b0:	6de2                	ld	s11,24(sp)
-    56b2:	6109                	addi	sp,sp,128
-    56b4:	8082                	ret
+    5b80:	70e6                	ld	ra,120(sp)
+    5b82:	7446                	ld	s0,112(sp)
+    5b84:	74a6                	ld	s1,104(sp)
+    5b86:	7906                	ld	s2,96(sp)
+    5b88:	69e6                	ld	s3,88(sp)
+    5b8a:	6a46                	ld	s4,80(sp)
+    5b8c:	6aa6                	ld	s5,72(sp)
+    5b8e:	6b06                	ld	s6,64(sp)
+    5b90:	7be2                	ld	s7,56(sp)
+    5b92:	7c42                	ld	s8,48(sp)
+    5b94:	7ca2                	ld	s9,40(sp)
+    5b96:	7d02                	ld	s10,32(sp)
+    5b98:	6de2                	ld	s11,24(sp)
+    5b9a:	6109                	addi	sp,sp,128
+    5b9c:	8082                	ret
 
-00000000000056b6 <fprintf>:
+0000000000005b9e <fprintf>:
 
 void
 fprintf(int fd, const char *fmt, ...)
 {
-    56b6:	715d                	addi	sp,sp,-80
-    56b8:	ec06                	sd	ra,24(sp)
-    56ba:	e822                	sd	s0,16(sp)
-    56bc:	1000                	addi	s0,sp,32
-    56be:	e010                	sd	a2,0(s0)
-    56c0:	e414                	sd	a3,8(s0)
-    56c2:	e818                	sd	a4,16(s0)
-    56c4:	ec1c                	sd	a5,24(s0)
-    56c6:	03043023          	sd	a6,32(s0)
-    56ca:	03143423          	sd	a7,40(s0)
+    5b9e:	715d                	addi	sp,sp,-80
+    5ba0:	ec06                	sd	ra,24(sp)
+    5ba2:	e822                	sd	s0,16(sp)
+    5ba4:	1000                	addi	s0,sp,32
+    5ba6:	e010                	sd	a2,0(s0)
+    5ba8:	e414                	sd	a3,8(s0)
+    5baa:	e818                	sd	a4,16(s0)
+    5bac:	ec1c                	sd	a5,24(s0)
+    5bae:	03043023          	sd	a6,32(s0)
+    5bb2:	03143423          	sd	a7,40(s0)
   va_list ap;
 
   va_start(ap, fmt);
-    56ce:	fe843423          	sd	s0,-24(s0)
+    5bb6:	fe843423          	sd	s0,-24(s0)
   vprintf(fd, fmt, ap);
-    56d2:	8622                	mv	a2,s0
-    56d4:	00000097          	auipc	ra,0x0
-    56d8:	e04080e7          	jalr	-508(ra) # 54d8 <vprintf>
-}
-    56dc:	60e2                	ld	ra,24(sp)
-    56de:	6442                	ld	s0,16(sp)
-    56e0:	6161                	addi	sp,sp,80
-    56e2:	8082                	ret
+    5bba:	8622                	mv	a2,s0
+    5bbc:	00000097          	auipc	ra,0x0
+    5bc0:	e04080e7          	jalr	-508(ra) # 59c0 <vprintf>
+}
+    5bc4:	60e2                	ld	ra,24(sp)
+    5bc6:	6442                	ld	s0,16(sp)
+    5bc8:	6161                	addi	sp,sp,80
+    5bca:	8082                	ret
 
-00000000000056e4 <printf>:
+0000000000005bcc <printf>:
 
 void
 printf(const char *fmt, ...)
 {
-    56e4:	711d                	addi	sp,sp,-96
-    56e6:	ec06                	sd	ra,24(sp)
-    56e8:	e822                	sd	s0,16(sp)
-    56ea:	1000                	addi	s0,sp,32
-    56ec:	e40c                	sd	a1,8(s0)
-    56ee:	e810                	sd	a2,16(s0)
-    56f0:	ec14                	sd	a3,24(s0)
-    56f2:	f018                	sd	a4,32(s0)
-    56f4:	f41c                	sd	a5,40(s0)
-    56f6:	03043823          	sd	a6,48(s0)
-    56fa:	03143c23          	sd	a7,56(s0)
+    5bcc:	711d                	addi	sp,sp,-96
+    5bce:	ec06                	sd	ra,24(sp)
+    5bd0:	e822                	sd	s0,16(sp)
+    5bd2:	1000                	addi	s0,sp,32
+    5bd4:	e40c                	sd	a1,8(s0)
+    5bd6:	e810                	sd	a2,16(s0)
+    5bd8:	ec14                	sd	a3,24(s0)
+    5bda:	f018                	sd	a4,32(s0)
+    5bdc:	f41c                	sd	a5,40(s0)
+    5bde:	03043823          	sd	a6,48(s0)
+    5be2:	03143c23          	sd	a7,56(s0)
   va_list ap;
 
   va_start(ap, fmt);
-    56fe:	00840613          	addi	a2,s0,8
-    5702:	fec43423          	sd	a2,-24(s0)
+    5be6:	00840613          	addi	a2,s0,8
+    5bea:	fec43423          	sd	a2,-24(s0)
   vprintf(1, fmt, ap);
-    5706:	85aa                	mv	a1,a0
-    5708:	4505                	li	a0,1
-    570a:	00000097          	auipc	ra,0x0
-    570e:	dce080e7          	jalr	-562(ra) # 54d8 <vprintf>
-}
-    5712:	60e2                	ld	ra,24(sp)
-    5714:	6442                	ld	s0,16(sp)
-    5716:	6125                	addi	sp,sp,96
-    5718:	8082                	ret
+    5bee:	85aa                	mv	a1,a0
+    5bf0:	4505                	li	a0,1
+    5bf2:	00000097          	auipc	ra,0x0
+    5bf6:	dce080e7          	jalr	-562(ra) # 59c0 <vprintf>
+}
+    5bfa:	60e2                	ld	ra,24(sp)
+    5bfc:	6442                	ld	s0,16(sp)
+    5bfe:	6125                	addi	sp,sp,96
+    5c00:	8082                	ret
 
-000000000000571a <free>:
+0000000000005c02 <free>:
 static Header base;
 static Header *freep;
 
 void
 free(void *ap)
 {
-    571a:	1141                	addi	sp,sp,-16
-    571c:	e422                	sd	s0,8(sp)
-    571e:	0800                	addi	s0,sp,16
+    5c02:	1141                	addi	sp,sp,-16
+    5c04:	e422                	sd	s0,8(sp)
+    5c06:	0800                	addi	s0,sp,16
   Header *bp, *p;
 
   bp = (Header*)ap - 1;
-    5720:	ff050693          	addi	a3,a0,-16
+    5c08:	ff050693          	addi	a3,a0,-16
   for(p = freep; !(bp > p && bp < p->s.ptr); p = p->s.ptr)
-    5724:	00003797          	auipc	a5,0x3
-    5728:	83c7b783          	ld	a5,-1988(a5) # 7f60 <freep>
-    572c:	a02d                	j	5756 <free+0x3c>
+    5c0c:	00003797          	auipc	a5,0x3
+    5c10:	9bc7b783          	ld	a5,-1604(a5) # 85c8 <freep>
+    5c14:	a02d                	j	5c3e <free+0x3c>
     if(p >= p->s.ptr && (bp > p || bp < p->s.ptr))
       break;
   if(bp + bp->s.size == p->s.ptr){
     bp->s.size += p->s.ptr->s.size;
-    572e:	4618                	lw	a4,8(a2)
-    5730:	9f2d                	addw	a4,a4,a1
-    5732:	fee52c23          	sw	a4,-8(a0)
+    5c16:	4618                	lw	a4,8(a2)
+    5c18:	9f2d                	addw	a4,a4,a1
+    5c1a:	fee52c23          	sw	a4,-8(a0)
     bp->s.ptr = p->s.ptr->s.ptr;
-    5736:	6398                	ld	a4,0(a5)
-    5738:	6310                	ld	a2,0(a4)
-    573a:	a83d                	j	5778 <free+0x5e>
+    5c1e:	6398                	ld	a4,0(a5)
+    5c20:	6310                	ld	a2,0(a4)
+    5c22:	a83d                	j	5c60 <free+0x5e>
   } else
     bp->s.ptr = p->s.ptr;
   if(p + p->s.size == bp){
     p->s.size += bp->s.size;
-    573c:	ff852703          	lw	a4,-8(a0)
-    5740:	9f31                	addw	a4,a4,a2
-    5742:	c798                	sw	a4,8(a5)
+    5c24:	ff852703          	lw	a4,-8(a0)
+    5c28:	9f31                	addw	a4,a4,a2
+    5c2a:	c798                	sw	a4,8(a5)
     p->s.ptr = bp->s.ptr;
-    5744:	ff053683          	ld	a3,-16(a0)
-    5748:	a091                	j	578c <free+0x72>
+    5c2c:	ff053683          	ld	a3,-16(a0)
+    5c30:	a091                	j	5c74 <free+0x72>
     if(p >= p->s.ptr && (bp > p || bp < p->s.ptr))
-    574a:	6398                	ld	a4,0(a5)
-    574c:	00e7e463          	bltu	a5,a4,5754 <free+0x3a>
-    5750:	00e6ea63          	bltu	a3,a4,5764 <free+0x4a>
+    5c32:	6398                	ld	a4,0(a5)
+    5c34:	00e7e463          	bltu	a5,a4,5c3c <free+0x3a>
+    5c38:	00e6ea63          	bltu	a3,a4,5c4c <free+0x4a>
 {
-    5754:	87ba                	mv	a5,a4
+    5c3c:	87ba                	mv	a5,a4
   for(p = freep; !(bp > p && bp < p->s.ptr); p = p->s.ptr)
-    5756:	fed7fae3          	bgeu	a5,a3,574a <free+0x30>
-    575a:	6398                	ld	a4,0(a5)
-    575c:	00e6e463          	bltu	a3,a4,5764 <free+0x4a>
+    5c3e:	fed7fae3          	bgeu	a5,a3,5c32 <free+0x30>
+    5c42:	6398                	ld	a4,0(a5)
+    5c44:	00e6e463          	bltu	a3,a4,5c4c <free+0x4a>
     if(p >= p->s.ptr && (bp > p || bp < p->s.ptr))
-    5760:	fee7eae3          	bltu	a5,a4,5754 <free+0x3a>
+    5c48:	fee7eae3          	bltu	a5,a4,5c3c <free+0x3a>
   if(bp + bp->s.size == p->s.ptr){
-    5764:	ff852583          	lw	a1,-8(a0)
-    5768:	6390                	ld	a2,0(a5)
-    576a:	02059813          	slli	a6,a1,0x20
-    576e:	01c85713          	srli	a4,a6,0x1c
-    5772:	9736                	add	a4,a4,a3
-    5774:	fae60de3          	beq	a2,a4,572e <free+0x14>
+    5c4c:	ff852583          	lw	a1,-8(a0)
+    5c50:	6390                	ld	a2,0(a5)
+    5c52:	02059813          	slli	a6,a1,0x20
+    5c56:	01c85713          	srli	a4,a6,0x1c
+    5c5a:	9736                	add	a4,a4,a3
+    5c5c:	fae60de3          	beq	a2,a4,5c16 <free+0x14>
     bp->s.ptr = p->s.ptr->s.ptr;
-    5778:	fec53823          	sd	a2,-16(a0)
+    5c60:	fec53823          	sd	a2,-16(a0)
   if(p + p->s.size == bp){
-    577c:	4790                	lw	a2,8(a5)
-    577e:	02061593          	slli	a1,a2,0x20
-    5782:	01c5d713          	srli	a4,a1,0x1c
-    5786:	973e                	add	a4,a4,a5
-    5788:	fae68ae3          	beq	a3,a4,573c <free+0x22>
+    5c64:	4790                	lw	a2,8(a5)
+    5c66:	02061593          	slli	a1,a2,0x20
+    5c6a:	01c5d713          	srli	a4,a1,0x1c
+    5c6e:	973e                	add	a4,a4,a5
+    5c70:	fae68ae3          	beq	a3,a4,5c24 <free+0x22>
     p->s.ptr = bp->s.ptr;
-    578c:	e394                	sd	a3,0(a5)
+    5c74:	e394                	sd	a3,0(a5)
   } else
     p->s.ptr = bp;
   freep = p;
-    578e:	00002717          	auipc	a4,0x2
-    5792:	7cf73923          	sd	a5,2002(a4) # 7f60 <freep>
+    5c76:	00003717          	auipc	a4,0x3
+    5c7a:	94f73923          	sd	a5,-1710(a4) # 85c8 <freep>
 }
-    5796:	6422                	ld	s0,8(sp)
-    5798:	0141                	addi	sp,sp,16
-    579a:	8082                	ret
+    5c7e:	6422                	ld	s0,8(sp)
+    5c80:	0141                	addi	sp,sp,16
+    5c82:	8082                	ret
 
-000000000000579c <malloc>:
+0000000000005c84 <malloc>:
   return freep;
 }
 
 void*
 malloc(uint nbytes)
 {
-    579c:	7139                	addi	sp,sp,-64
-    579e:	fc06                	sd	ra,56(sp)
-    57a0:	f822                	sd	s0,48(sp)
-    57a2:	f426                	sd	s1,40(sp)
-    57a4:	f04a                	sd	s2,32(sp)
-    57a6:	ec4e                	sd	s3,24(sp)
-    57a8:	e852                	sd	s4,16(sp)
-    57aa:	e456                	sd	s5,8(sp)
-    57ac:	e05a                	sd	s6,0(sp)
-    57ae:	0080                	addi	s0,sp,64
+    5c84:	7139                	addi	sp,sp,-64
+    5c86:	fc06                	sd	ra,56(sp)
+    5c88:	f822                	sd	s0,48(sp)
+    5c8a:	f426                	sd	s1,40(sp)
+    5c8c:	f04a                	sd	s2,32(sp)
+    5c8e:	ec4e                	sd	s3,24(sp)
+    5c90:	e852                	sd	s4,16(sp)
+    5c92:	e456                	sd	s5,8(sp)
+    5c94:	e05a                	sd	s6,0(sp)
+    5c96:	0080                	addi	s0,sp,64
   Header *p, *prevp;
   uint nunits;
 
   nunits = (nbytes + sizeof(Header) - 1)/sizeof(Header) + 1;
-    57b0:	02051493          	slli	s1,a0,0x20
-    57b4:	9081                	srli	s1,s1,0x20
-    57b6:	04bd                	addi	s1,s1,15
-    57b8:	8091                	srli	s1,s1,0x4
-    57ba:	0014899b          	addiw	s3,s1,1
-    57be:	0485                	addi	s1,s1,1
+    5c98:	02051493          	slli	s1,a0,0x20
+    5c9c:	9081                	srli	s1,s1,0x20
+    5c9e:	04bd                	addi	s1,s1,15
+    5ca0:	8091                	srli	s1,s1,0x4
+    5ca2:	0014899b          	addiw	s3,s1,1
+    5ca6:	0485                	addi	s1,s1,1
   if((prevp = freep) == 0){
-    57c0:	00002517          	auipc	a0,0x2
-    57c4:	7a053503          	ld	a0,1952(a0) # 7f60 <freep>
-    57c8:	c515                	beqz	a0,57f4 <malloc+0x58>
+    5ca8:	00003517          	auipc	a0,0x3
+    5cac:	92053503          	ld	a0,-1760(a0) # 85c8 <freep>
+    5cb0:	c515                	beqz	a0,5cdc <malloc+0x58>
     base.s.ptr = freep = prevp = &base;
     base.s.size = 0;
   }
   for(p = prevp->s.ptr; ; prevp = p, p = p->s.ptr){
-    57ca:	611c                	ld	a5,0(a0)
+    5cb2:	611c                	ld	a5,0(a0)
     if(p->s.size >= nunits){
-    57cc:	4798                	lw	a4,8(a5)
-    57ce:	02977f63          	bgeu	a4,s1,580c <malloc+0x70>
-    57d2:	8a4e                	mv	s4,s3
-    57d4:	0009871b          	sext.w	a4,s3
-    57d8:	6685                	lui	a3,0x1
-    57da:	00d77363          	bgeu	a4,a3,57e0 <malloc+0x44>
-    57de:	6a05                	lui	s4,0x1
-    57e0:	000a0b1b          	sext.w	s6,s4
+    5cb4:	4798                	lw	a4,8(a5)
+    5cb6:	02977f63          	bgeu	a4,s1,5cf4 <malloc+0x70>
+    5cba:	8a4e                	mv	s4,s3
+    5cbc:	0009871b          	sext.w	a4,s3
+    5cc0:	6685                	lui	a3,0x1
+    5cc2:	00d77363          	bgeu	a4,a3,5cc8 <malloc+0x44>
+    5cc6:	6a05                	lui	s4,0x1
+    5cc8:	000a0b1b          	sext.w	s6,s4
   p = sbrk(nu * sizeof(Header));
-    57e4:	004a1a1b          	slliw	s4,s4,0x4
+    5ccc:	004a1a1b          	slliw	s4,s4,0x4
         p->s.size = nunits;
       }
       freep = prevp;
       return (void*)(p + 1);
     }
     if(p == freep)
-    57e8:	00002917          	auipc	s2,0x2
-    57ec:	77890913          	addi	s2,s2,1912 # 7f60 <freep>
+    5cd0:	00003917          	auipc	s2,0x3
+    5cd4:	8f890913          	addi	s2,s2,-1800 # 85c8 <freep>
   if(p == (char*)-1)
-    57f0:	5afd                	li	s5,-1
-    57f2:	a895                	j	5866 <malloc+0xca>
+    5cd8:	5afd                	li	s5,-1
+    5cda:	a895                	j	5d4e <malloc+0xca>
     base.s.ptr = freep = prevp = &base;
-    57f4:	00009797          	auipc	a5,0x9
-    57f8:	f8c78793          	addi	a5,a5,-116 # e780 <base>
-    57fc:	00002717          	auipc	a4,0x2
-    5800:	76f73223          	sd	a5,1892(a4) # 7f60 <freep>
-    5804:	e39c                	sd	a5,0(a5)
+    5cdc:	00009797          	auipc	a5,0x9
+    5ce0:	10c78793          	addi	a5,a5,268 # ede8 <base>
+    5ce4:	00003717          	auipc	a4,0x3
+    5ce8:	8ef73223          	sd	a5,-1820(a4) # 85c8 <freep>
+    5cec:	e39c                	sd	a5,0(a5)
     base.s.size = 0;
-    5806:	0007a423          	sw	zero,8(a5)
+    5cee:	0007a423          	sw	zero,8(a5)
     if(p->s.size >= nunits){
-    580a:	b7e1                	j	57d2 <malloc+0x36>
+    5cf2:	b7e1                	j	5cba <malloc+0x36>
       if(p->s.size == nunits)
-    580c:	02e48c63          	beq	s1,a4,5844 <malloc+0xa8>
+    5cf4:	02e48c63          	beq	s1,a4,5d2c <malloc+0xa8>
         p->s.size -= nunits;
-    5810:	4137073b          	subw	a4,a4,s3
-    5814:	c798                	sw	a4,8(a5)
+    5cf8:	4137073b          	subw	a4,a4,s3
+    5cfc:	c798                	sw	a4,8(a5)
         p += p->s.size;
-    5816:	02071693          	slli	a3,a4,0x20
-    581a:	01c6d713          	srli	a4,a3,0x1c
-    581e:	97ba                	add	a5,a5,a4
+    5cfe:	02071693          	slli	a3,a4,0x20
+    5d02:	01c6d713          	srli	a4,a3,0x1c
+    5d06:	97ba                	add	a5,a5,a4
         p->s.size = nunits;
-    5820:	0137a423          	sw	s3,8(a5)
+    5d08:	0137a423          	sw	s3,8(a5)
       freep = prevp;
-    5824:	00002717          	auipc	a4,0x2
-    5828:	72a73e23          	sd	a0,1852(a4) # 7f60 <freep>
+    5d0c:	00003717          	auipc	a4,0x3
+    5d10:	8aa73e23          	sd	a0,-1860(a4) # 85c8 <freep>
       return (void*)(p + 1);
-    582c:	01078513          	addi	a0,a5,16
+    5d14:	01078513          	addi	a0,a5,16
       if((p = morecore(nunits)) == 0)
         return 0;
   }
 }
-    5830:	70e2                	ld	ra,56(sp)
-    5832:	7442                	ld	s0,48(sp)
-    5834:	74a2                	ld	s1,40(sp)
-    5836:	7902                	ld	s2,32(sp)
-    5838:	69e2                	ld	s3,24(sp)
-    583a:	6a42                	ld	s4,16(sp)
-    583c:	6aa2                	ld	s5,8(sp)
-    583e:	6b02                	ld	s6,0(sp)
-    5840:	6121                	addi	sp,sp,64
-    5842:	8082                	ret
+    5d18:	70e2                	ld	ra,56(sp)
+    5d1a:	7442                	ld	s0,48(sp)
+    5d1c:	74a2                	ld	s1,40(sp)
+    5d1e:	7902                	ld	s2,32(sp)
+    5d20:	69e2                	ld	s3,24(sp)
+    5d22:	6a42                	ld	s4,16(sp)
+    5d24:	6aa2                	ld	s5,8(sp)
+    5d26:	6b02                	ld	s6,0(sp)
+    5d28:	6121                	addi	sp,sp,64
+    5d2a:	8082                	ret
         prevp->s.ptr = p->s.ptr;
-    5844:	6398                	ld	a4,0(a5)
-    5846:	e118                	sd	a4,0(a0)
-    5848:	bff1                	j	5824 <malloc+0x88>
+    5d2c:	6398                	ld	a4,0(a5)
+    5d2e:	e118                	sd	a4,0(a0)
+    5d30:	bff1                	j	5d0c <malloc+0x88>
   hp->s.size = nu;
-    584a:	01652423          	sw	s6,8(a0)
+    5d32:	01652423          	sw	s6,8(a0)
   free((void*)(hp + 1));
-    584e:	0541                	addi	a0,a0,16
-    5850:	00000097          	auipc	ra,0x0
-    5854:	eca080e7          	jalr	-310(ra) # 571a <free>
+    5d36:	0541                	addi	a0,a0,16
+    5d38:	00000097          	auipc	ra,0x0
+    5d3c:	eca080e7          	jalr	-310(ra) # 5c02 <free>
   return freep;
-    5858:	00093503          	ld	a0,0(s2)
+    5d40:	00093503          	ld	a0,0(s2)
       if((p = morecore(nunits)) == 0)
-    585c:	d971                	beqz	a0,5830 <malloc+0x94>
+    5d44:	d971                	beqz	a0,5d18 <malloc+0x94>
   for(p = prevp->s.ptr; ; prevp = p, p = p->s.ptr){
-    585e:	611c                	ld	a5,0(a0)
+    5d46:	611c                	ld	a5,0(a0)
     if(p->s.size >= nunits){
-    5860:	4798                	lw	a4,8(a5)
-    5862:	fa9775e3          	bgeu	a4,s1,580c <malloc+0x70>
+    5d48:	4798                	lw	a4,8(a5)
+    5d4a:	fa9775e3          	bgeu	a4,s1,5cf4 <malloc+0x70>
     if(p == freep)
-    5866:	00093703          	ld	a4,0(s2)
-    586a:	853e                	mv	a0,a5
-    586c:	fef719e3          	bne	a4,a5,585e <malloc+0xc2>
+    5d4e:	00093703          	ld	a4,0(s2)
+    5d52:	853e                	mv	a0,a5
+    5d54:	fef719e3          	bne	a4,a5,5d46 <malloc+0xc2>
   p = sbrk(nu * sizeof(Header));
-    5870:	8552                	mv	a0,s4
-    5872:	00000097          	auipc	ra,0x0
-    5876:	b80080e7          	jalr	-1152(ra) # 53f2 <sbrk>
+    5d58:	8552                	mv	a0,s4
+    5d5a:	00000097          	auipc	ra,0x0
+    5d5e:	b70080e7          	jalr	-1168(ra) # 58ca <sbrk>
   if(p == (char*)-1)
-    587a:	fd5518e3          	bne	a0,s5,584a <malloc+0xae>
+    5d62:	fd5518e3          	bne	a0,s5,5d32 <malloc+0xae>
         return 0;
-    587e:	4501                	li	a0,0
-    5880:	bf45                	j	5830 <malloc+0x94>
+    5d66:	4501                	li	a0,0
+    5d68:	bf45                	j	5d18 <malloc+0x94>
diff -urN ./user/usertests.c ../xv6-labs-2021/user/usertests.c
--- ./user/usertests.c	2021-12-05 17:48:45.000000000 +0800
+++ ../xv6-labs-2021/user/usertests.c	2021-11-18 15:54:53.000000000 +0800
@@ -17,10 +17,9 @@
 // prints "OK".
 //
 
-#define BUFSZ  (MAXOPBLOCKS+2)*BSIZE
+#define BUFSZ  ((MAXOPBLOCKS+2)*BSIZE)
 
 char buf[BUFSZ];
-char name[3];
 
 // what if you pass ridiculous pointers to system calls
 // that read user memory with copyin?
@@ -233,6 +232,53 @@
   }
 }
 
+// See if the kernel refuses to read/write user memory that the
+// application doesn't have anymore, because it returned it.
+void
+rwsbrk()
+{
+  int fd, n;
+  
+  uint64 a = (uint64) sbrk(8192);
+
+  if(a == 0xffffffffffffffffLL) {
+    printf("sbrk(rwsbrk) failed\n");
+    exit(1);
+  }
+  
+  if ((uint64) sbrk(-8192) ==  0xffffffffffffffffLL) {
+    printf("sbrk(rwsbrk) shrink failed\n");
+    exit(1);
+  }
+
+  fd = open("rwsbrk", O_CREATE|O_WRONLY);
+  if(fd < 0){
+    printf("open(rwsbrk) failed\n");
+    exit(1);
+  }
+  n = write(fd, (void*)(a+4096), 1024);
+  if(n >= 0){
+    printf("write(fd, %p, 1024) returned %d, not -1\n", a+4096, n);
+    exit(1);
+  }
+  close(fd);
+  unlink("rwsbrk");
+
+  fd = open("README", O_RDONLY);
+  if(fd < 0){
+    printf("open(rwsbrk) failed\n");
+    exit(1);
+  }
+  n = read(fd, (void*)(a+4096), 10);
+  if(n >= 0){
+    printf("read(fd, %p, 10) returned %d, not -1\n", a+4096, n);
+    exit(1);
+  }
+  close(fd);
+  
+  exit(0);
+}
+
 // test O_TRUNC.
 void
 truncate1(char *s)
@@ -496,11 +542,11 @@
   }
   for(i = 0; i < N; i++){
     if(write(fd, "aaaaaaaaaa", SZ) != SZ){
-      printf("%s: error: write aa %d new file failed\n", i);
+      printf("%s: error: write aa %d new file failed\n", s, i);
       exit(1);
     }
     if(write(fd, "bbbbbbbbbb", SZ) != SZ){
-      printf("%s: error: write bb %d new file failed\n", i);
+      printf("%s: error: write bb %d new file failed\n", s, i);
       exit(1);
     }
   }
@@ -537,7 +583,7 @@
   for(i = 0; i < MAXFILE; i++){
     ((int*)buf)[0] = i;
     if(write(fd, buf, BSIZE) != BSIZE){
-      printf("%s: error: write big file failed\n", i);
+      printf("%s: error: write big file failed\n", s, i);
       exit(1);
     }
   }
@@ -555,16 +601,16 @@
     i = read(fd, buf, BSIZE);
     if(i == 0){
       if(n == MAXFILE - 1){
-        printf("%s: read only %d blocks from big", n);
+        printf("%s: read only %d blocks from big", s, n);
         exit(1);
       }
       break;
     } else if(i != BSIZE){
-      printf("%s: read failed %d\n", i);
+      printf("%s: read failed %d\n", s, i);
       exit(1);
     }
     if(((int*)buf)[0] != n){
-      printf("%s: read content of block %d is %d\n",
+      printf("%s: read content of block %d is %d\n", s,
              n, ((int*)buf)[0]);
       exit(1);
     }
@@ -584,6 +630,7 @@
   int i, fd;
   enum { N=52 };
 
+  char name[3];
   name[0] = 'a';
   name[2] = '\0';
   for(i = 0; i < N; i++){
@@ -601,8 +648,6 @@
 
 void dirtest(char *s)
 {
-  printf("mkdir test\n");
-
   if(mkdir("dir0") < 0){
     printf("%s: mkdir failed\n", s);
     exit(1);
@@ -622,7 +667,6 @@
     printf("%s: unlink dir0 failed\n", s);
     exit(1);
   }
-  printf("%s: mkdir test ok\n");
 }
 
 void
@@ -735,6 +779,36 @@
   }
 }
 
+
+// test if child is killed (status = -1)
+void
+killstatus(char *s)
+{
+  int xst;
+  
+  for(int i = 0; i < 100; i++){
+    int pid1 = fork();
+    if(pid1 < 0){
+      printf("%s: fork failed\n", s);
+      exit(1);
+    }
+    if(pid1 == 0){
+      while(1) {
+        getpid();
+      }
+      exit(0);
+    }
+    sleep(1);
+    kill(pid1);
+    wait(&xst);
+    if(xst != -1) {
+       printf("%s: status should be -1\n", s);
+       exit(1);
+    }
+  }
+  exit(0);
+}
+
 // meant to be run w/ at most two CPUs
 void
 preempt(char *s)
@@ -744,7 +818,7 @@
 
   pid1 = fork();
   if(pid1 < 0) {
-    printf("%s: fork failed");
+    printf("%s: fork failed", s);
     exit(1);
   }
   if(pid1 == 0)
@@ -769,7 +843,7 @@
   if(pid3 == 0){
     close(pfds[0]);
     if(write(pfds[1], "x", 1) != 1)
-      printf("%s: preempt write error");
+      printf("%s: preempt write error", s);
     close(pfds[1]);
     for(;;)
       ;
@@ -777,7 +851,7 @@
 
   close(pfds[1]);
   if(read(pfds[0], buf, sizeof(buf)) != 1){
-    printf("%s: preempt read error");
+    printf("%s: preempt read error", s);
     return;
   }
   close(pfds[0]);
@@ -1298,7 +1372,7 @@
 
   unlink("lf2");
   if(link("lf2", "lf1") >= 0){
-    printf("%s: link non-existant succeeded! oops\n", s);
+    printf("%s: link non-existent succeeded! oops\n", s);
     exit(1);
   }
 
@@ -1684,6 +1758,60 @@
   }
 }
 
+// concurrent writes to try to provoke deadlock in the virtio disk
+// driver.
+void
+manywrites(char *s)
+{
+  int nchildren = 4;
+  int howmany = 30; // increase to look for deadlock
+  
+  for(int ci = 0; ci < nchildren; ci++){
+    int pid = fork();
+    if(pid < 0){
+      printf("fork failed\n");
+      exit(1);
+    }
+
+    if(pid == 0){
+      char name[3];
+      name[0] = 'b';
+      name[1] = 'a' + ci;
+      name[2] = '\0';
+      unlink(name);
+      
+      for(int iters = 0; iters < howmany; iters++){
+        for(int i = 0; i < ci+1; i++){
+          int fd = open(name, O_CREATE | O_RDWR);
+          if(fd < 0){
+            printf("%s: cannot create %s\n", s, name);
+            exit(1);
+          }
+          int sz = sizeof(buf);
+          int cc = write(fd, buf, sz);
+          if(cc != sz){
+            printf("%s: write(%d) ret %d\n", s, sz, cc);
+            exit(1);
+          }
+          close(fd);
+        }
+        unlink(name);
+      }
+
+      unlink(name);
+      exit(0);
+    }
+  }
+
+  for(int ci = 0; ci < nchildren; ci++){
+    int st = 0;
+    wait(&st);
+    if(st != 0)
+      exit(st);
+  }
+  exit(0);
+}
+
 void
 bigfile(char *s)
 {
@@ -1993,7 +2121,7 @@
   for(i = 0; i < 5000; i++){
     b = sbrk(1);
     if(b != a){
-      printf("%s: sbrk test failed %d %x %x\n", i, a, b);
+      printf("%s: sbrk test failed %d %x %x\n", s, i, a, b);
       exit(1);
     }
     *b = 1;
@@ -2051,7 +2179,7 @@
   }
   c = sbrk(0);
   if(c != a - PGSIZE){
-    printf("%s: sbrk deallocation produced wrong address, a %x c %x\n", a, c);
+    printf("%s: sbrk deallocation produced wrong address, a %x c %x\n", s, a, c);
     exit(1);
   }
 
@@ -2059,7 +2187,7 @@
   a = sbrk(0);
   c = sbrk(PGSIZE);
   if(c != a || sbrk(0) != a + PGSIZE){
-    printf("%s: sbrk re-allocation failed, a %x c %x\n", a, c);
+    printf("%s: sbrk re-allocation failed, a %x c %x\n", s, a, c);
     exit(1);
   }
   if(*lastaddr == 99){
@@ -2071,7 +2199,7 @@
   a = sbrk(0);
   c = sbrk(-(sbrk(0) - oldbrk));
   if(c != a){
-    printf("%s: sbrk downsize failed, a %x c %x\n", a, c);
+    printf("%s: sbrk downsize failed, a %x c %x\n", s, a, c);
     exit(1);
   }
 }
@@ -2090,7 +2218,31 @@
       exit(1);
     }
     if(pid == 0){
-      printf("%s: oops could read %x = %x\n", a, *a);
+      printf("%s: oops could read %x = %x\n", s, a, *a);
+      exit(1);
+    }
+    int xstatus;
+    wait(&xstatus);
+    if(xstatus != -1)  // did kernel kill child?
+      exit(1);
+  }
+}
+
+// user code should not be able to write to addresses above MAXVA.
+void
+MAXVAplus(char *s)
+{
+  volatile uint64 a = MAXVA;
+  for( ; a != 0; a <<= 1){
+    int pid;
+    pid = fork();
+    if(pid < 0){
+      printf("%s: fork failed\n", s);
+      exit(1);
+    }
+    if(pid == 0){
+      *(char*)a = 99;
+      printf("%s: oops wrote %x\n", s, a);
       exit(1);
     }
     int xstatus;
@@ -2161,7 +2313,7 @@
     }
     // print n so the compiler doesn't optimize away
     // the for loop.
-    printf("%s: allocate a lot of memory succeeded %d\n", n);
+    printf("%s: allocate a lot of memory succeeded %d\n", s, n);
     exit(1);
   }
   wait(&xstatus);
@@ -2214,7 +2366,7 @@
   }
 }
 
-// does unintialized data start out zero?
+// does uninitialized data start out zero?
 char uninit[10000];
 void
 bsstest(char *s)
@@ -2283,10 +2435,10 @@
     name[3] = '0' + (nfiles % 100) / 10;
     name[4] = '0' + (nfiles % 10);
     name[5] = '\0';
-    printf("%s: writing %s\n", name);
+    printf("writing %s\n", name);
     int fd = open(name, O_CREATE|O_RDWR);
     if(fd < 0){
-      printf("%s: open %s failed\n", name);
+      printf("open %s failed\n", name);
       break;
     }
     int total = 0;
@@ -2297,7 +2449,7 @@
       total += cc;
       fsblocks++;
     }
-    printf("%s: wrote %d bytes\n", total);
+    printf("wrote %d bytes\n", total);
     close(fd);
     if(total == 0)
       break;
@@ -2330,14 +2482,6 @@
   close(fd);
 }
 
-unsigned long randstate = 1;
-unsigned int
-rand()
-{
-  randstate = randstate * 1664525 + 1013904223;
-  return randstate;
-}
-
 // check that there's an invalid page beneath
 // the user stack, to catch stack overflow.
 void
@@ -2351,7 +2495,7 @@
     char *sp = (char *) r_sp();
     sp -= PGSIZE;
     // the *sp should cause a trap.
-    printf("%s: stacktest: read below stack %p\n", *sp);
+    printf("%s: stacktest: read below stack %p\n", s, *sp);
     exit(1);
   } else if(pid < 0){
     printf("%s: fork failed\n", s);
@@ -2437,6 +2581,42 @@
   exit(0);
 }
 
+// if process size was somewhat more than a page boundary, and then
+// shrunk to be somewhat less than that page boundary, can the kernel
+// still copyin() from addresses in the last page?
+void
+sbrklast(char *s)
+{
+  uint64 top = (uint64) sbrk(0);
+  if((top % 4096) != 0)
+    sbrk(4096 - (top % 4096));
+  sbrk(4096);
+  sbrk(10);
+  sbrk(-20);
+  top = (uint64) sbrk(0);
+  char *p = (char *) (top - 64);
+  p[0] = 'x';
+  p[1] = '\0';
+  int fd = open(p, O_RDWR|O_CREATE);
+  write(fd, p, 1);
+  close(fd);
+  fd = open(p, O_RDWR);
+  p[0] = '\0';
+  read(fd, p, 1);
+  if(p[0] != 'x')
+    exit(1);
+}
+
+// does sbrk handle signed int32 wrap-around with
+// negative arguments?
+void
+sbrk8000(char *s)
+{
+  sbrk(0x80000004);
+  volatile char *top = sbrk(0);
+  *(top-1) = *(top-1) + 1;
+}
+
 // regression test. does write() with an invalid buffer pointer cause
 // a block to be allocated for a file that is then not freed when the
 // file is deleted? if the kernel has this bug, it will panic: balloc:
@@ -2638,12 +2818,15 @@
     void (*f)(char *);
     char *s;
   } tests[] = {
+    {MAXVAplus, "MAXVAplus"},
+    {manywrites, "manywrites"},
     {execout, "execout"},
     {copyin, "copyin"},
     {copyout, "copyout"},
     {copyinstr1, "copyinstr1"},
     {copyinstr2, "copyinstr2"},
     {copyinstr3, "copyinstr3"},
+    {rwsbrk, "rwsbrk" },
     {truncate1, "truncate1"},
     {truncate2, "truncate2"},
     {truncate3, "truncate3"},
@@ -2665,6 +2848,7 @@
     {subdir, "subdir"},
     {fourfiles, "fourfiles"},
     {sharedfd, "sharedfd"},
+    {dirtest, "dirtest"},
     {exectest, "exectest"},
     {bigargtest, "bigargtest"},
     {bigwrite, "bigwrite"},
@@ -2674,6 +2858,8 @@
     {kernmem, "kernmem"},
     {sbrkfail, "sbrkfail"},
     {sbrkarg, "sbrkarg"},
+    {sbrklast, "sbrklast"},
+    {sbrk8000, "sbrk8000"},
     {validatetest, "validatetest"},
     {stacktest, "stacktest"},
     {opentest, "opentest"},
@@ -2685,6 +2871,7 @@
     {iputtest, "iput"},
     {mem, "mem"},
     {pipe1, "pipe1"},
+    {killstatus, "killstatus"},
     {preempt, "preempt"},
     {exitwait, "exitwait"},
     {rmdot, "rmdot"},
Binary files ./user/usertests.o and ../xv6-labs-2021/user/usertests.o differ
diff -urN ./user/usertests.sym ../xv6-labs-2021/user/usertests.sym
--- ./user/usertests.sym	2021-12-05 17:54:42.000000000 +0800
+++ ../xv6-labs-2021/user/usertests.sym	2021-11-26 14:46:16.000000000 +0800
@@ -1,8 +1,8 @@
 0000000000000000 .text
-0000000000005888 .rodata
-0000000000007f48 .sdata
-0000000000007f58 .sbss
-0000000000007f68 .bss
+0000000000005d70 .rodata
+00000000000085c0 .sdata
+00000000000085c8 .sbss
+00000000000085d0 .bss
 0000000000000000 .comment
 0000000000000000 .riscv.attributes
 0000000000000000 .debug_aranges
@@ -15,123 +15,128 @@
 0000000000000000 .debug_loclists
 0000000000000000 .debug_rnglists
 0000000000000000 usertests.c
-0000000000008068 big.0
-0000000000007f68 args.1
+00000000000086d0 big.0
+00000000000085d0 args.1
 0000000000000000 ulib.c
 0000000000000000 printf.c
-000000000000540a putc
-000000000000542c printint
-0000000000007f30 digits
+00000000000058f2 putc
+0000000000005914 printint
+00000000000085a8 digits
 0000000000000000 umalloc.c
-0000000000007f60 freep
-000000000000e780 base
-00000000000009b8 writebig
-00000000000050fe strcpy
-000000000000190e exitwait
-00000000000056e4 printf
-0000000000008748 __global_pointer$
-0000000000002040 bigargtest
-00000000000052b8 memmove
-0000000000003990 openiputtest
-00000000000053b2 mknod
-0000000000003ea4 reparent
-00000000000051b6 gets
-0000000000007f48 __SDATA_BEGIN__
-00000000000053ea getpid
-0000000000001744 pipe1
-000000000000534a memcpy
-0000000000003856 iref
-000000000000113a pgbug
-000000000000579c malloc
-00000000000004be copyout
-00000000000053fa sleep
-0000000000002146 stacktest
-00000000000028b0 execout
-0000000000002798 sbrkbugs
-0000000000002bee exitiputtest
-0000000000004a24 fsfull
-0000000000000f68 bigdir
-0000000000001eb6 forktest
-00000000000013ae truncate3
-0000000000000278 bigwrite
-0000000000003ff8 sharedfd
-0000000000007f50 randstate
-000000000000537a pipe
-0000000000009070 uninit
-0000000000003622 dirfile
-000000000000538a write
+00000000000085c8 freep
+000000000000ede8 base
+00000000000009a8 writebig
+0000000000002cd6 sbrk8000
+00000000000055d6 strcpy
+0000000000001906 exitwait
+0000000000001eae manywrites
+0000000000005bcc printf
+0000000000008dc0 __global_pointer$
+0000000000002232 bigargtest
+0000000000005790 memmove
+0000000000003ec2 openiputtest
+000000000000588a mknod
+00000000000058e2 trace
+00000000000042ca reparent
+000000000000568e gets
+00000000000085c0 __SDATA_BEGIN__
+00000000000058c2 getpid
+000000000000173c pipe1
+0000000000005822 memcpy
+0000000000003d88 iref
+0000000000001132 pgbug
+0000000000005c84 malloc
+00000000000004aa copyout
+00000000000058d2 sleep
+0000000000002338 stacktest
+00000000000058ea sysinfo
+0000000000002d0c execout
+0000000000002aec sbrkbugs
+000000000000304a exitiputtest
+0000000000004f0a fsfull
+0000000000000f60 bigdir
+0000000000001ff8 forktest
+0000000000002508 rwsbrk
+00000000000013a6 truncate3
+0000000000000264 bigwrite
+00000000000045d4 sharedfd
+0000000000005852 pipe
+0000000000004084 killstatus
+00000000000096d8 uninit
+0000000000003b54 dirfile
+0000000000005862 write
 0000000000000058 bsstest
-00000000000053c2 fstat
-00000000000056b6 fprintf
-000000000000539a kill
-00000000000010cc validatetest
-000000000000349c rmdot
-0000000000000362 copyin
-00000000000054d8 vprintf
+000000000000589a fstat
+0000000000005b9e fprintf
+0000000000005872 kill
+00000000000010c4 validatetest
+00000000000039ce rmdot
+000000000000034e copyin
+00000000000059c0 vprintf
 000000000000011c truncate2
-00000000000053da chdir
-0000000000001568 exectest
-00000000000053a2 exec
-0000000000004bf4 badwrite
-0000000000005372 wait
-0000000000004bc4 rand
-0000000000005382 read
-0000000000003b52 preempt
-00000000000053ba unlink
-0000000000001172 badarg
-0000000000002726 argptest
-0000000000003f54 mem
-0000000000005310 memcmp
-0000000000005362 fork
-000000000000e790 __BSS_END__
-00000000000021c8 copyinstr3
-0000000000001a5c forkfork
-00000000000053f2 sbrk
-0000000000005402 uptime
-00000000000019c2 twochildren
-0000000000007f58 __bss_start
-0000000000005170 memset
-0000000000001f96 kernmem
+00000000000058b2 chdir
+0000000000001560 exectest
+000000000000587a exec
+00000000000050aa badwrite
+000000000000584a wait
+000000000000585a read
+0000000000004126 preempt
+0000000000005892 unlink
+000000000000116a badarg
+0000000000002a7a argptest
+0000000000004530 mem
+00000000000057e8 memcmp
+000000000000583a fork
+0000000000002c04 sbrklast
+000000000000edf8 __BSS_END__
+00000000000023bc copyinstr3
+0000000000001a54 forkfork
+00000000000058ca sbrk
+00000000000058da uptime
+00000000000019ba twochildren
+00000000000085c8 __bss_start
+0000000000002184 MAXVAplus
+0000000000005648 memset
+00000000000020d8 kernmem
 00000000000001e4 createtest
-0000000000004ed2 main
-0000000000001b8e createdelete
-0000000000003a82 forkforkfork
-0000000000003cf0 sbrkfail
-000000000000511a strcmp
-000000000000082c writetest
-00000000000053e2 dup
-000000000000061a truncate1
+0000000000005388 main
+0000000000001b86 createdelete
+0000000000003fb4 forkforkfork
+000000000000437a sbrkfail
+00000000000055f2 strcmp
+0000000000000818 writetest
+00000000000058ba dup
+0000000000000606 truncate1
 000000000000009a opentest
-0000000000004e34 run
-0000000000002cd6 subdir
-00000000000011b8 copyinstr2
-0000000000000d1c linktest
-000000000000b780 buf
-000000000000492e dirtest
-000000000000264e sbrkarg
-0000000000002b18 iputtest
-0000000000007f41 __DATA_BEGIN__
-000000000000522a stat
-000000000000474e bigfile
-0000000000007f58 _edata
-000000000000e790 _end
-0000000000004d04 countfree
-0000000000000b66 unlinkread
-00000000000053ca link
-000000000000536a exit
-0000000000005270 atoi
+00000000000052ea run
+0000000000003208 subdir
+00000000000011b0 copyinstr2
+0000000000000d14 linktest
+000000000000bde8 buf
+0000000000003132 dirtest
+00000000000029a2 sbrkarg
+0000000000002f74 iputtest
+00000000000085b9 __DATA_BEGIN__
+0000000000005702 stat
+0000000000004d2a bigfile
+00000000000085c8 _edata
+000000000000edf8 _end
+00000000000051ba countfree
+0000000000000b5e unlinkread
+00000000000058a2 link
+0000000000005842 exit
+0000000000005748 atoi
 0000000000000000 copyinstr1
-0000000000001db4 linkunlink
-0000000000002314 sbrkbasic
-0000000000007f58 name
-0000000000005146 strlen
-00000000000053aa open
-0000000000005192 strchr
-00000000000043f2 concreate
-0000000000002974 fourteen
-00000000000041b0 fourfiles
-0000000000002498 sbrkmuch
-00000000000053d2 mkdir
-0000000000005392 close
-0000000000001b26 reparent2
-000000000000571a free
+0000000000001dac linkunlink
+0000000000002660 sbrkbasic
+000000000000561e strlen
+0000000000005882 open
+000000000000566a strchr
+00000000000049ce concreate
+0000000000002dd0 fourteen
+000000000000478c fourfiles
+00000000000027e6 sbrkmuch
+00000000000058aa mkdir
+000000000000586a close
+0000000000001b1e reparent2
+0000000000005c02 free
diff -urN ./user/usys.S ../xv6-labs-2021/user/usys.S
--- ./user/usys.S	2021-12-05 17:54:42.000000000 +0800
+++ ../xv6-labs-2021/user/usys.S	2021-11-26 14:46:15.000000000 +0800
@@ -105,3 +105,13 @@
  li a7, SYS_uptime
  ecall
  ret
+.global trace
+trace:
+ li a7, SYS_trace
+ ecall
+ ret
+.global sysinfo
+sysinfo:
+ li a7, SYS_sysinfo
+ ecall
+ ret
Binary files ./user/usys.o and ../xv6-labs-2021/user/usys.o differ
diff -urN ./user/wc.asm ../xv6-labs-2021/user/wc.asm
--- ./user/wc.asm	2021-12-05 17:54:42.000000000 +0800
+++ ../xv6-labs-2021/user/wc.asm	2021-11-26 14:46:16.000000000 +0800
@@ -39,7 +39,7 @@
   2a:	4c01                	li	s8,0
   2c:	4b81                	li	s7,0
   2e:	00001d97          	auipc	s11,0x1
-  32:	9bbd8d93          	addi	s11,s11,-1605 # 9e9 <buf+0x1>
+  32:	9cbd8d93          	addi	s11,s11,-1589 # 9f9 <buf+0x1>
   while((n = read(fd, buf, sizeof(buf))) > 0){
     for(i=0; i<n; i++){
       c++;
@@ -48,7 +48,7 @@
         l++;
       if(strchr(" \r\t\n\v", buf[i]))
   38:	00001a17          	auipc	s4,0x1
-  3c:	8e8a0a13          	addi	s4,s4,-1816 # 920 <malloc+0xec>
+  3c:	8f8a0a13          	addi	s4,s4,-1800 # 930 <malloc+0xec>
         inword = 0;
   40:	4b01                	li	s6,0
   while((n = read(fd, buf, sizeof(buf))) > 0){
@@ -81,14 +81,14 @@
   while((n = read(fd, buf, sizeof(buf))) > 0){
   72:	20000613          	li	a2,512
   76:	00001597          	auipc	a1,0x1
-  7a:	97258593          	addi	a1,a1,-1678 # 9e8 <buf>
+  7a:	98258593          	addi	a1,a1,-1662 # 9f8 <buf>
   7e:	f8843503          	ld	a0,-120(s0)
   82:	00000097          	auipc	ra,0x0
   86:	398080e7          	jalr	920(ra) # 41a <read>
   8a:	00a05f63          	blez	a0,a8 <wc+0xa8>
     for(i=0; i<n; i++){
   8e:	00001497          	auipc	s1,0x1
-  92:	95a48493          	addi	s1,s1,-1702 # 9e8 <buf>
+  92:	96a48493          	addi	s1,s1,-1686 # 9f8 <buf>
   96:	00050d1b          	sext.w	s10,a0
   9a:	fff5091b          	addiw	s2,a0,-1
   9e:	1902                	slli	s2,s2,0x20
@@ -109,9 +109,9 @@
   b2:	8662                	mv	a2,s8
   b4:	85de                	mv	a1,s7
   b6:	00001517          	auipc	a0,0x1
-  ba:	88250513          	addi	a0,a0,-1918 # 938 <malloc+0x104>
+  ba:	89250513          	addi	a0,a0,-1902 # 948 <malloc+0x104>
   be:	00000097          	auipc	ra,0x0
-  c2:	6be080e7          	jalr	1726(ra) # 77c <printf>
+  c2:	6ce080e7          	jalr	1742(ra) # 78c <printf>
 }
   c6:	70e6                	ld	ra,120(sp)
   c8:	7446                	ld	s0,112(sp)
@@ -130,9 +130,9 @@
   e2:	8082                	ret
     printf("wc: read error\n");
   e4:	00001517          	auipc	a0,0x1
-  e8:	84450513          	addi	a0,a0,-1980 # 928 <malloc+0xf4>
+  e8:	85450513          	addi	a0,a0,-1964 # 938 <malloc+0xf4>
   ec:	00000097          	auipc	ra,0x0
-  f0:	690080e7          	jalr	1680(ra) # 77c <printf>
+  f0:	6a0080e7          	jalr	1696(ra) # 78c <printf>
     exit(1);
   f4:	4505                	li	a0,1
   f6:	00000097          	auipc	ra,0x0
@@ -195,7 +195,7 @@
  15a:	2ac080e7          	jalr	684(ra) # 402 <exit>
     wc(0, "");
  15e:	00000597          	auipc	a1,0x0
- 162:	7ea58593          	addi	a1,a1,2026 # 948 <malloc+0x114>
+ 162:	7fa58593          	addi	a1,a1,2042 # 958 <malloc+0x114>
  166:	4501                	li	a0,0
  168:	00000097          	auipc	ra,0x0
  16c:	e98080e7          	jalr	-360(ra) # 0 <wc>
@@ -206,9 +206,9 @@
       printf("wc: cannot open %s\n", argv[i]);
  17a:	608c                	ld	a1,0(s1)
  17c:	00000517          	auipc	a0,0x0
- 180:	7d450513          	addi	a0,a0,2004 # 950 <malloc+0x11c>
+ 180:	7e450513          	addi	a0,a0,2020 # 960 <malloc+0x11c>
  184:	00000097          	auipc	ra,0x0
- 188:	5f8080e7          	jalr	1528(ra) # 77c <printf>
+ 188:	608080e7          	jalr	1544(ra) # 78c <printf>
       exit(1);
  18c:	4505                	li	a0,1
  18e:	00000097          	auipc	ra,0x0
@@ -845,632 +845,652 @@
  ret
  4a0:	8082                	ret
 
-00000000000004a2 <putc>:
+00000000000004a2 <trace>:
+.global trace
+trace:
+ li a7, SYS_trace
+ 4a2:	48d9                	li	a7,22
+ ecall
+ 4a4:	00000073          	ecall
+ ret
+ 4a8:	8082                	ret
+
+00000000000004aa <sysinfo>:
+.global sysinfo
+sysinfo:
+ li a7, SYS_sysinfo
+ 4aa:	48dd                	li	a7,23
+ ecall
+ 4ac:	00000073          	ecall
+ ret
+ 4b0:	8082                	ret
+
+00000000000004b2 <putc>:
 
 static char digits[] = "0123456789ABCDEF";
 
 static void
 putc(int fd, char c)
 {
- 4a2:	1101                	addi	sp,sp,-32
- 4a4:	ec06                	sd	ra,24(sp)
- 4a6:	e822                	sd	s0,16(sp)
- 4a8:	1000                	addi	s0,sp,32
- 4aa:	feb407a3          	sb	a1,-17(s0)
+ 4b2:	1101                	addi	sp,sp,-32
+ 4b4:	ec06                	sd	ra,24(sp)
+ 4b6:	e822                	sd	s0,16(sp)
+ 4b8:	1000                	addi	s0,sp,32
+ 4ba:	feb407a3          	sb	a1,-17(s0)
   write(fd, &c, 1);
- 4ae:	4605                	li	a2,1
- 4b0:	fef40593          	addi	a1,s0,-17
- 4b4:	00000097          	auipc	ra,0x0
- 4b8:	f6e080e7          	jalr	-146(ra) # 422 <write>
-}
- 4bc:	60e2                	ld	ra,24(sp)
- 4be:	6442                	ld	s0,16(sp)
- 4c0:	6105                	addi	sp,sp,32
- 4c2:	8082                	ret
+ 4be:	4605                	li	a2,1
+ 4c0:	fef40593          	addi	a1,s0,-17
+ 4c4:	00000097          	auipc	ra,0x0
+ 4c8:	f5e080e7          	jalr	-162(ra) # 422 <write>
+}
+ 4cc:	60e2                	ld	ra,24(sp)
+ 4ce:	6442                	ld	s0,16(sp)
+ 4d0:	6105                	addi	sp,sp,32
+ 4d2:	8082                	ret
 
-00000000000004c4 <printint>:
+00000000000004d4 <printint>:
 
 static void
 printint(int fd, int xx, int base, int sgn)
 {
- 4c4:	7139                	addi	sp,sp,-64
- 4c6:	fc06                	sd	ra,56(sp)
- 4c8:	f822                	sd	s0,48(sp)
- 4ca:	f426                	sd	s1,40(sp)
- 4cc:	f04a                	sd	s2,32(sp)
- 4ce:	ec4e                	sd	s3,24(sp)
- 4d0:	0080                	addi	s0,sp,64
- 4d2:	84aa                	mv	s1,a0
+ 4d4:	7139                	addi	sp,sp,-64
+ 4d6:	fc06                	sd	ra,56(sp)
+ 4d8:	f822                	sd	s0,48(sp)
+ 4da:	f426                	sd	s1,40(sp)
+ 4dc:	f04a                	sd	s2,32(sp)
+ 4de:	ec4e                	sd	s3,24(sp)
+ 4e0:	0080                	addi	s0,sp,64
+ 4e2:	84aa                	mv	s1,a0
   char buf[16];
   int i, neg;
   uint x;
 
   neg = 0;
   if(sgn && xx < 0){
- 4d4:	c299                	beqz	a3,4da <printint+0x16>
- 4d6:	0805c963          	bltz	a1,568 <printint+0xa4>
+ 4e4:	c299                	beqz	a3,4ea <printint+0x16>
+ 4e6:	0805c963          	bltz	a1,578 <printint+0xa4>
     neg = 1;
     x = -xx;
   } else {
     x = xx;
- 4da:	2581                	sext.w	a1,a1
+ 4ea:	2581                	sext.w	a1,a1
   neg = 0;
- 4dc:	4881                	li	a7,0
- 4de:	fc040693          	addi	a3,s0,-64
+ 4ec:	4881                	li	a7,0
+ 4ee:	fc040693          	addi	a3,s0,-64
   }
 
   i = 0;
- 4e2:	4701                	li	a4,0
+ 4f2:	4701                	li	a4,0
   do{
     buf[i++] = digits[x % base];
- 4e4:	2601                	sext.w	a2,a2
- 4e6:	00000517          	auipc	a0,0x0
- 4ea:	4e250513          	addi	a0,a0,1250 # 9c8 <digits>
- 4ee:	883a                	mv	a6,a4
- 4f0:	2705                	addiw	a4,a4,1
- 4f2:	02c5f7bb          	remuw	a5,a1,a2
- 4f6:	1782                	slli	a5,a5,0x20
- 4f8:	9381                	srli	a5,a5,0x20
- 4fa:	97aa                	add	a5,a5,a0
- 4fc:	0007c783          	lbu	a5,0(a5)
- 500:	00f68023          	sb	a5,0(a3)
+ 4f4:	2601                	sext.w	a2,a2
+ 4f6:	00000517          	auipc	a0,0x0
+ 4fa:	4e250513          	addi	a0,a0,1250 # 9d8 <digits>
+ 4fe:	883a                	mv	a6,a4
+ 500:	2705                	addiw	a4,a4,1
+ 502:	02c5f7bb          	remuw	a5,a1,a2
+ 506:	1782                	slli	a5,a5,0x20
+ 508:	9381                	srli	a5,a5,0x20
+ 50a:	97aa                	add	a5,a5,a0
+ 50c:	0007c783          	lbu	a5,0(a5)
+ 510:	00f68023          	sb	a5,0(a3)
   }while((x /= base) != 0);
- 504:	0005879b          	sext.w	a5,a1
- 508:	02c5d5bb          	divuw	a1,a1,a2
- 50c:	0685                	addi	a3,a3,1
- 50e:	fec7f0e3          	bgeu	a5,a2,4ee <printint+0x2a>
+ 514:	0005879b          	sext.w	a5,a1
+ 518:	02c5d5bb          	divuw	a1,a1,a2
+ 51c:	0685                	addi	a3,a3,1
+ 51e:	fec7f0e3          	bgeu	a5,a2,4fe <printint+0x2a>
   if(neg)
- 512:	00088c63          	beqz	a7,52a <printint+0x66>
+ 522:	00088c63          	beqz	a7,53a <printint+0x66>
     buf[i++] = '-';
- 516:	fd070793          	addi	a5,a4,-48
- 51a:	00878733          	add	a4,a5,s0
- 51e:	02d00793          	li	a5,45
- 522:	fef70823          	sb	a5,-16(a4)
- 526:	0028071b          	addiw	a4,a6,2
+ 526:	fd070793          	addi	a5,a4,-48
+ 52a:	00878733          	add	a4,a5,s0
+ 52e:	02d00793          	li	a5,45
+ 532:	fef70823          	sb	a5,-16(a4)
+ 536:	0028071b          	addiw	a4,a6,2
 
   while(--i >= 0)
- 52a:	02e05863          	blez	a4,55a <printint+0x96>
- 52e:	fc040793          	addi	a5,s0,-64
- 532:	00e78933          	add	s2,a5,a4
- 536:	fff78993          	addi	s3,a5,-1
- 53a:	99ba                	add	s3,s3,a4
- 53c:	377d                	addiw	a4,a4,-1
- 53e:	1702                	slli	a4,a4,0x20
- 540:	9301                	srli	a4,a4,0x20
- 542:	40e989b3          	sub	s3,s3,a4
+ 53a:	02e05863          	blez	a4,56a <printint+0x96>
+ 53e:	fc040793          	addi	a5,s0,-64
+ 542:	00e78933          	add	s2,a5,a4
+ 546:	fff78993          	addi	s3,a5,-1
+ 54a:	99ba                	add	s3,s3,a4
+ 54c:	377d                	addiw	a4,a4,-1
+ 54e:	1702                	slli	a4,a4,0x20
+ 550:	9301                	srli	a4,a4,0x20
+ 552:	40e989b3          	sub	s3,s3,a4
     putc(fd, buf[i]);
- 546:	fff94583          	lbu	a1,-1(s2)
- 54a:	8526                	mv	a0,s1
- 54c:	00000097          	auipc	ra,0x0
- 550:	f56080e7          	jalr	-170(ra) # 4a2 <putc>
+ 556:	fff94583          	lbu	a1,-1(s2)
+ 55a:	8526                	mv	a0,s1
+ 55c:	00000097          	auipc	ra,0x0
+ 560:	f56080e7          	jalr	-170(ra) # 4b2 <putc>
   while(--i >= 0)
- 554:	197d                	addi	s2,s2,-1
- 556:	ff3918e3          	bne	s2,s3,546 <printint+0x82>
+ 564:	197d                	addi	s2,s2,-1
+ 566:	ff3918e3          	bne	s2,s3,556 <printint+0x82>
 }
- 55a:	70e2                	ld	ra,56(sp)
- 55c:	7442                	ld	s0,48(sp)
- 55e:	74a2                	ld	s1,40(sp)
- 560:	7902                	ld	s2,32(sp)
- 562:	69e2                	ld	s3,24(sp)
- 564:	6121                	addi	sp,sp,64
- 566:	8082                	ret
+ 56a:	70e2                	ld	ra,56(sp)
+ 56c:	7442                	ld	s0,48(sp)
+ 56e:	74a2                	ld	s1,40(sp)
+ 570:	7902                	ld	s2,32(sp)
+ 572:	69e2                	ld	s3,24(sp)
+ 574:	6121                	addi	sp,sp,64
+ 576:	8082                	ret
     x = -xx;
- 568:	40b005bb          	negw	a1,a1
+ 578:	40b005bb          	negw	a1,a1
     neg = 1;
- 56c:	4885                	li	a7,1
+ 57c:	4885                	li	a7,1
     x = -xx;
- 56e:	bf85                	j	4de <printint+0x1a>
+ 57e:	bf85                	j	4ee <printint+0x1a>
 
-0000000000000570 <vprintf>:
+0000000000000580 <vprintf>:
 }
 
 // Print to the given fd. Only understands %d, %x, %p, %s.
 void
 vprintf(int fd, const char *fmt, va_list ap)
 {
- 570:	7119                	addi	sp,sp,-128
- 572:	fc86                	sd	ra,120(sp)
- 574:	f8a2                	sd	s0,112(sp)
- 576:	f4a6                	sd	s1,104(sp)
- 578:	f0ca                	sd	s2,96(sp)
- 57a:	ecce                	sd	s3,88(sp)
- 57c:	e8d2                	sd	s4,80(sp)
- 57e:	e4d6                	sd	s5,72(sp)
- 580:	e0da                	sd	s6,64(sp)
- 582:	fc5e                	sd	s7,56(sp)
- 584:	f862                	sd	s8,48(sp)
- 586:	f466                	sd	s9,40(sp)
- 588:	f06a                	sd	s10,32(sp)
- 58a:	ec6e                	sd	s11,24(sp)
- 58c:	0100                	addi	s0,sp,128
+ 580:	7119                	addi	sp,sp,-128
+ 582:	fc86                	sd	ra,120(sp)
+ 584:	f8a2                	sd	s0,112(sp)
+ 586:	f4a6                	sd	s1,104(sp)
+ 588:	f0ca                	sd	s2,96(sp)
+ 58a:	ecce                	sd	s3,88(sp)
+ 58c:	e8d2                	sd	s4,80(sp)
+ 58e:	e4d6                	sd	s5,72(sp)
+ 590:	e0da                	sd	s6,64(sp)
+ 592:	fc5e                	sd	s7,56(sp)
+ 594:	f862                	sd	s8,48(sp)
+ 596:	f466                	sd	s9,40(sp)
+ 598:	f06a                	sd	s10,32(sp)
+ 59a:	ec6e                	sd	s11,24(sp)
+ 59c:	0100                	addi	s0,sp,128
   char *s;
   int c, i, state;
 
   state = 0;
   for(i = 0; fmt[i]; i++){
- 58e:	0005c903          	lbu	s2,0(a1)
- 592:	18090f63          	beqz	s2,730 <vprintf+0x1c0>
- 596:	8aaa                	mv	s5,a0
- 598:	8b32                	mv	s6,a2
- 59a:	00158493          	addi	s1,a1,1
+ 59e:	0005c903          	lbu	s2,0(a1)
+ 5a2:	18090f63          	beqz	s2,740 <vprintf+0x1c0>
+ 5a6:	8aaa                	mv	s5,a0
+ 5a8:	8b32                	mv	s6,a2
+ 5aa:	00158493          	addi	s1,a1,1
   state = 0;
- 59e:	4981                	li	s3,0
+ 5ae:	4981                	li	s3,0
       if(c == '%'){
         state = '%';
       } else {
         putc(fd, c);
       }
     } else if(state == '%'){
- 5a0:	02500a13          	li	s4,37
- 5a4:	4c55                	li	s8,21
- 5a6:	00000c97          	auipc	s9,0x0
- 5aa:	3cac8c93          	addi	s9,s9,970 # 970 <malloc+0x13c>
+ 5b0:	02500a13          	li	s4,37
+ 5b4:	4c55                	li	s8,21
+ 5b6:	00000c97          	auipc	s9,0x0
+ 5ba:	3cac8c93          	addi	s9,s9,970 # 980 <malloc+0x13c>
         printptr(fd, va_arg(ap, uint64));
       } else if(c == 's'){
         s = va_arg(ap, char*);
         if(s == 0)
           s = "(null)";
         while(*s != 0){
- 5ae:	02800d93          	li	s11,40
+ 5be:	02800d93          	li	s11,40
   putc(fd, 'x');
- 5b2:	4d41                	li	s10,16
+ 5c2:	4d41                	li	s10,16
     putc(fd, digits[x >> (sizeof(uint64) * 8 - 4)]);
- 5b4:	00000b97          	auipc	s7,0x0
- 5b8:	414b8b93          	addi	s7,s7,1044 # 9c8 <digits>
- 5bc:	a839                	j	5da <vprintf+0x6a>
+ 5c4:	00000b97          	auipc	s7,0x0
+ 5c8:	414b8b93          	addi	s7,s7,1044 # 9d8 <digits>
+ 5cc:	a839                	j	5ea <vprintf+0x6a>
         putc(fd, c);
- 5be:	85ca                	mv	a1,s2
- 5c0:	8556                	mv	a0,s5
- 5c2:	00000097          	auipc	ra,0x0
- 5c6:	ee0080e7          	jalr	-288(ra) # 4a2 <putc>
- 5ca:	a019                	j	5d0 <vprintf+0x60>
+ 5ce:	85ca                	mv	a1,s2
+ 5d0:	8556                	mv	a0,s5
+ 5d2:	00000097          	auipc	ra,0x0
+ 5d6:	ee0080e7          	jalr	-288(ra) # 4b2 <putc>
+ 5da:	a019                	j	5e0 <vprintf+0x60>
     } else if(state == '%'){
- 5cc:	01498d63          	beq	s3,s4,5e6 <vprintf+0x76>
+ 5dc:	01498d63          	beq	s3,s4,5f6 <vprintf+0x76>
   for(i = 0; fmt[i]; i++){
- 5d0:	0485                	addi	s1,s1,1
- 5d2:	fff4c903          	lbu	s2,-1(s1)
- 5d6:	14090d63          	beqz	s2,730 <vprintf+0x1c0>
+ 5e0:	0485                	addi	s1,s1,1
+ 5e2:	fff4c903          	lbu	s2,-1(s1)
+ 5e6:	14090d63          	beqz	s2,740 <vprintf+0x1c0>
     if(state == 0){
- 5da:	fe0999e3          	bnez	s3,5cc <vprintf+0x5c>
+ 5ea:	fe0999e3          	bnez	s3,5dc <vprintf+0x5c>
       if(c == '%'){
- 5de:	ff4910e3          	bne	s2,s4,5be <vprintf+0x4e>
+ 5ee:	ff4910e3          	bne	s2,s4,5ce <vprintf+0x4e>
         state = '%';
- 5e2:	89d2                	mv	s3,s4
- 5e4:	b7f5                	j	5d0 <vprintf+0x60>
+ 5f2:	89d2                	mv	s3,s4
+ 5f4:	b7f5                	j	5e0 <vprintf+0x60>
       if(c == 'd'){
- 5e6:	11490c63          	beq	s2,s4,6fe <vprintf+0x18e>
- 5ea:	f9d9079b          	addiw	a5,s2,-99
- 5ee:	0ff7f793          	zext.b	a5,a5
- 5f2:	10fc6e63          	bltu	s8,a5,70e <vprintf+0x19e>
- 5f6:	f9d9079b          	addiw	a5,s2,-99
- 5fa:	0ff7f713          	zext.b	a4,a5
- 5fe:	10ec6863          	bltu	s8,a4,70e <vprintf+0x19e>
- 602:	00271793          	slli	a5,a4,0x2
- 606:	97e6                	add	a5,a5,s9
- 608:	439c                	lw	a5,0(a5)
- 60a:	97e6                	add	a5,a5,s9
- 60c:	8782                	jr	a5
+ 5f6:	11490c63          	beq	s2,s4,70e <vprintf+0x18e>
+ 5fa:	f9d9079b          	addiw	a5,s2,-99
+ 5fe:	0ff7f793          	zext.b	a5,a5
+ 602:	10fc6e63          	bltu	s8,a5,71e <vprintf+0x19e>
+ 606:	f9d9079b          	addiw	a5,s2,-99
+ 60a:	0ff7f713          	zext.b	a4,a5
+ 60e:	10ec6863          	bltu	s8,a4,71e <vprintf+0x19e>
+ 612:	00271793          	slli	a5,a4,0x2
+ 616:	97e6                	add	a5,a5,s9
+ 618:	439c                	lw	a5,0(a5)
+ 61a:	97e6                	add	a5,a5,s9
+ 61c:	8782                	jr	a5
         printint(fd, va_arg(ap, int), 10, 1);
- 60e:	008b0913          	addi	s2,s6,8
- 612:	4685                	li	a3,1
- 614:	4629                	li	a2,10
- 616:	000b2583          	lw	a1,0(s6)
- 61a:	8556                	mv	a0,s5
- 61c:	00000097          	auipc	ra,0x0
- 620:	ea8080e7          	jalr	-344(ra) # 4c4 <printint>
- 624:	8b4a                	mv	s6,s2
+ 61e:	008b0913          	addi	s2,s6,8
+ 622:	4685                	li	a3,1
+ 624:	4629                	li	a2,10
+ 626:	000b2583          	lw	a1,0(s6)
+ 62a:	8556                	mv	a0,s5
+ 62c:	00000097          	auipc	ra,0x0
+ 630:	ea8080e7          	jalr	-344(ra) # 4d4 <printint>
+ 634:	8b4a                	mv	s6,s2
       } else {
         // Unknown % sequence.  Print it to draw attention.
         putc(fd, '%');
         putc(fd, c);
       }
       state = 0;
- 626:	4981                	li	s3,0
- 628:	b765                	j	5d0 <vprintf+0x60>
+ 636:	4981                	li	s3,0
+ 638:	b765                	j	5e0 <vprintf+0x60>
         printint(fd, va_arg(ap, uint64), 10, 0);
- 62a:	008b0913          	addi	s2,s6,8
- 62e:	4681                	li	a3,0
- 630:	4629                	li	a2,10
- 632:	000b2583          	lw	a1,0(s6)
- 636:	8556                	mv	a0,s5
- 638:	00000097          	auipc	ra,0x0
- 63c:	e8c080e7          	jalr	-372(ra) # 4c4 <printint>
- 640:	8b4a                	mv	s6,s2
+ 63a:	008b0913          	addi	s2,s6,8
+ 63e:	4681                	li	a3,0
+ 640:	4629                	li	a2,10
+ 642:	000b2583          	lw	a1,0(s6)
+ 646:	8556                	mv	a0,s5
+ 648:	00000097          	auipc	ra,0x0
+ 64c:	e8c080e7          	jalr	-372(ra) # 4d4 <printint>
+ 650:	8b4a                	mv	s6,s2
       state = 0;
- 642:	4981                	li	s3,0
- 644:	b771                	j	5d0 <vprintf+0x60>
+ 652:	4981                	li	s3,0
+ 654:	b771                	j	5e0 <vprintf+0x60>
         printint(fd, va_arg(ap, int), 16, 0);
- 646:	008b0913          	addi	s2,s6,8
- 64a:	4681                	li	a3,0
- 64c:	866a                	mv	a2,s10
- 64e:	000b2583          	lw	a1,0(s6)
- 652:	8556                	mv	a0,s5
- 654:	00000097          	auipc	ra,0x0
- 658:	e70080e7          	jalr	-400(ra) # 4c4 <printint>
- 65c:	8b4a                	mv	s6,s2
+ 656:	008b0913          	addi	s2,s6,8
+ 65a:	4681                	li	a3,0
+ 65c:	866a                	mv	a2,s10
+ 65e:	000b2583          	lw	a1,0(s6)
+ 662:	8556                	mv	a0,s5
+ 664:	00000097          	auipc	ra,0x0
+ 668:	e70080e7          	jalr	-400(ra) # 4d4 <printint>
+ 66c:	8b4a                	mv	s6,s2
       state = 0;
- 65e:	4981                	li	s3,0
- 660:	bf85                	j	5d0 <vprintf+0x60>
+ 66e:	4981                	li	s3,0
+ 670:	bf85                	j	5e0 <vprintf+0x60>
         printptr(fd, va_arg(ap, uint64));
- 662:	008b0793          	addi	a5,s6,8
- 666:	f8f43423          	sd	a5,-120(s0)
- 66a:	000b3983          	ld	s3,0(s6)
+ 672:	008b0793          	addi	a5,s6,8
+ 676:	f8f43423          	sd	a5,-120(s0)
+ 67a:	000b3983          	ld	s3,0(s6)
   putc(fd, '0');
- 66e:	03000593          	li	a1,48
- 672:	8556                	mv	a0,s5
- 674:	00000097          	auipc	ra,0x0
- 678:	e2e080e7          	jalr	-466(ra) # 4a2 <putc>
+ 67e:	03000593          	li	a1,48
+ 682:	8556                	mv	a0,s5
+ 684:	00000097          	auipc	ra,0x0
+ 688:	e2e080e7          	jalr	-466(ra) # 4b2 <putc>
   putc(fd, 'x');
- 67c:	07800593          	li	a1,120
- 680:	8556                	mv	a0,s5
- 682:	00000097          	auipc	ra,0x0
- 686:	e20080e7          	jalr	-480(ra) # 4a2 <putc>
- 68a:	896a                	mv	s2,s10
+ 68c:	07800593          	li	a1,120
+ 690:	8556                	mv	a0,s5
+ 692:	00000097          	auipc	ra,0x0
+ 696:	e20080e7          	jalr	-480(ra) # 4b2 <putc>
+ 69a:	896a                	mv	s2,s10
     putc(fd, digits[x >> (sizeof(uint64) * 8 - 4)]);
- 68c:	03c9d793          	srli	a5,s3,0x3c
- 690:	97de                	add	a5,a5,s7
- 692:	0007c583          	lbu	a1,0(a5)
- 696:	8556                	mv	a0,s5
- 698:	00000097          	auipc	ra,0x0
- 69c:	e0a080e7          	jalr	-502(ra) # 4a2 <putc>
+ 69c:	03c9d793          	srli	a5,s3,0x3c
+ 6a0:	97de                	add	a5,a5,s7
+ 6a2:	0007c583          	lbu	a1,0(a5)
+ 6a6:	8556                	mv	a0,s5
+ 6a8:	00000097          	auipc	ra,0x0
+ 6ac:	e0a080e7          	jalr	-502(ra) # 4b2 <putc>
   for (i = 0; i < (sizeof(uint64) * 2); i++, x <<= 4)
- 6a0:	0992                	slli	s3,s3,0x4
- 6a2:	397d                	addiw	s2,s2,-1
- 6a4:	fe0914e3          	bnez	s2,68c <vprintf+0x11c>
+ 6b0:	0992                	slli	s3,s3,0x4
+ 6b2:	397d                	addiw	s2,s2,-1
+ 6b4:	fe0914e3          	bnez	s2,69c <vprintf+0x11c>
         printptr(fd, va_arg(ap, uint64));
- 6a8:	f8843b03          	ld	s6,-120(s0)
+ 6b8:	f8843b03          	ld	s6,-120(s0)
       state = 0;
- 6ac:	4981                	li	s3,0
- 6ae:	b70d                	j	5d0 <vprintf+0x60>
+ 6bc:	4981                	li	s3,0
+ 6be:	b70d                	j	5e0 <vprintf+0x60>
         s = va_arg(ap, char*);
- 6b0:	008b0913          	addi	s2,s6,8
- 6b4:	000b3983          	ld	s3,0(s6)
+ 6c0:	008b0913          	addi	s2,s6,8
+ 6c4:	000b3983          	ld	s3,0(s6)
         if(s == 0)
- 6b8:	02098163          	beqz	s3,6da <vprintf+0x16a>
+ 6c8:	02098163          	beqz	s3,6ea <vprintf+0x16a>
         while(*s != 0){
- 6bc:	0009c583          	lbu	a1,0(s3)
- 6c0:	c5ad                	beqz	a1,72a <vprintf+0x1ba>
+ 6cc:	0009c583          	lbu	a1,0(s3)
+ 6d0:	c5ad                	beqz	a1,73a <vprintf+0x1ba>
           putc(fd, *s);
- 6c2:	8556                	mv	a0,s5
- 6c4:	00000097          	auipc	ra,0x0
- 6c8:	dde080e7          	jalr	-546(ra) # 4a2 <putc>
+ 6d2:	8556                	mv	a0,s5
+ 6d4:	00000097          	auipc	ra,0x0
+ 6d8:	dde080e7          	jalr	-546(ra) # 4b2 <putc>
           s++;
- 6cc:	0985                	addi	s3,s3,1
+ 6dc:	0985                	addi	s3,s3,1
         while(*s != 0){
- 6ce:	0009c583          	lbu	a1,0(s3)
- 6d2:	f9e5                	bnez	a1,6c2 <vprintf+0x152>
+ 6de:	0009c583          	lbu	a1,0(s3)
+ 6e2:	f9e5                	bnez	a1,6d2 <vprintf+0x152>
         s = va_arg(ap, char*);
- 6d4:	8b4a                	mv	s6,s2
+ 6e4:	8b4a                	mv	s6,s2
       state = 0;
- 6d6:	4981                	li	s3,0
- 6d8:	bde5                	j	5d0 <vprintf+0x60>
+ 6e6:	4981                	li	s3,0
+ 6e8:	bde5                	j	5e0 <vprintf+0x60>
           s = "(null)";
- 6da:	00000997          	auipc	s3,0x0
- 6de:	28e98993          	addi	s3,s3,654 # 968 <malloc+0x134>
+ 6ea:	00000997          	auipc	s3,0x0
+ 6ee:	28e98993          	addi	s3,s3,654 # 978 <malloc+0x134>
         while(*s != 0){
- 6e2:	85ee                	mv	a1,s11
- 6e4:	bff9                	j	6c2 <vprintf+0x152>
+ 6f2:	85ee                	mv	a1,s11
+ 6f4:	bff9                	j	6d2 <vprintf+0x152>
         putc(fd, va_arg(ap, uint));
- 6e6:	008b0913          	addi	s2,s6,8
- 6ea:	000b4583          	lbu	a1,0(s6)
- 6ee:	8556                	mv	a0,s5
- 6f0:	00000097          	auipc	ra,0x0
- 6f4:	db2080e7          	jalr	-590(ra) # 4a2 <putc>
- 6f8:	8b4a                	mv	s6,s2
-      state = 0;
- 6fa:	4981                	li	s3,0
- 6fc:	bdd1                	j	5d0 <vprintf+0x60>
-        putc(fd, c);
- 6fe:	85d2                	mv	a1,s4
- 700:	8556                	mv	a0,s5
- 702:	00000097          	auipc	ra,0x0
- 706:	da0080e7          	jalr	-608(ra) # 4a2 <putc>
+ 6f6:	008b0913          	addi	s2,s6,8
+ 6fa:	000b4583          	lbu	a1,0(s6)
+ 6fe:	8556                	mv	a0,s5
+ 700:	00000097          	auipc	ra,0x0
+ 704:	db2080e7          	jalr	-590(ra) # 4b2 <putc>
+ 708:	8b4a                	mv	s6,s2
       state = 0;
  70a:	4981                	li	s3,0
- 70c:	b5d1                	j	5d0 <vprintf+0x60>
-        putc(fd, '%');
+ 70c:	bdd1                	j	5e0 <vprintf+0x60>
+        putc(fd, c);
  70e:	85d2                	mv	a1,s4
  710:	8556                	mv	a0,s5
  712:	00000097          	auipc	ra,0x0
- 716:	d90080e7          	jalr	-624(ra) # 4a2 <putc>
+ 716:	da0080e7          	jalr	-608(ra) # 4b2 <putc>
+      state = 0;
+ 71a:	4981                	li	s3,0
+ 71c:	b5d1                	j	5e0 <vprintf+0x60>
+        putc(fd, '%');
+ 71e:	85d2                	mv	a1,s4
+ 720:	8556                	mv	a0,s5
+ 722:	00000097          	auipc	ra,0x0
+ 726:	d90080e7          	jalr	-624(ra) # 4b2 <putc>
         putc(fd, c);
- 71a:	85ca                	mv	a1,s2
- 71c:	8556                	mv	a0,s5
- 71e:	00000097          	auipc	ra,0x0
- 722:	d84080e7          	jalr	-636(ra) # 4a2 <putc>
+ 72a:	85ca                	mv	a1,s2
+ 72c:	8556                	mv	a0,s5
+ 72e:	00000097          	auipc	ra,0x0
+ 732:	d84080e7          	jalr	-636(ra) # 4b2 <putc>
       state = 0;
- 726:	4981                	li	s3,0
- 728:	b565                	j	5d0 <vprintf+0x60>
+ 736:	4981                	li	s3,0
+ 738:	b565                	j	5e0 <vprintf+0x60>
         s = va_arg(ap, char*);
- 72a:	8b4a                	mv	s6,s2
+ 73a:	8b4a                	mv	s6,s2
       state = 0;
- 72c:	4981                	li	s3,0
- 72e:	b54d                	j	5d0 <vprintf+0x60>
+ 73c:	4981                	li	s3,0
+ 73e:	b54d                	j	5e0 <vprintf+0x60>
     }
   }
 }
- 730:	70e6                	ld	ra,120(sp)
- 732:	7446                	ld	s0,112(sp)
- 734:	74a6                	ld	s1,104(sp)
- 736:	7906                	ld	s2,96(sp)
- 738:	69e6                	ld	s3,88(sp)
- 73a:	6a46                	ld	s4,80(sp)
- 73c:	6aa6                	ld	s5,72(sp)
- 73e:	6b06                	ld	s6,64(sp)
- 740:	7be2                	ld	s7,56(sp)
- 742:	7c42                	ld	s8,48(sp)
- 744:	7ca2                	ld	s9,40(sp)
- 746:	7d02                	ld	s10,32(sp)
- 748:	6de2                	ld	s11,24(sp)
- 74a:	6109                	addi	sp,sp,128
- 74c:	8082                	ret
+ 740:	70e6                	ld	ra,120(sp)
+ 742:	7446                	ld	s0,112(sp)
+ 744:	74a6                	ld	s1,104(sp)
+ 746:	7906                	ld	s2,96(sp)
+ 748:	69e6                	ld	s3,88(sp)
+ 74a:	6a46                	ld	s4,80(sp)
+ 74c:	6aa6                	ld	s5,72(sp)
+ 74e:	6b06                	ld	s6,64(sp)
+ 750:	7be2                	ld	s7,56(sp)
+ 752:	7c42                	ld	s8,48(sp)
+ 754:	7ca2                	ld	s9,40(sp)
+ 756:	7d02                	ld	s10,32(sp)
+ 758:	6de2                	ld	s11,24(sp)
+ 75a:	6109                	addi	sp,sp,128
+ 75c:	8082                	ret
 
-000000000000074e <fprintf>:
+000000000000075e <fprintf>:
 
 void
 fprintf(int fd, const char *fmt, ...)
 {
- 74e:	715d                	addi	sp,sp,-80
- 750:	ec06                	sd	ra,24(sp)
- 752:	e822                	sd	s0,16(sp)
- 754:	1000                	addi	s0,sp,32
- 756:	e010                	sd	a2,0(s0)
- 758:	e414                	sd	a3,8(s0)
- 75a:	e818                	sd	a4,16(s0)
- 75c:	ec1c                	sd	a5,24(s0)
- 75e:	03043023          	sd	a6,32(s0)
- 762:	03143423          	sd	a7,40(s0)
+ 75e:	715d                	addi	sp,sp,-80
+ 760:	ec06                	sd	ra,24(sp)
+ 762:	e822                	sd	s0,16(sp)
+ 764:	1000                	addi	s0,sp,32
+ 766:	e010                	sd	a2,0(s0)
+ 768:	e414                	sd	a3,8(s0)
+ 76a:	e818                	sd	a4,16(s0)
+ 76c:	ec1c                	sd	a5,24(s0)
+ 76e:	03043023          	sd	a6,32(s0)
+ 772:	03143423          	sd	a7,40(s0)
   va_list ap;
 
   va_start(ap, fmt);
- 766:	fe843423          	sd	s0,-24(s0)
+ 776:	fe843423          	sd	s0,-24(s0)
   vprintf(fd, fmt, ap);
- 76a:	8622                	mv	a2,s0
- 76c:	00000097          	auipc	ra,0x0
- 770:	e04080e7          	jalr	-508(ra) # 570 <vprintf>
-}
- 774:	60e2                	ld	ra,24(sp)
- 776:	6442                	ld	s0,16(sp)
- 778:	6161                	addi	sp,sp,80
- 77a:	8082                	ret
+ 77a:	8622                	mv	a2,s0
+ 77c:	00000097          	auipc	ra,0x0
+ 780:	e04080e7          	jalr	-508(ra) # 580 <vprintf>
+}
+ 784:	60e2                	ld	ra,24(sp)
+ 786:	6442                	ld	s0,16(sp)
+ 788:	6161                	addi	sp,sp,80
+ 78a:	8082                	ret
 
-000000000000077c <printf>:
+000000000000078c <printf>:
 
 void
 printf(const char *fmt, ...)
 {
- 77c:	711d                	addi	sp,sp,-96
- 77e:	ec06                	sd	ra,24(sp)
- 780:	e822                	sd	s0,16(sp)
- 782:	1000                	addi	s0,sp,32
- 784:	e40c                	sd	a1,8(s0)
- 786:	e810                	sd	a2,16(s0)
- 788:	ec14                	sd	a3,24(s0)
- 78a:	f018                	sd	a4,32(s0)
- 78c:	f41c                	sd	a5,40(s0)
- 78e:	03043823          	sd	a6,48(s0)
- 792:	03143c23          	sd	a7,56(s0)
+ 78c:	711d                	addi	sp,sp,-96
+ 78e:	ec06                	sd	ra,24(sp)
+ 790:	e822                	sd	s0,16(sp)
+ 792:	1000                	addi	s0,sp,32
+ 794:	e40c                	sd	a1,8(s0)
+ 796:	e810                	sd	a2,16(s0)
+ 798:	ec14                	sd	a3,24(s0)
+ 79a:	f018                	sd	a4,32(s0)
+ 79c:	f41c                	sd	a5,40(s0)
+ 79e:	03043823          	sd	a6,48(s0)
+ 7a2:	03143c23          	sd	a7,56(s0)
   va_list ap;
 
   va_start(ap, fmt);
- 796:	00840613          	addi	a2,s0,8
- 79a:	fec43423          	sd	a2,-24(s0)
+ 7a6:	00840613          	addi	a2,s0,8
+ 7aa:	fec43423          	sd	a2,-24(s0)
   vprintf(1, fmt, ap);
- 79e:	85aa                	mv	a1,a0
- 7a0:	4505                	li	a0,1
- 7a2:	00000097          	auipc	ra,0x0
- 7a6:	dce080e7          	jalr	-562(ra) # 570 <vprintf>
-}
- 7aa:	60e2                	ld	ra,24(sp)
- 7ac:	6442                	ld	s0,16(sp)
- 7ae:	6125                	addi	sp,sp,96
- 7b0:	8082                	ret
+ 7ae:	85aa                	mv	a1,a0
+ 7b0:	4505                	li	a0,1
+ 7b2:	00000097          	auipc	ra,0x0
+ 7b6:	dce080e7          	jalr	-562(ra) # 580 <vprintf>
+}
+ 7ba:	60e2                	ld	ra,24(sp)
+ 7bc:	6442                	ld	s0,16(sp)
+ 7be:	6125                	addi	sp,sp,96
+ 7c0:	8082                	ret
 
-00000000000007b2 <free>:
+00000000000007c2 <free>:
 static Header base;
 static Header *freep;
 
 void
 free(void *ap)
 {
- 7b2:	1141                	addi	sp,sp,-16
- 7b4:	e422                	sd	s0,8(sp)
- 7b6:	0800                	addi	s0,sp,16
+ 7c2:	1141                	addi	sp,sp,-16
+ 7c4:	e422                	sd	s0,8(sp)
+ 7c6:	0800                	addi	s0,sp,16
   Header *bp, *p;
 
   bp = (Header*)ap - 1;
- 7b8:	ff050693          	addi	a3,a0,-16
+ 7c8:	ff050693          	addi	a3,a0,-16
   for(p = freep; !(bp > p && bp < p->s.ptr); p = p->s.ptr)
- 7bc:	00000797          	auipc	a5,0x0
- 7c0:	2247b783          	ld	a5,548(a5) # 9e0 <freep>
- 7c4:	a02d                	j	7ee <free+0x3c>
+ 7cc:	00000797          	auipc	a5,0x0
+ 7d0:	2247b783          	ld	a5,548(a5) # 9f0 <freep>
+ 7d4:	a02d                	j	7fe <free+0x3c>
     if(p >= p->s.ptr && (bp > p || bp < p->s.ptr))
       break;
   if(bp + bp->s.size == p->s.ptr){
     bp->s.size += p->s.ptr->s.size;
- 7c6:	4618                	lw	a4,8(a2)
- 7c8:	9f2d                	addw	a4,a4,a1
- 7ca:	fee52c23          	sw	a4,-8(a0)
+ 7d6:	4618                	lw	a4,8(a2)
+ 7d8:	9f2d                	addw	a4,a4,a1
+ 7da:	fee52c23          	sw	a4,-8(a0)
     bp->s.ptr = p->s.ptr->s.ptr;
- 7ce:	6398                	ld	a4,0(a5)
- 7d0:	6310                	ld	a2,0(a4)
- 7d2:	a83d                	j	810 <free+0x5e>
+ 7de:	6398                	ld	a4,0(a5)
+ 7e0:	6310                	ld	a2,0(a4)
+ 7e2:	a83d                	j	820 <free+0x5e>
   } else
     bp->s.ptr = p->s.ptr;
   if(p + p->s.size == bp){
     p->s.size += bp->s.size;
- 7d4:	ff852703          	lw	a4,-8(a0)
- 7d8:	9f31                	addw	a4,a4,a2
- 7da:	c798                	sw	a4,8(a5)
+ 7e4:	ff852703          	lw	a4,-8(a0)
+ 7e8:	9f31                	addw	a4,a4,a2
+ 7ea:	c798                	sw	a4,8(a5)
     p->s.ptr = bp->s.ptr;
- 7dc:	ff053683          	ld	a3,-16(a0)
- 7e0:	a091                	j	824 <free+0x72>
+ 7ec:	ff053683          	ld	a3,-16(a0)
+ 7f0:	a091                	j	834 <free+0x72>
     if(p >= p->s.ptr && (bp > p || bp < p->s.ptr))
- 7e2:	6398                	ld	a4,0(a5)
- 7e4:	00e7e463          	bltu	a5,a4,7ec <free+0x3a>
- 7e8:	00e6ea63          	bltu	a3,a4,7fc <free+0x4a>
+ 7f2:	6398                	ld	a4,0(a5)
+ 7f4:	00e7e463          	bltu	a5,a4,7fc <free+0x3a>
+ 7f8:	00e6ea63          	bltu	a3,a4,80c <free+0x4a>
 {
- 7ec:	87ba                	mv	a5,a4
+ 7fc:	87ba                	mv	a5,a4
   for(p = freep; !(bp > p && bp < p->s.ptr); p = p->s.ptr)
- 7ee:	fed7fae3          	bgeu	a5,a3,7e2 <free+0x30>
- 7f2:	6398                	ld	a4,0(a5)
- 7f4:	00e6e463          	bltu	a3,a4,7fc <free+0x4a>
+ 7fe:	fed7fae3          	bgeu	a5,a3,7f2 <free+0x30>
+ 802:	6398                	ld	a4,0(a5)
+ 804:	00e6e463          	bltu	a3,a4,80c <free+0x4a>
     if(p >= p->s.ptr && (bp > p || bp < p->s.ptr))
- 7f8:	fee7eae3          	bltu	a5,a4,7ec <free+0x3a>
+ 808:	fee7eae3          	bltu	a5,a4,7fc <free+0x3a>
   if(bp + bp->s.size == p->s.ptr){
- 7fc:	ff852583          	lw	a1,-8(a0)
- 800:	6390                	ld	a2,0(a5)
- 802:	02059813          	slli	a6,a1,0x20
- 806:	01c85713          	srli	a4,a6,0x1c
- 80a:	9736                	add	a4,a4,a3
- 80c:	fae60de3          	beq	a2,a4,7c6 <free+0x14>
+ 80c:	ff852583          	lw	a1,-8(a0)
+ 810:	6390                	ld	a2,0(a5)
+ 812:	02059813          	slli	a6,a1,0x20
+ 816:	01c85713          	srli	a4,a6,0x1c
+ 81a:	9736                	add	a4,a4,a3
+ 81c:	fae60de3          	beq	a2,a4,7d6 <free+0x14>
     bp->s.ptr = p->s.ptr->s.ptr;
- 810:	fec53823          	sd	a2,-16(a0)
+ 820:	fec53823          	sd	a2,-16(a0)
   if(p + p->s.size == bp){
- 814:	4790                	lw	a2,8(a5)
- 816:	02061593          	slli	a1,a2,0x20
- 81a:	01c5d713          	srli	a4,a1,0x1c
- 81e:	973e                	add	a4,a4,a5
- 820:	fae68ae3          	beq	a3,a4,7d4 <free+0x22>
+ 824:	4790                	lw	a2,8(a5)
+ 826:	02061593          	slli	a1,a2,0x20
+ 82a:	01c5d713          	srli	a4,a1,0x1c
+ 82e:	973e                	add	a4,a4,a5
+ 830:	fae68ae3          	beq	a3,a4,7e4 <free+0x22>
     p->s.ptr = bp->s.ptr;
- 824:	e394                	sd	a3,0(a5)
+ 834:	e394                	sd	a3,0(a5)
   } else
     p->s.ptr = bp;
   freep = p;
- 826:	00000717          	auipc	a4,0x0
- 82a:	1af73d23          	sd	a5,442(a4) # 9e0 <freep>
+ 836:	00000717          	auipc	a4,0x0
+ 83a:	1af73d23          	sd	a5,442(a4) # 9f0 <freep>
 }
- 82e:	6422                	ld	s0,8(sp)
- 830:	0141                	addi	sp,sp,16
- 832:	8082                	ret
+ 83e:	6422                	ld	s0,8(sp)
+ 840:	0141                	addi	sp,sp,16
+ 842:	8082                	ret
 
-0000000000000834 <malloc>:
+0000000000000844 <malloc>:
   return freep;
 }
 
 void*
 malloc(uint nbytes)
 {
- 834:	7139                	addi	sp,sp,-64
- 836:	fc06                	sd	ra,56(sp)
- 838:	f822                	sd	s0,48(sp)
- 83a:	f426                	sd	s1,40(sp)
- 83c:	f04a                	sd	s2,32(sp)
- 83e:	ec4e                	sd	s3,24(sp)
- 840:	e852                	sd	s4,16(sp)
- 842:	e456                	sd	s5,8(sp)
- 844:	e05a                	sd	s6,0(sp)
- 846:	0080                	addi	s0,sp,64
+ 844:	7139                	addi	sp,sp,-64
+ 846:	fc06                	sd	ra,56(sp)
+ 848:	f822                	sd	s0,48(sp)
+ 84a:	f426                	sd	s1,40(sp)
+ 84c:	f04a                	sd	s2,32(sp)
+ 84e:	ec4e                	sd	s3,24(sp)
+ 850:	e852                	sd	s4,16(sp)
+ 852:	e456                	sd	s5,8(sp)
+ 854:	e05a                	sd	s6,0(sp)
+ 856:	0080                	addi	s0,sp,64
   Header *p, *prevp;
   uint nunits;
 
   nunits = (nbytes + sizeof(Header) - 1)/sizeof(Header) + 1;
- 848:	02051493          	slli	s1,a0,0x20
- 84c:	9081                	srli	s1,s1,0x20
- 84e:	04bd                	addi	s1,s1,15
- 850:	8091                	srli	s1,s1,0x4
- 852:	0014899b          	addiw	s3,s1,1
- 856:	0485                	addi	s1,s1,1
+ 858:	02051493          	slli	s1,a0,0x20
+ 85c:	9081                	srli	s1,s1,0x20
+ 85e:	04bd                	addi	s1,s1,15
+ 860:	8091                	srli	s1,s1,0x4
+ 862:	0014899b          	addiw	s3,s1,1
+ 866:	0485                	addi	s1,s1,1
   if((prevp = freep) == 0){
- 858:	00000517          	auipc	a0,0x0
- 85c:	18853503          	ld	a0,392(a0) # 9e0 <freep>
- 860:	c515                	beqz	a0,88c <malloc+0x58>
+ 868:	00000517          	auipc	a0,0x0
+ 86c:	18853503          	ld	a0,392(a0) # 9f0 <freep>
+ 870:	c515                	beqz	a0,89c <malloc+0x58>
     base.s.ptr = freep = prevp = &base;
     base.s.size = 0;
   }
   for(p = prevp->s.ptr; ; prevp = p, p = p->s.ptr){
- 862:	611c                	ld	a5,0(a0)
+ 872:	611c                	ld	a5,0(a0)
     if(p->s.size >= nunits){
- 864:	4798                	lw	a4,8(a5)
- 866:	02977f63          	bgeu	a4,s1,8a4 <malloc+0x70>
- 86a:	8a4e                	mv	s4,s3
- 86c:	0009871b          	sext.w	a4,s3
- 870:	6685                	lui	a3,0x1
- 872:	00d77363          	bgeu	a4,a3,878 <malloc+0x44>
- 876:	6a05                	lui	s4,0x1
- 878:	000a0b1b          	sext.w	s6,s4
+ 874:	4798                	lw	a4,8(a5)
+ 876:	02977f63          	bgeu	a4,s1,8b4 <malloc+0x70>
+ 87a:	8a4e                	mv	s4,s3
+ 87c:	0009871b          	sext.w	a4,s3
+ 880:	6685                	lui	a3,0x1
+ 882:	00d77363          	bgeu	a4,a3,888 <malloc+0x44>
+ 886:	6a05                	lui	s4,0x1
+ 888:	000a0b1b          	sext.w	s6,s4
   p = sbrk(nu * sizeof(Header));
- 87c:	004a1a1b          	slliw	s4,s4,0x4
+ 88c:	004a1a1b          	slliw	s4,s4,0x4
         p->s.size = nunits;
       }
       freep = prevp;
       return (void*)(p + 1);
     }
     if(p == freep)
- 880:	00000917          	auipc	s2,0x0
- 884:	16090913          	addi	s2,s2,352 # 9e0 <freep>
+ 890:	00000917          	auipc	s2,0x0
+ 894:	16090913          	addi	s2,s2,352 # 9f0 <freep>
   if(p == (char*)-1)
- 888:	5afd                	li	s5,-1
- 88a:	a895                	j	8fe <malloc+0xca>
+ 898:	5afd                	li	s5,-1
+ 89a:	a895                	j	90e <malloc+0xca>
     base.s.ptr = freep = prevp = &base;
- 88c:	00000797          	auipc	a5,0x0
- 890:	35c78793          	addi	a5,a5,860 # be8 <base>
- 894:	00000717          	auipc	a4,0x0
- 898:	14f73623          	sd	a5,332(a4) # 9e0 <freep>
- 89c:	e39c                	sd	a5,0(a5)
+ 89c:	00000797          	auipc	a5,0x0
+ 8a0:	35c78793          	addi	a5,a5,860 # bf8 <base>
+ 8a4:	00000717          	auipc	a4,0x0
+ 8a8:	14f73623          	sd	a5,332(a4) # 9f0 <freep>
+ 8ac:	e39c                	sd	a5,0(a5)
     base.s.size = 0;
- 89e:	0007a423          	sw	zero,8(a5)
+ 8ae:	0007a423          	sw	zero,8(a5)
     if(p->s.size >= nunits){
- 8a2:	b7e1                	j	86a <malloc+0x36>
+ 8b2:	b7e1                	j	87a <malloc+0x36>
       if(p->s.size == nunits)
- 8a4:	02e48c63          	beq	s1,a4,8dc <malloc+0xa8>
+ 8b4:	02e48c63          	beq	s1,a4,8ec <malloc+0xa8>
         p->s.size -= nunits;
- 8a8:	4137073b          	subw	a4,a4,s3
- 8ac:	c798                	sw	a4,8(a5)
+ 8b8:	4137073b          	subw	a4,a4,s3
+ 8bc:	c798                	sw	a4,8(a5)
         p += p->s.size;
- 8ae:	02071693          	slli	a3,a4,0x20
- 8b2:	01c6d713          	srli	a4,a3,0x1c
- 8b6:	97ba                	add	a5,a5,a4
+ 8be:	02071693          	slli	a3,a4,0x20
+ 8c2:	01c6d713          	srli	a4,a3,0x1c
+ 8c6:	97ba                	add	a5,a5,a4
         p->s.size = nunits;
- 8b8:	0137a423          	sw	s3,8(a5)
+ 8c8:	0137a423          	sw	s3,8(a5)
       freep = prevp;
- 8bc:	00000717          	auipc	a4,0x0
- 8c0:	12a73223          	sd	a0,292(a4) # 9e0 <freep>
+ 8cc:	00000717          	auipc	a4,0x0
+ 8d0:	12a73223          	sd	a0,292(a4) # 9f0 <freep>
       return (void*)(p + 1);
- 8c4:	01078513          	addi	a0,a5,16
+ 8d4:	01078513          	addi	a0,a5,16
       if((p = morecore(nunits)) == 0)
         return 0;
   }
 }
- 8c8:	70e2                	ld	ra,56(sp)
- 8ca:	7442                	ld	s0,48(sp)
- 8cc:	74a2                	ld	s1,40(sp)
- 8ce:	7902                	ld	s2,32(sp)
- 8d0:	69e2                	ld	s3,24(sp)
- 8d2:	6a42                	ld	s4,16(sp)
- 8d4:	6aa2                	ld	s5,8(sp)
- 8d6:	6b02                	ld	s6,0(sp)
- 8d8:	6121                	addi	sp,sp,64
- 8da:	8082                	ret
+ 8d8:	70e2                	ld	ra,56(sp)
+ 8da:	7442                	ld	s0,48(sp)
+ 8dc:	74a2                	ld	s1,40(sp)
+ 8de:	7902                	ld	s2,32(sp)
+ 8e0:	69e2                	ld	s3,24(sp)
+ 8e2:	6a42                	ld	s4,16(sp)
+ 8e4:	6aa2                	ld	s5,8(sp)
+ 8e6:	6b02                	ld	s6,0(sp)
+ 8e8:	6121                	addi	sp,sp,64
+ 8ea:	8082                	ret
         prevp->s.ptr = p->s.ptr;
- 8dc:	6398                	ld	a4,0(a5)
- 8de:	e118                	sd	a4,0(a0)
- 8e0:	bff1                	j	8bc <malloc+0x88>
+ 8ec:	6398                	ld	a4,0(a5)
+ 8ee:	e118                	sd	a4,0(a0)
+ 8f0:	bff1                	j	8cc <malloc+0x88>
   hp->s.size = nu;
- 8e2:	01652423          	sw	s6,8(a0)
+ 8f2:	01652423          	sw	s6,8(a0)
   free((void*)(hp + 1));
- 8e6:	0541                	addi	a0,a0,16
- 8e8:	00000097          	auipc	ra,0x0
- 8ec:	eca080e7          	jalr	-310(ra) # 7b2 <free>
+ 8f6:	0541                	addi	a0,a0,16
+ 8f8:	00000097          	auipc	ra,0x0
+ 8fc:	eca080e7          	jalr	-310(ra) # 7c2 <free>
   return freep;
- 8f0:	00093503          	ld	a0,0(s2)
+ 900:	00093503          	ld	a0,0(s2)
       if((p = morecore(nunits)) == 0)
- 8f4:	d971                	beqz	a0,8c8 <malloc+0x94>
+ 904:	d971                	beqz	a0,8d8 <malloc+0x94>
   for(p = prevp->s.ptr; ; prevp = p, p = p->s.ptr){
- 8f6:	611c                	ld	a5,0(a0)
+ 906:	611c                	ld	a5,0(a0)
     if(p->s.size >= nunits){
- 8f8:	4798                	lw	a4,8(a5)
- 8fa:	fa9775e3          	bgeu	a4,s1,8a4 <malloc+0x70>
+ 908:	4798                	lw	a4,8(a5)
+ 90a:	fa9775e3          	bgeu	a4,s1,8b4 <malloc+0x70>
     if(p == freep)
- 8fe:	00093703          	ld	a4,0(s2)
- 902:	853e                	mv	a0,a5
- 904:	fef719e3          	bne	a4,a5,8f6 <malloc+0xc2>
+ 90e:	00093703          	ld	a4,0(s2)
+ 912:	853e                	mv	a0,a5
+ 914:	fef719e3          	bne	a4,a5,906 <malloc+0xc2>
   p = sbrk(nu * sizeof(Header));
- 908:	8552                	mv	a0,s4
- 90a:	00000097          	auipc	ra,0x0
- 90e:	b80080e7          	jalr	-1152(ra) # 48a <sbrk>
+ 918:	8552                	mv	a0,s4
+ 91a:	00000097          	auipc	ra,0x0
+ 91e:	b70080e7          	jalr	-1168(ra) # 48a <sbrk>
   if(p == (char*)-1)
- 912:	fd5518e3          	bne	a0,s5,8e2 <malloc+0xae>
+ 922:	fd5518e3          	bne	a0,s5,8f2 <malloc+0xae>
         return 0;
- 916:	4501                	li	a0,0
- 918:	bf45                	j	8c8 <malloc+0x94>
+ 926:	4501                	li	a0,0
+ 928:	bf45                	j	8d8 <malloc+0x94>
Binary files ./user/wc.o and ../xv6-labs-2021/user/wc.o differ
diff -urN ./user/wc.sym ../xv6-labs-2021/user/wc.sym
--- ./user/wc.sym	2021-12-05 17:54:42.000000000 +0800
+++ ../xv6-labs-2021/user/wc.sym	2021-11-26 14:46:16.000000000 +0800
@@ -1,7 +1,7 @@
 0000000000000000 .text
-0000000000000920 .rodata
-00000000000009e0 .sbss
-00000000000009e8 .bss
+0000000000000930 .rodata
+00000000000009f0 .sbss
+00000000000009f8 .bss
 0000000000000000 .comment
 0000000000000000 .riscv.attributes
 0000000000000000 .debug_aranges
@@ -16,29 +16,31 @@
 0000000000000000 wc.c
 0000000000000000 ulib.c
 0000000000000000 printf.c
-00000000000004a2 putc
-00000000000004c4 printint
-00000000000009c8 digits
+00000000000004b2 putc
+00000000000004d4 printint
+00000000000009d8 digits
 0000000000000000 umalloc.c
-00000000000009e0 freep
-0000000000000be8 base
+00000000000009f0 freep
+0000000000000bf8 base
 0000000000000196 strcpy
-000000000000077c printf
-00000000000011d9 __global_pointer$
+000000000000078c printf
+00000000000011e9 __global_pointer$
 0000000000000350 memmove
 000000000000044a mknod
+00000000000004a2 trace
 000000000000024e gets
-00000000000009d9 __SDATA_BEGIN__
+00000000000009e9 __SDATA_BEGIN__
 0000000000000482 getpid
 00000000000003e2 memcpy
-0000000000000834 malloc
+0000000000000844 malloc
 0000000000000492 sleep
+00000000000004aa sysinfo
 0000000000000412 pipe
 0000000000000422 write
 000000000000045a fstat
-000000000000074e fprintf
+000000000000075e fprintf
 0000000000000432 kill
-0000000000000570 vprintf
+0000000000000580 vprintf
 0000000000000472 chdir
 000000000000043a exec
 000000000000040a wait
@@ -47,19 +49,19 @@
 0000000000000000 wc
 00000000000003a8 memcmp
 00000000000003fa fork
-0000000000000bf8 __BSS_END__
+0000000000000c08 __BSS_END__
 000000000000048a sbrk
 000000000000049a uptime
-00000000000009d9 __bss_start
+00000000000009e9 __bss_start
 0000000000000208 memset
 00000000000000fe main
 00000000000001b2 strcmp
 000000000000047a dup
-00000000000009e8 buf
-00000000000009d9 __DATA_BEGIN__
+00000000000009f8 buf
+00000000000009e9 __DATA_BEGIN__
 00000000000002c2 stat
-00000000000009d9 _edata
-0000000000000bf8 _end
+00000000000009e9 _edata
+0000000000000c08 _end
 0000000000000462 link
 0000000000000402 exit
 0000000000000308 atoi
@@ -68,4 +70,4 @@
 000000000000022a strchr
 000000000000046a mkdir
 000000000000042a close
-00000000000007b2 free
+00000000000007c2 free
diff -urN ./user/xargs.c ../xv6-labs-2021/user/xargs.c
--- ./user/xargs.c	1970-01-01 08:00:00.000000000 +0800
+++ ../xv6-labs-2021/user/xargs.c	2021-12-05 17:40:55.000000000 +0800
@@ -0,0 +1,41 @@
+#include "kernel/types.h"
+#include "kernel/stat.h"
+#include "kernel/param.h"
+#include "user/user.h"
+#include "kernel/fs.h"
+
+int main(int argc, char* argv[]) {
+    int status;
+    char buf[64];
+    int buf_index = 0;
+    int argv_index = 0;
+    int i = 0;
+    while (read(0, buf + buf_index, 1) != 0) {
+        if (buf[buf_index] == '\n') {
+            buf[buf_index] = '\0';
+            if (argv_index >= 32) {
+                printf("too many args");
+                exit(-1);
+            }
+            char *newargv[MAXARG];
+            i = 0;
+            for (; i + 1 < argc; i++) {
+                newargv[i] = argv[i + 1];
+            }
+            newargv[i] = buf;
+            int pid = fork();
+            if (pid == 0) {
+                exec(argv[1], newargv);
+            }
+            else {
+                wait(&status);
+            }
+            buf_index = 0;
+        } else {
+            buf_index++;
+        }
+    }
+    wait(&status);
+    exit(0);
+    return 0;
+}
diff -urN ./user/zombie.asm ../xv6-labs-2021/user/zombie.asm
--- ./user/zombie.asm	2021-12-05 17:54:42.000000000 +0800
+++ ../xv6-labs-2021/user/zombie.asm	2021-11-26 14:46:16.000000000 +0800
@@ -661,632 +661,652 @@
  ret
  334:	8082                	ret
 
-0000000000000336 <putc>:
+0000000000000336 <trace>:
+.global trace
+trace:
+ li a7, SYS_trace
+ 336:	48d9                	li	a7,22
+ ecall
+ 338:	00000073          	ecall
+ ret
+ 33c:	8082                	ret
+
+000000000000033e <sysinfo>:
+.global sysinfo
+sysinfo:
+ li a7, SYS_sysinfo
+ 33e:	48dd                	li	a7,23
+ ecall
+ 340:	00000073          	ecall
+ ret
+ 344:	8082                	ret
+
+0000000000000346 <putc>:
 
 static char digits[] = "0123456789ABCDEF";
 
 static void
 putc(int fd, char c)
 {
- 336:	1101                	addi	sp,sp,-32
- 338:	ec06                	sd	ra,24(sp)
- 33a:	e822                	sd	s0,16(sp)
- 33c:	1000                	addi	s0,sp,32
- 33e:	feb407a3          	sb	a1,-17(s0)
+ 346:	1101                	addi	sp,sp,-32
+ 348:	ec06                	sd	ra,24(sp)
+ 34a:	e822                	sd	s0,16(sp)
+ 34c:	1000                	addi	s0,sp,32
+ 34e:	feb407a3          	sb	a1,-17(s0)
   write(fd, &c, 1);
- 342:	4605                	li	a2,1
- 344:	fef40593          	addi	a1,s0,-17
- 348:	00000097          	auipc	ra,0x0
- 34c:	f6e080e7          	jalr	-146(ra) # 2b6 <write>
+ 352:	4605                	li	a2,1
+ 354:	fef40593          	addi	a1,s0,-17
+ 358:	00000097          	auipc	ra,0x0
+ 35c:	f5e080e7          	jalr	-162(ra) # 2b6 <write>
 }
- 350:	60e2                	ld	ra,24(sp)
- 352:	6442                	ld	s0,16(sp)
- 354:	6105                	addi	sp,sp,32
- 356:	8082                	ret
+ 360:	60e2                	ld	ra,24(sp)
+ 362:	6442                	ld	s0,16(sp)
+ 364:	6105                	addi	sp,sp,32
+ 366:	8082                	ret
 
-0000000000000358 <printint>:
+0000000000000368 <printint>:
 
 static void
 printint(int fd, int xx, int base, int sgn)
 {
- 358:	7139                	addi	sp,sp,-64
- 35a:	fc06                	sd	ra,56(sp)
- 35c:	f822                	sd	s0,48(sp)
- 35e:	f426                	sd	s1,40(sp)
- 360:	f04a                	sd	s2,32(sp)
- 362:	ec4e                	sd	s3,24(sp)
- 364:	0080                	addi	s0,sp,64
- 366:	84aa                	mv	s1,a0
+ 368:	7139                	addi	sp,sp,-64
+ 36a:	fc06                	sd	ra,56(sp)
+ 36c:	f822                	sd	s0,48(sp)
+ 36e:	f426                	sd	s1,40(sp)
+ 370:	f04a                	sd	s2,32(sp)
+ 372:	ec4e                	sd	s3,24(sp)
+ 374:	0080                	addi	s0,sp,64
+ 376:	84aa                	mv	s1,a0
   char buf[16];
   int i, neg;
   uint x;
 
   neg = 0;
   if(sgn && xx < 0){
- 368:	c299                	beqz	a3,36e <printint+0x16>
- 36a:	0805c963          	bltz	a1,3fc <printint+0xa4>
+ 378:	c299                	beqz	a3,37e <printint+0x16>
+ 37a:	0805c963          	bltz	a1,40c <printint+0xa4>
     neg = 1;
     x = -xx;
   } else {
     x = xx;
- 36e:	2581                	sext.w	a1,a1
+ 37e:	2581                	sext.w	a1,a1
   neg = 0;
- 370:	4881                	li	a7,0
- 372:	fc040693          	addi	a3,s0,-64
+ 380:	4881                	li	a7,0
+ 382:	fc040693          	addi	a3,s0,-64
   }
 
   i = 0;
- 376:	4701                	li	a4,0
+ 386:	4701                	li	a4,0
   do{
     buf[i++] = digits[x % base];
- 378:	2601                	sext.w	a2,a2
- 37a:	00000517          	auipc	a0,0x0
- 37e:	49650513          	addi	a0,a0,1174 # 810 <digits>
- 382:	883a                	mv	a6,a4
- 384:	2705                	addiw	a4,a4,1
- 386:	02c5f7bb          	remuw	a5,a1,a2
- 38a:	1782                	slli	a5,a5,0x20
- 38c:	9381                	srli	a5,a5,0x20
- 38e:	97aa                	add	a5,a5,a0
- 390:	0007c783          	lbu	a5,0(a5)
- 394:	00f68023          	sb	a5,0(a3)
+ 388:	2601                	sext.w	a2,a2
+ 38a:	00000517          	auipc	a0,0x0
+ 38e:	49650513          	addi	a0,a0,1174 # 820 <digits>
+ 392:	883a                	mv	a6,a4
+ 394:	2705                	addiw	a4,a4,1
+ 396:	02c5f7bb          	remuw	a5,a1,a2
+ 39a:	1782                	slli	a5,a5,0x20
+ 39c:	9381                	srli	a5,a5,0x20
+ 39e:	97aa                	add	a5,a5,a0
+ 3a0:	0007c783          	lbu	a5,0(a5)
+ 3a4:	00f68023          	sb	a5,0(a3)
   }while((x /= base) != 0);
- 398:	0005879b          	sext.w	a5,a1
- 39c:	02c5d5bb          	divuw	a1,a1,a2
- 3a0:	0685                	addi	a3,a3,1
- 3a2:	fec7f0e3          	bgeu	a5,a2,382 <printint+0x2a>
+ 3a8:	0005879b          	sext.w	a5,a1
+ 3ac:	02c5d5bb          	divuw	a1,a1,a2
+ 3b0:	0685                	addi	a3,a3,1
+ 3b2:	fec7f0e3          	bgeu	a5,a2,392 <printint+0x2a>
   if(neg)
- 3a6:	00088c63          	beqz	a7,3be <printint+0x66>
+ 3b6:	00088c63          	beqz	a7,3ce <printint+0x66>
     buf[i++] = '-';
- 3aa:	fd070793          	addi	a5,a4,-48
- 3ae:	00878733          	add	a4,a5,s0
- 3b2:	02d00793          	li	a5,45
- 3b6:	fef70823          	sb	a5,-16(a4)
- 3ba:	0028071b          	addiw	a4,a6,2
+ 3ba:	fd070793          	addi	a5,a4,-48
+ 3be:	00878733          	add	a4,a5,s0
+ 3c2:	02d00793          	li	a5,45
+ 3c6:	fef70823          	sb	a5,-16(a4)
+ 3ca:	0028071b          	addiw	a4,a6,2
 
   while(--i >= 0)
- 3be:	02e05863          	blez	a4,3ee <printint+0x96>
- 3c2:	fc040793          	addi	a5,s0,-64
- 3c6:	00e78933          	add	s2,a5,a4
- 3ca:	fff78993          	addi	s3,a5,-1
- 3ce:	99ba                	add	s3,s3,a4
- 3d0:	377d                	addiw	a4,a4,-1
- 3d2:	1702                	slli	a4,a4,0x20
- 3d4:	9301                	srli	a4,a4,0x20
- 3d6:	40e989b3          	sub	s3,s3,a4
+ 3ce:	02e05863          	blez	a4,3fe <printint+0x96>
+ 3d2:	fc040793          	addi	a5,s0,-64
+ 3d6:	00e78933          	add	s2,a5,a4
+ 3da:	fff78993          	addi	s3,a5,-1
+ 3de:	99ba                	add	s3,s3,a4
+ 3e0:	377d                	addiw	a4,a4,-1
+ 3e2:	1702                	slli	a4,a4,0x20
+ 3e4:	9301                	srli	a4,a4,0x20
+ 3e6:	40e989b3          	sub	s3,s3,a4
     putc(fd, buf[i]);
- 3da:	fff94583          	lbu	a1,-1(s2)
- 3de:	8526                	mv	a0,s1
- 3e0:	00000097          	auipc	ra,0x0
- 3e4:	f56080e7          	jalr	-170(ra) # 336 <putc>
+ 3ea:	fff94583          	lbu	a1,-1(s2)
+ 3ee:	8526                	mv	a0,s1
+ 3f0:	00000097          	auipc	ra,0x0
+ 3f4:	f56080e7          	jalr	-170(ra) # 346 <putc>
   while(--i >= 0)
- 3e8:	197d                	addi	s2,s2,-1
- 3ea:	ff3918e3          	bne	s2,s3,3da <printint+0x82>
+ 3f8:	197d                	addi	s2,s2,-1
+ 3fa:	ff3918e3          	bne	s2,s3,3ea <printint+0x82>
 }
- 3ee:	70e2                	ld	ra,56(sp)
- 3f0:	7442                	ld	s0,48(sp)
- 3f2:	74a2                	ld	s1,40(sp)
- 3f4:	7902                	ld	s2,32(sp)
- 3f6:	69e2                	ld	s3,24(sp)
- 3f8:	6121                	addi	sp,sp,64
- 3fa:	8082                	ret
+ 3fe:	70e2                	ld	ra,56(sp)
+ 400:	7442                	ld	s0,48(sp)
+ 402:	74a2                	ld	s1,40(sp)
+ 404:	7902                	ld	s2,32(sp)
+ 406:	69e2                	ld	s3,24(sp)
+ 408:	6121                	addi	sp,sp,64
+ 40a:	8082                	ret
     x = -xx;
- 3fc:	40b005bb          	negw	a1,a1
+ 40c:	40b005bb          	negw	a1,a1
     neg = 1;
- 400:	4885                	li	a7,1
+ 410:	4885                	li	a7,1
     x = -xx;
- 402:	bf85                	j	372 <printint+0x1a>
+ 412:	bf85                	j	382 <printint+0x1a>
 
-0000000000000404 <vprintf>:
+0000000000000414 <vprintf>:
 }
 
 // Print to the given fd. Only understands %d, %x, %p, %s.
 void
 vprintf(int fd, const char *fmt, va_list ap)
 {
- 404:	7119                	addi	sp,sp,-128
- 406:	fc86                	sd	ra,120(sp)
- 408:	f8a2                	sd	s0,112(sp)
- 40a:	f4a6                	sd	s1,104(sp)
- 40c:	f0ca                	sd	s2,96(sp)
- 40e:	ecce                	sd	s3,88(sp)
- 410:	e8d2                	sd	s4,80(sp)
- 412:	e4d6                	sd	s5,72(sp)
- 414:	e0da                	sd	s6,64(sp)
- 416:	fc5e                	sd	s7,56(sp)
- 418:	f862                	sd	s8,48(sp)
- 41a:	f466                	sd	s9,40(sp)
- 41c:	f06a                	sd	s10,32(sp)
- 41e:	ec6e                	sd	s11,24(sp)
- 420:	0100                	addi	s0,sp,128
+ 414:	7119                	addi	sp,sp,-128
+ 416:	fc86                	sd	ra,120(sp)
+ 418:	f8a2                	sd	s0,112(sp)
+ 41a:	f4a6                	sd	s1,104(sp)
+ 41c:	f0ca                	sd	s2,96(sp)
+ 41e:	ecce                	sd	s3,88(sp)
+ 420:	e8d2                	sd	s4,80(sp)
+ 422:	e4d6                	sd	s5,72(sp)
+ 424:	e0da                	sd	s6,64(sp)
+ 426:	fc5e                	sd	s7,56(sp)
+ 428:	f862                	sd	s8,48(sp)
+ 42a:	f466                	sd	s9,40(sp)
+ 42c:	f06a                	sd	s10,32(sp)
+ 42e:	ec6e                	sd	s11,24(sp)
+ 430:	0100                	addi	s0,sp,128
   char *s;
   int c, i, state;
 
   state = 0;
   for(i = 0; fmt[i]; i++){
- 422:	0005c903          	lbu	s2,0(a1)
- 426:	18090f63          	beqz	s2,5c4 <vprintf+0x1c0>
- 42a:	8aaa                	mv	s5,a0
- 42c:	8b32                	mv	s6,a2
- 42e:	00158493          	addi	s1,a1,1
+ 432:	0005c903          	lbu	s2,0(a1)
+ 436:	18090f63          	beqz	s2,5d4 <vprintf+0x1c0>
+ 43a:	8aaa                	mv	s5,a0
+ 43c:	8b32                	mv	s6,a2
+ 43e:	00158493          	addi	s1,a1,1
   state = 0;
- 432:	4981                	li	s3,0
+ 442:	4981                	li	s3,0
       if(c == '%'){
         state = '%';
       } else {
         putc(fd, c);
       }
     } else if(state == '%'){
- 434:	02500a13          	li	s4,37
- 438:	4c55                	li	s8,21
- 43a:	00000c97          	auipc	s9,0x0
- 43e:	37ec8c93          	addi	s9,s9,894 # 7b8 <malloc+0xf0>
+ 444:	02500a13          	li	s4,37
+ 448:	4c55                	li	s8,21
+ 44a:	00000c97          	auipc	s9,0x0
+ 44e:	37ec8c93          	addi	s9,s9,894 # 7c8 <malloc+0xf0>
         printptr(fd, va_arg(ap, uint64));
       } else if(c == 's'){
         s = va_arg(ap, char*);
         if(s == 0)
           s = "(null)";
         while(*s != 0){
- 442:	02800d93          	li	s11,40
+ 452:	02800d93          	li	s11,40
   putc(fd, 'x');
- 446:	4d41                	li	s10,16
+ 456:	4d41                	li	s10,16
     putc(fd, digits[x >> (sizeof(uint64) * 8 - 4)]);
- 448:	00000b97          	auipc	s7,0x0
- 44c:	3c8b8b93          	addi	s7,s7,968 # 810 <digits>
- 450:	a839                	j	46e <vprintf+0x6a>
+ 458:	00000b97          	auipc	s7,0x0
+ 45c:	3c8b8b93          	addi	s7,s7,968 # 820 <digits>
+ 460:	a839                	j	47e <vprintf+0x6a>
         putc(fd, c);
- 452:	85ca                	mv	a1,s2
- 454:	8556                	mv	a0,s5
- 456:	00000097          	auipc	ra,0x0
- 45a:	ee0080e7          	jalr	-288(ra) # 336 <putc>
- 45e:	a019                	j	464 <vprintf+0x60>
+ 462:	85ca                	mv	a1,s2
+ 464:	8556                	mv	a0,s5
+ 466:	00000097          	auipc	ra,0x0
+ 46a:	ee0080e7          	jalr	-288(ra) # 346 <putc>
+ 46e:	a019                	j	474 <vprintf+0x60>
     } else if(state == '%'){
- 460:	01498d63          	beq	s3,s4,47a <vprintf+0x76>
+ 470:	01498d63          	beq	s3,s4,48a <vprintf+0x76>
   for(i = 0; fmt[i]; i++){
- 464:	0485                	addi	s1,s1,1
- 466:	fff4c903          	lbu	s2,-1(s1)
- 46a:	14090d63          	beqz	s2,5c4 <vprintf+0x1c0>
+ 474:	0485                	addi	s1,s1,1
+ 476:	fff4c903          	lbu	s2,-1(s1)
+ 47a:	14090d63          	beqz	s2,5d4 <vprintf+0x1c0>
     if(state == 0){
- 46e:	fe0999e3          	bnez	s3,460 <vprintf+0x5c>
+ 47e:	fe0999e3          	bnez	s3,470 <vprintf+0x5c>
       if(c == '%'){
- 472:	ff4910e3          	bne	s2,s4,452 <vprintf+0x4e>
+ 482:	ff4910e3          	bne	s2,s4,462 <vprintf+0x4e>
         state = '%';
- 476:	89d2                	mv	s3,s4
- 478:	b7f5                	j	464 <vprintf+0x60>
+ 486:	89d2                	mv	s3,s4
+ 488:	b7f5                	j	474 <vprintf+0x60>
       if(c == 'd'){
- 47a:	11490c63          	beq	s2,s4,592 <vprintf+0x18e>
- 47e:	f9d9079b          	addiw	a5,s2,-99
- 482:	0ff7f793          	zext.b	a5,a5
- 486:	10fc6e63          	bltu	s8,a5,5a2 <vprintf+0x19e>
- 48a:	f9d9079b          	addiw	a5,s2,-99
- 48e:	0ff7f713          	zext.b	a4,a5
- 492:	10ec6863          	bltu	s8,a4,5a2 <vprintf+0x19e>
- 496:	00271793          	slli	a5,a4,0x2
- 49a:	97e6                	add	a5,a5,s9
- 49c:	439c                	lw	a5,0(a5)
- 49e:	97e6                	add	a5,a5,s9
- 4a0:	8782                	jr	a5
+ 48a:	11490c63          	beq	s2,s4,5a2 <vprintf+0x18e>
+ 48e:	f9d9079b          	addiw	a5,s2,-99
+ 492:	0ff7f793          	zext.b	a5,a5
+ 496:	10fc6e63          	bltu	s8,a5,5b2 <vprintf+0x19e>
+ 49a:	f9d9079b          	addiw	a5,s2,-99
+ 49e:	0ff7f713          	zext.b	a4,a5
+ 4a2:	10ec6863          	bltu	s8,a4,5b2 <vprintf+0x19e>
+ 4a6:	00271793          	slli	a5,a4,0x2
+ 4aa:	97e6                	add	a5,a5,s9
+ 4ac:	439c                	lw	a5,0(a5)
+ 4ae:	97e6                	add	a5,a5,s9
+ 4b0:	8782                	jr	a5
         printint(fd, va_arg(ap, int), 10, 1);
- 4a2:	008b0913          	addi	s2,s6,8
- 4a6:	4685                	li	a3,1
- 4a8:	4629                	li	a2,10
- 4aa:	000b2583          	lw	a1,0(s6)
- 4ae:	8556                	mv	a0,s5
- 4b0:	00000097          	auipc	ra,0x0
- 4b4:	ea8080e7          	jalr	-344(ra) # 358 <printint>
- 4b8:	8b4a                	mv	s6,s2
+ 4b2:	008b0913          	addi	s2,s6,8
+ 4b6:	4685                	li	a3,1
+ 4b8:	4629                	li	a2,10
+ 4ba:	000b2583          	lw	a1,0(s6)
+ 4be:	8556                	mv	a0,s5
+ 4c0:	00000097          	auipc	ra,0x0
+ 4c4:	ea8080e7          	jalr	-344(ra) # 368 <printint>
+ 4c8:	8b4a                	mv	s6,s2
       } else {
         // Unknown % sequence.  Print it to draw attention.
         putc(fd, '%');
         putc(fd, c);
       }
       state = 0;
- 4ba:	4981                	li	s3,0
- 4bc:	b765                	j	464 <vprintf+0x60>
+ 4ca:	4981                	li	s3,0
+ 4cc:	b765                	j	474 <vprintf+0x60>
         printint(fd, va_arg(ap, uint64), 10, 0);
- 4be:	008b0913          	addi	s2,s6,8
- 4c2:	4681                	li	a3,0
- 4c4:	4629                	li	a2,10
- 4c6:	000b2583          	lw	a1,0(s6)
- 4ca:	8556                	mv	a0,s5
- 4cc:	00000097          	auipc	ra,0x0
- 4d0:	e8c080e7          	jalr	-372(ra) # 358 <printint>
- 4d4:	8b4a                	mv	s6,s2
+ 4ce:	008b0913          	addi	s2,s6,8
+ 4d2:	4681                	li	a3,0
+ 4d4:	4629                	li	a2,10
+ 4d6:	000b2583          	lw	a1,0(s6)
+ 4da:	8556                	mv	a0,s5
+ 4dc:	00000097          	auipc	ra,0x0
+ 4e0:	e8c080e7          	jalr	-372(ra) # 368 <printint>
+ 4e4:	8b4a                	mv	s6,s2
       state = 0;
- 4d6:	4981                	li	s3,0
- 4d8:	b771                	j	464 <vprintf+0x60>
+ 4e6:	4981                	li	s3,0
+ 4e8:	b771                	j	474 <vprintf+0x60>
         printint(fd, va_arg(ap, int), 16, 0);
- 4da:	008b0913          	addi	s2,s6,8
- 4de:	4681                	li	a3,0
- 4e0:	866a                	mv	a2,s10
- 4e2:	000b2583          	lw	a1,0(s6)
- 4e6:	8556                	mv	a0,s5
- 4e8:	00000097          	auipc	ra,0x0
- 4ec:	e70080e7          	jalr	-400(ra) # 358 <printint>
- 4f0:	8b4a                	mv	s6,s2
+ 4ea:	008b0913          	addi	s2,s6,8
+ 4ee:	4681                	li	a3,0
+ 4f0:	866a                	mv	a2,s10
+ 4f2:	000b2583          	lw	a1,0(s6)
+ 4f6:	8556                	mv	a0,s5
+ 4f8:	00000097          	auipc	ra,0x0
+ 4fc:	e70080e7          	jalr	-400(ra) # 368 <printint>
+ 500:	8b4a                	mv	s6,s2
       state = 0;
- 4f2:	4981                	li	s3,0
- 4f4:	bf85                	j	464 <vprintf+0x60>
+ 502:	4981                	li	s3,0
+ 504:	bf85                	j	474 <vprintf+0x60>
         printptr(fd, va_arg(ap, uint64));
- 4f6:	008b0793          	addi	a5,s6,8
- 4fa:	f8f43423          	sd	a5,-120(s0)
- 4fe:	000b3983          	ld	s3,0(s6)
+ 506:	008b0793          	addi	a5,s6,8
+ 50a:	f8f43423          	sd	a5,-120(s0)
+ 50e:	000b3983          	ld	s3,0(s6)
   putc(fd, '0');
- 502:	03000593          	li	a1,48
- 506:	8556                	mv	a0,s5
- 508:	00000097          	auipc	ra,0x0
- 50c:	e2e080e7          	jalr	-466(ra) # 336 <putc>
+ 512:	03000593          	li	a1,48
+ 516:	8556                	mv	a0,s5
+ 518:	00000097          	auipc	ra,0x0
+ 51c:	e2e080e7          	jalr	-466(ra) # 346 <putc>
   putc(fd, 'x');
- 510:	07800593          	li	a1,120
- 514:	8556                	mv	a0,s5
- 516:	00000097          	auipc	ra,0x0
- 51a:	e20080e7          	jalr	-480(ra) # 336 <putc>
- 51e:	896a                	mv	s2,s10
+ 520:	07800593          	li	a1,120
+ 524:	8556                	mv	a0,s5
+ 526:	00000097          	auipc	ra,0x0
+ 52a:	e20080e7          	jalr	-480(ra) # 346 <putc>
+ 52e:	896a                	mv	s2,s10
     putc(fd, digits[x >> (sizeof(uint64) * 8 - 4)]);
- 520:	03c9d793          	srli	a5,s3,0x3c
- 524:	97de                	add	a5,a5,s7
- 526:	0007c583          	lbu	a1,0(a5)
- 52a:	8556                	mv	a0,s5
- 52c:	00000097          	auipc	ra,0x0
- 530:	e0a080e7          	jalr	-502(ra) # 336 <putc>
+ 530:	03c9d793          	srli	a5,s3,0x3c
+ 534:	97de                	add	a5,a5,s7
+ 536:	0007c583          	lbu	a1,0(a5)
+ 53a:	8556                	mv	a0,s5
+ 53c:	00000097          	auipc	ra,0x0
+ 540:	e0a080e7          	jalr	-502(ra) # 346 <putc>
   for (i = 0; i < (sizeof(uint64) * 2); i++, x <<= 4)
- 534:	0992                	slli	s3,s3,0x4
- 536:	397d                	addiw	s2,s2,-1
- 538:	fe0914e3          	bnez	s2,520 <vprintf+0x11c>
+ 544:	0992                	slli	s3,s3,0x4
+ 546:	397d                	addiw	s2,s2,-1
+ 548:	fe0914e3          	bnez	s2,530 <vprintf+0x11c>
         printptr(fd, va_arg(ap, uint64));
- 53c:	f8843b03          	ld	s6,-120(s0)
+ 54c:	f8843b03          	ld	s6,-120(s0)
       state = 0;
- 540:	4981                	li	s3,0
- 542:	b70d                	j	464 <vprintf+0x60>
+ 550:	4981                	li	s3,0
+ 552:	b70d                	j	474 <vprintf+0x60>
         s = va_arg(ap, char*);
- 544:	008b0913          	addi	s2,s6,8
- 548:	000b3983          	ld	s3,0(s6)
+ 554:	008b0913          	addi	s2,s6,8
+ 558:	000b3983          	ld	s3,0(s6)
         if(s == 0)
- 54c:	02098163          	beqz	s3,56e <vprintf+0x16a>
+ 55c:	02098163          	beqz	s3,57e <vprintf+0x16a>
         while(*s != 0){
- 550:	0009c583          	lbu	a1,0(s3)
- 554:	c5ad                	beqz	a1,5be <vprintf+0x1ba>
+ 560:	0009c583          	lbu	a1,0(s3)
+ 564:	c5ad                	beqz	a1,5ce <vprintf+0x1ba>
           putc(fd, *s);
- 556:	8556                	mv	a0,s5
- 558:	00000097          	auipc	ra,0x0
- 55c:	dde080e7          	jalr	-546(ra) # 336 <putc>
+ 566:	8556                	mv	a0,s5
+ 568:	00000097          	auipc	ra,0x0
+ 56c:	dde080e7          	jalr	-546(ra) # 346 <putc>
           s++;
- 560:	0985                	addi	s3,s3,1
+ 570:	0985                	addi	s3,s3,1
         while(*s != 0){
- 562:	0009c583          	lbu	a1,0(s3)
- 566:	f9e5                	bnez	a1,556 <vprintf+0x152>
+ 572:	0009c583          	lbu	a1,0(s3)
+ 576:	f9e5                	bnez	a1,566 <vprintf+0x152>
         s = va_arg(ap, char*);
- 568:	8b4a                	mv	s6,s2
+ 578:	8b4a                	mv	s6,s2
       state = 0;
- 56a:	4981                	li	s3,0
- 56c:	bde5                	j	464 <vprintf+0x60>
+ 57a:	4981                	li	s3,0
+ 57c:	bde5                	j	474 <vprintf+0x60>
           s = "(null)";
- 56e:	00000997          	auipc	s3,0x0
- 572:	24298993          	addi	s3,s3,578 # 7b0 <malloc+0xe8>
+ 57e:	00000997          	auipc	s3,0x0
+ 582:	24298993          	addi	s3,s3,578 # 7c0 <malloc+0xe8>
         while(*s != 0){
- 576:	85ee                	mv	a1,s11
- 578:	bff9                	j	556 <vprintf+0x152>
+ 586:	85ee                	mv	a1,s11
+ 588:	bff9                	j	566 <vprintf+0x152>
         putc(fd, va_arg(ap, uint));
- 57a:	008b0913          	addi	s2,s6,8
- 57e:	000b4583          	lbu	a1,0(s6)
- 582:	8556                	mv	a0,s5
- 584:	00000097          	auipc	ra,0x0
- 588:	db2080e7          	jalr	-590(ra) # 336 <putc>
- 58c:	8b4a                	mv	s6,s2
-      state = 0;
- 58e:	4981                	li	s3,0
- 590:	bdd1                	j	464 <vprintf+0x60>
-        putc(fd, c);
- 592:	85d2                	mv	a1,s4
- 594:	8556                	mv	a0,s5
- 596:	00000097          	auipc	ra,0x0
- 59a:	da0080e7          	jalr	-608(ra) # 336 <putc>
+ 58a:	008b0913          	addi	s2,s6,8
+ 58e:	000b4583          	lbu	a1,0(s6)
+ 592:	8556                	mv	a0,s5
+ 594:	00000097          	auipc	ra,0x0
+ 598:	db2080e7          	jalr	-590(ra) # 346 <putc>
+ 59c:	8b4a                	mv	s6,s2
       state = 0;
  59e:	4981                	li	s3,0
- 5a0:	b5d1                	j	464 <vprintf+0x60>
-        putc(fd, '%');
+ 5a0:	bdd1                	j	474 <vprintf+0x60>
+        putc(fd, c);
  5a2:	85d2                	mv	a1,s4
  5a4:	8556                	mv	a0,s5
  5a6:	00000097          	auipc	ra,0x0
- 5aa:	d90080e7          	jalr	-624(ra) # 336 <putc>
+ 5aa:	da0080e7          	jalr	-608(ra) # 346 <putc>
+      state = 0;
+ 5ae:	4981                	li	s3,0
+ 5b0:	b5d1                	j	474 <vprintf+0x60>
+        putc(fd, '%');
+ 5b2:	85d2                	mv	a1,s4
+ 5b4:	8556                	mv	a0,s5
+ 5b6:	00000097          	auipc	ra,0x0
+ 5ba:	d90080e7          	jalr	-624(ra) # 346 <putc>
         putc(fd, c);
- 5ae:	85ca                	mv	a1,s2
- 5b0:	8556                	mv	a0,s5
- 5b2:	00000097          	auipc	ra,0x0
- 5b6:	d84080e7          	jalr	-636(ra) # 336 <putc>
+ 5be:	85ca                	mv	a1,s2
+ 5c0:	8556                	mv	a0,s5
+ 5c2:	00000097          	auipc	ra,0x0
+ 5c6:	d84080e7          	jalr	-636(ra) # 346 <putc>
       state = 0;
- 5ba:	4981                	li	s3,0
- 5bc:	b565                	j	464 <vprintf+0x60>
+ 5ca:	4981                	li	s3,0
+ 5cc:	b565                	j	474 <vprintf+0x60>
         s = va_arg(ap, char*);
- 5be:	8b4a                	mv	s6,s2
+ 5ce:	8b4a                	mv	s6,s2
       state = 0;
- 5c0:	4981                	li	s3,0
- 5c2:	b54d                	j	464 <vprintf+0x60>
+ 5d0:	4981                	li	s3,0
+ 5d2:	b54d                	j	474 <vprintf+0x60>
     }
   }
 }
- 5c4:	70e6                	ld	ra,120(sp)
- 5c6:	7446                	ld	s0,112(sp)
- 5c8:	74a6                	ld	s1,104(sp)
- 5ca:	7906                	ld	s2,96(sp)
- 5cc:	69e6                	ld	s3,88(sp)
- 5ce:	6a46                	ld	s4,80(sp)
- 5d0:	6aa6                	ld	s5,72(sp)
- 5d2:	6b06                	ld	s6,64(sp)
- 5d4:	7be2                	ld	s7,56(sp)
- 5d6:	7c42                	ld	s8,48(sp)
- 5d8:	7ca2                	ld	s9,40(sp)
- 5da:	7d02                	ld	s10,32(sp)
- 5dc:	6de2                	ld	s11,24(sp)
- 5de:	6109                	addi	sp,sp,128
- 5e0:	8082                	ret
+ 5d4:	70e6                	ld	ra,120(sp)
+ 5d6:	7446                	ld	s0,112(sp)
+ 5d8:	74a6                	ld	s1,104(sp)
+ 5da:	7906                	ld	s2,96(sp)
+ 5dc:	69e6                	ld	s3,88(sp)
+ 5de:	6a46                	ld	s4,80(sp)
+ 5e0:	6aa6                	ld	s5,72(sp)
+ 5e2:	6b06                	ld	s6,64(sp)
+ 5e4:	7be2                	ld	s7,56(sp)
+ 5e6:	7c42                	ld	s8,48(sp)
+ 5e8:	7ca2                	ld	s9,40(sp)
+ 5ea:	7d02                	ld	s10,32(sp)
+ 5ec:	6de2                	ld	s11,24(sp)
+ 5ee:	6109                	addi	sp,sp,128
+ 5f0:	8082                	ret
 
-00000000000005e2 <fprintf>:
+00000000000005f2 <fprintf>:
 
 void
 fprintf(int fd, const char *fmt, ...)
 {
- 5e2:	715d                	addi	sp,sp,-80
- 5e4:	ec06                	sd	ra,24(sp)
- 5e6:	e822                	sd	s0,16(sp)
- 5e8:	1000                	addi	s0,sp,32
- 5ea:	e010                	sd	a2,0(s0)
- 5ec:	e414                	sd	a3,8(s0)
- 5ee:	e818                	sd	a4,16(s0)
- 5f0:	ec1c                	sd	a5,24(s0)
- 5f2:	03043023          	sd	a6,32(s0)
- 5f6:	03143423          	sd	a7,40(s0)
+ 5f2:	715d                	addi	sp,sp,-80
+ 5f4:	ec06                	sd	ra,24(sp)
+ 5f6:	e822                	sd	s0,16(sp)
+ 5f8:	1000                	addi	s0,sp,32
+ 5fa:	e010                	sd	a2,0(s0)
+ 5fc:	e414                	sd	a3,8(s0)
+ 5fe:	e818                	sd	a4,16(s0)
+ 600:	ec1c                	sd	a5,24(s0)
+ 602:	03043023          	sd	a6,32(s0)
+ 606:	03143423          	sd	a7,40(s0)
   va_list ap;
 
   va_start(ap, fmt);
- 5fa:	fe843423          	sd	s0,-24(s0)
+ 60a:	fe843423          	sd	s0,-24(s0)
   vprintf(fd, fmt, ap);
- 5fe:	8622                	mv	a2,s0
- 600:	00000097          	auipc	ra,0x0
- 604:	e04080e7          	jalr	-508(ra) # 404 <vprintf>
+ 60e:	8622                	mv	a2,s0
+ 610:	00000097          	auipc	ra,0x0
+ 614:	e04080e7          	jalr	-508(ra) # 414 <vprintf>
 }
- 608:	60e2                	ld	ra,24(sp)
- 60a:	6442                	ld	s0,16(sp)
- 60c:	6161                	addi	sp,sp,80
- 60e:	8082                	ret
+ 618:	60e2                	ld	ra,24(sp)
+ 61a:	6442                	ld	s0,16(sp)
+ 61c:	6161                	addi	sp,sp,80
+ 61e:	8082                	ret
 
-0000000000000610 <printf>:
+0000000000000620 <printf>:
 
 void
 printf(const char *fmt, ...)
 {
- 610:	711d                	addi	sp,sp,-96
- 612:	ec06                	sd	ra,24(sp)
- 614:	e822                	sd	s0,16(sp)
- 616:	1000                	addi	s0,sp,32
- 618:	e40c                	sd	a1,8(s0)
- 61a:	e810                	sd	a2,16(s0)
- 61c:	ec14                	sd	a3,24(s0)
- 61e:	f018                	sd	a4,32(s0)
- 620:	f41c                	sd	a5,40(s0)
- 622:	03043823          	sd	a6,48(s0)
- 626:	03143c23          	sd	a7,56(s0)
+ 620:	711d                	addi	sp,sp,-96
+ 622:	ec06                	sd	ra,24(sp)
+ 624:	e822                	sd	s0,16(sp)
+ 626:	1000                	addi	s0,sp,32
+ 628:	e40c                	sd	a1,8(s0)
+ 62a:	e810                	sd	a2,16(s0)
+ 62c:	ec14                	sd	a3,24(s0)
+ 62e:	f018                	sd	a4,32(s0)
+ 630:	f41c                	sd	a5,40(s0)
+ 632:	03043823          	sd	a6,48(s0)
+ 636:	03143c23          	sd	a7,56(s0)
   va_list ap;
 
   va_start(ap, fmt);
- 62a:	00840613          	addi	a2,s0,8
- 62e:	fec43423          	sd	a2,-24(s0)
+ 63a:	00840613          	addi	a2,s0,8
+ 63e:	fec43423          	sd	a2,-24(s0)
   vprintf(1, fmt, ap);
- 632:	85aa                	mv	a1,a0
- 634:	4505                	li	a0,1
- 636:	00000097          	auipc	ra,0x0
- 63a:	dce080e7          	jalr	-562(ra) # 404 <vprintf>
+ 642:	85aa                	mv	a1,a0
+ 644:	4505                	li	a0,1
+ 646:	00000097          	auipc	ra,0x0
+ 64a:	dce080e7          	jalr	-562(ra) # 414 <vprintf>
 }
- 63e:	60e2                	ld	ra,24(sp)
- 640:	6442                	ld	s0,16(sp)
- 642:	6125                	addi	sp,sp,96
- 644:	8082                	ret
+ 64e:	60e2                	ld	ra,24(sp)
+ 650:	6442                	ld	s0,16(sp)
+ 652:	6125                	addi	sp,sp,96
+ 654:	8082                	ret
 
-0000000000000646 <free>:
+0000000000000656 <free>:
 static Header base;
 static Header *freep;
 
 void
 free(void *ap)
 {
- 646:	1141                	addi	sp,sp,-16
- 648:	e422                	sd	s0,8(sp)
- 64a:	0800                	addi	s0,sp,16
+ 656:	1141                	addi	sp,sp,-16
+ 658:	e422                	sd	s0,8(sp)
+ 65a:	0800                	addi	s0,sp,16
   Header *bp, *p;
 
   bp = (Header*)ap - 1;
- 64c:	ff050693          	addi	a3,a0,-16
+ 65c:	ff050693          	addi	a3,a0,-16
   for(p = freep; !(bp > p && bp < p->s.ptr); p = p->s.ptr)
- 650:	00000797          	auipc	a5,0x0
- 654:	1d87b783          	ld	a5,472(a5) # 828 <freep>
- 658:	a02d                	j	682 <free+0x3c>
+ 660:	00000797          	auipc	a5,0x0
+ 664:	1d87b783          	ld	a5,472(a5) # 838 <freep>
+ 668:	a02d                	j	692 <free+0x3c>
     if(p >= p->s.ptr && (bp > p || bp < p->s.ptr))
       break;
   if(bp + bp->s.size == p->s.ptr){
     bp->s.size += p->s.ptr->s.size;
- 65a:	4618                	lw	a4,8(a2)
- 65c:	9f2d                	addw	a4,a4,a1
- 65e:	fee52c23          	sw	a4,-8(a0)
+ 66a:	4618                	lw	a4,8(a2)
+ 66c:	9f2d                	addw	a4,a4,a1
+ 66e:	fee52c23          	sw	a4,-8(a0)
     bp->s.ptr = p->s.ptr->s.ptr;
- 662:	6398                	ld	a4,0(a5)
- 664:	6310                	ld	a2,0(a4)
- 666:	a83d                	j	6a4 <free+0x5e>
+ 672:	6398                	ld	a4,0(a5)
+ 674:	6310                	ld	a2,0(a4)
+ 676:	a83d                	j	6b4 <free+0x5e>
   } else
     bp->s.ptr = p->s.ptr;
   if(p + p->s.size == bp){
     p->s.size += bp->s.size;
- 668:	ff852703          	lw	a4,-8(a0)
- 66c:	9f31                	addw	a4,a4,a2
- 66e:	c798                	sw	a4,8(a5)
+ 678:	ff852703          	lw	a4,-8(a0)
+ 67c:	9f31                	addw	a4,a4,a2
+ 67e:	c798                	sw	a4,8(a5)
     p->s.ptr = bp->s.ptr;
- 670:	ff053683          	ld	a3,-16(a0)
- 674:	a091                	j	6b8 <free+0x72>
+ 680:	ff053683          	ld	a3,-16(a0)
+ 684:	a091                	j	6c8 <free+0x72>
     if(p >= p->s.ptr && (bp > p || bp < p->s.ptr))
- 676:	6398                	ld	a4,0(a5)
- 678:	00e7e463          	bltu	a5,a4,680 <free+0x3a>
- 67c:	00e6ea63          	bltu	a3,a4,690 <free+0x4a>
+ 686:	6398                	ld	a4,0(a5)
+ 688:	00e7e463          	bltu	a5,a4,690 <free+0x3a>
+ 68c:	00e6ea63          	bltu	a3,a4,6a0 <free+0x4a>
 {
- 680:	87ba                	mv	a5,a4
+ 690:	87ba                	mv	a5,a4
   for(p = freep; !(bp > p && bp < p->s.ptr); p = p->s.ptr)
- 682:	fed7fae3          	bgeu	a5,a3,676 <free+0x30>
- 686:	6398                	ld	a4,0(a5)
- 688:	00e6e463          	bltu	a3,a4,690 <free+0x4a>
+ 692:	fed7fae3          	bgeu	a5,a3,686 <free+0x30>
+ 696:	6398                	ld	a4,0(a5)
+ 698:	00e6e463          	bltu	a3,a4,6a0 <free+0x4a>
     if(p >= p->s.ptr && (bp > p || bp < p->s.ptr))
- 68c:	fee7eae3          	bltu	a5,a4,680 <free+0x3a>
+ 69c:	fee7eae3          	bltu	a5,a4,690 <free+0x3a>
   if(bp + bp->s.size == p->s.ptr){
- 690:	ff852583          	lw	a1,-8(a0)
- 694:	6390                	ld	a2,0(a5)
- 696:	02059813          	slli	a6,a1,0x20
- 69a:	01c85713          	srli	a4,a6,0x1c
- 69e:	9736                	add	a4,a4,a3
- 6a0:	fae60de3          	beq	a2,a4,65a <free+0x14>
+ 6a0:	ff852583          	lw	a1,-8(a0)
+ 6a4:	6390                	ld	a2,0(a5)
+ 6a6:	02059813          	slli	a6,a1,0x20
+ 6aa:	01c85713          	srli	a4,a6,0x1c
+ 6ae:	9736                	add	a4,a4,a3
+ 6b0:	fae60de3          	beq	a2,a4,66a <free+0x14>
     bp->s.ptr = p->s.ptr->s.ptr;
- 6a4:	fec53823          	sd	a2,-16(a0)
+ 6b4:	fec53823          	sd	a2,-16(a0)
   if(p + p->s.size == bp){
- 6a8:	4790                	lw	a2,8(a5)
- 6aa:	02061593          	slli	a1,a2,0x20
- 6ae:	01c5d713          	srli	a4,a1,0x1c
- 6b2:	973e                	add	a4,a4,a5
- 6b4:	fae68ae3          	beq	a3,a4,668 <free+0x22>
+ 6b8:	4790                	lw	a2,8(a5)
+ 6ba:	02061593          	slli	a1,a2,0x20
+ 6be:	01c5d713          	srli	a4,a1,0x1c
+ 6c2:	973e                	add	a4,a4,a5
+ 6c4:	fae68ae3          	beq	a3,a4,678 <free+0x22>
     p->s.ptr = bp->s.ptr;
- 6b8:	e394                	sd	a3,0(a5)
+ 6c8:	e394                	sd	a3,0(a5)
   } else
     p->s.ptr = bp;
   freep = p;
- 6ba:	00000717          	auipc	a4,0x0
- 6be:	16f73723          	sd	a5,366(a4) # 828 <freep>
+ 6ca:	00000717          	auipc	a4,0x0
+ 6ce:	16f73723          	sd	a5,366(a4) # 838 <freep>
 }
- 6c2:	6422                	ld	s0,8(sp)
- 6c4:	0141                	addi	sp,sp,16
- 6c6:	8082                	ret
+ 6d2:	6422                	ld	s0,8(sp)
+ 6d4:	0141                	addi	sp,sp,16
+ 6d6:	8082                	ret
 
-00000000000006c8 <malloc>:
+00000000000006d8 <malloc>:
   return freep;
 }
 
 void*
 malloc(uint nbytes)
 {
- 6c8:	7139                	addi	sp,sp,-64
- 6ca:	fc06                	sd	ra,56(sp)
- 6cc:	f822                	sd	s0,48(sp)
- 6ce:	f426                	sd	s1,40(sp)
- 6d0:	f04a                	sd	s2,32(sp)
- 6d2:	ec4e                	sd	s3,24(sp)
- 6d4:	e852                	sd	s4,16(sp)
- 6d6:	e456                	sd	s5,8(sp)
- 6d8:	e05a                	sd	s6,0(sp)
- 6da:	0080                	addi	s0,sp,64
+ 6d8:	7139                	addi	sp,sp,-64
+ 6da:	fc06                	sd	ra,56(sp)
+ 6dc:	f822                	sd	s0,48(sp)
+ 6de:	f426                	sd	s1,40(sp)
+ 6e0:	f04a                	sd	s2,32(sp)
+ 6e2:	ec4e                	sd	s3,24(sp)
+ 6e4:	e852                	sd	s4,16(sp)
+ 6e6:	e456                	sd	s5,8(sp)
+ 6e8:	e05a                	sd	s6,0(sp)
+ 6ea:	0080                	addi	s0,sp,64
   Header *p, *prevp;
   uint nunits;
 
   nunits = (nbytes + sizeof(Header) - 1)/sizeof(Header) + 1;
- 6dc:	02051493          	slli	s1,a0,0x20
- 6e0:	9081                	srli	s1,s1,0x20
- 6e2:	04bd                	addi	s1,s1,15
- 6e4:	8091                	srli	s1,s1,0x4
- 6e6:	0014899b          	addiw	s3,s1,1
- 6ea:	0485                	addi	s1,s1,1
+ 6ec:	02051493          	slli	s1,a0,0x20
+ 6f0:	9081                	srli	s1,s1,0x20
+ 6f2:	04bd                	addi	s1,s1,15
+ 6f4:	8091                	srli	s1,s1,0x4
+ 6f6:	0014899b          	addiw	s3,s1,1
+ 6fa:	0485                	addi	s1,s1,1
   if((prevp = freep) == 0){
- 6ec:	00000517          	auipc	a0,0x0
- 6f0:	13c53503          	ld	a0,316(a0) # 828 <freep>
- 6f4:	c515                	beqz	a0,720 <malloc+0x58>
+ 6fc:	00000517          	auipc	a0,0x0
+ 700:	13c53503          	ld	a0,316(a0) # 838 <freep>
+ 704:	c515                	beqz	a0,730 <malloc+0x58>
     base.s.ptr = freep = prevp = &base;
     base.s.size = 0;
   }
   for(p = prevp->s.ptr; ; prevp = p, p = p->s.ptr){
- 6f6:	611c                	ld	a5,0(a0)
+ 706:	611c                	ld	a5,0(a0)
     if(p->s.size >= nunits){
- 6f8:	4798                	lw	a4,8(a5)
- 6fa:	02977f63          	bgeu	a4,s1,738 <malloc+0x70>
- 6fe:	8a4e                	mv	s4,s3
- 700:	0009871b          	sext.w	a4,s3
- 704:	6685                	lui	a3,0x1
- 706:	00d77363          	bgeu	a4,a3,70c <malloc+0x44>
- 70a:	6a05                	lui	s4,0x1
- 70c:	000a0b1b          	sext.w	s6,s4
+ 708:	4798                	lw	a4,8(a5)
+ 70a:	02977f63          	bgeu	a4,s1,748 <malloc+0x70>
+ 70e:	8a4e                	mv	s4,s3
+ 710:	0009871b          	sext.w	a4,s3
+ 714:	6685                	lui	a3,0x1
+ 716:	00d77363          	bgeu	a4,a3,71c <malloc+0x44>
+ 71a:	6a05                	lui	s4,0x1
+ 71c:	000a0b1b          	sext.w	s6,s4
   p = sbrk(nu * sizeof(Header));
- 710:	004a1a1b          	slliw	s4,s4,0x4
+ 720:	004a1a1b          	slliw	s4,s4,0x4
         p->s.size = nunits;
       }
       freep = prevp;
       return (void*)(p + 1);
     }
     if(p == freep)
- 714:	00000917          	auipc	s2,0x0
- 718:	11490913          	addi	s2,s2,276 # 828 <freep>
+ 724:	00000917          	auipc	s2,0x0
+ 728:	11490913          	addi	s2,s2,276 # 838 <freep>
   if(p == (char*)-1)
- 71c:	5afd                	li	s5,-1
- 71e:	a895                	j	792 <malloc+0xca>
+ 72c:	5afd                	li	s5,-1
+ 72e:	a895                	j	7a2 <malloc+0xca>
     base.s.ptr = freep = prevp = &base;
- 720:	00000797          	auipc	a5,0x0
- 724:	11078793          	addi	a5,a5,272 # 830 <base>
- 728:	00000717          	auipc	a4,0x0
- 72c:	10f73023          	sd	a5,256(a4) # 828 <freep>
- 730:	e39c                	sd	a5,0(a5)
+ 730:	00000797          	auipc	a5,0x0
+ 734:	11078793          	addi	a5,a5,272 # 840 <base>
+ 738:	00000717          	auipc	a4,0x0
+ 73c:	10f73023          	sd	a5,256(a4) # 838 <freep>
+ 740:	e39c                	sd	a5,0(a5)
     base.s.size = 0;
- 732:	0007a423          	sw	zero,8(a5)
+ 742:	0007a423          	sw	zero,8(a5)
     if(p->s.size >= nunits){
- 736:	b7e1                	j	6fe <malloc+0x36>
+ 746:	b7e1                	j	70e <malloc+0x36>
       if(p->s.size == nunits)
- 738:	02e48c63          	beq	s1,a4,770 <malloc+0xa8>
+ 748:	02e48c63          	beq	s1,a4,780 <malloc+0xa8>
         p->s.size -= nunits;
- 73c:	4137073b          	subw	a4,a4,s3
- 740:	c798                	sw	a4,8(a5)
+ 74c:	4137073b          	subw	a4,a4,s3
+ 750:	c798                	sw	a4,8(a5)
         p += p->s.size;
- 742:	02071693          	slli	a3,a4,0x20
- 746:	01c6d713          	srli	a4,a3,0x1c
- 74a:	97ba                	add	a5,a5,a4
+ 752:	02071693          	slli	a3,a4,0x20
+ 756:	01c6d713          	srli	a4,a3,0x1c
+ 75a:	97ba                	add	a5,a5,a4
         p->s.size = nunits;
- 74c:	0137a423          	sw	s3,8(a5)
+ 75c:	0137a423          	sw	s3,8(a5)
       freep = prevp;
- 750:	00000717          	auipc	a4,0x0
- 754:	0ca73c23          	sd	a0,216(a4) # 828 <freep>
+ 760:	00000717          	auipc	a4,0x0
+ 764:	0ca73c23          	sd	a0,216(a4) # 838 <freep>
       return (void*)(p + 1);
- 758:	01078513          	addi	a0,a5,16
+ 768:	01078513          	addi	a0,a5,16
       if((p = morecore(nunits)) == 0)
         return 0;
   }
 }
- 75c:	70e2                	ld	ra,56(sp)
- 75e:	7442                	ld	s0,48(sp)
- 760:	74a2                	ld	s1,40(sp)
- 762:	7902                	ld	s2,32(sp)
- 764:	69e2                	ld	s3,24(sp)
- 766:	6a42                	ld	s4,16(sp)
- 768:	6aa2                	ld	s5,8(sp)
- 76a:	6b02                	ld	s6,0(sp)
- 76c:	6121                	addi	sp,sp,64
- 76e:	8082                	ret
+ 76c:	70e2                	ld	ra,56(sp)
+ 76e:	7442                	ld	s0,48(sp)
+ 770:	74a2                	ld	s1,40(sp)
+ 772:	7902                	ld	s2,32(sp)
+ 774:	69e2                	ld	s3,24(sp)
+ 776:	6a42                	ld	s4,16(sp)
+ 778:	6aa2                	ld	s5,8(sp)
+ 77a:	6b02                	ld	s6,0(sp)
+ 77c:	6121                	addi	sp,sp,64
+ 77e:	8082                	ret
         prevp->s.ptr = p->s.ptr;
- 770:	6398                	ld	a4,0(a5)
- 772:	e118                	sd	a4,0(a0)
- 774:	bff1                	j	750 <malloc+0x88>
+ 780:	6398                	ld	a4,0(a5)
+ 782:	e118                	sd	a4,0(a0)
+ 784:	bff1                	j	760 <malloc+0x88>
   hp->s.size = nu;
- 776:	01652423          	sw	s6,8(a0)
+ 786:	01652423          	sw	s6,8(a0)
   free((void*)(hp + 1));
- 77a:	0541                	addi	a0,a0,16
- 77c:	00000097          	auipc	ra,0x0
- 780:	eca080e7          	jalr	-310(ra) # 646 <free>
+ 78a:	0541                	addi	a0,a0,16
+ 78c:	00000097          	auipc	ra,0x0
+ 790:	eca080e7          	jalr	-310(ra) # 656 <free>
   return freep;
- 784:	00093503          	ld	a0,0(s2)
+ 794:	00093503          	ld	a0,0(s2)
       if((p = morecore(nunits)) == 0)
- 788:	d971                	beqz	a0,75c <malloc+0x94>
+ 798:	d971                	beqz	a0,76c <malloc+0x94>
   for(p = prevp->s.ptr; ; prevp = p, p = p->s.ptr){
- 78a:	611c                	ld	a5,0(a0)
+ 79a:	611c                	ld	a5,0(a0)
     if(p->s.size >= nunits){
- 78c:	4798                	lw	a4,8(a5)
- 78e:	fa9775e3          	bgeu	a4,s1,738 <malloc+0x70>
+ 79c:	4798                	lw	a4,8(a5)
+ 79e:	fa9775e3          	bgeu	a4,s1,748 <malloc+0x70>
     if(p == freep)
- 792:	00093703          	ld	a4,0(s2)
- 796:	853e                	mv	a0,a5
- 798:	fef719e3          	bne	a4,a5,78a <malloc+0xc2>
+ 7a2:	00093703          	ld	a4,0(s2)
+ 7a6:	853e                	mv	a0,a5
+ 7a8:	fef719e3          	bne	a4,a5,79a <malloc+0xc2>
   p = sbrk(nu * sizeof(Header));
- 79c:	8552                	mv	a0,s4
- 79e:	00000097          	auipc	ra,0x0
- 7a2:	b80080e7          	jalr	-1152(ra) # 31e <sbrk>
+ 7ac:	8552                	mv	a0,s4
+ 7ae:	00000097          	auipc	ra,0x0
+ 7b2:	b70080e7          	jalr	-1168(ra) # 31e <sbrk>
   if(p == (char*)-1)
- 7a6:	fd5518e3          	bne	a0,s5,776 <malloc+0xae>
+ 7b6:	fd5518e3          	bne	a0,s5,786 <malloc+0xae>
         return 0;
- 7aa:	4501                	li	a0,0
- 7ac:	bf45                	j	75c <malloc+0x94>
+ 7ba:	4501                	li	a0,0
+ 7bc:	bf45                	j	76c <malloc+0x94>
Binary files ./user/zombie.o and ../xv6-labs-2021/user/zombie.o differ
diff -urN ./user/zombie.sym ../xv6-labs-2021/user/zombie.sym
--- ./user/zombie.sym	2021-12-05 17:54:42.000000000 +0800
+++ ../xv6-labs-2021/user/zombie.sym	2021-11-26 14:46:16.000000000 +0800
@@ -1,7 +1,7 @@
 0000000000000000 .text
-00000000000007b0 .rodata
-0000000000000828 .sbss
-0000000000000830 .bss
+00000000000007c0 .rodata
+0000000000000838 .sbss
+0000000000000840 .bss
 0000000000000000 .comment
 0000000000000000 .riscv.attributes
 0000000000000000 .debug_aranges
@@ -16,29 +16,31 @@
 0000000000000000 zombie.c
 0000000000000000 ulib.c
 0000000000000000 printf.c
-0000000000000336 putc
-0000000000000358 printint
-0000000000000810 digits
+0000000000000346 putc
+0000000000000368 printint
+0000000000000820 digits
 0000000000000000 umalloc.c
-0000000000000828 freep
-0000000000000830 base
+0000000000000838 freep
+0000000000000840 base
 000000000000002a strcpy
-0000000000000610 printf
-0000000000001021 __global_pointer$
+0000000000000620 printf
+0000000000001031 __global_pointer$
 00000000000001e4 memmove
 00000000000002de mknod
+0000000000000336 trace
 00000000000000e2 gets
-0000000000000821 __SDATA_BEGIN__
+0000000000000831 __SDATA_BEGIN__
 0000000000000316 getpid
 0000000000000276 memcpy
-00000000000006c8 malloc
+00000000000006d8 malloc
 0000000000000326 sleep
+000000000000033e sysinfo
 00000000000002a6 pipe
 00000000000002b6 write
 00000000000002ee fstat
-00000000000005e2 fprintf
+00000000000005f2 fprintf
 00000000000002c6 kill
-0000000000000404 vprintf
+0000000000000414 vprintf
 0000000000000306 chdir
 00000000000002ce exec
 000000000000029e wait
@@ -46,18 +48,18 @@
 00000000000002e6 unlink
 000000000000023c memcmp
 000000000000028e fork
-0000000000000840 __BSS_END__
+0000000000000850 __BSS_END__
 000000000000031e sbrk
 000000000000032e uptime
-0000000000000821 __bss_start
+0000000000000831 __bss_start
 000000000000009c memset
 0000000000000000 main
 0000000000000046 strcmp
 000000000000030e dup
-0000000000000821 __DATA_BEGIN__
+0000000000000831 __DATA_BEGIN__
 0000000000000156 stat
-0000000000000821 _edata
-0000000000000840 _end
+0000000000000831 _edata
+0000000000000850 _end
 00000000000002f6 link
 0000000000000296 exit
 000000000000019c atoi
@@ -66,4 +68,4 @@
 00000000000000be strchr
 00000000000002fe mkdir
 00000000000002be close
-0000000000000646 free
+0000000000000656 free
diff -urN ./xv6.out ../xv6-labs-2021/xv6.out
--- ./xv6.out	2021-12-05 17:54:50.000000000 +0800
+++ ../xv6-labs-2021/xv6.out	2021-11-26 14:09:46.000000000 +0800
@@ -1,11 +1,25 @@
 
 xv6 kernel is booting
 
-hart 2 starting
 hart 1 starting
+hart 2 starting
+page table 0x0000000087f6f000
+..0: pte 0x0000000021fdac01 pa 0x0000000087f6b000
+.. ..0: pte 0x0000000021fda801 pa 0x0000000087f6a000
+..255: pte 0x0000000021fdb801 pa 0x0000000087f6e000
+.. ..511: pte 0x0000000021fdb401 pa 0x0000000087f6d000
 init: starting sh
-$ sh < xargstest.sh
-$ echo DONE
-$ $ $ $ $ exec find failed
-exec xargs failed
-$ $ DONE
+page table 0x0000000087f64000
+..0: pte 0x0000000021fd8001 pa 0x0000000087f60000
+.. ..0: pte 0x0000000021fd7c01 pa 0x0000000087f5f000
+..255: pte 0x0000000021fd8c01 pa 0x0000000087f63000
+.. ..511: pte 0x0000000021fd8801 pa 0x0000000087f62000
+$ sysinfotest
+page table 0x0000000087f49000
+..0: pte 0x0000000021fd1401 pa 0x0000000087f45000
+.. ..0: pte 0x0000000021fd1001 pa 0x0000000087f44000
+..255: pte 0x0000000021fd2001 pa 0x0000000087f48000
+.. ..511: pte 0x0000000021fd1c01 pa 0x0000000087f47000
+sysinfotest: start
+sysinfotest: OK
+$ qemu-system-riscv64: terminating on signal 15 from pid 43826 (<unknown process>)
diff -urN ./xv6.out.find_curdir ../xv6-labs-2021/xv6.out.find_curdir
--- ./xv6.out.find_curdir	2021-12-05 17:54:48.000000000 +0800
+++ ../xv6-labs-2021/xv6.out.find_curdir	1970-01-01 08:00:00.000000000 +0800
@@ -1,10 +0,0 @@
-
-xv6 kernel is booting
-
-hart 1 starting
-hart 2 starting
-init: starting sh
-$ echo > IIs6w4wh
-$ find . IIs6w4wh
-exec find failed
-$ qemu-system-riscv64: terminating on signal 15 from pid 35511 (<unknown process>)
diff -urN ./xv6.out.find_recursive ../xv6-labs-2021/xv6.out.find_recursive
--- ./xv6.out.find_recursive	2021-12-05 17:54:49.000000000 +0800
+++ ../xv6-labs-2021/xv6.out.find_recursive	1970-01-01 08:00:00.000000000 +0800
@@ -1,15 +0,0 @@
-
-xv6 kernel is booting
-
-hart 2 starting
-hart 1 starting
-init: starting sh
-$ mkdir TXoNhd0C
-$ echo > TXoNhd0C/g9KeiUzv
-$ mkdir TXoNhd0C/Gglck3QD
-$ echo > TXoNhd0C/Gglck3QD/g9KeiUzv
-$ mkdir dJn9eHBM
-$ echo > dJn9eHBM/g9KeiUzv
-$ find . g9KeiUzv
-exec find failed
-$ qemu-system-riscv64: terminating on signal 15 from pid 35538 (<unknown process>)
diff -urN ./xv6.out.pingpong ../xv6-labs-2021/xv6.out.pingpong
--- ./xv6.out.pingpong	2021-12-05 17:54:46.000000000 +0800
+++ ../xv6-labs-2021/xv6.out.pingpong	1970-01-01 08:00:00.000000000 +0800
@@ -1,11 +0,0 @@
-
-xv6 kernel is booting
-
-hart 1 starting
-hart 2 starting
-init: starting sh
-$ pingpong
-exec pingpong failed
-$ echo OK
-OK
-$ qemu-system-riscv64: terminating on signal 15 from pid 35457 (<unknown process>)
diff -urN ./xv6.out.primes ../xv6-labs-2021/xv6.out.primes
--- ./xv6.out.primes	2021-12-05 17:54:47.000000000 +0800
+++ ../xv6-labs-2021/xv6.out.primes	1970-01-01 08:00:00.000000000 +0800
@@ -1,11 +0,0 @@
-
-xv6 kernel is booting
-
-hart 2 starting
-hart 1 starting
-init: starting sh
-$ primes
-exec primes failed
-$ echo OK
-OK
-$ qemu-system-riscv64: terminating on signal 15 from pid 35484 (<unknown process>)
diff -urN ./xv6.out.sleep ../xv6-labs-2021/xv6.out.sleep
--- ./xv6.out.sleep	2021-12-05 17:54:45.000000000 +0800
+++ ../xv6-labs-2021/xv6.out.sleep	1970-01-01 08:00:00.000000000 +0800
@@ -1,11 +0,0 @@
-
-xv6 kernel is booting
-
-hart 1 starting
-hart 2 starting
-init: starting sh
-$ sleep 10
-exec sleep failed
-$ echo FAIL
-FAIL
-$ qemu-system-riscv64: terminating on signal 15 from pid 35430 (<unknown process>)
diff -urN ./xv6.out.sleep_no_args ../xv6-labs-2021/xv6.out.sleep_no_args
--- ./xv6.out.sleep_no_args	2021-12-05 17:54:44.000000000 +0800
+++ ../xv6-labs-2021/xv6.out.sleep_no_args	1970-01-01 08:00:00.000000000 +0800
@@ -1,11 +0,0 @@
-
-xv6 kernel is booting
-
-hart 1 starting
-hart 2 starting
-init: starting sh
-$ sleep
-exec sleep failed
-$ echo OK
-OK
-$ qemu-system-riscv64: terminating on signal 15 from pid 35403 (<unknown process>)
diff -urN ./xv6.out.xargs ../xv6-labs-2021/xv6.out.xargs
--- ./xv6.out.xargs	2021-12-05 17:54:50.000000000 +0800
+++ ../xv6-labs-2021/xv6.out.xargs	1970-01-01 08:00:00.000000000 +0800
@@ -1,11 +0,0 @@
-
-xv6 kernel is booting
-
-hart 2 starting
-hart 1 starting
-init: starting sh
-$ sh < xargstest.sh
-$ echo DONE
-$ $ $ $ $ exec find failed
-exec xargs failed
-$ $ DONE
